!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Render=t()}}(function(){return function(){return function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var g=new Error("Cannot find module '"+a+"'");throw g.code="MODULE_NOT_FOUND",g}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){return i(e[a][1][t]||t)},c,c.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}}()({1:[function(t,e,r){"use strict";e.exports=function(t){var e=(t=t||{}).eye||[0,0,1],r=t.center||[0,0,0],s=t.up||[0,1,0],l=t.distanceLimits||[0,1/0],g=t.mode||"turntable",c=n(),u=i(),h=o();return c.setDistanceLimits(l[0],l[1]),c.lookAt(0,e,r,s),u.setDistanceLimits(l[0],l[1]),u.lookAt(0,e,r,s),h.setDistanceLimits(l[0],l[1]),h.lookAt(0,e,r,s),new a({turntable:c,orbit:u,matrix:h},g)};var n=t("turntable-camera-controller"),i=t("orbit-camera-controller"),o=t("matrix-camera-controller");function a(t,e){this._controllerNames=Object.keys(t),this._controllerList=this._controllerNames.map(function(e){return t[e]}),this._mode=e,this._active=t[e],this._active||(this._mode="turntable",this._active=t.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var s=a.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(t){for(var e=t[0],r=[],n=0;n<t[1];++n)r.push("a"+n);var i="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+t[0]+"("+r.join()+")}";s[e]=Function.apply(null,r.concat(i))}),s.recalcMatrix=function(t){this._active.recalcMatrix(t)},s.getDistance=function(t){return this._active.getDistance(t)},s.getDistanceLimits=function(t){return this._active.getDistanceLimits(t)},s.lastT=function(){return this._active.lastT()},s.setMode=function(t){if(t!==this._mode){var e=this._controllerNames.indexOf(t);if(!(e<0)){var r=this._active,n=this._controllerList[e],i=Math.max(r.lastT(),n.lastT());r.recalcMatrix(i),n.setMatrix(i,r.computedMatrix),this._active=n,this._mode=t,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},s.getMode=function(){return this._mode}},{"matrix-camera-controller":251,"orbit-camera-controller":268,"turntable-camera-controller":697}],2:[function(t,e,r){"use strict";var n="undefined"==typeof WeakMap?t("weak-map"):WeakMap,i=t("gl-buffer"),o=t("gl-vao"),a=new n;e.exports=function(t){var e=a.get(t),r=e&&(e._triangleBuffer.handle||e._triangleBuffer.buffer);if(!r||!t.isBuffer(r)){var n=i(t,new Float32Array([-1,-1,-1,4,4,-1]));(e=o(t,[{buffer:n,type:t.FLOAT,size:2}]))._triangleBuffer=n,a.set(t,e)}e.bind(),t.drawArrays(t.TRIANGLES,0,3),e.unbind()}},{"gl-buffer":161,"gl-vao":213,"weak-map":717}],3:[function(t,e,r){e.exports=function(t){var e=0,r=0,n=0,i=0;return t.map(function(t){var o=(t=t.slice())[0],a=o.toUpperCase();if(o!=a)switch(t[0]=a,o){case"a":t[6]+=n,t[7]+=i;break;case"v":t[1]+=i;break;case"h":t[1]+=n;break;default:for(var s=1;s<t.length;)t[s++]+=n,t[s++]+=i}switch(a){case"Z":n=e,i=r;break;case"H":n=t[1];break;case"V":i=t[1];break;case"M":n=e=t[1],i=r=t[2];break;default:n=t[t.length-2],i=t[t.length-1]}return t})}},{}],4:[function(t,e,r){var n=t("pad-left");e.exports=function(t,e,r){e="number"==typeof e?e:1,r=r||": ";var i=t.split(/\r?\n/),o=String(i.length+e-1).length;return i.map(function(t,i){var a=i+e,s=String(a).length,l=n(a,o-s);return l+r+t}).join("\n")}},{"pad-left":269}],5:[function(t,e,r){"use strict";e.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[0];for(var r=t[0].length,n=[t[0]],o=[0],a=1;a<e;++a)if(n.push(t[a]),i(n,r)){if(o.push(a),o.length===r+1)return o}else n.pop();return o};var n=t("robust-orientation");function i(t,e){for(var r=new Array(e+1),i=0;i<t.length;++i)r[i]=t[i];for(i=0;i<=t.length;++i){for(var o=t.length;o<=e;++o){for(var a=new Array(e),s=0;s<e;++s)a[s]=Math.pow(o+1-i,s);r[o]=a}if(n.apply(void 0,r))return!0}return!1}},{"robust-orientation":669}],6:[function(t,e,r){"use strict";e.exports=function(t,e){if(!t||null==t.length)throw Error("Argument should be an array");e=null==e?1:Math.floor(e);for(var r=Array(2*e),n=0;n<e;n++){for(var i=-1/0,o=1/0,a=n,s=t.length;a<s;a+=e)t[a]>i&&(i=t[a]),t[a]<o&&(o=t[a]);r[n]=o,r[e+n]=i}return r}},{}],7:[function(t,e,r){"use strict";var n=t("array-bounds");e.exports=function(t,e,r){if(!t||null==t.length)throw Error("Argument should be an array");null==e&&(e=1);null==r&&(r=n(t,e));for(var i=0;i<e;i++){var o=r[e+i],a=r[i],s=i,l=t.length;if(o===1/0&&a===-1/0)for(s=i;s<l;s+=e)t[s]=t[s]===o?1:t[s]===a?0:.5;else if(o===1/0)for(s=i;s<l;s+=e)t[s]=t[s]===o?1:0;else if(a===-1/0)for(s=i;s<l;s+=e)t[s]=t[s]===a?0:1;else{var g=o-a;for(s=i;s<l;s+=e)isNaN(t[s])||(t[s]=0===g?.5:(t[s]-a)/g)}}return t}},{"array-bounds":6}],8:[function(t,e,r){e.exports=function(t,e){var r="number"==typeof t,n="number"==typeof e;r&&!n?(e=t,t=0):r||n||(t=0,e=0);var i=(e|=0)-(t|=0);if(i<0)throw new Error("array length must be positive");for(var o=new Array(i),a=0,s=t;a<i;a++,s++)o[a]=s;return o}},{}],9:[function(t,e,r){(function(r){"use strict";var n=t("object-assign");function i(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0}function o(t){return r.Buffer&&"function"==typeof r.Buffer.isBuffer?r.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var a=t("util/"),s=Object.prototype.hasOwnProperty,l=Array.prototype.slice,g="foo"===function(){}.name;function c(t){return Object.prototype.toString.call(t)}function u(t){return!o(t)&&("function"==typeof r.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}var h=e.exports=I,d=/\s*function\s+([^\(\s]*)\s*/;function A(t){if(a.isFunction(t)){if(g)return t.name;var e=t.toString().match(d);return e&&e[1]}}function f(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function C(t){if(g||!a.isFunction(t))return a.inspect(t);var e=A(t);return"[Function"+(e?": "+e:"")+"]"}function p(t,e,r,n,i){throw new h.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function I(t,e){t||p(t,!0,e,"==",h.ok)}function v(t,e,r,n){if(t===e)return!0;if(o(t)&&o(e))return 0===i(t,e);if(a.isDate(t)&&a.isDate(e))return t.getTime()===e.getTime();if(a.isRegExp(t)&&a.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(u(t)&&u(e)&&c(t)===c(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===i(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(o(t)!==o(e))return!1;var s=(n=n||{actual:[],expected:[]}).actual.indexOf(t);return-1!==s&&s===n.expected.indexOf(e)||(n.actual.push(t),n.expected.push(e),function(t,e,r,n){if(null===t||void 0===t||null===e||void 0===e)return!1;if(a.isPrimitive(t)||a.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=m(t),o=m(e);if(i&&!o||!i&&o)return!1;if(i)return t=l.call(t),e=l.call(e),v(t,e,r);var s,g,c=x(t),u=x(e);if(c.length!==u.length)return!1;for(c.sort(),u.sort(),g=c.length-1;g>=0;g--)if(c[g]!==u[g])return!1;for(g=c.length-1;g>=0;g--)if(s=c[g],!v(t[s],e[s],r,n))return!1;return!0}(t,e,r,n))}return r?t===e:t==e}function m(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function y(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function b(t,e,r,n){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!i&&p(i,r,"Missing expected exception"+n);var o="string"==typeof n,s=!t&&a.isError(i),l=!t&&i&&!r;if((s&&o&&y(i,r)||l)&&p(i,r,"Got unwanted exception"+n),t&&i&&r&&!y(i,r)||!t&&i)throw i}h.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=f(C((e=this).actual),128)+" "+e.operator+" "+f(C(e.expected),128),this.generatedMessage=!0);var r=t.stackStartFunction||p;if(Error.captureStackTrace)Error.captureStackTrace(this,r);else{var n=new Error;if(n.stack){var i=n.stack,o=A(r),a=i.indexOf("\n"+o);if(a>=0){var s=i.indexOf("\n",a+1);i=i.substring(s+1)}this.stack=i}}},a.inherits(h.AssertionError,Error),h.fail=p,h.ok=I,h.equal=function(t,e,r){t!=e&&p(t,e,r,"==",h.equal)},h.notEqual=function(t,e,r){t==e&&p(t,e,r,"!=",h.notEqual)},h.deepEqual=function(t,e,r){v(t,e,!1)||p(t,e,r,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(t,e,r){v(t,e,!0)||p(t,e,r,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(t,e,r){v(t,e,!1)&&p(t,e,r,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function t(e,r,n){v(e,r,!0)&&p(e,r,n,"notDeepStrictEqual",t)},h.strictEqual=function(t,e,r){t!==e&&p(t,e,r,"===",h.strictEqual)},h.notStrictEqual=function(t,e,r){t===e&&p(t,e,r,"!==",h.notStrictEqual)},h.throws=function(t,e,r){b(!0,t,e,r)},h.doesNotThrow=function(t,e,r){b(!1,t,e,r)},h.ifError=function(t){if(t)throw t},h.strict=n(function t(e,r){e||p(e,!0,r,"==",t)},h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var x=Object.keys||function(t){var e=[];for(var r in t)s.call(t,r)&&e.push(r);return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":266,"util/":12}],10:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],11:[function(t,e,r){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],12:[function(t,e,r){(function(e,n){var i=/%[sdj%]/g;r.format=function(t){if(!p(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(s(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,o=n.length,a=String(t).replace(i,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}}),l=n[r];r<o;l=n[++r])f(l)||!m(l)?a+=" "+l:a+=" "+s(l);return a},r.deprecate=function(t,i){if(I(n.process))return function(){return r.deprecate(t,i).apply(this,arguments)};if(!0===e.noDeprecation)return t;var o=!1;return function(){if(!o){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),o=!0}return t.apply(this,arguments)}};var o,a={};function s(t,e){var n={seen:[],stylize:g};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),A(e)?n.showHidden=e:e&&r._extend(n,e),I(n.showHidden)&&(n.showHidden=!1),I(n.depth)&&(n.depth=2),I(n.colors)&&(n.colors=!1),I(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),c(n,t,n.depth)}function l(t,e){var r=s.styles[e];return r?"["+s.colors[r][0]+"m"+t+"["+s.colors[r][1]+"m":t}function g(t,e){return t}function c(t,e,n){if(t.customInspect&&e&&x(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return p(i)||(i=c(t,i,n)),i}var o=function(t,e){if(I(e))return t.stylize("undefined","undefined");if(p(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(C(e))return t.stylize(""+e,"number");if(A(e))return t.stylize(""+e,"boolean");if(f(e))return t.stylize("null","null")}(t,e);if(o)return o;var a=Object.keys(e),s=function(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),b(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return u(e);if(0===a.length){if(x(e)){var l=e.name?": "+e.name:"";return t.stylize("[Function"+l+"]","special")}if(v(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(y(e))return t.stylize(Date.prototype.toString.call(e),"date");if(b(e))return u(e)}var g,m="",_=!1,w=["{","}"];(d(e)&&(_=!0,w=["[","]"]),x(e))&&(m=" [Function"+(e.name?": "+e.name:"")+"]");return v(e)&&(m=" "+RegExp.prototype.toString.call(e)),y(e)&&(m=" "+Date.prototype.toUTCString.call(e)),b(e)&&(m=" "+u(e)),0!==a.length||_&&0!=e.length?n<0?v(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),g=_?function(t,e,r,n,i){for(var o=[],a=0,s=e.length;a<s;++a)T(e,String(a))?o.push(h(t,e,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,e,r,n,i,!0))}),o}(t,e,n,s,a):a.map(function(r){return h(t,e,n,s,r,_)}),t.seen.pop(),function(t,e,r){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(g,m,w)):w[0]+m+w[1]}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,r,n,i,o){var a,s,l;if((l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),T(n,i)||(a="["+i+"]"),s||(t.seen.indexOf(l.value)<0?(s=f(r)?c(t,l.value,null):c(t,l.value,r-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),I(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function d(t){return Array.isArray(t)}function A(t){return"boolean"==typeof t}function f(t){return null===t}function C(t){return"number"==typeof t}function p(t){return"string"==typeof t}function I(t){return void 0===t}function v(t){return m(t)&&"[object RegExp]"===_(t)}function m(t){return"object"==typeof t&&null!==t}function y(t){return m(t)&&"[object Date]"===_(t)}function b(t){return m(t)&&("[object Error]"===_(t)||t instanceof Error)}function x(t){return"function"==typeof t}function _(t){return Object.prototype.toString.call(t)}function w(t){return t<10?"0"+t.toString(10):t.toString(10)}r.debuglog=function(t){if(I(o)&&(o=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!a[t])if(new RegExp("\\b"+t+"\\b","i").test(o)){var n=e.pid;a[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else a[t]=function(){};return a[t]},r.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=A,r.isNull=f,r.isNullOrUndefined=function(t){return null==t},r.isNumber=C,r.isString=p,r.isSymbol=function(t){return"symbol"==typeof t},r.isUndefined=I,r.isRegExp=v,r.isObject=m,r.isDate=y,r.isError=b,r.isFunction=x,r.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},r.isBuffer=t("./support/isBuffer");var k=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}r.log=function(){var t,e;console.log("%s - %s",(t=new Date,e=[w(t.getHours()),w(t.getMinutes()),w(t.getSeconds())].join(":"),[t.getDate(),k[t.getMonth()],e].join(" ")),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!m(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":11,_process:651,inherits:10}],13:[function(t,e,r){e.exports=function(t){return atob(t)}},{}],14:[function(t,e,r){"use strict";e.exports=function(t,e){for(var r=e.length,o=new Array(r+1),a=0;a<r;++a){for(var s=new Array(r+1),l=0;l<=r;++l)s[l]=t[l][a];o[a]=s}o[r]=new Array(r+1);for(var a=0;a<=r;++a)o[r][a]=1;for(var g=new Array(r+1),a=0;a<r;++a)g[a]=e[a];g[r]=1;var c=n(o,g),u=i(c[r+1]);0===u&&(u=1);for(var h=new Array(r+1),a=0;a<=r;++a)h[a]=i(c[a])/u;return h};var n=t("robust-linear-solve");function i(t){for(var e=0,r=0;r<t.length;++r)e+=t[r];return e}},{"robust-linear-solve":668}],15:[function(t,e,r){"use strict";r.byteLength=function(t){var e=g(t),r=e[0],n=e[1];return 3*(r+n)/4-n},r.toByteArray=function(t){var e,r,n=g(t),a=n[0],s=n[1],l=new o(function(t,e,r){return 3*(e+r)/4-r}(0,a,s)),c=0,u=s>0?a-4:a;for(r=0;r<u;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;2===s&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,l[c++]=255&e);1===s&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e);return l},r.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(c(t,a,a+16383>s?s:a+16383));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function g(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,r){for(var i,o,a=[],s=e;s<r;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],16:[function(t,e,r){"use strict";var n=t("./lib/rationalize");e.exports=function(t,e){return n(t[0].mul(e[1]).add(e[0].mul(t[1])),t[1].mul(e[1]))}},{"./lib/rationalize":26}],17:[function(t,e,r){"use strict";e.exports=function(t,e){return t[0].mul(e[1]).cmp(e[0].mul(t[1]))}},{}],18:[function(t,e,r){"use strict";var n=t("./lib/rationalize");e.exports=function(t,e){return n(t[0].mul(e[1]),t[1].mul(e[0]))}},{"./lib/rationalize":26}],19:[function(t,e,r){"use strict";var n=t("./is-rat"),i=t("./lib/is-bn"),o=t("./lib/num-to-bn"),a=t("./lib/str-to-bn"),s=t("./lib/rationalize"),l=t("./div");e.exports=function t(e,r){if(n(e))return r?l(e,t(r)):[e[0].clone(),e[1].clone()];var g=0;var c,u;if(i(e))c=e.clone();else if("string"==typeof e)c=a(e);else{if(0===e)return[o(0),o(1)];if(e===Math.floor(e))c=o(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),g-=256;c=o(e)}}if(n(r))c.mul(r[1]),u=r[0].clone();else if(i(r))u=r.clone();else if("string"==typeof r)u=a(r);else if(r)if(r===Math.floor(r))u=o(r);else{for(;r!==Math.floor(r);)r*=Math.pow(2,256),g+=256;u=o(r)}else u=o(1);g>0?c=c.ushln(g):g<0&&(u=u.ushln(-g));return s(c,u)}},{"./div":18,"./is-rat":20,"./lib/is-bn":24,"./lib/num-to-bn":25,"./lib/rationalize":26,"./lib/str-to-bn":27}],20:[function(t,e,r){"use strict";var n=t("./lib/is-bn");e.exports=function(t){return Array.isArray(t)&&2===t.length&&n(t[0])&&n(t[1])}},{"./lib/is-bn":24}],21:[function(t,e,r){"use strict";var n=t("bn.js");e.exports=function(t){return t.cmp(new n(0))}},{"bn.js":35}],22:[function(t,e,r){"use strict";var n=t("./bn-sign");e.exports=function(t){var e=t.length,r=t.words,i=0;if(1===e)i=r[0];else if(2===e)i=r[0]+67108864*r[1];else for(var o=0;o<e;o++){var a=r[o];i+=a*Math.pow(67108864,o)}return n(t)*i}},{"./bn-sign":21}],23:[function(t,e,r){"use strict";var n=t("double-bits"),i=t("bit-twiddle").countTrailingZeros;e.exports=function(t){var e=i(n.lo(t));if(e<32)return e;var r=i(n.hi(t));if(r>20)return 52;return r+32}},{"bit-twiddle":33,"double-bits":77}],24:[function(t,e,r){"use strict";t("bn.js");e.exports=function(t){return t&&"object"==typeof t&&Boolean(t.words)}},{"bn.js":35}],25:[function(t,e,r){"use strict";var n=t("bn.js"),i=t("double-bits");e.exports=function(t){var e=i.exponent(t);return e<52?new n(t):new n(t*Math.pow(2,52-e)).ushln(e-52)}},{"bn.js":35,"double-bits":77}],26:[function(t,e,r){"use strict";var n=t("./num-to-bn"),i=t("./bn-sign");e.exports=function(t,e){var r=i(t),o=i(e);if(0===r)return[n(0),n(1)];if(0===o)return[n(0),n(0)];o<0&&(t=t.neg(),e=e.neg());var a=t.gcd(e);if(a.cmpn(1))return[t.div(a),e.div(a)];return[t,e]}},{"./bn-sign":21,"./num-to-bn":25}],27:[function(t,e,r){"use strict";var n=t("bn.js");e.exports=function(t){return new n(t)}},{"bn.js":35}],28:[function(t,e,r){"use strict";var n=t("./lib/rationalize");e.exports=function(t,e){return n(t[0].mul(e[0]),t[1].mul(e[1]))}},{"./lib/rationalize":26}],29:[function(t,e,r){"use strict";var n=t("./lib/bn-sign");e.exports=function(t){return n(t[0])*n(t[1])}},{"./lib/bn-sign":21}],30:[function(t,e,r){"use strict";var n=t("./lib/rationalize");e.exports=function(t,e){return n(t[0].mul(e[1]).sub(t[1].mul(e[0])),t[1].mul(e[1]))}},{"./lib/rationalize":26}],31:[function(t,e,r){"use strict";var n=t("./lib/bn-to-num"),i=t("./lib/ctz");e.exports=function(t){var e=t[0],r=t[1];if(0===e.cmpn(0))return 0;var o=e.abs().divmod(r.abs()),a=o.div,s=n(a),l=o.mod,g=e.negative!==r.negative?-1:1;if(0===l.cmpn(0))return g*s;if(s){var c=i(s)+4,u=n(l.ushln(c).divRound(r));return g*(s+u*Math.pow(2,-c))}var h=r.bitLength()-l.bitLength()+53,u=n(l.ushln(h).divRound(r));return h<1023?g*u*Math.pow(2,-h):(u*=Math.pow(2,-1023),g*u*Math.pow(2,1023-h))}},{"./lib/bn-to-num":22,"./lib/ctz":23}],32:[function(t,e,r){"use strict";function n(t,e,r,n,i){var o=["function ",t,"(a,l,h,",n.join(","),"){",i?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return i?e.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",e,"){i=m;"),r?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),i?o.push("return -1};"):o.push("return i};"),o.join("")}function i(t,e,r,i){return new Function([n("A","x"+t+"y",e,["y"],i),n("P","c(x,y)"+t+"0",e,["y","c"],i),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""))()}e.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],33:[function(t,e,r){"use strict";"use restrict";function n(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}r.INT_BITS=32,r.INT_MAX=2147483647,r.INT_MIN=-1<<31,r.sign=function(t){return(t>0)-(t<0)},r.abs=function(t){var e=t>>31;return(t^e)-e},r.min=function(t,e){return e^(t^e)&-(t<e)},r.max=function(t,e){return t^(t^e)&-(t<e)},r.isPow2=function(t){return!(t&t-1||!t)},r.log2=function(t){var e,r;return e=(t>65535)<<4,e|=r=((t>>>=e)>255)<<3,e|=r=((t>>>=r)>15)<<2,(e|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1},r.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},r.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},r.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},r.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var i=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(i),r.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},r.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},r.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},r.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},r.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},r.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},{}],34:[function(t,e,r){"use strict";var n=t("clamp");e.exports=function(t,e){e||(e={});var r,a,s,l,g,c,u,h,d,A,f,C=null==e.cutoff?.25:e.cutoff,p=null==e.radius?8:e.radius,I=e.channel||0;if(ArrayBuffer.isView(t)||Array.isArray(t)){if(!e.width||!e.height)throw Error("For raw data width and height should be provided by options");r=e.width,a=e.height,l=t,c=e.stride?e.stride:Math.floor(t.length/r/a)}else window.HTMLCanvasElement&&t instanceof window.HTMLCanvasElement?(u=(h=t).getContext("2d"),r=h.width,a=h.height,d=u.getImageData(0,0,r,a),l=d.data,c=4):window.CanvasRenderingContext2D&&t instanceof window.CanvasRenderingContext2D?(h=t.canvas,u=t,r=h.width,a=h.height,d=u.getImageData(0,0,r,a),l=d.data,c=4):window.ImageData&&t instanceof window.ImageData&&(d=t,r=t.width,a=t.height,l=d.data,c=4);if(s=Math.max(r,a),window.Uint8ClampedArray&&l instanceof window.Uint8ClampedArray||window.Uint8Array&&l instanceof window.Uint8Array)for(g=l,l=Array(r*a),A=0,f=g.length;A<f;A++)l[A]=g[A*c+I]/255;else if(1!==c)throw Error("Raw data can have only 1 value per pixel");var v=Array(r*a),m=Array(r*a),y=Array(s),b=Array(s),x=Array(s+1),_=Array(s);for(A=0,f=r*a;A<f;A++){var w=l[A];v[A]=1===w?0:0===w?i:Math.pow(Math.max(0,.5-w),2),m[A]=1===w?i:0===w?0:Math.pow(Math.max(0,w-.5),2)}o(v,r,a,y,b,_,x),o(m,r,a,y,b,_,x);var k=window.Float32Array?new Float32Array(r*a):new Array(r*a);for(A=0,f=r*a;A<f;A++)k[A]=n(1-((v[A]-m[A])/p+C),0,1);return k};var i=1e20;function o(t,e,r,n,i,o,s){for(var l=0;l<e;l++){for(var g=0;g<r;g++)n[g]=t[g*e+l];for(a(n,i,o,s,r),g=0;g<r;g++)t[g*e+l]=i[g]}for(g=0;g<r;g++){for(l=0;l<e;l++)n[l]=t[g*e+l];for(a(n,i,o,s,e),l=0;l<e;l++)t[g*e+l]=Math.sqrt(i[l])}}function a(t,e,r,n,o){r[0]=0,n[0]=-i,n[1]=+i;for(var a=1,s=0;a<o;a++){for(var l=(t[a]+a*a-(t[r[s]]+r[s]*r[s]))/(2*a-2*r[s]);l<=n[s];)s--,l=(t[a]+a*a-(t[r[s]]+r[s]*r[s]))/(2*a-2*r[s]);r[++s]=a,n[s]=l,n[s+1]=+i}for(a=0,s=0;a<o;a++){for(;n[s+1]<a;)s++;e[a]=(a-r[s])*(a-r[s])+t[r[s]]}}},{clamp:50}],35:[function(t,e,r){!function(e,r){"use strict";function n(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var a;"object"==typeof e?e.exports=o:r.BN=o,o.BN=o,o.wordSize=26;try{a=t("buffer").Buffer}catch(t){}function s(t,e,r){for(var n=0,i=Math.min(t.length,r),o=e;o<i;o++){var a=t.charCodeAt(o)-48;n<<=4,n|=a>=49&&a<=54?a-49+10:a>=17&&a<=22?a-17+10:15&a}return n}function l(t,e,r,n){for(var i=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=n,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===r)for(i=t.length-1,o=0;i>=0;i-=3)a=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===r)for(i=0,o=0;i<t.length;i+=3)a=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,i,o=0;for(r=t.length-6,n=0;r>=e;r-=6)i=s(t,r,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,n++);r+6!==e&&(i=s(t,e,r+6),this.words[n]|=i<<o&67108863,this.words[n+1]|=i>>>26-o&4194303),this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,g=0,c=r;c<s;c+=n)g=l(t,c,c+n,e),this.imuln(i),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g);if(0!==a){var u=1;for(g=l(t,c,t.length,e),c=0;c<a;c++)u*=e;this.imuln(u),this.words[0]+g<67108864?this.words[0]+=g:this._iaddn(g)}},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var g=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],u=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,l=a/67108864|0;r.words[0]=s;for(var g=1;g<n;g++){for(var c=l>>>26,u=67108863&l,h=Math.min(g,e.length-1),d=Math.max(0,g-t.length+1);d<=h;d++){var A=g-d|0;c+=(a=(i=0|t.words[A])*(o=0|e.words[d])+u)/67108864|0,u=67108863&a}r.words[g]=0|u,l=0|c}return 0!==l?r.words[g]=0|l:r.length--,r.strip()}o.prototype.toString=function(t,e){var r;if(t=t||10,e=0|e||1,16===t||"hex"===t){r="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],l=(16777215&(s<<i|o)).toString(16);r=0!==(o=s>>>24-i&16777215)||a!==this.length-1?g[6-l.length]+l+r:l+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var h=c[t],d=u[t];r="";var A=this.clone();for(A.negative=0;!A.isZero();){var f=A.modn(d).toString(t);r=(A=A.idivn(d)).isZero()?f+r:g[h-f.length]+f+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==a),this.toArrayLike(a,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i=this.byteLength(),o=r||Math.max(1,i);n(i<=o,"byte array longer than desired length"),n(o>0,"Requested array length <= 0"),this.strip();var a,s,l="le"===e,g=new t(o),c=this.clone();if(l){for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),g[s]=a;for(;s<o;s++)g[s]=0}else{for(s=0;s<o-i;s++)g[s]=0;for(s=0;!c.isZero();s++)a=c.andln(255),c.iushrn(8),g[o-s-1]=a}return g},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n(0==(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n(0==(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n(0==(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),this.words[r]=e?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=t):(r=t,n=this);for(var o=0,a=0;a<n.length;a++)o=(e=(0|r.words[a])-(0|n.words[a])+o)>>26,this.words[a]=67108863&e;for(;0!==o&&a<r.length;a++)o=(e=(0|r.words[a])+o)>>26,this.words[a]=67108863&e;if(0===o&&a<r.length&&r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this.length=Math.max(this.length,a),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var n,i,o,a=t.words,s=e.words,l=r.words,g=0,c=0|a[0],u=8191&c,h=c>>>13,d=0|a[1],A=8191&d,f=d>>>13,C=0|a[2],p=8191&C,I=C>>>13,v=0|a[3],m=8191&v,y=v>>>13,b=0|a[4],x=8191&b,_=b>>>13,w=0|a[5],k=8191&w,T=w>>>13,M=0|a[6],E=8191&M,O=M>>>13,S=0|a[7],R=8191&S,D=S>>>13,L=0|a[8],P=8191&L,N=L>>>13,z=0|a[9],F=8191&z,B=z>>>13,j=0|s[0],V=8191&j,G=j>>>13,U=0|s[1],Z=8191&U,H=U>>>13,W=0|s[2],Y=8191&W,X=W>>>13,q=0|s[3],Q=8191&q,K=q>>>13,J=0|s[4],$=8191&J,tt=J>>>13,et=0|s[5],rt=8191&et,nt=et>>>13,it=0|s[6],ot=8191&it,at=it>>>13,st=0|s[7],lt=8191&st,gt=st>>>13,ct=0|s[8],ut=8191&ct,ht=ct>>>13,dt=0|s[9],At=8191&dt,ft=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var Ct=(g+(n=Math.imul(u,V))|0)+((8191&(i=(i=Math.imul(u,G))+Math.imul(h,V)|0))<<13)|0;g=((o=Math.imul(h,G))+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(A,V),i=(i=Math.imul(A,G))+Math.imul(f,V)|0,o=Math.imul(f,G);var pt=(g+(n=n+Math.imul(u,Z)|0)|0)+((8191&(i=(i=i+Math.imul(u,H)|0)+Math.imul(h,Z)|0))<<13)|0;g=((o=o+Math.imul(h,H)|0)+(i>>>13)|0)+(pt>>>26)|0,pt&=67108863,n=Math.imul(p,V),i=(i=Math.imul(p,G))+Math.imul(I,V)|0,o=Math.imul(I,G),n=n+Math.imul(A,Z)|0,i=(i=i+Math.imul(A,H)|0)+Math.imul(f,Z)|0,o=o+Math.imul(f,H)|0;var It=(g+(n=n+Math.imul(u,Y)|0)|0)+((8191&(i=(i=i+Math.imul(u,X)|0)+Math.imul(h,Y)|0))<<13)|0;g=((o=o+Math.imul(h,X)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,n=Math.imul(m,V),i=(i=Math.imul(m,G))+Math.imul(y,V)|0,o=Math.imul(y,G),n=n+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,H)|0)+Math.imul(I,Z)|0,o=o+Math.imul(I,H)|0,n=n+Math.imul(A,Y)|0,i=(i=i+Math.imul(A,X)|0)+Math.imul(f,Y)|0,o=o+Math.imul(f,X)|0;var vt=(g+(n=n+Math.imul(u,Q)|0)|0)+((8191&(i=(i=i+Math.imul(u,K)|0)+Math.imul(h,Q)|0))<<13)|0;g=((o=o+Math.imul(h,K)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(x,V),i=(i=Math.imul(x,G))+Math.imul(_,V)|0,o=Math.imul(_,G),n=n+Math.imul(m,Z)|0,i=(i=i+Math.imul(m,H)|0)+Math.imul(y,Z)|0,o=o+Math.imul(y,H)|0,n=n+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,X)|0)+Math.imul(I,Y)|0,o=o+Math.imul(I,X)|0,n=n+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,K)|0)+Math.imul(f,Q)|0,o=o+Math.imul(f,K)|0;var mt=(g+(n=n+Math.imul(u,$)|0)|0)+((8191&(i=(i=i+Math.imul(u,tt)|0)+Math.imul(h,$)|0))<<13)|0;g=((o=o+Math.imul(h,tt)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(k,V),i=(i=Math.imul(k,G))+Math.imul(T,V)|0,o=Math.imul(T,G),n=n+Math.imul(x,Z)|0,i=(i=i+Math.imul(x,H)|0)+Math.imul(_,Z)|0,o=o+Math.imul(_,H)|0,n=n+Math.imul(m,Y)|0,i=(i=i+Math.imul(m,X)|0)+Math.imul(y,Y)|0,o=o+Math.imul(y,X)|0,n=n+Math.imul(p,Q)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(I,Q)|0,o=o+Math.imul(I,K)|0,n=n+Math.imul(A,$)|0,i=(i=i+Math.imul(A,tt)|0)+Math.imul(f,$)|0,o=o+Math.imul(f,tt)|0;var yt=(g+(n=n+Math.imul(u,rt)|0)|0)+((8191&(i=(i=i+Math.imul(u,nt)|0)+Math.imul(h,rt)|0))<<13)|0;g=((o=o+Math.imul(h,nt)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(E,V),i=(i=Math.imul(E,G))+Math.imul(O,V)|0,o=Math.imul(O,G),n=n+Math.imul(k,Z)|0,i=(i=i+Math.imul(k,H)|0)+Math.imul(T,Z)|0,o=o+Math.imul(T,H)|0,n=n+Math.imul(x,Y)|0,i=(i=i+Math.imul(x,X)|0)+Math.imul(_,Y)|0,o=o+Math.imul(_,X)|0,n=n+Math.imul(m,Q)|0,i=(i=i+Math.imul(m,K)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,K)|0,n=n+Math.imul(p,$)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(I,$)|0,o=o+Math.imul(I,tt)|0,n=n+Math.imul(A,rt)|0,i=(i=i+Math.imul(A,nt)|0)+Math.imul(f,rt)|0,o=o+Math.imul(f,nt)|0;var bt=(g+(n=n+Math.imul(u,ot)|0)|0)+((8191&(i=(i=i+Math.imul(u,at)|0)+Math.imul(h,ot)|0))<<13)|0;g=((o=o+Math.imul(h,at)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(R,V),i=(i=Math.imul(R,G))+Math.imul(D,V)|0,o=Math.imul(D,G),n=n+Math.imul(E,Z)|0,i=(i=i+Math.imul(E,H)|0)+Math.imul(O,Z)|0,o=o+Math.imul(O,H)|0,n=n+Math.imul(k,Y)|0,i=(i=i+Math.imul(k,X)|0)+Math.imul(T,Y)|0,o=o+Math.imul(T,X)|0,n=n+Math.imul(x,Q)|0,i=(i=i+Math.imul(x,K)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,K)|0,n=n+Math.imul(m,$)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,tt)|0,n=n+Math.imul(p,rt)|0,i=(i=i+Math.imul(p,nt)|0)+Math.imul(I,rt)|0,o=o+Math.imul(I,nt)|0,n=n+Math.imul(A,ot)|0,i=(i=i+Math.imul(A,at)|0)+Math.imul(f,ot)|0,o=o+Math.imul(f,at)|0;var xt=(g+(n=n+Math.imul(u,lt)|0)|0)+((8191&(i=(i=i+Math.imul(u,gt)|0)+Math.imul(h,lt)|0))<<13)|0;g=((o=o+Math.imul(h,gt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(P,V),i=(i=Math.imul(P,G))+Math.imul(N,V)|0,o=Math.imul(N,G),n=n+Math.imul(R,Z)|0,i=(i=i+Math.imul(R,H)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,H)|0,n=n+Math.imul(E,Y)|0,i=(i=i+Math.imul(E,X)|0)+Math.imul(O,Y)|0,o=o+Math.imul(O,X)|0,n=n+Math.imul(k,Q)|0,i=(i=i+Math.imul(k,K)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,K)|0,n=n+Math.imul(x,$)|0,i=(i=i+Math.imul(x,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(m,rt)|0,i=(i=i+Math.imul(m,nt)|0)+Math.imul(y,rt)|0,o=o+Math.imul(y,nt)|0,n=n+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,at)|0)+Math.imul(I,ot)|0,o=o+Math.imul(I,at)|0,n=n+Math.imul(A,lt)|0,i=(i=i+Math.imul(A,gt)|0)+Math.imul(f,lt)|0,o=o+Math.imul(f,gt)|0;var _t=(g+(n=n+Math.imul(u,ut)|0)|0)+((8191&(i=(i=i+Math.imul(u,ht)|0)+Math.imul(h,ut)|0))<<13)|0;g=((o=o+Math.imul(h,ht)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(F,V),i=(i=Math.imul(F,G))+Math.imul(B,V)|0,o=Math.imul(B,G),n=n+Math.imul(P,Z)|0,i=(i=i+Math.imul(P,H)|0)+Math.imul(N,Z)|0,o=o+Math.imul(N,H)|0,n=n+Math.imul(R,Y)|0,i=(i=i+Math.imul(R,X)|0)+Math.imul(D,Y)|0,o=o+Math.imul(D,X)|0,n=n+Math.imul(E,Q)|0,i=(i=i+Math.imul(E,K)|0)+Math.imul(O,Q)|0,o=o+Math.imul(O,K)|0,n=n+Math.imul(k,$)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,tt)|0,n=n+Math.imul(x,rt)|0,i=(i=i+Math.imul(x,nt)|0)+Math.imul(_,rt)|0,o=o+Math.imul(_,nt)|0,n=n+Math.imul(m,ot)|0,i=(i=i+Math.imul(m,at)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,at)|0,n=n+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,gt)|0)+Math.imul(I,lt)|0,o=o+Math.imul(I,gt)|0,n=n+Math.imul(A,ut)|0,i=(i=i+Math.imul(A,ht)|0)+Math.imul(f,ut)|0,o=o+Math.imul(f,ht)|0;var wt=(g+(n=n+Math.imul(u,At)|0)|0)+((8191&(i=(i=i+Math.imul(u,ft)|0)+Math.imul(h,At)|0))<<13)|0;g=((o=o+Math.imul(h,ft)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(F,Z),i=(i=Math.imul(F,H))+Math.imul(B,Z)|0,o=Math.imul(B,H),n=n+Math.imul(P,Y)|0,i=(i=i+Math.imul(P,X)|0)+Math.imul(N,Y)|0,o=o+Math.imul(N,X)|0,n=n+Math.imul(R,Q)|0,i=(i=i+Math.imul(R,K)|0)+Math.imul(D,Q)|0,o=o+Math.imul(D,K)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(O,$)|0,o=o+Math.imul(O,tt)|0,n=n+Math.imul(k,rt)|0,i=(i=i+Math.imul(k,nt)|0)+Math.imul(T,rt)|0,o=o+Math.imul(T,nt)|0,n=n+Math.imul(x,ot)|0,i=(i=i+Math.imul(x,at)|0)+Math.imul(_,ot)|0,o=o+Math.imul(_,at)|0,n=n+Math.imul(m,lt)|0,i=(i=i+Math.imul(m,gt)|0)+Math.imul(y,lt)|0,o=o+Math.imul(y,gt)|0,n=n+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,ht)|0)+Math.imul(I,ut)|0,o=o+Math.imul(I,ht)|0;var kt=(g+(n=n+Math.imul(A,At)|0)|0)+((8191&(i=(i=i+Math.imul(A,ft)|0)+Math.imul(f,At)|0))<<13)|0;g=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(F,Y),i=(i=Math.imul(F,X))+Math.imul(B,Y)|0,o=Math.imul(B,X),n=n+Math.imul(P,Q)|0,i=(i=i+Math.imul(P,K)|0)+Math.imul(N,Q)|0,o=o+Math.imul(N,K)|0,n=n+Math.imul(R,$)|0,i=(i=i+Math.imul(R,tt)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,tt)|0,n=n+Math.imul(E,rt)|0,i=(i=i+Math.imul(E,nt)|0)+Math.imul(O,rt)|0,o=o+Math.imul(O,nt)|0,n=n+Math.imul(k,ot)|0,i=(i=i+Math.imul(k,at)|0)+Math.imul(T,ot)|0,o=o+Math.imul(T,at)|0,n=n+Math.imul(x,lt)|0,i=(i=i+Math.imul(x,gt)|0)+Math.imul(_,lt)|0,o=o+Math.imul(_,gt)|0,n=n+Math.imul(m,ut)|0,i=(i=i+Math.imul(m,ht)|0)+Math.imul(y,ut)|0,o=o+Math.imul(y,ht)|0;var Tt=(g+(n=n+Math.imul(p,At)|0)|0)+((8191&(i=(i=i+Math.imul(p,ft)|0)+Math.imul(I,At)|0))<<13)|0;g=((o=o+Math.imul(I,ft)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(F,Q),i=(i=Math.imul(F,K))+Math.imul(B,Q)|0,o=Math.imul(B,K),n=n+Math.imul(P,$)|0,i=(i=i+Math.imul(P,tt)|0)+Math.imul(N,$)|0,o=o+Math.imul(N,tt)|0,n=n+Math.imul(R,rt)|0,i=(i=i+Math.imul(R,nt)|0)+Math.imul(D,rt)|0,o=o+Math.imul(D,nt)|0,n=n+Math.imul(E,ot)|0,i=(i=i+Math.imul(E,at)|0)+Math.imul(O,ot)|0,o=o+Math.imul(O,at)|0,n=n+Math.imul(k,lt)|0,i=(i=i+Math.imul(k,gt)|0)+Math.imul(T,lt)|0,o=o+Math.imul(T,gt)|0,n=n+Math.imul(x,ut)|0,i=(i=i+Math.imul(x,ht)|0)+Math.imul(_,ut)|0,o=o+Math.imul(_,ht)|0;var Mt=(g+(n=n+Math.imul(m,At)|0)|0)+((8191&(i=(i=i+Math.imul(m,ft)|0)+Math.imul(y,At)|0))<<13)|0;g=((o=o+Math.imul(y,ft)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(F,$),i=(i=Math.imul(F,tt))+Math.imul(B,$)|0,o=Math.imul(B,tt),n=n+Math.imul(P,rt)|0,i=(i=i+Math.imul(P,nt)|0)+Math.imul(N,rt)|0,o=o+Math.imul(N,nt)|0,n=n+Math.imul(R,ot)|0,i=(i=i+Math.imul(R,at)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,at)|0,n=n+Math.imul(E,lt)|0,i=(i=i+Math.imul(E,gt)|0)+Math.imul(O,lt)|0,o=o+Math.imul(O,gt)|0,n=n+Math.imul(k,ut)|0,i=(i=i+Math.imul(k,ht)|0)+Math.imul(T,ut)|0,o=o+Math.imul(T,ht)|0;var Et=(g+(n=n+Math.imul(x,At)|0)|0)+((8191&(i=(i=i+Math.imul(x,ft)|0)+Math.imul(_,At)|0))<<13)|0;g=((o=o+Math.imul(_,ft)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(F,rt),i=(i=Math.imul(F,nt))+Math.imul(B,rt)|0,o=Math.imul(B,nt),n=n+Math.imul(P,ot)|0,i=(i=i+Math.imul(P,at)|0)+Math.imul(N,ot)|0,o=o+Math.imul(N,at)|0,n=n+Math.imul(R,lt)|0,i=(i=i+Math.imul(R,gt)|0)+Math.imul(D,lt)|0,o=o+Math.imul(D,gt)|0,n=n+Math.imul(E,ut)|0,i=(i=i+Math.imul(E,ht)|0)+Math.imul(O,ut)|0,o=o+Math.imul(O,ht)|0;var Ot=(g+(n=n+Math.imul(k,At)|0)|0)+((8191&(i=(i=i+Math.imul(k,ft)|0)+Math.imul(T,At)|0))<<13)|0;g=((o=o+Math.imul(T,ft)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(F,ot),i=(i=Math.imul(F,at))+Math.imul(B,ot)|0,o=Math.imul(B,at),n=n+Math.imul(P,lt)|0,i=(i=i+Math.imul(P,gt)|0)+Math.imul(N,lt)|0,o=o+Math.imul(N,gt)|0,n=n+Math.imul(R,ut)|0,i=(i=i+Math.imul(R,ht)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ht)|0;var St=(g+(n=n+Math.imul(E,At)|0)|0)+((8191&(i=(i=i+Math.imul(E,ft)|0)+Math.imul(O,At)|0))<<13)|0;g=((o=o+Math.imul(O,ft)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(F,lt),i=(i=Math.imul(F,gt))+Math.imul(B,lt)|0,o=Math.imul(B,gt),n=n+Math.imul(P,ut)|0,i=(i=i+Math.imul(P,ht)|0)+Math.imul(N,ut)|0,o=o+Math.imul(N,ht)|0;var Rt=(g+(n=n+Math.imul(R,At)|0)|0)+((8191&(i=(i=i+Math.imul(R,ft)|0)+Math.imul(D,At)|0))<<13)|0;g=((o=o+Math.imul(D,ft)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,n=Math.imul(F,ut),i=(i=Math.imul(F,ht))+Math.imul(B,ut)|0,o=Math.imul(B,ht);var Dt=(g+(n=n+Math.imul(P,At)|0)|0)+((8191&(i=(i=i+Math.imul(P,ft)|0)+Math.imul(N,At)|0))<<13)|0;g=((o=o+Math.imul(N,ft)|0)+(i>>>13)|0)+(Dt>>>26)|0,Dt&=67108863;var Lt=(g+(n=Math.imul(F,At))|0)+((8191&(i=(i=Math.imul(F,ft))+Math.imul(B,At)|0))<<13)|0;return g=((o=Math.imul(B,ft))+(i>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,l[0]=Ct,l[1]=pt,l[2]=It,l[3]=vt,l[4]=mt,l[5]=yt,l[6]=bt,l[7]=xt,l[8]=_t,l[9]=wt,l[10]=kt,l[11]=Tt,l[12]=Mt,l[13]=Et,l[14]=Ot,l[15]=St,l[16]=Rt,l[17]=Dt,l[18]=Lt,0!==g&&(l[19]=g,r.length++),r};function A(t,e,r){return(new f).mulp(t,e,r)}function f(t,e){this.x=t,this.y=e}Math.imul||(d=h),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):r<63?h(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,l=Math.min(o,e.length-1),g=Math.max(0,o-t.length+1);g<=l;g++){var c=o-g,u=(0|t.words[c])*(0|e.words[g]),h=67108863&u;s=67108863&(h=h+s|0),i+=(a=(a=a+(u/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):A(this,t,e)},f.prototype.makeRBT=function(t){for(var e=new Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},f.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},f.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},f.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,l=Math.cos(2*Math.PI/s),g=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var u=l,h=g,d=0;d<a;d++){var A=r[c+d],f=n[c+d],C=r[c+d+a],p=n[c+d+a],I=u*C-h*p;p=u*p+h*C,C=I,r[c+d]=A+C,n[c+d]=f+p,r[c+d+a]=A-C,n[c+d+a]=f-p,d!==s&&(I=l*u-g*h,h=l*h+g*u,u=I)}},f.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},f.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},f.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},f.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n(0==(-8192&o))},f.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},f.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=new Array(n),s=new Array(n),l=new Array(n),g=new Array(n),c=new Array(n),u=new Array(n),h=r.words;h.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,g,n),this.transform(a,o,s,l,n,i),this.transform(g,o,c,u,n,i);for(var d=0;d<n;d++){var A=s[d]*c[d]-l[d]*u[d];l[d]=s[d]*u[d]+l[d]*c[d],s[d]=A}return this.conjugate(s,l,n),this.transform(s,l,h,o,n,i),this.conjugate(h,o,n),this.normalize13b(h,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),A(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,l=(0|this.words[e])-s<<r;this.words[e]=l|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){var i;n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o,l=r;if(i-=a,i=Math.max(0,i),l){for(var g=0;g<a;g++)l.words[g]=this.words[g];l.length=a}if(0===a);else if(this.length>a)for(this.length-=a,g=0;g<this.length;g++)this.words[g]=this.words[g+a];else this.words[0]=0,this.length=1;var c=0;for(g=this.length-1;g>=0&&(0!==c||g>=i);g--){var u=0|this.words[g];this.words[g]=c<<26-o|u>>>o,c=u&s}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26,i=1<<e;return!(this.length<=r)&&!!(this.words[r]&i)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==e&&r++,this.length=Math.min(r,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return n("number"==typeof t),n(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var l=(0|t.words[i])*e;s=((o-=67108863&l)>>26)-(l/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,a=0|i.words[i.length-1];0!==(r=26-this._countBits(a))&&(i=i.ushln(r),n.iushln(r),a=0|i.words[i.length-1]);var s,l=n.length-i.length;if("mod"!==e){(s=new o(null)).length=l+1,s.words=new Array(s.length);for(var g=0;g<s.length;g++)s.words[g]=0}var c=n.clone()._ishlnsubmul(i,1,l);0===c.negative&&(n=c,s&&(s.words[l]=1));for(var u=l-1;u>=0;u--){var h=67108864*(0|n.words[i.length+u])+(0|n.words[i.length+u-1]);for(h=Math.min(h/a|0,67108863),n._ishlnsubmul(i,h,u);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,u),n.isZero()||(n.negative^=1);s&&(s.words[u]=h)}return s&&s.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:s||null,mod:n}},o.prototype.divmod=function(t,e,r){return n(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!=(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,a,s},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=(1<<26)%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),l=new o(1),g=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++g;for(var c=r.clone(),u=e.clone();!e.isZero();){for(var h=0,d=1;0==(e.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(e.iushrn(h);h-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(u)),i.iushrn(1),a.iushrn(1);for(var A=0,f=1;0==(r.words[0]&f)&&A<26;++A,f<<=1);if(A>0)for(r.iushrn(A);A-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(c),l.isub(u)),s.iushrn(1),l.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(l)):(r.isub(e),s.isub(i),l.isub(a))}return{a:s,b:l,gcd:r.iushln(g)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,a=new o(1),s=new o(0),l=r.clone();e.cmpn(1)>0&&r.cmpn(1)>0;){for(var g=0,c=1;0==(e.words[0]&c)&&g<26;++g,c<<=1);if(g>0)for(e.iushrn(g);g-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);for(var u=0,h=1;0==(r.words[0]&h)&&u<26;++u,h<<=1);if(u>0)for(r.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);e.cmp(r)>=0?(e.isub(r),a.isub(s)):(r.isub(e),s.isub(a))}return(i=0===e.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new b(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var C={k256:null,p224:null,p192:null,p25519:null};function p(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function I(){p.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){p.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function m(){p.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function y(){p.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function b(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function x(t){b.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}p.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},p.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},p.prototype.split=function(t,e){t.iushrn(this.n,0,e)},p.prototype.imulK=function(t){return t.imul(this.k)},i(I,p),I.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},I.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(v,p),i(m,p),i(y,p),y.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(C[t])return C[t];var e;if("k256"===t)e=new I;else if("p224"===t)e=new v;else if("p192"===t)e=new m;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new y}return C[t]=e,e},b.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},b.prototype._verify2=function(t,e){n(0==(t.negative|e.negative),"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},b.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},b.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},b.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},b.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},b.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},b.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},b.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},b.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},b.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},b.prototype.isqr=function(t){return this.imul(t,t.clone())},b.prototype.sqr=function(t){return this.mul(t,t)},b.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),l=s.redNeg(),g=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,g).cmp(l);)c.redIAdd(l);for(var u=this.pow(c,i),h=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),A=a;0!==d.cmp(s);){for(var f=d,C=0;0!==f.cmp(s);C++)f=f.redSqr();n(C<A);var p=this.pow(u,new o(1).iushln(A-C-1));h=h.redMul(p),u=p.redSqr(),d=d.redMul(u),A=C}return h},b.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},b.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,l=e.bitLength()%26;for(0===l&&(l=26),n=e.length-1;n>=0;n--){for(var g=e.words[n],c=l-1;c>=0;c--){var u=g>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==u||0!==a?(a<<=1,a|=u,(4===++s||0===n&&0===c)&&(i=this.mul(i,r[a]),s=0,a=0)):s=0}l=26}return i},b.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},b.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new x(t)},i(x,b),x.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},x.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},x.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},x.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},x.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===e||e,this)},{buffer:43}],36:[function(t,e,r){"use strict";e.exports=function(t,e,r){switch(arguments.length){case 1:return n=[],g(i=t,i,c,!0),n;case 2:return"function"==typeof e?g(t,t,e,!0):function(t,e){return n=[],g(t,e,c,!1),n}(t,e);case 3:return g(t,e,r,!1);default:throw new Error("box-intersect: Invalid arguments")}var i};var n,i=t("typedarray-pool"),o=t("./lib/sweep"),a=t("./lib/intersect");function s(t,e){for(var r=0;r<t;++r)if(!(e[r]<=e[r+t]))return!0;return!1}function l(t,e,r,n){for(var i=0,o=0,a=0,l=t.length;a<l;++a){var g=t[a];if(!s(e,g)){for(var c=0;c<2*e;++c)r[i++]=g[c];n[o++]=a}}return o}function g(t,e,r,n){var s=t.length,g=e.length;if(!(s<=0||g<=0)){var c=t[0].length>>>1;if(!(c<=0)){var u,h=i.mallocDouble(2*c*s),d=i.mallocInt32(s);if((s=l(t,c,h,d))>0){if(1===c&&n)o.init(s),u=o.sweepComplete(c,r,0,s,h,d,0,s,h,d);else{var A=i.mallocDouble(2*c*g),f=i.mallocInt32(g);(g=l(e,c,A,f))>0&&(o.init(s+g),u=1===c?o.sweepBipartite(c,r,0,s,h,d,0,g,A,f):a(c,r,n,s,h,d,g,A,f),i.free(A),i.free(f))}i.free(h),i.free(d)}return u}}}function c(t,e){n.push([t,e])}},{"./lib/intersect":38,"./lib/sweep":42,"typedarray-pool":711}],37:[function(t,e,r){"use strict";var n="d",i="ax",o="vv",a="fp",s="es",l="rs",g="re",c="rb",u="ri",h="rp",d="bs",A="be",f="bb",C="bi",p="bp",I="rv",v="Q",m=[n,i,o,l,g,c,u,d,A,f,C];function y(t){var e="bruteForce"+(t?"Full":"Partial"),r=[],y=m.slice();t||y.splice(3,0,a);var b=["function "+e+"("+y.join()+"){"];function x(e,a){var y=function(t,e,r){var a="bruteForce"+(t?"Red":"Blue")+(e?"Flip":"")+(r?"Full":""),y=["function ",a,"(",m.join(),"){","var ",s,"=2*",n,";"],b="for(var i="+l+","+h+"="+s+"*"+l+";i<"+g+";++i,"+h+"+="+s+"){var x0="+c+"["+i+"+"+h+"],x1="+c+"["+i+"+"+h+"+"+n+"],xi="+u+"[i];",x="for(var j="+d+","+p+"="+s+"*"+d+";j<"+A+";++j,"+p+"+="+s+"){var y0="+f+"["+i+"+"+p+"],"+(r?"y1="+f+"["+i+"+"+p+"+"+n+"],":"")+"yi="+C+"[j];";return t?y.push(b,v,":",x):y.push(x,v,":",b),r?y.push("if(y1<x0||x1<y0)continue;"):e?y.push("if(y0<=x0||x1<y0)continue;"):y.push("if(y0<x0||x1<y0)continue;"),y.push("for(var k="+i+"+1;k<"+n+";++k){var r0="+c+"[k+"+h+"],r1="+c+"[k+"+n+"+"+h+"],b0="+f+"[k+"+p+"],b1="+f+"[k+"+n+"+"+p+"];if(r1<b0||b1<r0)continue "+v+";}var "+I+"="+o+"("),e?y.push("yi,xi"):y.push("xi,yi"),y.push(");if("+I+"!==void 0)return "+I+";}}}"),{name:a,code:y.join("")}}(e,a,t);r.push(y.code),b.push("return "+y.name+"("+m.join()+");")}b.push("if("+g+"-"+l+">"+A+"-"+d+"){"),t?(x(!0,!1),b.push("}else{"),x(!1,!1)):(b.push("if("+a+"){"),x(!0,!0),b.push("}else{"),x(!0,!1),b.push("}}else{if("+a+"){"),x(!1,!0),b.push("}else{"),x(!1,!1),b.push("}")),b.push("}}return "+e);var _=r.join("")+b.join("");return new Function(_)()}r.partial=y(!1),r.full=y(!0)},{}],38:[function(t,e,r){"use strict";e.exports=function(t,e,r,o,c,T,M,E,O){!function(t,e){var r=8*i.log2(e+1)*(t+1)|0,o=i.nextPow2(m*r);b.length<o&&(n.free(b),b=n.mallocInt32(o));var a=i.nextPow2(y*r);x.length<a&&(n.free(x),x=n.mallocDouble(a))}(t,o+M);var S,R=0,D=2*t;_(R++,0,0,o,0,M,r?16:0,-1/0,1/0),r||_(R++,0,0,M,0,o,1,-1/0,1/0);for(;R>0;){var L=(R-=1)*m,P=b[L],N=b[L+1],z=b[L+2],F=b[L+3],B=b[L+4],j=b[L+5],V=R*y,G=x[V],U=x[V+1],Z=1&j,H=!!(16&j),W=c,Y=T,X=E,q=O;if(Z&&(W=E,Y=O,X=c,q=T),!(2&j&&(z=C(t,P,N,z,W,Y,U),N>=z)||4&j&&(N=p(t,P,N,z,W,Y,G))>=z)){var Q=z-N,K=B-F;if(H){if(t*Q*(Q+K)<d){if(void 0!==(S=l.scanComplete(t,P,e,N,z,W,Y,F,B,X,q)))return S;continue}}else{if(t*Math.min(Q,K)<u){if(void 0!==(S=a(t,P,e,Z,N,z,W,Y,F,B,X,q)))return S;continue}if(t*Q*K<h){if(void 0!==(S=l.scanBipartite(t,P,e,Z,N,z,W,Y,F,B,X,q)))return S;continue}}var J=A(t,P,N,z,W,Y,G,U);if(N<J)if(t*(J-N)<u){if(void 0!==(S=s(t,P+1,e,N,J,W,Y,F,B,X,q)))return S}else if(P===t-2){if(void 0!==(S=Z?l.sweepBipartite(t,e,F,B,X,q,N,J,W,Y):l.sweepBipartite(t,e,N,J,W,Y,F,B,X,q)))return S}else _(R++,P+1,N,J,F,B,Z,-1/0,1/0),_(R++,P+1,F,B,N,J,1^Z,-1/0,1/0);if(J<z){var $=g(t,P,F,B,X,q),tt=X[D*$+P],et=f(t,P,$,B,X,q,tt);if(et<B&&_(R++,P,J,z,et,B,(4|Z)+(H?16:0),tt,U),F<$&&_(R++,P,J,z,F,$,(2|Z)+(H?16:0),G,tt),$+1===et){if(void 0!==(S=H?k(t,P,e,J,z,W,Y,$,X,q[$]):w(t,P,e,Z,J,z,W,Y,$,X,q[$])))return S}else if($<et){var rt;if(H){if(rt=I(t,P,J,z,W,Y,tt),J<rt){var nt=f(t,P,J,rt,W,Y,tt);if(P===t-2){if(J<nt&&void 0!==(S=l.sweepComplete(t,e,J,nt,W,Y,$,et,X,q)))return S;if(nt<rt&&void 0!==(S=l.sweepBipartite(t,e,nt,rt,W,Y,$,et,X,q)))return S}else J<nt&&_(R++,P+1,J,nt,$,et,16,-1/0,1/0),nt<rt&&(_(R++,P+1,nt,rt,$,et,0,-1/0,1/0),_(R++,P+1,$,et,nt,rt,1,-1/0,1/0))}}else rt=Z?v(t,P,J,z,W,Y,tt):I(t,P,J,z,W,Y,tt),J<rt&&(P===t-2?S=Z?l.sweepBipartite(t,e,$,et,X,q,J,rt,W,Y):l.sweepBipartite(t,e,J,rt,W,Y,$,et,X,q):(_(R++,P+1,J,rt,$,et,Z,-1/0,1/0),_(R++,P+1,$,et,J,rt,1^Z,-1/0,1/0)))}}}}};var n=t("typedarray-pool"),i=t("bit-twiddle"),o=t("./brute"),a=o.partial,s=o.full,l=t("./sweep"),g=t("./median"),c=t("./partition"),u=128,h=1<<22,d=1<<22,A=c("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),f=c("lo===p0",["p0"]),C=c("lo<p0",["p0"]),p=c("hi<=p0",["p0"]),I=c("lo<=p0&&p0<=hi",["p0"]),v=c("lo<p0&&p0<=hi",["p0"]),m=6,y=2,b=n.mallocInt32(1024),x=n.mallocDouble(1024);function _(t,e,r,n,i,o,a,s,l){var g=m*t;b[g]=e,b[g+1]=r,b[g+2]=n,b[g+3]=i,b[g+4]=o,b[g+5]=a;var c=y*t;x[c]=s,x[c+1]=l}function w(t,e,r,n,i,o,a,s,l,g,c){var u=2*t,h=l*u,d=g[h+e];t:for(var A=i,f=i*u;A<o;++A,f+=u){var C=a[f+e],p=a[f+e+t];if(!(d<C||p<d)&&(!n||d!==C)){for(var I,v=s[A],m=e+1;m<t;++m){C=a[f+m],p=a[f+m+t];var y=g[h+m],b=g[h+m+t];if(p<y||b<C)continue t}if(void 0!==(I=n?r(c,v):r(v,c)))return I}}}function k(t,e,r,n,i,o,a,s,l,g){var c=2*t,u=s*c,h=l[u+e];t:for(var d=n,A=n*c;d<i;++d,A+=c){var f=a[d];if(f!==g){var C=o[A+e],p=o[A+e+t];if(!(h<C||p<h)){for(var I=e+1;I<t;++I){C=o[A+I],p=o[A+I+t];var v=l[u+I],m=l[u+I+t];if(p<v||m<C)continue t}var y=r(f,g);if(void 0!==y)return y}}}}},{"./brute":37,"./median":39,"./partition":40,"./sweep":42,"bit-twiddle":33,"typedarray-pool":711}],39:[function(t,e,r){"use strict";e.exports=function(t,e,r,a,s,l){if(a<=r+1)return r;var g=r,c=a,u=a+r>>>1,h=2*t,d=u,A=s[h*u+e];for(;g<c;){if(c-g<i){o(t,e,g,c,s,l),A=s[h*u+e];break}var f=c-g,C=Math.random()*f+g|0,p=s[h*C+e],I=Math.random()*f+g|0,v=s[h*I+e],m=Math.random()*f+g|0,y=s[h*m+e];p<=v?y>=v?(d=I,A=v):p>=y?(d=C,A=p):(d=m,A=y):v>=y?(d=I,A=v):y>=p?(d=C,A=p):(d=m,A=y);for(var b=h*(c-1),x=h*d,_=0;_<h;++_,++b,++x){var w=s[b];s[b]=s[x],s[x]=w}var k=l[c-1];l[c-1]=l[d],l[d]=k,d=n(t,e,g,c-1,s,l,A);for(var b=h*(c-1),x=h*d,_=0;_<h;++_,++b,++x){var w=s[b];s[b]=s[x],s[x]=w}var k=l[c-1];if(l[c-1]=l[d],l[d]=k,u<d){for(c=d-1;g<c&&s[h*(c-1)+e]===A;)c-=1;c+=1}else{if(!(d<u))break;for(g=d+1;g<c&&s[h*g+e]===A;)g+=1}}return n(t,e,r,u,s,l,s[h*u+e])};var n=t("./partition")("lo<p0",["p0"]),i=8;function o(t,e,r,n,i,o){for(var a=2*t,s=a*(r+1)+e,l=r+1;l<n;++l,s+=a)for(var g=i[s],c=l,u=a*(l-1);c>r&&i[u+e]>g;--c,u-=a){for(var h=u,d=u+a,A=0;A<a;++A,++h,++d){var f=i[h];i[h]=i[d],i[d]=f}var C=o[c];o[c]=o[c-1],o[c-1]=C}}},{"./partition":40}],40:[function(t,e,r){"use strict";e.exports=function(t,e){var r="abcdef".split("").concat(e),i=[];t.indexOf("lo")>=0&&i.push("lo=e[k+n]");t.indexOf("hi")>=0&&i.push("hi=e[k+o]");return r.push(n.replace("_",i.join()).replace("$",t)),Function.apply(void 0,r)};var n="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m"},{}],41:[function(t,e,r){"use strict";e.exports=function(t,e){e<=4*n?i(0,e-1,t):function t(e,r,u){var h=(r-e+1)/6|0,d=e+h,A=r-h,f=e+r>>1,C=f-h,p=f+h,I=d,v=C,m=f,y=p,b=A,x=e+1,_=r-1,w=0;g(I,v,u)&&(w=I,I=v,v=w);g(y,b,u)&&(w=y,y=b,b=w);g(I,m,u)&&(w=I,I=m,m=w);g(v,m,u)&&(w=v,v=m,m=w);g(I,y,u)&&(w=I,I=y,y=w);g(m,y,u)&&(w=m,m=y,y=w);g(v,b,u)&&(w=v,v=b,b=w);g(v,m,u)&&(w=v,v=m,m=w);g(y,b,u)&&(w=y,y=b,b=w);var k=u[2*v];var T=u[2*v+1];var M=u[2*y];var E=u[2*y+1];var O=2*I;var S=2*m;var R=2*b;var D=2*d;var L=2*f;var P=2*A;for(var N=0;N<2;++N){var z=u[O+N],F=u[S+N],B=u[R+N];u[D+N]=z,u[L+N]=F,u[P+N]=B}a(C,e,u);a(p,r,u);for(var j=x;j<=_;++j)if(c(j,k,T,u))j!==x&&o(j,x,u),++x;else if(!c(j,M,E,u))for(;;){if(c(_,M,E,u)){c(_,k,T,u)?(s(j,x,_,u),++x,--_):(o(j,_,u),--_);break}if(--_<j)break}l(e,x-1,k,T,u);l(r,_+1,M,E,u);x-2-e<=n?i(e,x-2,u):t(e,x-2,u);r-(_+2)<=n?i(_+2,r,u):t(_+2,r,u);_-x<=n?i(x,_,u):t(x,_,u)}(0,e-1,t)};var n=32;function i(t,e,r){for(var n=2*(t+1),i=t+1;i<=e;++i){for(var o=r[n++],a=r[n++],s=i,l=n-2;s-- >t;){var g=r[l-2],c=r[l-1];if(g<o)break;if(g===o&&c<a)break;r[l]=g,r[l+1]=c,l-=2}r[l]=o,r[l+1]=a}}function o(t,e,r){e*=2;var n=r[t*=2],i=r[t+1];r[t]=r[e],r[t+1]=r[e+1],r[e]=n,r[e+1]=i}function a(t,e,r){e*=2,r[t*=2]=r[e],r[t+1]=r[e+1]}function s(t,e,r,n){e*=2,r*=2;var i=n[t*=2],o=n[t+1];n[t]=n[e],n[t+1]=n[e+1],n[e]=n[r],n[e+1]=n[r+1],n[r]=i,n[r+1]=o}function l(t,e,r,n,i){e*=2,i[t*=2]=i[e],i[e]=r,i[t+1]=i[e+1],i[e+1]=n}function g(t,e,r){e*=2;var n=r[t*=2],i=r[e];return!(n<i)&&(n!==i||r[t+1]>r[e+1])}function c(t,e,r,n){var i=n[t*=2];return i<e||i===e&&n[t+1]<r}},{}],42:[function(t,e,r){"use strict";e.exports={init:function(t){var e=i.nextPow2(t);s.length<e&&(n.free(s),s=n.mallocInt32(e));l.length<e&&(n.free(l),l=n.mallocInt32(e));g.length<e&&(n.free(g),g=n.mallocInt32(e));c.length<e&&(n.free(c),c=n.mallocInt32(e));u.length<e&&(n.free(u),u=n.mallocInt32(e));h.length<e&&(n.free(h),h=n.mallocInt32(e));var r=8*e;d.length<r&&(n.free(d),d=n.mallocDouble(r))},sweepBipartite:function(t,e,r,n,i,u,h,C,p,I){for(var v=0,m=2*t,y=t-1,b=m-1,x=r;x<n;++x){var _=u[x],w=m*x;d[v++]=i[w+y],d[v++]=-(_+1),d[v++]=i[w+b],d[v++]=_}for(var x=h;x<C;++x){var _=I[x]+a,k=m*x;d[v++]=p[k+y],d[v++]=-_,d[v++]=p[k+b],d[v++]=_}var T=v>>>1;o(d,T);for(var M=0,E=0,x=0;x<T;++x){var O=0|d[2*x+1];if(O>=a)A(g,c,E--,O=O-a|0);else if(O>=0)A(s,l,M--,O);else if(O<=-a){O=-O-a|0;for(var S=0;S<M;++S){var R=e(s[S],O);if(void 0!==R)return R}f(g,c,E++,O)}else{O=-O-1|0;for(var S=0;S<E;++S){var R=e(O,g[S]);if(void 0!==R)return R}f(s,l,M++,O)}}},sweepComplete:function(t,e,r,n,i,a,C,p,I,v){for(var m=0,y=2*t,b=t-1,x=y-1,_=r;_<n;++_){var w=a[_]+1<<1,k=y*_;d[m++]=i[k+b],d[m++]=-w,d[m++]=i[k+x],d[m++]=w}for(var _=C;_<p;++_){var w=v[_]+1<<1,T=y*_;d[m++]=I[T+b],d[m++]=1|-w,d[m++]=I[T+x],d[m++]=1|w}var M=m>>>1;o(d,M);for(var E=0,O=0,S=0,_=0;_<M;++_){var R=0|d[2*_+1],D=1&R;if(_<M-1&&R>>1==d[2*_+3]>>1&&(D=2,_+=1),R<0){for(var L=-(R>>1)-1,P=0;P<S;++P){var N=e(u[P],L);if(void 0!==N)return N}if(0!==D)for(var P=0;P<E;++P){var N=e(s[P],L);if(void 0!==N)return N}if(1!==D)for(var P=0;P<O;++P){var N=e(g[P],L);if(void 0!==N)return N}0===D?f(s,l,E++,L):1===D?f(g,c,O++,L):2===D&&f(u,h,S++,L)}else{var L=(R>>1)-1;0===D?A(s,l,E--,L):1===D?A(g,c,O--,L):2===D&&A(u,h,S--,L)}}},scanBipartite:function(t,e,r,n,i,g,c,u,h,C,p,I){var v=0,m=2*t,y=e,b=e+t,x=1,_=1;n?_=a:x=a;for(var w=i;w<g;++w){var k=w+x,T=m*w;d[v++]=c[T+y],d[v++]=-k,d[v++]=c[T+b],d[v++]=k}for(var w=h;w<C;++w){var k=w+_,M=m*w;d[v++]=p[M+y],d[v++]=-k}var E=v>>>1;o(d,E);for(var O=0,w=0;w<E;++w){var S=0|d[2*w+1];if(S<0){var k=-S,R=!1;if(k>=a?(R=!n,k-=a):(R=!!n,k-=1),R)f(s,l,O++,k);else{var D=I[k],L=m*k,P=p[L+e+1],N=p[L+e+1+t];t:for(var z=0;z<O;++z){var F=s[z],B=m*F;if(!(N<c[B+e+1]||c[B+e+1+t]<P)){for(var j=e+2;j<t;++j)if(p[L+j+t]<c[B+j]||c[B+j+t]<p[L+j])continue t;var V,G=u[F];if(void 0!==(V=n?r(D,G):r(G,D)))return V}}}}else A(s,l,O--,S-x)}},scanComplete:function(t,e,r,n,i,l,g,c,u,h,A){for(var f=0,C=2*t,p=e,I=e+t,v=n;v<i;++v){var m=v+a,y=C*v;d[f++]=l[y+p],d[f++]=-m,d[f++]=l[y+I],d[f++]=m}for(var v=c;v<u;++v){var m=v+1,b=C*v;d[f++]=h[b+p],d[f++]=-m}var x=f>>>1;o(d,x);for(var _=0,v=0;v<x;++v){var w=0|d[2*v+1];if(w<0){var m=-w;if(m>=a)s[_++]=m-a;else{var k=A[m-=1],T=C*m,M=h[T+e+1],E=h[T+e+1+t];t:for(var O=0;O<_;++O){var S=s[O],R=g[S];if(R===k)break;var D=C*S;if(!(E<l[D+e+1]||l[D+e+1+t]<M)){for(var L=e+2;L<t;++L)if(h[T+L+t]<l[D+L]||l[D+L+t]<h[T+L])continue t;var P=r(R,k);if(void 0!==P)return P}}}}else{for(var m=w-a,O=_-1;O>=0;--O)if(s[O]===m){for(var L=O+1;L<_;++L)s[L-1]=s[L];break}--_}}}};var n=t("typedarray-pool"),i=t("bit-twiddle"),o=t("./sort"),a=1<<28,s=n.mallocInt32(1024),l=n.mallocInt32(1024),g=n.mallocInt32(1024),c=n.mallocInt32(1024),u=n.mallocInt32(1024),h=n.mallocInt32(1024),d=n.mallocDouble(8192);function A(t,e,r,n){var i=e[n],o=t[r-1];t[i]=o,e[o]=i}function f(t,e,r,n){t[r]=n,e[n]=r}},{"./sort":41,"bit-twiddle":33,"typedarray-pool":711}],43:[function(t,e,r){},{}],44:[function(t,e,r){(function(e){"use strict";var n=t("base64-js"),i=t("ieee754");r.Buffer=e,r.SlowBuffer=function(t){+t!=t&&(t=0);return e.alloc(+t)},r.INSPECT_MAX_BYTES=50;var o=2147483647;function a(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');var r=new Uint8Array(t);return r.__proto__=e.prototype,r}function e(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return g(t)}return s(t,e,r)}function s(t,r,n){if("string"==typeof t)return function(t,r){"string"==typeof r&&""!==r||(r="utf8");if(!e.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var n=0|h(t,r),i=a(n),o=i.write(t,r);o!==n&&(i=i.slice(0,o));return i}(t,r);if(ArrayBuffer.isView(t))return c(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(B(t,ArrayBuffer)||t&&B(t.buffer,ArrayBuffer))return function(t,r,n){if(r<0||t.byteLength<r)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<r+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;i=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);return i.__proto__=e.prototype,i}(t,r,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return e.from(i,r,n);var o=function(t){if(e.isBuffer(t)){var r=0|u(t.length),n=a(r);return 0===n.length?n:(t.copy(n,0,0,r),n)}if(void 0!==t.length)return"number"!=typeof t.length||j(t.length)?a(0):c(t);if("Buffer"===t.type&&Array.isArray(t.data))return c(t.data)}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return e.from(t[Symbol.toPrimitive]("string"),r,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function g(t){return l(t),a(t<0?0:0|u(t))}function c(t){for(var e=t.length<0?0:0|u(t.length),r=a(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function u(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function h(t,r){if(e.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||B(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var o=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return N(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(o)return i?-1:N(t).length;r=(""+r).toLowerCase(),o=!0}}function d(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function A(t,r,n,i,o){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),j(n=+n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof r&&(r=e.from(r,i)),e.isBuffer(r))return 0===r.length?-1:f(t,r,n,i,o);if("number"==typeof r)return r&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,r,n):Uint8Array.prototype.lastIndexOf.call(t,r,n):f(t,[r],n,i,o);throw new TypeError("val must be string, number or Buffer")}function f(t,e,r,n,i){var o,a=1,s=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,r/=2}function g(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var c=-1;for(o=r;o<s;o++)if(g(t,o)===g(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){for(var u=!0,h=0;h<l;h++)if(g(t,o+h)!==g(e,h)){u=!1;break}if(u)return o}return-1}function C(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(e.substr(2*a,2),16);if(j(s))return a;t[r+a]=s}return a}function p(t,e,r,n){return F(N(e,t.length-r),t,r,n)}function I(t,e,r,n){return F(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function v(t,e,r,n){return I(t,e,r,n)}function m(t,e,r,n){return F(z(e),t,r,n)}function y(t,e,r,n){return F(function(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function b(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function x(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,a,s,l,g=t[i],c=null,u=g>239?4:g>223?3:g>191?2:1;if(i+u<=r)switch(u){case 1:g<128&&(c=g);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&g)<<6|63&o)>127&&(c=l);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(l=(15&g)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&g)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,u=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=u}return function(t){var e=t.length;if(e<=_)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=_));return r}(n)}r.kMaxLength=o,e.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),e.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(t,e,r){return s(t,e,r)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(t,e,r){return function(t,e,r){return l(t),t<=0?a(t):void 0!==e?"string"==typeof r?a(t).fill(e,r):a(t).fill(e):a(t)}(t,e,r)},e.allocUnsafe=function(t){return g(t)},e.allocUnsafeSlow=function(t){return g(t)},e.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==e.prototype},e.compare=function(t,r){if(B(t,Uint8Array)&&(t=e.from(t,t.offset,t.byteLength)),B(r,Uint8Array)&&(r=e.from(r,r.offset,r.byteLength)),!e.isBuffer(t)||!e.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;for(var n=t.length,i=r.length,o=0,a=Math.min(n,i);o<a;++o)if(t[o]!==r[o]){n=t[o],i=r[o];break}return n<i?-1:i<n?1:0},e.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return e.alloc(0);var n;if(void 0===r)for(r=0,n=0;n<t.length;++n)r+=t[n].length;var i=e.allocUnsafe(r),o=0;for(n=0;n<t.length;++n){var a=t[n];if(B(a,Uint8Array)&&(a=e.from(a)),!e.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,o),o+=a.length}return i},e.byteLength=h,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},e.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},e.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},e.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?x(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,r);case"utf8":case"utf-8":return x(this,e,r);case"ascii":return w(this,e,r);case"latin1":case"binary":return k(this,e,r);case"base64":return b(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===e.compare(this,t)},e.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},e.prototype.compare=function(t,r,n,i,o){if(B(t,Uint8Array)&&(t=e.from(t,t.offset,t.byteLength)),!e.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===r&&(r=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),r<0||n>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&r>=n)return 0;if(i>=o)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,o>>>=0,this===t)return 0;for(var a=o-i,s=n-r,l=Math.min(a,s),g=this.slice(i,o),c=t.slice(r,n),u=0;u<l;++u)if(g[u]!==c[u]){a=g[u],s=c[u];break}return a<s?-1:s<a?1:0},e.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},e.prototype.indexOf=function(t,e,r){return A(this,t,e,r,!0)},e.prototype.lastIndexOf=function(t,e,r){return A(this,t,e,r,!1)},e.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return C(this,t,e,r);case"utf8":case"utf-8":return p(this,t,e,r);case"ascii":return I(this,t,e,r);case"latin1":case"binary":return v(this,t,e,r);case"base64":return m(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function w(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function k(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function T(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=P(t[o]);return i}function M(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function E(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function O(t,r,n,i,o,a){if(!e.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>o||r<a)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function S(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function R(t,e,r,n,o){return e=+e,r>>>=0,o||S(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function D(t,e,r,n,o){return e=+e,r>>>=0,o||S(t,0,r,8),i.write(t,e,r,n,52,8),r+8}e.prototype.slice=function(t,r){var n=this.length;t=~~t,r=void 0===r?n:~~r,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),r<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t);var i=this.subarray(t,r);return i.__proto__=e.prototype,i},e.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||E(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},e.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||E(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},e.prototype.readUInt8=function(t,e){return t>>>=0,e||E(t,1,this.length),this[t]},e.prototype.readUInt16LE=function(t,e){return t>>>=0,e||E(t,2,this.length),this[t]|this[t+1]<<8},e.prototype.readUInt16BE=function(t,e){return t>>>=0,e||E(t,2,this.length),this[t]<<8|this[t+1]},e.prototype.readUInt32LE=function(t,e){return t>>>=0,e||E(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},e.prototype.readUInt32BE=function(t,e){return t>>>=0,e||E(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},e.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||E(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},e.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||E(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},e.prototype.readInt8=function(t,e){return t>>>=0,e||E(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},e.prototype.readInt16LE=function(t,e){t>>>=0,e||E(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt16BE=function(t,e){t>>>=0,e||E(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},e.prototype.readInt32LE=function(t,e){return t>>>=0,e||E(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},e.prototype.readInt32BE=function(t,e){return t>>>=0,e||E(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},e.prototype.readFloatLE=function(t,e){return t>>>=0,e||E(t,4,this.length),i.read(this,t,!0,23,4)},e.prototype.readFloatBE=function(t,e){return t>>>=0,e||E(t,4,this.length),i.read(this,t,!1,23,4)},e.prototype.readDoubleLE=function(t,e){return t>>>=0,e||E(t,8,this.length),i.read(this,t,!0,52,8)},e.prototype.readDoubleBE=function(t,e){return t>>>=0,e||E(t,8,this.length),i.read(this,t,!1,52,8)},e.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||O(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},e.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||O(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},e.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,255,0),this[e]=255&t,e+1},e.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},e.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},e.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},e.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},e.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);O(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},e.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);O(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},e.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},e.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},e.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},e.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},e.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},e.prototype.writeFloatLE=function(t,e,r){return R(this,t,e,!0,r)},e.prototype.writeFloatBE=function(t,e,r){return R(this,t,e,!1,r)},e.prototype.writeDoubleLE=function(t,e,r){return D(this,t,e,!0,r)},e.prototype.writeDoubleBE=function(t,e,r){return D(this,t,e,!1,r)},e.prototype.copy=function(t,r,n,i){if(!e.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),r>=t.length&&(r=t.length),r||(r=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-r<i-n&&(i=t.length-r+n);var o=i-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(r,n,i);else if(this===t&&n<r&&r<i)for(var a=o-1;a>=0;--a)t[a+r]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,i),r);return o},e.prototype.fill=function(t,r,n,i){if("string"==typeof t){if("string"==typeof r?(i=r,r=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!e.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===t.length){var o=t.charCodeAt(0);("utf8"===i&&o<128||"latin1"===i)&&(t=o)}}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;var a;if(r>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(a=r;a<n;++a)this[a]=t;else{var s=e.isBuffer(t)?t:e.from(t,i),l=s.length;if(0===l)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(a=0;a<n-r;++a)this[a+r]=s[a%l]}return this};var L=/[^+/0-9A-Za-z-_]/g;function P(t){return t<16?"0"+t.toString(16):t.toString(16)}function N(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function z(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(L,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function F(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function B(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function j(t){return t!=t}}).call(this,t("buffer").Buffer)},{"base64-js":15,buffer:44,ieee754:231}],45:[function(t,e,r){"use strict";var n=t("./lib/monotone"),i=t("./lib/triangulation"),o=t("./lib/delaunay"),a=t("./lib/filter");function s(t){return[Math.min(t[0],t[1]),Math.max(t[0],t[1])]}function l(t,e){return t[0]-e[0]||t[1]-e[1]}function g(t,e,r){return e in t?t[e]:r}e.exports=function(t,e,r){Array.isArray(e)?(r=r||{},e=e||[]):(r=e||{},e=[]);var c=!!g(r,"delaunay",!0),u=!!g(r,"interior",!0),h=!!g(r,"exterior",!0),d=!!g(r,"infinity",!1);if(!u&&!h||0===t.length)return[];var A=n(t,e);if(c||u!==h||d){for(var f=i(t.length,function(t){return t.map(s).sort(l)}(e)),C=0;C<A.length;++C){var p=A[C];f.addTriangle(p[0],p[1],p[2])}return c&&o(t,f),h?u?d?a(f,0,d):f.cells():a(f,1,d):a(f,-1)}return A}},{"./lib/delaunay":46,"./lib/filter":47,"./lib/monotone":48,"./lib/triangulation":49}],46:[function(t,e,r){"use strict";var n=t("robust-in-sphere")[4];t("binary-search-bounds");function i(t,e,r,i,o,a){var s=e.opposite(i,o);if(!(s<0)){if(o<i){var l=i;i=o,o=l,l=a,a=s,s=l}e.isConstraint(i,o)||n(t[i],t[o],t[a],t[s])<0&&r.push(i,o)}}e.exports=function(t,e){for(var r=[],o=t.length,a=e.stars,s=0;s<o;++s)for(var l=a[s],g=1;g<l.length;g+=2){var c=l[g];if(!(c<s)&&!e.isConstraint(s,c)){for(var u=l[g-1],h=-1,d=1;d<l.length;d+=2)if(l[d-1]===c){h=l[d];break}h<0||n(t[s],t[c],t[u],t[h])<0&&r.push(s,c)}}for(;r.length>0;){for(var c=r.pop(),s=r.pop(),u=-1,h=-1,l=a[s],A=1;A<l.length;A+=2){var f=l[A-1],C=l[A];f===c?h=C:C===c&&(u=f)}u<0||h<0||(n(t[s],t[c],t[u],t[h])>=0||(e.flip(s,c),i(t,e,r,u,s,h),i(t,e,r,s,h,u),i(t,e,r,h,c,u),i(t,e,r,c,u,h)))}}},{"binary-search-bounds":32,"robust-in-sphere":667}],47:[function(t,e,r){"use strict";var n,i=t("binary-search-bounds");function o(t,e,r,n,i,o,a){this.cells=t,this.neighbor=e,this.flags=n,this.constraint=r,this.active=i,this.next=o,this.boundary=a}function a(t,e){return t[0]-e[0]||t[1]-e[1]||t[2]-e[2]}e.exports=function(t,e,r){var n=function(t,e){for(var r=t.cells(),n=r.length,i=0;i<n;++i){var s=r[i],l=s[0],g=s[1],c=s[2];g<c?g<l&&(s[0]=g,s[1]=c,s[2]=l):c<l&&(s[0]=c,s[1]=l,s[2]=g)}r.sort(a);for(var u=new Array(n),i=0;i<u.length;++i)u[i]=0;var h=[],d=[],A=new Array(3*n),f=new Array(3*n),C=null;e&&(C=[]);for(var p=new o(r,A,f,u,h,d,C),i=0;i<n;++i)for(var s=r[i],I=0;I<3;++I){var l=s[I],g=s[(I+1)%3],v=A[3*i+I]=p.locate(g,l,t.opposite(g,l)),m=f[3*i+I]=t.isConstraint(l,g);v<0&&(m?d.push(i):(h.push(i),u[i]=1),e&&C.push([g,l,-1]))}return p}(t,r);if(0===e)return r?n.cells.concat(n.boundary):n.cells;var i=1,s=n.active,l=n.next,g=n.flags,c=n.cells,u=n.constraint,h=n.neighbor;for(;s.length>0||l.length>0;){for(;s.length>0;){var d=s.pop();if(g[d]!==-i){g[d]=i;c[d];for(var A=0;A<3;++A){var f=h[3*d+A];f>=0&&0===g[f]&&(u[3*d+A]?l.push(f):(s.push(f),g[f]=i))}}}var C=l;l=s,s=C,l.length=0,i=-i}var p=function(t,e,r){for(var n=0,i=0;i<t.length;++i)e[i]===r&&(t[n++]=t[i]);return t.length=n,t}(c,g,e);if(r)return p.concat(n.boundary);return p},o.prototype.locate=(n=[0,0,0],function(t,e,r){var o=t,s=e,l=r;return e<r?e<t&&(o=e,s=r,l=t):r<t&&(o=r,s=t,l=e),o<0?-1:(n[0]=o,n[1]=s,n[2]=l,i.eq(this.cells,n,a))})},{"binary-search-bounds":32}],48:[function(t,e,r){"use strict";var n=t("binary-search-bounds"),i=t("robust-orientation")[3],o=0,a=1,s=2;function l(t,e,r,n,i){this.a=t,this.b=e,this.idx=r,this.lowerIds=n,this.upperIds=i}function g(t,e,r,n){this.a=t,this.b=e,this.type=r,this.idx=n}function c(t,e){var r=t.a[0]-e.a[0]||t.a[1]-e.a[1]||t.type-e.type;return r||(t.type!==o&&(r=i(t.a,t.b,e.b))?r:t.idx-e.idx)}function u(t,e){return i(t.a,t.b,e)}function h(t,e,r,o,a){for(var s=n.lt(e,o,u),l=n.gt(e,o,u),g=s;g<l;++g){for(var c=e[g],h=c.lowerIds,d=h.length;d>1&&i(r[h[d-2]],r[h[d-1]],o)>0;)t.push([h[d-1],h[d-2],a]),d-=1;h.length=d,h.push(a);var A=c.upperIds;for(d=A.length;d>1&&i(r[A[d-2]],r[A[d-1]],o)<0;)t.push([A[d-2],A[d-1],a]),d-=1;A.length=d,A.push(a)}}function d(t,e){var r;return(r=t.a[0]<e.a[0]?i(t.a,t.b,e.a):i(e.b,e.a,t.a))?r:(r=e.b[0]<t.b[0]?i(t.a,t.b,e.b):i(e.b,e.a,t.b))||t.idx-e.idx}function A(t,e,r){var i=n.le(t,r,d),o=t[i],a=o.upperIds,s=a[a.length-1];o.upperIds=[s],t.splice(i+1,0,new l(r.a,r.b,r.idx,[s],a))}function f(t,e,r){var i=r.a;r.a=r.b,r.b=i;var o=n.eq(t,r,d),a=t[o];t[o-1].upperIds=a.upperIds,t.splice(o,1)}e.exports=function(t,e){for(var r=t.length,n=e.length,i=[],u=0;u<r;++u)i.push(new g(t[u],null,o,u));for(var u=0;u<n;++u){var d=e[u],C=t[d[0]],p=t[d[1]];C[0]<p[0]?i.push(new g(C,p,s,u),new g(p,C,a,u)):C[0]>p[0]&&i.push(new g(p,C,s,u),new g(C,p,a,u))}i.sort(c);for(var I=i[0].a[0]-(1+Math.abs(i[0].a[0]))*Math.pow(2,-52),v=[new l([I,1],[I,0],-1,[],[],[],[])],m=[],u=0,y=i.length;u<y;++u){var b=i[u],x=b.type;x===o?h(m,v,t,b.a,b.idx):x===s?A(v,t,b):f(v,t,b)}return m}},{"binary-search-bounds":32,"robust-orientation":669}],49:[function(t,e,r){"use strict";var n=t("binary-search-bounds");function i(t,e){this.stars=t,this.edges=e}e.exports=function(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=[];return new i(r,e)};var o=i.prototype;function a(t,e,r){for(var n=1,i=t.length;n<i;n+=2)if(t[n-1]===e&&t[n]===r)return t[n-1]=t[i-2],t[n]=t[i-1],void(t.length=i-2)}o.isConstraint=function(){var t=[0,0];function e(t,e){return t[0]-e[0]||t[1]-e[1]}return function(r,i){return t[0]=Math.min(r,i),t[1]=Math.max(r,i),n.eq(this.edges,t,e)>=0}}(),o.removeTriangle=function(t,e,r){var n=this.stars;a(n[t],e,r),a(n[e],r,t),a(n[r],t,e)},o.addTriangle=function(t,e,r){var n=this.stars;n[t].push(e,r),n[e].push(r,t),n[r].push(t,e)},o.opposite=function(t,e){for(var r=this.stars[e],n=1,i=r.length;n<i;n+=2)if(r[n]===t)return r[n-1];return-1},o.flip=function(t,e){var r=this.opposite(t,e),n=this.opposite(e,t);this.removeTriangle(t,e,r),this.removeTriangle(e,t,n),this.addTriangle(t,n,r),this.addTriangle(e,r,n)},o.edges=function(){for(var t=this.stars,e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,a=i.length;o<a;o+=2)e.push([i[o],i[o+1]]);return e},o.cells=function(){for(var t=this.stars,e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,a=i.length;o<a;o+=2){var s=i[o],l=i[o+1];r<Math.min(s,l)&&e.push([r,s,l])}return e}},{"binary-search-bounds":32}],50:[function(t,e,r){e.exports=function(t,e,r){return e<r?t<e?e:t>r?r:t:t<r?r:t>e?e:t}},{}],51:[function(t,e,r){"use strict";e.exports=function(t,e,r){var n;if(r){n=e;for(var i=new Array(e.length),o=0;o<e.length;++o){var a=e[o];i[o]=[a[0],a[1],r[o]]}e=i}var s=function(t,e,r){var n=A(t,[],d(t));return p(e,n,r),!!n}(t,e,!!r);for(;I(t,e,!!r);)s=!0;if(r&&s){n.length=0,r.length=0;for(var o=0;o<e.length;++o){var a=e[o];n.push([a[0],a[1]]),r.push(a[2])}}return s};var n=t("union-find"),i=t("box-intersect"),o=t("robust-segment-intersect"),a=t("big-rat"),s=t("big-rat/cmp"),l=t("big-rat/to-float"),g=t("rat-vec"),c=t("nextafter"),u=t("./lib/rat-seg-intersect");function h(t){var e=l(t);return[c(e,-1/0),c(e,1/0)]}function d(t){for(var e=new Array(t.length),r=0;r<t.length;++r){var n=t[r];e[r]=[c(n[0],-1/0),c(n[1],-1/0),c(n[0],1/0),c(n[1],1/0)]}return e}function A(t,e,r){for(var o=e.length,a=new n(o),s=[],l=0;l<e.length;++l){var g=e[l],u=h(g[0]),d=h(g[1]);s.push([c(u[0],-1/0),c(d[0],-1/0),c(u[1],1/0),c(d[1],1/0)])}i(s,function(t,e){a.link(t,e)});var A=!0,f=new Array(o);for(l=0;l<o;++l){(p=a.find(l))!==l&&(A=!1,t[p]=[Math.min(t[l][0],t[p][0]),Math.min(t[l][1],t[p][1])])}if(A)return null;var C=0;for(l=0;l<o;++l){var p;(p=a.find(l))===l?(f[l]=C,t[C++]=t[l]):f[l]=-1}t.length=C;for(l=0;l<o;++l)f[l]<0&&(f[l]=f[a.find(l)]);return f}function f(t,e){return t[0]-e[0]||t[1]-e[1]}function C(t,e){var r=t[0]-e[0]||t[1]-e[1];return r||(t[2]<e[2]?-1:t[2]>e[2]?1:0)}function p(t,e,r){if(0!==t.length){if(e)for(var n=0;n<t.length;++n){var i=e[(a=t[n])[0]],o=e[a[1]];a[0]=Math.min(i,o),a[1]=Math.max(i,o)}else for(n=0;n<t.length;++n){var a;i=(a=t[n])[0],o=a[1];a[0]=Math.min(i,o),a[1]=Math.max(i,o)}r?t.sort(C):t.sort(f);var s=1;for(n=1;n<t.length;++n){var l=t[n-1],g=t[n];(g[0]!==l[0]||g[1]!==l[1]||r&&g[2]!==l[2])&&(t[s++]=g)}t.length=s}}function I(t,e,r){var n=function(t,e){for(var r=new Array(e.length),n=0;n<e.length;++n){var i=e[n],o=t[i[0]],a=t[i[1]];r[n]=[c(Math.min(o[0],a[0]),-1/0),c(Math.min(o[1],a[1]),-1/0),c(Math.max(o[0],a[0]),1/0),c(Math.max(o[1],a[1]),1/0)]}return r}(t,e),h=function(t,e,r){var n=[];return i(r,function(r,i){var a=e[r],s=e[i];if(a[0]!==s[0]&&a[0]!==s[1]&&a[1]!==s[0]&&a[1]!==s[1]){var l=t[a[0]],g=t[a[1]],c=t[s[0]],u=t[s[1]];o(l,g,c,u)&&n.push([r,i])}}),n}(t,e,n),f=d(t),C=function(t,e,r,n){var a=[];return i(r,n,function(r,n){var i=e[r];if(i[0]!==n&&i[1]!==n){var s=t[n],l=t[i[0]],g=t[i[1]];o(l,g,s,s)&&a.push([r,n])}}),a}(t,e,n,f),I=A(t,function(t,e,r,n,i){var o,c,h=t.map(function(t){return[a(t[0]),a(t[1])]});for(o=0;o<r.length;++o){var d=r[o];c=d[0];var A=d[1],f=e[c],C=e[A],p=u(g(t[f[0]]),g(t[f[1]]),g(t[C[0]]),g(t[C[1]]));if(p){var I=t.length;t.push([l(p[0]),l(p[1])]),h.push(p),n.push([c,I],[A,I])}}for(n.sort(function(t,e){if(t[0]!==e[0])return t[0]-e[0];var r=h[t[1]],n=h[e[1]];return s(r[0],n[0])||s(r[1],n[1])}),o=n.length-1;o>=0;--o){var v=e[c=(T=n[o])[0]],m=v[0],y=v[1],b=t[m],x=t[y];if((b[0]-x[0]||b[1]-x[1])<0){var _=m;m=y,y=_}v[0]=m;var w,k=v[1]=T[1];for(i&&(w=v[2]);o>0&&n[o-1][0]===c;){var T,M=(T=n[--o])[1];i?e.push([k,M,w]):e.push([k,M]),k=M}i?e.push([k,y,w]):e.push([k,y])}return h}(t,e,h,C,r));return p(e,I,r),!!I||(h.length>0||C.length>0)}},{"./lib/rat-seg-intersect":52,"big-rat":19,"big-rat/cmp":17,"big-rat/to-float":31,"box-intersect":36,nextafter:263,"rat-vec":655,"robust-segment-intersect":672,"union-find":712}],52:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){var o=s(e,t),u=s(n,r),h=c(o,u);if(0===a(h))return null;var d=s(t,r),A=c(u,d),f=i(A,h),C=g(o,f);return l(t,C)};var n=t("big-rat/mul"),i=t("big-rat/div"),o=t("big-rat/sub"),a=t("big-rat/sign"),s=t("rat-vec/sub"),l=t("rat-vec/add"),g=t("rat-vec/muls");function c(t,e){return o(n(t[0],e[1]),n(t[1],e[0]))}},{"big-rat/div":18,"big-rat/mul":28,"big-rat/sign":29,"big-rat/sub":30,"rat-vec/add":654,"rat-vec/muls":656,"rat-vec/sub":657}],53:[function(t,e,r){"use strict";var n=t("clamp");function i(t,e){null==e&&(e=!0);var r=t[0],i=t[1],o=t[2],a=t[3];return null==a&&(a=e?1:255),e&&(r*=255,i*=255,o*=255,a*=255),16777216*(r=255&n(r,0,255))+((i=255&n(i,0,255))<<16)+((o=255&n(o,0,255))<<8)+(a=255&n(a,0,255))}e.exports=i,e.exports.to=i,e.exports.from=function(t,e){var r=(t=+t)>>>24,n=(16711680&t)>>>16,i=(65280&t)>>>8,o=255&t;return!1===e?[r,n,i,o]:[r/255,n/255,i/255,o/255]}},{clamp:50}],54:[function(t,e,r){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],55:[function(t,e,r){"use strict";var n=t("color-rgba"),i=t("clamp"),o=t("dtype");e.exports=function(t,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var r=new(o(e))(4),a="uint8"!==e&&"uint8_clamped"!==e;return t.length&&"string"!=typeof t||((t=n(t))[0]/=255,t[1]/=255,t[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||0===t[0])&&(t[1]>1||0===t[1])&&(t[2]>1||0===t[2])&&(!t[3]||t[3]>1))}(t)?(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=null!=t[3]?t[3]:255,a&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(a?(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=null!=t[3]?t[3]:1):(r[0]=i(Math.floor(255*t[0]),0,255),r[1]=i(Math.floor(255*t[1]),0,255),r[2]=i(Math.floor(255*t[2]),0,255),r[3]=null==t[3]?255:i(Math.floor(255*t[3]),0,255)),r)}},{clamp:50,"color-rgba":57,dtype:79}],56:[function(t,e,r){(function(r){"use strict";var n=t("color-name"),i=t("is-plain-obj"),o=t("defined");e.exports=function(t){var e,s,l=[],g=1;if("string"==typeof t)if(n[t])l=n[t].slice(),s="rgb";else if("transparent"===t)g=0,s="rgb",l=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var c=t.slice(1),u=c.length,h=u<=4;g=1,h?(l=[parseInt(c[0]+c[0],16),parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16)],4===u&&(g=parseInt(c[3]+c[3],16)/255)):(l=[parseInt(c[0]+c[1],16),parseInt(c[2]+c[3],16),parseInt(c[4]+c[5],16)],8===u&&(g=parseInt(c[6]+c[7],16)/255)),l[0]||(l[0]=0),l[1]||(l[1]=0),l[2]||(l[2]=0),s="rgb"}else if(e=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var d=e[1],A="rgb"===d,c=d.replace(/a$/,"");s=c;var u="cmyk"===c?4:"gray"===c?1:3;l=e[2].trim().split(/\s*,\s*/).map(function(t,e){if(/%$/.test(t))return e===u?parseFloat(t)/100:"rgb"===c?255*parseFloat(t)/100:parseFloat(t);if("h"===c[e]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==a[t])return a[t]}return parseFloat(t)}),d===c&&l.push(1),g=A?1:void 0===l[u]?1:l[u],l=l.slice(0,u)}else t.length>10&&/[0-9](?:\s|\/)/.test(t)&&(l=t.match(/([0-9]+)/g).map(function(t){return parseFloat(t)}),s=t.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(t))if(i(t)){var f=o(t.r,t.red,t.R,null);null!==f?(s="rgb",l=[f,o(t.g,t.green,t.G),o(t.b,t.blue,t.B)]):(s="hsl",l=[o(t.h,t.hue,t.H),o(t.s,t.saturation,t.S),o(t.l,t.lightness,t.L,t.b,t.brightness)]),g=o(t.a,t.alpha,t.opacity,1),null!=t.opacity&&(g/=100)}else(Array.isArray(t)||r.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t))&&(l=[t[0],t[1],t[2]],s="rgb",g=4===t.length?t[3]:1);else s="rgb",l=[t>>>16,(65280&t)>>>8,255&t];return{space:s,values:l,alpha:g}};var a={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"color-name":54,defined:75,"is-plain-obj":241}],57:[function(t,e,r){"use strict";var n=t("color-parse"),i=t("color-space/hsl"),o=t("clamp");e.exports=function(t){var e,r=n(t);return r.space?((e=Array(3))[0]=o(r.values[0],0,255),e[1]=o(r.values[1],0,255),e[2]=o(r.values[2],0,255),"h"===r.space[0]&&(e=i.rgb(e)),e.push(o(r.alpha,0,1)),e):[]}},{clamp:50,"color-parse":56,"color-space/hsl":58}],58:[function(t,e,r){"use strict";var n=t("./rgb");e.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,r,n,i,o,a=t[0]/360,s=t[1]/100,l=t[2]/100;if(0===s)return[o=255*l,o,o];e=2*l-(r=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var g=0;g<3;g++)(n=a+1/3*-(g-1))<0?n++:n>1&&n--,o=6*n<1?e+6*(r-e)*n:2*n<1?r:3*n<2?e+(r-e)*(2/3-n)*6:e,i[g]=255*o;return i}},n.hsl=function(t){var e,r,n=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.min(n,i,o),s=Math.max(n,i,o),l=s-a;return s===a?e=0:n===s?e=(i-o)/l:i===s?e=2+(o-n)/l:o===s&&(e=4+(n-i)/l),(e=Math.min(60*e,360))<0&&(e+=360),r=(a+s)/2,[e,100*(s===a?0:r<=.5?l/(s+a):l/(2-s-a)),100*r]}},{"./rgb":59}],59:[function(t,e,r){"use strict";e.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],60:[function(t,e,r){e.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],61:[function(t,e,r){"use strict";var n=t("./colorScale"),i=t("lerp");function o(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function a(t){for(var e,r="#",n=0;n<3;++n)r+=("00"+(e=(e=t[n]).toString(16))).substr(e.length);return r}function s(t){return"rgba("+t.join(",")+")"}e.exports=function(t){var e,r,l,g,c,u,h,d,A,f;t||(t={});d=(t.nshades||72)-1,h=t.format||"hex",(u=t.colormap)||(u="jet");if("string"==typeof u){if(u=u.toLowerCase(),!n[u])throw Error(u+" not a supported colorscale");c=n[u]}else{if(!Array.isArray(u))throw Error("unsupported colormap option",u);c=u.slice()}if(c.length>d+1)throw new Error(u+" map requires nshades to be at least size "+c.length);A=Array.isArray(t.alpha)?2!==t.alpha.length?[1,1]:t.alpha.slice():"number"==typeof t.alpha?[t.alpha,t.alpha]:[1,1];e=c.map(function(t){return Math.round(t.index*d)}),A[0]=Math.min(Math.max(A[0],0),1),A[1]=Math.min(Math.max(A[1],0),1);var C=c.map(function(t,e){var r=c[e].index,n=c[e].rgb.slice();return 4===n.length&&n[3]>=0&&n[3]<=1?n:(n[3]=A[0]+(A[1]-A[0])*r,n)}),p=[];for(f=0;f<e.length-1;++f){g=e[f+1]-e[f],r=C[f],l=C[f+1];for(var I=0;I<g;I++){var v=I/g;p.push([Math.round(i(r[0],l[0],v)),Math.round(i(r[1],l[1],v)),Math.round(i(r[2],l[2],v)),i(r[3],l[3],v)])}}p.push(c[c.length-1].rgb.concat(A[1])),"hex"===h?p=p.map(a):"rgbaString"===h?p=p.map(s):"float"===h&&(p=p.map(o));return p}},{"./colorScale":60,lerp:244}],62:[function(t,e,r){"use strict";e.exports=function(t,e,r,o){var a=n(e,r,o);if(0===a){var s=i(n(t,e,r)),g=i(n(t,e,o));if(s===g){if(0===s){var c=l(t,e,r),u=l(t,e,o);return c===u?0:c?1:-1}return 0}return 0===g?s>0?-1:l(t,e,o)?-1:1:0===s?g>0?1:l(t,e,r)?1:-1:i(g-s)}var h=n(t,e,r);if(h>0)return a>0&&n(t,e,o)>0?1:-1;if(h<0)return a>0||n(t,e,o)>0?1:-1;var d=n(t,e,o);return d>0?1:l(t,e,r)?1:-1};var n=t("robust-orientation"),i=t("signum"),o=t("two-sum"),a=t("robust-product"),s=t("robust-sum");function l(t,e,r){var n=o(t[0],-e[0]),i=o(t[1],-e[1]),l=o(r[0],-e[0]),g=o(r[1],-e[1]),c=s(a(n,l),a(i,g));return c[c.length-1]>=0}},{"robust-orientation":669,"robust-product":670,"robust-sum":674,signum:675,"two-sum":699}],63:[function(t,e,r){"use strict";var n=t("./lib/ch1d"),i=t("./lib/ch2d"),o=t("./lib/chnd");e.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[[0]];var r=t[0].length;if(0===r)return[];if(1===r)return n(t);if(2===r)return i(t);return o(t,r)}},{"./lib/ch1d":64,"./lib/ch2d":65,"./lib/chnd":66}],64:[function(t,e,r){"use strict";e.exports=function(t){for(var e=0,r=0,n=1;n<t.length;++n)t[n][0]<t[e][0]&&(e=n),t[n][0]>t[r][0]&&(r=n);return e<r?[[e],[r]]:e>r?[[r],[e]]:[[e]]}},{}],65:[function(t,e,r){"use strict";e.exports=function(t){var e=n(t),r=e.length;if(r<=2)return[];for(var i=new Array(r),o=e[r-1],a=0;a<r;++a){var s=e[a];i[a]=[o,s],o=s}return i};var n=t("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":253}],66:[function(t,e,r){"use strict";e.exports=function(t,e){try{return n(t,!0)}catch(s){var r=i(t);if(r.length<=e)return[];var o=function(t,e){for(var r=t.length,n=new Array(r),i=0;i<e.length;++i)n[i]=t[e[i]];for(var o=e.length,i=0;i<r;++i)e.indexOf(i)<0&&(n[o++]=t[i]);return n}(t,r),a=n(o,!0);return function(t,e){for(var r=t.length,n=e.length,i=0;i<r;++i)for(var o=t[i],a=0;a<o.length;++a){var s=o[a];if(s<n)o[a]=e[s];else{s-=n;for(var l=0;l<n;++l)s>=e[l]&&(s+=1);o[a]=s}}return t}(a,r)}};var n=t("incremental-convex-hull"),i=t("affine-hull")},{"affine-hull":5,"incremental-convex-hull":232}],67:[function(t,e,r){"use strict";e.exports=function(t,e,r,n,i,o){var a=i-1,s=i*i,l=a*a,g=(1+2*i)*l,c=i*l,u=s*(3-2*i),h=s*a;if(t.length){o||(o=new Array(t.length));for(var d=t.length-1;d>=0;--d)o[d]=g*t[d]+c*e[d]+u*r[d]+h*n[d];return o}return g*t+c*e+u*r+h*n},e.exports.derivative=function(t,e,r,n,i,o){var a=6*i*i-6*i,s=3*i*i-4*i+1,l=-6*i*i+6*i,g=3*i*i-2*i;if(t.length){o||(o=new Array(t.length));for(var c=t.length-1;c>=0;--c)o[c]=a*t[c]+s*e[c]+l*r[c]+g*n[c];return o}return a*t+s*e+l*r[c]+g*n}},{}],68:[function(t,e,r){"use strict";var n=t("./lib/thunk.js");e.exports=function(t){var e=new function(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1};e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var i=0;i<r.length;++i){var o=r[i];if("array"===o||"object"==typeof o&&o.blockIndices){if(e.argTypes[i]="array",e.arrayArgs.push(i),e.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),e.shimArgs.push("array"+i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)e.scalarArgs.push(i),e.shimArgs.push("scalar"+i);else if("index"===o){if(e.indexArgs.push(i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(e.shapeArgs.push(i),i<e.pre.args.length&&e.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<e.post.args.length&&e.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+r[i]);e.argTypes[i]="offset",e.offsetArgs.push({array:o.array,offset:o.offset}),e.offsetArgIndex.push(i)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,n(e)}},{"./lib/thunk.js":70}],69:[function(t,e,r){"use strict";var n=t("uniq");function i(t,e,r){var n,i,o=t.length,a=e.arrayArgs.length,s=e.indexArgs.length>0,l=[],g=[],c=0,u=0;for(n=0;n<o;++n)g.push(["i",n,"=0"].join(""));for(i=0;i<a;++i)for(n=0;n<o;++n)u=c,c=t[n],0===n?g.push(["d",i,"s",n,"=t",i,"p",c].join("")):g.push(["d",i,"s",n,"=(t",i,"p",c,"-s",u,"*t",i,"p",u,")"].join(""));for(g.length>0&&l.push("var "+g.join(",")),n=o-1;n>=0;--n)c=t[n],l.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(l.push(r),n=0;n<o;++n){for(u=c,c=t[n],i=0;i<a;++i)l.push(["p",i,"+=d",i,"s",n].join(""));s&&(n>0&&l.push(["index[",u,"]-=s",u].join("")),l.push(["++index[",c,"]"].join(""))),l.push("}")}return l.join("\n")}function o(t,e,r){for(var n=t.body,i=[],o=[],a=0;a<t.args.length;++a){var s=t.args[a];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),g="",c=e.arrayArgs.indexOf(a);switch(e.argTypes[a]){case"offset":var u=e.offsetArgIndex.indexOf(a);c=e.offsetArgs[u].array,g="+q"+u;case"array":g="p"+c+g;var h="l"+a,d="a"+c;if(0===e.arrayBlockIndices[c])1===s.count?"generic"===r[c]?s.lvalue?(i.push(["var ",h,"=",d,".get(",g,")"].join("")),n=n.replace(l,h),o.push([d,".set(",g,",",h,")"].join(""))):n=n.replace(l,[d,".get(",g,")"].join("")):n=n.replace(l,[d,"[",g,"]"].join("")):"generic"===r[c]?(i.push(["var ",h,"=",d,".get(",g,")"].join("")),n=n.replace(l,h),s.lvalue&&o.push([d,".set(",g,",",h,")"].join(""))):(i.push(["var ",h,"=",d,"[",g,"]"].join("")),n=n.replace(l,h),s.lvalue&&o.push([d,"[",g,"]=",h].join("")));else{for(var A=[s.name],f=[g],C=0;C<Math.abs(e.arrayBlockIndices[c]);C++)A.push("\\s*\\[([^\\]]+)\\]"),f.push("$"+(C+1)+"*t"+c+"b"+C);if(l=new RegExp(A.join(""),"g"),g=f.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(l,[d,"[",g,"]"].join(""))}break;case"scalar":n=n.replace(l,"Y"+e.scalarArgs.indexOf(a));break;case"index":n=n.replace(l,"index");break;case"shape":n=n.replace(l,"shape")}}}return[i.join("\n"),n,o.join("\n")].join("\n").trim()}e.exports=function(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,a=new Array(t.arrayArgs.length),s=new Array(t.arrayArgs.length),l=0;l<t.arrayArgs.length;++l)s[l]=e[2*l],a[l]=e[2*l+1];var g=[],c=[],u=[],h=[],d=[];for(l=0;l<t.arrayArgs.length;++l){t.arrayBlockIndices[l]<0?(u.push(0),h.push(r),g.push(r),c.push(r+t.arrayBlockIndices[l])):(u.push(t.arrayBlockIndices[l]),h.push(t.arrayBlockIndices[l]+r),g.push(0),c.push(t.arrayBlockIndices[l]));for(var A=[],f=0;f<a[l].length;f++)u[l]<=a[l][f]&&a[l][f]<h[l]&&A.push(a[l][f]-u[l]);d.push(A)}var C=["SS"],p=["'use strict'"],I=[];for(f=0;f<r;++f)I.push(["s",f,"=SS[",f,"]"].join(""));for(l=0;l<t.arrayArgs.length;++l){for(C.push("a"+l),C.push("t"+l),C.push("p"+l),f=0;f<r;++f)I.push(["t",l,"p",f,"=t",l,"[",u[l]+f,"]"].join(""));for(f=0;f<Math.abs(t.arrayBlockIndices[l]);++f)I.push(["t",l,"b",f,"=t",l,"[",g[l]+f,"]"].join(""))}for(l=0;l<t.scalarArgs.length;++l)C.push("Y"+l);if(t.shapeArgs.length>0&&I.push("shape=SS.slice(0)"),t.indexArgs.length>0){var v=new Array(r);for(l=0;l<r;++l)v[l]="0";I.push(["index=[",v.join(","),"]"].join(""))}for(l=0;l<t.offsetArgs.length;++l){var m=t.offsetArgs[l],y=[];for(f=0;f<m.offset.length;++f)0!==m.offset[f]&&(1===m.offset[f]?y.push(["t",m.array,"p",f].join("")):y.push([m.offset[f],"*t",m.array,"p",f].join("")));0===y.length?I.push("q"+l+"=0"):I.push(["q",l,"=",y.join("+")].join(""))}var b=n([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));for((I=I.concat(b)).length>0&&p.push("var "+I.join(",")),l=0;l<t.arrayArgs.length;++l)p.push("p"+l+"|=0");t.pre.body.length>3&&p.push(o(t.pre,t,s));var x=o(t.body,t,s),_=function(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}(d);_<r?p.push(function(t,e,r,n){for(var o=e.length,a=r.arrayArgs.length,s=r.blockSize,l=r.indexArgs.length>0,g=[],c=0;c<a;++c)g.push(["var offset",c,"=p",c].join(""));for(c=t;c<o;++c)g.push(["for(var j"+c+"=SS[",e[c],"]|0;j",c,">0;){"].join("")),g.push(["if(j",c,"<",s,"){"].join("")),g.push(["s",e[c],"=j",c].join("")),g.push(["j",c,"=0"].join("")),g.push(["}else{s",e[c],"=",s].join("")),g.push(["j",c,"-=",s,"}"].join("")),l&&g.push(["index[",e[c],"]=j",c].join(""));for(c=0;c<a;++c){for(var u=["offset"+c],h=t;h<o;++h)u.push(["j",h,"*t",c,"p",e[h]].join(""));g.push(["p",c,"=(",u.join("+"),")"].join(""))}for(g.push(i(e,r,n)),c=t;c<o;++c)g.push("}");return g.join("\n")}(_,d[0],t,x)):p.push(i(d[0],t,x)),t.post.body.length>3&&p.push(o(t.post,t,s)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+p.join("\n")+"\n----------");var w=[t.funcName||"unnamed","_cwise_loop_",a[0].join("s"),"m",_,function(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?e[n]="u"+i.charAt(1)+o:e[n]=i.charAt(0)+o,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}(s)].join("");return new Function(["function ",w,"(",C.join(","),"){",p.join("\n"),"} return ",w].join(""))()}},{uniq:713}],70:[function(t,e,r){"use strict";var n=t("./compile.js");e.exports=function(t){var e=["'use strict'","var CACHED={}"],r=[],i=t.funcName+"_cwise_thunk";e.push(["return function ",i,"(",t.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],l=[],g=[],c=0;c<t.arrayArgs.length;++c){var u=t.arrayArgs[c];r.push(["t",u,"=array",u,".dtype,","r",u,"=array",u,".order"].join("")),o.push("t"+u),o.push("r"+u),a.push("t"+u),a.push("r"+u+".join()"),s.push("array"+u+".data"),s.push("array"+u+".stride"),s.push("array"+u+".offset|0"),c>0&&(l.push("array"+t.arrayArgs[0]+".shape.length===array"+u+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[c]))),g.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+u+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[c])+"]"))}for(t.arrayArgs.length>1&&(e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+g.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}")),c=0;c<t.scalarArgs.length;++c)s.push("scalar"+t.scalarArgs[c]);return r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------"),new Function("compile",e.join("\n"))(n.bind(void 0,t))}},{"./compile.js":69}],71:[function(t,e,r){e.exports=t("cwise-compiler")},{"cwise-compiler":68}],72:[function(t,e,r){"use strict";var n,i=t("type/value/is"),o=t("type/value/ensure"),a=t("type/plain-function/ensure"),s=t("es5-ext/object/copy"),l=t("es5-ext/object/normalize-options"),g=t("es5-ext/object/map"),c=Function.prototype.bind,u=Object.defineProperty,h=Object.prototype.hasOwnProperty;n=function(t,e,r){var n,i=o(e)&&a(e.value);return delete(n=s(e)).writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&h.call(this,t)?i:(e.value=c.call(i,r.resolveContext?r.resolveContext(this):this),u(this,t,e),this[t])},n},e.exports=function(t){var e=l(arguments[1]);return i(e.resolveContext)&&a(e.resolveContext),g(t,function(t,r){return n(r,t,e)})}},{"es5-ext/object/copy":99,"es5-ext/object/map":107,"es5-ext/object/normalize-options":108,"type/plain-function/ensure":705,"type/value/ensure":709,"type/value/is":710}],73:[function(t,e,r){"use strict";var n=t("type/value/is"),i=t("type/plain-function/is"),o=t("es5-ext/object/assign"),a=t("es5-ext/object/normalize-options"),s=t("es5-ext/string/#/contains");(e.exports=function(t,e){var r,i,l,g,c;return arguments.length<2||"string"!=typeof t?(g=e,e=t,t=null):g=arguments[2],n(t)?(r=s.call(t,"c"),i=s.call(t,"e"),l=s.call(t,"w")):(r=l=!0,i=!1),c={value:e,configurable:r,enumerable:i,writable:l},g?o(a(g),c):c}).gs=function(t,e,r){var l,g,c,u;return"string"!=typeof t?(c=r,r=e,e=t,t=null):c=arguments[3],n(e)?i(e)?n(r)?i(r)||(c=r,r=void 0):r=void 0:(c=e,e=r=void 0):e=void 0,n(t)?(l=s.call(t,"c"),g=s.call(t,"e")):(l=!0,g=!1),u={get:e,set:r,configurable:l,enumerable:g},c?o(a(c),u):u}},{"es5-ext/object/assign":96,"es5-ext/object/normalize-options":108,"es5-ext/string/#/contains":115,"type/plain-function/is":706,"type/value/is":710}],74:[function(t,e,r){!function(){var t={version:"3.5.17"},r=[].slice,n=function(t){return r.call(t)},i=this.document;function o(t){return t&&(t.ownerDocument||t.document||t).documentElement}function a(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(i)try{n(i.documentElement.childNodes)[0].nodeType}catch(t){n=function(t){for(var e=t.length,r=new Array(e);e--;)r[e]=t[e];return r}}if(Date.now||(Date.now=function(){return+new Date}),i)try{i.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var s=this.Element.prototype,l=s.setAttribute,g=s.setAttributeNS,c=this.CSSStyleDeclaration.prototype,u=c.setProperty;s.setAttribute=function(t,e){l.call(this,t,e+"")},s.setAttributeNS=function(t,e,r){g.call(this,t,e,r+"")},c.setProperty=function(t,e,r){u.call(this,t,e+"",r)}}function h(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function d(t){return null===t?NaN:+t}function A(t){return!isNaN(t)}function f(t){return{left:function(e,r,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=e.length);n<i;){var o=n+i>>>1;t(e[o],r)<0?n=o+1:i=o}return n},right:function(e,r,n,i){for(arguments.length<3&&(n=0),arguments.length<4&&(i=e.length);n<i;){var o=n+i>>>1;t(e[o],r)>0?i=o:n=o+1}return n}}}t.ascending=h,t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.min=function(t,e){var r,n,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(n=t[i])&&n>=n){r=n;break}for(;++i<o;)null!=(n=t[i])&&r>n&&(r=n)}else{for(;++i<o;)if(null!=(n=e.call(t,t[i],i))&&n>=n){r=n;break}for(;++i<o;)null!=(n=e.call(t,t[i],i))&&r>n&&(r=n)}return r},t.max=function(t,e){var r,n,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(n=t[i])&&n>=n){r=n;break}for(;++i<o;)null!=(n=t[i])&&n>r&&(r=n)}else{for(;++i<o;)if(null!=(n=e.call(t,t[i],i))&&n>=n){r=n;break}for(;++i<o;)null!=(n=e.call(t,t[i],i))&&n>r&&(r=n)}return r},t.extent=function(t,e){var r,n,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(n=t[o])&&n>=n){r=i=n;break}for(;++o<a;)null!=(n=t[o])&&(r>n&&(r=n),i<n&&(i=n))}else{for(;++o<a;)if(null!=(n=e.call(t,t[o],o))&&n>=n){r=i=n;break}for(;++o<a;)null!=(n=e.call(t,t[o],o))&&(r>n&&(r=n),i<n&&(i=n))}return[r,i]},t.sum=function(t,e){var r,n=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)A(r=+t[o])&&(n+=r);else for(;++o<i;)A(r=+e.call(t,t[o],o))&&(n+=r);return n},t.mean=function(t,e){var r,n=0,i=t.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)A(r=d(t[o]))?n+=r:--a;else for(;++o<i;)A(r=d(e.call(t,t[o],o)))?n+=r:--a;if(a)return n/a},t.quantile=function(t,e){var r=(t.length-1)*e+1,n=Math.floor(r),i=+t[n-1],o=r-n;return o?i+o*(t[n]-i):i},t.median=function(e,r){var n,i=[],o=e.length,a=-1;if(1===arguments.length)for(;++a<o;)A(n=d(e[a]))&&i.push(n);else for(;++a<o;)A(n=d(r.call(e,e[a],a)))&&i.push(n);if(i.length)return t.quantile(i.sort(h),.5)},t.variance=function(t,e){var r,n,i=t.length,o=0,a=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)A(r=d(t[s]))&&(a+=(n=r-o)*(r-(o+=n/++l)));else for(;++s<i;)A(r=d(e.call(t,t[s],s)))&&(a+=(n=r-o)*(r-(o+=n/++l)));if(l>1)return a/(l-1)},t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};var C=f(h);function p(t){return t.length}t.bisectLeft=C.left,t.bisect=t.bisectRight=C.right,t.bisector=function(t){return f(1===t.length?function(e,r){return h(t(e),r)}:t)},t.shuffle=function(t,e,r){(o=arguments.length)<3&&(r=t.length,o<2&&(e=0));for(var n,i,o=r-e;o;)i=Math.random()*o--|0,n=t[o+e],t[o+e]=t[i+e],t[i+e]=n;return t},t.permute=function(t,e){for(var r=e.length,n=new Array(r);r--;)n[r]=t[e[r]];return n},t.pairs=function(t){for(var e=0,r=t.length-1,n=t[0],i=new Array(r<0?0:r);e<r;)i[e]=[n,n=t[++e]];return i},t.transpose=function(e){if(!(o=e.length))return[];for(var r=-1,n=t.min(e,p),i=new Array(n);++r<n;)for(var o,a=-1,s=i[r]=new Array(o);++a<o;)s[a]=e[a][r];return i},t.zip=function(){return t.transpose(arguments)},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e},t.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},t.entries=function(t){var e=[];for(var r in t)e.push({key:r,value:t[r]});return e},t.merge=function(t){for(var e,r,n,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(r=new Array(a);--i>=0;)for(e=(n=t[i]).length;--e>=0;)r[--a]=n[e];return r};var I=Math.abs;function v(t,e){for(var r in e)Object.defineProperty(t.prototype,r,{value:e[r],enumerable:!1})}function m(){this._=Object.create(null)}t.range=function(t,e,r){if(arguments.length<3&&(r=1,arguments.length<2&&(e=t,t=0)),(e-t)/r==1/0)throw new Error("infinite range");var n,i=[],o=function(t){var e=1;for(;t*e%1;)e*=10;return e}(I(r)),a=-1;if(t*=o,e*=o,(r*=o)<0)for(;(n=t+r*++a)>e;)i.push(n/o);else for(;(n=t+r*++a)<e;)i.push(n/o);return i},t.map=function(t,e){var r=new m;if(t instanceof m)t.forEach(function(t,e){r.set(t,e)});else if(Array.isArray(t)){var n,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)r.set(i,t[i]);else for(;++i<o;)r.set(e.call(t,n=t[i],i),n)}else for(var a in t)r.set(a,t[a]);return r};var y="__proto__",b="\0";function x(t){return(t+="")===y||t[0]===b?b+t:t}function _(t){return(t+="")[0]===b?t.slice(1):t}function w(t){return x(t)in this._}function k(t){return(t=x(t))in this._&&delete this._[t]}function T(){var t=[];for(var e in this._)t.push(_(e));return t}function M(){var t=0;for(var e in this._)++t;return t}function E(){for(var t in this._)return!1;return!0}function O(){this._=Object.create(null)}function S(t){return t}function R(t,e,r){return function(){var n=r.apply(e,arguments);return n===e?t:n}}function D(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var r=0,n=L.length;r<n;++r){var i=L[r]+e;if(i in t)return i}}v(m,{has:w,get:function(t){return this._[x(t)]},set:function(t,e){return this._[x(t)]=e},remove:k,keys:T,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:_(e),value:this._[e]});return t},size:M,empty:E,forEach:function(t){for(var e in this._)t.call(this,_(e),this._[e])}}),t.nest=function(){var e,r,n={},i=[],o=[];function a(t,o,s){if(s>=i.length)return r?r.call(n,o):e?o.sort(e):o;for(var l,g,c,u,h=-1,d=o.length,A=i[s++],f=new m;++h<d;)(u=f.get(l=A(g=o[h])))?u.push(g):f.set(l,[g]);return t?(g=t(),c=function(e,r){g.set(e,a(t,r,s))}):(g={},c=function(e,r){g[e]=a(t,r,s)}),f.forEach(c),g}return n.map=function(t,e){return a(e,t,0)},n.entries=function(e){return function t(e,r){if(r>=i.length)return e;var n=[],a=o[r++];return e.forEach(function(e,i){n.push({key:e,values:t(i,r)})}),a?n.sort(function(t,e){return a(t.key,e.key)}):n}(a(t.map,e,0),0)},n.key=function(t){return i.push(t),n},n.sortKeys=function(t){return o[i.length-1]=t,n},n.sortValues=function(t){return e=t,n},n.rollup=function(t){return r=t,n},n},t.set=function(t){var e=new O;if(t)for(var r=0,n=t.length;r<n;++r)e.add(t[r]);return e},v(O,{has:w,add:function(t){return this._[x(t+="")]=!0,t},remove:k,values:T,size:M,empty:E,forEach:function(t){for(var e in this._)t.call(this,_(e))}}),t.behavior={},t.rebind=function(t,e){for(var r,n=1,i=arguments.length;++n<i;)t[r=arguments[n]]=R(t,e,e[r]);return t};var L=["webkit","ms","moz","Moz","o","O"];function P(){}function N(){}function z(t){var e=[],r=new m;function n(){for(var r,n=e,i=-1,o=n.length;++i<o;)(r=n[i].on)&&r.apply(this,arguments);return t}return n.on=function(n,i){var o,a=r.get(n);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1)),r.remove(n)),i&&e.push(r.set(n,{on:i})),t)},n}function F(){t.event.preventDefault()}function B(){for(var e,r=t.event;e=r.sourceEvent;)r=e;return r}function j(e){for(var r=new N,n=0,i=arguments.length;++n<i;)r[arguments[n]]=z(r);return r.of=function(n,i){return function(o){try{var a=o.sourceEvent=t.event;o.target=e,t.event=o,r[o.type].apply(n,i)}finally{t.event=a}}},r}t.dispatch=function(){for(var t=new N,e=-1,r=arguments.length;++e<r;)t[arguments[e]]=z(t);return t},N.prototype.on=function(t,e){var r=t.indexOf("."),n="";if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t)return arguments.length<2?this[t].on(n):this[t].on(n,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(n,null);return this}},t.event=null,t.requote=function(t){return t.replace(V,"\\$&")};var V=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,G={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)t[r]=e[r]};function U(t){return G(t,Y),t}var Z=function(t,e){return e.querySelector(t)},H=function(t,e){return e.querySelectorAll(t)},W=function(t,e){var r=t.matches||t[D(t,"matchesSelector")];return(W=function(t,e){return r.call(t,e)})(t,e)};"function"==typeof Sizzle&&(Z=function(t,e){return Sizzle(t,e)[0]||null},H=Sizzle,W=Sizzle.matchesSelector),t.selection=function(){return t.select(i.documentElement)};var Y=t.selection.prototype=[];function X(t){return"function"==typeof t?t:function(){return Z(t,this)}}function q(t){return"function"==typeof t?t:function(){return H(t,this)}}Y.select=function(t){var e,r,n,i,o=[];t=X(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var l=-1,g=n.length;++l<g;)(i=n[l])?(e.push(r=t.call(i,i.__data__,l,a)),r&&"__data__"in i&&(r.__data__=i.__data__)):e.push(null)}return U(o)},Y.selectAll=function(t){var e,r,i=[];t=q(t);for(var o=-1,a=this.length;++o<a;)for(var s=this[o],l=-1,g=s.length;++l<g;)(r=s[l])&&(i.push(e=n(t.call(r,r.__data__,l,o))),e.parentNode=r);return U(i)};var Q="http://www.w3.org/1999/xhtml",K={svg:"http://www.w3.org/2000/svg",xhtml:Q,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function J(e,r){return e=t.ns.qualify(e),null==r?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof r?e.local?function(){var t=r.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=r.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,r)}:function(){this.setAttribute(e,r)}}function $(t){return t.trim().replace(/\s+/g," ")}function tt(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function et(t){return(t+"").trim().split(/^|\s+/)}function rt(t,e){var r=(t=et(t).map(nt)).length;return"function"==typeof e?function(){for(var n=-1,i=e.apply(this,arguments);++n<r;)t[n](this,i)}:function(){for(var n=-1;++n<r;)t[n](this,e)}}function nt(t){var e=tt(t);return function(r,n){if(i=r.classList)return n?i.add(t):i.remove(t);var i=r.getAttribute("class")||"";n?(e.lastIndex=0,e.test(i)||r.setAttribute("class",$(i+" "+t))):r.setAttribute("class",$(i.replace(e," ")))}}function it(t,e,r){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,r)}:function(){this.style.setProperty(t,e,r)}}function ot(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?delete this[t]:this[t]=r}:function(){this[t]=e}}function at(e){return"function"==typeof e?e:(e=t.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,r=this.namespaceURI;return r===Q&&t.documentElement.namespaceURI===Q?t.createElement(e):t.createElementNS(r,e)}}function st(){var t=this.parentNode;t&&t.removeChild(this)}function lt(t){return{__data__:t}}function gt(t){return function(){return W(this,t)}}function ct(t,e){for(var r=0,n=t.length;r<n;r++)for(var i,o=t[r],a=0,s=o.length;a<s;a++)(i=o[a])&&e(i,a,r);return t}function ut(t){return G(t,ht),t}t.ns={prefix:K,qualify:function(t){var e=t.indexOf(":"),r=t;return e>=0&&"xmlns"!==(r=t.slice(0,e))&&(t=t.slice(e+1)),K.hasOwnProperty(r)?{space:K[r],local:t}:t}},Y.attr=function(e,r){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=t.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(r in e)this.each(J(r,e[r]));return this}return this.each(J(e,r))},Y.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var r=this.node(),n=(t=et(t)).length,i=-1;if(e=r.classList){for(;++i<n;)if(!e.contains(t[i]))return!1}else for(e=r.getAttribute("class");++i<n;)if(!tt(t[i]).test(e))return!1;return!0}for(e in t)this.each(rt(e,t[e]));return this}return this.each(rt(t,e))},Y.style=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){for(r in n<2&&(e=""),t)this.each(it(r,t[r],e));return this}if(n<2){var i=this.node();return a(i).getComputedStyle(i,null).getPropertyValue(t)}r=""}return this.each(it(t,e,r))},Y.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(ot(e,t[e]));return this}return this.each(ot(t,e))},Y.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Y.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Y.append=function(t){return t=at(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Y.insert=function(t,e){return t=at(t),e=X(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Y.remove=function(){return this.each(st)},Y.data=function(t,e){var r,n,i=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(r=this[0]).length);++i<o;)(n=r[i])&&(t[i]=n.__data__);return t}function a(t,r){var n,i,o,a=t.length,c=r.length,u=Math.min(a,c),h=new Array(c),d=new Array(c),A=new Array(a);if(e){var f,C=new m,p=new Array(a);for(n=-1;++n<a;)(i=t[n])&&(C.has(f=e.call(i,i.__data__,n))?A[n]=i:C.set(f,i),p[n]=f);for(n=-1;++n<c;)(i=C.get(f=e.call(r,o=r[n],n)))?!0!==i&&(h[n]=i,i.__data__=o):d[n]=lt(o),C.set(f,!0);for(n=-1;++n<a;)n in p&&!0!==C.get(p[n])&&(A[n]=t[n])}else{for(n=-1;++n<u;)i=t[n],o=r[n],i?(i.__data__=o,h[n]=i):d[n]=lt(o);for(;n<c;++n)d[n]=lt(r[n]);for(;n<a;++n)A[n]=t[n]}d.update=h,d.parentNode=h.parentNode=A.parentNode=t.parentNode,s.push(d),l.push(h),g.push(A)}var s=ut([]),l=U([]),g=U([]);if("function"==typeof t)for(;++i<o;)a(r=this[i],t.call(r,r.parentNode.__data__,i));else for(;++i<o;)a(r=this[i],t);return l.enter=function(){return s},l.exit=function(){return g},l},Y.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Y.filter=function(t){var e,r,n,i=[];"function"!=typeof t&&(t=gt(t));for(var o=0,a=this.length;o<a;o++){i.push(e=[]),e.parentNode=(r=this[o]).parentNode;for(var s=0,l=r.length;s<l;s++)(n=r[s])&&t.call(n,n.__data__,s,o)&&e.push(n)}return U(i)},Y.order=function(){for(var t=-1,e=this.length;++t<e;)for(var r,n=this[t],i=n.length-1,o=n[i];--i>=0;)(r=n[i])&&(o&&o!==r.nextSibling&&o.parentNode.insertBefore(r,o),o=r);return this},Y.sort=function(t){t=function(t){arguments.length||(t=h);return function(e,r){return e&&r?t(e.__data__,r.__data__):!e-!r}}.apply(this,arguments);for(var e=-1,r=this.length;++e<r;)this[e].sort(t);return this.order()},Y.each=function(t){return ct(this,function(e,r,n){t.call(e,e.__data__,r,n)})},Y.call=function(t){var e=n(arguments);return t.apply(e[0]=this,e),this},Y.empty=function(){return!this.node()},Y.node=function(){for(var t=0,e=this.length;t<e;t++)for(var r=this[t],n=0,i=r.length;n<i;n++){var o=r[n];if(o)return o}return null},Y.size=function(){var t=0;return ct(this,function(){++t}),t};var ht=[];function dt(e,r,i){var o="__on"+e,a=e.indexOf("."),s=ft;a>0&&(e=e.slice(0,a));var l=At.get(e);function g(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}return l&&(e=l,s=Ct),a?r?function(){var t=s(r,n(arguments));g.call(this),this.addEventListener(e,this[o]=t,t.$=i),t._=r}:g:r?P:function(){var r,n=new RegExp("^__on([^.]+)"+t.requote(e)+"$");for(var i in this)if(r=i.match(n)){var o=this[i];this.removeEventListener(r[1],o,o.$),delete this[i]}}}t.selection.enter=ut,t.selection.enter.prototype=ht,ht.append=Y.append,ht.empty=Y.empty,ht.node=Y.node,ht.call=Y.call,ht.size=Y.size,ht.select=function(t){for(var e,r,n,i,o,a=[],s=-1,l=this.length;++s<l;){n=(i=this[s]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var g=-1,c=i.length;++g<c;)(o=i[g])?(e.push(n[g]=r=t.call(i.parentNode,o.__data__,g,s)),r.__data__=o.__data__):e.push(null)}return U(a)},ht.insert=function(t,e){var r,n,i;return arguments.length<2&&(r=this,e=function(t,e,o){var a,s=r[o].update,l=s.length;for(o!=i&&(i=o,n=0),e>=n&&(n=e+1);!(a=s[n])&&++n<l;);return a}),Y.insert.call(this,t,e)},t.select=function(t){var e;return"string"==typeof t?(e=[Z(t,i)]).parentNode=i.documentElement:(e=[t]).parentNode=o(t),U([e])},t.selectAll=function(t){var e;return"string"==typeof t?(e=n(H(t,i))).parentNode=i.documentElement:(e=n(t)).parentNode=null,U([e])},Y.on=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){for(r in n<2&&(e=!1),t)this.each(dt(r,t[r],e));return this}if(n<2)return(n=this.node()["__on"+t])&&n._;r=!1}return this.each(dt(t,e,r))};var At=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});function ft(e,r){return function(n){var i=t.event;t.event=n,r[0]=this.__data__;try{e.apply(this,r)}finally{t.event=i}}}function Ct(t,e){var r=ft(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||r.call(this,t)}}i&&At.forEach(function(t){"on"+t in i&&At.remove(t)});var pt,It=0;function vt(e){var r=".dragsuppress-"+ ++It,n="click"+r,i=t.select(a(e)).on("touchmove"+r,F).on("dragstart"+r,F).on("selectstart"+r,F);if(null==pt&&(pt=!("onselectstart"in e)&&D(e.style,"userSelect")),pt){var s=o(e).style,l=s[pt];s[pt]="none"}return function(t){if(i.on(r,null),pt&&(s[pt]=l),t){var e=function(){i.on(n,null)};i.on(n,function(){F(),e()},!0),setTimeout(e,0)}}}t.mouse=function(t){return yt(t,B())};var mt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function yt(e,r){r.changedTouches&&(r=r.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var i=n.createSVGPoint();if(mt<0){var o=a(e);if(o.scrollX||o.scrollY){var s=(n=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();mt=!(s.f||s.e),n.remove()}}return mt?(i.x=r.pageX,i.y=r.pageY):(i.x=r.clientX,i.y=r.clientY),[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}var l=e.getBoundingClientRect();return[r.clientX-l.left-e.clientLeft,r.clientY-l.top-e.clientTop]}function bt(){return t.event.changedTouches[0].identifier}t.touch=function(t,e,r){if(arguments.length<3&&(r=e,e=B().changedTouches),e)for(var n,i=0,o=e.length;i<o;++i)if((n=e[i]).identifier===r)return yt(t,n)},t.behavior.drag=function(){var e=j(o,"drag","dragstart","dragend"),r=null,n=s(P,t.mouse,a,"mousemove","mouseup"),i=s(bt,t.touch,S,"touchmove","touchend");function o(){this.on("mousedown.drag",n).on("touchstart.drag",i)}function s(n,i,o,a,s){return function(){var l,g=t.event.target.correspondingElement||t.event.target,c=this.parentNode,u=e.of(this,arguments),h=0,d=n(),A=".drag"+(null==d?"":"-"+d),f=t.select(o(g)).on(a+A,function(){var t,e,r=i(c,d);if(!r)return;t=r[0]-p[0],e=r[1]-p[1],h|=t|e,p=r,u({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:t,dy:e})}).on(s+A,function(){if(!i(c,d))return;f.on(a+A,null).on(s+A,null),C(h),u({type:"dragend"})}),C=vt(g),p=i(c,d);l=r?[(l=r.apply(this,arguments)).x-p[0],l.y-p[1]]:[0,0],u({type:"dragstart"})}}return o.origin=function(t){return arguments.length?(r=t,o):r},t.rebind(o,e,"on")},t.touches=function(t,e){return arguments.length<2&&(e=B().touches),e?n(e).map(function(e){var r=yt(t,e);return r.identifier=e.identifier,r}):[]};var xt=1e-6,_t=xt*xt,wt=Math.PI,kt=2*wt,Tt=kt-xt,Mt=wt/2,Et=wt/180,Ot=180/wt;function St(t){return t>0?1:t<0?-1:0}function Rt(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(e[1]-t[1])*(r[0]-t[0])}function Dt(t){return t>1?0:t<-1?wt:Math.acos(t)}function Lt(t){return t>1?Mt:t<-1?-Mt:Math.asin(t)}function Pt(t){return((t=Math.exp(t))+1/t)/2}function Nt(t){return(t=Math.sin(t/2))*t}var zt=Math.SQRT2;t.interpolateZoom=function(t,e){var r,n,i=t[0],o=t[1],a=t[2],s=e[0],l=e[1],g=e[2],c=s-i,u=l-o,h=c*c+u*u;if(h<_t)n=Math.log(g/a)/zt,r=function(t){return[i+t*c,o+t*u,a*Math.exp(zt*t*n)]};else{var d=Math.sqrt(h),A=(g*g-a*a+4*h)/(2*a*2*d),f=(g*g-a*a-4*h)/(2*g*2*d),C=Math.log(Math.sqrt(A*A+1)-A),p=Math.log(Math.sqrt(f*f+1)-f);n=(p-C)/zt,r=function(t){var e,r=t*n,s=Pt(C),l=a/(2*d)*(s*(e=zt*r+C,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(C));return[i+l*c,o+l*u,a*s/Pt(zt*r+C)]}}return r.duration=1e3*n,r},t.behavior.zoom=function(){var e,r,n,o,s,l,g,c,u,h={x:0,y:0,k:1},d=[960,500],A=jt,f=250,C=0,p="mousedown.zoom",I="mousemove.zoom",v="mouseup.zoom",m="touchstart.zoom",y=j(b,"zoomstart","zoom","zoomend");function b(t){t.on(p,S).on(Bt+".zoom",D).on("dblclick.zoom",L).on(m,R)}function x(t){return[(t[0]-h.x)/h.k,(t[1]-h.y)/h.k]}function _(t){h.k=Math.max(A[0],Math.min(A[1],t))}function w(t,e){e=function(t){return[t[0]*h.k+h.x,t[1]*h.k+h.y]}(e),h.x+=t[0]-e[0],h.y+=t[1]-e[1]}function k(e,n,i,o){e.__chart__={x:h.x,y:h.y,k:h.k},_(Math.pow(2,o)),w(r=n,i),e=t.select(e),f>0&&(e=e.transition().duration(f)),e.call(b.event)}function T(){g&&g.domain(l.range().map(function(t){return(t-h.x)/h.k}).map(l.invert)),u&&u.domain(c.range().map(function(t){return(t-h.y)/h.k}).map(c.invert))}function M(t){C++||t({type:"zoomstart"})}function E(t){T(),t({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function O(t){--C||(t({type:"zoomend"}),r=null)}function S(){var e=this,r=y.of(e,arguments),n=0,i=t.select(a(e)).on(I,function(){n=1,w(t.mouse(e),o),E(r)}).on(v,function(){i.on(I,null).on(v,null),s(n),O(r)}),o=x(t.mouse(e)),s=vt(e);ss.call(e),M(r)}function R(){var e,r=this,n=y.of(r,arguments),i={},o=0,a=".zoom-"+t.event.changedTouches[0].identifier,l="touchmove"+a,g="touchend"+a,c=[],u=t.select(r),d=vt(r);function A(){var n=t.touches(r);return e=h.k,n.forEach(function(t){t.identifier in i&&(i[t.identifier]=x(t))}),n}function f(){var e=t.event.target;t.select(e).on(l,C).on(g,I),c.push(e);for(var n=t.event.changedTouches,a=0,u=n.length;a<u;++a)i[n[a].identifier]=null;var d=A(),f=Date.now();if(1===d.length){if(f-s<500){var p=d[0];k(r,p,i[p.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),F()}s=f}else if(d.length>1){p=d[0];var v=d[1],m=p[0]-v[0],y=p[1]-v[1];o=m*m+y*y}}function C(){var a,l,g,c,u=t.touches(r);ss.call(r);for(var h=0,d=u.length;h<d;++h,c=null)if(g=u[h],c=i[g.identifier]){if(l)break;a=g,l=c}if(c){var A=(A=g[0]-a[0])*A+(A=g[1]-a[1])*A,f=o&&Math.sqrt(A/o);a=[(a[0]+g[0])/2,(a[1]+g[1])/2],l=[(l[0]+c[0])/2,(l[1]+c[1])/2],_(f*e)}s=null,w(a,l),E(n)}function I(){if(t.event.touches.length){for(var e=t.event.changedTouches,r=0,o=e.length;r<o;++r)delete i[e[r].identifier];for(var s in i)return void A()}t.selectAll(c).on(a,null),u.on(p,S).on(m,R),d(),O(n)}f(),M(n),u.on(p,null).on(m,f)}function D(){var i=y.of(this,arguments);o?clearTimeout(o):(ss.call(this),e=x(r=n||t.mouse(this)),M(i)),o=setTimeout(function(){o=null,O(i)},50),F(),_(Math.pow(2,.002*Ft())*h.k),w(r,e),E(i)}function L(){var e=t.mouse(this),r=Math.log(h.k)/Math.LN2;k(this,e,x(e),t.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}return Bt||(Bt="onwheel"in i?(Ft=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in i?(Ft=function(){return t.event.wheelDelta},"mousewheel"):(Ft=function(){return-t.event.detail},"MozMousePixelScroll")),b.event=function(e){e.each(function(){var e=y.of(this,arguments),n=h;cs?t.select(this).transition().each("start.zoom",function(){h=this.__chart__||{x:0,y:0,k:1},M(e)}).tween("zoom:zoom",function(){var i=d[0],o=d[1],a=r?r[0]:i/2,s=r?r[1]:o/2,l=t.interpolateZoom([(a-h.x)/h.k,(s-h.y)/h.k,i/h.k],[(a-n.x)/n.k,(s-n.y)/n.k,i/n.k]);return function(t){var r=l(t),n=i/r[2];this.__chart__=h={x:a-r[0]*n,y:s-r[1]*n,k:n},E(e)}}).each("interrupt.zoom",function(){O(e)}).each("end.zoom",function(){O(e)}):(this.__chart__=h,M(e),E(e),O(e))})},b.translate=function(t){return arguments.length?(h={x:+t[0],y:+t[1],k:h.k},T(),b):[h.x,h.y]},b.scale=function(t){return arguments.length?(h={x:h.x,y:h.y,k:null},_(+t),T(),b):h.k},b.scaleExtent=function(t){return arguments.length?(A=null==t?jt:[+t[0],+t[1]],b):A},b.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],b):n},b.size=function(t){return arguments.length?(d=t&&[+t[0],+t[1]],b):d},b.duration=function(t){return arguments.length?(f=+t,b):f},b.x=function(t){return arguments.length?(g=t,l=t.copy(),h={x:0,y:0,k:1},b):g},b.y=function(t){return arguments.length?(u=t,c=t.copy(),h={x:0,y:0,k:1},b):u},t.rebind(b,y,"on")};var Ft,Bt,jt=[0,1/0];function Vt(){}function Gt(t,e,r){return this instanceof Gt?(this.h=+t,this.s=+e,void(this.l=+r)):arguments.length<2?t instanceof Gt?new Gt(t.h,t.s,t.l):ce(""+t,ue,Gt):new Gt(t,e,r)}t.color=Vt,Vt.prototype.toString=function(){return this.rgb()+""},t.hsl=Gt;var Ut=Gt.prototype=new Vt;function Zt(t,e,r){var n,i;function o(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?n+(i-n)*t/60:t<180?i:t<240?n+(i-n)*(240-t)/60:n}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,n=2*(r=r<0?0:r>1?1:r)-(i=r<=.5?r*(1+e):r+e-r*e),new oe(o(t+120),o(t),o(t-120))}function Ht(e,r,n){return this instanceof Ht?(this.h=+e,this.c=+r,void(this.l=+n)):arguments.length<2?e instanceof Ht?new Ht(e.h,e.c,e.l):ee(e instanceof Xt?e.l:(e=he((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Ht(e,r,n)}Ut.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Gt(this.h,this.s,this.l/t)},Ut.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Gt(this.h,this.s,t*this.l)},Ut.rgb=function(){return Zt(this.h,this.s,this.l)},t.hcl=Ht;var Wt=Ht.prototype=new Vt;function Yt(t,e,r){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Xt(r,Math.cos(t*=Et)*e,Math.sin(t)*e)}function Xt(t,e,r){return this instanceof Xt?(this.l=+t,this.a=+e,void(this.b=+r)):arguments.length<2?t instanceof Xt?new Xt(t.l,t.a,t.b):t instanceof Ht?Yt(t.h,t.c,t.l):he((t=oe(t)).r,t.g,t.b):new Xt(t,e,r)}Wt.brighter=function(t){return new Ht(this.h,this.c,Math.min(100,this.l+qt*(arguments.length?t:1)))},Wt.darker=function(t){return new Ht(this.h,this.c,Math.max(0,this.l-qt*(arguments.length?t:1)))},Wt.rgb=function(){return Yt(this.h,this.c,this.l).rgb()},t.lab=Xt;var qt=18,Qt=.95047,Kt=1,Jt=1.08883,$t=Xt.prototype=new Vt;function te(t,e,r){var n=(t+16)/116,i=n+e/500,o=n-r/200;return new oe(ie(3.2404542*(i=re(i)*Qt)-1.5371385*(n=re(n)*Kt)-.4985314*(o=re(o)*Jt)),ie(-.969266*i+1.8760108*n+.041556*o),ie(.0556434*i-.2040259*n+1.0572252*o))}function ee(t,e,r){return t>0?new Ht(Math.atan2(r,e)*Ot,Math.sqrt(e*e+r*r),t):new Ht(NaN,NaN,t)}function re(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ne(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ie(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function oe(t,e,r){return this instanceof oe?(this.r=~~t,this.g=~~e,void(this.b=~~r)):arguments.length<2?t instanceof oe?new oe(t.r,t.g,t.b):ce(""+t,oe,Zt):new oe(t,e,r)}function ae(t){return new oe(t>>16,t>>8&255,255&t)}function se(t){return ae(t)+""}$t.brighter=function(t){return new Xt(Math.min(100,this.l+qt*(arguments.length?t:1)),this.a,this.b)},$t.darker=function(t){return new Xt(Math.max(0,this.l-qt*(arguments.length?t:1)),this.a,this.b)},$t.rgb=function(){return te(this.l,this.a,this.b)},t.rgb=oe;var le=oe.prototype=new Vt;function ge(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ce(t,e,r){var n,i,o,a=0,s=0,l=0;if(n=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=n[2].split(","),n[1]){case"hsl":return r(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(Ae(i[0]),Ae(i[1]),Ae(i[2]))}return(o=fe.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,s=240&o,s|=s>>4,l=15&o,l|=l<<4):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),e(a,s,l))}function ue(t,e,r){var n,i,o=Math.min(t/=255,e/=255,r/=255),a=Math.max(t,e,r),s=a-o,l=(a+o)/2;return s?(i=l<.5?s/(a+o):s/(2-a-o),n=t==a?(e-r)/s+(e<r?6:0):e==a?(r-t)/s+2:(t-e)/s+4,n*=60):(n=NaN,i=l>0&&l<1?0:n),new Gt(n,i,l)}function he(t,e,r){var n=ne((.4124564*(t=de(t))+.3575761*(e=de(e))+.1804375*(r=de(r)))/Qt),i=ne((.2126729*t+.7151522*e+.072175*r)/Kt);return Xt(116*i-16,500*(n-i),200*(i-ne((.0193339*t+.119192*e+.9503041*r)/Jt)))}function de(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ae(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}le.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,r=this.g,n=this.b,i=30;return e||r||n?(e&&e<i&&(e=i),r&&r<i&&(r=i),n&&n<i&&(n=i),new oe(Math.min(255,e/t),Math.min(255,r/t),Math.min(255,n/t))):new oe(i,i,i)},le.darker=function(t){return new oe((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},le.hsl=function(){return ue(this.r,this.g,this.b)},le.toString=function(){return"#"+ge(this.r)+ge(this.g)+ge(this.b)};var fe=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function Ce(t){return"function"==typeof t?t:function(){return t}}function pe(t){return function(e,r,n){return 2===arguments.length&&"function"==typeof r&&(n=r,r=null),Ie(e,r,t,n)}}function Ie(e,r,i,o){var a={},s=t.dispatch("beforesend","progress","load","error"),l={},g=new XMLHttpRequest,c=null;function u(){var t,e=g.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(g)||e>=200&&e<300||304===e){try{t=i.call(a,g)}catch(t){return void s.error.call(a,t)}s.load.call(a,t)}else s.error.call(a,g)}return!this.XDomainRequest||"withCredentials"in g||!/^(http(s)?:)?\/\//.test(e)||(g=new XDomainRequest),"onload"in g?g.onload=g.onerror=u:g.onreadystatechange=function(){g.readyState>3&&u()},g.onprogress=function(e){var r=t.event;t.event=e;try{s.progress.call(a,g)}finally{t.event=r}},a.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",a)},a.mimeType=function(t){return arguments.length?(r=null==t?null:t+"",a):r},a.responseType=function(t){return arguments.length?(c=t,a):c},a.response=function(t){return i=t,a},["get","post"].forEach(function(t){a[t]=function(){return a.send.apply(a,[t].concat(n(arguments)))}}),a.send=function(t,n,i){if(2===arguments.length&&"function"==typeof n&&(i=n,n=null),g.open(t,e,!0),null==r||"accept"in l||(l.accept=r+",*/*"),g.setRequestHeader)for(var o in l)g.setRequestHeader(o,l[o]);return null!=r&&g.overrideMimeType&&g.overrideMimeType(r),null!=c&&(g.responseType=c),null!=i&&a.on("error",i).on("load",function(t){i(null,t)}),s.beforesend.call(a,g),g.send(null==n?null:n),a},a.abort=function(){return g.abort(),a},t.rebind(a,s,"on"),null==o?a:a.get(function(t){return 1===t.length?function(e,r){t(null==e?r:null)}:t}(o))}fe.forEach(function(t,e){fe.set(t,ae(e))}),t.functor=Ce,t.xhr=pe(S),t.dsv=function(t,e){var r=new RegExp('["'+t+"\n]"),n=t.charCodeAt(0);function i(t,r,n){arguments.length<3&&(n=r,r=null);var i=Ie(t,e,null==r?o:a(r),n);return i.row=function(t){return arguments.length?i.response(null==(r=t)?o:a(t)):r},i}function o(t){return i.parse(t.responseText)}function a(t){return function(e){return i.parse(e.responseText,t)}}function s(e){return e.map(l).join(t)}function l(t){return r.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i.parse=function(t,e){var r;return i.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,r){return e(i(t),r)}:i})},i.parseRows=function(t,e){var r,i,o={},a={},s=[],l=t.length,g=0,c=0;function u(){if(g>=l)return a;if(i)return i=!1,o;var e=g;if(34===t.charCodeAt(e)){for(var r=e;r++<l;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;++r}return g=r+2,13===(s=t.charCodeAt(r+1))?(i=!0,10===t.charCodeAt(r+2)&&++g):10===s&&(i=!0),t.slice(e+1,r).replace(/""/g,'"')}for(;g<l;){var s,c=1;if(10===(s=t.charCodeAt(g++)))i=!0;else if(13===s)i=!0,10===t.charCodeAt(g)&&(++g,++c);else if(s!==n)continue;return t.slice(e,g-c)}return t.slice(e)}for(;(r=u())!==a;){for(var h=[];r!==o&&r!==a;)h.push(r),r=u();e&&null==(h=e(h,c++))||s.push(h)}return s},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var r=new O,n=[];return e.forEach(function(t){for(var e in t)r.has(e)||n.push(r.add(e))}),[n.map(l).join(t)].concat(e.map(function(e){return n.map(function(t){return l(e[t])}).join(t)})).join("\n")},i.formatRows=function(t){return t.map(s).join("\n")},i},t.csv=t.dsv(",","text/csv"),t.tsv=t.dsv("\t","text/tab-separated-values");var ve,me,ye,be,xe=this[D(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function _e(t,e,r){var n=arguments.length;n<2&&(e=0),n<3&&(r=Date.now());var i={c:t,t:r+e,n:null};return me?me.n=i:ve=i,me=i,ye||(be=clearTimeout(be),ye=1,xe(we)),i}function we(){var t=ke(),e=Te()-t;e>24?(isFinite(e)&&(clearTimeout(be),be=setTimeout(we,e)),ye=0):(ye=1,xe(we))}function ke(){for(var t=Date.now(),e=ve;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Te(){for(var t,e=ve,r=1/0;e;)e.c?(e.t<r&&(r=e.t),e=(t=e).n):e=t?t.n=e.n:ve=e.n;return me=t,r}function Me(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}t.timer=function(){_e.apply(this,arguments)},t.timer.flush=function(){ke(),Te()},t.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Ee=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var r=Math.pow(10,3*I(8-e));return{scale:e>8?function(t){return t/r}:function(t){return t*r},symbol:t}});t.formatPrefix=function(e,r){var n=0;return(e=+e)&&(e<0&&(e*=-1),r&&(e=t.round(e,Me(e,r))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Ee[8+n/3]};var Oe=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Se=t.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(e,r){return(e=t.round(e,Me(e,r))).toFixed(Math.max(0,Math.min(20,Me(e*(1+1e-15),r))))}});function Re(t){return t+""}var De=t.time={},Le=Date;function Pe(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Pe.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ne.setUTCDate.apply(this._,arguments)},setDay:function(){Ne.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ne.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ne.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ne.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ne.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ne.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ne.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ne.setTime.apply(this._,arguments)}};var Ne=Date.prototype;function ze(t,e,r){function n(e){var r=t(e),n=o(r,1);return e-r<n-e?r:n}function i(r){return e(r=t(new Le(r-1)),1),r}function o(t,r){return e(t=new Le(+t),r),t}function a(t,n,o){var a=i(t),s=[];if(o>1)for(;a<n;)r(a)%o||s.push(new Date(+a)),e(a,1);else for(;a<n;)s.push(new Date(+a)),e(a,1);return s}t.floor=t,t.round=n,t.ceil=i,t.offset=o,t.range=a;var s=t.utc=Fe(t);return s.floor=s,s.round=Fe(n),s.ceil=Fe(i),s.offset=Fe(o),s.range=function(t,e,r){try{Le=Pe;var n=new Pe;return n._=t,a(n,e,r)}finally{Le=Date}},t}function Fe(t){return function(e,r){try{Le=Pe;var n=new Pe;return n._=e,t(n,r)._}finally{Le=Date}}}De.year=ze(function(t){return(t=De.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),De.years=De.year.range,De.years.utc=De.year.utc.range,De.day=ze(function(t){var e=new Le(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),De.days=De.day.range,De.days.utc=De.day.utc.range,De.dayOfYear=function(t){var e=De.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var r=De[t]=ze(function(t){return(t=De.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var r=De.year(t).getDay();return Math.floor((De.dayOfYear(t)+(r+e)%7)/7)-(r!==e)});De[t+"s"]=r.range,De[t+"s"].utc=r.utc.range,De[t+"OfYear"]=function(t){var r=De.year(t).getDay();return Math.floor((De.dayOfYear(t)+(r+e)%7)/7)}}),De.week=De.sunday,De.weeks=De.sunday.range,De.weeks.utc=De.sunday.utc.range,De.weekOfYear=De.sundayOfYear;var Be={"-":"",_:" ",0:"0"},je=/^\s*\d+/,Ve=/^%/;function Ge(t,e,r){var n=t<0?"-":"",i=(n?-t:t)+"",o=i.length;return n+(o<r?new Array(r-o+1).join(e)+i:i)}function Ue(e){return new RegExp("^(?:"+e.map(t.requote).join("|")+")","i")}function Ze(t){for(var e=new m,r=-1,n=t.length;++r<n;)e.set(t[r].toLowerCase(),r);return e}function He(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function We(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r));return n?(t.U=+n[0],r+n[0].length):-1}function Ye(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r));return n?(t.W=+n[0],r+n[0].length):-1}function Xe(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function qe(t,e,r){je.lastIndex=0;var n,i=je.exec(e.slice(r,r+2));return i?(t.y=(n=+i[0])+(n>68?1900:2e3),r+i[0].length):-1}function Qe(t,e,r){return/^[+-]\d{4}$/.test(e=e.slice(r,r+5))?(t.Z=-e,r+5):-1}function Ke(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function Je(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function $e(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+3));return n?(t.j=+n[0],r+n[0].length):-1}function tr(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function er(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function rr(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function nr(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function ir(t){var e=t.getTimezoneOffset(),r=e>0?"-":"+",n=I(e)/60|0,i=I(e)%60;return r+Ge(n,"0",2)+Ge(i,"0",2)}function or(t,e,r){Ve.lastIndex=0;var n=Ve.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function ar(t){for(var e=t.length,r=-1;++r<e;)t[r][0]=this(t[r][0]);return function(e){for(var r=0,n=t[r];!n[1](e);)n=t[++r];return n[0](e)}}t.locale=function(e){return{numberFormat:function(e){var r=e.decimal,n=e.thousands,i=e.grouping,o=e.currency,a=i&&n?function(t,e){for(var r=t.length,o=[],a=0,s=i[0],l=0;r>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),o.push(t.substring(r-=s,r+s)),!((l+=s+1)>e));)s=i[a=(a+1)%i.length];return o.reverse().join(n)}:S;return function(e){var n=Oe.exec(e),i=n[1]||" ",s=n[2]||">",l=n[3]||"-",g=n[4]||"",c=n[5],u=+n[6],h=n[7],d=n[8],A=n[9],f=1,C="",p="",I=!1,v=!0;switch(d&&(d=+d.substring(1)),(c||"0"===i&&"="===s)&&(c=i="0",s="="),A){case"n":h=!0,A="g";break;case"%":f=100,p="%",A="f";break;case"p":f=100,p="%",A="r";break;case"b":case"o":case"x":case"X":"#"===g&&(C="0"+A.toLowerCase());case"c":v=!1;case"d":I=!0,d=0;break;case"s":f=-1,A="r"}"$"===g&&(C=o[0],p=o[1]),"r"!=A||d||(A="g"),null!=d&&("g"==A?d=Math.max(1,Math.min(21,d)):"e"!=A&&"f"!=A||(d=Math.max(0,Math.min(20,d)))),A=Se.get(A)||Re;var m=c&&h;return function(e){var n=p;if(I&&e%1)return"";var o=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===l?"":l;if(f<0){var g=t.formatPrefix(e,d);e=g.scale(e),n=g.symbol+p}else e*=f;var y,b,x=(e=A(e,d)).lastIndexOf(".");if(x<0){var _=v?e.lastIndexOf("e"):-1;_<0?(y=e,b=""):(y=e.substring(0,_),b=e.substring(_))}else y=e.substring(0,x),b=r+e.substring(x+1);!c&&h&&(y=a(y,1/0));var w=C.length+y.length+b.length+(m?0:o.length),k=w<u?new Array(w=u-w+1).join(i):"";return m&&(y=a(k+y,k.length?u-b.length:1/0)),o+=C,e=y+b,("<"===s?o+e+k:">"===s?k+o+e:"^"===s?k.substring(0,w>>=1)+o+e+k.substring(w):o+(m?e:k+e))+n}}}(e),timeFormat:function(e){var r=e.dateTime,n=e.date,i=e.time,o=e.periods,a=e.days,s=e.shortDays,l=e.months,g=e.shortMonths;function c(t){var e=t.length;function r(r){for(var n,i,o,a=[],s=-1,l=0;++s<e;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=Be[n=t.charAt(++s)])&&(n=t.charAt(++s)),(o=y[n])&&(n=o(r,null==i?"e"===n?" ":"0":i)),a.push(n),l=s+1);return a.push(t.slice(l,s)),a.join("")}return r.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(u(r,t,e,0)!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var n=null!=r.Z&&Le!==Pe,i=new(n?Pe:Le);return"j"in r?i.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),i.setFullYear(r.y,0,1),i.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(i.getDay()+5)%7:r.w+7*r.U-(i.getDay()+6)%7)):i.setFullYear(r.y,r.m,r.d),i.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),n?i._:i},r.toString=function(){return t},r}function u(t,e,r,n){for(var i,o,a,s=0,l=e.length,g=r.length;s<l;){if(n>=g)return-1;if(37===(i=e.charCodeAt(s++))){if(a=e.charAt(s++),!(o=b[a in Be?e.charAt(s++):a])||(n=o(t,r,n))<0)return-1}else if(i!=r.charCodeAt(n++))return-1}return n}c.utc=function(t){var e=c(t);function r(t){try{var r=new(Le=Pe);return r._=t,e(r)}finally{Le=Date}}return r.parse=function(t){try{Le=Pe;var r=e.parse(t);return r&&r._}finally{Le=Date}},r.toString=e.toString,r},c.multi=c.utc.multi=ar;var h=t.map(),d=Ue(a),A=Ze(a),f=Ue(s),C=Ze(s),p=Ue(l),I=Ze(l),v=Ue(g),m=Ze(g);o.forEach(function(t,e){h.set(t.toLowerCase(),e)});var y={a:function(t){return s[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return g[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:c(r),d:function(t,e){return Ge(t.getDate(),e,2)},e:function(t,e){return Ge(t.getDate(),e,2)},H:function(t,e){return Ge(t.getHours(),e,2)},I:function(t,e){return Ge(t.getHours()%12||12,e,2)},j:function(t,e){return Ge(1+De.dayOfYear(t),e,3)},L:function(t,e){return Ge(t.getMilliseconds(),e,3)},m:function(t,e){return Ge(t.getMonth()+1,e,2)},M:function(t,e){return Ge(t.getMinutes(),e,2)},p:function(t){return o[+(t.getHours()>=12)]},S:function(t,e){return Ge(t.getSeconds(),e,2)},U:function(t,e){return Ge(De.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Ge(De.mondayOfYear(t),e,2)},x:c(n),X:c(i),y:function(t,e){return Ge(t.getFullYear()%100,e,2)},Y:function(t,e){return Ge(t.getFullYear()%1e4,e,4)},Z:ir,"%":function(){return"%"}},b={a:function(t,e,r){f.lastIndex=0;var n=f.exec(e.slice(r));return n?(t.w=C.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(t,e,r){d.lastIndex=0;var n=d.exec(e.slice(r));return n?(t.w=A.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(t,e,r){v.lastIndex=0;var n=v.exec(e.slice(r));return n?(t.m=m.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(t,e,r){p.lastIndex=0;var n=p.exec(e.slice(r));return n?(t.m=I.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(t,e,r){return u(t,y.c.toString(),e,r)},d:Je,e:Je,H:tr,I:tr,j:$e,L:nr,m:Ke,M:er,p:function(t,e,r){var n=h.get(e.slice(r,r+=2).toLowerCase());return null==n?-1:(t.p=n,r)},S:rr,U:We,w:He,W:Ye,x:function(t,e,r){return u(t,y.x.toString(),e,r)},X:function(t,e,r){return u(t,y.X.toString(),e,r)},y:qe,Y:Xe,Z:Qe,"%":or};return c}(e)}};var sr=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lr(){}t.format=sr.numberFormat,t.geo={},lr.prototype={s:0,t:0,add:function(t){cr(t,this.t,gr),cr(gr.s,this.s,this),this.s?this.t+=gr.t:this.s=gr.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var gr=new lr;function cr(t,e,r){var n=r.s=t+e,i=n-t,o=n-i;r.t=t-o+(e-i)}function ur(t,e){t&&dr.hasOwnProperty(t.type)&&dr[t.type](t,e)}t.geo.stream=function(t,e){t&&hr.hasOwnProperty(t.type)?hr[t.type](t,e):ur(t,e)};var hr={Feature:function(t,e){ur(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=-1,i=r.length;++n<i;)ur(r[n].geometry,e)}},dr={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)t=r[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ar(t.coordinates,e,0)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)Ar(r[n],e,0)},Polygon:function(t,e){fr(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,i=r.length;++n<i;)fr(r[n],e)},GeometryCollection:function(t,e){for(var r=t.geometries,n=-1,i=r.length;++n<i;)ur(r[n],e)}};function Ar(t,e,r){var n,i=-1,o=t.length-r;for(e.lineStart();++i<o;)n=t[i],e.point(n[0],n[1],n[2]);e.lineEnd()}function fr(t,e){var r=-1,n=t.length;for(e.polygonStart();++r<n;)Ar(t[r],e,1);e.polygonEnd()}t.geo.area=function(e){return Cr=0,t.geo.stream(e,Er),Cr};var Cr,pr,Ir,vr,mr,yr,br,xr,_r,wr,kr,Tr,Mr=new lr,Er={sphere:function(){Cr+=4*wt},point:P,lineStart:P,lineEnd:P,polygonStart:function(){Mr.reset(),Er.lineStart=Or},polygonEnd:function(){var t=2*Mr;Cr+=t<0?4*wt+t:t,Er.lineStart=Er.lineEnd=Er.point=P}};function Or(){var t,e,r,n,i;function o(t,e){e=e*Et/2+wt/4;var o=(t*=Et)-r,a=o>=0?1:-1,s=a*o,l=Math.cos(e),g=Math.sin(e),c=i*g,u=n*l+c*Math.cos(s),h=c*a*Math.sin(s);Mr.add(Math.atan2(h,u)),r=t,n=l,i=g}Er.point=function(a,s){Er.point=o,r=(t=a)*Et,n=Math.cos(s=(e=s)*Et/2+wt/4),i=Math.sin(s)},Er.lineEnd=function(){o(t,e)}}function Sr(t){var e=t[0],r=t[1],n=Math.cos(r);return[n*Math.cos(e),n*Math.sin(e),Math.sin(r)]}function Rr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Dr(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Lr(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Pr(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Nr(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function zr(t){return[Math.atan2(t[1],t[0]),Lt(t[2])]}function Fr(t,e){return I(t[0]-e[0])<xt&&I(t[1]-e[1])<xt}t.geo.bounds=function(){var e,r,n,i,o,a,s,l,g,c,u,h={point:d,lineStart:f,lineEnd:C,polygonStart:function(){h.point=p,h.lineStart=v,h.lineEnd=m,g=0,Er.polygonStart()},polygonEnd:function(){Er.polygonEnd(),h.point=d,h.lineStart=f,h.lineEnd=C,Mr<0?(e=-(n=180),r=-(i=90)):g>xt?i=90:g<-xt&&(r=-90),u[0]=e,u[1]=n}};function d(t,o){c.push(u=[e=t,n=t]),o<r&&(r=o),o>i&&(i=o)}function A(t,a){var s=Sr([t*Et,a*Et]);if(l){var g=Dr(l,s),c=Dr([g[1],-g[0],0],g);Nr(c),c=zr(c);var u=t-o,h=u>0?1:-1,A=c[0]*Ot*h,f=I(u)>180;if(f^(h*o<A&&A<h*t))(C=c[1]*Ot)>i&&(i=C);else if(f^(h*o<(A=(A+360)%360-180)&&A<h*t)){var C;(C=-c[1]*Ot)<r&&(r=C)}else a<r&&(r=a),a>i&&(i=a);f?t<o?y(e,t)>y(e,n)&&(n=t):y(t,n)>y(e,n)&&(e=t):n>=e?(t<e&&(e=t),t>n&&(n=t)):t>o?y(e,t)>y(e,n)&&(n=t):y(t,n)>y(e,n)&&(e=t)}else d(t,a);l=s,o=t}function f(){h.point=A}function C(){u[0]=e,u[1]=n,h.point=d,l=null}function p(t,e){if(l){var r=t-o;g+=I(r)>180?r+(r>0?360:-360):r}else a=t,s=e;Er.point(t,e),A(t,e)}function v(){Er.lineStart()}function m(){p(a,s),Er.lineEnd(),I(g)>xt&&(e=-(n=180)),u[0]=e,u[1]=n,l=null}function y(t,e){return(e-=t)<0?e+360:e}function b(t,e){return t[0]-e[0]}function x(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(o){if(i=n=-(e=r=1/0),c=[],t.geo.stream(o,h),g=c.length){c.sort(b);for(var a=1,s=[f=c[0]];a<g;++a)x((d=c[a])[0],f)||x(d[1],f)?(y(f[0],d[1])>y(f[0],f[1])&&(f[1]=d[1]),y(d[0],f[1])>y(f[0],f[1])&&(f[0]=d[0])):s.push(f=d);for(var l,g,d,A=-1/0,f=(a=0,s[g=s.length-1]);a<=g;f=d,++a)d=s[a],(l=y(f[1],d[0]))>A&&(A=l,e=d[0],n=f[1])}return c=u=null,e===1/0||r===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,r],[n,i]]}}(),t.geo.centroid=function(e){pr=Ir=vr=mr=yr=br=xr=_r=wr=kr=Tr=0,t.geo.stream(e,Br);var r=wr,n=kr,i=Tr,o=r*r+n*n+i*i;return o<_t&&(r=br,n=xr,i=_r,Ir<xt&&(r=vr,n=mr,i=yr),(o=r*r+n*n+i*i)<_t)?[NaN,NaN]:[Math.atan2(n,r)*Ot,Lt(i/Math.sqrt(o))*Ot]};var Br={sphere:P,point:jr,lineStart:Gr,lineEnd:Ur,polygonStart:function(){Br.lineStart=Zr},polygonEnd:function(){Br.lineStart=Gr}};function jr(t,e){t*=Et;var r=Math.cos(e*=Et);Vr(r*Math.cos(t),r*Math.sin(t),Math.sin(e))}function Vr(t,e,r){vr+=(t-vr)/++pr,mr+=(e-mr)/pr,yr+=(r-yr)/pr}function Gr(){var t,e,r;function n(n,i){n*=Et;var o=Math.cos(i*=Et),a=o*Math.cos(n),s=o*Math.sin(n),l=Math.sin(i),g=Math.atan2(Math.sqrt((g=e*l-r*s)*g+(g=r*a-t*l)*g+(g=t*s-e*a)*g),t*a+e*s+r*l);Ir+=g,br+=g*(t+(t=a)),xr+=g*(e+(e=s)),_r+=g*(r+(r=l)),Vr(t,e,r)}Br.point=function(i,o){i*=Et;var a=Math.cos(o*=Et);t=a*Math.cos(i),e=a*Math.sin(i),r=Math.sin(o),Br.point=n,Vr(t,e,r)}}function Ur(){Br.point=jr}function Zr(){var t,e,r,n,i;function o(t,e){t*=Et;var o=Math.cos(e*=Et),a=o*Math.cos(t),s=o*Math.sin(t),l=Math.sin(e),g=n*l-i*s,c=i*a-r*l,u=r*s-n*a,h=Math.sqrt(g*g+c*c+u*u),d=r*a+n*s+i*l,A=h&&-Dt(d)/h,f=Math.atan2(h,d);wr+=A*g,kr+=A*c,Tr+=A*u,Ir+=f,br+=f*(r+(r=a)),xr+=f*(n+(n=s)),_r+=f*(i+(i=l)),Vr(r,n,i)}Br.point=function(a,s){t=a,e=s,Br.point=o,a*=Et;var l=Math.cos(s*=Et);r=l*Math.cos(a),n=l*Math.sin(a),i=Math.sin(s),Vr(r,n,i)},Br.lineEnd=function(){o(t,e),Br.lineEnd=Ur,Br.point=jr}}function Hr(t,e){function r(r,n){return r=t(r,n),e(r[0],r[1])}return t.invert&&e.invert&&(r.invert=function(r,n){return(r=e.invert(r,n))&&t.invert(r[0],r[1])}),r}function Wr(){return!0}function Yr(t,e,r,n,i){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,r=t[0],n=t[e];if(Fr(r,n)){i.lineStart();for(var s=0;s<e;++s)i.point((r=t[s])[0],r[1]);i.lineEnd()}else{var l=new qr(r,t,null,!0),g=new qr(r,null,l,!1);l.o=g,o.push(l),a.push(g),g=new qr(n,null,l=new qr(n,t,null,!1),!0),l.o=g,o.push(l),a.push(g)}}}),a.sort(e),Xr(o),Xr(a),o.length){for(var s=0,l=r,g=a.length;s<g;++s)a[s].e=l=!l;for(var c,u,h=o[0];;){for(var d=h,A=!0;d.v;)if((d=d.n)===h)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(A)for(s=0,g=c.length;s<g;++s)i.point((u=c[s])[0],u[1]);else n(d.x,d.n.x,1,i);d=d.n}else{if(A)for(s=(c=d.p.z).length-1;s>=0;--s)i.point((u=c[s])[0],u[1]);else n(d.x,d.p.x,-1,i);d=d.p}c=(d=d.o).z,A=!A}while(!d.v);i.lineEnd()}}}function Xr(t){if(e=t.length){for(var e,r,n=0,i=t[0];++n<e;)i.n=r=t[n],r.p=i,i=r;i.n=r=t[0],r.p=i}}function qr(t,e,r,n){this.x=t,this.z=e,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function Qr(e,r,n,i){return function(o,a){var s,l=r(a),g=o.invert(i[0],i[1]),c={point:u,lineStart:d,lineEnd:A,polygonStart:function(){c.point=m,c.lineStart=y,c.lineEnd=b,s=[],f=[]},polygonEnd:function(){c.point=u,c.lineStart=d,c.lineEnd=A,s=t.merge(s);var e=function(t,e){var r=t[0],n=t[1],i=[Math.sin(r),-Math.cos(r),0],o=0,a=0;Mr.reset();for(var s=0,l=e.length;s<l;++s){var g=e[s],c=g.length;if(c)for(var u=g[0],h=u[0],d=u[1]/2+wt/4,A=Math.sin(d),f=Math.cos(d),C=1;;){C===c&&(C=0);var p=(t=g[C])[0],I=t[1]/2+wt/4,v=Math.sin(I),m=Math.cos(I),y=p-h,b=y>=0?1:-1,x=b*y,_=x>wt,w=A*v;if(Mr.add(Math.atan2(w*b*Math.sin(x),f*m+w*Math.cos(x))),o+=_?y+b*kt:y,_^h>=r^p>=r){var k=Dr(Sr(u),Sr(t));Nr(k);var T=Dr(i,k);Nr(T);var M=(_^y>=0?-1:1)*Lt(T[2]);(n>M||n===M&&(k[0]||k[1]))&&(a+=_^y>=0?1:-1)}if(!C++)break;h=p,A=v,f=m,u=t}}return(o<-xt||o<xt&&Mr<-xt)^1&a}(g,f);s.length?(v||(a.polygonStart(),v=!0),Yr(s,$r,e,n,a)):e&&(v||(a.polygonStart(),v=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),v&&(a.polygonEnd(),v=!1),s=f=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function u(t,r){var n=o(t,r);e(t=n[0],r=n[1])&&a.point(t,r)}function h(t,e){var r=o(t,e);l.point(r[0],r[1])}function d(){c.point=h,l.lineStart()}function A(){c.point=u,l.lineEnd()}var f,C,p=Jr(),I=r(p),v=!1;function m(t,e){C.push([t,e]);var r=o(t,e);I.point(r[0],r[1])}function y(){I.lineStart(),C=[]}function b(){m(C[0][0],C[0][1]),I.lineEnd();var t,e=I.clean(),r=p.buffer(),n=r.length;if(C.pop(),f.push(C),C=null,n)if(1&e){var i,o=-1;if((n=(t=r[0]).length-1)>0){for(v||(a.polygonStart(),v=!0),a.lineStart();++o<n;)a.point((i=t[o])[0],i[1]);a.lineEnd()}}else n>1&&2&e&&r.push(r.pop().concat(r.shift())),s.push(r.filter(Kr))}return c}}function Kr(t){return t.length>1}function Jr(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,r){t.push([e,r])},lineEnd:P,buffer:function(){var r=e;return e=[],t=null,r},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function $r(t,e){return((t=t.x)[0]<0?t[1]-Mt-xt:Mt-t[1])-((e=e.x)[0]<0?e[1]-Mt-xt:Mt-e[1])}var tn=Qr(Wr,function(t){var e,r=NaN,n=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?wt:-wt,l=I(o-r);I(l-wt)<xt?(t.point(r,n=(n+a)/2>0?Mt:-Mt),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(o,n),e=0):i!==s&&l>=wt&&(I(r-i)<xt&&(r-=i*xt),I(o-s)<xt&&(o-=s*xt),n=function(t,e,r,n){var i,o,a=Math.sin(t-r);return I(a)>xt?Math.atan((Math.sin(e)*(o=Math.cos(n))*Math.sin(r)-Math.sin(n)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+n)/2}(r,n,o,a),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(s,n),e=0),t.point(r=o,n=a),i=s},lineEnd:function(){t.lineEnd(),r=n=NaN},clean:function(){return 2-e}}},function(t,e,r,n){var i;if(null==t)i=r*Mt,n.point(-wt,i),n.point(0,i),n.point(wt,i),n.point(wt,0),n.point(wt,-i),n.point(0,-i),n.point(-wt,-i),n.point(-wt,0),n.point(-wt,i);else if(I(t[0]-e[0])>xt){var o=t[0]<e[0]?wt:-wt;i=r*o/2,n.point(-o,i),n.point(0,i),n.point(o,i)}else n.point(e[0],e[1])},[-wt,-wt/2]);function en(t,e,r,n){return function(i){var o,a=i.a,s=i.b,l=a.x,g=a.y,c=0,u=1,h=s.x-l,d=s.y-g;if(o=t-l,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<u&&(u=o)}else if(h>0){if(o>u)return;o>c&&(c=o)}if(o=r-l,h||!(o<0)){if(o/=h,h<0){if(o>u)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<u&&(u=o)}if(o=e-g,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<u&&(u=o)}else if(d>0){if(o>u)return;o>c&&(c=o)}if(o=n-g,d||!(o<0)){if(o/=d,d<0){if(o>u)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<u&&(u=o)}return c>0&&(i.a={x:l+c*h,y:g+c*d}),u<1&&(i.b={x:l+u*h,y:g+u*d}),i}}}}}}var rn=1e9;function nn(e,r,n,i){return function(l){var g,c,u,h,d,A,f,C,p,I,v,m=l,y=Jr(),b=en(e,r,n,i),x={point:k,lineStart:function(){x.point=T,c&&c.push(u=[]);I=!0,p=!1,f=C=NaN},lineEnd:function(){g&&(T(h,d),A&&p&&y.rejoin(),g.push(y.buffer()));x.point=k,p&&l.lineEnd()},polygonStart:function(){l=y,g=[],c=[],v=!0},polygonEnd:function(){l=m,g=t.merge(g);var r=function(t){for(var e=0,r=c.length,n=t[1],i=0;i<r;++i)for(var o,a=1,s=c[i],l=s.length,g=s[0];a<l;++a)o=s[a],g[1]<=n?o[1]>n&&Rt(g,o,t)>0&&++e:o[1]<=n&&Rt(g,o,t)<0&&--e,g=o;return 0!==e}([e,i]),n=v&&r,o=g.length;(n||o)&&(l.polygonStart(),n&&(l.lineStart(),_(null,null,1,l),l.lineEnd()),o&&Yr(g,a,r,_,l),l.polygonEnd()),g=c=u=null}};function _(t,a,l,g){var c=0,u=0;if(null==t||(c=o(t,l))!==(u=o(a,l))||s(t,a)<0^l>0)do{g.point(0===c||3===c?e:n,c>1?i:r)}while((c=(c+l+4)%4)!==u);else g.point(a[0],a[1])}function w(t,o){return e<=t&&t<=n&&r<=o&&o<=i}function k(t,e){w(t,e)&&l.point(t,e)}function T(t,e){var r=w(t=Math.max(-rn,Math.min(rn,t)),e=Math.max(-rn,Math.min(rn,e)));if(c&&u.push([t,e]),I)h=t,d=e,A=r,I=!1,r&&(l.lineStart(),l.point(t,e));else if(r&&p)l.point(t,e);else{var n={a:{x:f,y:C},b:{x:t,y:e}};b(n)?(p||(l.lineStart(),l.point(n.a.x,n.a.y)),l.point(n.b.x,n.b.y),r||l.lineEnd(),v=!1):r&&(l.lineStart(),l.point(t,e),v=!1)}f=t,C=e,p=r}return x};function o(t,i){return I(t[0]-e)<xt?i>0?0:3:I(t[0]-n)<xt?i>0?2:1:I(t[1]-r)<xt?i>0?1:0:i>0?3:2}function a(t,e){return s(t.x,e.x)}function s(t,e){var r=o(t,1),n=o(e,1);return r!==n?r-n:0===r?e[1]-t[1]:1===r?t[0]-e[0]:2===r?t[1]-e[1]:e[0]-t[0]}}function on(t){var e=0,r=wt/3,n=Tn(t),i=n(e,r);return i.parallels=function(t){return arguments.length?n(e=t[0]*wt/180,r=t[1]*wt/180):[e/wt*180,r/wt*180]},i}function an(t,e){var r=Math.sin(t),n=(r+Math.sin(e))/2,i=1+r*(2*n-r),o=Math.sqrt(i)/n;function a(t,e){var r=Math.sqrt(i-2*n*Math.sin(e))/n;return[r*Math.sin(t*=n),o-r*Math.cos(t)]}return a.invert=function(t,e){var r=o-e;return[Math.atan2(t,r)/n,Lt((i-(t*t+r*r)*n*n)/(2*n))]},a}t.geo.clipExtent=function(){var t,e,r,n,i,o,a={stream:function(t){return i&&(i.valid=!1),(i=o(t)).valid=!0,i},extent:function(s){return arguments.length?(o=nn(t=+s[0][0],e=+s[0][1],r=+s[1][0],n=+s[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[r,n]]}};return a.extent([[0,0],[960,500]])},(t.geo.conicEqualArea=function(){return on(an)}).raw=an,t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},t.geo.albersUsa=function(){var e,r,n,i,o=t.geo.albers(),a=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,r){e=[t,r]}};function g(t){var o=t[0],a=t[1];return e=null,r(o,a),e||(n(o,a),e)||i(o,a),e}return g.invert=function(t){var e=o.scale(),r=o.translate(),n=(t[0]-r[0])/e,i=(t[1]-r[1])/e;return(i>=.12&&i<.234&&n>=-.425&&n<-.214?a:i>=.166&&i<.234&&n>=-.214&&n<-.115?s:o).invert(t)},g.stream=function(t){var e=o.stream(t),r=a.stream(t),n=s.stream(t);return{point:function(t,i){e.point(t,i),r.point(t,i),n.point(t,i)},sphere:function(){e.sphere(),r.sphere(),n.sphere()},lineStart:function(){e.lineStart(),r.lineStart(),n.lineStart()},lineEnd:function(){e.lineEnd(),r.lineEnd(),n.lineEnd()},polygonStart:function(){e.polygonStart(),r.polygonStart(),n.polygonStart()},polygonEnd:function(){e.polygonEnd(),r.polygonEnd(),n.polygonEnd()}}},g.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),s.precision(t),g):o.precision()},g.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),s.scale(t),g.translate(o.translate())):o.scale()},g.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),c=+t[0],u=+t[1];return r=o.translate(t).clipExtent([[c-.455*e,u-.238*e],[c+.455*e,u+.238*e]]).stream(l).point,n=a.translate([c-.307*e,u+.201*e]).clipExtent([[c-.425*e+xt,u+.12*e+xt],[c-.214*e-xt,u+.234*e-xt]]).stream(l).point,i=s.translate([c-.205*e,u+.212*e]).clipExtent([[c-.214*e+xt,u+.166*e+xt],[c-.115*e-xt,u+.234*e-xt]]).stream(l).point,g},g.scale(1070)};var sn,ln,gn,cn,un,hn,dn={point:P,lineStart:P,lineEnd:P,polygonStart:function(){ln=0,dn.lineStart=An},polygonEnd:function(){dn.lineStart=dn.lineEnd=dn.point=P,sn+=I(ln/2)}};function An(){var t,e,r,n;function i(t,e){ln+=n*t-r*e,r=t,n=e}dn.point=function(o,a){dn.point=i,t=r=o,e=n=a},dn.lineEnd=function(){i(t,e)}}var fn={point:function(t,e){t<gn&&(gn=t);t>un&&(un=t);e<cn&&(cn=e);e>hn&&(hn=e)},lineStart:P,lineEnd:P,polygonStart:P,polygonEnd:P};function Cn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var pn,In={point:vn,lineStart:mn,lineEnd:yn,polygonStart:function(){In.lineStart=bn},polygonEnd:function(){In.point=vn,In.lineStart=mn,In.lineEnd=yn}};function vn(t,e){vr+=t,mr+=e,++yr}function mn(){var t,e;function r(r,n){var i=r-t,o=n-e,a=Math.sqrt(i*i+o*o);br+=a*(t+r)/2,xr+=a*(e+n)/2,_r+=a,vn(t=r,e=n)}In.point=function(n,i){In.point=r,vn(t=n,e=i)}}function yn(){In.point=vn}function bn(){var t,e,r,n;function i(t,e){var i=t-r,o=e-n,a=Math.sqrt(i*i+o*o);br+=a*(r+t)/2,xr+=a*(n+e)/2,_r+=a,wr+=(a=n*t-r*e)*(r+t),kr+=a*(n+e),Tr+=3*a,vn(r=t,n=e)}In.point=function(o,a){In.point=i,vn(t=r=o,e=n=a)},In.lineEnd=function(){i(t,e)}}function xn(t){var e=.5,r=Math.cos(30*Et),n=16;function i(e){return(n?function(e){var r,i,a,s,l,g,c,u,h,d,A,f,C={point:p,lineStart:I,lineEnd:m,polygonStart:function(){e.polygonStart(),C.lineStart=y},polygonEnd:function(){e.polygonEnd(),C.lineStart=I}};function p(r,n){r=t(r,n),e.point(r[0],r[1])}function I(){u=NaN,C.point=v,e.lineStart()}function v(r,i){var a=Sr([r,i]),s=t(r,i);o(u,h,c,d,A,f,u=s[0],h=s[1],c=r,d=a[0],A=a[1],f=a[2],n,e),e.point(u,h)}function m(){C.point=p,e.lineEnd()}function y(){I(),C.point=b,C.lineEnd=x}function b(t,e){v(r=t,e),i=u,a=h,s=d,l=A,g=f,C.point=v}function x(){o(u,h,c,d,A,f,i,a,r,s,l,g,n,e),C.lineEnd=m,m()}return C}:function(e){return wn(e,function(r,n){r=t(r,n),e.point(r[0],r[1])})})(e)}function o(n,i,a,s,l,g,c,u,h,d,A,f,C,p){var v=c-n,m=u-i,y=v*v+m*m;if(y>4*e&&C--){var b=s+d,x=l+A,_=g+f,w=Math.sqrt(b*b+x*x+_*_),k=Math.asin(_/=w),T=I(I(_)-1)<xt||I(a-h)<xt?(a+h)/2:Math.atan2(x,b),M=t(T,k),E=M[0],O=M[1],S=E-n,R=O-i,D=m*S-v*R;(D*D/y>e||I((v*S+m*R)/y-.5)>.3||s*d+l*A+g*f<r)&&(o(n,i,a,s,l,g,E,O,T,b/=w,x/=w,_,C,p),p.point(E,O),o(E,O,T,b,x,_,c,u,h,d,A,f,C,p))}}return i.precision=function(t){return arguments.length?(n=(e=t*t)>0&&16,i):Math.sqrt(e)},i}function _n(t){this.stream=t}function wn(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function kn(t){return Tn(function(){return t})()}function Tn(e){var r,n,i,o,a,s,l=xn(function(t,e){return[(t=r(t,e))[0]*g+o,a-t[1]*g]}),g=150,c=480,u=250,h=0,d=0,A=0,f=0,C=0,p=tn,v=S,m=null,y=null;function b(t){return[(t=i(t[0]*Et,t[1]*Et))[0]*g+o,a-t[1]*g]}function x(t){return(t=i.invert((t[0]-o)/g,(a-t[1])/g))&&[t[0]*Ot,t[1]*Ot]}function _(){i=Hr(n=Sn(A,f,C),r);var t=r(h,d);return o=c-t[0]*g,a=u+t[1]*g,w()}function w(){return s&&(s.valid=!1,s=null),b}return b.stream=function(t){return s&&(s.valid=!1),(s=Mn(p(n,l(v(t))))).valid=!0,s},b.clipAngle=function(t){return arguments.length?(p=null==t?(m=t,tn):function(t){var e=Math.cos(t),r=e>0,n=I(e)>xt;return Qr(i,function(t){var e,s,l,g,c;return{lineStart:function(){g=l=!1,c=1},point:function(u,h){var d,A=[u,h],f=i(u,h),C=r?f?0:a(u,h):f?a(u+(u<0?wt:-wt),h):0;if(!e&&(g=l=f)&&t.lineStart(),f!==l&&(d=o(e,A),(Fr(e,d)||Fr(A,d))&&(A[0]+=xt,A[1]+=xt,f=i(A[0],A[1]))),f!==l)c=0,f?(t.lineStart(),d=o(A,e),t.point(d[0],d[1])):(d=o(e,A),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(n&&e&&r^f){var p;C&s||!(p=o(A,e,!0))||(c=0,r?(t.lineStart(),t.point(p[0][0],p[0][1]),t.point(p[1][0],p[1][1]),t.lineEnd()):(t.point(p[1][0],p[1][1]),t.lineEnd(),t.lineStart(),t.point(p[0][0],p[0][1])))}!f||e&&Fr(e,A)||t.point(A[0],A[1]),e=A,l=f,s=C},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(g&&l)<<1}}},Pn(t,6*Et),r?[0,-t]:[-wt,t-wt]);function i(t,r){return Math.cos(t)*Math.cos(r)>e}function o(t,r,n){var i=[1,0,0],o=Dr(Sr(t),Sr(r)),a=Rr(o,o),s=o[0],l=a-s*s;if(!l)return!n&&t;var g=e*a/l,c=-e*s/l,u=Dr(i,o),h=Pr(i,g);Lr(h,Pr(o,c));var d=u,A=Rr(h,d),f=Rr(d,d),C=A*A-f*(Rr(h,h)-1);if(!(C<0)){var p=Math.sqrt(C),v=Pr(d,(-A-p)/f);if(Lr(v,h),v=zr(v),!n)return v;var m,y=t[0],b=r[0],x=t[1],_=r[1];b<y&&(m=y,y=b,b=m);var w=b-y,k=I(w-wt)<xt;if(!k&&_<x&&(m=x,x=_,_=m),k||w<xt?k?x+_>0^v[1]<(I(v[0]-y)<xt?x:_):x<=v[1]&&v[1]<=_:w>wt^(y<=v[0]&&v[0]<=b)){var T=Pr(d,(-A+p)/f);return Lr(T,h),[v,zr(T)]}}}function a(e,n){var i=r?t:wt-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}}((m=+t)*Et),w()):m},b.clipExtent=function(t){return arguments.length?(y=t,v=t?nn(t[0][0],t[0][1],t[1][0],t[1][1]):S,w()):y},b.scale=function(t){return arguments.length?(g=+t,_()):g},b.translate=function(t){return arguments.length?(c=+t[0],u=+t[1],_()):[c,u]},b.center=function(t){return arguments.length?(h=t[0]%360*Et,d=t[1]%360*Et,_()):[h*Ot,d*Ot]},b.rotate=function(t){return arguments.length?(A=t[0]%360*Et,f=t[1]%360*Et,C=t.length>2?t[2]%360*Et:0,_()):[A*Ot,f*Ot,C*Ot]},t.rebind(b,l,"precision"),function(){return r=e.apply(this,arguments),b.invert=r.invert&&x,_()}}function Mn(t){return wn(t,function(e,r){t.point(e*Et,r*Et)})}function En(t,e){return[t,e]}function On(t,e){return[t>wt?t-kt:t<-wt?t+kt:t,e]}function Sn(t,e,r){return t?e||r?Hr(Dn(t),Ln(e,r)):Dn(t):e||r?Ln(e,r):On}function Rn(t){return function(e,r){return[(e+=t)>wt?e-kt:e<-wt?e+kt:e,r]}}function Dn(t){var e=Rn(t);return e.invert=Rn(-t),e}function Ln(t,e){var r=Math.cos(t),n=Math.sin(t),i=Math.cos(e),o=Math.sin(e);function a(t,e){var a=Math.cos(e),s=Math.cos(t)*a,l=Math.sin(t)*a,g=Math.sin(e),c=g*r+s*n;return[Math.atan2(l*i-c*o,s*r-g*n),Lt(c*i+l*o)]}return a.invert=function(t,e){var a=Math.cos(e),s=Math.cos(t)*a,l=Math.sin(t)*a,g=Math.sin(e),c=g*i-l*o;return[Math.atan2(l*i+g*o,s*r+c*n),Lt(c*r-s*n)]},a}function Pn(t,e){var r=Math.cos(t),n=Math.sin(t);return function(i,o,a,s){var l=a*e;null!=i?(i=Nn(r,i),o=Nn(r,o),(a>0?i<o:i>o)&&(i+=a*kt)):(i=t+a*kt,o=t-.5*l);for(var g,c=i;a>0?c>o:c<o;c-=l)s.point((g=zr([r,-n*Math.cos(c),-n*Math.sin(c)]))[0],g[1])}}function Nn(t,e){var r=Sr(e);r[0]-=t,Nr(r);var n=Dt(-r[1]);return((-r[2]<0?-n:n)+2*Math.PI-xt)%(2*Math.PI)}function zn(e,r,n){var i=t.range(e,r-xt,n).concat(r);return function(t){return i.map(function(e){return[t,e]})}}function Fn(e,r,n){var i=t.range(e,r-xt,n).concat(r);return function(t){return i.map(function(e){return[e,t]})}}function Bn(t){return t.source}function jn(t){return t.target}t.geo.path=function(){var e,r,n,i,o,a=4.5;function s(e){return e&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=n(i)),t.geo.stream(e,o)),i.result()}function l(){return o=null,s}return s.area=function(e){return sn=0,t.geo.stream(e,n(dn)),sn},s.centroid=function(e){return vr=mr=yr=br=xr=_r=wr=kr=Tr=0,t.geo.stream(e,n(In)),Tr?[wr/Tr,kr/Tr]:_r?[br/_r,xr/_r]:yr?[vr/yr,mr/yr]:[NaN,NaN]},s.bounds=function(e){return un=hn=-(gn=cn=1/0),t.geo.stream(e,n(fn)),[[gn,cn],[un,hn]]},s.projection=function(t){return arguments.length?(n=(e=t)?t.stream||(r=t,i=xn(function(t,e){return r([t*Ot,e*Ot])}),function(t){return Mn(i(t))}):S,l()):e;var r,i},s.context=function(t){return arguments.length?(i=null==(r=t)?new function(){var t=Cn(4.5),e=[],r={point:n,lineStart:function(){r.point=i},lineEnd:a,polygonStart:function(){r.lineEnd=s},polygonEnd:function(){r.lineEnd=a,r.point=n},pointRadius:function(e){return t=Cn(e),r},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function n(r,n){e.push("M",r,",",n,t)}function i(t,n){e.push("M",t,",",n),r.point=o}function o(t,r){e.push("L",t,",",r)}function a(){r.point=n}function s(){e.push("Z")}return r}:new function(t){var e=4.5,r={point:n,lineStart:function(){r.point=i},lineEnd:a,polygonStart:function(){r.lineEnd=s},polygonEnd:function(){r.lineEnd=a,r.point=n},pointRadius:function(t){return e=t,r},result:P};function n(r,n){t.moveTo(r+e,n),t.arc(r,n,e,0,kt)}function i(e,n){t.moveTo(e,n),r.point=o}function o(e,r){t.lineTo(e,r)}function a(){r.point=n}function s(){t.closePath()}return r}(t),"function"!=typeof a&&i.pointRadius(a),l()):r},s.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),s):a},s.projection(t.geo.albersUsa()).context(null)},t.geo.transform=function(t){return{stream:function(e){var r=new _n(e);for(var n in t)r[n]=t[n];return r}}},_n.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},t.geo.projection=kn,t.geo.projectionMutator=Tn,(t.geo.equirectangular=function(){return kn(En)}).raw=En.invert=En,t.geo.rotation=function(t){function e(e){return(e=t(e[0]*Et,e[1]*Et))[0]*=Ot,e[1]*=Ot,e}return t=Sn(t[0]%360*Et,t[1]*Et,t.length>2?t[2]*Et:0),e.invert=function(e){return(e=t.invert(e[0]*Et,e[1]*Et))[0]*=Ot,e[1]*=Ot,e},e},On.invert=En,t.geo.circle=function(){var t,e,r=[0,0],n=6;function i(){var t="function"==typeof r?r.apply(this,arguments):r,n=Sn(-t[0]*Et,-t[1]*Et,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=n(t,e)),t[0]*=Ot,t[1]*=Ot}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(r=t,i):r},i.angle=function(r){return arguments.length?(e=Pn((t=+r)*Et,n*Et),i):t},i.precision=function(r){return arguments.length?(e=Pn(t*Et,(n=+r)*Et),i):n},i.angle(90)},t.geo.distance=function(t,e){var r,n=(e[0]-t[0])*Et,i=t[1]*Et,o=e[1]*Et,a=Math.sin(n),s=Math.cos(n),l=Math.sin(i),g=Math.cos(i),c=Math.sin(o),u=Math.cos(o);return Math.atan2(Math.sqrt((r=u*a)*r+(r=g*c-l*u*s)*r),l*c+g*u*s)},t.geo.graticule=function(){var e,r,n,i,o,a,s,l,g,c,u,h,d=10,A=d,f=90,C=360,p=2.5;function v(){return{type:"MultiLineString",coordinates:m()}}function m(){return t.range(Math.ceil(i/f)*f,n,f).map(u).concat(t.range(Math.ceil(l/C)*C,s,C).map(h)).concat(t.range(Math.ceil(r/d)*d,e,d).filter(function(t){return I(t%f)>xt}).map(g)).concat(t.range(Math.ceil(a/A)*A,o,A).filter(function(t){return I(t%C)>xt}).map(c))}return v.lines=function(){return m().map(function(t){return{type:"LineString",coordinates:t}})},v.outline=function(){return{type:"Polygon",coordinates:[u(i).concat(h(s).slice(1),u(n).reverse().slice(1),h(l).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.majorExtent(t).minorExtent(t):v.minorExtent()},v.majorExtent=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],l=+t[0][1],s=+t[1][1],i>n&&(t=i,i=n,n=t),l>s&&(t=l,l=s,s=t),v.precision(p)):[[i,l],[n,s]]},v.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),v.precision(p)):[[r,a],[e,o]]},v.step=function(t){return arguments.length?v.majorStep(t).minorStep(t):v.minorStep()},v.majorStep=function(t){return arguments.length?(f=+t[0],C=+t[1],v):[f,C]},v.minorStep=function(t){return arguments.length?(d=+t[0],A=+t[1],v):[d,A]},v.precision=function(t){return arguments.length?(p=+t,g=zn(a,o,90),c=Fn(r,e,p),u=zn(l,s,90),h=Fn(i,n,p),v):p},v.majorExtent([[-180,-90+xt],[180,90-xt]]).minorExtent([[-180,-80-xt],[180,80+xt]])},t.geo.greatArc=function(){var e,r,n=Bn,i=jn;function o(){return{type:"LineString",coordinates:[e||n.apply(this,arguments),r||i.apply(this,arguments)]}}return o.distance=function(){return t.geo.distance(e||n.apply(this,arguments),r||i.apply(this,arguments))},o.source=function(t){return arguments.length?(n=t,e="function"==typeof t?null:t,o):n},o.target=function(t){return arguments.length?(i=t,r="function"==typeof t?null:t,o):i},o.precision=function(){return arguments.length?o:0},o},t.geo.interpolate=function(t,e){return r=t[0]*Et,n=t[1]*Et,i=e[0]*Et,o=e[1]*Et,a=Math.cos(n),s=Math.sin(n),l=Math.cos(o),g=Math.sin(o),c=a*Math.cos(r),u=a*Math.sin(r),h=l*Math.cos(i),d=l*Math.sin(i),A=2*Math.asin(Math.sqrt(Nt(o-n)+a*l*Nt(i-r))),f=1/Math.sin(A),(C=A?function(t){var e=Math.sin(t*=A)*f,r=Math.sin(A-t)*f,n=r*c+e*h,i=r*u+e*d,o=r*s+e*g;return[Math.atan2(i,n)*Ot,Math.atan2(o,Math.sqrt(n*n+i*i))*Ot]}:function(){return[r*Ot,n*Ot]}).distance=A,C;var r,n,i,o,a,s,l,g,c,u,h,d,A,f,C},t.geo.length=function(e){return pn=0,t.geo.stream(e,Vn),pn};var Vn={sphere:P,point:P,lineStart:function(){var t,e,r;function n(n,i){var o=Math.sin(i*=Et),a=Math.cos(i),s=I((n*=Et)-t),l=Math.cos(s);pn+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=r*o-e*a*l)*s),e*o+r*a*l),t=n,e=o,r=a}Vn.point=function(i,o){t=i*Et,e=Math.sin(o*=Et),r=Math.cos(o),Vn.point=n},Vn.lineEnd=function(){Vn.point=Vn.lineEnd=P}},lineEnd:P,polygonStart:P,polygonEnd:P};function Gn(t,e){function r(e,r){var n=Math.cos(e),i=Math.cos(r),o=t(n*i);return[o*i*Math.sin(e),o*Math.sin(r)]}return r.invert=function(t,r){var n=Math.sqrt(t*t+r*r),i=e(n),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,n*a),Math.asin(n&&r*o/n)]},r}var Un=Gn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(t.geo.azimuthalEqualArea=function(){return kn(Un)}).raw=Un;var Zn=Gn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},S);function Hn(t,e){var r=Math.cos(t),n=function(t){return Math.tan(wt/4+t/2)},i=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(n(e)/n(t)),o=r*Math.pow(n(t),i)/i;if(!i)return Xn;function a(t,e){o>0?e<-Mt+xt&&(e=-Mt+xt):e>Mt-xt&&(e=Mt-xt);var r=o/Math.pow(n(e),i);return[r*Math.sin(i*t),o-r*Math.cos(i*t)]}return a.invert=function(t,e){var r=o-e,n=St(i)*Math.sqrt(t*t+r*r);return[Math.atan2(t,r)/i,2*Math.atan(Math.pow(o/n,1/i))-Mt]},a}function Wn(t,e){var r=Math.cos(t),n=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),i=r/n+t;if(I(n)<xt)return En;function o(t,e){var r=i-e;return[r*Math.sin(n*t),i-r*Math.cos(n*t)]}return o.invert=function(t,e){var r=i-e;return[Math.atan2(t,r)/n,i-St(n)*Math.sqrt(t*t+r*r)]},o}(t.geo.azimuthalEquidistant=function(){return kn(Zn)}).raw=Zn,(t.geo.conicConformal=function(){return on(Hn)}).raw=Hn,(t.geo.conicEquidistant=function(){return on(Wn)}).raw=Wn;var Yn=Gn(function(t){return 1/t},Math.atan);function Xn(t,e){return[t,Math.log(Math.tan(wt/4+e/2))]}function qn(t){var e,r=kn(t),n=r.scale,i=r.translate,o=r.clipExtent;return r.scale=function(){var t=n.apply(r,arguments);return t===r?e?r.clipExtent(null):r:t},r.translate=function(){var t=i.apply(r,arguments);return t===r?e?r.clipExtent(null):r:t},r.clipExtent=function(t){var a=o.apply(r,arguments);if(a===r){if(e=null==t){var s=wt*n(),l=i();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},r.clipExtent(null)}(t.geo.gnomonic=function(){return kn(Yn)}).raw=Yn,Xn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Mt]},(t.geo.mercator=function(){return qn(Xn)}).raw=Xn;var Qn=Gn(function(){return 1},Math.asin);(t.geo.orthographic=function(){return kn(Qn)}).raw=Qn;var Kn=Gn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function Jn(t,e){return[Math.log(Math.tan(wt/4+e/2)),-t]}function $n(t){return t[0]}function ti(t){return t[1]}function ei(t){for(var e=t.length,r=[0,1],n=2,i=2;i<e;i++){for(;n>1&&Rt(t[r[n-2]],t[r[n-1]],t[i])<=0;)--n;r[n++]=i}return r.slice(0,n)}function ri(t,e){return t[0]-e[0]||t[1]-e[1]}(t.geo.stereographic=function(){return kn(Kn)}).raw=Kn,Jn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Mt]},(t.geo.transverseMercator=function(){var t=qn(Jn),e=t.center,r=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?r([t[0],t[1],t.length>2?t[2]+90:90]):[(t=r())[0],t[1],t[2]-90]},r([0,0,90])}).raw=Jn,t.geom={},t.geom.hull=function(t){var e=$n,r=ti;if(arguments.length)return n(t);function n(t){if(t.length<3)return[];var n,i=Ce(e),o=Ce(r),a=t.length,s=[],l=[];for(n=0;n<a;n++)s.push([+i.call(this,t[n],n),+o.call(this,t[n],n),n]);for(s.sort(ri),n=0;n<a;n++)l.push([s[n][0],-s[n][1]]);var g=ei(s),c=ei(l),u=c[0]===g[0],h=c[c.length-1]===g[g.length-1],d=[];for(n=g.length-1;n>=0;--n)d.push(t[s[g[n]][2]]);for(n=+u;n<c.length-h;++n)d.push(t[s[c[n]][2]]);return d}return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n},t.geom.polygon=function(t){return G(t,ni),t};var ni=t.geom.polygon.prototype=[];function ii(t,e,r){return(r[0]-e[0])*(t[1]-e[1])<(r[1]-e[1])*(t[0]-e[0])}function oi(t,e,r,n){var i=t[0],o=r[0],a=e[0]-i,s=n[0]-o,l=t[1],g=r[1],c=e[1]-l,u=n[1]-g,h=(s*(l-g)-u*(i-o))/(u*a-s*c);return[i+h*a,l+h*c]}function ai(t){var e=t[0],r=t[t.length-1];return!(e[0]-r[0]||e[1]-r[1])}ni.area=function(){for(var t,e=-1,r=this.length,n=this[r-1],i=0;++e<r;)t=n,n=this[e],i+=t[1]*n[0]-t[0]*n[1];return.5*i},ni.centroid=function(t){var e,r,n=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++n<i;)e=s,s=this[n],r=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*r,a+=(e[1]+s[1])*r;return[o*t,a*t]},ni.clip=function(t){for(var e,r,n,i,o,a,s=ai(t),l=-1,g=this.length-ai(this),c=this[g-1];++l<g;){for(e=t.slice(),t.length=0,i=this[l],o=e[(n=e.length-s)-1],r=-1;++r<n;)ii(a=e[r],c,i)?(ii(o,c,i)||t.push(oi(o,a,c,i)),t.push(a)):ii(o,c,i)&&t.push(oi(o,a,c,i)),o=a;s&&t.push(t[0]),c=i}return t};var si,li,gi,ci,ui,hi=[],di=[];function Ai(t){var e=hi.pop()||new function(){Oi(this),this.edge=this.site=this.circle=null};return e.site=t,e}function fi(t){xi(t),gi.remove(t),hi.push(t),Oi(t)}function Ci(t){var e=t.circle,r=e.x,n=e.cy,i={x:r,y:n},o=t.P,a=t.N,s=[t];fi(t);for(var l=o;l.circle&&I(r-l.circle.x)<xt&&I(n-l.circle.cy)<xt;)o=l.P,s.unshift(l),fi(l),l=o;s.unshift(l),xi(l);for(var g=a;g.circle&&I(r-g.circle.x)<xt&&I(n-g.circle.cy)<xt;)a=g.N,s.push(g),fi(g),g=a;s.push(g),xi(g);var c,u=s.length;for(c=1;c<u;++c)g=s[c],l=s[c-1],Ti(g.edge,l.site,g.site,i);l=s[0],(g=s[u-1]).edge=ki(l.site,g.site,null,i),bi(l),bi(g)}function pi(t){for(var e,r,n,i,o=t.x,a=t.y,s=gi._;s;)if((n=Ii(s,a)-o)>xt)s=s.L;else{if(!((i=o-vi(s,a))>xt)){n>-xt?(e=s.P,r=s):i>-xt?(e=s,r=s.N):e=r=s;break}if(!s.R){e=s;break}s=s.R}var l=Ai(t);if(gi.insert(e,l),e||r){if(e===r)return xi(e),r=Ai(e.site),gi.insert(l,r),l.edge=r.edge=ki(e.site,l.site),bi(e),void bi(r);if(r){xi(e),xi(r);var g=e.site,c=g.x,u=g.y,h=t.x-c,d=t.y-u,A=r.site,f=A.x-c,C=A.y-u,p=2*(h*C-d*f),I=h*h+d*d,v=f*f+C*C,m={x:(C*I-d*v)/p+c,y:(h*v-f*I)/p+u};Ti(r.edge,g,A,m),l.edge=ki(g,t,null,m),r.edge=ki(t,A,null,m),bi(e),bi(r)}else l.edge=ki(e.site,l.site)}}function Ii(t,e){var r=t.site,n=r.x,i=r.y,o=i-e;if(!o)return n;var a=t.P;if(!a)return-1/0;var s=(r=a.site).x,l=r.y,g=l-e;if(!g)return s;var c=s-n,u=1/o-1/g,h=c/g;return u?(-h+Math.sqrt(h*h-2*u*(c*c/(-2*g)-l+g/2+i-o/2)))/u+n:(n+s)/2}function vi(t,e){var r=t.N;if(r)return Ii(r,e);var n=t.site;return n.y===e?n.x:1/0}function mi(t){this.site=t,this.edges=[]}function yi(t,e){return e.angle-t.angle}function bi(t){var e=t.P,r=t.N;if(e&&r){var n=e.site,i=t.site,o=r.site;if(n!==o){var a=i.x,s=i.y,l=n.x-a,g=n.y-s,c=o.x-a,u=2*(l*(C=o.y-s)-g*c);if(!(u>=-_t)){var h=l*l+g*g,d=c*c+C*C,A=(C*h-g*d)/u,f=(l*d-c*h)/u,C=f+s,p=di.pop()||new function(){Oi(this),this.x=this.y=this.arc=this.site=this.cy=null};p.arc=t,p.site=i,p.x=A+a,p.y=C+Math.sqrt(A*A+f*f),p.cy=C,t.circle=p;for(var I=null,v=ui._;v;)if(p.y<v.y||p.y===v.y&&p.x<=v.x){if(!v.L){I=v.P;break}v=v.L}else{if(!v.R){I=v;break}v=v.R}ui.insert(I,p),I||(ci=p)}}}}function xi(t){var e=t.circle;e&&(e.P||(ci=e.N),ui.remove(e),di.push(e),Oi(e),t.circle=null)}function _i(t,e){var r=t.b;if(r)return!0;var n,i,o=t.a,a=e[0][0],s=e[1][0],l=e[0][1],g=e[1][1],c=t.l,u=t.r,h=c.x,d=c.y,A=u.x,f=u.y,C=(h+A)/2,p=(d+f)/2;if(f===d){if(C<a||C>=s)return;if(h>A){if(o){if(o.y>=g)return}else o={x:C,y:l};r={x:C,y:g}}else{if(o){if(o.y<l)return}else o={x:C,y:g};r={x:C,y:l}}}else if(i=p-(n=(h-A)/(f-d))*C,n<-1||n>1)if(h>A){if(o){if(o.y>=g)return}else o={x:(l-i)/n,y:l};r={x:(g-i)/n,y:g}}else{if(o){if(o.y<l)return}else o={x:(g-i)/n,y:g};r={x:(l-i)/n,y:l}}else if(d<f){if(o){if(o.x>=s)return}else o={x:a,y:n*a+i};r={x:s,y:n*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:n*s+i};r={x:a,y:n*a+i}}return t.a=o,t.b=r,!0}function wi(t,e){this.l=t,this.r=e,this.a=this.b=null}function ki(t,e,r,n){var i=new wi(t,e);return si.push(i),r&&Ti(i,t,e,r),n&&Ti(i,e,t,n),li[t.i].edges.push(new Mi(i,t,e)),li[e.i].edges.push(new Mi(i,e,t)),i}function Ti(t,e,r,n){t.a||t.b?t.l===r?t.b=n:t.a=n:(t.a=n,t.l=e,t.r=r)}function Mi(t,e,r){var n=t.a,i=t.b;this.edge=t,this.site=e,this.angle=r?Math.atan2(r.y-e.y,r.x-e.x):t.l===e?Math.atan2(i.x-n.x,n.y-i.y):Math.atan2(n.x-i.x,i.y-n.y)}function Ei(){this._=null}function Oi(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Si(t,e){var r=e,n=e.R,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function Ri(t,e){var r=e,n=e.L,i=r.U;i?i.L===r?i.L=n:i.R=n:t._=n,n.U=i,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function Di(t){for(;t.L;)t=t.L;return t}function Li(t,e){var r,n,i,o=t.sort(Pi).pop();for(si=[],li=new Array(t.length),gi=new Ei,ui=new Ei;;)if(i=ci,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===r&&o.y===n||(li[o.i]=new mi(o),pi(o),r=o.x,n=o.y),o=t.pop();else{if(!i)break;Ci(i.arc)}e&&(function(t){for(var e,r=si,n=en(t[0][0],t[0][1],t[1][0],t[1][1]),i=r.length;i--;)(!_i(e=r[i],t)||!n(e)||I(e.a.x-e.b.x)<xt&&I(e.a.y-e.b.y)<xt)&&(e.a=e.b=null,r.splice(i,1))}(e),function(t){for(var e,r,n,i,o,a,s,l,g,c,u=t[0][0],h=t[1][0],d=t[0][1],A=t[1][1],f=li,C=f.length;C--;)if((o=f[C])&&o.prepare())for(l=(s=o.edges).length,a=0;a<l;)n=(c=s[a].end()).x,i=c.y,e=(g=s[++a%l].start()).x,r=g.y,(I(n-e)>xt||I(i-r)>xt)&&(s.splice(a,0,new Mi((p=o.site,v=c,m=I(n-u)<xt&&A-i>xt?{x:u,y:I(e-u)<xt?r:A}:I(i-A)<xt&&h-n>xt?{x:I(r-A)<xt?e:h,y:A}:I(n-h)<xt&&i-d>xt?{x:h,y:I(e-h)<xt?r:d}:I(i-d)<xt&&n-u>xt?{x:I(r-d)<xt?e:u,y:d}:null,y=void 0,y=new wi(p,null),y.a=v,y.b=m,si.push(y),y),o.site,null)),++l);var p,v,m,y}(e));var a={cells:li,edges:si};return gi=ui=si=li=null,a}function Pi(t,e){return e.y-t.y||e.x-t.x}mi.prototype.prepare=function(){for(var t,e=this.edges,r=e.length;r--;)(t=e[r].edge).b&&t.a||e.splice(r,1);return e.sort(yi),e.length},Mi.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ei.prototype={insert:function(t,e){var r,n,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=Di(this._),e.P=null,e.N=t,t.P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)r===(n=r.U).L?(i=n.R)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.R&&(Si(this,r),r=(t=r).U),r.C=!1,n.C=!0,Ri(this,n)):(i=n.L)&&i.C?(r.C=i.C=!1,n.C=!0,t=n):(t===r.L&&(Ri(this,r),r=(t=r).U),r.C=!1,n.C=!0,Si(this,n)),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,r,n,i=t.U,o=t.L,a=t.R;if(r=o?a?Di(a):o:a,i?i.L===t?i.L=r:i.R=r:this._=r,o&&a?(n=r.C,r.C=t.C,r.L=o,o.U=r,r!==a?(i=r.U,r.U=t.U,t=r.R,i.L=t,r.R=a,a.U=r):(r.U=i,i=r,t=r.R)):(n=t.C,t=r),t&&(t.U=i),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Si(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ri(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Si(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Ri(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Si(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Ri(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},t.geom.voronoi=function(t){var e=$n,r=ti,n=e,i=r,o=Ni;if(t)return a(t);function a(t){var e=new Array(t.length),r=o[0][0],n=o[0][1],i=o[1][0],a=o[1][1];return Li(s(t),o).cells.forEach(function(o,s){var l=o.edges,g=o.site;(e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):g.x>=r&&g.x<=i&&g.y>=n&&g.y<=a?[[r,a],[i,a],[i,n],[r,n]]:[]).point=t[s]}),e}function s(t){return t.map(function(t,e){return{x:Math.round(n(t,e)/xt)*xt,y:Math.round(i(t,e)/xt)*xt,i:e}})}return a.links=function(t){return Li(s(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},a.triangles=function(t){var e=[];return Li(s(t)).cells.forEach(function(r,n){for(var i,o,a,s,l=r.site,g=r.edges.sort(yi),c=-1,u=g.length,h=g[u-1].edge,d=h.l===l?h.r:h.l;++c<u;)h,i=d,d=(h=g[c].edge).l===l?h.r:h.l,n<i.i&&n<d.i&&(a=i,s=d,((o=l).x-s.x)*(a.y-o.y)-(o.x-a.x)*(s.y-o.y)<0)&&e.push([t[n],t[i.i],t[d.i]])}),e},a.x=function(t){return arguments.length?(n=Ce(e=t),a):e},a.y=function(t){return arguments.length?(i=Ce(r=t),a):r},a.clipExtent=function(t){return arguments.length?(o=null==t?Ni:t,a):o===Ni?null:o},a.size=function(t){return arguments.length?a.clipExtent(t&&[[0,0],t]):o===Ni?null:o&&o[1]},a};var Ni=[[-1e6,-1e6],[1e6,1e6]];function zi(t){return t.x}function Fi(t){return t.y}function Bi(e,r){e=t.rgb(e),r=t.rgb(r);var n=e.r,i=e.g,o=e.b,a=r.r-n,s=r.g-i,l=r.b-o;return function(t){return"#"+ge(Math.round(n+a*t))+ge(Math.round(i+s*t))+ge(Math.round(o+l*t))}}function ji(t,e){var r,n={},i={};for(r in t)r in e?n[r]=Hi(t[r],e[r]):i[r]=t[r];for(r in e)r in t||(i[r]=e[r]);return function(t){for(r in n)i[r]=n[r](t);return i}}function Vi(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Gi(t,e){var r,n,i,o=Ui.lastIndex=Zi.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(r=Ui.exec(t))&&(n=Zi.exec(e));)(i=n.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(r=r[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,l.push({i:a,x:Vi(r,n)})),o=Zi.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var r,n=0;n<e;++n)s[(r=l[n]).i]=r.x(t);return s.join("")})}t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)},t.geom.quadtree=function(t,e,r,n,i){var o,a=$n,s=ti;if(o=arguments.length)return a=zi,s=Fi,3===o&&(i=r,n=e,r=e=0),l(t);function l(t){var l,g,c,u,h,d,A,f,C,p=Ce(a),v=Ce(s);if(null!=e)d=e,A=r,f=n,C=i;else if(f=C=-(d=A=1/0),g=[],c=[],h=t.length,o)for(u=0;u<h;++u)(l=t[u]).x<d&&(d=l.x),l.y<A&&(A=l.y),l.x>f&&(f=l.x),l.y>C&&(C=l.y),g.push(l.x),c.push(l.y);else for(u=0;u<h;++u){var m=+p(l=t[u],u),y=+v(l,u);m<d&&(d=m),y<A&&(A=y),m>f&&(f=m),y>C&&(C=y),g.push(m),c.push(y)}var b=f-d,x=C-A;function _(t,e,r,n,i,o,a,s){if(!isNaN(r)&&!isNaN(n))if(t.leaf){var l=t.x,g=t.y;if(null!=l)if(I(l-r)+I(g-n)<.01)w(t,e,r,n,i,o,a,s);else{var c=t.point;t.x=t.y=t.point=null,w(t,c,l,g,i,o,a,s),w(t,e,r,n,i,o,a,s)}else t.x=r,t.y=n,t.point=e}else w(t,e,r,n,i,o,a,s)}function w(t,e,r,n,i,o,a,s){var l=.5*(i+a),g=.5*(o+s),c=r>=l,u=n>=g,h=u<<1|c;t.leaf=!1,t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){_(k,t,+p(t,++u),+v(t,u),d,A,f,C)}}),c?i=l:a=l,u?o=g:s=g,_(t,e,r,n,i,o,a,s)}b>x?C=A+b:f=d+x;var k={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){_(k,t,+p(t,++u),+v(t,u),d,A,f,C)}};if(k.visit=function(t){!function t(e,r,n,i,o,a){if(!e(r,n,i,o,a)){var s=.5*(n+o),l=.5*(i+a),g=r.nodes;g[0]&&t(e,g[0],n,i,s,l),g[1]&&t(e,g[1],s,i,o,l),g[2]&&t(e,g[2],n,l,s,a),g[3]&&t(e,g[3],s,l,o,a)}}(t,k,d,A,f,C)},k.find=function(t){return function(t,e,r,n,i,o,a){var s,l=1/0;return function t(g,c,u,h,d){if(!(c>o||u>a||h<n||d<i)){if(A=g.point){var A,f=e-g.x,C=r-g.y,p=f*f+C*C;if(p<l){var I=Math.sqrt(l=p);n=e-I,i=r-I,o=e+I,a=r+I,s=A}}for(var v=g.nodes,m=.5*(c+h),y=.5*(u+d),b=(r>=y)<<1|e>=m,x=b+4;b<x;++b)if(g=v[3&b])switch(3&b){case 0:t(g,c,u,m,y);break;case 1:t(g,m,u,h,y);break;case 2:t(g,c,y,m,d);break;case 3:t(g,m,y,h,d)}}}(t,n,i,o,a),s}(k,t[0],t[1],d,A,f,C)},u=-1,null==e){for(;++u<h;)_(k,t[u],g[u],c[u],d,A,f,C);--u}else t.forEach(k.add);return g=c=t=l=null,k}return l.x=function(t){return arguments.length?(a=t,l):a},l.y=function(t){return arguments.length?(s=t,l):s},l.extent=function(t){return arguments.length?(null==t?e=r=n=i=null:(e=+t[0][0],r=+t[0][1],n=+t[1][0],i=+t[1][1]),l):null==e?null:[[e,r],[n,i]]},l.size=function(t){return arguments.length?(null==t?e=r=n=i=null:(e=r=0,n=+t[0],i=+t[1]),l):null==e?null:[n-e,i-r]},l},t.interpolateRgb=Bi,t.interpolateObject=ji,t.interpolateNumber=Vi,t.interpolateString=Gi;var Ui=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zi=new RegExp(Ui.source,"g");function Hi(e,r){for(var n,i=t.interpolators.length;--i>=0&&!(n=t.interpolators[i](e,r)););return n}function Wi(t,e){var r,n=[],i=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(r=0;r<s;++r)n.push(Hi(t[r],e[r]));for(;r<o;++r)i[r]=t[r];for(;r<a;++r)i[r]=e[r];return function(t){for(r=0;r<s;++r)i[r]=n[r](t);return i}}t.interpolate=Hi,t.interpolators=[function(t,e){var r=typeof e;return("string"===r?fe.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Bi:Gi:e instanceof Vt?Bi:Array.isArray(e)?Wi:"object"===r&&isNaN(e)?ji:Vi)(t,e)}],t.interpolateArray=Wi;var Yi=function(){return S},Xi=t.map({linear:Yi,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return Ji},cubic:function(){return $i},sin:function(){return eo},exp:function(){return ro},circle:function(){return no},elastic:function(t,e){var r;arguments.length<2&&(e=.45);arguments.length?r=e/kt*Math.asin(1/t):(t=1,r=e/4);return function(n){return 1+t*Math.pow(2,-10*n)*Math.sin((n-r)*kt/e)}},back:function(t){t||(t=1.70158);return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return io}}),qi=t.map({in:S,out:Qi,"in-out":Ki,"out-in":function(t){return Ki(Qi(t))}});function Qi(t){return function(e){return 1-t(1-e)}}function Ki(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function Ji(t){return t*t}function $i(t){return t*t*t}function to(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}function eo(t){return 1-Math.cos(t*Mt)}function ro(t){return Math.pow(2,10*(t-1))}function no(t){return 1-Math.sqrt(1-t*t)}function io(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function oo(t,e){return e-=t,function(r){return Math.round(t+e*r)}}function ao(t){var e,r,n,i=[t.a,t.b],o=[t.c,t.d],a=lo(i),s=so(i,o),l=lo(((e=o)[0]+=(n=-s)*(r=i)[0],e[1]+=n*r[1],e))||0;i[0]*o[1]<o[0]*i[1]&&(i[0]*=-1,i[1]*=-1,a*=-1,s*=-1),this.rotate=(a?Math.atan2(i[1],i[0]):Math.atan2(-o[0],o[1]))*Ot,this.translate=[t.e,t.f],this.scale=[a,l],this.skew=l?Math.atan2(s,l)*Ot:0}function so(t,e){return t[0]*e[0]+t[1]*e[1]}function lo(t){var e=Math.sqrt(so(t,t));return e&&(t[0]/=e,t[1]/=e),e}t.ease=function(t){var e,n=t.indexOf("-"),i=n>=0?t.slice(0,n):t,o=n>=0?t.slice(n+1):"in";return i=Xi.get(i)||Yi,o=qi.get(o)||S,e=o(i.apply(null,r.call(arguments,1))),function(t){return t<=0?0:t>=1?1:e(t)}},t.interpolateHcl=function(e,r){e=t.hcl(e),r=t.hcl(r);var n=e.h,i=e.c,o=e.l,a=r.h-n,s=r.c-i,l=r.l-o;isNaN(s)&&(s=0,i=isNaN(i)?r.c:i);isNaN(a)?(a=0,n=isNaN(n)?r.h:n):a>180?a-=360:a<-180&&(a+=360);return function(t){return Yt(n+a*t,i+s*t,o+l*t)+""}},t.interpolateHsl=function(e,r){e=t.hsl(e),r=t.hsl(r);var n=e.h,i=e.s,o=e.l,a=r.h-n,s=r.s-i,l=r.l-o;isNaN(s)&&(s=0,i=isNaN(i)?r.s:i);isNaN(a)?(a=0,n=isNaN(n)?r.h:n):a>180?a-=360:a<-180&&(a+=360);return function(t){return Zt(n+a*t,i+s*t,o+l*t)+""}},t.interpolateLab=function(e,r){e=t.lab(e),r=t.lab(r);var n=e.l,i=e.a,o=e.b,a=r.l-n,s=r.a-i,l=r.b-o;return function(t){return te(n+a*t,i+s*t,o+l*t)+""}},t.interpolateRound=oo,t.transform=function(e){var r=i.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(t){if(null!=t){r.setAttribute("transform",t);var e=r.transform.baseVal.consolidate()}return new ao(e?e.matrix:go)})(e)},ao.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var go={a:1,b:0,c:0,d:1,e:0,f:0};function co(t){return t.length?t.pop()+",":""}function uo(e,r){var n=[],i=[];return e=t.transform(e),r=t.transform(r),function(t,e,r,n){if(t[0]!==e[0]||t[1]!==e[1]){var i=r.push("translate(",null,",",null,")");n.push({i:i-4,x:Vi(t[0],e[0])},{i:i-2,x:Vi(t[1],e[1])})}else(e[0]||e[1])&&r.push("translate("+e+")")}(e.translate,r.translate,n,i),function(t,e,r,n){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),n.push({i:r.push(co(r)+"rotate(",null,")")-2,x:Vi(t,e)})):e&&r.push(co(r)+"rotate("+e+")")}(e.rotate,r.rotate,n,i),function(t,e,r,n){t!==e?n.push({i:r.push(co(r)+"skewX(",null,")")-2,x:Vi(t,e)}):e&&r.push(co(r)+"skewX("+e+")")}(e.skew,r.skew,n,i),function(t,e,r,n){if(t[0]!==e[0]||t[1]!==e[1]){var i=r.push(co(r)+"scale(",null,",",null,")");n.push({i:i-4,x:Vi(t[0],e[0])},{i:i-2,x:Vi(t[1],e[1])})}else 1===e[0]&&1===e[1]||r.push(co(r)+"scale("+e+")")}(e.scale,r.scale,n,i),e=r=null,function(t){for(var e,r=-1,o=i.length;++r<o;)n[(e=i[r]).i]=e.x(t);return n.join("")}}function ho(t,e){return e=(e-=t=+t)||1/e,function(r){return(r-t)/e}}function Ao(t,e){return e=(e-=t=+t)||1/e,function(r){return Math.max(0,Math.min(1,(r-t)/e))}}function fo(t){for(var e=t.source,r=t.target,n=function(t,e){if(t===e)return t;var r=Co(t),n=Co(e),i=r.pop(),o=n.pop(),a=null;for(;i===o;)a=i,i=r.pop(),o=n.pop();return a}(e,r),i=[e];e!==n;)e=e.parent,i.push(e);for(var o=i.length;r!==n;)i.splice(o,0,r),r=r.parent;return i}function Co(t){for(var e=[],r=t.parent;null!=r;)e.push(t),t=r,r=r.parent;return e.push(t),e}function po(t){t.fixed|=2}function Io(t){t.fixed&=-7}function vo(t){t.fixed|=4,t.px=t.x,t.py=t.y}function mo(t){t.fixed&=-5}t.interpolateTransform=uo,t.layout={},t.layout.bundle=function(){return function(t){for(var e=[],r=-1,n=t.length;++r<n;)e.push(fo(t[r]));return e}},t.layout.chord=function(){var e,r,n,i,o,a,s,l={},g=0;function c(){var l,c,h,d,A,f={},C=[],p=t.range(i),I=[];for(e=[],r=[],l=0,d=-1;++d<i;){for(c=0,A=-1;++A<i;)c+=n[d][A];C.push(c),I.push(t.range(i)),l+=c}for(o&&p.sort(function(t,e){return o(C[t],C[e])}),a&&I.forEach(function(t,e){t.sort(function(t,r){return a(n[e][t],n[e][r])})}),l=(kt-g*i)/l,c=0,d=-1;++d<i;){for(h=c,A=-1;++A<i;){var v=p[d],m=I[v][A],y=n[v][m],b=c,x=c+=y*l;f[v+"-"+m]={index:v,subindex:m,startAngle:b,endAngle:x,value:y}}r[v]={index:v,startAngle:h,endAngle:c,value:C[v]},c+=g}for(d=-1;++d<i;)for(A=d-1;++A<i;){var _=f[d+"-"+A],w=f[A+"-"+d];(_.value||w.value)&&e.push(_.value<w.value?{source:w,target:_}:{source:_,target:w})}s&&u()}function u(){e.sort(function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return l.matrix=function(t){return arguments.length?(i=(n=t)&&n.length,e=r=null,l):n},l.padding=function(t){return arguments.length?(g=t,e=r=null,l):g},l.sortGroups=function(t){return arguments.length?(o=t,e=r=null,l):o},l.sortSubgroups=function(t){return arguments.length?(a=t,e=null,l):a},l.sortChords=function(t){return arguments.length?(s=t,e&&u(),l):s},l.chords=function(){return e||c(),e},l.groups=function(){return r||c(),r},l},t.layout.force=function(){var e,r,n,i,o,a,s={},l=t.dispatch("start","tick","end"),g=[1,1],c=.9,u=yo,h=bo,d=-30,A=xo,f=.1,C=.64,p=[],I=[];function v(t){return function(e,r,n,i){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=i-r,l=o*o+a*a;if(s*s/C<l){if(l<A){var g=e.charge/l;t.px-=o*g,t.py-=a*g}return!0}if(e.point&&l&&l<A){g=e.pointCharge/l;t.px-=o*g,t.py-=a*g}}return!e.charge}}function m(e){e.px=t.event.x,e.py=t.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return e=null,l.end({type:"end",alpha:n=0}),!0;var r,s,u,h,A,C,m,y,b,x=p.length,_=I.length;for(s=0;s<_;++s)h=(u=I[s]).source,(C=(y=(A=u.target).x-h.x)*y+(b=A.y-h.y)*b)&&(y*=C=n*o[s]*((C=Math.sqrt(C))-i[s])/C,b*=C,A.x-=y*(m=h.weight+A.weight?h.weight/(h.weight+A.weight):.5),A.y-=b*m,h.x+=y*(m=1-m),h.y+=b*m);if((m=n*f)&&(y=g[0]/2,b=g[1]/2,s=-1,m))for(;++s<x;)(u=p[s]).x+=(y-u.x)*m,u.y+=(b-u.y)*m;if(d)for(!function t(e,r,n){var i=0,o=0;e.charge=0;if(!e.leaf)for(var a,s=e.nodes,l=s.length,g=-1;++g<l;)null!=(a=s[g])&&(t(a,r,n),e.charge+=a.charge,i+=a.charge*a.cx,o+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=r*n[e.point.index];e.charge+=e.pointCharge=c,i+=c*e.point.x,o+=c*e.point.y}e.cx=i/e.charge;e.cy=o/e.charge}(r=t.geom.quadtree(p),n,a),s=-1;++s<x;)(u=p[s]).fixed||r.visit(v(u));for(s=-1;++s<x;)(u=p[s]).fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*c,u.y-=(u.py-(u.py=u.y))*c);l.tick({type:"tick",alpha:n})},s.nodes=function(t){return arguments.length?(p=t,s):p},s.links=function(t){return arguments.length?(I=t,s):I},s.size=function(t){return arguments.length?(g=t,s):g},s.linkDistance=function(t){return arguments.length?(u="function"==typeof t?t:+t,s):u},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.friction=function(t){return arguments.length?(c=+t,s):c},s.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.chargeDistance=function(t){return arguments.length?(A=t*t,s):Math.sqrt(A)},s.gravity=function(t){return arguments.length?(f=+t,s):f},s.theta=function(t){return arguments.length?(C=t*t,s):Math.sqrt(C)},s.alpha=function(t){return arguments.length?(t=+t,n?t>0?n=t:(e.c=null,e.t=NaN,e=null,l.end({type:"end",alpha:n=0})):t>0&&(l.start({type:"start",alpha:n=t}),e=_e(s.tick)),s):n},s.start=function(){var t,e,r,n=p.length,l=I.length,c=g[0],A=g[1];for(t=0;t<n;++t)(r=p[t]).index=t,r.weight=0;for(t=0;t<l;++t)"number"==typeof(r=I[t]).source&&(r.source=p[r.source]),"number"==typeof r.target&&(r.target=p[r.target]),++r.source.weight,++r.target.weight;for(t=0;t<n;++t)r=p[t],isNaN(r.x)&&(r.x=f("x",c)),isNaN(r.y)&&(r.y=f("y",A)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof u)for(t=0;t<l;++t)i[t]=+u.call(this,I[t],t);else for(t=0;t<l;++t)i[t]=u;if(o=[],"function"==typeof h)for(t=0;t<l;++t)o[t]=+h.call(this,I[t],t);else for(t=0;t<l;++t)o[t]=h;if(a=[],"function"==typeof d)for(t=0;t<n;++t)a[t]=+d.call(this,p[t],t);else for(t=0;t<n;++t)a[t]=d;function f(r,i){if(!e){for(e=new Array(n),g=0;g<n;++g)e[g]=[];for(g=0;g<l;++g){var o=I[g];e[o.source.index].push(o.target),e[o.target.index].push(o.source)}}for(var a,s=e[t],g=-1,c=s.length;++g<c;)if(!isNaN(a=s[g][r]))return a;return Math.random()*i}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(r||(r=t.behavior.drag().origin(S).on("dragstart.force",po).on("drag.force",m).on("dragend.force",Io)),!arguments.length)return r;this.on("mouseover.force",vo).on("mouseout.force",mo).call(r)},t.rebind(s,l,"on")};var yo=20,bo=1,xo=1/0;function _o(e,r){return t.rebind(e,r,"sort","children","value"),e.nodes=e,e.links=Oo,e}function wo(t,e){for(var r=[t];null!=(t=r.pop());)if(e(t),(i=t.children)&&(n=i.length))for(var n,i;--n>=0;)r.push(i[n])}function ko(t,e){for(var r=[t],n=[];null!=(t=r.pop());)if(n.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)r.push(o[a]);for(;null!=(t=n.pop());)e(t)}function To(t){return t.children}function Mo(t){return t.value}function Eo(t,e){return e.value-t.value}function Oo(e){return t.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}t.layout.hierarchy=function(){var t=Eo,e=To,r=Mo;function n(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(g=e.call(n,o,o.depth))&&(l=g.length)){for(var l,g,c;--l>=0;)a.push(c=g[l]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=g}else r&&(o.value=+r.call(n,o,o.depth)||0),delete o.children;return ko(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),s}return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(wo(t,function(t){t.children&&(t.value=0)}),ko(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},t.layout.partition=function(){var e=t.layout.hierarchy(),r=[1,1];function n(t,n){var i=e.call(this,t,n);return function t(e,r,n,i){var o=e.children;if(e.x=r,e.y=e.depth*i,e.dx=n,e.dy=i,o&&(a=o.length)){var a,s,l,g=-1;for(n=e.value?n/e.value:0;++g<a;)t(s=o[g],r,l=s.value*n,i),r+=l}}(i[0],0,r[0],r[1]/function t(e){var r=e.children,n=0;if(r&&(i=r.length))for(var i,o=-1;++o<i;)n=Math.max(n,t(r[o]));return 1+n}(i[0])),i}return n.size=function(t){return arguments.length?(r=t,n):r},_o(n,e)},t.layout.pie=function(){var e=Number,r=So,n=0,i=kt,o=0;function a(s){var l,g=s.length,c=s.map(function(t,r){return+e.call(a,t,r)}),u=+("function"==typeof n?n.apply(this,arguments):n),h=("function"==typeof i?i.apply(this,arguments):i)-u,d=Math.min(Math.abs(h)/g,+("function"==typeof o?o.apply(this,arguments):o)),A=d*(h<0?-1:1),f=t.sum(c),C=f?(h-g*A)/f:0,p=t.range(g),I=[];return null!=r&&p.sort(r===So?function(t,e){return c[e]-c[t]}:function(t,e){return r(s[t],s[e])}),p.forEach(function(t){I[t]={data:s[t],value:l=c[t],startAngle:u,endAngle:u+=l*C+A,padAngle:d}}),I}return a.value=function(t){return arguments.length?(e=t,a):e},a.sort=function(t){return arguments.length?(r=t,a):r},a.startAngle=function(t){return arguments.length?(n=t,a):n},a.endAngle=function(t){return arguments.length?(i=t,a):i},a.padAngle=function(t){return arguments.length?(o=t,a):o},a};var So={};function Ro(t){return t.x}function Do(t){return t.y}function Lo(t,e,r){t.y0=e,t.y=r}t.layout.stack=function(){var e=S,r=zo,n=Fo,i=Lo,o=Ro,a=Do;function s(l,g){if(!(d=l.length))return l;var c=l.map(function(t,r){return e.call(s,t,r)}),u=c.map(function(t){return t.map(function(t,e){return[o.call(s,t,e),a.call(s,t,e)]})}),h=r.call(s,u,g);c=t.permute(c,h),u=t.permute(u,h);var d,A,f,C,p=n.call(s,u,g),I=c[0].length;for(f=0;f<I;++f)for(i.call(s,c[0][f],C=p[f],u[0][f][1]),A=1;A<d;++A)i.call(s,c[A][f],C+=u[A-1][f][1],u[A][f][1]);return l}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(t){return arguments.length?(r="function"==typeof t?t:Po.get(t)||zo,s):r},s.offset=function(t){return arguments.length?(n="function"==typeof t?t:No.get(t)||Fo,s):n},s.x=function(t){return arguments.length?(o=t,s):o},s.y=function(t){return arguments.length?(a=t,s):a},s.out=function(t){return arguments.length?(i=t,s):i},s};var Po=t.map({"inside-out":function(e){var r,n,i=e.length,o=e.map(Bo),a=e.map(jo),s=t.range(i).sort(function(t,e){return o[t]-o[e]}),l=0,g=0,c=[],u=[];for(r=0;r<i;++r)n=s[r],l<g?(l+=a[n],c.push(n)):(g+=a[n],u.push(n));return u.reverse().concat(c)},reverse:function(e){return t.range(e.length).reverse()},default:zo}),No=t.map({silhouette:function(t){var e,r,n,i=t.length,o=t[0].length,a=[],s=0,l=[];for(r=0;r<o;++r){for(e=0,n=0;e<i;e++)n+=t[e][r][1];n>s&&(s=n),a.push(n)}for(r=0;r<o;++r)l[r]=(s-a[r])/2;return l},wiggle:function(t){var e,r,n,i,o,a,s,l,g,c=t.length,u=t[0],h=u.length,d=[];for(d[0]=l=g=0,r=1;r<h;++r){for(e=0,i=0;e<c;++e)i+=t[e][r][1];for(e=0,o=0,s=u[r][0]-u[r-1][0];e<c;++e){for(n=0,a=(t[e][r][1]-t[e][r-1][1])/(2*s);n<e;++n)a+=(t[n][r][1]-t[n][r-1][1])/s;o+=a*t[e][r][1]}d[r]=l-=i?o/i*s:0,l<g&&(g=l)}for(r=0;r<h;++r)d[r]-=g;return d},expand:function(t){var e,r,n,i=t.length,o=t[0].length,a=1/i,s=[];for(r=0;r<o;++r){for(e=0,n=0;e<i;e++)n+=t[e][r][1];if(n)for(e=0;e<i;e++)t[e][r][1]/=n;else for(e=0;e<i;e++)t[e][r][1]=a}for(r=0;r<o;++r)s[r]=0;return s},zero:Fo});function zo(e){return t.range(e.length)}function Fo(t){for(var e=-1,r=t[0].length,n=[];++e<r;)n[e]=0;return n}function Bo(t){for(var e,r=1,n=0,i=t[0][1],o=t.length;r<o;++r)(e=t[r][1])>i&&(n=r,i=e);return n}function jo(t){return t.reduce(Vo,0)}function Vo(t,e){return t+e[1]}function Go(t,e){return Uo(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Uo(t,e){for(var r=-1,n=+t[0],i=(t[1]-n)/e,o=[];++r<=e;)o[r]=i*r+n;return o}function Zo(e){return[t.min(e),t.max(e)]}function Ho(t,e){return t.value-e.value}function Wo(t,e){var r=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=r,r._pack_prev=e}function Yo(t,e){t._pack_next=e,e._pack_prev=t}function Xo(t,e){var r=e.x-t.x,n=e.y-t.y,i=t.r+e.r;return.999*i*i>r*r+n*n}function qo(t){if((e=t.children)&&(l=e.length)){var e,r,n,i,o,a,s,l,g=1/0,c=-1/0,u=1/0,h=-1/0;if(e.forEach(Qo),(r=e[0]).x=-r.r,r.y=0,v(r),l>1&&((n=e[1]).x=n.r,n.y=0,v(n),l>2))for(Jo(r,n,i=e[2]),v(i),Wo(r,i),r._pack_prev=i,Wo(i,n),n=r._pack_next,o=3;o<l;o++){Jo(r,n,i=e[o]);var d=0,A=1,f=1;for(a=n._pack_next;a!==n;a=a._pack_next,A++)if(Xo(a,i)){d=1;break}if(1==d)for(s=r._pack_prev;s!==a._pack_prev&&!Xo(s,i);s=s._pack_prev,f++);d?(A<f||A==f&&n.r<r.r?Yo(r,n=a):Yo(r=s,n),o--):(Wo(r,i),n=i,v(i))}var C=(g+c)/2,p=(u+h)/2,I=0;for(o=0;o<l;o++)(i=e[o]).x-=C,i.y-=p,I=Math.max(I,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=I,e.forEach(Ko)}function v(t){g=Math.min(t.x-t.r,g),c=Math.max(t.x+t.r,c),u=Math.min(t.y-t.r,u),h=Math.max(t.y+t.r,h)}}function Qo(t){t._pack_next=t._pack_prev=t}function Ko(t){delete t._pack_next,delete t._pack_prev}function Jo(t,e,r){var n=t.r+r.r,i=e.x-t.x,o=e.y-t.y;if(n&&(i||o)){var a=e.r+r.r,s=i*i+o*o,l=.5+((n*=n)-(a*=a))/(2*s),g=Math.sqrt(Math.max(0,2*a*(n+s)-(n-=s)*n-a*a))/(2*s);r.x=t.x+l*i+g*o,r.y=t.y+l*o-g*i}else r.x=t.x+n,r.y=t.y}function $o(t,e){return t.parent==e.parent?1:2}function ta(t){var e=t.children;return e.length?e[0]:t.t}function ea(t){var e,r=t.children;return(e=r.length)?r[e-1]:t.t}function ra(t,e,r){var n=r/(e.i-t.i);e.c-=n,e.s+=r,t.c+=n,e.z+=r,e.m+=r}function na(t,e,r){return t.a.parent===e.parent?t.a:r}function ia(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function oa(t,e){var r=t.x+e[3],n=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return i<0&&(r+=i/2,i=0),o<0&&(n+=o/2,o=0),{x:r,y:n,dx:i,dy:o}}function aa(t){var e=t[0],r=t[t.length-1];return e<r?[e,r]:[r,e]}function sa(t){return t.rangeExtent?t.rangeExtent():aa(t.range())}function la(t,e,r,n){var i=r(t[0],t[1]),o=n(e[0],e[1]);return function(t){return o(i(t))}}function ga(t,e){var r,n=0,i=t.length-1,o=t[n],a=t[i];return a<o&&(r=n,n=i,i=r,r=o,o=a,a=r),t[n]=e.floor(o),t[i]=e.ceil(a),t}function ca(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:ua}t.layout.histogram=function(){var e=!0,r=Number,n=Zo,i=Go;function o(o,a){for(var s,l,g=[],c=o.map(r,this),u=n.call(this,c,a),h=i.call(this,u,c,a),d=(a=-1,c.length),A=h.length-1,f=e?1:1/d;++a<A;)(s=g[a]=[]).dx=h[a+1]-(s.x=h[a]),s.y=0;if(A>0)for(a=-1;++a<d;)(l=c[a])>=u[0]&&l<=u[1]&&((s=g[t.bisect(h,l,1,A)-1]).y+=f,s.push(o[a]));return g}return o.value=function(t){return arguments.length?(r=t,o):r},o.range=function(t){return arguments.length?(n=Ce(t),o):n},o.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return Uo(e,t)}:Ce(t),o):i},o.frequency=function(t){return arguments.length?(e=!!t,o):e},o},t.layout.pack=function(){var e,r=t.layout.hierarchy().sort(Ho),n=0,i=[1,1];function o(t,o){var a=r.call(this,t,o),s=a[0],l=i[0],g=i[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,ko(s,function(t){t.r=+c(t.value)}),ko(s,qo),n){var u=n*(e?1:Math.max(2*s.r/l,2*s.r/g))/2;ko(s,function(t){t.r+=u}),ko(s,qo),ko(s,function(t){t.r-=u})}return function t(e,r,n,i){var o=e.children;e.x=r+=i*e.x;e.y=n+=i*e.y;e.r*=i;if(o)for(var a=-1,s=o.length;++a<s;)t(o[a],r,n,i)}(s,l/2,g/2,e?1:1/Math.max(2*s.r/l,2*s.r/g)),a}return o.size=function(t){return arguments.length?(i=t,o):i},o.radius=function(t){return arguments.length?(e=null==t||"function"==typeof t?t:+t,o):e},o.padding=function(t){return arguments.length?(n=+t,o):n},_o(o,r)},t.layout.tree=function(){var e=t.layout.hierarchy().sort(null).value(null),r=$o,n=[1,1],i=null;function o(t,o){var g=e.call(this,t,o),c=g[0],u=function(t){var e,r={A:null,children:[t]},n=[r];for(;null!=(e=n.pop());)for(var i,o=e.children,a=0,s=o.length;a<s;++a)n.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return r.children[0]}(c);if(ko(u,a),u.parent.m=-u.z,wo(u,s),i)wo(c,l);else{var h=c,d=c,A=c;wo(c,function(t){t.x<h.x&&(h=t),t.x>d.x&&(d=t),t.depth>A.depth&&(A=t)});var f=r(h,d)/2-h.x,C=n[0]/(d.x+r(d,h)/2+f),p=n[1]/(A.depth||1);wo(c,function(t){t.x=(t.x+f)*C,t.y=t.depth*p})}return g}function a(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e.length){!function(t){var e,r=0,n=0,i=t.children,o=i.length;for(;--o>=0;)(e=i[o]).z+=r,e.m+=r,r+=e.s+(n+=e.c)}(t);var o=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+r(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+r(t._,i._));t.parent.A=function(t,e,n){if(e){for(var i,o=t,a=t,s=e,l=o.parent.children[0],g=o.m,c=a.m,u=s.m,h=l.m;s=ea(s),o=ta(o),s&&o;)l=ta(l),(a=ea(a)).a=t,(i=s.z+u-o.z-g+r(s._,o._))>0&&(ra(na(s,t,n),t,i),g+=i,c+=i),u+=s.m,g+=o.m,h+=l.m,c+=a.m;s&&!ea(a)&&(a.t=s,a.m+=u-c),o&&!ta(l)&&(l.t=o,l.m+=g-h,n=t)}return n}(t,i,t.parent.A||n[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=n[0],t.y=t.depth*n[1]}return o.separation=function(t){return arguments.length?(r=t,o):r},o.size=function(t){return arguments.length?(i=null==(n=t)?l:null,o):i?null:n},o.nodeSize=function(t){return arguments.length?(i=null==(n=t)?null:l,o):i?n:null},_o(o,e)},t.layout.cluster=function(){var e=t.layout.hierarchy().sort(null).value(null),r=$o,n=[1,1],i=!1;function o(o,a){var s,l=e.call(this,o,a),g=l[0],c=0;ko(g,function(e){var n=e.children;n&&n.length?(e.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(n),e.y=function(e){return 1+t.max(e,function(t){return t.y})}(n)):(e.x=s?c+=r(e,s):0,e.y=0,s=e)});var u=function t(e){var r=e.children;return r&&r.length?t(r[0]):e}(g),h=function t(e){var r,n=e.children;return n&&(r=n.length)?t(n[r-1]):e}(g),d=u.x-r(u,h)/2,A=h.x+r(h,u)/2;return ko(g,i?function(t){t.x=(t.x-g.x)*n[0],t.y=(g.y-t.y)*n[1]}:function(t){t.x=(t.x-d)/(A-d)*n[0],t.y=(1-(g.y?t.y/g.y:1))*n[1]}),l}return o.separation=function(t){return arguments.length?(r=t,o):r},o.size=function(t){return arguments.length?(i=null==(n=t),o):i?null:n},o.nodeSize=function(t){return arguments.length?(i=null!=(n=t),o):i?n:null},_o(o,e)},t.layout.treemap=function(){var e,r=t.layout.hierarchy(),n=Math.round,i=[1,1],o=null,a=ia,s=!1,l="squarify",g=.5*(1+Math.sqrt(5));function c(t,e){for(var r,n,i=-1,o=t.length;++i<o;)n=(r=t[i]).value*(e<0?0:e),r.area=isNaN(n)||n<=0?0:n}function u(t){var e=t.children;if(e&&e.length){var r,n,i,o=a(t),s=[],g=e.slice(),h=1/0,f="slice"===l?o.dx:"dice"===l?o.dy:"slice-dice"===l?1&t.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(c(g,o.dx*o.dy/t.value),s.area=0;(i=g.length)>0;)s.push(r=g[i-1]),s.area+=r.area,"squarify"!==l||(n=d(s,f))<=h?(g.pop(),h=n):(s.area-=s.pop().area,A(s,f,o,!1),f=Math.min(o.dx,o.dy),s.length=s.area=0,h=1/0);s.length&&(A(s,f,o,!0),s.length=s.area=0),e.forEach(u)}}function h(t){var e=t.children;if(e&&e.length){var r,n=a(t),i=e.slice(),o=[];for(c(i,n.dx*n.dy/t.value),o.area=0;r=i.pop();)o.push(r),o.area+=r.area,null!=r.z&&(A(o,r.z?n.dx:n.dy,n,!i.length),o.length=o.area=0);e.forEach(h)}}function d(t,e){for(var r,n=t.area,i=0,o=1/0,a=-1,s=t.length;++a<s;)(r=t[a].area)&&(r<o&&(o=r),r>i&&(i=r));return e*=e,(n*=n)?Math.max(e*i*g/n,n/(e*o*g)):1/0}function A(t,e,r,i){var o,a=-1,s=t.length,l=r.x,g=r.y,c=e?n(t.area/e):0;if(e==r.dx){for((i||c>r.dy)&&(c=r.dy);++a<s;)(o=t[a]).x=l,o.y=g,o.dy=c,l+=o.dx=Math.min(r.x+r.dx-l,c?n(o.area/c):0);o.z=!0,o.dx+=r.x+r.dx-l,r.y+=c,r.dy-=c}else{for((i||c>r.dx)&&(c=r.dx);++a<s;)(o=t[a]).x=l,o.y=g,o.dx=c,g+=o.dy=Math.min(r.y+r.dy-g,c?n(o.area/c):0);o.z=!1,o.dy+=r.y+r.dy-g,r.x+=c,r.dx-=c}}function f(t){var n=e||r(t),o=n[0];return o.x=o.y=0,o.value?(o.dx=i[0],o.dy=i[1]):o.dx=o.dy=0,e&&r.revalue(o),c([o],o.dx*o.dy/o.value),(e?h:u)(o),s&&(e=n),n}return f.size=function(t){return arguments.length?(i=t,f):i},f.padding=function(t){if(!arguments.length)return o;function e(e){return oa(e,t)}var r;return a=null==(o=t)?ia:"function"==(r=typeof t)?function(e){var r=t.call(f,e,e.depth);return null==r?ia(e):oa(e,"number"==typeof r?[r,r,r,r]:r)}:"number"===r?(t=[t,t,t,t],e):e,f},f.round=function(t){return arguments.length?(n=t?Math.round:Number,f):n!=Number},f.sticky=function(t){return arguments.length?(s=t,e=null,f):s},f.ratio=function(t){return arguments.length?(g=t,f):g},f.mode=function(t){return arguments.length?(l=t+"",f):l},_o(f,r)},t.random={normal:function(t,e){var r=arguments.length;return r<2&&(e=1),r<1&&(t=0),function(){var r,n,i;do{i=(r=2*Math.random()-1)*r+(n=2*Math.random()-1)*n}while(!i||i>1);return t+e*r*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var r=t.random.irwinHall(e);return function(){return r()/e}},irwinHall:function(t){return function(){for(var e=0,r=0;r<t;r++)e+=Math.random();return e}}},t.scale={};var ua={floor:S,ceil:S};function ha(e,r,n,i){var o=[],a=[],s=0,l=Math.min(e.length,r.length)-1;for(e[l]<e[0]&&(e=e.slice().reverse(),r=r.slice().reverse());++s<=l;)o.push(n(e[s-1],e[s])),a.push(i(r[s-1],r[s]));return function(r){var n=t.bisect(e,r,1,l)-1;return a[n](o[n](r))}}function da(e,r){return t.rebind(e,r,"range","rangeRound","interpolate","clamp")}function Aa(t,e){return ga(t,ca(fa(t,e)[2])),ga(t,ca(fa(t,e)[2])),t}function fa(t,e){null==e&&(e=10);var r=aa(t),n=r[1]-r[0],i=Math.pow(10,Math.floor(Math.log(n/e)/Math.LN10)),o=e/n*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),r[0]=Math.ceil(r[0]/i)*i,r[1]=Math.floor(r[1]/i)*i+.5*i,r[2]=i,r}function Ca(e,r){return t.range.apply(t,fa(e,r))}function pa(e,r,n){var i=fa(e,r);if(n){var o=Oe.exec(n);if(o.shift(),"s"===o[8]){var a=t.formatPrefix(Math.max(I(i[0]),I(i[1])));return o[7]||(o[7]="."+va(a.scale(i[2]))),o[8]="f",n=t.format(o.join("")),function(t){return n(a.scale(t))+a.symbol}}o[7]||(o[7]="."+function(t,e){var r=va(e[2]);return t in Ia?Math.abs(r-va(Math.max(I(e[0]),I(e[1]))))+ +("e"!==t):r-2*("%"===t)}(o[8],i)),n=o.join("")}else n=",."+va(i[2])+"f";return t.format(n)}t.scale.linear=function(){return function t(e,r,n,i){var o,a;function s(){var t=Math.min(e.length,r.length)>2?ha:la,s=i?Ao:ho;return o=t(e,r,s,n),a=t(r,e,s,Hi),l}function l(t){return o(t)}l.invert=function(t){return a(t)};l.domain=function(t){return arguments.length?(e=t.map(Number),s()):e};l.range=function(t){return arguments.length?(r=t,s()):r};l.rangeRound=function(t){return l.range(t).interpolate(oo)};l.clamp=function(t){return arguments.length?(i=t,s()):i};l.interpolate=function(t){return arguments.length?(n=t,s()):n};l.ticks=function(t){return Ca(e,t)};l.tickFormat=function(t,r){return pa(e,t,r)};l.nice=function(t){return Aa(e,t),s()};l.copy=function(){return t(e,r,n,i)};return s()}([0,1],[0,1],Hi,!1)};var Ia={s:1,g:1,p:1,r:1,e:1};function va(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}t.scale.log=function(){return function e(r,n,i,o){function a(t){return(i?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function s(t){return i?Math.pow(n,t):-Math.pow(n,-t)}function l(t){return r(a(t))}l.invert=function(t){return s(r.invert(t))};l.domain=function(t){return arguments.length?(i=t[0]>=0,r.domain((o=t.map(Number)).map(a)),l):o};l.base=function(t){return arguments.length?(n=+t,r.domain(o.map(a)),l):n};l.nice=function(){var t=ga(o.map(a),i?Math:ya);return r.domain(t),o=t.map(s),l};l.ticks=function(){var t=aa(o),e=[],r=t[0],l=t[1],g=Math.floor(a(r)),c=Math.ceil(a(l)),u=n%1?2:n;if(isFinite(c-g)){if(i){for(;g<c;g++)for(var h=1;h<u;h++)e.push(s(g)*h);e.push(s(g))}else for(e.push(s(g));g++<c;)for(var h=u-1;h>0;h--)e.push(s(g)*h);for(g=0;e[g]<r;g++);for(c=e.length;e[c-1]>l;c--);e=e.slice(g,c)}return e};l.tickFormat=function(e,r){if(!arguments.length)return ma;arguments.length<2?r=ma:"function"!=typeof r&&(r=t.format(r));var i=Math.max(1,n*e/l.ticks().length);return function(t){var e=t/s(Math.round(a(t)));return e*n<n-.5&&(e*=n),e<=i?r(t):""}};l.copy=function(){return e(r.copy(),n,i,o)};return da(l,r)}(t.scale.linear().domain([0,1]),10,!0,[1,10])};var ma=t.format(".0e"),ya={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function ba(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}t.scale.pow=function(){return function t(e,r,n){var i=ba(r),o=ba(1/r);function a(t){return e(i(t))}a.invert=function(t){return o(e.invert(t))};a.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),a):n};a.ticks=function(t){return Ca(n,t)};a.tickFormat=function(t,e){return pa(n,t,e)};a.nice=function(t){return a.domain(Aa(n,t))};a.exponent=function(t){return arguments.length?(i=ba(r=t),o=ba(1/r),e.domain(n.map(i)),a):r};a.copy=function(){return t(e.copy(),r,n)};return da(a,e)}(t.scale.linear(),1,[0,1])},t.scale.sqrt=function(){return t.scale.pow().exponent(.5)},t.scale.ordinal=function(){return function e(r,n){var i,o,a;function s(t){return o[((i.get(t)||("range"===n.t?i.set(t,r.push(t)):NaN))-1)%o.length]}function l(e,n){return t.range(r.length).map(function(t){return e+n*t})}s.domain=function(t){if(!arguments.length)return r;r=[],i=new m;for(var e,o=-1,a=t.length;++o<a;)i.has(e=t[o])||i.set(e,r.push(e));return s[n.t].apply(s,n.a)};s.range=function(t){return arguments.length?(o=t,a=0,n={t:"range",a:arguments},s):o};s.rangePoints=function(t,e){arguments.length<2&&(e=0);var i=t[0],g=t[1],c=r.length<2?(i=(i+g)/2,0):(g-i)/(r.length-1+e);return o=l(i+c*e/2,c),a=0,n={t:"rangePoints",a:arguments},s};s.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var i=t[0],g=t[1],c=r.length<2?(i=g=Math.round((i+g)/2),0):(g-i)/(r.length-1+e)|0;return o=l(i+Math.round(c*e/2+(g-i-(r.length-1+e)*c)/2),c),a=0,n={t:"rangeRoundPoints",a:arguments},s};s.rangeBands=function(t,e,i){arguments.length<2&&(e=0),arguments.length<3&&(i=e);var g=t[1]<t[0],c=t[g-0],u=t[1-g],h=(u-c)/(r.length-e+2*i);return o=l(c+h*i,h),g&&o.reverse(),a=h*(1-e),n={t:"rangeBands",a:arguments},s};s.rangeRoundBands=function(t,e,i){arguments.length<2&&(e=0),arguments.length<3&&(i=e);var g=t[1]<t[0],c=t[g-0],u=t[1-g],h=Math.floor((u-c)/(r.length-e+2*i));return o=l(c+Math.round((u-c-(r.length-e)*h)/2),h),g&&o.reverse(),a=Math.round(h*(1-e)),n={t:"rangeRoundBands",a:arguments},s};s.rangeBand=function(){return a};s.rangeExtent=function(){return aa(n.a[0])};s.copy=function(){return e(r,n)};return s.domain(r)}([],{t:"range",a:[[]]})},t.scale.category10=function(){return t.scale.ordinal().range(xa)},t.scale.category20=function(){return t.scale.ordinal().range(_a)},t.scale.category20b=function(){return t.scale.ordinal().range(wa)},t.scale.category20c=function(){return t.scale.ordinal().range(ka)};var xa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(se),_a=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(se),wa=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(se),ka=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(se);function Ta(){return 0}t.scale.quantile=function(){return function e(r,n){var i;function o(){var e=0,o=n.length;for(i=[];++e<o;)i[e-1]=t.quantile(r,e/o);return a}function a(e){if(!isNaN(e=+e))return n[t.bisect(i,e)]}a.domain=function(t){return arguments.length?(r=t.map(d).filter(A).sort(h),o()):r};a.range=function(t){return arguments.length?(n=t,o()):n};a.quantiles=function(){return i};a.invertExtent=function(t){return(t=n.indexOf(t))<0?[NaN,NaN]:[t>0?i[t-1]:r[0],t<i.length?i[t]:r[r.length-1]]};a.copy=function(){return e(r,n)};return o()}([],[])},t.scale.quantize=function(){return function t(e,r,n){var i,o;function a(t){return n[Math.max(0,Math.min(o,Math.floor(i*(t-e))))]}function s(){return i=n.length/(r-e),o=n.length-1,a}a.domain=function(t){return arguments.length?(e=+t[0],r=+t[t.length-1],s()):[e,r]};a.range=function(t){return arguments.length?(n=t,s()):n};a.invertExtent=function(t){return[t=(t=n.indexOf(t))<0?NaN:t/i+e,t+1/i]};a.copy=function(){return t(e,r,n)};return s()}(0,1,[0,1])},t.scale.threshold=function(){return function e(r,n){function i(e){if(e<=e)return n[t.bisect(r,e)]}i.domain=function(t){return arguments.length?(r=t,i):r};i.range=function(t){return arguments.length?(n=t,i):n};i.invertExtent=function(t){return t=n.indexOf(t),[r[t-1],r[t]]};i.copy=function(){return e(r,n)};return i}([.5],[0,1])},t.scale.identity=function(){return function t(e){function r(t){return+t}r.invert=r;r.domain=r.range=function(t){return arguments.length?(e=t.map(r),r):e};r.ticks=function(t){return Ca(e,t)};r.tickFormat=function(t,r){return pa(e,t,r)};r.copy=function(){return t(e)};return r}([0,1])},t.svg={},t.svg.arc=function(){var t=Ea,e=Oa,r=Ta,n=Ma,i=Sa,o=Ra,a=Da;function s(){var s=Math.max(0,+t.apply(this,arguments)),g=Math.max(0,+e.apply(this,arguments)),c=i.apply(this,arguments)-Mt,u=o.apply(this,arguments)-Mt,h=Math.abs(u-c),d=c>u?0:1;if(g<s&&(A=g,g=s,s=A),h>=Tt)return l(g,d)+(s?l(s,1-d):"")+"Z";var A,f,C,p,I,v,m,y,b,x,_,w,k=0,T=0,M=[];if((p=(+a.apply(this,arguments)||0)/2)&&(C=n===Ma?Math.sqrt(s*s+g*g):+n.apply(this,arguments),d||(T*=-1),g&&(T=Lt(C/g*Math.sin(p))),s&&(k=Lt(C/s*Math.sin(p)))),g){I=g*Math.cos(c+T),v=g*Math.sin(c+T),m=g*Math.cos(u-T),y=g*Math.sin(u-T);var E=Math.abs(u-c-2*T)<=wt?0:1;if(T&&La(I,v,m,y)===d^E){var O=(c+u)/2;I=g*Math.cos(O),v=g*Math.sin(O),m=y=null}}else I=v=0;if(s){b=s*Math.cos(u-k),x=s*Math.sin(u-k),_=s*Math.cos(c+k),w=s*Math.sin(c+k);var S=Math.abs(c-u+2*k)<=wt?0:1;if(k&&La(b,x,_,w)===1-d^S){var R=(c+u)/2;b=s*Math.cos(R),x=s*Math.sin(R),_=w=null}}else b=x=0;if(h>xt&&(A=Math.min(Math.abs(g-s)/2,+r.apply(this,arguments)))>.001){f=s<g^d?0:1;var D=A,L=A;if(h<wt){var P=null==_?[b,x]:null==m?[I,v]:oi([I,v],[_,w],[m,y],[b,x]),N=I-P[0],z=v-P[1],F=m-P[0],B=y-P[1],j=1/Math.sin(Math.acos((N*F+z*B)/(Math.sqrt(N*N+z*z)*Math.sqrt(F*F+B*B)))/2),V=Math.sqrt(P[0]*P[0]+P[1]*P[1]);L=Math.min(A,(s-V)/(j-1)),D=Math.min(A,(g-V)/(j+1))}if(null!=m){var G=Pa(null==_?[b,x]:[_,w],[I,v],g,D,d),U=Pa([m,y],[b,x],g,D,d);A===D?M.push("M",G[0],"A",D,",",D," 0 0,",f," ",G[1],"A",g,",",g," 0 ",1-d^La(G[1][0],G[1][1],U[1][0],U[1][1]),",",d," ",U[1],"A",D,",",D," 0 0,",f," ",U[0]):M.push("M",G[0],"A",D,",",D," 0 1,",f," ",U[0])}else M.push("M",I,",",v);if(null!=_){var Z=Pa([I,v],[_,w],s,-L,d),H=Pa([b,x],null==m?[I,v]:[m,y],s,-L,d);A===L?M.push("L",H[0],"A",L,",",L," 0 0,",f," ",H[1],"A",s,",",s," 0 ",d^La(H[1][0],H[1][1],Z[1][0],Z[1][1]),",",1-d," ",Z[1],"A",L,",",L," 0 0,",f," ",Z[0]):M.push("L",H[0],"A",L,",",L," 0 0,",f," ",Z[0])}else M.push("L",b,",",x)}else M.push("M",I,",",v),null!=m&&M.push("A",g,",",g," 0 ",E,",",d," ",m,",",y),M.push("L",b,",",x),null!=_&&M.push("A",s,",",s," 0 ",S,",",1-d," ",_,",",w);return M.push("Z"),M.join("")}function l(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return s.innerRadius=function(e){return arguments.length?(t=Ce(e),s):t},s.outerRadius=function(t){return arguments.length?(e=Ce(t),s):e},s.cornerRadius=function(t){return arguments.length?(r=Ce(t),s):r},s.padRadius=function(t){return arguments.length?(n=t==Ma?Ma:Ce(t),s):n},s.startAngle=function(t){return arguments.length?(i=Ce(t),s):i},s.endAngle=function(t){return arguments.length?(o=Ce(t),s):o},s.padAngle=function(t){return arguments.length?(a=Ce(t),s):a},s.centroid=function(){var r=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,n=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Mt;return[Math.cos(n)*r,Math.sin(n)*r]},s};var Ma="auto";function Ea(t){return t.innerRadius}function Oa(t){return t.outerRadius}function Sa(t){return t.startAngle}function Ra(t){return t.endAngle}function Da(t){return t&&t.padAngle}function La(t,e,r,n){return(t-r)*e-(e-n)*t>0?0:1}function Pa(t,e,r,n,i){var o=t[0]-e[0],a=t[1]-e[1],s=(i?n:-n)/Math.sqrt(o*o+a*a),l=s*a,g=-s*o,c=t[0]+l,u=t[1]+g,h=e[0]+l,d=e[1]+g,A=(c+h)/2,f=(u+d)/2,C=h-c,p=d-u,I=C*C+p*p,v=r-n,m=c*d-h*u,y=(p<0?-1:1)*Math.sqrt(Math.max(0,v*v*I-m*m)),b=(m*p-C*y)/I,x=(-m*C-p*y)/I,_=(m*p+C*y)/I,w=(-m*C+p*y)/I,k=b-A,T=x-f,M=_-A,E=w-f;return k*k+T*T>M*M+E*E&&(b=_,x=w),[[b-l,x-g],[b*r/v,x*r/v]]}function Na(t){var e=$n,r=ti,n=Wr,i=Fa,o=i.key,a=.7;function s(o){var s,l=[],g=[],c=-1,u=o.length,h=Ce(e),d=Ce(r);function A(){l.push("M",i(t(g),a))}for(;++c<u;)n.call(this,s=o[c],c)?g.push([+h.call(this,s,c),+d.call(this,s,c)]):g.length&&(A(),g=[]);return g.length&&A(),l.length?l.join(""):null}return s.x=function(t){return arguments.length?(e=t,s):e},s.y=function(t){return arguments.length?(r=t,s):r},s.defined=function(t){return arguments.length?(n=t,s):n},s.interpolate=function(t){return arguments.length?(o="function"==typeof t?i=t:(i=za.get(t)||Fa).key,s):o},s.tension=function(t){return arguments.length?(a=t,s):a},s}t.svg.line=function(){return Na(S)};var za=t.map({linear:Fa,"linear-closed":Ba,step:function(t){var e=0,r=t.length,n=t[0],i=[n[0],",",n[1]];for(;++e<r;)i.push("H",(n[0]+(n=t[e])[0])/2,"V",n[1]);r>1&&i.push("H",n[0]);return i.join("")},"step-before":ja,"step-after":Va,basis:Za,"basis-open":function(t){if(t.length<4)return Fa(t);var e,r=[],n=-1,i=t.length,o=[0],a=[0];for(;++n<3;)e=t[n],o.push(e[0]),a.push(e[1]);r.push(Ha(Xa,o)+","+Ha(Xa,a)),--n;for(;++n<i;)e=t[n],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),qa(r,o,a);return r.join("")},"basis-closed":function(t){var e,r,n=-1,i=t.length,o=i+4,a=[],s=[];for(;++n<4;)r=t[n%i],a.push(r[0]),s.push(r[1]);e=[Ha(Xa,a),",",Ha(Xa,s)],--n;for(;++n<o;)r=t[n%i],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),qa(e,a,s);return e.join("")},bundle:function(t,e){var r=t.length-1;if(r)for(var n,i,o=t[0][0],a=t[0][1],s=t[r][0]-o,l=t[r][1]-a,g=-1;++g<=r;)n=t[g],i=g/r,n[0]=e*n[0]+(1-e)*(o+i*s),n[1]=e*n[1]+(1-e)*(a+i*l);return Za(t)},cardinal:function(t,e){return t.length<3?Fa(t):t[0]+Ga(t,Ua(t,e))},"cardinal-open":function(t,e){return t.length<4?Fa(t):t[1]+Ga(t.slice(1,-1),Ua(t,e))},"cardinal-closed":function(t,e){return t.length<3?Ba(t):t[0]+Ga((t.push(t[0]),t),Ua([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Fa(t):t[0]+Ga(t,function(t){var e,r,n,i,o=[],a=function(t){var e=0,r=t.length-1,n=[],i=t[0],o=t[1],a=n[0]=Qa(i,o);for(;++e<r;)n[e]=(a+(a=Qa(i=o,o=t[e+1])))/2;return n[e]=a,n}(t),s=-1,l=t.length-1;for(;++s<l;)e=Qa(t[s],t[s+1]),I(e)<xt?a[s]=a[s+1]=0:(r=a[s]/e,n=a[s+1]/e,(i=r*r+n*n)>9&&(i=3*e/Math.sqrt(i),a[s]=i*r,a[s+1]=i*n));s=-1;for(;++s<=l;)i=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}(t))}});function Fa(t){return t.length>1?t.join("L"):t+"Z"}function Ba(t){return t.join("L")+"Z"}function ja(t){for(var e=0,r=t.length,n=t[0],i=[n[0],",",n[1]];++e<r;)i.push("V",(n=t[e])[1],"H",n[0]);return i.join("")}function Va(t){for(var e=0,r=t.length,n=t[0],i=[n[0],",",n[1]];++e<r;)i.push("H",(n=t[e])[0],"V",n[1]);return i.join("")}function Ga(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Fa(t);var r=t.length!=e.length,n="",i=t[0],o=t[1],a=e[0],s=a,l=1;if(r&&(n+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),e.length>1){s=e[1],o=t[l],l++,n+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var g=2;g<e.length;g++,l++)o=t[l],s=e[g],n+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(r){var c=t[l];n+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return n}function Ua(t,e){for(var r,n=[],i=(1-e)/2,o=t[0],a=t[1],s=1,l=t.length;++s<l;)r=o,o=a,a=t[s],n.push([i*(a[0]-r[0]),i*(a[1]-r[1])]);return n}function Za(t){if(t.length<3)return Fa(t);var e=1,r=t.length,n=t[0],i=n[0],o=n[1],a=[i,i,i,(n=t[1])[0]],s=[o,o,o,n[1]],l=[i,",",o,"L",Ha(Xa,a),",",Ha(Xa,s)];for(t.push(t[r-1]);++e<=r;)n=t[e],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),qa(l,a,s);return t.pop(),l.push("L",n),l.join("")}function Ha(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}za.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Wa=[0,2/3,1/3,0],Ya=[0,1/3,2/3,0],Xa=[0,1/6,2/3,1/6];function qa(t,e,r){t.push("C",Ha(Wa,e),",",Ha(Wa,r),",",Ha(Ya,e),",",Ha(Ya,r),",",Ha(Xa,e),",",Ha(Xa,r))}function Qa(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ka(t){for(var e,r,n,i=-1,o=t.length;++i<o;)r=(e=t[i])[0],n=e[1]-Mt,e[0]=r*Math.cos(n),e[1]=r*Math.sin(n);return t}function Ja(t){var e=$n,r=$n,n=0,i=ti,o=Wr,a=Fa,s=a.key,l=a,g="L",c=.7;function u(s){var u,h,d,A=[],f=[],C=[],p=-1,I=s.length,v=Ce(e),m=Ce(n),y=e===r?function(){return h}:Ce(r),b=n===i?function(){return d}:Ce(i);function x(){A.push("M",a(t(C),c),g,l(t(f.reverse()),c),"Z")}for(;++p<I;)o.call(this,u=s[p],p)?(f.push([h=+v.call(this,u,p),d=+m.call(this,u,p)]),C.push([+y.call(this,u,p),+b.call(this,u,p)])):f.length&&(x(),f=[],C=[]);return f.length&&x(),A.length?A.join(""):null}return u.x=function(t){return arguments.length?(e=r=t,u):r},u.x0=function(t){return arguments.length?(e=t,u):e},u.x1=function(t){return arguments.length?(r=t,u):r},u.y=function(t){return arguments.length?(n=i=t,u):i},u.y0=function(t){return arguments.length?(n=t,u):n},u.y1=function(t){return arguments.length?(i=t,u):i},u.defined=function(t){return arguments.length?(o=t,u):o},u.interpolate=function(t){return arguments.length?(s="function"==typeof t?a=t:(a=za.get(t)||Fa).key,l=a.reverse||a,g=a.closed?"M":"L",u):s},u.tension=function(t){return arguments.length?(c=t,u):c},u}function $a(t){return t.radius}function ts(t){return[t.x,t.y]}function es(){return 64}function rs(){return"circle"}function ns(t){var e=Math.sqrt(t/wt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}t.svg.line.radial=function(){var t=Na(Ka);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},ja.reverse=Va,Va.reverse=ja,t.svg.area=function(){return Ja(S)},t.svg.area.radial=function(){var t=Ja(Ka);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},t.svg.chord=function(){var t=Bn,e=jn,r=$a,n=Sa,i=Ra;function o(r,n){var i,o,g=a(this,t,r,n),c=a(this,e,r,n);return"M"+g.p0+s(g.r,g.p1,g.a1-g.a0)+(o=c,(i=g).a0==o.a0&&i.a1==o.a1?l(g.r,g.p1,g.r,g.p0):l(g.r,g.p1,c.r,c.p0)+s(c.r,c.p1,c.a1-c.a0)+l(c.r,c.p1,g.r,g.p0))+"Z"}function a(t,e,o,a){var s=e.call(t,o,a),l=r.call(t,s,a),g=n.call(t,s,a)-Mt,c=i.call(t,s,a)-Mt;return{r:l,a0:g,a1:c,p0:[l*Math.cos(g),l*Math.sin(g)],p1:[l*Math.cos(c),l*Math.sin(c)]}}function s(t,e,r){return"A"+t+","+t+" 0 "+ +(r>wt)+",1 "+e}function l(t,e,r,n){return"Q 0,0 "+n}return o.radius=function(t){return arguments.length?(r=Ce(t),o):r},o.source=function(e){return arguments.length?(t=Ce(e),o):t},o.target=function(t){return arguments.length?(e=Ce(t),o):e},o.startAngle=function(t){return arguments.length?(n=Ce(t),o):n},o.endAngle=function(t){return arguments.length?(i=Ce(t),o):i},o},t.svg.diagonal=function(){var t=Bn,e=jn,r=ts;function n(n,i){var o=t.call(this,n,i),a=e.call(this,n,i),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(l=l.map(r))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return n.source=function(e){return arguments.length?(t=Ce(e),n):t},n.target=function(t){return arguments.length?(e=Ce(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),r=ts,n=e.projection;return e.projection=function(t){return arguments.length?n(function(t){return function(){var e=t.apply(this,arguments),r=e[0],n=e[1]-Mt;return[r*Math.cos(n),r*Math.sin(n)]}}(r=t)):r},e},t.svg.symbol=function(){var t=rs,e=es;function r(r,n){return(is.get(t.call(this,r,n))||ns)(e.call(this,r,n))}return r.type=function(e){return arguments.length?(t=Ce(e),r):t},r.size=function(t){return arguments.length?(e=Ce(t),r):e},r};var is=t.map({circle:ns,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*as)),r=e*as;return"M0,"+-e+"L"+r+",0 0,"+e+" "+-r+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/os),r=e*os/2;return"M0,"+r+"L"+e+","+-r+" "+-e+","+-r+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/os),r=e*os/2;return"M0,"+-r+"L"+e+","+r+" "+-e+","+r+"Z"}});t.svg.symbolTypes=is.keys();var os=Math.sqrt(3),as=Math.tan(30*Et);Y.transition=function(t){for(var e,r,n=cs||++ds,i=Cs(t),o=[],a=us||{time:Date.now(),ease:to,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(e=[]);for(var g=this[s],c=-1,u=g.length;++c<u;)(r=g[c])&&ps(r,c,i,n,a),e.push(r)}return gs(o,i,n)},Y.interrupt=function(t){return this.each(null==t?ss:ls(Cs(t)))};var ss=ls(Cs());function ls(t){return function(){var e,r,n;(e=this[t])&&(n=e[r=e.active])&&(n.timer.c=null,n.timer.t=NaN,--e.count?delete e[r]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function gs(t,e,r){return G(t,hs),t.namespace=e,t.id=r,t}var cs,us,hs=[],ds=0;function As(t,e,r,n){var i=t.id,o=t.namespace;return ct(t,"function"==typeof r?function(t,a,s){t[o][i].tween.set(e,n(r.call(t,t.__data__,a,s)))}:(r=n(r),function(t){t[o][i].tween.set(e,r)}))}function fs(t){return null==t&&(t=""),function(){this.textContent=t}}function Cs(t){return null==t?"__transition__":"__transition_"+t+"__"}function ps(t,e,r,n,i){var o,a,s,l,g,c=t[r]||(t[r]={active:0,count:0}),u=c[n];function h(r){var i=c.active,h=c[i];for(var A in h&&(h.timer.c=null,h.timer.t=NaN,--c.count,delete c[i],h.event&&h.event.interrupt.call(t,t.__data__,h.index)),c)if(+A<n){var f=c[A];f.timer.c=null,f.timer.t=NaN,--c.count,delete c[A]}a.c=d,_e(function(){return a.c&&d(r||1)&&(a.c=null,a.t=NaN),1},0,o),c.active=n,u.event&&u.event.start.call(t,t.__data__,e),g=[],u.tween.forEach(function(r,n){(n=n.call(t,t.__data__,e))&&g.push(n)}),l=u.ease,s=u.duration}function d(i){for(var o=i/s,a=l(o),h=g.length;h>0;)g[--h].call(t,a);if(o>=1)return u.event&&u.event.end.call(t,t.__data__,e),--c.count?delete c[n]:delete t[r],1}u||(o=i.time,a=_e(function(t){var e=u.delay;if(a.t=e+o,e<=t)return h(t-e);a.c=h},0,o),u=c[n]={tween:new m,time:o,timer:a,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++c.count)}hs.call=Y.call,hs.empty=Y.empty,hs.node=Y.node,hs.size=Y.size,t.transition=function(e,r){return e&&e.transition?cs?e.transition(r):e:t.selection().transition(e)},t.transition.prototype=hs,hs.select=function(t){var e,r,n,i=this.id,o=this.namespace,a=[];t=X(t);for(var s=-1,l=this.length;++s<l;){a.push(e=[]);for(var g=this[s],c=-1,u=g.length;++c<u;)(n=g[c])&&(r=t.call(n,n.__data__,c,s))?("__data__"in n&&(r.__data__=n.__data__),ps(r,c,o,i,n[o][i]),e.push(r)):e.push(null)}return gs(a,o,i)},hs.selectAll=function(t){var e,r,n,i,o,a=this.id,s=this.namespace,l=[];t=q(t);for(var g=-1,c=this.length;++g<c;)for(var u=this[g],h=-1,d=u.length;++h<d;)if(n=u[h]){o=n[s][a],r=t.call(n,n.__data__,h,g),l.push(e=[]);for(var A=-1,f=r.length;++A<f;)(i=r[A])&&ps(i,A,s,a,o),e.push(i)}return gs(l,s,a)},hs.filter=function(t){var e,r,n=[];"function"!=typeof t&&(t=gt(t));for(var i=0,o=this.length;i<o;i++){n.push(e=[]);for(var a,s=0,l=(a=this[i]).length;s<l;s++)(r=a[s])&&t.call(r,r.__data__,s,i)&&e.push(r)}return gs(n,this.namespace,this.id)},hs.tween=function(t,e){var r=this.id,n=this.namespace;return arguments.length<2?this.node()[n][r].tween.get(t):ct(this,null==e?function(e){e[n][r].tween.remove(t)}:function(i){i[n][r].tween.set(t,e)})},hs.attr=function(e,r){if(arguments.length<2){for(r in e)this.attr(r,e[r]);return this}var n="transform"==e?uo:Hi,i=t.ns.qualify(e);function o(){this.removeAttribute(i)}function a(){this.removeAttributeNS(i.space,i.local)}return As(this,"attr."+e,r,i.local?function(t){return null==t?a:(t+="",function(){var e,r=this.getAttributeNS(i.space,i.local);return r!==t&&(e=n(r,t),function(t){this.setAttributeNS(i.space,i.local,e(t))})})}:function(t){return null==t?o:(t+="",function(){var e,r=this.getAttribute(i);return r!==t&&(e=n(r,t),function(t){this.setAttribute(i,e(t))})})})},hs.attrTween=function(e,r){var n=t.ns.qualify(e);return this.tween("attr."+e,n.local?function(t,e){var i=r.call(this,t,e,this.getAttributeNS(n.space,n.local));return i&&function(t){this.setAttributeNS(n.space,n.local,i(t))}}:function(t,e){var i=r.call(this,t,e,this.getAttribute(n));return i&&function(t){this.setAttribute(n,i(t))}})},hs.style=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){for(r in n<2&&(e=""),t)this.style(r,t[r],e);return this}r=""}function i(){this.style.removeProperty(t)}return As(this,"style."+t,e,function(e){return null==e?i:(e+="",function(){var n,i=a(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(n=Hi(i,e),function(e){this.style.setProperty(t,n(e),r)})})})},hs.styleTween=function(t,e,r){return arguments.length<3&&(r=""),this.tween("style."+t,function(n,i){var o=e.call(this,n,i,a(this).getComputedStyle(this,null).getPropertyValue(t));return o&&function(e){this.style.setProperty(t,o(e),r)}})},hs.text=function(t){return As(this,"text",t,fs)},hs.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},hs.ease=function(e){var r=this.id,n=this.namespace;return arguments.length<1?this.node()[n][r].ease:("function"!=typeof e&&(e=t.ease.apply(t,arguments)),ct(this,function(t){t[n][r].ease=e}))},hs.delay=function(t){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].delay:ct(this,"function"==typeof t?function(n,i,o){n[r][e].delay=+t.call(n,n.__data__,i,o)}:(t=+t,function(n){n[r][e].delay=t}))},hs.duration=function(t){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].duration:ct(this,"function"==typeof t?function(n,i,o){n[r][e].duration=Math.max(1,t.call(n,n.__data__,i,o))}:(t=Math.max(1,t),function(n){n[r][e].duration=t}))},hs.each=function(e,r){var n=this.id,i=this.namespace;if(arguments.length<2){var o=us,a=cs;try{cs=n,ct(this,function(t,r,o){us=t[i][n],e.call(t,t.__data__,r,o)})}finally{us=o,cs=a}}else ct(this,function(o){var a=o[i][n];(a.event||(a.event=t.dispatch("start","end","interrupt"))).on(e,r)});return this},hs.transition=function(){for(var t,e,r,n=this.id,i=++ds,o=this.namespace,a=[],s=0,l=this.length;s<l;s++){a.push(t=[]);for(var g,c=0,u=(g=this[s]).length;c<u;c++)(e=g[c])&&ps(e,c,o,i,{time:(r=e[o][n]).time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration}),t.push(e)}return gs(a,o,i)},t.svg.axis=function(){var e,r=t.scale.linear(),i=Is,o=6,a=6,s=3,l=[10],g=null;function c(n){n.each(function(){var n,c=t.select(this),u=this.__chart__||r,h=this.__chart__=r.copy(),d=null==g?h.ticks?h.ticks.apply(h,l):h.domain():g,A=null==e?h.tickFormat?h.tickFormat.apply(h,l):S:e,f=c.selectAll(".tick").data(d,h),C=f.enter().insert("g",".domain").attr("class","tick").style("opacity",xt),p=t.transition(f.exit()).style("opacity",xt).remove(),I=t.transition(f.order()).style("opacity",1),v=Math.max(o,0)+s,m=sa(h),y=c.selectAll(".domain").data([0]),b=(y.enter().append("path").attr("class","domain"),t.transition(y));C.append("line"),C.append("text");var x,_,w,k,T=C.select("line"),M=I.select("line"),E=f.select("text").text(A),O=C.select("text"),R=I.select("text"),D="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(n=ms,x="x",w="y",_="x2",k="y2",E.attr("dy",D<0?"0em":".71em").style("text-anchor","middle"),b.attr("d","M"+m[0]+","+D*a+"V0H"+m[1]+"V"+D*a)):(n=ys,x="y",w="x",_="y2",k="x2",E.attr("dy",".32em").style("text-anchor",D<0?"end":"start"),b.attr("d","M"+D*a+","+m[0]+"H0V"+m[1]+"H"+D*a)),T.attr(k,D*o),O.attr(w,D*v),M.attr(_,0).attr(k,D*o),R.attr(x,0).attr(w,D*v),h.rangeBand){var L=h,P=L.rangeBand()/2;u=h=function(t){return L(t)+P}}else u.rangeBand?u=h:p.call(n,h,u);C.call(n,u,h),I.call(n,h,h)})}return c.scale=function(t){return arguments.length?(r=t,c):r},c.orient=function(t){return arguments.length?(i=t in vs?t+"":Is,c):i},c.ticks=function(){return arguments.length?(l=n(arguments),c):l},c.tickValues=function(t){return arguments.length?(g=t,c):g},c.tickFormat=function(t){return arguments.length?(e=t,c):e},c.tickSize=function(t){var e=arguments.length;return e?(o=+t,a=+arguments[e-1],c):o},c.innerTickSize=function(t){return arguments.length?(o=+t,c):o},c.outerTickSize=function(t){return arguments.length?(a=+t,c):a},c.tickPadding=function(t){return arguments.length?(s=+t,c):s},c.tickSubdivide=function(){return arguments.length&&c},c};var Is="bottom",vs={top:1,right:1,bottom:1,left:1};function ms(t,e,r){t.attr("transform",function(t){var n=e(t);return"translate("+(isFinite(n)?n:r(t))+",0)"})}function ys(t,e,r){t.attr("transform",function(t){var n=e(t);return"translate(0,"+(isFinite(n)?n:r(t))+")"})}t.svg.brush=function(){var e,r,n=j(h,"brushstart","brush","brushend"),i=null,o=null,s=[0,0],l=[0,0],g=!0,c=!0,u=xs[0];function h(e){e.each(function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",C).on("touchstart.brush",C),r=e.selectAll(".background").data([0]);r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(u,S);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return bs[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",h.empty()?"none":null);var a,s=t.transition(e),l=t.transition(r);i&&(a=sa(i),l.attr("x",a[0]).attr("width",a[1]-a[0]),A(s)),o&&(a=sa(o),l.attr("y",a[0]).attr("height",a[1]-a[0]),f(s)),d(s)})}function d(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+s[+/e$/.test(t)]+","+l[+/^s/.test(t)]+")"})}function A(t){t.select(".extent").attr("x",s[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function f(t){t.select(".extent").attr("y",l[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function C(){var u,C,p=this,I=t.select(t.event.target),v=n.of(p,arguments),m=t.select(p),y=I.datum(),b=!/^(n|s)$/.test(y)&&i,x=!/^(e|w)$/.test(y)&&o,_=I.classed("extent"),w=vt(p),k=t.mouse(p),T=t.select(a(p)).on("keydown.brush",function(){32==t.event.keyCode&&(_||(u=null,k[0]-=s[1],k[1]-=l[1],_=2),F())}).on("keyup.brush",function(){32==t.event.keyCode&&2==_&&(k[0]+=s[1],k[1]+=l[1],_=0,F())});if(t.event.changedTouches?T.on("touchmove.brush",O).on("touchend.brush",R):T.on("mousemove.brush",O).on("mouseup.brush",R),m.interrupt().selectAll("*").interrupt(),_)k[0]=s[0]-k[0],k[1]=l[0]-k[1];else if(y){var M=+/w$/.test(y),E=+/^n/.test(y);C=[s[1-M]-k[0],l[1-E]-k[1]],k[0]=s[M],k[1]=l[E]}else t.event.altKey&&(u=k.slice());function O(){var e=t.mouse(p),r=!1;C&&(e[0]+=C[0],e[1]+=C[1]),_||(t.event.altKey?(u||(u=[(s[0]+s[1])/2,(l[0]+l[1])/2]),k[0]=s[+(e[0]<u[0])],k[1]=l[+(e[1]<u[1])]):u=null),b&&S(e,i,0)&&(A(m),r=!0),x&&S(e,o,1)&&(f(m),r=!0),r&&(d(m),v({type:"brush",mode:_?"move":"resize"}))}function S(t,n,i){var o,a,h=sa(n),d=h[0],A=h[1],f=k[i],C=i?l:s,p=C[1]-C[0];if(_&&(d-=f,A-=p+f),o=(i?c:g)?Math.max(d,Math.min(A,t[i])):t[i],_?a=(o+=f)+p:(u&&(f=Math.max(d,Math.min(A,2*u[i]-o))),f<o?(a=o,o=f):a=f),C[0]!=o||C[1]!=a)return i?r=null:e=null,C[0]=o,C[1]=a,!0}function R(){O(),m.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),t.select("body").style("cursor",null),T.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),w(),v({type:"brushend"})}m.style("pointer-events","none").selectAll(".resize").style("display",null),t.select("body").style("cursor",I.style("cursor")),v({type:"brushstart"}),O()}return h.event=function(i){i.each(function(){var i=n.of(this,arguments),o={x:s,y:l,i:e,j:r},a=this.__chart__||o;this.__chart__=o,cs?t.select(this).transition().each("start.brush",function(){e=a.i,r=a.j,s=a.x,l=a.y,i({type:"brushstart"})}).tween("brush:brush",function(){var t=Wi(s,o.x),n=Wi(l,o.y);return e=r=null,function(e){s=o.x=t(e),l=o.y=n(e),i({type:"brush",mode:"resize"})}}).each("end.brush",function(){e=o.i,r=o.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})}):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))})},h.x=function(t){return arguments.length?(u=xs[!(i=t)<<1|!o],h):i},h.y=function(t){return arguments.length?(u=xs[!i<<1|!(o=t)],h):o},h.clamp=function(t){return arguments.length?(i&&o?(g=!!t[0],c=!!t[1]):i?g=!!t:o&&(c=!!t),h):i&&o?[g,c]:i?g:o?c:null},h.extent=function(t){var n,a,g,c,u;return arguments.length?(i&&(n=t[0],a=t[1],o&&(n=n[0],a=a[0]),e=[n,a],i.invert&&(n=i(n),a=i(a)),a<n&&(u=n,n=a,a=u),n==s[0]&&a==s[1]||(s=[n,a])),o&&(g=t[0],c=t[1],i&&(g=g[1],c=c[1]),r=[g,c],o.invert&&(g=o(g),c=o(c)),c<g&&(u=g,g=c,c=u),g==l[0]&&c==l[1]||(l=[g,c])),h):(i&&(e?(n=e[0],a=e[1]):(n=s[0],a=s[1],i.invert&&(n=i.invert(n),a=i.invert(a)),a<n&&(u=n,n=a,a=u))),o&&(r?(g=r[0],c=r[1]):(g=l[0],c=l[1],o.invert&&(g=o.invert(g),c=o.invert(c)),c<g&&(u=g,g=c,c=u))),i&&o?[[n,g],[a,c]]:i?[n,a]:o&&[g,c])},h.clear=function(){return h.empty()||(s=[0,0],l=[0,0],e=r=null),h},h.empty=function(){return!!i&&s[0]==s[1]||!!o&&l[0]==l[1]},t.rebind(h,n,"on")};var bs={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},xs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],_s=De.format=sr.timeFormat,ws=_s.utc,ks=ws("%Y-%m-%dT%H:%M:%S.%LZ");function Ts(t){return t.toISOString()}function Ms(e,r,n){function i(t){return e(t)}function o(e,n){var i=(e[1]-e[0])/n,o=t.bisect(Os,i);return o==Os.length?[r.year,fa(e.map(function(t){return t/31536e6}),n)[2]]:o?r[i/Os[o-1]<Os[o]/i?o-1:o]:[Ds,fa(e,n)[2]]}return i.invert=function(t){return Es(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(Es)},i.nice=function(t,e){var r=i.domain(),n=aa(r),a=null==t?o(n,10):"number"==typeof t&&o(n,t);function s(r){return!isNaN(r)&&!t.range(r,Es(+r+1),e).length}return a&&(t=a[0],e=a[1]),i.domain(ga(r,e>1?{floor:function(e){for(;s(e=t.floor(e));)e=Es(e-1);return e},ceil:function(e){for(;s(e=t.ceil(e));)e=Es(+e+1);return e}}:t))},i.ticks=function(t,e){var r=aa(i.domain()),n=null==t?o(r,10):"number"==typeof t?o(r,t):!t.range&&[{range:t},e];return n&&(t=n[0],e=n[1]),t.range(r[0],Es(+r[1]+1),e<1?1:e)},i.tickFormat=function(){return n},i.copy=function(){return Ms(e.copy(),r,n)},da(i,e)}function Es(t){return new Date(t)}_s.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ts:ks,Ts.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Ts.toString=ks.toString,De.second=ze(function(t){return new Le(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),De.seconds=De.second.range,De.seconds.utc=De.second.utc.range,De.minute=ze(function(t){return new Le(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),De.minutes=De.minute.range,De.minutes.utc=De.minute.utc.range,De.hour=ze(function(t){var e=t.getTimezoneOffset()/60;return new Le(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),De.hours=De.hour.range,De.hours.utc=De.hour.utc.range,De.month=ze(function(t){return(t=De.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),De.months=De.month.range,De.months.utc=De.month.utc.range;var Os=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ss=[[De.second,1],[De.second,5],[De.second,15],[De.second,30],[De.minute,1],[De.minute,5],[De.minute,15],[De.minute,30],[De.hour,1],[De.hour,3],[De.hour,6],[De.hour,12],[De.day,1],[De.day,2],[De.week,1],[De.month,1],[De.month,3],[De.year,1]],Rs=_s.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Wr]]),Ds={range:function(e,r,n){return t.range(Math.ceil(e/n)*n,+r,n).map(Es)},floor:S,ceil:S};Ss.year=De.year,De.scale=function(){return Ms(t.scale.linear(),Ss,Rs)};var Ls=Ss.map(function(t){return[t[0].utc,t[1]]}),Ps=ws.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Wr]]);function Ns(t){return JSON.parse(t.responseText)}function zs(t){var e=i.createRange();return e.selectNode(i.body),e.createContextualFragment(t.responseText)}Ls.year=De.year.utc,De.scale.utc=function(){return Ms(t.scale.linear(),Ls,Ps)},t.text=pe(function(t){return t.responseText}),t.json=function(t,e){return Ie(t,"application/json",Ns,e)},t.html=function(t,e){return Ie(t,"text/html",zs,e)},t.xml=pe(function(t){return t.responseXML}),"object"==typeof e&&e.exports?e.exports=t:this.d3=t}()},{}],75:[function(t,e,r){e.exports=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}},{}],76:[function(t,e,r){"use strict";var n=t("incremental-convex-hull"),i=t("uniq");function o(t,e){this.point=t,this.index=e}function a(t,e){for(var r=t.point,n=e.point,i=r.length,o=0;o<i;++o){var a=n[o]-r[o];if(a)return a}return 0}e.exports=function(t,e){var r=t.length;if(0===r)return[];var s=t[0].length;if(s<1)return[];if(1===s)return function(t,e,r){if(1===t)return r?[[-1,0]]:[];var n=e.map(function(t,e){return[t[0],e]});n.sort(function(t,e){return t[0]-e[0]});for(var i=new Array(t-1),o=1;o<t;++o){var a=n[o-1],s=n[o];i[o-1]=[a[1],s[1]]}r&&i.push([-1,i[0][1]],[i[t-1][1],-1]);return i}(r,t,e);for(var l=new Array(r),g=1,c=0;c<r;++c){for(var u=t[c],h=new Array(s+1),d=0,A=0;A<s;++A){var f=u[A];h[A]=f,d+=f*f}h[s]=d,l[c]=new o(h,c),g=Math.max(d,g)}i(l,a),r=l.length;for(var C=new Array(r+s+1),p=new Array(r+s+1),I=(s+1)*(s+1)*g,v=new Array(s+1),c=0;c<=s;++c)v[c]=0;v[s]=I,C[0]=v.slice(),p[0]=-1;for(var c=0;c<=s;++c){var h=v.slice();h[c]=1,C[c+1]=h,p[c+1]=-1}for(var c=0;c<r;++c){var m=l[c];C[c+s+1]=m.point,p[c+s+1]=m.index}var y=n(C,!1);y=e?y.filter(function(t){for(var e=0,r=0;r<=s;++r){var n=p[t[r]];if(n<0&&++e>=2)return!1;t[r]=n}return!0}):y.filter(function(t){for(var e=0;e<=s;++e){var r=p[t[e]];if(r<0)return!1;t[e]=r}return!0});if(1&s)for(var c=0;c<y.length;++c){var m=y[c],h=m[0];m[0]=m[1],m[1]=h}return y}},{"incremental-convex-hull":232,uniq:713}],77:[function(t,e,r){(function(t){var r=!1;if("undefined"!=typeof Float64Array){var n=new Float64Array(1),i=new Uint32Array(n.buffer);if(n[0]=1,r=!0,1072693248===i[1]){e.exports=function(t){return n[0]=t,[i[0],i[1]]},e.exports.pack=function(t,e){return i[0]=t,i[1]=e,n[0]},e.exports.lo=function(t){return n[0]=t,i[0]},e.exports.hi=function(t){return n[0]=t,i[1]}}else if(1072693248===i[0]){e.exports=function(t){return n[0]=t,[i[1],i[0]]},e.exports.pack=function(t,e){return i[1]=t,i[0]=e,n[0]},e.exports.lo=function(t){return n[0]=t,i[1]},e.exports.hi=function(t){return n[0]=t,i[0]}}else r=!1}if(!r){var o=new t(8);e.exports=function(t){return o.writeDoubleLE(t,0,!0),[o.readUInt32LE(0,!0),o.readUInt32LE(4,!0)]},e.exports.pack=function(t,e){return o.writeUInt32LE(t,0,!0),o.writeUInt32LE(e,4,!0),o.readDoubleLE(0,!0)},e.exports.lo=function(t){return o.writeDoubleLE(t,0,!0),o.readUInt32LE(0,!0)},e.exports.hi=function(t){return o.writeDoubleLE(t,0,!0),o.readUInt32LE(4,!0)}}e.exports.sign=function(t){return e.exports.hi(t)>>>31},e.exports.exponent=function(t){return(e.exports.hi(t)<<1>>>21)-1023},e.exports.fraction=function(t){var r=e.exports.lo(t),n=e.exports.hi(t),i=1048575&n;return 2146435072&n&&(i+=1<<20),[r,i]},e.exports.denormalized=function(t){return!(2146435072&e.exports.hi(t))}}).call(this,t("buffer").Buffer)},{buffer:44}],78:[function(t,e,r){var n=t("abs-svg-path"),i=t("normalize-svg-path"),o={M:"moveTo",C:"bezierCurveTo"};e.exports=function(t,e){t.beginPath(),i(n(e)).forEach(function(e){var r=e[0],n=e.slice(1);t[o[r]].apply(t,n)}),t.closePath()}},{"abs-svg-path":3,"normalize-svg-path":264}],79:[function(t,e,r){e.exports=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],80:[function(t,e,r){"use strict";e.exports=function(t,e){switch(void 0===e&&(e=0),typeof t){case"number":if(t>0)return function(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}(0|t,e);break;case"object":if("number"==typeof t.length)return function t(e,r,n){var i=0|e[n];if(i<=0)return[];var o,a=new Array(i);if(n===e.length-1)for(o=0;o<i;++o)a[o]=r;else for(o=0;o<i;++o)a[o]=t(e,r,n+1);return a}(t,e,0)}return[]}},{}],81:[function(t,e,r){"use strict";function n(t,e,r){r=r||2;var n,s,l,g,c,d,A,C=e&&e.length,p=C?e[0]*r:t.length,I=i(t,0,p,r,!0),v=[];if(!I||I.next===I.prev)return v;if(C&&(I=function(t,e,r,n){var a,s,l,g,c,d=[];for(a=0,s=e.length;a<s;a++)l=e[a]*n,g=a<s-1?e[a+1]*n:t.length,(c=i(t,l,g,n,!1))===c.next&&(c.steiner=!0),d.push(f(c));for(d.sort(u),a=0;a<d.length;a++)h(d[a],r),r=o(r,r.next);return r}(t,e,I,r)),t.length>80*r){n=l=t[0],s=g=t[1];for(var m=r;m<p;m+=r)c=t[m],d=t[m+1],c<n&&(n=c),d<s&&(s=d),c>l&&(l=c),d>g&&(g=d);A=0!==(A=Math.max(l-n,g-s))?1/A:0}return a(I,v,r,n,s,A),v}function i(t,e,r,n,i){var o,a;if(i===M(t,e,r,n)>0)for(o=e;o<r;o+=n)a=w(o,t[o],t[o+1],a);else for(o=r-n;o>=e;o-=n)a=w(o,t[o],t[o+1],a);return a&&v(a,a.next)&&(k(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!v(n,n.next)&&0!==I(n.prev,n,n.next))n=n.next;else{if(k(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function a(t,e,r,n,i,u,h){if(t){!h&&u&&function(t,e,r,n){var i=t;do{null===i.z&&(i.z=A(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,r,n,i,o,a,s,l,g=1;do{for(r=t,t=null,o=null,a=0;r;){for(a++,n=r,s=0,e=0;e<g&&(s++,n=n.nextZ);e++);for(l=g;s>0||l>0&&n;)0!==s&&(0===l||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;r=n}o.nextZ=null,g*=2}while(a>1)}(i)}(t,n,i,u);for(var d,f,C=t;t.prev!==t.next;)if(d=t.prev,f=t.next,u?l(t,n,i,u):s(t))e.push(d.i/r),e.push(t.i/r),e.push(f.i/r),k(t),t=f.next,C=f.next;else if((t=f)===C){h?1===h?a(t=g(o(t),e,r),e,r,n,i,u,2):2===h&&c(t,e,r,n,i,u):a(o(t),e,r,n,i,u,1);break}}}function s(t){var e=t.prev,r=t,n=t.next;if(I(e,r,n)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(C(e.x,e.y,r.x,r.y,n.x,n.y,i.x,i.y)&&I(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function l(t,e,r,n){var i=t.prev,o=t,a=t.next;if(I(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,l=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,g=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,u=A(s,l,e,r,n),h=A(g,c,e,r,n),d=t.prevZ,f=t.nextZ;d&&d.z>=u&&f&&f.z<=h;){if(d!==t.prev&&d!==t.next&&C(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&I(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,f!==t.prev&&f!==t.next&&C(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&I(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;d&&d.z>=u;){if(d!==t.prev&&d!==t.next&&C(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&I(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;f&&f.z<=h;){if(f!==t.prev&&f!==t.next&&C(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&I(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function g(t,e,r){var n=t;do{var i=n.prev,a=n.next.next;!v(i,a)&&m(i,n,n.next,a)&&x(i,a)&&x(a,i)&&(e.push(i.i/r),e.push(n.i/r),e.push(a.i/r),k(n),k(n.next),n=t=a),n=n.next}while(n!==t);return o(n)}function c(t,e,r,n,i,s){var l=t;do{for(var g=l.next.next;g!==l.prev;){if(l.i!==g.i&&p(l,g)){var c=_(l,g);return l=o(l,l.next),c=o(c,c.next),a(l,e,r,n,i,s),void a(c,e,r,n,i,s)}g=g.next}l=l.next}while(l!==t)}function u(t,e){return t.x-e.x}function h(t,e){if(e=function(t,e){var r,n=e,i=t.x,o=t.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(i===a)return r;var l,g=r,c=r.x,u=r.y,h=1/0;n=r;do{i>=n.x&&n.x>=c&&i!==n.x&&C(o<u?i:a,o,c,u,o<u?a:i,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(i-n.x),x(n,t)&&(l<h||l===h&&(n.x>r.x||n.x===r.x&&d(r,n)))&&(r=n,h=l)),n=n.next}while(n!==g);return r}(t,e)){var r=_(e,t);o(e,e.next),o(r,r.next)}}function d(t,e){return I(t.prev,t,e.prev)<0&&I(e.next,t,t.next)<0}function A(t,e,r,n,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,r=t;do{(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next}while(e!==t);return r}function C(t,e,r,n,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(n-s)-(r-a)*(e-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&m(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&(x(t,e)&&x(e,t)&&function(t,e){var r=t,n=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)&&(I(t.prev,t,e.prev)||I(t,e.prev,e))||v(t,e)&&I(t.prev,t,t.next)>0&&I(e.prev,e,e.next)>0)}function I(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function v(t,e){return t.x===e.x&&t.y===e.y}function m(t,e,r,n){var i=b(I(t,e,r)),o=b(I(t,e,n)),a=b(I(r,n,t)),s=b(I(r,n,e));return i!==o&&a!==s||(!(0!==i||!y(t,r,e))||(!(0!==o||!y(t,n,e))||(!(0!==a||!y(r,t,n))||!(0!==s||!y(r,e,n)))))}function y(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function b(t){return t>0?1:t<0?-1:0}function x(t,e){return I(t.prev,t,t.next)<0?I(t,e,t.next)>=0&&I(t,t.prev,e)>=0:I(t,e,t.prev)<0||I(t,t.next,e)<0}function _(t,e){var r=new T(t.i,t.x,t.y),n=new T(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function w(t,e,r,n){var i=new T(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function k(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function T(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(t,e,r,n){for(var i=0,o=e,a=r-n;o<r;o+=n)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}e.exports=n,e.exports.default=n,n.deviation=function(t,e,r,n){var i=e&&e.length,o=i?e[0]*r:t.length,a=Math.abs(M(t,0,o,r));if(i)for(var s=0,l=e.length;s<l;s++){var g=e[s]*r,c=s<l-1?e[s+1]*r:t.length;a-=Math.abs(M(t,g,c,r))}var u=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,A=n[s+2]*r;u+=Math.abs((t[h]-t[A])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[A+1]-t[h+1]))}return 0===a&&0===u?0:Math.abs((u-a)/a)},n.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)r.vertices.push(t[i][o][a]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r}},{}],82:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.length;if("number"!=typeof e){e=0;for(var i=0;i<r;++i){var o=t[i];e=Math.max(e,o[0],o[1])}e=1+(0|e)}e|=0;for(var a=new Array(e),i=0;i<e;++i)a[i]=[];for(var i=0;i<r;++i){var o=t[i];a[o[0]].push(o[1]),a[o[1]].push(o[0])}for(var s=0;s<e;++s)n(a[s],function(t,e){return t-e});return a};var n=t("uniq")},{uniq:713}],83:[function(t,e,r){"use strict";var n=t("../../object/valid-value");e.exports=function(){return n(this).length=0,this}},{"../../object/valid-value":114}],84:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Array.from:t("./shim")},{"./is-implemented":85,"./shim":86}],85:[function(t,e,r){"use strict";e.exports=function(){var t,e,r=Array.from;return"function"==typeof r&&(e=r(t=["raz","dwa"]),Boolean(e&&e!==t&&"dwa"===e[1]))}},{}],86:[function(t,e,r){"use strict";var n=t("es6-symbol").iterator,i=t("../../function/is-arguments"),o=t("../../function/is-function"),a=t("../../number/to-pos-integer"),s=t("../../object/valid-callable"),l=t("../../object/valid-value"),g=t("../../object/is-value"),c=t("../../string/is-string"),u=Array.isArray,h=Function.prototype.call,d={configurable:!0,enumerable:!0,writable:!0,value:null},A=Object.defineProperty;e.exports=function(t){var e,r,f,C,p,I,v,m,y,b,x=arguments[1],_=arguments[2];if(t=Object(l(t)),g(x)&&s(x),this&&this!==Array&&o(this))e=this;else{if(!x){if(i(t))return 1!==(p=t.length)?Array.apply(null,t):((C=new Array(1))[0]=t[0],C);if(u(t)){for(C=new Array(p=t.length),r=0;r<p;++r)C[r]=t[r];return C}}C=[]}if(!u(t))if(void 0!==(y=t[n])){for(v=s(y).call(t),e&&(C=new e),m=v.next(),r=0;!m.done;)b=x?h.call(x,_,m.value,r):m.value,e?(d.value=b,A(C,r,d)):C[r]=b,m=v.next(),++r;p=r}else if(c(t)){for(p=t.length,e&&(C=new e),r=0,f=0;r<p;++r)b=t[r],r+1<p&&(I=b.charCodeAt(0))>=55296&&I<=56319&&(b+=t[++r]),b=x?h.call(x,_,b,f):b,e?(d.value=b,A(C,f,d)):C[f]=b,++f;p=f}if(void 0===p)for(p=a(t.length),e&&(C=new e(p)),r=0;r<p;++r)b=x?h.call(x,_,t[r],r):t[r],e?(d.value=b,A(C,r,d)):C[r]=b;return e&&(d.value=null,C.length=p),C}},{"../../function/is-arguments":87,"../../function/is-function":88,"../../number/to-pos-integer":94,"../../object/is-value":103,"../../object/valid-callable":112,"../../object/valid-value":114,"../../string/is-string":118,"es6-symbol":128}],87:[function(t,e,r){"use strict";var n=Object.prototype.toString,i=n.call(function(){return arguments}());e.exports=function(t){return n.call(t)===i}},{}],88:[function(t,e,r){"use strict";var n=Object.prototype.toString,i=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);e.exports=function(t){return"function"==typeof t&&i(n.call(t))}},{}],89:[function(t,e,r){"use strict";e.exports=function(){}},{}],90:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Math.sign:t("./shim")},{"./is-implemented":91,"./shim":92}],91:[function(t,e,r){"use strict";e.exports=function(){var t=Math.sign;return"function"==typeof t&&(1===t(10)&&-1===t(-20))}},{}],92:[function(t,e,r){"use strict";e.exports=function(t){return t=Number(t),isNaN(t)||0===t?t:t>0?1:-1}},{}],93:[function(t,e,r){"use strict";var n=t("../math/sign"),i=Math.abs,o=Math.floor;e.exports=function(t){return isNaN(t)?0:0!==(t=Number(t))&&isFinite(t)?n(t)*o(i(t)):t}},{"../math/sign":90}],94:[function(t,e,r){"use strict";var n=t("./to-integer"),i=Math.max;e.exports=function(t){return i(0,n(t))}},{"./to-integer":93}],95:[function(t,e,r){"use strict";var n=t("./valid-callable"),i=t("./valid-value"),o=Function.prototype.bind,a=Function.prototype.call,s=Object.keys,l=Object.prototype.propertyIsEnumerable;e.exports=function(t,e){return function(r,g){var c,u=arguments[2],h=arguments[3];return r=Object(i(r)),n(g),c=s(r),h&&c.sort("function"==typeof h?o.call(h,r):void 0),"function"!=typeof t&&(t=c[t]),a.call(t,c,function(t,n){return l.call(r,t)?a.call(g,u,r[t],t,r,n):e})}}},{"./valid-callable":112,"./valid-value":114}],96:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Object.assign:t("./shim")},{"./is-implemented":97,"./shim":98}],97:[function(t,e,r){"use strict";e.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(e(t={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},{}],98:[function(t,e,r){"use strict";var n=t("../keys"),i=t("../valid-value"),o=Math.max;e.exports=function(t,e){var r,a,s,l=o(arguments.length,2);for(t=Object(i(t)),s=function(n){try{t[n]=e[n]}catch(t){r||(r=t)}},a=1;a<l;++a)e=arguments[a],n(e).forEach(s);if(void 0!==r)throw r;return t}},{"../keys":104,"../valid-value":114}],99:[function(t,e,r){"use strict";var n=t("../array/from"),i=t("./assign"),o=t("./valid-value");e.exports=function(t){var e=Object(o(t)),r=arguments[1],a=Object(arguments[2]);if(e!==t&&!r)return e;var s={};return r?n(r,function(e){(a.ensure||e in t)&&(s[e]=t[e])}):i(s,t),s}},{"../array/from":84,"./assign":96,"./valid-value":114}],100:[function(t,e,r){"use strict";var n,i,o,a,s=Object.create;t("./set-prototype-of/is-implemented")()||(n=t("./set-prototype-of/shim")),e.exports=n?1!==n.level?s:(i={},o={},a={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(t){o[t]="__proto__"!==t?a:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(i,o),Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:i}),function(t,e){return s(null===t?i:t,e)}):s},{"./set-prototype-of/is-implemented":110,"./set-prototype-of/shim":111}],101:[function(t,e,r){"use strict";e.exports=t("./_iterate")("forEach")},{"./_iterate":95}],102:[function(t,e,r){"use strict";var n=t("./is-value"),i={function:!0,object:!0};e.exports=function(t){return n(t)&&i[typeof t]||!1}},{"./is-value":103}],103:[function(t,e,r){"use strict";var n=t("../function/noop")();e.exports=function(t){return t!==n&&null!==t}},{"../function/noop":89}],104:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Object.keys:t("./shim")},{"./is-implemented":105,"./shim":106}],105:[function(t,e,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},{}],106:[function(t,e,r){"use strict";var n=t("../is-value"),i=Object.keys;e.exports=function(t){return i(n(t)?Object(t):t)}},{"../is-value":103}],107:[function(t,e,r){"use strict";var n=t("./valid-callable"),i=t("./for-each"),o=Function.prototype.call;e.exports=function(t,e){var r={},a=arguments[2];return n(e),i(t,function(t,n,i,s){r[n]=o.call(e,a,t,n,i,s)}),r}},{"./for-each":101,"./valid-callable":112}],108:[function(t,e,r){"use strict";var n=t("./is-value"),i=Array.prototype.forEach,o=Object.create;e.exports=function(t){var e=o(null);return i.call(arguments,function(t){n(t)&&function(t,e){var r;for(r in t)e[r]=t[r]}(Object(t),e)}),e}},{"./is-value":103}],109:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?Object.setPrototypeOf:t("./shim")},{"./is-implemented":110,"./shim":111}],110:[function(t,e,r){"use strict";var n=Object.create,i=Object.getPrototypeOf,o={};e.exports=function(){var t=Object.setPrototypeOf,e=arguments[0]||n;return"function"==typeof t&&i(t(e(null),o))===o}},{}],111:[function(t,e,r){"use strict";var n,i,o,a,s=t("../is-object"),l=t("../valid-value"),g=Object.prototype.isPrototypeOf,c=Object.defineProperty,u={configurable:!0,enumerable:!1,writable:!0,value:void 0};n=function(t,e){if(l(t),null===e||s(e))return t;throw new TypeError("Prototype must be null or an object")},e.exports=(i=function(){var t,e=Object.create(null),r={},n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{(t=n.set).call(e,r)}catch(t){}if(Object.getPrototypeOf(e)===r)return{set:t,level:2}}return e.__proto__=r,Object.getPrototypeOf(e)===r?{level:2}:((e={}).__proto__=r,Object.getPrototypeOf(e)===r&&{level:1})}())?(2===i.level?i.set?(a=i.set,o=function(t,e){return a.call(n(t,e),e),t}):o=function(t,e){return n(t,e).__proto__=e,t}:o=function t(e,r){var i;return n(e,r),(i=g.call(t.nullPolyfill,e))&&delete t.nullPolyfill.__proto__,null===r&&(r=t.nullPolyfill),e.__proto__=r,i&&c(t.nullPolyfill,"__proto__",u),e},Object.defineProperty(o,"level",{configurable:!1,enumerable:!1,writable:!1,value:i.level})):null,t("../create")},{"../create":100,"../is-object":102,"../valid-value":114}],112:[function(t,e,r){"use strict";e.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},{}],113:[function(t,e,r){"use strict";var n=t("./is-object");e.exports=function(t){if(!n(t))throw new TypeError(t+" is not an Object");return t}},{"./is-object":102}],114:[function(t,e,r){"use strict";var n=t("./is-value");e.exports=function(t){if(!n(t))throw new TypeError("Cannot use null or undefined");return t}},{"./is-value":103}],115:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?String.prototype.contains:t("./shim")},{"./is-implemented":116,"./shim":117}],116:[function(t,e,r){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&(!0===n.contains("dwa")&&!1===n.contains("foo"))}},{}],117:[function(t,e,r){"use strict";var n=String.prototype.indexOf;e.exports=function(t){return n.call(this,t,arguments[1])>-1}},{}],118:[function(t,e,r){"use strict";var n=Object.prototype.toString,i=n.call("");e.exports=function(t){return"string"==typeof t||t&&"object"==typeof t&&(t instanceof String||n.call(t)===i)||!1}},{}],119:[function(t,e,r){"use strict";var n=Object.create(null),i=Math.random;e.exports=function(){var t;do{t=i().toString(36).slice(2)}while(n[t]);return t}},{}],120:[function(t,e,r){"use strict";var n,i=t("es5-ext/object/set-prototype-of"),o=t("es5-ext/string/#/contains"),a=t("d"),s=t("es6-symbol"),l=t("./"),g=Object.defineProperty;n=e.exports=function(t,e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");l.call(this,t),e=e?o.call(e,"key+value")?"key+value":o.call(e,"key")?"key":"value":"value",g(this,"__kind__",a("",e))},i&&i(n,l),delete n.prototype.constructor,n.prototype=Object.create(l.prototype,{_resolve:a(function(t){return"value"===this.__kind__?this.__list__[t]:"key+value"===this.__kind__?[t,this.__list__[t]]:t})}),g(n.prototype,s.toStringTag,a("c","Array Iterator"))},{"./":123,d:73,"es5-ext/object/set-prototype-of":109,"es5-ext/string/#/contains":115,"es6-symbol":128}],121:[function(t,e,r){"use strict";var n=t("es5-ext/function/is-arguments"),i=t("es5-ext/object/valid-callable"),o=t("es5-ext/string/is-string"),a=t("./get"),s=Array.isArray,l=Function.prototype.call,g=Array.prototype.some;e.exports=function(t,e){var r,c,u,h,d,A,f,C,p=arguments[2];if(s(t)||n(t)?r="array":o(t)?r="string":t=a(t),i(e),u=function(){h=!0},"array"!==r)if("string"!==r)for(c=t.next();!c.done;){if(l.call(e,p,c.value,u),h)return;c=t.next()}else for(A=t.length,d=0;d<A&&(f=t[d],d+1<A&&(C=f.charCodeAt(0))>=55296&&C<=56319&&(f+=t[++d]),l.call(e,p,f,u),!h);++d);else g.call(t,function(t){return l.call(e,p,t,u),h})}},{"./get":122,"es5-ext/function/is-arguments":87,"es5-ext/object/valid-callable":112,"es5-ext/string/is-string":118}],122:[function(t,e,r){"use strict";var n=t("es5-ext/function/is-arguments"),i=t("es5-ext/string/is-string"),o=t("./array"),a=t("./string"),s=t("./valid-iterable"),l=t("es6-symbol").iterator;e.exports=function(t){return"function"==typeof s(t)[l]?t[l]():n(t)?new o(t):i(t)?new a(t):new o(t)}},{"./array":120,"./string":125,"./valid-iterable":126,"es5-ext/function/is-arguments":87,"es5-ext/string/is-string":118,"es6-symbol":128}],123:[function(t,e,r){"use strict";var n,i=t("es5-ext/array/#/clear"),o=t("es5-ext/object/assign"),a=t("es5-ext/object/valid-callable"),s=t("es5-ext/object/valid-value"),l=t("d"),g=t("d/auto-bind"),c=t("es6-symbol"),u=Object.defineProperty,h=Object.defineProperties;e.exports=n=function(t,e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");h(this,{__list__:l("w",s(t)),__context__:l("w",e),__nextIndex__:l("w",0)}),e&&(a(e.on),e.on("_add",this._onAdd),e.on("_delete",this._onDelete),e.on("_clear",this._onClear))},delete n.prototype.constructor,h(n.prototype,o({_next:l(function(){var t;if(this.__list__)return this.__redo__&&void 0!==(t=this.__redo__.shift())?t:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:l(function(){return this._createResult(this._next())}),_createResult:l(function(t){return void 0===t?{done:!0,value:void 0}:{done:!1,value:this._resolve(t)}}),_resolve:l(function(t){return this.__list__[t]}),_unBind:l(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:l(function(){return"[object "+(this[c.toStringTag]||"Object")+"]"})},g({_onAdd:l(function(t){t>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(e,r){e>=t&&(this.__redo__[r]=++e)},this),this.__redo__.push(t)):u(this,"__redo__",l("c",[t])))}),_onDelete:l(function(t){var e;t>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(e=this.__redo__.indexOf(t))&&this.__redo__.splice(e,1),this.__redo__.forEach(function(e,r){e>t&&(this.__redo__[r]=--e)},this)))}),_onClear:l(function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0})}))),u(n.prototype,c.iterator,l(function(){return this}))},{d:73,"d/auto-bind":72,"es5-ext/array/#/clear":83,"es5-ext/object/assign":96,"es5-ext/object/valid-callable":112,"es5-ext/object/valid-value":114,"es6-symbol":128}],124:[function(t,e,r){"use strict";var n=t("es5-ext/function/is-arguments"),i=t("es5-ext/object/is-value"),o=t("es5-ext/string/is-string"),a=t("es6-symbol").iterator,s=Array.isArray;e.exports=function(t){return!!i(t)&&(!!s(t)||(!!o(t)||(!!n(t)||"function"==typeof t[a])))}},{"es5-ext/function/is-arguments":87,"es5-ext/object/is-value":103,"es5-ext/string/is-string":118,"es6-symbol":128}],125:[function(t,e,r){"use strict";var n,i=t("es5-ext/object/set-prototype-of"),o=t("d"),a=t("es6-symbol"),s=t("./"),l=Object.defineProperty;n=e.exports=function(t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");t=String(t),s.call(this,t),l(this,"__length__",o("",t.length))},i&&i(n,s),delete n.prototype.constructor,n.prototype=Object.create(s.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(t){var e,r=this.__list__[t];return this.__nextIndex__===this.__length__?r:(e=r.charCodeAt(0))>=55296&&e<=56319?r+this.__list__[this.__nextIndex__++]:r})}),l(n.prototype,a.toStringTag,o("c","String Iterator"))},{"./":123,d:73,"es5-ext/object/set-prototype-of":109,"es6-symbol":128}],126:[function(t,e,r){"use strict";var n=t("./is-iterable");e.exports=function(t){if(!n(t))throw new TypeError(t+" is not iterable");return t}},{"./is-iterable":124}],127:[function(t,e,r){(function(n,i){!function(t,n){"object"==typeof r&&void 0!==e?e.exports=n():t.ES6Promise=n()}(this,function(){"use strict";function e(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,a=void 0,s=void 0,l=function(t,e){f[o]=t,f[o+1]=e,2===(o+=2)&&(s?s(C):y())};var g="undefined"!=typeof window?window:void 0,c=g||{},u=c.MutationObserver||c.WebKitMutationObserver,h="undefined"==typeof self&&void 0!==n&&"[object process]"==={}.toString.call(n),d="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function A(){var t=setTimeout;return function(){return t(C,1)}}var f=new Array(1e3);function C(){for(var t=0;t<o;t+=2){(0,f[t])(f[t+1]),f[t]=void 0,f[t+1]=void 0}o=0}var p,I,v,m,y=void 0;function b(t,e){var r=arguments,n=this,i=new this.constructor(w);void 0===i[_]&&G(i);var o,a=n._state;return a?(o=r[a-1],l(function(){return j(a,i,o,n._result)})):N(n,i,t,e),i}function x(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(w);return R(e,t),e}h?y=function(){return n.nextTick(C)}:u?(I=0,v=new u(C),m=document.createTextNode(""),v.observe(m,{characterData:!0}),y=function(){m.data=I=++I%2}):d?((p=new MessageChannel).port1.onmessage=C,y=function(){return p.port2.postMessage(0)}):y=void 0===g&&"function"==typeof t?function(){try{var e=t("vertx");return a=e.runOnLoop||e.runOnContext,function(){a(C)}}catch(t){return A()}}():A();var _=Math.random().toString(36).substring(16);function w(){}var k=void 0,T=1,M=2,E=new F;function O(t){try{return t.then}catch(t){return E.error=t,E}}function S(t,r,n){r.constructor===t.constructor&&n===b&&r.constructor.resolve===x?function(t,e){e._state===T?L(t,e._result):e._state===M?P(t,e._result):N(e,void 0,function(e){return R(t,e)},function(e){return P(t,e)})}(t,r):n===E?P(t,E.error):void 0===n?L(t,r):e(n)?function(t,e,r){l(function(t){var n=!1,i=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(r,e,function(r){n||(n=!0,e!==r?R(t,r):L(t,r))},function(e){n||(n=!0,P(t,e))},t._label);!n&&i&&(n=!0,P(t,i))},t)}(t,r,n):L(t,r)}function R(t,e){var r;t===e?P(t,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(r=e)||"object"==typeof r&&null!==r?S(t,e,O(e)):L(t,e)}function D(t){t._onerror&&t._onerror(t._result),z(t)}function L(t,e){t._state===k&&(t._result=e,t._state=T,0!==t._subscribers.length&&l(z,t))}function P(t,e){t._state===k&&(t._state=M,t._result=e,l(D,t))}function N(t,e,r,n){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+T]=r,i[o+M]=n,0===o&&t._state&&l(z,t)}function z(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,i=void 0,o=t._result,a=0;a<e.length;a+=3)n=e[a],i=e[a+r],n?j(r,n,i,o):i(o);t._subscribers.length=0}}function F(){this.error=null}var B=new F;function j(t,r,n,i){var o=e(n),a=void 0,s=void 0,l=void 0,g=void 0;if(o){if((a=function(t,e){try{return t(e)}catch(t){return B.error=t,B}}(n,i))===B?(g=!0,s=a.error,a=null):l=!0,r===a)return void P(r,new TypeError("A promises callback cannot return that same promise."))}else a=i,l=!0;r._state!==k||(o&&l?R(r,a):g?P(r,s):t===T?L(r,a):t===M&&P(r,a))}var V=0;function G(t){t[_]=V++,t._state=void 0,t._result=void 0,t._subscribers=[]}function U(t,e){this._instanceConstructor=t,this.promise=new t(w),this.promise[_]||G(this.promise),r(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?L(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&L(this.promise,this._result))):P(this.promise,new Error("Array Methods must be provided an Array"))}function Z(t){this[_]=V++,this._result=this._state=void 0,this._subscribers=[],w!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof Z?function(t,e){try{e(function(e){R(t,e)},function(e){P(t,e)})}catch(e){P(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function H(){var t=void 0;if(void 0!==i)t=i;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=Z}return U.prototype._enumerate=function(){for(var t=this.length,e=this._input,r=0;this._state===k&&r<t;r++)this._eachEntry(e[r],r)},U.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===x){var i=O(t);if(i===b&&t._state!==k)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(r===Z){var o=new r(w);S(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},U.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===k&&(this._remaining--,t===M?P(n,r):this._result[e]=r),0===this._remaining&&L(n,this._result)},U.prototype._willSettleAt=function(t,e){var r=this;N(t,void 0,function(t){return r._settledAt(T,e,t)},function(t){return r._settledAt(M,e,t)})},Z.all=function(t){return new U(this,t).promise},Z.race=function(t){var e=this;return r(t)?new e(function(r,n){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(r,n)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},Z.resolve=x,Z.reject=function(t){var e=new this(w);return P(e,t),e},Z._setScheduler=function(t){s=t},Z._setAsap=function(t){l=t},Z._asap=l,Z.prototype={constructor:Z,then:b,catch:function(t){return this.then(null,t)}},H(),Z.polyfill=H,Z.Promise=Z,Z})}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:651}],128:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?t("ext/global-this").Symbol:t("./polyfill")},{"./is-implemented":129,"./polyfill":134,"ext/global-this":142}],129:[function(t,e,r){"use strict";var n=t("ext/global-this"),i={object:!0,symbol:!0};e.exports=function(){var t,e=n.Symbol;if("function"!=typeof e)return!1;t=e("test symbol");try{String(t)}catch(t){return!1}return!!i[typeof e.iterator]&&(!!i[typeof e.toPrimitive]&&!!i[typeof e.toStringTag])}},{"ext/global-this":142}],130:[function(t,e,r){"use strict";e.exports=function(t){return!!t&&("symbol"==typeof t||!!t.constructor&&("Symbol"===t.constructor.name&&"Symbol"===t[t.constructor.toStringTag]))}},{}],131:[function(t,e,r){"use strict";var n=t("d"),i=Object.create,o=Object.defineProperty,a=Object.prototype,s=i(null);e.exports=function(t){for(var e,r,i=0;s[t+(i||"")];)++i;return s[t+=i||""]=!0,o(a,e="@@"+t,n.gs(null,function(t){r||(r=!0,o(this,e,n(t)),r=!1)})),e}},{d:73}],132:[function(t,e,r){"use strict";var n=t("d"),i=t("ext/global-this").Symbol;e.exports=function(t){return Object.defineProperties(t,{hasInstance:n("",i&&i.hasInstance||t("hasInstance")),isConcatSpreadable:n("",i&&i.isConcatSpreadable||t("isConcatSpreadable")),iterator:n("",i&&i.iterator||t("iterator")),match:n("",i&&i.match||t("match")),replace:n("",i&&i.replace||t("replace")),search:n("",i&&i.search||t("search")),species:n("",i&&i.species||t("species")),split:n("",i&&i.split||t("split")),toPrimitive:n("",i&&i.toPrimitive||t("toPrimitive")),toStringTag:n("",i&&i.toStringTag||t("toStringTag")),unscopables:n("",i&&i.unscopables||t("unscopables"))})}},{d:73,"ext/global-this":142}],133:[function(t,e,r){"use strict";var n=t("d"),i=t("../../../validate-symbol"),o=Object.create(null);e.exports=function(t){return Object.defineProperties(t,{for:n(function(e){return o[e]?o[e]:o[e]=t(String(e))}),keyFor:n(function(t){var e;for(e in i(t),o)if(o[e]===t)return e})})}},{"../../../validate-symbol":135,d:73}],134:[function(t,e,r){"use strict";var n,i,o,a=t("d"),s=t("./validate-symbol"),l=t("ext/global-this").Symbol,g=t("./lib/private/generate-name"),c=t("./lib/private/setup/standard-symbols"),u=t("./lib/private/setup/symbol-registry"),h=Object.create,d=Object.defineProperties,A=Object.defineProperty;if("function"==typeof l)try{String(l()),o=!0}catch(t){}else l=null;i=function(t){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return n(t)},e.exports=n=function t(e){var r;if(this instanceof t)throw new TypeError("Symbol is not a constructor");return o?l(e):(r=h(i.prototype),e=void 0===e?"":String(e),d(r,{__description__:a("",e),__name__:a("",g(e))}))},c(n),u(n),d(i.prototype,{constructor:a(n),toString:a("",function(){return this.__name__})}),d(n.prototype,{toString:a(function(){return"Symbol ("+s(this).__description__+")"}),valueOf:a(function(){return s(this)})}),A(n.prototype,n.toPrimitive,a("",function(){var t=s(this);return"symbol"==typeof t?t:t.toString()})),A(n.prototype,n.toStringTag,a("c","Symbol")),A(i.prototype,n.toStringTag,a("c",n.prototype[n.toStringTag])),A(i.prototype,n.toPrimitive,a("c",n.prototype[n.toPrimitive]))},{"./lib/private/generate-name":131,"./lib/private/setup/standard-symbols":132,"./lib/private/setup/symbol-registry":133,"./validate-symbol":135,d:73,"ext/global-this":142}],135:[function(t,e,r){"use strict";var n=t("./is-symbol");e.exports=function(t){if(!n(t))throw new TypeError(t+" is not a symbol");return t}},{"./is-symbol":130}],136:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?WeakMap:t("./polyfill")},{"./is-implemented":137,"./polyfill":139}],137:[function(t,e,r){"use strict";e.exports=function(){var t,e;if("function"!=typeof WeakMap)return!1;try{t=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch(t){return!1}return"[object WeakMap]"===String(t)&&("function"==typeof t.set&&(t.set({},1)===t&&("function"==typeof t.delete&&("function"==typeof t.has&&"one"===t.get(e)))))}},{}],138:[function(t,e,r){"use strict";e.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],139:[function(t,e,r){"use strict";var n,i=t("es5-ext/object/is-value"),o=t("es5-ext/object/set-prototype-of"),a=t("es5-ext/object/valid-object"),s=t("es5-ext/object/valid-value"),l=t("es5-ext/string/random-uniq"),g=t("d"),c=t("es6-iterator/get"),u=t("es6-iterator/for-of"),h=t("es6-symbol").toStringTag,d=t("./is-native-implemented"),A=Array.isArray,f=Object.defineProperty,C=Object.prototype.hasOwnProperty,p=Object.getPrototypeOf;e.exports=n=function(){var t,e=arguments[0];if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");return t=d&&o&&WeakMap!==n?o(new WeakMap,p(this)):this,i(e)&&(A(e)||(e=c(e))),f(t,"__weakMapData__",g("c","$weakMap$"+l())),e?(u(e,function(e){s(e),t.set(e[0],e[1])}),t):t},d&&(o&&o(n,WeakMap),n.prototype=Object.create(WeakMap.prototype,{constructor:g(n)})),Object.defineProperties(n.prototype,{delete:g(function(t){return!!C.call(a(t),this.__weakMapData__)&&(delete t[this.__weakMapData__],!0)}),get:g(function(t){if(C.call(a(t),this.__weakMapData__))return t[this.__weakMapData__]}),has:g(function(t){return C.call(a(t),this.__weakMapData__)}),set:g(function(t,e){return f(a(t),this.__weakMapData__,g("c",e)),this}),toString:g(function(){return"[object WeakMap]"})}),f(n.prototype,h,g("c","WeakMap"))},{"./is-native-implemented":138,d:73,"es5-ext/object/is-value":103,"es5-ext/object/set-prototype-of":109,"es5-ext/object/valid-object":113,"es5-ext/object/valid-value":114,"es5-ext/string/random-uniq":119,"es6-iterator/for-of":121,"es6-iterator/get":122,"es6-symbol":128}],140:[function(t,e,r){var n=Object.create||function(t){var e=function(){};return e.prototype=t,new e},i=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return r},o=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};function a(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=n(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0;var s,l=10;try{var g={};Object.defineProperty&&Object.defineProperty(g,"x",{value:0}),s=0===g.x}catch(t){s=!1}function c(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function u(t,e,r,i){var o,a,s;if("function"!=typeof r)throw new TypeError('"listener" argument must be a function');if((a=t._events)?(a.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),a=t._events),s=a[e]):(a=t._events=n(null),t._eventsCount=0),s){if("function"==typeof s?s=a[e]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),!s.warned&&(o=c(t))&&o>0&&s.length>o){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=s.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",l.name,l.message)}}else s=a[e]=r,++t._eventsCount;return t}function h(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function d(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=o.call(h,n);return i.listener=r,n.wrapFn=i,i}function A(t,e,r){var n=t._events;if(!n)return[];var i=n[e];return i?"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):C(i,i.length):[]}function f(t){var e=this._events;if(e){var r=e[t];if("function"==typeof r)return 1;if(r)return r.length}return 0}function C(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}s?Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');l=t}}):a.defaultMaxListeners=l,a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(t){var e,r,n,i,o,a,s="error"===t;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var l=new Error('Unhandled "error" event. ('+e+")");throw l.context=e,l}if(!(r=a[t]))return!1;var g="function"==typeof r;switch(n=arguments.length){case 1:!function(t,e,r){if(e)t.call(r);else for(var n=t.length,i=C(t,n),o=0;o<n;++o)i[o].call(r)}(r,g,this);break;case 2:!function(t,e,r,n){if(e)t.call(r,n);else for(var i=t.length,o=C(t,i),a=0;a<i;++a)o[a].call(r,n)}(r,g,this,arguments[1]);break;case 3:!function(t,e,r,n,i){if(e)t.call(r,n,i);else for(var o=t.length,a=C(t,o),s=0;s<o;++s)a[s].call(r,n,i)}(r,g,this,arguments[1],arguments[2]);break;case 4:!function(t,e,r,n,i,o){if(e)t.call(r,n,i,o);else for(var a=t.length,s=C(t,a),l=0;l<a;++l)s[l].call(r,n,i,o)}(r,g,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),o=1;o<n;o++)i[o-1]=arguments[o];!function(t,e,r,n){if(e)t.apply(r,n);else for(var i=t.length,o=C(t,i),a=0;a<i;++a)o[a].apply(r,n)}(r,g,this,i)}return!0},a.prototype.addListener=function(t,e){return u(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return u(this,t,e,!0)},a.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,d(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,d(this,t,e)),this},a.prototype.removeListener=function(t,e){var r,i,o,a,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(r=i[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=n(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===e||r[a].listener===e){s=r[a].listener,o=a;break}if(o<0)return this;0===o?r.shift():function(t,e){for(var r=e,n=r+1,i=t.length;n<i;r+=1,n+=1)t[r]=t[n];t.pop()}(r,o),1===r.length&&(i[t]=r[0]),i.removeListener&&this.emit("removeListener",t,s||e)}return this},a.prototype.removeAllListeners=function(t){var e,r,o;if(!(r=this._events))return this;if(!r.removeListener)return 0===arguments.length?(this._events=n(null),this._eventsCount=0):r[t]&&(0==--this._eventsCount?this._events=n(null):delete r[t]),this;if(0===arguments.length){var a,s=i(r);for(o=0;o<s.length;++o)"removeListener"!==(a=s[o])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=n(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(e)for(o=e.length-1;o>=0;o--)this.removeListener(t,e[o]);return this},a.prototype.listeners=function(t){return A(this,t,!0)},a.prototype.rawListeners=function(t){return A(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):f.call(t,e)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],141:[function(t,e,r){var n=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(t){return n()}try{return __global__||n()}finally{delete Object.prototype.__global__}}()},{}],142:[function(t,e,r){"use strict";e.exports=t("./is-implemented")()?globalThis:t("./implementation")},{"./implementation":141,"./is-implemented":143}],143:[function(t,e,r){"use strict";e.exports=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)}},{}],144:[function(t,e,r){"use strict";e.exports=function(t,e,r){var n=e||0,i=r||1;return[[t[12]+t[0],t[13]+t[1],t[14]+t[2],t[15]+t[3]],[t[12]-t[0],t[13]-t[1],t[14]-t[2],t[15]-t[3]],[t[12]+t[4],t[13]+t[5],t[14]+t[6],t[15]+t[7]],[t[12]-t[4],t[13]-t[5],t[14]-t[6],t[15]-t[7]],[n*t[12]+t[8],n*t[13]+t[9],n*t[14]+t[10],n*t[15]+t[11]],[i*t[12]-t[8],i*t[13]-t[9],i*t[14]-t[10],i*t[15]-t[11]]]}},{}],145:[function(t,e,r){"use strict";var n=t("is-string-blank");e.exports=function(t){var e=typeof t;if("string"===e){var r=t;if(0===(t=+t)&&n(r))return!1}else if("number"!==e)return!1;return t-t<1}},{"is-string-blank":242}],146:[function(t,e,r){(function(t){var n,i;n=this,i=function(){"use strict";function r(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){a(n.response,e,r)},n.onerror=function(){console.error("could not download file")},n.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(r){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof t&&t.global===t?t:void 0,a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(t,e,a){var s=o.URL||o.webkitURL,l=document.createElement("a");e=e||t.name||"download",l.download=e,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?i(l):n(l.href)?r(t,e,a):i(l,l.target="_blank")):(l.href=s.createObjectURL(t),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){i(l)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,o){if(e=e||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),e);else if(n(t))r(t,e,o);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout(function(){i(a)})}}:function(t,e,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return r(t,e,n);var a="application/octet-stream"===t.type,s=/constructor/i.test(o.HTMLElement)||o.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||a&&s)&&"object"==typeof FileReader){var g=new FileReader;g.onloadend=function(){var t=g.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},g.readAsDataURL(t)}else{var c=o.URL||o.webkitURL,u=c.createObjectURL(t);i?i.location=u:location.href=u,i=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});o.saveAs=a.saveAs=a,void 0!==e&&(e.exports=a)},void 0!==r?i():(i(),n.FileSaver={})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],147:[function(t,e,r){"use strict";e.exports=function(t,e,r){switch(arguments.length){case 0:return new a([0],[0],0);case 1:if("number"==typeof t){var n=l(t);return new a(n,n,0)}return new a(t,l(t.length),0);case 2:if("number"==typeof e){var n=l(t.length);return new a(t,n,+e)}r=0;case 3:if(t.length!==e.length)throw new Error("state and velocity lengths must match");return new a(t,e,r)}};var n=t("cubic-hermite"),i=t("binary-search-bounds");function o(t,e,r){return Math.min(e,Math.max(t,r))}function a(t,e,r){this.dimension=t.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var n=0;n<this.dimension;++n)this.bounds[0][n]=-1/0,this.bounds[1][n]=1/0;this._state=t.slice().reverse(),this._velocity=e.slice().reverse(),this._time=[r],this._scratch=[t.slice(),t.slice(),t.slice(),t.slice(),t.slice()]}var s=a.prototype;function l(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=0;return e}s.flush=function(t){var e=i.gt(this._time,t)-1;e<=0||(this._time.splice(0,e),this._state.splice(0,e*this.dimension),this._velocity.splice(0,e*this.dimension))},s.curve=function(t){var e=this._time,r=e.length,a=i.le(e,t),s=this._scratch[0],l=this._state,g=this._velocity,c=this.dimension,u=this.bounds;if(a<0)for(var h=c-1,d=0;d<c;++d,--h)s[d]=l[h];else if(a>=r-1){h=l.length-1;var A=t-e[r-1];for(d=0;d<c;++d,--h)s[d]=l[h]+A*g[h]}else{h=c*(a+1)-1;var f=e[a],C=e[a+1]-f||1,p=this._scratch[1],I=this._scratch[2],v=this._scratch[3],m=this._scratch[4],y=!0;for(d=0;d<c;++d,--h)p[d]=l[h],v[d]=g[h]*C,I[d]=l[h+c],m[d]=g[h+c]*C,y=y&&p[d]===I[d]&&v[d]===m[d]&&0===v[d];if(y)for(d=0;d<c;++d)s[d]=p[d];else n(p,v,I,m,(t-f)/C,s)}var b=u[0],x=u[1];for(d=0;d<c;++d)s[d]=o(b[d],x[d],s[d]);return s},s.dcurve=function(t){var e=this._time,r=e.length,o=i.le(e,t),a=this._scratch[0],s=this._state,l=this._velocity,g=this.dimension;if(o>=r-1)for(var c=s.length-1,u=(e[r-1],0);u<g;++u,--c)a[u]=l[c];else{c=g*(o+1)-1;var h=e[o],d=e[o+1]-h||1,A=this._scratch[1],f=this._scratch[2],C=this._scratch[3],p=this._scratch[4],I=!0;for(u=0;u<g;++u,--c)A[u]=s[c],C[u]=l[c]*d,f[u]=s[c+g],p[u]=l[c+g]*d,I=I&&A[u]===f[u]&&C[u]===p[u]&&0===C[u];if(I)for(u=0;u<g;++u)a[u]=0;else{n.derivative(A,C,f,p,(t-h)/d,a);for(u=0;u<g;++u)a[u]/=d}}return a},s.lastT=function(){var t=this._time;return t[t.length-1]},s.stable=function(){for(var t=this._velocity,e=t.length,r=this.dimension-1;r>=0;--r)if(t[--e])return!1;return!0},s.jump=function(t){var e=this.lastT(),r=this.dimension;if(!(t<e||arguments.length!==r+1)){var n=this._state,i=this._velocity,a=n.length-this.dimension,s=this.bounds,l=s[0],g=s[1];this._time.push(e,t);for(var c=0;c<2;++c)for(var u=0;u<r;++u)n.push(n[a++]),i.push(0);this._time.push(t);for(u=r;u>0;--u)n.push(o(l[u-1],g[u-1],arguments[u])),i.push(0)}},s.push=function(t){var e=this.lastT(),r=this.dimension;if(!(t<e||arguments.length!==r+1)){var n=this._state,i=this._velocity,a=n.length-this.dimension,s=t-e,l=this.bounds,g=l[0],c=l[1],u=s>1e-6?1/s:0;this._time.push(t);for(var h=r;h>0;--h){var d=o(g[h-1],c[h-1],arguments[h]);n.push(d),i.push((d-n[a++])*u)}}},s.set=function(t){var e=this.dimension;if(!(t<this.lastT()||arguments.length!==e+1)){var r=this._state,n=this._velocity,i=this.bounds,a=i[0],s=i[1];this._time.push(t);for(var l=e;l>0;--l)r.push(o(a[l-1],s[l-1],arguments[l])),n.push(0)}},s.move=function(t){var e=this.lastT(),r=this.dimension;if(!(t<=e||arguments.length!==r+1)){var n=this._state,i=this._velocity,a=n.length-this.dimension,s=this.bounds,l=s[0],g=s[1],c=t-e,u=c>1e-6?1/c:0;this._time.push(t);for(var h=r;h>0;--h){var d=arguments[h];n.push(o(l[h-1],g[h-1],n[a++]+d)),i.push(d*u)}}},s.idle=function(t){var e=this.lastT();if(!(t<e)){var r=this.dimension,n=this._state,i=this._velocity,a=n.length-r,s=this.bounds,l=s[0],g=s[1],c=t-e;this._time.push(t);for(var u=r-1;u>=0;--u)n.push(o(l[u],g[u],n[a]+c*i[a])),i.push(0),a+=1}}},{"binary-search-bounds":148,"cubic-hermite":67}],148:[function(t,e,r){"use strict";function n(t,e,r,n,i,o){var a=["function ",t,"(a,l,h,",n.join(","),"){",o?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return o?e.indexOf("c")<0?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",e,"){i=m;"),r?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}"),a.push("}"),o?a.push("return -1};"):a.push("return i};"),a.join("")}function i(t,e,r,i){return new Function([n("A","x"+t+"y",e,["y"],!1,i),n("B","x"+t+"y",e,["y"],!0,i),n("P","c(x,y)"+t+"0",e,["y","c"],!1,i),n("Q","c(x,y)"+t+"0",e,["y","c"],!0,i),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}e.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],149:[function(t,e,r){var n=t("dtype");e.exports=function(t,e,r){if(!t)throw new TypeError("must specify data as first parameter");if(r=0|+(r||0),Array.isArray(t)&&t[0]&&"number"==typeof t[0][0]){var i,o,a,s,l=t[0].length,g=t.length*l;e&&"string"!=typeof e||(e=new(n(e||"float32"))(g+r));var c=e.length-r;if(g!==c)throw new Error("source length "+g+" ("+l+"x"+t.length+") does not match destination length "+c);for(i=0,a=r;i<t.length;i++)for(o=0;o<l;o++)e[a++]=null===t[i][o]?NaN:t[i][o]}else if(e&&"string"!=typeof e)e.set(t,r);else{var u=n(e||"float32");if(Array.isArray(t)||"array"===e)for(e=new u(t.length+r),i=0,a=r,s=e.length;a<s;a++,i++)e[a]=null===t[i]?NaN:t[i];else 0===r?e=new u(t):(e=new u(t.length+r)).set(t,r)}return e}},{dtype:79}],150:[function(t,e,r){"use strict";e.exports=function(t){return new g(t||A,null)};var n=0,i=1;function o(t,e,r,n,i,o){this._color=t,this.key=e,this.value=r,this.left=n,this.right=i,this._count=o}function a(t){return new o(t._color,t.key,t.value,t.left,t.right,t._count)}function s(t,e){return new o(t,e.key,e.value,e.left,e.right,e._count)}function l(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function g(t,e){this._compare=t,this.root=e}var c=g.prototype;function u(t,e){this.tree=t,this._stack=e}Object.defineProperty(c,"keys",{get:function(){var t=[];return this.forEach(function(e,r){t.push(e)}),t}}),Object.defineProperty(c,"values",{get:function(){var t=[];return this.forEach(function(e,r){t.push(r)}),t}}),Object.defineProperty(c,"length",{get:function(){return this.root?this.root._count:0}}),c.insert=function(t,e){for(var r=this._compare,a=this.root,c=[],u=[];a;){var h=r(t,a.key);c.push(a),u.push(h),a=h<=0?a.left:a.right}c.push(new o(n,t,e,null,null,1));for(var d=c.length-2;d>=0;--d){a=c[d];u[d]<=0?c[d]=new o(a._color,a.key,a.value,c[d+1],a.right,a._count+1):c[d]=new o(a._color,a.key,a.value,a.left,c[d+1],a._count+1)}for(d=c.length-1;d>1;--d){var A=c[d-1];a=c[d];if(A._color===i||a._color===i)break;var f=c[d-2];if(f.left===A)if(A.left===a){if(!(C=f.right)||C._color!==n){if(f._color=n,f.left=A.right,A._color=i,A.right=f,c[d-2]=A,c[d-1]=a,l(f),l(A),d>=3)(p=c[d-3]).left===f?p.left=A:p.right=A;break}A._color=i,f.right=s(i,C),f._color=n,d-=1}else{if(!(C=f.right)||C._color!==n){if(A.right=a.left,f._color=n,f.left=a.right,a._color=i,a.left=A,a.right=f,c[d-2]=a,c[d-1]=A,l(f),l(A),l(a),d>=3)(p=c[d-3]).left===f?p.left=a:p.right=a;break}A._color=i,f.right=s(i,C),f._color=n,d-=1}else if(A.right===a){if(!(C=f.left)||C._color!==n){if(f._color=n,f.right=A.left,A._color=i,A.left=f,c[d-2]=A,c[d-1]=a,l(f),l(A),d>=3)(p=c[d-3]).right===f?p.right=A:p.left=A;break}A._color=i,f.left=s(i,C),f._color=n,d-=1}else{var C;if(!(C=f.left)||C._color!==n){var p;if(A.left=a.right,f._color=n,f.right=a.left,a._color=i,a.right=A,a.left=f,c[d-2]=a,c[d-1]=A,l(f),l(A),l(a),d>=3)(p=c[d-3]).right===f?p.right=a:p.left=a;break}A._color=i,f.left=s(i,C),f._color=n,d-=1}}return c[0]._color=i,new g(r,c[0])},c.forEach=function(t,e,r){if(this.root)switch(arguments.length){case 1:return function t(e,r){var n;if(r.left&&(n=t(e,r.left)))return n;return(n=e(r.key,r.value))||(r.right?t(e,r.right):void 0)}(t,this.root);case 2:return function t(e,r,n,i){if(r(e,i.key)<=0){var o;if(i.left&&(o=t(e,r,n,i.left)))return o;if(o=n(i.key,i.value))return o}if(i.right)return t(e,r,n,i.right)}(e,this._compare,t,this.root);case 3:if(this._compare(e,r)>=0)return;return function t(e,r,n,i,o){var a,s=n(e,o.key),l=n(r,o.key);if(s<=0){if(o.left&&(a=t(e,r,n,i,o.left)))return a;if(l>0&&(a=i(o.key,o.value)))return a}if(l>0&&o.right)return t(e,r,n,i,o.right)}(e,r,this._compare,t,this.root)}},Object.defineProperty(c,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new u(this,t)}}),Object.defineProperty(c,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new u(this,t)}}),c.at=function(t){if(t<0)return new u(this,[]);for(var e=this.root,r=[];;){if(r.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new u(this,r);if(t-=1,!e.right)break;if(t>=e.right._count)break;e=e.right}return new u(this,[])},c.ge=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var o=e(t,r.key);n.push(r),o<=0&&(i=n.length),r=o<=0?r.left:r.right}return n.length=i,new u(this,n)},c.gt=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var o=e(t,r.key);n.push(r),o<0&&(i=n.length),r=o<0?r.left:r.right}return n.length=i,new u(this,n)},c.lt=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var o=e(t,r.key);n.push(r),o>0&&(i=n.length),r=o<=0?r.left:r.right}return n.length=i,new u(this,n)},c.le=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var o=e(t,r.key);n.push(r),o>=0&&(i=n.length),r=o<0?r.left:r.right}return n.length=i,new u(this,n)},c.find=function(t){for(var e=this._compare,r=this.root,n=[];r;){var i=e(t,r.key);if(n.push(r),0===i)return new u(this,n);r=i<=0?r.left:r.right}return new u(this,[])},c.remove=function(t){var e=this.find(t);return e?e.remove():this},c.get=function(t){for(var e=this._compare,r=this.root;r;){var n=e(t,r.key);if(0===n)return r.value;r=n<=0?r.left:r.right}};var h=u.prototype;function d(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function A(t,e){return t<e?-1:t>e?1:0}Object.defineProperty(h,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(h,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),h.clone=function(){return new u(this.tree,this._stack.slice())},h.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var e=new Array(t.length),r=t[t.length-1];e[e.length-1]=new o(r._color,r.key,r.value,r.left,r.right,r._count);for(var c=t.length-2;c>=0;--c){(r=t[c]).left===t[c+1]?e[c]=new o(r._color,r.key,r.value,e[c+1],r.right,r._count):e[c]=new o(r._color,r.key,r.value,r.left,e[c+1],r._count)}if((r=e[e.length-1]).left&&r.right){var u=e.length;for(r=r.left;r.right;)e.push(r),r=r.right;var h=e[u-1];e.push(new o(r._color,h.key,h.value,r.left,r.right,r._count)),e[u-1].key=r.key,e[u-1].value=r.value;for(c=e.length-2;c>=u;--c)r=e[c],e[c]=new o(r._color,r.key,r.value,r.left,e[c+1],r._count);e[u-1].left=e[u]}if((r=e[e.length-1])._color===n){var A=e[e.length-2];A.left===r?A.left=null:A.right===r&&(A.right=null),e.pop();for(c=0;c<e.length;++c)e[c]._count--;return new g(this.tree._compare,e[0])}if(r.left||r.right){r.left?d(r,r.left):r.right&&d(r,r.right),r._color=i;for(c=0;c<e.length-1;++c)e[c]._count--;return new g(this.tree._compare,e[0])}if(1===e.length)return new g(this.tree._compare,null);for(c=0;c<e.length;++c)e[c]._count--;var f=e[e.length-2];return function(t){for(var e,r,o,g,c=t.length-1;c>=0;--c){if(e=t[c],0===c)return void(e._color=i);if((r=t[c-1]).left===e){if((o=r.right).right&&o.right._color===n)return g=(o=r.right=a(o)).right=a(o.right),r.right=o.left,o.left=r,o.right=g,o._color=r._color,e._color=i,r._color=i,g._color=i,l(r),l(o),c>1&&((u=t[c-2]).left===r?u.left=o:u.right=o),void(t[c-1]=o);if(o.left&&o.left._color===n)return g=(o=r.right=a(o)).left=a(o.left),r.right=g.left,o.left=g.right,g.left=r,g.right=o,g._color=r._color,r._color=i,o._color=i,e._color=i,l(r),l(o),l(g),c>1&&((u=t[c-2]).left===r?u.left=g:u.right=g),void(t[c-1]=g);if(o._color===i){if(r._color===n)return r._color=i,void(r.right=s(n,o));r.right=s(n,o);continue}o=a(o),r.right=o.left,o.left=r,o._color=r._color,r._color=n,l(r),l(o),c>1&&((u=t[c-2]).left===r?u.left=o:u.right=o),t[c-1]=o,t[c]=r,c+1<t.length?t[c+1]=e:t.push(e),c+=2}else{if((o=r.left).left&&o.left._color===n)return g=(o=r.left=a(o)).left=a(o.left),r.left=o.right,o.right=r,o.left=g,o._color=r._color,e._color=i,r._color=i,g._color=i,l(r),l(o),c>1&&((u=t[c-2]).right===r?u.right=o:u.left=o),void(t[c-1]=o);if(o.right&&o.right._color===n)return g=(o=r.left=a(o)).right=a(o.right),r.left=g.right,o.right=g.left,g.right=r,g.left=o,g._color=r._color,r._color=i,o._color=i,e._color=i,l(r),l(o),l(g),c>1&&((u=t[c-2]).right===r?u.right=g:u.left=g),void(t[c-1]=g);if(o._color===i){if(r._color===n)return r._color=i,void(r.left=s(n,o));r.left=s(n,o);continue}var u;o=a(o),r.left=o.right,o.right=r,o._color=r._color,r._color=n,l(r),l(o),c>1&&((u=t[c-2]).right===r?u.right=o:u.left=o),t[c-1]=o,t[c]=r,c+1<t.length?t[c+1]=e:t.push(e),c+=2}}}(e),f.left===r?f.left=null:f.right=null,new g(this.tree._compare,e[0])},Object.defineProperty(h,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(h,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(h,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var r=this.tree.root;return r?r._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var n=e.length-2;n>=0;--n)e[n+1]===e[n].right&&(++t,e[n].left&&(t+=e[n].left._count));return t},enumerable:!0}),h.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(h,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),h.update=function(t){var e=this._stack;if(0===e.length)throw new Error("Can't update empty node!");var r=new Array(e.length),n=e[e.length-1];r[r.length-1]=new o(n._color,n.key,t,n.left,n.right,n._count);for(var i=e.length-2;i>=0;--i)(n=e[i]).left===e[i+1]?r[i]=new o(n._color,n.key,n.value,r[i+1],n.right,n._count):r[i]=new o(n._color,n.key,n.value,n.left,r[i+1],n._count);return new g(this.tree._compare,r[0])},h.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(h,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}})},{}],151:[function(t,e,r){var n=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],i=607/128,o=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function a(t){if(t<0)return Number("0/0");for(var e=o[0],r=o.length-1;r>0;--r)e+=o[r]/(t+r);var n=t+i+.5;return.5*Math.log(2*Math.PI)+(t+.5)*Math.log(n)-n+Math.log(e)-Math.log(t)}e.exports=function t(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*t(1-e));if(e>100)return Math.exp(a(e));e-=1;for(var r=n[0],i=1;i<9;i++)r+=n[i]/(e+i);var o=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(o,e+.5)*Math.exp(-o)*r},e.exports.log=a},{}],152:[function(t,e,r){e.exports=function(t,e){if("string"!=typeof t)throw new TypeError("must specify type string");if(e=e||{},"undefined"==typeof document&&!e.canvas)return null;var r=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(r.width=e.width);"number"==typeof e.height&&(r.height=e.height);var n,i=e;try{var o=[t];0===t.indexOf("webgl")&&o.push("experimental-"+t);for(var a=0;a<o.length;a++)if(n=r.getContext(o[a],i))return n}catch(t){n=null}return n||null}},{}],153:[function(t,e,r){"use strict";e.exports=function(t,e){var r=new c(t);return r.update(e),r};var n=t("./lib/text.js"),i=t("./lib/lines.js"),o=t("./lib/background.js"),a=t("./lib/cube.js"),s=t("./lib/ticks.js"),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function g(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function c(t){this.gl=t,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=o(t)}var u=c.prototype;function h(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}u.update=function(t){function e(e,r,n){if(n in t){var i,o=t[n],a=this[n];(e?Array.isArray(o)&&Array.isArray(o[0]):Array.isArray(o))?this[n]=i=[r(o[0]),r(o[1]),r(o[2])]:this[n]=i=[r(o),r(o),r(o)];for(var s=0;s<3;++s)if(i[s]!==a[s])return!0}return!1}t=t||{};var r,o=e.bind(this,!1,Number),a=e.bind(this,!1,Boolean),l=e.bind(this,!1,String),g=e.bind(this,!0,function(t){if(Array.isArray(t)){if(3===t.length)return[+t[0],+t[1],+t[2],1];if(4===t.length)return[+t[0],+t[1],+t[2],+t[3]]}return[0,0,0,1]}),c=!1,u=!1;if("bounds"in t)for(var h=t.bounds,d=0;d<2;++d)for(var A=0;A<3;++A)h[d][A]!==this.bounds[d][A]&&(u=!0),this.bounds[d][A]=h[d][A];if("ticks"in t){r=t.ticks,c=!0,this.autoTicks=!1;for(d=0;d<3;++d)this.tickSpacing[d]=0}else o("tickSpacing")&&(this.autoTicks=!0,u=!0);if(this._firstInit&&("ticks"in t||"tickSpacing"in t||(this.autoTicks=!0),u=!0,c=!0,this._firstInit=!1),u&&this.autoTicks&&(r=s.create(this.bounds,this.tickSpacing),c=!0),c){for(d=0;d<3;++d)r[d].sort(function(t,e){return t.x-e.x});s.equal(r,this.ticks)?c=!1:this.ticks=r}a("tickEnable"),l("tickFont")&&(c=!0),o("tickSize"),o("tickAngle"),o("tickPad"),g("tickColor");var f=l("labels");l("labelFont")&&(f=!0),a("labelEnable"),o("labelSize"),o("labelPad"),g("labelColor"),a("lineEnable"),a("lineMirror"),o("lineWidth"),g("lineColor"),a("lineTickEnable"),a("lineTickMirror"),o("lineTickLength"),o("lineTickWidth"),g("lineTickColor"),a("gridEnable"),o("gridWidth"),g("gridColor"),a("zeroEnable"),g("zeroLineColor"),o("zeroLineWidth"),a("backgroundEnable"),g("backgroundColor"),this._text?this._text&&(f||c)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=n(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&c&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=i(this.gl,this.bounds,this.ticks))};var d=[new h,new h,new h];function A(t,e,r,n,i){for(var o=t.primalOffset,a=t.primalMinor,s=t.mirrorOffset,l=t.mirrorMinor,g=n[e],c=0;c<3;++c)if(e!==c){var u=o,h=s,d=a,A=l;g&1<<c&&(u=s,h=o,d=l,A=a),u[c]=r[0][c],h[c]=r[1][c],i[c]>0?(d[c]=-1,A[c]=0):(d[c]=0,A[c]=1)}}var f=[0,0,0],C={model:l,view:l,projection:l,_ortho:!1};u.isOpaque=function(){return!0},u.isTransparent=function(){return!1},u.drawTransparent=function(t){};var p=[0,0,0],I=[0,0,0],v=[0,0,0];u.draw=function(t){t=t||C;for(var e=this.gl,r=t.model||l,n=t.view||l,i=t.projection||l,o=this.bounds,s=t._ortho||!1,c=a(r,n,i,o,s),u=c.cubeEdges,h=c.axis,m=n[12],y=n[13],b=n[14],x=n[15],_=(s?2:1)*this.pixelRatio*(i[3]*m+i[7]*y+i[11]*b+i[15]*x)/e.drawingBufferHeight,w=0;w<3;++w)this.lastCubeProps.cubeEdges[w]=u[w],this.lastCubeProps.axis[w]=h[w];var k=d;for(w=0;w<3;++w)A(d[w],w,this.bounds,u,h);e=this.gl;var T,M=f;for(w=0;w<3;++w)this.backgroundEnable[w]?M[w]=h[w]:M[w]=0;this._background.draw(r,n,i,o,M,this.backgroundColor),this._lines.bind(r,n,i,this);for(w=0;w<3;++w){var E=[0,0,0];h[w]>0?E[w]=o[1][w]:E[w]=o[0][w];for(var O=0;O<2;++O){var S=(w+1+O)%3,R=(w+1+(1^O))%3;this.gridEnable[S]&&this._lines.drawGrid(S,R,this.bounds,E,this.gridColor[S],this.gridWidth[S]*this.pixelRatio)}for(O=0;O<2;++O){S=(w+1+O)%3,R=(w+1+(1^O))%3;this.zeroEnable[R]&&Math.min(o[0][R],o[1][R])<=0&&Math.max(o[0][R],o[1][R])>=0&&this._lines.drawZero(S,R,this.bounds,E,this.zeroLineColor[R],this.zeroLineWidth[R]*this.pixelRatio)}}for(w=0;w<3;++w){this.lineEnable[w]&&this._lines.drawAxisLine(w,this.bounds,k[w].primalOffset,this.lineColor[w],this.lineWidth[w]*this.pixelRatio),this.lineMirror[w]&&this._lines.drawAxisLine(w,this.bounds,k[w].mirrorOffset,this.lineColor[w],this.lineWidth[w]*this.pixelRatio);var D=g(p,k[w].primalMinor),L=g(I,k[w].mirrorMinor),P=this.lineTickLength;for(O=0;O<3;++O){var N=_/r[5*O];D[O]*=P[O]*N,L[O]*=P[O]*N}this.lineTickEnable[w]&&this._lines.drawAxisTicks(w,k[w].primalOffset,D,this.lineTickColor[w],this.lineTickWidth[w]*this.pixelRatio),this.lineTickMirror[w]&&this._lines.drawAxisTicks(w,k[w].mirrorOffset,L,this.lineTickColor[w],this.lineTickWidth[w]*this.pixelRatio)}this._lines.unbind(),this._text.bind(r,n,i,this.pixelRatio);var z,F;function B(t){(F=[0,0,0])[t]=1}function j(t,e,r){var n=(t+1)%3,i=(t+2)%3,o=e[n],a=e[i],s=r[n],l=r[i];o>0&&l>0?B(n):o>0&&l<0?B(n):o<0&&l>0?B(n):o<0&&l<0?B(n):a>0&&s>0?B(i):a>0&&s<0?B(i):a<0&&s>0?B(i):a<0&&s<0&&B(i)}for(w=0;w<3;++w){var V=k[w].primalMinor,G=k[w].mirrorMinor,U=g(v,k[w].primalOffset);for(O=0;O<3;++O)this.lineTickEnable[w]&&(U[O]+=_*V[O]*Math.max(this.lineTickLength[O],0)/r[5*O]);var Z=[0,0,0];if(Z[w]=1,this.tickEnable[w]){-3600===this.tickAngle[w]?(this.tickAngle[w]=0,this.tickAlign[w]="auto"):this.tickAlign[w]=-1,z=1,"auto"===(T=[this.tickAlign[w],.5,z])[0]?T[0]=0:T[0]=parseInt(""+T[0]),F=[0,0,0],j(w,V,G);for(O=0;O<3;++O)U[O]+=_*V[O]*this.tickPad[O]/r[5*O];this._text.drawTicks(w,this.tickSize[w],this.tickAngle[w],U,this.tickColor[w],Z,F,T)}if(this.labelEnable[w]){z=0,F=[0,0,0],this.labels[w].length>4&&(B(w),z=1),"auto"===(T=[this.labelAlign[w],.5,z])[0]?T[0]=0:T[0]=parseInt(""+T[0]);for(O=0;O<3;++O)U[O]+=_*V[O]*this.labelPad[O]/r[5*O];U[w]+=.5*(o[0][w]+o[1][w]),this._text.drawLabel(w,this.labelSize[w],this.labelAngle[w],U,this.labelColor[w],[0,0,0],F,T)}}this._text.unbind()},u.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":154,"./lib/cube.js":155,"./lib/lines.js":156,"./lib/text.js":158,"./lib/ticks.js":159}],154:[function(t,e,r){"use strict";e.exports=function(t){for(var e=[],r=[],s=0,l=0;l<3;++l)for(var g=(l+1)%3,c=(l+2)%3,u=[0,0,0],h=[0,0,0],d=-1;d<=1;d+=2){r.push(s,s+2,s+1,s+1,s+2,s+3),u[l]=d,h[l]=d;for(var A=-1;A<=1;A+=2){u[g]=A;for(var f=-1;f<=1;f+=2)u[c]=f,e.push(u[0],u[1],u[2],h[0],h[1],h[2]),s+=1}var C=g;g=c,c=C}var p=n(t,new Float32Array(e)),I=n(t,new Uint16Array(r),t.ELEMENT_ARRAY_BUFFER),v=i(t,[{buffer:p,type:t.FLOAT,size:3,offset:0,stride:24},{buffer:p,type:t.FLOAT,size:3,offset:12,stride:24}],I),m=o(t);return m.attributes.position.location=0,m.attributes.normal.location=1,new a(t,p,v,m)};var n=t("gl-buffer"),i=t("gl-vao"),o=t("./shaders").bg;function a(t,e,r,n){this.gl=t,this.buffer=e,this.vao=r,this.shader=n}var s=a.prototype;s.draw=function(t,e,r,n,i,o){for(var a=!1,s=0;s<3;++s)a=a||i[s];if(a){var l=this.gl;l.enable(l.POLYGON_OFFSET_FILL),l.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:t,view:e,projection:r,bounds:n,enable:i,colors:o},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),l.disable(l.POLYGON_OFFSET_FILL)}},s.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":157,"gl-buffer":161,"gl-vao":213}],155:[function(t,e,r){"use strict";e.exports=function(t,e,r,o,d){i(s,e,t),i(s,r,s);for(var I=0,v=0;v<2;++v){c[2]=o[v][2];for(var m=0;m<2;++m){c[1]=o[m][1];for(var y=0;y<2;++y)c[0]=o[y][0],h(l[I],c,s),I+=1}}for(var b=-1,v=0;v<8;++v){for(var x=l[v][3],_=0;_<3;++_)g[v][_]=l[v][_]/x;d&&(g[v][2]*=-1),x<0&&(b<0?b=v:g[v][2]<g[b][2]&&(b=v))}if(b<0){b=0;for(var w=0;w<3;++w){for(var k=(w+2)%3,T=(w+1)%3,M=-1,E=-1,O=0;O<2;++O){var S=O<<w,R=S+(O<<k)+(1-O<<T),D=S+(1-O<<k)+(O<<T);a(g[S],g[R],g[D],u)<0||(O?M=1:E=1)}if(M<0||E<0)E>M&&(b|=1<<w);else{for(var O=0;O<2;++O){var S=O<<w,R=S+(O<<k)+(1-O<<T),D=S+(1-O<<k)+(O<<T),L=A([l[S],l[R],l[D],l[S+(1<<k)+(1<<T)]]);O?M=L:E=L}E>M&&(b|=1<<w)}}}for(var P=7^b,N=-1,v=0;v<8;++v)v!==b&&v!==P&&(N<0?N=v:g[N][1]>g[v][1]&&(N=v));for(var z=-1,v=0;v<3;++v){var F=N^1<<v;if(F!==b&&F!==P){z<0&&(z=F);var T=g[F];T[0]<g[z][0]&&(z=F)}}for(var B=-1,v=0;v<3;++v){var F=N^1<<v;if(F!==b&&F!==P&&F!==z){B<0&&(B=F);var T=g[F];T[0]>g[B][0]&&(B=F)}}var j=f;j[0]=j[1]=j[2]=0,j[n.log2(z^N)]=N&z,j[n.log2(N^B)]=N&B;var V=7^B;V===b||V===P?(V=7^z,j[n.log2(B^V)]=V&B):j[n.log2(z^V)]=V&z;for(var G=C,U=b,w=0;w<3;++w)G[w]=U&1<<w?-1:1;return p};var n=t("bit-twiddle"),i=t("gl-mat4/multiply"),o=t("split-polygon"),a=t("robust-orientation"),s=new Array(16),l=new Array(8),g=new Array(8),c=new Array(3),u=[0,0,0];function h(t,e,r){for(var n=0;n<4;++n){t[n]=r[12+n];for(var i=0;i<3;++i)t[n]+=e[i]*r[4*i+n]}}!function(){for(var t=0;t<8;++t)l[t]=[1,1,1,1],g[t]=[1,1,1]}();var d=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function A(t){for(var e=0;e<d.length;++e)if((t=o.positive(t,d[e])).length<3)return 0;var r=t[0],n=r[0]/r[3],i=r[1]/r[3],a=0;for(e=1;e+1<t.length;++e){var s=t[e],l=t[e+1],g=s[0]/s[3]-n,c=s[1]/s[3]-i,u=l[0]/l[3]-n,h=l[1]/l[3]-i;a+=Math.abs(g*h-c*u)}return a}var f=[1,1,1],C=[0,0,0],p={cubeEdges:f,axis:C}},{"bit-twiddle":33,"gl-mat4/multiply":178,"robust-orientation":669,"split-polygon":686}],156:[function(t,e,r){"use strict";e.exports=function(t,e,r){var a=[],s=[0,0,0],l=[0,0,0],g=[0,0,0],c=[0,0,0];a.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var u=0;u<3;++u){for(var h=a.length/3|0,A=0;A<r[u].length;++A){var f=+r[u][A].x;a.push(f,0,1,f,1,1,f,0,-1,f,0,-1,f,1,1,f,1,-1)}var C=a.length/3|0;s[u]=h,l[u]=C-h;for(var h=a.length/3|0,p=0;p<r[u].length;++p){var f=+r[u][p].x;a.push(f,0,1,f,1,1,f,0,-1,f,0,-1,f,1,1,f,1,-1)}var C=a.length/3|0;g[u]=h,c[u]=C-h}var I=n(t,new Float32Array(a)),v=i(t,[{buffer:I,type:t.FLOAT,size:3,stride:0,offset:0}]),m=o(t);return m.attributes.position.location=0,new d(t,I,v,m,l,s,c,g)};var n=t("gl-buffer"),i=t("gl-vao"),o=t("./shaders").line,a=[0,0,0],s=[0,0,0],l=[0,0,0],g=[0,0,0],c=[1,1];function u(t){return t[0]=t[1]=t[2]=0,t}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function d(t,e,r,n,i,o,a,s){this.gl=t,this.vertBuffer=e,this.vao=r,this.shader=n,this.tickCount=i,this.tickOffset=o,this.gridCount=a,this.gridOffset=s}var A=d.prototype;A.bind=function(t,e,r){this.shader.bind(),this.shader.uniforms.model=t,this.shader.uniforms.view=e,this.shader.uniforms.projection=r,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=c,this.vao.bind()},A.unbind=function(){this.vao.unbind()},A.drawAxisLine=function(t,e,r,n,i){var o=u(s);this.shader.uniforms.majorAxis=s,o[t]=e[1][t]-e[0][t],this.shader.uniforms.minorAxis=o;var a,c=h(g,r);c[t]+=e[0][t],this.shader.uniforms.offset=c,this.shader.uniforms.lineWidth=i,this.shader.uniforms.color=n,(a=u(l))[(t+2)%3]=1,this.shader.uniforms.screenAxis=a,this.vao.draw(this.gl.TRIANGLES,6),(a=u(l))[(t+1)%3]=1,this.shader.uniforms.screenAxis=a,this.vao.draw(this.gl.TRIANGLES,6)},A.drawAxisTicks=function(t,e,r,n,i){if(this.tickCount[t]){var o=u(a);o[t]=1,this.shader.uniforms.majorAxis=o,this.shader.uniforms.offset=e,this.shader.uniforms.minorAxis=r,this.shader.uniforms.color=n,this.shader.uniforms.lineWidth=i;var s=u(l);s[t]=1,this.shader.uniforms.screenAxis=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t])}},A.drawGrid=function(t,e,r,n,i,o){if(this.gridCount[t]){var c=u(s);c[e]=r[1][e]-r[0][e],this.shader.uniforms.minorAxis=c;var d=h(g,n);d[e]+=r[0][e],this.shader.uniforms.offset=d;var A=u(a);A[t]=1,this.shader.uniforms.majorAxis=A;var f=u(l);f[t]=1,this.shader.uniforms.screenAxis=f,this.shader.uniforms.lineWidth=o,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,this.gridCount[t],this.gridOffset[t])}},A.drawZero=function(t,e,r,n,i,o){var a=u(s);this.shader.uniforms.majorAxis=a,a[t]=r[1][t]-r[0][t],this.shader.uniforms.minorAxis=a;var c=h(g,n);c[t]+=r[0][t],this.shader.uniforms.offset=c;var d=u(l);d[e]=1,this.shader.uniforms.screenAxis=d,this.shader.uniforms.lineWidth=o,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,6)},A.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":157,"gl-buffer":161,"gl-vao":213}],157:[function(t,e,r){"use strict";var n=t("glslify"),i=t("gl-shader"),o=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);r.line=function(t){return i(t,o,a,null,[{name:"position",type:"vec3"}])};var s=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),l=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);r.text=function(t){return i(t,s,l,null,[{name:"position",type:"vec3"}])};var g=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),c=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);r.bg=function(t){return i(t,g,c,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":200,glslify:228}],158:[function(t,e,r){(function(r){"use strict";e.exports=function(t,e,r,o,s,l){var c=n(t),u=i(t,[{buffer:c,size:3}]),h=a(t);h.attributes.position.location=0;var d=new g(t,h,c,u);return d.update(e,r,o,s,l),d};var n=t("gl-buffer"),i=t("gl-vao"),o=t("vectorize-text"),a=t("./shaders").text,s=window||r.global||{},l=s.__TEXT_CACHE||{};s.__TEXT_CACHE={};function g(t,e,r,n){this.gl=t,this.shader=e,this.buffer=r,this.vao=n,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var c=g.prototype,u=[0,0];c.bind=function(t,e,r,n){this.vao.bind(),this.shader.bind();var i=this.shader.uniforms;i.model=t,i.view=e,i.projection=r,i.pixelScale=n,u[0]=this.gl.drawingBufferWidth,u[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=u},c.unbind=function(){this.vao.unbind()},c.update=function(t,e,r,n,i){var a=[];function s(t,e,r,n,i,s){var g=l[r];g||(g=l[r]={});var c=g[e];c||(c=g[e]=function(t,e){try{return o(t,e)}catch(e){return console.warn('error vectorizing text:"'+t+'" error:',e),{cells:[],positions:[]}}}(e,{triangles:!0,font:r,textAlign:"center",textBaseline:"middle",lineSpacing:i,styletags:s}));for(var u=(n||12)/12,h=c.positions,d=c.cells,A=0,f=d.length;A<f;++A)for(var C=d[A],p=2;p>=0;--p){var I=h[C[p]];a.push(u*I[0],-u*I[1],t)}}for(var g=[0,0,0],c=[0,0,0],u=[0,0,0],h=[0,0,0],d={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},A=0;A<3;++A){u[A]=a.length/3|0,s(.5*(t[0][A]+t[1][A]),e[A],r[A],12,1.25,d),h[A]=(a.length/3|0)-u[A],g[A]=a.length/3|0;for(var f=0;f<n[A].length;++f)n[A][f].text&&s(n[A][f].x,n[A][f].text,n[A][f].font||i,n[A][f].fontSize||12,1.25,d);c[A]=(a.length/3|0)-g[A]}this.buffer.update(a),this.tickOffset=g,this.tickCount=c,this.labelOffset=u,this.labelCount=h},c.drawTicks=function(t,e,r,n,i,o,a,s){this.tickCount[t]&&(this.shader.uniforms.axis=o,this.shader.uniforms.color=i,this.shader.uniforms.angle=r,this.shader.uniforms.scale=e,this.shader.uniforms.offset=n,this.shader.uniforms.alignDir=a,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t]))},c.drawLabel=function(t,e,r,n,i,o,a,s){this.labelCount[t]&&(this.shader.uniforms.axis=o,this.shader.uniforms.color=i,this.shader.uniforms.angle=r,this.shader.uniforms.scale=e,this.shader.uniforms.offset=n,this.shader.uniforms.alignDir=a,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.labelCount[t],this.labelOffset[t]))},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this,t("_process"))},{"./shaders":157,_process:651,"gl-buffer":161,"gl-vao":213,"vectorize-text":715}],159:[function(t,e,r){"use strict";function n(t,e){var r=t+"",n=r.indexOf("."),i=0;n>=0&&(i=r.length-n-1);var o=Math.pow(10,i),a=Math.round(t*e*o),s=a+"";if(s.indexOf("e")>=0)return s;var l=a/o,g=a%o;a<0?(l=0|-Math.ceil(l),g=0|-g):(l=0|Math.floor(l),g|=0);var c=""+l;if(a<0&&(c="-"+c),i){for(var u=""+g;u.length<i;)u="0"+u;return c+"."+u}return c}r.create=function(t,e){for(var r=[],i=0;i<3;++i){for(var o=[],a=(t[0][i],t[1][i],0);a*e[i]<=t[1][i];++a)o.push({x:a*e[i],text:n(e[i],a)});for(var a=-1;a*e[i]>=t[0][i];--a)o.push({x:a*e[i],text:n(e[i],a)});r.push(o)}return r},r.equal=function(t,e){for(var r=0;r<3;++r){if(t[r].length!==e[r].length)return!1;for(var n=0;n<t[r].length;++n){var i=t[r][n],o=e[r][n];if(i.x!==o.x||i.text!==o.text||i.font!==o.font||i.fontColor!==o.fontColor||i.fontSize!==o.fontSize||i.dx!==o.dx||i.dy!==o.dy)return!1}}return!0}},{}],160:[function(t,e,r){"use strict";e.exports=function(t,e,r,l,u){var h=e.model||g,d=e.view||g,p=e.projection||g,I=e._ortho||!1,v=t.bounds,m=(u=u||o(h,d,p,v,I)).axis;a(c,d,h),a(c,p,c);for(var y=f,b=0;b<3;++b)y[b].lo=1/0,y[b].hi=-1/0,y[b].pixelsPerDataUnit=1/0;var x=n(s(c,c));s(c,c);for(var _=0;_<3;++_){var w=(_+1)%3,k=(_+2)%3,T=C;t:for(var b=0;b<2;++b){var M=[];if(m[_]<0!=!!b){T[_]=v[b][_];for(var E=0;E<2;++E){T[w]=v[E^b][w];for(var O=0;O<2;++O)T[k]=v[O^E^b][k],M.push(T.slice())}for(var S=I?5:4,E=S;E===S;++E){if(0===M.length)continue t;M=i.positive(M,x[E])}for(var E=0;E<M.length;++E)for(var k=M[E],R=A(C,c,k,r,l),O=0;O<3;++O)y[O].lo=Math.min(y[O].lo,k[O]),y[O].hi=Math.max(y[O].hi,k[O]),O!==_&&(y[O].pixelsPerDataUnit=Math.min(y[O].pixelsPerDataUnit,Math.abs(R[O])))}}}return y};var n=t("extract-frustum-planes"),i=t("split-polygon"),o=t("./lib/cube.js"),a=t("gl-mat4/multiply"),s=t("gl-mat4/transpose"),l=t("gl-vec4/transformMat4"),g=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),c=new Float32Array(16);function u(t,e,r){this.lo=t,this.hi=e,this.pixelsPerDataUnit=r}var h=[0,0,0,1],d=[0,0,0,1];function A(t,e,r,n,i){for(var o=0;o<3;++o){for(var a=h,s=d,g=0;g<3;++g)s[g]=a[g]=r[g];s[3]=a[3]=1,s[o]+=1,l(s,s,e),s[3]<0&&(t[o]=1/0),a[o]-=1,l(a,a,e),a[3]<0&&(t[o]=1/0);var c=(a[0]/a[3]-s[0]/s[3])*n,u=(a[1]/a[3]-s[1]/s[3])*i;t[o]=.25*Math.sqrt(c*c+u*u)}return t}var f=[new u(1/0,-1/0,1/0),new u(1/0,-1/0,1/0),new u(1/0,-1/0,1/0)],C=[0,0,0]},{"./lib/cube.js":155,"extract-frustum-planes":144,"gl-mat4/multiply":178,"gl-mat4/transpose":187,"gl-vec4/transformMat4":219,"split-polygon":686}],161:[function(t,e,r){"use strict";var n=t("typedarray-pool"),i=t("ndarray-ops"),o=t("ndarray"),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function s(t,e,r,n,i){this.gl=t,this.type=e,this.handle=r,this.length=n,this.usage=i}var l=s.prototype;function g(t,e,r,n,i,o){var a=i.length*i.BYTES_PER_ELEMENT;if(o<0)return t.bufferData(e,i,n),a;if(a+o>r)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return t.bufferSubData(e,o,i),r}function c(t,e){for(var r=n.malloc(t.length,e),i=t.length,o=0;o<i;++o)r[o]=t[o];return r}l.bind=function(){this.gl.bindBuffer(this.type,this.handle)},l.unbind=function(){this.gl.bindBuffer(this.type,null)},l.dispose=function(){this.gl.deleteBuffer(this.handle)},l.update=function(t,e){if("number"!=typeof e&&(e=-1),this.bind(),"object"==typeof t&&void 0!==t.shape){var r=t.dtype;if(a.indexOf(r)<0&&(r="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER)r=gl.getExtension("OES_element_index_uint")&&"uint16"!==r?"uint32":"uint16";if(r===t.dtype&&function(t,e){for(var r=1,n=e.length-1;n>=0;--n){if(e[n]!==r)return!1;r*=t[n]}return!0}(t.shape,t.stride))0===t.offset&&t.data.length===t.shape[0]?this.length=g(this.gl,this.type,this.length,this.usage,t.data,e):this.length=g(this.gl,this.type,this.length,this.usage,t.data.subarray(t.offset,t.shape[0]),e);else{var s=n.malloc(t.size,r),l=o(s,t.shape);i.assign(l,t),this.length=g(this.gl,this.type,this.length,this.usage,e<0?s:s.subarray(0,t.size),e),n.free(s)}}else if(Array.isArray(t)){var u;u=this.type===this.gl.ELEMENT_ARRAY_BUFFER?c(t,"uint16"):c(t,"float32"),this.length=g(this.gl,this.type,this.length,this.usage,e<0?u:u.subarray(0,t.length),e),n.free(u)}else if("object"==typeof t&&"number"==typeof t.length)this.length=g(this.gl,this.type,this.length,this.usage,t,e);else{if("number"!=typeof t&&void 0!==t)throw new Error("gl-buffer: Invalid data type");if(e>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(t|=0)<=0&&(t=1),this.gl.bufferData(this.type,0|t,this.usage),this.length=t}},e.exports=function(t,e,r,n){if(r=r||t.ARRAY_BUFFER,n=n||t.DYNAMIC_DRAW,r!==t.ARRAY_BUFFER&&r!==t.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(n!==t.DYNAMIC_DRAW&&n!==t.STATIC_DRAW&&n!==t.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var i=new s(t,r,t.createBuffer(),0,n);return i.update(e),i}},{ndarray:262,"ndarray-ops":259,"typedarray-pool":711}],162:[function(t,e,r){e.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34000:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],163:[function(t,e,r){var n=t("./1.0/numbers");e.exports=function(t){return n[t]}},{"./1.0/numbers":162}],164:[function(t,e,r){"use strict";e.exports=function(t){var e=t.gl,r=n(e),a=i(e,[{buffer:r,type:e.FLOAT,size:3,offset:0,stride:40},{buffer:r,type:e.FLOAT,size:4,offset:12,stride:40},{buffer:r,type:e.FLOAT,size:3,offset:28,stride:40}]),l=o(e);l.attributes.position.location=0,l.attributes.color.location=1,l.attributes.offset.location=2;var g=new s(e,r,a,l);return g.update(t),g};var n=t("gl-buffer"),i=t("gl-vao"),o=t("./shaders/index"),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(t,e,r,n){this.gl=t,this.shader=n,this.buffer=e,this.vao=r,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var l=s.prototype;function g(t,e){for(var r=0;r<3;++r)t[0][r]=Math.min(t[0][r],e[r]),t[1][r]=Math.max(t[1][r],e[r])}l.isOpaque=function(){return!this.hasAlpha},l.isTransparent=function(){return this.hasAlpha},l.drawTransparent=l.draw=function(t){var e=this.gl,r=this.shader.uniforms;this.shader.bind();var n=r.view=t.view||a,i=r.projection=t.projection||a;r.model=t.model||a,r.clipBounds=this.clipBounds,r.opacity=this.opacity;var o=n[12],s=n[13],l=n[14],g=n[15],c=(t._ortho||!1?2:1)*this.pixelRatio*(i[3]*o+i[7]*s+i[11]*l+i[15]*g)/e.drawingBufferHeight;this.vao.bind();for(var u=0;u<3;++u)e.lineWidth(this.lineWidth[u]*this.pixelRatio),r.capSize=this.capSize[u]*c,this.lineCount[u]&&e.drawArrays(e.LINES,this.lineOffset[u],this.lineCount[u]);this.vao.unbind()};var c=function(){for(var t=new Array(3),e=0;e<3;++e){for(var r=[],n=1;n<=2;++n)for(var i=-1;i<=1;i+=2){var o=[0,0,0];o[(n+e)%3]=i,r.push(o)}t[e]=r}return t}();function u(t,e,r,n){for(var i=c[n],o=0;o<i.length;++o){var a=i[o];t.push(e[0],e[1],e[2],r[0],r[1],r[2],r[3],a[0],a[1],a[2])}return i.length}l.update=function(t){"lineWidth"in(t=t||{})&&(this.lineWidth=t.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in t&&(this.capSize=t.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var e=t.color||[[0,0,0],[0,0,0],[0,0,0]],r=t.position,n=t.error;if(Array.isArray(e[0])||(e=[e,e,e]),r&&n){var i=[],o=r.length,a=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var s=0;s<3;++s){this.lineOffset[s]=a;t:for(var l=0;l<o;++l){for(var c=r[l],h=0;h<3;++h)if(isNaN(c[h])||!isFinite(c[h]))continue t;var d=n[l],A=e[s];if(Array.isArray(A[0])&&(A=e[l]),3===A.length?A=[A[0],A[1],A[2],1]:4===A.length&&(A=[A[0],A[1],A[2],A[3]],!this.hasAlpha&&A[3]<1&&(this.hasAlpha=!0)),!isNaN(d[0][s])&&!isNaN(d[1][s])){var f;if(d[0][s]<0)(f=c.slice())[s]+=d[0][s],i.push(c[0],c[1],c[2],A[0],A[1],A[2],A[3],0,0,0,f[0],f[1],f[2],A[0],A[1],A[2],A[3],0,0,0),g(this.bounds,f),a+=2+u(i,f,A,s);if(d[1][s]>0)(f=c.slice())[s]+=d[1][s],i.push(c[0],c[1],c[2],A[0],A[1],A[2],A[3],0,0,0,f[0],f[1],f[2],A[0],A[1],A[2],A[3],0,0,0),g(this.bounds,f),a+=2+u(i,f,A,s)}}this.lineCount[s]=a-this.lineOffset[s]}this.buffer.update(i)}},l.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":165,"gl-buffer":161,"gl-vao":213}],165:[function(t,e,r){"use strict";var n=t("glslify"),i=t("gl-shader"),o=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);e.exports=function(t){return i(t,o,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":200,glslify:228}],166:[function(t,e,r){"use strict";var n=t("gl-texture2d");e.exports=function(t,e,r,n){i||(i=t.FRAMEBUFFER_UNSUPPORTED,o=t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,a=t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,s=t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var g=t.getExtension("WEBGL_draw_buffers");!l&&g&&function(t,e){var r=t.getParameter(e.MAX_COLOR_ATTACHMENTS_WEBGL);l=new Array(r+1);for(var n=0;n<=r;++n){for(var i=new Array(r),o=0;o<n;++o)i[o]=t.COLOR_ATTACHMENT0+o;for(var o=n;o<r;++o)i[o]=t.NONE;l[n]=i}}(t,g);Array.isArray(e)&&(n=r,r=0|e[1],e=0|e[0]);if("number"!=typeof e)throw new Error("gl-fbo: Missing shape parameter");var c=t.getParameter(t.MAX_RENDERBUFFER_SIZE);if(e<0||e>c||r<0||r>c)throw new Error("gl-fbo: Parameters are too large for FBO");var u=1;if("color"in(n=n||{})){if((u=Math.max(0|n.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(u>1){if(!g)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(u>t.getParameter(g.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+u+" draw buffers")}}var h=t.UNSIGNED_BYTE,d=t.getExtension("OES_texture_float");if(n.float&&u>0){if(!d)throw new Error("gl-fbo: Context does not support floating point textures");h=t.FLOAT}else n.preferFloat&&u>0&&d&&(h=t.FLOAT);var f=!0;"depth"in n&&(f=!!n.depth);var C=!1;"stencil"in n&&(C=!!n.stencil);return new A(t,e,r,h,u,f,C,g)};var i,o,a,s,l=null;function g(t){return[t.getParameter(t.FRAMEBUFFER_BINDING),t.getParameter(t.RENDERBUFFER_BINDING),t.getParameter(t.TEXTURE_BINDING_2D)]}function c(t,e){t.bindFramebuffer(t.FRAMEBUFFER,e[0]),t.bindRenderbuffer(t.RENDERBUFFER,e[1]),t.bindTexture(t.TEXTURE_2D,e[2])}function u(t){switch(t){case i:throw new Error("gl-fbo: Framebuffer unsupported");case o:throw new Error("gl-fbo: Framebuffer incomplete attachment");case a:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case s:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function h(t,e,r,i,o,a){if(!i)return null;var s=n(t,e,r,o,i);return s.magFilter=t.NEAREST,s.minFilter=t.NEAREST,s.mipSamples=1,s.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,a,t.TEXTURE_2D,s.handle,0),s}function d(t,e,r,n,i){var o=t.createRenderbuffer();return t.bindRenderbuffer(t.RENDERBUFFER,o),t.renderbufferStorage(t.RENDERBUFFER,n,e,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,i,t.RENDERBUFFER,o),o}function A(t,e,r,n,i,o,a,s){this.gl=t,this._shape=[0|e,0|r],this._destroyed=!1,this._ext=s,this.color=new Array(i);for(var A=0;A<i;++A)this.color[A]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=n,this._useDepth=o,this._useStencil=a;var f=this,C=[0|e,0|r];Object.defineProperties(C,{0:{get:function(){return f._shape[0]},set:function(t){return f.width=t}},1:{get:function(){return f._shape[1]},set:function(t){return f.height=t}}}),this._shapeVector=C,function(t){var e=g(t.gl),r=t.gl,n=t.handle=r.createFramebuffer(),i=t._shape[0],o=t._shape[1],a=t.color.length,s=t._ext,A=t._useStencil,f=t._useDepth,C=t._colorType;r.bindFramebuffer(r.FRAMEBUFFER,n);for(var p=0;p<a;++p)t.color[p]=h(r,i,o,C,r.RGBA,r.COLOR_ATTACHMENT0+p);0===a?(t._color_rb=d(r,i,o,r.RGBA4,r.COLOR_ATTACHMENT0),s&&s.drawBuffersWEBGL(l[0])):a>1&&s.drawBuffersWEBGL(l[a]);var I=r.getExtension("WEBGL_depth_texture");I?A?t.depth=h(r,i,o,I.UNSIGNED_INT_24_8_WEBGL,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):f&&(t.depth=h(r,i,o,r.UNSIGNED_SHORT,r.DEPTH_COMPONENT,r.DEPTH_ATTACHMENT)):f&&A?t._depth_rb=d(r,i,o,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):f?t._depth_rb=d(r,i,o,r.DEPTH_COMPONENT16,r.DEPTH_ATTACHMENT):A&&(t._depth_rb=d(r,i,o,r.STENCIL_INDEX,r.STENCIL_ATTACHMENT));var v=r.checkFramebufferStatus(r.FRAMEBUFFER);if(v!==r.FRAMEBUFFER_COMPLETE){for(t._destroyed=!0,r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(t.handle),t.handle=null,t.depth&&(t.depth.dispose(),t.depth=null),t._depth_rb&&(r.deleteRenderbuffer(t._depth_rb),t._depth_rb=null),p=0;p<t.color.length;++p)t.color[p].dispose(),t.color[p]=null;t._color_rb&&(r.deleteRenderbuffer(t._color_rb),t._color_rb=null),c(r,e),u(v)}c(r,e)}(this)}var f=A.prototype;function C(t,e,r){if(t._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(t._shape[0]!==e||t._shape[1]!==r){var n=t.gl,i=n.getParameter(n.MAX_RENDERBUFFER_SIZE);if(e<0||e>i||r<0||r>i)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");t._shape[0]=e,t._shape[1]=r;for(var o=g(n),a=0;a<t.color.length;++a)t.color[a].shape=t._shape;t._color_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,t._color_rb),n.renderbufferStorage(n.RENDERBUFFER,n.RGBA4,t._shape[0],t._shape[1])),t.depth&&(t.depth.shape=t._shape),t._depth_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,t._depth_rb),t._useDepth&&t._useStencil?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t._shape[0],t._shape[1]):t._useDepth?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t._shape[0],t._shape[1]):t._useStencil&&n.renderbufferStorage(n.RENDERBUFFER,n.STENCIL_INDEX,t._shape[0],t._shape[1])),n.bindFramebuffer(n.FRAMEBUFFER,t.handle);var s=n.checkFramebufferStatus(n.FRAMEBUFFER);s!==n.FRAMEBUFFER_COMPLETE&&(t.dispose(),c(n,o),u(s)),c(n,o)}}Object.defineProperties(f,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(t){if(Array.isArray(t)||(t=[0|t,0|t]),2!==t.length)throw new Error("gl-fbo: Shape vector must be length 2");var e=0|t[0],r=0|t[1];return C(this,e,r),[e,r]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(t){return C(this,t|=0,this._shape[1]),t},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(t){return t|=0,C(this,this._shape[0],t),t},enumerable:!1}}),f.bind=function(){if(!this._destroyed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.handle),t.viewport(0,0,this._shape[0],this._shape[1])}},f.dispose=function(){if(!this._destroyed){this._destroyed=!0;var t=this.gl;t.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(t.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var e=0;e<this.color.length;++e)this.color[e].dispose(),this.color[e]=null;this._color_rb&&(t.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":209}],167:[function(t,e,r){var n=t("sprintf-js").sprintf,i=t("gl-constants/lookup"),o=t("glsl-shader-name"),a=t("add-line-numbers");e.exports=function(t,e,r){"use strict";var s=o(e)||"of unknown name (see npm glsl-shader-name)",l="unknown type";void 0!==r&&(l=r===i.FRAGMENT_SHADER?"fragment":"vertex");for(var g=n("Error compiling %s shader %s:\n",l,s),c=n("%s%s",g,t),u=t.split("\n"),h={},d=0;d<u.length;d++){var A=u[d];if(""!==A&&"\0"!==A){var f=parseInt(A.split(":")[2]);if(isNaN(f))throw new Error(n("Could not parse error: %s",A));h[f]=A}}for(var C=a(e).split("\n"),d=0;d<C.length;d++)if(h[d+3]||h[d+2]||h[d+1]){var p=C[d];if(g+=p+"\n",h[d+1]){var I=h[d+1];I=I.substr(I.split(":",3).join(":").length+1).trim(),g+=n("^^^ %s\n\n",I)}}return{long:g.trim(),short:c.trim()}}},{"add-line-numbers":4,"gl-constants/lookup":163,"glsl-shader-name":220,"sprintf-js":687}],168:[function(t,e,r){var n=t("glslify"),i=t("gl-shader"),o=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),l=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];r.createShader=function(t){return i(t,o,a,null,l)},r.createPickShader=function(t){return i(t,o,s,null,l)}},{"gl-shader":200,glslify:228}],169:[function(t,e,r){"use strict";e.exports=function(t){var e=t.gl||t.scene&&t.scene.gl,r=u(e);r.attributes.position.location=0,r.attributes.nextPosition.location=1,r.attributes.arcLength.location=2,r.attributes.lineWidth.location=3,r.attributes.color.location=4;var a=h(e);a.attributes.position.location=0,a.attributes.nextPosition.location=1,a.attributes.arcLength.location=2,a.attributes.lineWidth.location=3,a.attributes.color.location=4;for(var s=n(e),l=i(e,[{buffer:s,size:3,offset:0,stride:48},{buffer:s,size:3,offset:12,stride:48},{buffer:s,size:1,offset:24,stride:48},{buffer:s,size:1,offset:28,stride:48},{buffer:s,size:4,offset:32,stride:48}]),c=g(new Array(1024),[256,1,4]),d=0;d<1024;++d)c.data[d]=255;var A=o(e,c);A.wrap=e.REPEAT;var f=new p(e,r,a,s,l,A);return f.update(t),f};var n=t("gl-buffer"),i=t("gl-vao"),o=t("gl-texture2d"),a=new Uint8Array(4),s=new Float32Array(a.buffer);var l=t("binary-search-bounds"),g=t("ndarray"),c=t("./lib/shaders"),u=c.createShader,h=c.createPickShader,d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function A(t,e){for(var r=0,n=0;n<3;++n){var i=t[n]-e[n];r+=i*i}return Math.sqrt(r)}function f(t){for(var e=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],r=0;r<3;++r)e[0][r]=Math.max(t[0][r],e[0][r]),e[1][r]=Math.min(t[1][r],e[1][r]);return e}function C(t,e,r,n){this.arcLength=t,this.position=e,this.index=r,this.dataCoordinate=n}function p(t,e,r,n,i,o){this.gl=t,this.shader=e,this.pickShader=r,this.buffer=n,this.vao=i,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=o,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var I=p.prototype;I.isTransparent=function(){return this.hasAlpha},I.isOpaque=function(){return!this.hasAlpha},I.pickSlots=1,I.setPickBase=function(t){this.pickId=t},I.drawTransparent=I.draw=function(t){if(this.vertexCount){var e=this.gl,r=this.shader,n=this.vao;r.bind(),r.uniforms={model:t.model||d,view:t.view||d,projection:t.projection||d,clipBounds:f(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},n.bind(),n.draw(e.TRIANGLE_STRIP,this.vertexCount),n.unbind()}},I.drawPick=function(t){if(this.vertexCount){var e=this.gl,r=this.pickShader,n=this.vao;r.bind(),r.uniforms={model:t.model||d,view:t.view||d,projection:t.projection||d,pickId:this.pickId,clipBounds:f(this.clipBounds),screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},n.bind(),n.draw(e.TRIANGLE_STRIP,this.vertexCount),n.unbind()}},I.update=function(t){var e,r;this.dirty=!0;var n=!!t.connectGaps;"dashScale"in t&&(this.dashScale=t.dashScale),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var i=[],o=[],a=[],s=0,c=0,u=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],h=t.position||t.positions;if(h){var d=t.color||t.colors||[0,0,0,1],f=t.lineWidth||1,C=!1;t:for(e=1;e<h.length;++e){var p,I,v,m=h[e-1],y=h[e];for(o.push(s),a.push(m.slice()),r=0;r<3;++r){if(isNaN(m[r])||isNaN(y[r])||!isFinite(m[r])||!isFinite(y[r])){if(!n&&i.length>0){for(var b=0;b<24;++b)i.push(i[i.length-12]);c+=2,C=!0}continue t}u[0][r]=Math.min(u[0][r],m[r],y[r]),u[1][r]=Math.max(u[1][r],m[r],y[r])}Array.isArray(d[0])?(p=d.length>e-1?d[e-1]:d.length>0?d[d.length-1]:[0,0,0,1],I=d.length>e?d[e]:d.length>0?d[d.length-1]:[0,0,0,1]):p=I=d,3===p.length&&(p=[p[0],p[1],p[2],1]),3===I.length&&(I=[I[0],I[1],I[2],1]),!this.hasAlpha&&p[3]<1&&(this.hasAlpha=!0),v=Array.isArray(f)?f.length>e-1?f[e-1]:f.length>0?f[f.length-1]:[0,0,0,1]:f;var x=s;if(s+=A(m,y),C){for(r=0;r<2;++r)i.push(m[0],m[1],m[2],y[0],y[1],y[2],x,v,p[0],p[1],p[2],p[3]);c+=2,C=!1}i.push(m[0],m[1],m[2],y[0],y[1],y[2],x,v,p[0],p[1],p[2],p[3],m[0],m[1],m[2],y[0],y[1],y[2],x,-v,p[0],p[1],p[2],p[3],y[0],y[1],y[2],m[0],m[1],m[2],s,-v,I[0],I[1],I[2],I[3],y[0],y[1],y[2],m[0],m[1],m[2],s,v,I[0],I[1],I[2],I[3]),c+=4}}if(this.buffer.update(i),o.push(s),a.push(h[h.length-1].slice()),this.bounds=u,this.vertexCount=c,this.points=a,this.arcLength=o,"dashes"in t){var _=t.dashes.slice();for(_.unshift(0),e=1;e<_.length;++e)_[e]=_[e-1]+_[e];var w=g(new Array(1024),[256,1,4]);for(e=0;e<256;++e){for(r=0;r<4;++r)w.set(e,0,r,0);1&l.le(_,_[_.length-1]*e/255)?w.set(e,0,0,0):w.set(e,0,0,255)}this.texture.setPixels(w)}},I.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},I.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=function(t,e,r,n){return a[0]=n,a[1]=r,a[2]=e,a[3]=t,s[0]}(t.value[0],t.value[1],t.value[2],0),r=l.le(this.arcLength,e);if(r<0)return null;if(r===this.arcLength.length-1)return new C(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),r);for(var n=this.points[r],i=this.points[Math.min(r+1,this.points.length-1)],o=(e-this.arcLength[r])/(this.arcLength[r+1]-this.arcLength[r]),g=1-o,c=[0,0,0],u=0;u<3;++u)c[u]=g*n[u]+o*i[u];var h=Math.min(o<.5?r:r+1,this.points.length-1);return new C(e,c,h,this.points[h])}},{"./lib/shaders":168,"binary-search-bounds":32,"gl-buffer":161,"gl-texture2d":209,"gl-vao":213,ndarray:262}],170:[function(t,e,r){e.exports=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},{}],171:[function(t,e,r){e.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],172:[function(t,e,r){e.exports=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],l=t[7],g=t[8],c=t[9],u=t[10],h=t[11],d=t[12],A=t[13],f=t[14],C=t[15];return(e*a-r*o)*(u*C-h*f)-(e*s-n*o)*(c*C-h*A)+(e*l-i*o)*(c*f-u*A)+(r*s-n*a)*(g*C-h*d)-(r*l-i*a)*(g*f-u*d)+(n*l-i*s)*(g*A-c*d)}},{}],173:[function(t,e,r){e.exports=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,l=i+i,g=r*a,c=n*a,u=n*s,h=i*a,d=i*s,A=i*l,f=o*a,C=o*s,p=o*l;return t[0]=1-u-A,t[1]=c+p,t[2]=h-C,t[3]=0,t[4]=c-p,t[5]=1-g-A,t[6]=d+f,t[7]=0,t[8]=h+C,t[9]=d-f,t[10]=1-g-u,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],174:[function(t,e,r){e.exports=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=n+n,l=i+i,g=o+o,c=n*s,u=n*l,h=n*g,d=i*l,A=i*g,f=o*g,C=a*s,p=a*l,I=a*g;return t[0]=1-(d+f),t[1]=u+I,t[2]=h-p,t[3]=0,t[4]=u-I,t[5]=1-(c+f),t[6]=A+C,t[7]=0,t[8]=h+p,t[9]=A-C,t[10]=1-(c+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}},{}],175:[function(t,e,r){e.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},{}],176:[function(t,e,r){e.exports=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],g=e[7],c=e[8],u=e[9],h=e[10],d=e[11],A=e[12],f=e[13],C=e[14],p=e[15],I=r*s-n*a,v=r*l-i*a,m=r*g-o*a,y=n*l-i*s,b=n*g-o*s,x=i*g-o*l,_=c*f-u*A,w=c*C-h*A,k=c*p-d*A,T=u*C-h*f,M=u*p-d*f,E=h*p-d*C,O=I*E-v*M+m*T+y*k-b*w+x*_;if(!O)return null;return O=1/O,t[0]=(s*E-l*M+g*T)*O,t[1]=(i*M-n*E-o*T)*O,t[2]=(f*x-C*b+p*y)*O,t[3]=(h*b-u*x-d*y)*O,t[4]=(l*k-a*E-g*w)*O,t[5]=(r*E-i*k+o*w)*O,t[6]=(C*m-A*x-p*v)*O,t[7]=(c*x-h*m+d*v)*O,t[8]=(a*M-s*k+g*_)*O,t[9]=(n*k-r*M-o*_)*O,t[10]=(A*b-f*m+p*I)*O,t[11]=(u*m-c*b-d*I)*O,t[12]=(s*w-a*T-l*_)*O,t[13]=(r*T-n*w+i*_)*O,t[14]=(f*v-A*y-C*I)*O,t[15]=(c*y-u*v+h*I)*O,t}},{}],177:[function(t,e,r){var n=t("./identity");e.exports=function(t,e,r,i){var o,a,s,l,g,c,u,h,d,A,f=e[0],C=e[1],p=e[2],I=i[0],v=i[1],m=i[2],y=r[0],b=r[1],x=r[2];if(Math.abs(f-y)<1e-6&&Math.abs(C-b)<1e-6&&Math.abs(p-x)<1e-6)return n(t);u=f-y,h=C-b,d=p-x,A=1/Math.sqrt(u*u+h*h+d*d),o=v*(d*=A)-m*(h*=A),a=m*(u*=A)-I*d,s=I*h-v*u,(A=Math.sqrt(o*o+a*a+s*s))?(o*=A=1/A,a*=A,s*=A):(o=0,a=0,s=0);l=h*s-d*a,g=d*o-u*s,c=u*a-h*o,(A=Math.sqrt(l*l+g*g+c*c))?(l*=A=1/A,g*=A,c*=A):(l=0,g=0,c=0);return t[0]=o,t[1]=l,t[2]=u,t[3]=0,t[4]=a,t[5]=g,t[6]=h,t[7]=0,t[8]=s,t[9]=c,t[10]=d,t[11]=0,t[12]=-(o*f+a*C+s*p),t[13]=-(l*f+g*C+c*p),t[14]=-(u*f+h*C+d*p),t[15]=1,t}},{"./identity":175}],178:[function(t,e,r){e.exports=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],g=e[6],c=e[7],u=e[8],h=e[9],d=e[10],A=e[11],f=e[12],C=e[13],p=e[14],I=e[15],v=r[0],m=r[1],y=r[2],b=r[3];return t[0]=v*n+m*s+y*u+b*f,t[1]=v*i+m*l+y*h+b*C,t[2]=v*o+m*g+y*d+b*p,t[3]=v*a+m*c+y*A+b*I,v=r[4],m=r[5],y=r[6],b=r[7],t[4]=v*n+m*s+y*u+b*f,t[5]=v*i+m*l+y*h+b*C,t[6]=v*o+m*g+y*d+b*p,t[7]=v*a+m*c+y*A+b*I,v=r[8],m=r[9],y=r[10],b=r[11],t[8]=v*n+m*s+y*u+b*f,t[9]=v*i+m*l+y*h+b*C,t[10]=v*o+m*g+y*d+b*p,t[11]=v*a+m*c+y*A+b*I,v=r[12],m=r[13],y=r[14],b=r[15],t[12]=v*n+m*s+y*u+b*f,t[13]=v*i+m*l+y*h+b*C,t[14]=v*o+m*g+y*d+b*p,t[15]=v*a+m*c+y*A+b*I,t}},{}],179:[function(t,e,r){e.exports=function(t,e,r,n,i,o,a){var s=1/(e-r),l=1/(n-i),g=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*g,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*l,t[14]=(a+o)*g,t[15]=1,t}},{}],180:[function(t,e,r){e.exports=function(t,e,r,n,i){var o=1/Math.tan(e/2),a=1/(n-i);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*a,t[15]=0,t}},{}],181:[function(t,e,r){e.exports=function(t,e,r,n){var i,o,a,s,l,g,c,u,h,d,A,f,C,p,I,v,m,y,b,x,_,w,k,T,M=n[0],E=n[1],O=n[2],S=Math.sqrt(M*M+E*E+O*O);if(Math.abs(S)<1e-6)return null;M*=S=1/S,E*=S,O*=S,i=Math.sin(r),o=Math.cos(r),a=1-o,s=e[0],l=e[1],g=e[2],c=e[3],u=e[4],h=e[5],d=e[6],A=e[7],f=e[8],C=e[9],p=e[10],I=e[11],v=M*M*a+o,m=E*M*a+O*i,y=O*M*a-E*i,b=M*E*a-O*i,x=E*E*a+o,_=O*E*a+M*i,w=M*O*a+E*i,k=E*O*a-M*i,T=O*O*a+o,t[0]=s*v+u*m+f*y,t[1]=l*v+h*m+C*y,t[2]=g*v+d*m+p*y,t[3]=c*v+A*m+I*y,t[4]=s*b+u*x+f*_,t[5]=l*b+h*x+C*_,t[6]=g*b+d*x+p*_,t[7]=c*b+A*x+I*_,t[8]=s*w+u*k+f*T,t[9]=l*w+h*k+C*T,t[10]=g*w+d*k+p*T,t[11]=c*w+A*k+I*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t}},{}],182:[function(t,e,r){e.exports=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],s=e[6],l=e[7],g=e[8],c=e[9],u=e[10],h=e[11];e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[4]=o*i+g*n,t[5]=a*i+c*n,t[6]=s*i+u*n,t[7]=l*i+h*n,t[8]=g*i-o*n,t[9]=c*i-a*n,t[10]=u*i-s*n,t[11]=h*i-l*n,t}},{}],183:[function(t,e,r){e.exports=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],l=e[3],g=e[8],c=e[9],u=e[10],h=e[11];e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*i-g*n,t[1]=a*i-c*n,t[2]=s*i-u*n,t[3]=l*i-h*n,t[8]=o*n+g*i,t[9]=a*n+c*i,t[10]=s*n+u*i,t[11]=l*n+h*i,t}},{}],184:[function(t,e,r){e.exports=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],l=e[3],g=e[4],c=e[5],u=e[6],h=e[7];e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);return t[0]=o*i+g*n,t[1]=a*i+c*n,t[2]=s*i+u*n,t[3]=l*i+h*n,t[4]=g*i-o*n,t[5]=c*i-a*n,t[6]=u*i-s*n,t[7]=h*i-l*n,t}},{}],185:[function(t,e,r){e.exports=function(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},{}],186:[function(t,e,r){e.exports=function(t,e,r){var n,i,o,a,s,l,g,c,u,h,d,A,f=r[0],C=r[1],p=r[2];e===t?(t[12]=e[0]*f+e[4]*C+e[8]*p+e[12],t[13]=e[1]*f+e[5]*C+e[9]*p+e[13],t[14]=e[2]*f+e[6]*C+e[10]*p+e[14],t[15]=e[3]*f+e[7]*C+e[11]*p+e[15]):(n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],g=e[6],c=e[7],u=e[8],h=e[9],d=e[10],A=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=g,t[7]=c,t[8]=u,t[9]=h,t[10]=d,t[11]=A,t[12]=n*f+s*C+u*p+e[12],t[13]=i*f+l*C+h*p+e[13],t[14]=o*f+g*C+d*p+e[14],t[15]=a*f+c*C+A*p+e[15]);return t}},{}],187:[function(t,e,r){e.exports=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},{}],188:[function(t,e,r){"use strict";var n=t("barycentric"),i=t("polytope-closest-point/lib/closest_point_2d.js");function o(t,e){for(var r=[0,0,0,0],n=0;n<4;++n)for(var i=0;i<4;++i)r[i]+=t[4*n+i]*e[n];return r}function a(t,e,r,n,i){for(var a=o(n,o(r,o(e,[t[0],t[1],t[2],1]))),s=0;s<3;++s)a[s]/=a[3];return[.5*i[0]*(1+a[0]),.5*i[1]*(1-a[1])]}e.exports=function(t,e,r,o,s,l){if(1===t.length)return[0,t[0].slice()];for(var g=new Array(t.length),c=0;c<t.length;++c)g[c]=a(t[c],r,o,s,l);for(var u=0,h=1/0,c=0;c<g.length;++c){for(var d=0,A=0;A<2;++A)d+=Math.pow(g[c][A]-e[A],2);d<h&&(h=d,u=c)}for(var f=function(t,e){if(2===t.length){for(var r=0,o=0,a=0;a<2;++a)r+=Math.pow(e[a]-t[0][a],2),o+=Math.pow(e[a]-t[1][a],2);return r=Math.sqrt(r),o=Math.sqrt(o),r+o<1e-6?[1,0]:[o/(r+o),r/(o+r)]}if(3===t.length){var s=[0,0];return i(t[0],t[1],t[2],e,s),n(t,s)}return[]}(g,e),C=0,c=0;c<3;++c){if(f[c]<-.001||f[c]>1.0001)return null;C+=f[c]}if(Math.abs(C-1)>.001)return null;return[u,function(t,e){for(var r=[0,0,0],n=0;n<t.length;++n)for(var i=t[n],o=e[n],a=0;a<3;++a)r[a]+=o*i[a];return r}(t,f),f]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":650}],189:[function(t,e,r){var n=t("glslify"),i=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),o=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),l=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),g=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),c=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),u=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),h=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),d=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),A=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);r.meshShader={vertex:i,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},r.wireShader={vertex:a,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},r.pointShader={vertex:l,fragment:g,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},r.pickShader={vertex:c,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},r.pointPickShader={vertex:h,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},r.contourShader={vertex:d,fragment:A,attributes:[{name:"position",type:"vec3"}]}},{glslify:228}],190:[function(t,e,r){"use strict";var n=t("gl-shader"),i=t("gl-buffer"),o=t("gl-vao"),a=t("gl-texture2d"),s=t("normals"),l=t("gl-mat4/multiply"),g=t("gl-mat4/invert"),c=t("ndarray"),u=t("colormap"),h=t("simplicial-complex-contour"),d=t("typedarray-pool"),A=t("./lib/shaders"),f=t("./lib/closest-point"),C=A.meshShader,p=A.wireShader,I=A.pointShader,v=A.pickShader,m=A.pointPickShader,y=A.contourShader,b=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function x(t,e,r,n,i,o,a,s,l,g,c,u,h,d,A,f,C,p,I,v,m,y,x,_,w,k,T){this.gl=t,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=r,this.lineShader=n,this.pointShader=i,this.pickShader=o,this.pointPickShader=a,this.contourShader=s,this.trianglePositions=l,this.triangleColors=c,this.triangleNormals=h,this.triangleUVs=u,this.triangleIds=g,this.triangleVAO=d,this.triangleCount=0,this.lineWidth=1,this.edgePositions=A,this.edgeColors=C,this.edgeUVs=p,this.edgeIds=f,this.edgeVAO=I,this.edgeCount=0,this.pointPositions=v,this.pointColors=y,this.pointUVs=x,this.pointSizes=_,this.pointIds=m,this.pointVAO=w,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=k,this.contourVAO=T,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=b,this._view=b,this._projection=b,this._resolution=[1,1]}var _=x.prototype;function w(t,e){if(!e)return 1;if(!e.length)return 1;for(var r=0;r<e.length;++r){if(e.length<2)return 1;if(e[r][0]===t)return e[r][1];if(e[r][0]>t&&r>0){var n=(e[r][0]-t)/(e[r][0]-e[r-1][0]);return e[r][1]*(1-n)+n*e[r-1][1]}}return 1}function k(t){var e=n(t,I.vertex,I.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e.attributes.pointSize.location=4,e}function T(t){var e=n(t,v.vertex,v.fragment);return e.attributes.position.location=0,e.attributes.id.location=1,e}function M(t){var e=n(t,m.vertex,m.fragment);return e.attributes.position.location=0,e.attributes.id.location=1,e.attributes.pointSize.location=4,e}function E(t){var e=n(t,y.vertex,y.fragment);return e.attributes.position.location=0,e}_.isOpaque=function(){return!this.hasAlpha},_.isTransparent=function(){return this.hasAlpha},_.pickSlots=1,_.setPickBase=function(t){this.pickId=t},_.highlight=function(t){if(t&&this.contourEnable){for(var e=h(this.cells,this.intensity,t.intensity),r=e.cells,n=e.vertexIds,i=e.vertexWeights,o=r.length,a=d.mallocFloat32(6*o),s=0,l=0;l<o;++l)for(var g=r[l],c=0;c<2;++c){var u=g[0];2===g.length&&(u=g[c]);for(var A=n[u][0],f=n[u][1],C=i[u],p=1-C,I=this.positions[A],v=this.positions[f],m=0;m<3;++m)a[s++]=C*I[m]+p*v[m]}this.contourCount=s/3|0,this.contourPositions.update(a.subarray(0,s)),d.free(a)}else this.contourCount=0},_.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"contourEnable"in t&&(this.contourEnable=t.contourEnable),"contourColor"in t&&(this.contourColor=t.contourColor),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"lightPosition"in t&&(this.lightPosition=t.lightPosition),this.hasAlpha=!1,"opacity"in t&&(this.opacity=t.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in t&&(this.opacityscale=t.opacityscale,this.hasAlpha=!0),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),t.texture?(this.texture.dispose(),this.texture=a(e,t.texture)):t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(function(t,e){for(var r=u({colormap:t,nshades:256,format:"rgba"}),n=new Uint8Array(1024),i=0;i<256;++i){for(var o=r[i],a=0;a<3;++a)n[4*i+a]=o[a];n[4*i+3]=e?255*w(i/255,e):255*o[3]}return c(n,[256,256,4],[4,0,1])}(t.colormap,this.opacityscale)),this.texture.generateMipmap());var r=t.cells,n=t.positions;if(n&&r){var i=[],o=[],l=[],g=[],h=[],d=[],A=[],f=[],C=[],p=[],I=[],v=[],m=[],y=[];this.cells=r,this.positions=n;var b=t.vertexNormals,x=t.cellNormals,_=void 0===t.vertexNormalsEpsilon?1e-6:t.vertexNormalsEpsilon,k=void 0===t.faceNormalsEpsilon?1e-6:t.faceNormalsEpsilon;t.useFacetNormals&&!x&&(x=s.faceNormals(r,n,k)),x||b||(b=s.vertexNormals(r,n,_));var T=t.vertexColors,M=t.cellColors,E=t.meshColor||[1,1,1,1],O=t.vertexUVs,S=t.vertexIntensity,R=t.cellUVs,D=t.cellIntensity,L=1/0,P=-1/0;if(!O&&!R)if(S)if(t.vertexIntensityBounds)L=+t.vertexIntensityBounds[0],P=+t.vertexIntensityBounds[1];else for(var N=0;N<S.length;++N){var z=S[N];L=Math.min(L,z),P=Math.max(P,z)}else if(D)if(t.cellIntensityBounds)L=+t.cellIntensityBounds[0],P=+t.cellIntensityBounds[1];else for(N=0;N<D.length;++N){z=D[N];L=Math.min(L,z),P=Math.max(P,z)}else for(N=0;N<n.length;++N){z=n[N][2];L=Math.min(L,z),P=Math.max(P,z)}this.intensity=S||(D||function(t){for(var e=t.length,r=new Array(e),n=0;n<e;++n)r[n]=t[n][2];return r}(n)),this.pickVertex=!(D||M);var F=t.pointSizes,B=t.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(N=0;N<n.length;++N)for(var j=n[N],V=0;V<3;++V)!isNaN(j[V])&&isFinite(j[V])&&(this.bounds[0][V]=Math.min(this.bounds[0][V],j[V]),this.bounds[1][V]=Math.max(this.bounds[1][V],j[V]));var G=0,U=0,Z=0;t:for(N=0;N<r.length;++N){var H=r[N];switch(H.length){case 1:for(j=n[Y=H[0]],V=0;V<3;++V)if(isNaN(j[V])||!isFinite(j[V]))continue t;p.push(j[0],j[1],j[2]),X=T?T[Y]:M?M[N]:E,this.opacityscale&&S?o.push(X[0],X[1],X[2],this.opacity*w((S[Y]-L)/(P-L),this.opacityscale)):3===X.length?I.push(X[0],X[1],X[2],this.opacity):(I.push(X[0],X[1],X[2],X[3]*this.opacity),X[3]<1&&(this.hasAlpha=!0)),q=O?O[Y]:S?[(S[Y]-L)/(P-L),0]:R?R[N]:D?[(D[N]-L)/(P-L),0]:[(j[2]-L)/(P-L),0],v.push(q[0],q[1]),F?m.push(F[Y]):m.push(B),y.push(N),Z+=1;break;case 2:for(V=0;V<2;++V){j=n[Y=H[V]];for(var W=0;W<3;++W)if(isNaN(j[W])||!isFinite(j[W]))continue t}for(V=0;V<2;++V){j=n[Y=H[V]];d.push(j[0],j[1],j[2]),X=T?T[Y]:M?M[N]:E,this.opacityscale&&S?o.push(X[0],X[1],X[2],this.opacity*w((S[Y]-L)/(P-L),this.opacityscale)):3===X.length?A.push(X[0],X[1],X[2],this.opacity):(A.push(X[0],X[1],X[2],X[3]*this.opacity),X[3]<1&&(this.hasAlpha=!0)),q=O?O[Y]:S?[(S[Y]-L)/(P-L),0]:R?R[N]:D?[(D[N]-L)/(P-L),0]:[(j[2]-L)/(P-L),0],f.push(q[0],q[1]),C.push(N)}U+=1;break;case 3:for(V=0;V<3;++V)for(j=n[Y=H[V]],W=0;W<3;++W)if(isNaN(j[W])||!isFinite(j[W]))continue t;for(V=0;V<3;++V){var Y,X,q,Q;j=n[Y=H[2-V]];i.push(j[0],j[1],j[2]),(X=T?T[Y]:M?M[N]:E)?this.opacityscale&&S?o.push(X[0],X[1],X[2],this.opacity*w((S[Y]-L)/(P-L),this.opacityscale)):3===X.length?o.push(X[0],X[1],X[2],this.opacity):(o.push(X[0],X[1],X[2],X[3]*this.opacity),X[3]<1&&(this.hasAlpha=!0)):o.push(.5,.5,.5,1),q=O?O[Y]:S?[(S[Y]-L)/(P-L),0]:R?R[N]:D?[(D[N]-L)/(P-L),0]:[(j[2]-L)/(P-L),0],g.push(q[0],q[1]),Q=b?b[Y]:x[N],l.push(Q[0],Q[1],Q[2]),h.push(N)}G+=1}}this.pointCount=Z,this.edgeCount=U,this.triangleCount=G,this.pointPositions.update(p),this.pointColors.update(I),this.pointUVs.update(v),this.pointSizes.update(m),this.pointIds.update(new Uint32Array(y)),this.edgePositions.update(d),this.edgeColors.update(A),this.edgeUVs.update(f),this.edgeIds.update(new Uint32Array(C)),this.trianglePositions.update(i),this.triangleColors.update(o),this.triangleUVs.update(g),this.triangleNormals.update(l),this.triangleIds.update(new Uint32Array(h))}},_.drawTransparent=_.draw=function(t){t=t||{};for(var e=this.gl,r=t.model||b,n=t.view||b,i=t.projection||b,o=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],a=0;a<3;++a)o[0][a]=Math.max(o[0][a],this.clipBounds[0][a]),o[1][a]=Math.min(o[1][a],this.clipBounds[1][a]);var s={model:r,view:n,projection:i,inverseModel:b.slice(),clipBounds:o,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};s.inverseModel=g(s.inverseModel,s.model),e.disable(e.CULL_FACE),this.texture.bind(0);var c=new Array(16);l(c,s.view,s.model),l(c,s.projection,c),g(c,c);for(a=0;a<3;++a)s.eyePosition[a]=c[12+a]/c[15];var u,h=c[15];for(a=0;a<3;++a)h+=this.lightPosition[a]*c[4*a+3];for(a=0;a<3;++a){for(var d=c[12+a],A=0;A<3;++A)d+=c[4*A+a]*this.lightPosition[A];s.lightPosition[a]=d/h}this.triangleCount>0&&((u=this.triShader).bind(),u.uniforms=s,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind());this.edgeCount>0&&this.lineWidth>0&&((u=this.lineShader).bind(),u.uniforms=s,this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind());this.pointCount>0&&((u=this.pointShader).bind(),u.uniforms=s,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind());this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((u=this.contourShader).bind(),u.uniforms=s,this.contourVAO.bind(),e.drawArrays(e.LINES,0,this.contourCount),this.contourVAO.unbind())},_.drawPick=function(t){t=t||{};for(var e=this.gl,r=t.model||b,n=t.view||b,i=t.projection||b,o=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],a=0;a<3;++a)o[0][a]=Math.max(o[0][a],this.clipBounds[0][a]),o[1][a]=Math.min(o[1][a],this.clipBounds[1][a]);this._model=[].slice.call(r),this._view=[].slice.call(n),this._projection=[].slice.call(i),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var s,l={model:r,view:n,projection:i,clipBounds:o,pickId:this.pickId/255};((s=this.pickShader).bind(),s.uniforms=l,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0)&&((s=this.pointPickShader).bind(),s.uniforms=l,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind())},_.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;for(var e=t.value[0]+256*t.value[1]+65536*t.value[2],r=this.cells[e],n=this.positions,i=new Array(r.length),o=0;o<r.length;++o)i[o]=n[r[o]];var a=t.coord[0],s=t.coord[1];if(!this.pickVertex){var l=this.positions[r[0]],g=this.positions[r[1]],c=this.positions[r[2]],u=[(l[0]+g[0]+c[0])/3,(l[1]+g[1]+c[1])/3,(l[2]+g[2]+c[2])/3];return{_cellCenter:!0,position:[a,s],index:e,cell:r,cellId:e,intensity:this.intensity[e],dataCoordinate:u}}var h=f(i,[a*this.pixelRatio,this._resolution[1]-s*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!h)return null;var d=h[2],A=0;for(o=0;o<r.length;++o)A+=d[o]*this.intensity[r[o]];return{position:h[1],index:r[h[0]],cell:r,cellId:e,intensity:A,dataCoordinate:this.positions[r[h[0]]]}},_.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},e.exports=function(t,e){if(1===arguments.length&&(t=(e=t).gl),!(t.getExtension("OES_standard_derivatives")||t.getExtension("MOZ_OES_standard_derivatives")||t.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var r=function(t){var e=n(t,C.vertex,C.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e.attributes.normal.location=4,e}(t),s=function(t){var e=n(t,p.vertex,p.fragment);return e.attributes.position.location=0,e.attributes.color.location=2,e.attributes.uv.location=3,e}(t),l=k(t),g=T(t),u=M(t),h=E(t),d=a(t,c(new Uint8Array([255,255,255,255]),[1,1,4]));d.generateMipmap(),d.minFilter=t.LINEAR_MIPMAP_LINEAR,d.magFilter=t.LINEAR;var A=i(t),f=i(t),I=i(t),v=i(t),m=i(t),y=o(t,[{buffer:A,type:t.FLOAT,size:3},{buffer:m,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:f,type:t.FLOAT,size:4},{buffer:I,type:t.FLOAT,size:2},{buffer:v,type:t.FLOAT,size:3}]),b=i(t),_=i(t),w=i(t),O=i(t),S=o(t,[{buffer:b,type:t.FLOAT,size:3},{buffer:O,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:_,type:t.FLOAT,size:4},{buffer:w,type:t.FLOAT,size:2}]),R=i(t),D=i(t),L=i(t),P=i(t),N=i(t),z=o(t,[{buffer:R,type:t.FLOAT,size:3},{buffer:N,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:D,type:t.FLOAT,size:4},{buffer:L,type:t.FLOAT,size:2},{buffer:P,type:t.FLOAT,size:1}]),F=i(t),B=new x(t,d,r,s,l,g,u,h,A,m,f,I,v,y,b,O,_,w,S,R,N,D,L,P,z,F,o(t,[{buffer:F,type:t.FLOAT,size:3}]));return B.update(e),B}},{"./lib/closest-point":188,"./lib/shaders":189,colormap:61,"gl-buffer":161,"gl-mat4/invert":176,"gl-mat4/multiply":178,"gl-shader":200,"gl-texture2d":209,"gl-vao":213,ndarray:262,normals:265,"simplicial-complex-contour":676,"typedarray-pool":711}],191:[function(t,e,r){"use strict";e.exports=function(t,e){t=t||document.body,e=e||{};var r=[.01,1/0];"distanceLimits"in e&&(r[0]=e.distanceLimits[0],r[1]=e.distanceLimits[1]);"zoomMin"in e&&(r[0]=e.zoomMin);"zoomMax"in e&&(r[1]=e.zoomMax);var g=i({center:e.center||[0,0,0],up:e.up||[0,1,0],eye:e.eye||[0,0,10],mode:e.mode||"orbit",distanceLimits:r}),c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0,h=t.clientWidth,d=t.clientHeight,A={keyBindingMode:"rotate",enableWheel:!0,view:g,element:t,delay:e.delay||16,rotateSpeed:e.rotateSpeed||1,zoomSpeed:e.zoomSpeed||1,translateSpeed:e.translateSpeed||1,flipX:!!e.flipX,flipY:!!e.flipY,modes:g.modes,_ortho:e._ortho||e.projection&&"orthographic"===e.projection.type||!1,tick:function(){var e=n(),r=this.delay,i=e-2*r;g.idle(e-r),g.recalcMatrix(i),g.flush(e-(100+2*r));for(var o=!0,a=g.computedMatrix,s=0;s<16;++s)o=o&&c[s]===a[s],c[s]=a[s];var l=t.clientWidth===h&&t.clientHeight===d;return h=t.clientWidth,d=t.clientHeight,o?!l:(u=Math.exp(g.computedRadius[0]),!0)},lookAt:function(t,e,r){g.lookAt(g.lastT(),t,e,r)},rotate:function(t,e,r){g.rotate(g.lastT(),t,e,r)},pan:function(t,e,r){g.pan(g.lastT(),t,e,r)},translate:function(t,e,r){g.translate(g.lastT(),t,e,r)}};return Object.defineProperties(A,{matrix:{get:function(){return g.computedMatrix},set:function(t){return g.setMatrix(g.lastT(),t),g.computedMatrix},enumerable:!0},mode:{get:function(){return g.getMode()},set:function(t){var e=g.computedUp.slice(),r=g.computedEye.slice(),i=g.computedCenter.slice();if(g.setMode(t),"turntable"===t){var o=n();g._active.lookAt(o,r,i,e),g._active.lookAt(o+500,r,i,[0,0,1]),g._active.flush(o)}return g.getMode()},enumerable:!0},center:{get:function(){return g.computedCenter},set:function(t){return g.lookAt(g.lastT(),null,t),g.computedCenter},enumerable:!0},eye:{get:function(){return g.computedEye},set:function(t){return g.lookAt(g.lastT(),t),g.computedEye},enumerable:!0},up:{get:function(){return g.computedUp},set:function(t){return g.lookAt(g.lastT(),null,null,t),g.computedUp},enumerable:!0},distance:{get:function(){return u},set:function(t){return g.setDistance(g.lastT(),t),t},enumerable:!0},distanceLimits:{get:function(){return g.getDistanceLimits(r)},set:function(t){return g.setDistanceLimits(t),t},enumerable:!0}}),t.addEventListener("contextmenu",function(t){return t.preventDefault(),!1}),A._lastX=-1,A._lastY=-1,A._lastMods={shift:!1,control:!1,alt:!1,meta:!1},A.enableMouseListeners=function(){function e(e,r,i,o){var a=A.keyBindingMode;if(!1!==a){var s="rotate"===a,l="pan"===a,c="zoom"===a,h=!!o.control,d=!!o.alt,f=!!o.shift,C=!!(1&e),p=!!(2&e),I=!!(4&e),v=1/t.clientHeight,m=v*(r-A._lastX),y=v*(i-A._lastY),b=A.flipX?1:-1,x=A.flipY?1:-1,_=Math.PI*A.rotateSpeed,w=n();if(-1!==A._lastX&&-1!==A._lastY&&((s&&C&&!h&&!d&&!f||C&&!h&&!d&&f)&&g.rotate(w,b*_*m,-x*_*y,0),(l&&C&&!h&&!d&&!f||p||C&&h&&!d&&!f)&&g.pan(w,-A.translateSpeed*m*u,A.translateSpeed*y*u,0),c&&C&&!h&&!d&&!f||I||C&&!h&&d&&!f)){var k=-A.zoomSpeed*y/window.innerHeight*(w-g.lastT())*100;g.pan(w,0,0,u*(Math.exp(k)-1))}return A._lastX=r,A._lastY=i,A._lastMods=o,!0}}A.mouseListener=o(t,e),t.addEventListener("touchstart",function(r){var n=s(r.changedTouches[0],t);e(0,n[0],n[1],A._lastMods),e(1,n[0],n[1],A._lastMods),r.preventDefault()},!!l&&{passive:!1}),t.addEventListener("touchmove",function(r){var n=s(r.changedTouches[0],t);e(1,n[0],n[1],A._lastMods),r.preventDefault()},!!l&&{passive:!1}),t.addEventListener("touchend",function(t){e(0,A._lastX,A._lastY,A._lastMods),t.preventDefault()},!!l&&{passive:!1}),A.wheelListener=a(t,function(t,e){if(!1!==A.keyBindingMode&&A.enableWheel){var r=A.flipX?1:-1,i=A.flipY?1:-1,o=n();if(Math.abs(t)>Math.abs(e))g.rotate(o,0,0,-t*r*Math.PI*A.rotateSpeed/window.innerWidth);else if(!A._ortho){var a=-A.zoomSpeed*i*e/window.innerHeight*(o-g.lastT())/20;g.pan(o,0,0,u*(Math.exp(a)-1))}}},!0)},A.enableMouseListeners(),A};var n=t("right-now"),i=t("3d-view"),o=t("mouse-change"),a=t("mouse-wheel"),s=t("mouse-event-offset"),l=t("has-passive-events")},{"3d-view":1,"has-passive-events":230,"mouse-change":254,"mouse-event-offset":255,"mouse-wheel":257,"right-now":663}],192:[function(t,e,r){var n=t("glslify"),i=t("gl-shader"),o=n(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),a=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);e.exports=function(t){return i(t,o,a,null,[{name:"position",type:"vec2"}])}},{"gl-shader":200,glslify:228}],193:[function(t,e,r){"use strict";var n=t("./camera.js"),i=t("gl-axes3d"),o=t("gl-axes3d/properties"),a=t("gl-spikes3d"),s=t("gl-select-static"),l=t("gl-fbo"),g=t("a-big-triangle"),c=t("mouse-change"),u=t("gl-mat4/perspective"),h=t("gl-mat4/ortho"),d=t("./lib/shader"),A=t("is-mobile")({tablet:!0,featureDetect:!0});function f(t){var e=Math.round(Math.log(Math.abs(t))/Math.log(10));if(e<0){var r=Math.round(Math.pow(10,-e));return Math.ceil(t*r)/r}if(e>0){r=Math.round(Math.pow(10,e));return Math.ceil(t/r)*r}return Math.ceil(t)}function C(t){return"boolean"!=typeof t||t}e.exports={createScene:function(t){(t=t||{}).camera=t.camera||{};var e=t.canvas;if(!e)if(e=document.createElement("canvas"),t.container){var r=t.container;r.appendChild(e)}else document.body.appendChild(e);var p=t.gl;p||(t.glOptions&&(A=!!t.glOptions.preserveDrawingBuffer),p=function(t,e){var r=null;try{(r=t.getContext("webgl",e))||(r=t.getContext("experimental-webgl",e))}catch(t){return null}return r}(e,t.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:A}));if(!p)throw new Error("webgl not supported");var I=t.bounds||[[-10,-10,-10],[10,10,10]],v=new function(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null},m=l(p,p.drawingBufferWidth,p.drawingBufferHeight,{preferFloat:!A}),y=d(p),b=t.cameraObject&&!0===t.cameraObject._ortho||t.camera.projection&&"orthographic"===t.camera.projection.type||!1,x={eye:t.camera.eye||[2,0,0],center:t.camera.center||[0,0,0],up:t.camera.up||[0,1,0],zoomMin:t.camera.zoomMax||.1,zoomMax:t.camera.zoomMin||100,mode:t.camera.mode||"turntable",_ortho:b},_=t.axes||{},w=i(p,_);w.enable=!_.disable;var k=t.spikes||{},T=a(p,k),M=[],E=[],O=[],S=[],R=!0,D=!0,L=new Array(16),P=new Array(16),N={view:null,projection:L,model:P,_ortho:!1},D=!0,z=[p.drawingBufferWidth,p.drawingBufferHeight],F=t.cameraObject||n(e,x),B={gl:p,contextLost:!1,pixelRatio:t.pixelRatio||1,canvas:e,selection:v,camera:F,axes:w,axesPixels:null,spikes:T,bounds:I,objects:M,shape:z,aspect:t.aspectRatio||[1,1,1],pickRadius:t.pickRadius||10,zNear:t.zNear||.01,zFar:t.zFar||1e3,fovy:t.fovy||Math.PI/4,clearColor:t.clearColor||[0,0,0,0],autoResize:C(t.autoResize),autoBounds:C(t.autoBounds),autoScale:!!t.autoScale,autoCenter:C(t.autoCenter),clipToBounds:C(t.clipToBounds),snapToData:!!t.snapToData,onselect:t.onselect||null,onrender:t.onrender||null,onclick:t.onclick||null,cameraParams:N,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(t){this.aspect[0]=t.x,this.aspect[1]=t.y,this.aspect[2]=t.z,D=!0},setBounds:function(t,e){this.bounds[0][t]=e.min,this.bounds[1][t]=e.max},setClearColor:function(t){this.clearColor=t},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},j=[p.drawingBufferWidth/B.pixelRatio|0,p.drawingBufferHeight/B.pixelRatio|0];function V(){if(!B._stopped&&B.autoResize){var t=e.parentNode,r=1,n=1;t&&t!==document.body?(r=t.clientWidth,n=t.clientHeight):(r=window.innerWidth,n=window.innerHeight);var i=0|Math.ceil(r*B.pixelRatio),o=0|Math.ceil(n*B.pixelRatio);if(i!==e.width||o!==e.height){e.width=i,e.height=o;var a=e.style;a.position=a.position||"absolute",a.left="0px",a.top="0px",a.width=r+"px",a.height=n+"px",R=!0}}}B.autoResize&&V();function G(){for(var t=M.length,e=S.length,r=0;r<e;++r)O[r]=0;t:for(var r=0;r<t;++r){var n=M[r],i=n.pickSlots;if(i){for(var o=0;o<e;++o)if(O[o]+i<255){E[r]=o,n.setPickBase(O[o]+1),O[o]+=i;continue t}var a=s(p,z);E[r]=e,S.push(a),O.push(i),n.setPickBase(1),e+=1}else E[r]=-1}for(;e>0&&0===O[e-1];)O.pop(),S.pop().dispose()}function U(){if(B.contextLost)return!0;p.isContextLost()&&(B.contextLost=!0,B.mouseListener.enabled=!1,B.selection.object=null,B.oncontextloss&&B.oncontextloss())}window.addEventListener("resize",V),B.update=function(t){B._stopped||(t=t||{},R=!0,D=!0)},B.add=function(t){B._stopped||(t.axes=w,M.push(t),E.push(-1),R=!0,D=!0,G())},B.remove=function(t){if(!B._stopped){var e=M.indexOf(t);e<0||(M.splice(e,1),E.pop(),R=!0,D=!0,G())}},B.dispose=function(){if(!B._stopped&&(B._stopped=!0,window.removeEventListener("resize",V),e.removeEventListener("webglcontextlost",U),B.mouseListener.enabled=!1,!B.contextLost)){w.dispose(),T.dispose();for(var t=0;t<M.length;++t)M[t].dispose();m.dispose();for(var t=0;t<S.length;++t)S[t].dispose();y.dispose(),p=null,w=null,T=null,M=[]}},B._mouseRotating=!1,B._prevButtons=0,B.enableMouseListeners=function(){B.mouseListener=c(e,function(t,e,r){if(!B._stopped){var n=S.length,i=M.length,o=v.object;v.distance=1/0,v.mouse[0]=e,v.mouse[1]=r,v.object=null,v.screen=null,v.dataCoordinate=v.dataPosition=null;var a=!1;if(t&&B._prevButtons)B._mouseRotating=!0;else{B._mouseRotating&&(D=!0),B._mouseRotating=!1;for(var s=0;s<n;++s){var l=S[s].query(e,j[1]-r-1,B.pickRadius);if(l){if(l.distance>v.distance)continue;for(var g=0;g<i;++g){var c=M[g];if(E[g]===s){var u=c.pick(l);u&&(v.buttons=t,v.screen=l.coord,v.distance=l.distance,v.object=c,v.index=u.distance,v.dataPosition=u.position,v.dataCoordinate=u.dataCoordinate,v.data=u,a=!0)}}}}}o&&o!==v.object&&(o.highlight&&o.highlight(null),R=!0),v.object&&(v.object.highlight&&v.object.highlight(v.data),R=!0),(a=a||v.object!==o)&&B.onselect&&B.onselect(v),1&t&&!(1&B._prevButtons)&&B.onclick&&B.onclick(v),B._prevButtons=t}})},e.addEventListener("webglcontextlost",U);var Z=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],H=[Z[0].slice(),Z[1].slice()];function W(){if(!U()){V();var t=B.camera.tick();N.view=B.camera.matrix,R=R||t,D=D||t,w.pixelRatio=B.pixelRatio,T.pixelRatio=B.pixelRatio;var e=M.length,r=Z[0],n=Z[1];r[0]=r[1]=r[2]=1/0,n[0]=n[1]=n[2]=-1/0;for(var i=0;i<e;++i){var a=M[i];a.pixelRatio=B.pixelRatio,a.axes=B.axes,R=R||!!a.dirty,D=D||!!a.dirty;var s=a.bounds;if(s)for(var l=s[0],c=s[1],d=0;d<3;++d)r[d]=Math.min(r[d],l[d]),n[d]=Math.max(n[d],c[d])}var A=B.bounds;if(B.autoBounds)for(var d=0;d<3;++d){if(n[d]<r[d])r[d]=-1,n[d]=1;else{r[d]===n[d]&&(r[d]-=1,n[d]+=1);var C=.05*(n[d]-r[d]);r[d]=r[d]-C,n[d]=n[d]+C}A[0][d]=r[d],A[1][d]=n[d]}for(var I=!1,d=0;d<3;++d)I=I||H[0][d]!==A[0][d]||H[1][d]!==A[1][d],H[0][d]=A[0][d],H[1][d]=A[1][d];if(D=D||I,R=R||I){if(I){for(var x=[0,0,0],i=0;i<3;++i)x[i]=f((A[1][i]-A[0][i])/10);w.autoTicks?w.update({bounds:A,tickSpacing:x}):w.update({bounds:A})}var _=p.drawingBufferWidth,k=p.drawingBufferHeight;z[0]=_,z[1]=k,j[0]=0|Math.max(_/B.pixelRatio,1),j[1]=0|Math.max(k/B.pixelRatio,1),function(t,e){var r=t.bounds,n=t.cameraParams,i=n.projection,o=n.model,a=t.gl.drawingBufferWidth,s=t.gl.drawingBufferHeight,l=t.zNear,g=t.zFar,c=t.fovy,d=a/s;e?(h(i,-d,d,-1,1,l,g),n._ortho=!0):(u(i,c,d,l,g),n._ortho=!1);for(var A=0;A<16;++A)o[A]=0;o[15]=1;for(var f=0,A=0;A<3;++A)f=Math.max(f,r[1][A]-r[0][A]);for(var A=0;A<3;++A)t.autoScale?o[5*A]=t.aspect[A]/(r[1][A]-r[0][A]):o[5*A]=1/f,t.autoCenter&&(o[12+A]=.5*-o[5*A]*(r[0][A]+r[1][A]))}(B,b);for(var i=0;i<e;++i){var a=M[i];a.axesBounds=A,B.clipToBounds&&(a.clipBounds=A)}v.object&&(B.snapToData?T.position=v.dataCoordinate:T.position=v.dataPosition,T.bounds=A),D&&(D=!1,function(){if(U())return;p.colorMask(!0,!0,!0,!0),p.depthMask(!0),p.disable(p.BLEND),p.enable(p.DEPTH_TEST),p.depthFunc(p.LEQUAL);for(var t=M.length,e=S.length,r=0;r<e;++r){var n=S[r];n.shape=j,n.begin();for(var i=0;i<t;++i)if(E[i]===r){var o=M[i];o.drawPick&&(o.pixelRatio=1,o.drawPick(N))}n.end()}}()),B.axesPixels=o(B.axes,N,_,k),B.onrender&&B.onrender(),p.bindFramebuffer(p.FRAMEBUFFER,null),p.viewport(0,0,_,k),B.clearRGBA(),p.depthMask(!0),p.colorMask(!0,!0,!0,!0),p.enable(p.DEPTH_TEST),p.depthFunc(p.LEQUAL),p.disable(p.BLEND),p.disable(p.CULL_FACE);var O=!1;w.enable&&(O=O||w.isTransparent(),w.draw(N)),T.axes=w,v.object&&T.draw(N),p.disable(p.CULL_FACE);for(var i=0;i<e;++i){var a=M[i];a.axes=w,a.pixelRatio=B.pixelRatio,a.isOpaque&&a.isOpaque()&&a.draw(N),a.isTransparent&&a.isTransparent()&&(O=!0)}if(O){m.shape=z,m.bind(),p.clear(p.DEPTH_BUFFER_BIT),p.colorMask(!1,!1,!1,!1),p.depthMask(!0),p.depthFunc(p.LESS),w.enable&&w.isTransparent()&&w.drawTransparent(N);for(var i=0;i<e;++i){var a=M[i];a.isOpaque&&a.isOpaque()&&a.draw(N)}p.enable(p.BLEND),p.blendEquation(p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA),p.colorMask(!0,!0,!0,!0),p.depthMask(!1),p.clearColor(0,0,0,0),p.clear(p.COLOR_BUFFER_BIT),w.isTransparent()&&w.drawTransparent(N);for(var i=0;i<e;++i){var a=M[i];a.isTransparent&&a.isTransparent()&&a.drawTransparent(N)}p.bindFramebuffer(p.FRAMEBUFFER,null),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA),p.disable(p.DEPTH_TEST),y.bind(),m.color[0].bind(0),y.uniforms.accumBuffer=0,g(p),p.disable(p.BLEND)}R=!1;for(var i=0;i<e;++i)M[i].dirty=!1}}}return B.enableMouseListeners(),function t(){B._stopped||B.contextLost||(W(),requestAnimationFrame(t))}(),B.redraw=function(){B._stopped||(R=!0,W())},B},createCamera:n}},{"./camera.js":191,"./lib/shader":192,"a-big-triangle":2,"gl-axes3d":153,"gl-axes3d/properties":160,"gl-fbo":166,"gl-mat4/ortho":179,"gl-mat4/perspective":180,"gl-select-static":199,"gl-spikes3d":208,"is-mobile":240,"mouse-change":254}],194:[function(t,e,r){e.exports=function(t,e,r,n){var i,o,a,s,l,g=e[0],c=e[1],u=e[2],h=e[3],d=r[0],A=r[1],f=r[2],C=r[3];(o=g*d+c*A+u*f+h*C)<0&&(o=-o,d=-d,A=-A,f=-f,C=-C);1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-n)*i)/a,l=Math.sin(n*i)/a):(s=1-n,l=n);return t[0]=s*g+l*d,t[1]=s*c+l*A,t[2]=s*u+l*f,t[3]=s*h+l*C,t}},{}],195:[function(t,e,r){"use strict";e.exports=function(t){return t||0===t?t.toString():""}},{}],196:[function(t,e,r){"use strict";var n=t("vectorize-text");e.exports=function(t,e,r){var o=i[e];o||(o=i[e]={});if(t in o)return o[t];var a={textAlign:"center",textBaseline:"middle",lineHeight:1,font:e,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},s=n(t,a);a.triangles=!1;var l,g,c=n(t,a);if(r&&1!==r){for(l=0;l<s.positions.length;++l)for(g=0;g<s.positions[l].length;++g)s.positions[l][g]/=r;for(l=0;l<c.positions.length;++l)for(g=0;g<c.positions[l].length;++g)c.positions[l][g]/=r}var u=[[1/0,1/0],[-1/0,-1/0]],h=c.positions.length;for(l=0;l<h;++l){var d=c.positions[l];for(g=0;g<2;++g)u[0][g]=Math.min(u[0][g],d[g]),u[1][g]=Math.max(u[1][g],d[g])}return o[t]=[s,c,u]};var i={}},{"vectorize-text":715}],197:[function(t,e,r){var n=t("gl-shader"),i=t("glslify"),o=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),a=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),l=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),g=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),c=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],u={vertex:o,fragment:l,attributes:c},h={vertex:a,fragment:l,attributes:c},d={vertex:s,fragment:l,attributes:c},A={vertex:o,fragment:g,attributes:c},f={vertex:a,fragment:g,attributes:c},C={vertex:s,fragment:g,attributes:c};function p(t,e){var r=n(t,e),i=r.attributes;return i.position.location=0,i.color.location=1,i.glyph.location=2,i.id.location=3,r}r.createPerspective=function(t){return p(t,u)},r.createOrtho=function(t){return p(t,h)},r.createProject=function(t){return p(t,d)},r.createPickPerspective=function(t){return p(t,A)},r.createPickOrtho=function(t){return p(t,f)},r.createPickProject=function(t){return p(t,C)}},{"gl-shader":200,glslify:228}],198:[function(t,e,r){"use strict";var n=t("is-string-blank"),i=t("gl-buffer"),o=t("gl-vao"),a=t("typedarray-pool"),s=t("gl-mat4/multiply"),l=t("./lib/shaders"),g=t("./lib/glyphs"),c=t("./lib/get-simple-string"),u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(t,e){var r=t[0],n=t[1],i=t[2],o=t[3];return t[0]=e[0]*r+e[4]*n+e[8]*i+e[12]*o,t[1]=e[1]*r+e[5]*n+e[9]*i+e[13]*o,t[2]=e[2]*r+e[6]*n+e[10]*i+e[14]*o,t[3]=e[3]*r+e[7]*n+e[11]*i+e[15]*o,t}function d(t,e,r,n){return h(n,n),h(n,n),h(n,n)}function A(t){return!0===t?1:t>1?1:t}function f(t,e,r,n,i,o,a,s,l,g,c,u){this.gl=t,this.pixelRatio=1,this.shader=e,this.orthoShader=r,this.projectShader=n,this.pointBuffer=i,this.colorBuffer=o,this.glyphBuffer=a,this.idBuffer=s,this.vao=l,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=g,this.pickOrthoShader=c,this.pickProjectShader=u,this.points=[],this._selectResult=new function(t,e){this.index=t,this.dataCoordinate=this.position=e}(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}e.exports=function(t){var e=t.gl,r=l.createPerspective(e),n=l.createOrtho(e),a=l.createProject(e),s=l.createPickPerspective(e),g=l.createPickOrtho(e),c=l.createPickProject(e),u=i(e),h=i(e),d=i(e),A=i(e),C=o(e,[{buffer:u,size:3,type:e.FLOAT},{buffer:h,size:4,type:e.FLOAT},{buffer:d,size:2,type:e.FLOAT},{buffer:A,size:4,type:e.UNSIGNED_BYTE,normalized:!0}]),p=new f(e,r,n,a,u,h,d,A,C,s,g,c);return p.update(t),p};var C=f.prototype;C.pickSlots=1,C.setPickBase=function(t){this.pickId=t},C.isTransparent=function(){if(this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&this.projectHasAlpha)return!0;return!1},C.isOpaque=function(){if(!this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&!this.projectHasAlpha)return!0;return!1};var p=[0,0],I=[0,0,0],v=[0,0,0],m=[0,0,0,1],y=[0,0,0,1],b=u.slice(),x=[0,0,0],_=[[0,0,0],[0,0,0]];function w(t){return t[0]=t[1]=t[2]=0,t}function k(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=1,t}function T(t,e,r,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[r]=n,t}function M(t,e,r,n){var i,o=e.axesProject,a=e.gl,l=t.uniforms,g=r.model||u,c=r.view||u,h=r.projection||u,A=e.axesBounds,f=function(t){for(var e=_,r=0;r<2;++r)for(var n=0;n<3;++n)e[r][n]=Math.max(Math.min(t[r][n],1e8),-1e8);return e}(e.clipBounds);i=e.axes&&e.axes.lastCubeProps?e.axes.lastCubeProps.axis:[1,1,1],p[0]=2/a.drawingBufferWidth,p[1]=2/a.drawingBufferHeight,t.bind(),l.view=c,l.projection=h,l.screenSize=p,l.highlightId=e.highlightId,l.highlightScale=e.highlightScale,l.clipBounds=f,l.pickGroup=e.pickId/255,l.pixelRatio=n;for(var C=0;C<3;++C)if(o[C]){l.scale=e.projectScale[C],l.opacity=e.projectOpacity[C];for(var M=b,E=0;E<16;++E)M[E]=0;for(E=0;E<4;++E)M[5*E]=1;M[5*C]=0,i[C]<0?M[12+C]=A[0][C]:M[12+C]=A[1][C],s(M,g,M),l.model=M;var O=(C+1)%3,S=(C+2)%3,R=w(I),D=w(v);R[O]=1,D[S]=1;var L=d(0,0,0,k(m,R)),P=d(0,0,0,k(y,D));if(Math.abs(L[1])>Math.abs(P[1])){var N=L;L=P,P=N,N=R,R=D,D=N;var z=O;O=S,S=z}L[0]<0&&(R[O]=-1),P[1]>0&&(D[S]=-1);var F=0,B=0;for(E=0;E<4;++E)F+=Math.pow(g[4*O+E],2),B+=Math.pow(g[4*S+E],2);R[O]/=Math.sqrt(F),D[S]/=Math.sqrt(B),l.axes[0]=R,l.axes[1]=D,l.fragClipBounds[0]=T(x,f[0],C,-1e8),l.fragClipBounds[1]=T(x,f[1],C,1e8),e.vao.bind(),e.vao.draw(a.TRIANGLES,e.vertexCount),e.lineWidth>0&&(a.lineWidth(e.lineWidth*n),e.vao.draw(a.LINES,e.lineVertexCount,e.vertexCount)),e.vao.unbind()}}var E=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function O(t,e,r,n,i,o,a){var s=r.gl;if((o===r.projectHasAlpha||a)&&M(e,r,n,i),o===r.hasAlpha||a){t.bind();var l=t.uniforms;l.model=n.model||u,l.view=n.view||u,l.projection=n.projection||u,p[0]=2/s.drawingBufferWidth,p[1]=2/s.drawingBufferHeight,l.screenSize=p,l.highlightId=r.highlightId,l.highlightScale=r.highlightScale,l.fragClipBounds=E,l.clipBounds=r.axes.bounds,l.opacity=r.opacity,l.pickGroup=r.pickId/255,l.pixelRatio=i,r.vao.bind(),r.vao.draw(s.TRIANGLES,r.vertexCount),r.lineWidth>0&&(s.lineWidth(r.lineWidth*i),r.vao.draw(s.LINES,r.lineVertexCount,r.vertexCount)),r.vao.unbind()}}function S(t,e,r,i){var o;o=Array.isArray(t)?e<t.length?t[e]:void 0:t,o=c(o);var a=!0;n(o)&&(o="▼",a=!1);var s=g(o,r,i);return{mesh:s[0],lines:s[1],bounds:s[2],visible:a}}C.draw=function(t){O(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!1,!1)},C.drawTransparent=function(t){O(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!0,!1)},C.drawPick=function(t){O(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,t,1,!0,!0)},C.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=t.value[2]+(t.value[1]<<8)+(t.value[0]<<16);if(e>=this.pointCount||e<0)return null;var r=this.points[e],n=this._selectResult;n.index=e;for(var i=0;i<3;++i)n.position[i]=n.dataCoordinate[i]=r[i];return n},C.highlight=function(t){if(t){var e=t.index,r=255&e,n=e>>8&255,i=e>>16&255;this.highlightId=[r/255,n/255,i/255,0]}else this.highlightId=[1,1,1,1]},C.update=function(t){if("perspective"in(t=t||{})&&(this.useOrtho=!t.perspective),"orthographic"in t&&(this.useOrtho=!!t.orthographic),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"project"in t)if(Array.isArray(t.project))this.axesProject=t.project;else{var e=!!t.project;this.axesProject=[e,e,e]}if("projectScale"in t)if(Array.isArray(t.projectScale))this.projectScale=t.projectScale.slice();else{var r=+t.projectScale;this.projectScale=[r,r,r]}if(this.projectHasAlpha=!1,"projectOpacity"in t){if(Array.isArray(t.projectOpacity))this.projectOpacity=t.projectOpacity.slice();else{r=+t.projectOpacity;this.projectOpacity=[r,r,r]}for(var n=0;n<3;++n)this.projectOpacity[n]=A(this.projectOpacity[n]),this.projectOpacity[n]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in t&&(this.opacity=A(t.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var i,o,s=t.position,l=t.font||"normal",g=t.alignment||[0,0];if(2===g.length)i=g[0],o=g[1];else{i=[],o=[];for(n=0;n<g.length;++n)i[n]=g[n][0],o[n]=g[n][1]}var c=[1/0,1/0,1/0],u=[-1/0,-1/0,-1/0],h=t.glyph,d=t.color,f=t.size,C=t.angle,p=t.lineColor,I=-1,v=0,m=0,y=0;if(s.length){y=s.length;t:for(n=0;n<y;++n){for(var b=s[n],x=0;x<3;++x)if(isNaN(b[x])||!isFinite(b[x]))continue t;var _=(B=S(h,n,l,this.pixelRatio)).mesh,w=B.lines,k=B.bounds;v+=3*_.cells.length,m+=2*w.edges.length}}var T=v+m,M=a.mallocFloat(3*T),E=a.mallocFloat(4*T),O=a.mallocFloat(2*T),R=a.mallocUint32(T);if(T>0){var D=0,L=v,P=[0,0,0,1],N=[0,0,0,1],z=Array.isArray(d)&&Array.isArray(d[0]),F=Array.isArray(p)&&Array.isArray(p[0]);t:for(n=0;n<y;++n){I+=1;for(b=s[n],x=0;x<3;++x){if(isNaN(b[x])||!isFinite(b[x]))continue t;u[x]=Math.max(u[x],b[x]),c[x]=Math.min(c[x],b[x])}_=(B=S(h,n,l,this.pixelRatio)).mesh,w=B.lines,k=B.bounds;var B,j=B.visible;if(j)if(Array.isArray(d)){if(3===(V=z?n<d.length?d[n]:[0,0,0,0]:d).length){for(x=0;x<3;++x)P[x]=V[x];P[3]=1}else if(4===V.length){for(x=0;x<4;++x)P[x]=V[x];!this.hasAlpha&&V[3]<1&&(this.hasAlpha=!0)}}else P[0]=P[1]=P[2]=0,P[3]=1;else P=[1,1,1,0];if(j)if(Array.isArray(p)){var V;if(3===(V=F?n<p.length?p[n]:[0,0,0,0]:p).length){for(x=0;x<3;++x)N[x]=V[x];N[x]=1}else if(4===V.length){for(x=0;x<4;++x)N[x]=V[x];!this.hasAlpha&&V[3]<1&&(this.hasAlpha=!0)}}else N[0]=N[1]=N[2]=0,N[3]=1;else N=[1,1,1,0];var G=.5;j?Array.isArray(f)?G=n<f.length?+f[n]:12:f?G=+f:this.useOrtho&&(G=12):G=0;var U=0;Array.isArray(C)?U=n<C.length?+C[n]:0:C&&(U=+C);var Z=Math.cos(U),H=Math.sin(U);for(b=s[n],x=0;x<3;++x)u[x]=Math.max(u[x],b[x]),c[x]=Math.min(c[x],b[x]);var W=i,Y=o;W=0;Array.isArray(i)?W=n<i.length?i[n]:0:i&&(W=i);Y=0;Array.isArray(o)?Y=n<o.length?o[n]:0:o&&(Y=o);var X=[W*=W>0?1-k[0][0]:W<0?1+k[1][0]:1,Y*=Y>0?1-k[0][1]:Y<0?1+k[1][1]:1],q=_.cells||[],Q=_.positions||[];for(x=0;x<q.length;++x)for(var K=q[x],J=0;J<3;++J){for(var $=0;$<3;++$)M[3*D+$]=b[$];for($=0;$<4;++$)E[4*D+$]=P[$];R[D]=I;var tt=Q[K[J]];O[2*D]=G*(Z*tt[0]-H*tt[1]+X[0]),O[2*D+1]=G*(H*tt[0]+Z*tt[1]+X[1]),D+=1}for(q=w.edges,Q=w.positions,x=0;x<q.length;++x)for(K=q[x],J=0;J<2;++J){for($=0;$<3;++$)M[3*L+$]=b[$];for($=0;$<4;++$)E[4*L+$]=N[$];R[L]=I;tt=Q[K[J]];O[2*L]=G*(Z*tt[0]-H*tt[1]+X[0]),O[2*L+1]=G*(H*tt[0]+Z*tt[1]+X[1]),L+=1}}}this.bounds=[c,u],this.points=s,this.pointCount=s.length,this.vertexCount=v,this.lineVertexCount=m,this.pointBuffer.update(M),this.colorBuffer.update(E),this.glyphBuffer.update(O),this.idBuffer.update(R),a.free(M),a.free(E),a.free(O),a.free(R)},C.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":195,"./lib/glyphs":196,"./lib/shaders":197,"gl-buffer":161,"gl-mat4/multiply":178,"gl-vao":213,"is-string-blank":242,"typedarray-pool":711}],199:[function(t,e,r){"use strict";e.exports=function(t,e){var r=e[0],o=e[1],a=n(t,r,o,{}),s=i.mallocUint8(r*o*4);return new l(t,a,s)};var n=t("gl-fbo"),i=t("typedarray-pool"),o=t("ndarray"),a=t("bit-twiddle").nextPow2,s=t("cwise/lib/wrapper")({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2=1e8,this_closestX=-1,this_closestY=-1}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},body:{body:"{if(_inline_1_arg0_<255||_inline_1_arg1_<255||_inline_1_arg2_<255||_inline_1_arg3_<255){var _inline_1_l=_inline_1_arg4_-_inline_1_arg6_[0],_inline_1_a=_inline_1_arg5_-_inline_1_arg6_[1],_inline_1_f=_inline_1_l*_inline_1_l+_inline_1_a*_inline_1_a;_inline_1_f<this_closestD2&&(this_closestD2=_inline_1_f,this_closestX=_inline_1_arg6_[0],this_closestY=_inline_1_arg6_[1])}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_1_a","_inline_1_f","_inline_1_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});function l(t,e,r){this.gl=t,this.fbo=e,this.buffer=r,this._readTimeout=null;var n=this;this._readCallback=function(){n.gl&&(e.bind(),t.readPixels(0,0,e.shape[0],e.shape[1],t.RGBA,t.UNSIGNED_BYTE,n.buffer),n._readTimeout=null)}}var g=l.prototype;Object.defineProperty(g,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(t){if(this.gl){this.fbo.shape=t;var e=this.fbo.shape[0],r=this.fbo.shape[1];if(r*e*4>this.buffer.length){i.free(this.buffer);for(var n=this.buffer=i.mallocUint8(a(r*e*4)),o=0;o<r*e*4;++o)n[o]=255}return t}}}),g.begin=function(){var t=this.gl;this.shape;t&&(this.fbo.bind(),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT))},g.end=function(){var t=this.gl;t&&(t.bindFramebuffer(t.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},g.query=function(t,e,r){if(!this.gl)return null;var n=this.fbo.shape.slice();t|=0,e|=0,"number"!=typeof r&&(r=1);var i=0|Math.min(Math.max(t-r,0),n[0]),a=0|Math.min(Math.max(t+r,0),n[0]),l=0|Math.min(Math.max(e-r,0),n[1]),g=0|Math.min(Math.max(e+r,0),n[1]);if(a<=i||g<=l)return null;var c=[a-i,g-l],u=o(this.buffer,[c[0],c[1],4],[4,4*n[0],1],4*(i+n[0]*l)),h=s(u.hi(c[0],c[1],1),r,r),d=h[0],A=h[1];return d<0||Math.pow(this.radius,2)<h[2]?null:new function(t,e,r,n,i){this.coord=[t,e],this.id=r,this.value=n,this.distance=i}(d+i|0,A+l|0,u.get(d,A,0),[u.get(d,A,1),u.get(d,A,2),u.get(d,A,3)],Math.sqrt(h[2]))},g.dispose=function(){this.gl&&(this.fbo.dispose(),i.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":33,"cwise/lib/wrapper":71,"gl-fbo":166,ndarray:262,"typedarray-pool":711}],200:[function(t,e,r){"use strict";var n=t("./lib/create-uniforms"),i=t("./lib/create-attributes"),o=t("./lib/reflect"),a=t("./lib/shader-cache"),s=t("./lib/runtime-reflect"),l=t("./lib/GLError");function g(t){this.gl=t,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var c=g.prototype;function u(t,e){return t.name<e.name?-1:1}c.bind=function(){var t;this.program||this._relink();var e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),r=this.gl.lastAttribCount;if(e>r)for(t=r;t<e;t++)this.gl.enableVertexAttribArray(t);else if(r>e)for(t=e;t<r;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=e,this.gl.useProgram(this.program)},c.dispose=function(){for(var t=this.gl.lastAttribCount,e=0;e<t;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},c.update=function(t,e,r,g){if(!e||1===arguments.length){var c=t;t=c.vertex,e=c.fragment,r=c.uniforms,g=c.attributes}var h=this,d=h.gl,A=h._vref;h._vref=a.shader(d,d.VERTEX_SHADER,t),A&&A.dispose(),h.vertShader=h._vref.shader;var f=this._fref;if(h._fref=a.shader(d,d.FRAGMENT_SHADER,e),f&&f.dispose(),h.fragShader=h._fref.shader,!r||!g){var C=d.createProgram();if(d.attachShader(C,h.fragShader),d.attachShader(C,h.vertShader),d.linkProgram(C),!d.getProgramParameter(C,d.LINK_STATUS)){var p=d.getProgramInfoLog(C);throw new l(p,"Error linking program:"+p)}r=r||s.uniforms(d,C),g=g||s.attributes(d,C),d.deleteProgram(C)}(g=g.slice()).sort(u);var I,v=[],m=[],y=[];for(I=0;I<g.length;++I){var b=g[I];if(b.type.indexOf("mat")>=0){for(var x=0|b.type.charAt(b.type.length-1),_=new Array(x),w=0;w<x;++w)_[w]=y.length,m.push(b.name+"["+w+"]"),"number"==typeof b.location?y.push(b.location+w):Array.isArray(b.location)&&b.location.length===x&&"number"==typeof b.location[w]?y.push(0|b.location[w]):y.push(-1);v.push({name:b.name,type:b.type,locations:_})}else v.push({name:b.name,type:b.type,locations:[y.length]}),m.push(b.name),"number"==typeof b.location?y.push(0|b.location):y.push(-1)}var k=0;for(I=0;I<y.length;++I)if(y[I]<0){for(;y.indexOf(k)>=0;)k+=1;y[I]=k}var T=new Array(r.length);function M(){h.program=a.program(d,h._vref,h._fref,m,y);for(var t=0;t<r.length;++t)T[t]=d.getUniformLocation(h.program,r[t].name)}M(),h._relink=M,h.types={uniforms:o(r),attributes:o(g)},h.attributes=i(d,h,v,y),Object.defineProperty(h,"uniforms",n(d,h,r,T))},e.exports=function(t,e,r,n,i){var o=new g(t);return o.update(e,r,n,i),o}},{"./lib/GLError":201,"./lib/create-attributes":202,"./lib/create-uniforms":203,"./lib/reflect":204,"./lib/runtime-reflect":205,"./lib/shader-cache":206}],201:[function(t,e,r){function n(t,e,r){this.shortMessage=e||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(e||t||"")+(r?"\n"+r:""),this.stack=(new Error).stack}n.prototype=new Error,n.prototype.name="GLError",n.prototype.constructor=n,e.exports=n},{}],202:[function(t,e,r){"use strict";e.exports=function(t,e,r,i){for(var o={},l=0,g=r.length;l<g;++l){var c=r[l],u=c.name,h=c.type,d=c.locations;switch(h){case"bool":case"int":case"float":a(t,e,d[0],i,1,o,u);break;default:if(h.indexOf("vec")>=0){var A=h.charCodeAt(h.length-1)-48;if(A<2||A>4)throw new n("","Invalid data type for attribute "+u+": "+h);a(t,e,d[0],i,A,o,u)}else{if(!(h.indexOf("mat")>=0))throw new n("","Unknown data type for attribute "+u+": "+h);var A=h.charCodeAt(h.length-1)-48;if(A<2||A>4)throw new n("","Invalid data type for attribute "+u+": "+h);s(t,e,d,i,A,o,u)}}}return o};var n=t("./GLError");function i(t,e,r,n,i,o){this._gl=t,this._wrapper=e,this._index=r,this._locations=n,this._dimension=i,this._constFunc=o}var o=i.prototype;function a(t,e,r,n,o,a,s){for(var l=["gl","v"],g=[],c=0;c<o;++c)l.push("x"+c),g.push("x"+c);l.push("if(x0.length===void 0){return gl.vertexAttrib"+o+"f(v,"+g.join()+")}else{return gl.vertexAttrib"+o+"fv(v,x0)}");var u=Function.apply(null,l),h=new i(t,e,r,n,o,u);Object.defineProperty(a,s,{set:function(e){return t.disableVertexAttribArray(n[r]),u(t,n[r],e),e},get:function(){return h},enumerable:!0})}function s(t,e,r,n,i,o,s){for(var l=new Array(i),g=new Array(i),c=0;c<i;++c)a(t,e,r[c],n,i,l,c),g[c]=l[c];Object.defineProperty(l,"location",{set:function(t){if(Array.isArray(t))for(var e=0;e<i;++e)g[e].location=t[e];else for(e=0;e<i;++e)g[e].location=t+e;return t},get:function(){for(var t=new Array(i),e=0;e<i;++e)t[e]=n[r[e]];return t},enumerable:!0}),l.pointer=function(e,o,a,s){e=e||t.FLOAT,o=!!o,a=a||i*i,s=s||0;for(var l=0;l<i;++l){var g=n[r[l]];t.vertexAttribPointer(g,i,e,o,a,s+l*i),t.enableVertexAttribArray(g)}};var u=new Array(i),h=t["vertexAttrib"+i+"fv"];Object.defineProperty(o,s,{set:function(e){for(var o=0;o<i;++o){var a=n[r[o]];if(t.disableVertexAttribArray(a),Array.isArray(e[0]))h.call(t,a,e[o]);else{for(var s=0;s<i;++s)u[s]=e[i*o+s];h.call(t,a,u)}}return e},get:function(){return l},enumerable:!0})}o.pointer=function(t,e,r,n){var i=this._gl,o=this._locations[this._index];i.vertexAttribPointer(o,this._dimension,t||i.FLOAT,!!e,r||0,n||0),i.enableVertexAttribArray(o)},o.set=function(t,e,r,n){return this._constFunc(this._locations[this._index],t,e,r,n)},Object.defineProperty(o,"location",{get:function(){return this._locations[this._index]},set:function(t){return t!==this._locations[this._index]&&(this._locations[this._index]=0|t,this._wrapper.program=null),0|t}})},{"./GLError":201}],203:[function(t,e,r){"use strict";var n=t("./reflect"),i=t("./GLError");function o(t){return new Function("y","return function(){return y}")(t)}function a(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=e;return r}e.exports=function(t,e,r,s){function l(t,e,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+e+"],obj"+t+")";case"float":return"gl.uniform1f(locations["+e+"],obj"+t+")";default:var n=r.indexOf("vec");if(!(0<=n&&n<=1&&r.length===4+n)){if(0===r.indexOf("mat")&&4===r.length){var o=r.charCodeAt(r.length-1)-48;if(o<2||o>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+r);return"gl.uniformMatrix"+o+"fv(locations["+e+"],false,obj"+t+")"}throw new i("","Unknown uniform data type for "+name+": "+r)}var o=r.charCodeAt(r.length-1)-48;if(o<2||o>4)throw new i("","Invalid data type");switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+o+"iv(locations["+e+"],obj"+t+")";case"v":return"gl.uniform"+o+"fv(locations["+e+"],obj"+t+")";default:throw new i("","Unrecognized data type for vector "+name+": "+r)}}}function g(e){for(var n=["return function updateProperty(obj){"],i=function t(e,r){if("object"!=typeof r)return[[e,r]];var n=[];for(var i in r){var o=r[i],a=e;parseInt(i)+""===i?a+="["+i+"]":a+="."+i,"object"==typeof o?n.push.apply(n,t(a,o)):n.push([a,o])}return n}("",e),o=0;o<i.length;++o){var a=i[o],g=a[0],c=a[1];s[c]&&n.push(l(g,c,r[c].type))}n.push("return obj}");var u=new Function("gl","locations",n.join("\n"));return u(t,s)}function c(n,l,c){if("object"==typeof c){var h=u(c);Object.defineProperty(n,l,{get:o(h),set:g(c),enumerable:!0,configurable:!1})}else s[c]?Object.defineProperty(n,l,{get:(d=c,new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+d+"])}")(t,e,s)),set:g(c),enumerable:!0,configurable:!1}):n[l]=function(t){switch(t){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var e=t.indexOf("vec");if(0<=e&&e<=1&&t.length===4+e){var r=t.charCodeAt(t.length-1)-48;if(r<2||r>4)throw new i("","Invalid data type");return"b"===t.charAt(0)?a(r,!1):a(r,0)}if(0===t.indexOf("mat")&&4===t.length){var r=t.charCodeAt(t.length-1)-48;if(r<2||r>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+t);return a(r*r,0)}throw new i("","Unknown uniform data type for "+name+": "+t)}}(r[c].type);var d}function u(t){var e;if(Array.isArray(t)){e=new Array(t.length);for(var r=0;r<t.length;++r)c(e,r,t[r])}else for(var n in e={},t)c(e,n,t[n]);return e}var h=n(r,!0);return{get:o(u(h)),set:g(h),enumerable:!0,configurable:!0}}},{"./GLError":201,"./reflect":204}],204:[function(t,e,r){"use strict";e.exports=function(t,e){for(var r={},n=0;n<t.length;++n)for(var i=t[n].name,o=i.split("."),a=r,s=0;s<o.length;++s){var l=o[s].split("[");if(l.length>1){l[0]in a||(a[l[0]]=[]),a=a[l[0]];for(var g=1;g<l.length;++g){var c=parseInt(l[g]);g<l.length-1||s<o.length-1?(c in a||(g<l.length-1?a[c]=[]:a[c]={}),a=a[c]):a[c]=e?n:t[n].type}}else s<o.length-1?(l[0]in a||(a[l[0]]={}),a=a[l[0]]):a[l[0]]=e?n:t[n].type}return r}},{}],205:[function(t,e,r){"use strict";r.uniforms=function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=[],i=0;i<r;++i){var a=t.getActiveUniform(e,i);if(a){var s=o(t,a.type);if(a.size>1)for(var l=0;l<a.size;++l)n.push({name:a.name.replace("[0]","["+l+"]"),type:s});else n.push({name:a.name,type:s})}}return n},r.attributes=function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=[],i=0;i<r;++i){var a=t.getActiveAttrib(e,i);a&&n.push({name:a.name,type:o(t,a.type)})}return n};var n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function o(t,e){if(!i){var r=Object.keys(n);i={};for(var o=0;o<r.length;++o){var a=r[o];i[t[a]]=n[a]}}return i[e]}},{}],206:[function(t,e,r){"use strict";r.shader=function(t,e,r){return c(t).getShaderReference(e,r)},r.program=function(t,e,r,n,i){return c(t).getProgram(e,r,n,i)};var n=t("./GLError"),i=t("gl-format-compiler-error"),o=new("undefined"==typeof WeakMap?t("weakmap-shim"):WeakMap),a=0;function s(t,e,r,n,i,o,a){this.id=t,this.src=e,this.type=r,this.shader=n,this.count=o,this.programs=[],this.cache=a}function l(t){this.gl=t,this.shaders=[{},{}],this.programs={}}s.prototype.dispose=function(){if(0==--this.count){for(var t=this.cache,e=t.gl,r=this.programs,n=0,i=r.length;n<i;++n){var o=t.programs[r[n]];o&&(delete t.programs[n],e.deleteProgram(o))}e.deleteShader(this.shader),delete t.shaders[this.type===e.FRAGMENT_SHADER|0][this.src]}};var g=l.prototype;function c(t){var e=o.get(t);return e||(e=new l(t),o.set(t,e)),e}g.getShaderReference=function(t,e){var r=this.gl,o=this.shaders[t===r.FRAGMENT_SHADER|0],l=o[e];if(l&&r.isShader(l.shader))l.count+=1;else{var g=function(t,e,r){var o=t.createShader(e);if(t.shaderSource(o,r),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(o);try{var s=i(a,r,e)}catch(t){throw console.warn("Failed to format compiler error: "+t),new n(a,"Error compiling shader:\n"+a)}throw new n(a,s.short,s.long)}return o}(r,t,e);l=o[e]=new s(a++,e,t,g,[],1,this)}return l},g.getProgram=function(t,e,r,i){var o=[t.id,e.id,r.join(":"),i.join(":")].join("@"),a=this.programs[o];return a&&this.gl.isProgram(a)||(this.programs[o]=a=function(t,e,r,i,o){var a=t.createProgram();t.attachShader(a,e),t.attachShader(a,r);for(var s=0;s<i.length;++s)t.bindAttribLocation(a,o[s],i[s]);if(t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS)){var l=t.getProgramInfoLog(a);throw new n(l,"Error linking program: "+l)}return a}(this.gl,t.shader,e.shader,r,i),t.programs.push(o),e.programs.push(o)),a}},{"./GLError":201,"gl-format-compiler-error":167,"weakmap-shim":720}],207:[function(t,e,r){"use strict";var n=t("glslify"),i=t("gl-shader"),o=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),a=n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);e.exports=function(t){return i(t,o,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":200,glslify:228}],208:[function(t,e,r){"use strict";var n=t("gl-buffer"),i=t("gl-vao"),o=t("./shaders/index");e.exports=function(t,e){var r=[];function a(t,e,n,i,o,a){var s=[t,e,n,0,0,0,1];s[i+3]=1,s[i]=o,r.push.apply(r,s),s[6]=-1,r.push.apply(r,s),s[i]=a,r.push.apply(r,s),r.push.apply(r,s),s[6]=1,r.push.apply(r,s),s[i]=o,r.push.apply(r,s)}a(0,0,0,0,0,1),a(0,0,0,1,0,1),a(0,0,0,2,0,1),a(1,0,0,1,-1,1),a(1,0,0,2,-1,1),a(0,1,0,0,-1,1),a(0,1,0,2,-1,1),a(0,0,1,0,-1,1),a(0,0,1,1,-1,1);var l=n(t,r),g=i(t,[{type:t.FLOAT,buffer:l,size:3,offset:0,stride:28},{type:t.FLOAT,buffer:l,size:3,offset:12,stride:28},{type:t.FLOAT,buffer:l,size:1,offset:24,stride:28}]),c=o(t);c.attributes.position.location=0,c.attributes.color.location=1,c.attributes.weight.location=2;var u=new s(t,l,g,c);return u.update(e),u};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(t,e,r,n){this.gl=t,this.buffer=e,this.vao=r,this.shader=n,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var l=s.prototype,g=[0,0,0],c=[0,0,0],u=[0,0];l.isTransparent=function(){return!1},l.drawTransparent=function(t){},l.draw=function(t){var e=this.gl,r=this.vao,n=this.shader;r.bind(),n.bind();var i,o=t.model||a,s=t.view||a,l=t.projection||a;this.axes&&(i=this.axes.lastCubeProps.axis);for(var h=g,d=c,A=0;A<3;++A)i&&i[A]<0?(h[A]=this.bounds[0][A],d[A]=this.bounds[1][A]):(h[A]=this.bounds[1][A],d[A]=this.bounds[0][A]);u[0]=e.drawingBufferWidth,u[1]=e.drawingBufferHeight,n.uniforms.model=o,n.uniforms.view=s,n.uniforms.projection=l,n.uniforms.coordinates=[this.position,h,d],n.uniforms.colors=this.colors,n.uniforms.screenShape=u;for(A=0;A<3;++A)n.uniforms.lineWidth=this.lineWidth[A]*this.pixelRatio,this.enabled[A]&&(r.draw(e.TRIANGLES,6,6*A),this.drawSides[A]&&r.draw(e.TRIANGLES,12,18+12*A));r.unbind()},l.update=function(t){t&&("bounds"in t&&(this.bounds=t.bounds),"position"in t&&(this.position=t.position),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"colors"in t&&(this.colors=t.colors),"enabled"in t&&(this.enabled=t.enabled),"drawSides"in t&&(this.drawSides=t.drawSides))},l.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":207,"gl-buffer":161,"gl-vao":213}],209:[function(t,e,r){"use strict";var n=t("ndarray"),i=t("ndarray-ops"),o=t("typedarray-pool");e.exports=function(t){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");a||function(t){a=[t.LINEAR,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_NEAREST],s=[t.NEAREST,t.LINEAR,t.NEAREST_MIPMAP_NEAREST,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_LINEAR],l=[t.REPEAT,t.CLAMP_TO_EDGE,t.MIRRORED_REPEAT]}(t);if("number"==typeof arguments[1])return C(t,arguments[1],arguments[2],arguments[3]||t.RGBA,arguments[4]||t.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return C(t,0|arguments[1][0],0|arguments[1][1],arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var e=arguments[1],r=g(e)?e:e.raw;if(r)return function(t,e,r,n,i,o){var a=f(t);return t.texImage2D(t.TEXTURE_2D,0,i,i,o,e),new h(t,a,r,n,i,o)}(t,r,0|e.width,0|e.height,arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if(e.shape&&e.data&&e.stride)return function(t,e){var r=e.dtype,a=e.shape.slice(),s=t.getParameter(t.MAX_TEXTURE_SIZE);if(a[0]<0||a[0]>s||a[1]<0||a[1]>s)throw new Error("gl-texture2d: Invalid texture size");var l=A(a,e.stride.slice()),g=0;"float32"===r?g=t.FLOAT:"float64"===r?(g=t.FLOAT,l=!1,r="float32"):"uint8"===r?g=t.UNSIGNED_BYTE:(g=t.UNSIGNED_BYTE,l=!1,r="uint8");var u,d,C=0;if(2===a.length)C=t.LUMINANCE,a=[a[0],a[1],1],e=n(e.data,a,[e.stride[0],e.stride[1],1],e.offset);else{if(3!==a.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===a[2])C=t.ALPHA;else if(2===a[2])C=t.LUMINANCE_ALPHA;else if(3===a[2])C=t.RGB;else{if(4!==a[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");C=t.RGBA}}g!==t.FLOAT||t.getExtension("OES_texture_float")||(g=t.UNSIGNED_BYTE,l=!1);var p=e.size;if(l)u=0===e.offset&&e.data.length===p?e.data:e.data.subarray(e.offset,e.offset+p);else{var I=[a[2],a[2]*a[0],1];d=o.malloc(p,r);var v=n(d,a,I,0);"float32"!==r&&"float64"!==r||g!==t.UNSIGNED_BYTE?i.assign(v,e):c(v,e),u=d.subarray(0,p)}var m=f(t);t.texImage2D(t.TEXTURE_2D,0,C,a[0],a[1],0,C,g,u),l||o.free(d);return new h(t,m,a[0],a[1],C,g)}(t,e)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,s=null,l=null;function g(t){return"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&t instanceof ImageData}var c=function(t,e){i.muls(t,e,255)};function u(t,e,r){var n=t.gl,i=n.getParameter(n.MAX_TEXTURE_SIZE);if(e<0||e>i||r<0||r>i)throw new Error("gl-texture2d: Invalid texture size");return t._shape=[e,r],t.bind(),n.texImage2D(n.TEXTURE_2D,0,t.format,e,r,0,t.format,t.type,null),t._mipLevels=[0],t}function h(t,e,r,n,i,o){this.gl=t,this.handle=e,this.format=i,this.type=o,this._shape=[r,n],this._mipLevels=[0],this._magFilter=t.NEAREST,this._minFilter=t.NEAREST,this._wrapS=t.CLAMP_TO_EDGE,this._wrapT=t.CLAMP_TO_EDGE,this._anisoSamples=1;var a=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return a._wrapS},set:function(t){return a.wrapS=t}},{get:function(){return a._wrapT},set:function(t){return a.wrapT=t}}]),this._wrapVector=s;var l=[this._shape[0],this._shape[1]];Object.defineProperties(l,[{get:function(){return a._shape[0]},set:function(t){return a.width=t}},{get:function(){return a._shape[1]},set:function(t){return a.height=t}}]),this._shapeVector=l}var d=h.prototype;function A(t,e){return 3===t.length?1===e[2]&&e[1]===t[0]*t[2]&&e[0]===t[2]:1===e[0]&&e[1]===t[0]}function f(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e}function C(t,e,r,n,i){var o=t.getParameter(t.MAX_TEXTURE_SIZE);if(e<0||e>o||r<0||r>o)throw new Error("gl-texture2d: Invalid texture shape");if(i===t.FLOAT&&!t.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var a=f(t);return t.texImage2D(t.TEXTURE_2D,0,n,e,r,0,n,i,null),new h(t,a,e,r,n,i)}Object.defineProperties(d,{minFilter:{get:function(){return this._minFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&a.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),s.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),this._minFilter=t}},magFilter:{get:function(){return this._magFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&a.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),s.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t),this._magFilter=t}},mipSamples:{get:function(){return this._anisoSamples},set:function(t){var e=this._anisoSamples;if(this._anisoSamples=0|Math.max(t,1),e!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(t){if(this.bind(),l.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,t),this._wrapS=t}},wrapT:{get:function(){return this._wrapT},set:function(t){if(this.bind(),l.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,t),this._wrapT=t}},wrap:{get:function(){return this._wrapVector},set:function(t){if(Array.isArray(t)||(t=[t,t]),2!==t.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var e=0;e<2;++e)if(l.indexOf(t[e])<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);this._wrapS=t[0],this._wrapT=t[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),t}},shape:{get:function(){return this._shapeVector},set:function(t){if(Array.isArray(t)){if(2!==t.length)throw new Error("gl-texture2d: Invalid texture shape")}else t=[0|t,0|t];return u(this,0|t[0],0|t[1]),[0|t[0],0|t[1]]}},width:{get:function(){return this._shape[0]},set:function(t){return u(this,t|=0,this._shape[1]),t}},height:{get:function(){return this._shape[1]},set:function(t){return t|=0,u(this,this._shape[0],t),t}}}),d.bind=function(t){var e=this.gl;return void 0!==t&&e.activeTexture(e.TEXTURE0+(0|t)),e.bindTexture(e.TEXTURE_2D,this.handle),void 0!==t?0|t:e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0},d.dispose=function(){this.gl.deleteTexture(this.handle)},d.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var t=Math.min(this._shape[0],this._shape[1]),e=0;t>0;++e,t>>>=1)this._mipLevels.indexOf(e)<0&&this._mipLevels.push(e)},d.setPixels=function(t,e,r,a){var s=this.gl;this.bind(),Array.isArray(e)?(a=r,r=0|e[1],e=0|e[0]):(e=e||0,r=r||0),a=a||0;var l=g(t)?t:t.raw;if(l){this._mipLevels.indexOf(a)<0?(s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,this.type,l),this._mipLevels.push(a)):s.texSubImage2D(s.TEXTURE_2D,a,e,r,this.format,this.type,l)}else{if(!(t.shape&&t.stride&&t.data))throw new Error("gl-texture2d: Unsupported data type");if(t.shape.length<2||e+t.shape[1]>this._shape[1]>>>a||r+t.shape[0]>this._shape[0]>>>a||e<0||r<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(t,e,r,a,s,l,g,u){var h=u.dtype,d=u.shape.slice();if(d.length<2||d.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var f=0,C=0,p=A(d,u.stride.slice());"float32"===h?f=t.FLOAT:"float64"===h?(f=t.FLOAT,p=!1,h="float32"):"uint8"===h?f=t.UNSIGNED_BYTE:(f=t.UNSIGNED_BYTE,p=!1,h="uint8");if(2===d.length)C=t.LUMINANCE,d=[d[0],d[1],1],u=n(u.data,d,[u.stride[0],u.stride[1],1],u.offset);else{if(3!==d.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===d[2])C=t.ALPHA;else if(2===d[2])C=t.LUMINANCE_ALPHA;else if(3===d[2])C=t.RGB;else{if(4!==d[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");C=t.RGBA}d[2]}C!==t.LUMINANCE&&C!==t.ALPHA||s!==t.LUMINANCE&&s!==t.ALPHA||(C=s);if(C!==s)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var I=u.size,v=g.indexOf(a)<0;v&&g.push(a);if(f===l&&p)0===u.offset&&u.data.length===I?v?t.texImage2D(t.TEXTURE_2D,a,s,d[0],d[1],0,s,l,u.data):t.texSubImage2D(t.TEXTURE_2D,a,e,r,d[0],d[1],s,l,u.data):v?t.texImage2D(t.TEXTURE_2D,a,s,d[0],d[1],0,s,l,u.data.subarray(u.offset,u.offset+I)):t.texSubImage2D(t.TEXTURE_2D,a,e,r,d[0],d[1],s,l,u.data.subarray(u.offset,u.offset+I));else{var m;m=l===t.FLOAT?o.mallocFloat32(I):o.mallocUint8(I);var y=n(m,d,[d[2],d[2]*d[0],1]);f===t.FLOAT&&l===t.UNSIGNED_BYTE?c(y,u):i.assign(y,u),v?t.texImage2D(t.TEXTURE_2D,a,s,d[0],d[1],0,s,l,m.subarray(0,I)):t.texSubImage2D(t.TEXTURE_2D,a,e,r,d[0],d[1],s,l,m.subarray(0,I)),l===t.FLOAT?o.freeFloat32(m):o.freeUint8(m)}}(s,e,r,a,this.format,this.type,this._mipLevels,t)}}},{ndarray:262,"ndarray-ops":259,"typedarray-pool":711}],210:[function(t,e,r){"use strict";e.exports=function(t,e,r){e?e.bind():t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null);var n=0|t.getParameter(t.MAX_VERTEX_ATTRIBS);if(r){if(r.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<r.length;++i){var o=r[i];if(o.buffer){var a=o.buffer,s=o.size||4,l=o.type||t.FLOAT,g=!!o.normalized,c=o.stride||0,u=o.offset||0;a.bind(),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,s,l,g,c,u)}else{if("number"==typeof o)t.vertexAttrib1f(i,o);else if(1===o.length)t.vertexAttrib1f(i,o[0]);else if(2===o.length)t.vertexAttrib2f(i,o[0],o[1]);else if(3===o.length)t.vertexAttrib3f(i,o[0],o[1],o[2]);else{if(4!==o.length)throw new Error("gl-vao: Invalid vertex attribute");t.vertexAttrib4f(i,o[0],o[1],o[2],o[3])}t.disableVertexAttribArray(i)}}for(;i<n;++i)t.disableVertexAttribArray(i)}else for(t.bindBuffer(t.ARRAY_BUFFER,null),i=0;i<n;++i)t.disableVertexAttribArray(i)}},{}],211:[function(t,e,r){"use strict";var n=t("./do-bind.js");function i(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}i.prototype.bind=function(){n(this.gl,this._elements,this._attributes)},i.prototype.update=function(t,e,r){this._elements=e,this._attributes=t,this._elementsType=r||this.gl.UNSIGNED_SHORT},i.prototype.dispose=function(){},i.prototype.unbind=function(){},i.prototype.draw=function(t,e,r){r=r||0;var n=this.gl;this._elements?n.drawElements(t,e,this._elementsType,r):n.drawArrays(t,r,e)},e.exports=function(t){return new i(t)}},{"./do-bind.js":210}],212:[function(t,e,r){"use strict";var n=t("./do-bind.js");function i(t,e,r,n,i,o){this.location=t,this.dimension=e,this.a=r,this.b=n,this.c=i,this.d=o}function o(t,e,r){this.gl=t,this._ext=e,this.handle=r,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}i.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},o.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},o.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},o.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},o.prototype.update=function(t,e,r){if(this.bind(),n(this.gl,e,t),this.unbind(),this._attribs.length=0,t)for(var o=0;o<t.length;++o){var a=t[o];"number"==typeof a?this._attribs.push(new i(o,1,a)):Array.isArray(a)&&this._attribs.push(new i(o,a.length,a[0],a[1],a[2],a[3]))}this._useElements=!!e,this._elementsType=r||this.gl.UNSIGNED_SHORT},o.prototype.draw=function(t,e,r){r=r||0;var n=this.gl;this._useElements?n.drawElements(t,e,this._elementsType,r):n.drawArrays(t,r,e)},e.exports=function(t,e){return new o(t,e,e.createVertexArrayOES())}},{"./do-bind.js":210}],213:[function(t,e,r){"use strict";var n=t("./lib/vao-native.js"),i=t("./lib/vao-emulated.js");e.exports=function(t,e,r,o){var a,s=t.createVertexArray?new function(t){this.bindVertexArrayOES=t.bindVertexArray.bind(t),this.createVertexArrayOES=t.createVertexArray.bind(t),this.deleteVertexArrayOES=t.deleteVertexArray.bind(t)}(t):t.getExtension("OES_vertex_array_object");return(a=s?n(t,s):i(t)).update(e,r,o),a}},{"./lib/vao-emulated.js":211,"./lib/vao-native.js":212}],214:[function(t,e,r){e.exports=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],l=r[2];return t[0]=i*l-o*s,t[1]=o*a-n*l,t[2]=n*s-i*a,t}},{}],215:[function(t,e,r){e.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},{}],216:[function(t,e,r){e.exports=function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}},{}],217:[function(t,e,r){e.exports=function(t,e,r,n){var i=e[0],o=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t}},{}],218:[function(t,e,r){e.exports=function(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o);return t}},{}],219:[function(t,e,r){e.exports=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t}},{}],220:[function(t,e,r){var n=t("glsl-tokenizer"),i=t("atob-lite");e.exports=function(t){for(var e=Array.isArray(t)?t:n(t),r=0;r<e.length;r++){var o=e[r];if("preprocessor"===o.type){var a=o.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(a&&a[2]){var s=a[1],l=a[2];return(s?i(l):l).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":227}],221:[function(t,e,r){e.exports=function(t){var e,r,x,_=0,w=0,k=l,T=[],M=[],E=1,O=0,S=0,R=!1,D=!1,L="",P=o,N=n;"300 es"===(t=t||{}).version&&(P=s,N=a);for(var z={},F={},_=0;_<P.length;_++)z[P[_]]=!0;for(var _=0;_<N.length;_++)F[N[_]]=!0;return function(t){return M=[],null!==t?function(t){_=0,t.toString&&(t=t.toString());var r;L+=t.replace(/\r\n/g,"\n"),x=L.length;for(;e=L[_],_<x;){switch(r=_,k){case c:_=U();break;case u:case h:_=G();break;case d:_=Z();break;case A:_=Y();break;case y:_=W();break;case f:_=X();break;case g:_=q();break;case v:_=V();break;case l:_=j()}if(r!==_)switch(L[r]){case"\n":O=0,++E;break;default:++O}}return w+=_,L=L.slice(_),M}(t):function(t){T.length&&B(T.join(""));return k=m,B("(eof)"),M}()};function B(t){t.length&&M.push({type:b[k],data:t,position:S,line:E,column:O})}function j(){return T=T.length?[]:T,"/"===r&&"*"===e?(S=w+_-1,k=c,r=e,_+1):"/"===r&&"/"===e?(S=w+_-1,k=u,r=e,_+1):"#"===e?(k=h,S=w+_,_):/\s/.test(e)?(k=v,S=w+_,_):(R=/\d/.test(e),D=/[^\w_]/.test(e),S=w+_,k=R?A:D?d:g,_)}function V(){return/[^\s]/g.test(e)?(B(T.join("")),k=l,_):(T.push(e),r=e,_+1)}function G(){return"\r"!==e&&"\n"!==e||"\\"===r?(T.push(e),r=e,_+1):(B(T.join("")),k=l,_)}function U(){return"/"===e&&"*"===r?(T.push(e),B(T.join("")),k=l,_+1):(T.push(e),r=e,_+1)}function Z(){if("."===r&&/\d/.test(e))return k=f,_;if("/"===r&&"*"===e)return k=c,_;if("/"===r&&"/"===e)return k=u,_;if("."===e&&T.length){for(;H(T););return k=f,_}if(";"===e||")"===e||"("===e){if(T.length)for(;H(T););return B(e),k=l,_+1}var t=2===T.length&&"="!==e;if(/[\w_\d\s]/.test(e)||t){for(;H(T););return k=l,_}return T.push(e),r=e,_+1}function H(t){for(var e,r,n=0;;){if(e=i.indexOf(t.slice(0,t.length+n).join("")),r=i[e],-1===e){if(n--+t.length>0)continue;r=t.slice(0,1).join("")}return B(r),S+=r.length,(T=T.slice(r.length)).length}}function W(){return/[^a-fA-F0-9]/.test(e)?(B(T.join("")),k=l,_):(T.push(e),r=e,_+1)}function Y(){return"."===e?(T.push(e),k=f,r=e,_+1):/[eE]/.test(e)?(T.push(e),k=f,r=e,_+1):"x"===e&&1===T.length&&"0"===T[0]?(k=y,T.push(e),r=e,_+1):/[^\d]/.test(e)?(B(T.join("")),k=l,_):(T.push(e),r=e,_+1)}function X(){return"f"===e&&(T.push(e),r=e,_+=1),/[eE]/.test(e)?(T.push(e),r=e,_+1):("-"!==e&&"+"!==e||!/[eE]/.test(r))&&/[^\d]/.test(e)?(B(T.join("")),k=l,_):(T.push(e),r=e,_+1)}function q(){if(/[^\d\w_]/.test(e)){var t=T.join("");return k=F[t]?I:z[t]?p:C,B(T.join("")),k=l,_}return T.push(e),r=e,_+1}};var n=t("./lib/literals"),i=t("./lib/operators"),o=t("./lib/builtins"),a=t("./lib/literals-300es"),s=t("./lib/builtins-300es"),l=999,g=9999,c=0,u=1,h=2,d=3,A=4,f=5,C=6,p=7,I=8,v=9,m=10,y=11,b=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":223,"./lib/builtins-300es":222,"./lib/literals":225,"./lib/literals-300es":224,"./lib/operators":226}],222:[function(t,e,r){var n=t("./builtins");n=n.slice().filter(function(t){return!/^(gl\_|texture)/.test(t)}),e.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":223}],223:[function(t,e,r){e.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],224:[function(t,e,r){var n=t("./literals");e.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":225}],225:[function(t,e,r){e.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],226:[function(t,e,r){e.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],227:[function(t,e,r){var n=t("./index");e.exports=function(t,e){var r=n(e),i=[];return i=(i=i.concat(r(t))).concat(r(null))}},{"./index":221}],228:[function(t,e,r){e.exports=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),r=[],n=0;n<t.length-1;n++)r.push(t[n],e[n]||"");return r.push(t[n]),r.join("")}},{}],229:[function(t,e,r){(function(r){"use strict";var n,i=t("is-browser");n="function"==typeof r.matchMedia?!r.matchMedia("(hover: none)").matches:i,e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":237}],230:[function(t,e,r){"use strict";var n=t("is-browser");e.exports=n&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},{"is-browser":237}],231:[function(t,e,r){r.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,g=l>>1,c=-7,u=r?i-1:0,h=r?-1:1,d=t[e+u];for(u+=h,o=d&(1<<-c)-1,d>>=-c,c+=s;c>0;o=256*o+t[e+u],u+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+t[e+u],u+=h,c-=8);if(0===o)o=1-g;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),o-=g}return(d?-1:1)*a*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var a,s,l,g=8*o-i-1,c=(1<<g)-1,u=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,A=n?1:-1,f=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+u>=1?h/l:h*Math.pow(2,1-u))*l>=2&&(a++,l/=2),a+u>=c?(s=0,a=c):a+u>=1?(s=(e*l-1)*Math.pow(2,i),a+=u):(s=e*Math.pow(2,u-1)*Math.pow(2,i),a=0));i>=8;t[r+d]=255&s,d+=A,s/=256,i-=8);for(a=a<<i|s,g+=i;g>0;t[r+d]=255&a,d+=A,a/=256,g-=8);t[r+d-A]|=128*f}},{}],232:[function(t,e,r){"use strict";e.exports=function(t,e){var r=t.length;if(0===r)throw new Error("Must have at least d+1 points");var i=t[0].length;if(r<=i)throw new Error("Must input at least d+1 points");var a=t.slice(0,i+1),s=n.apply(void 0,a);if(0===s)throw new Error("Input not in general position");for(var l=new Array(i+1),c=0;c<=i;++c)l[c]=c;s<0&&(l[0]=1,l[1]=0);for(var u=new o(l,new Array(i+1),!1),h=u.adjacent,d=new Array(i+2),c=0;c<=i;++c){for(var A=l.slice(),f=0;f<=i;++f)f===c&&(A[f]=-1);var C=A[0];A[0]=A[1],A[1]=C;var p=new o(A,new Array(i+1),!0);h[c]=p,d[c]=p}d[i+1]=u;for(var c=0;c<=i;++c)for(var A=h[c].vertices,I=h[c].adjacent,f=0;f<=i;++f){var v=A[f];if(v<0)I[f]=u;else for(var m=0;m<=i;++m)h[m].vertices.indexOf(v)<0&&(I[f]=h[m])}for(var y=new g(i,a,d),b=!!e,c=i+1;c<r;++c)y.insert(t[c],b);return y.boundary()};var n=t("robust-orientation"),i=t("simplicial-complex").compareCells;function o(t,e,r){this.vertices=t,this.adjacent=e,this.boundary=r,this.lastVisited=-1}function a(t,e,r){this.vertices=t,this.cell=e,this.index=r}function s(t,e){return i(t.vertices,e.vertices)}o.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var l=[];function g(t,e,r){this.dimension=t,this.vertices=e,this.simplices=r,this.interior=r.filter(function(t){return!t.boundary}),this.tuple=new Array(t+1);for(var i=0;i<=t;++i)this.tuple[i]=this.vertices[i];var o=l[t];o||(o=l[t]=function(t){for(var e=["function orient(){var tuple=this.tuple;return test("],r=0;r<=t;++r)r>0&&e.push(","),e.push("tuple[",r,"]");e.push(")}return orient");var i=new Function("test",e.join("")),o=n[t+1];return o||(o=n),i(o)}(t)),this.orient=o}var c=g.prototype;c.handleBoundaryDegeneracy=function(t,e){var r=this.dimension,n=this.vertices.length-1,i=this.tuple,o=this.vertices,a=[t];for(t.lastVisited=-n;a.length>0;){(t=a.pop()).vertices;for(var s=t.adjacent,l=0;l<=r;++l){var g=s[l];if(g.boundary&&!(g.lastVisited<=-n)){for(var c=g.vertices,u=0;u<=r;++u){var h=c[u];i[u]=h<0?e:o[h]}var d=this.orient();if(d>0)return g;g.lastVisited=-n,0===d&&a.push(g)}}}return null},c.walk=function(t,e){var r=this.vertices.length-1,n=this.dimension,i=this.vertices,o=this.tuple,a=e?this.interior.length*Math.random()|0:this.interior.length-1,s=this.interior[a];t:for(;!s.boundary;){for(var l=s.vertices,g=s.adjacent,c=0;c<=n;++c)o[c]=i[l[c]];s.lastVisited=r;for(c=0;c<=n;++c){var u=g[c];if(!(u.lastVisited>=r)){var h=o[c];o[c]=t;var d=this.orient();if(o[c]=h,d<0){s=u;continue t}u.boundary?u.lastVisited=-r:u.lastVisited=r}}return}return s},c.addPeaks=function(t,e){var r=this.vertices.length-1,n=this.dimension,i=this.vertices,l=this.tuple,g=this.interior,c=this.simplices,u=[e];e.lastVisited=r,e.vertices[e.vertices.indexOf(-1)]=r,e.boundary=!1,g.push(e);for(var h=[];u.length>0;){var d=(e=u.pop()).vertices,A=e.adjacent,f=d.indexOf(r);if(!(f<0))for(var C=0;C<=n;++C)if(C!==f){var p=A[C];if(p.boundary&&!(p.lastVisited>=r)){var I=p.vertices;if(p.lastVisited!==-r){for(var v=0,m=0;m<=n;++m)I[m]<0?(v=m,l[m]=t):l[m]=i[I[m]];if(this.orient()>0){I[v]=r,p.boundary=!1,g.push(p),u.push(p),p.lastVisited=r;continue}p.lastVisited=-r}var y=p.adjacent,b=d.slice(),x=A.slice(),_=new o(b,x,!0);c.push(_);var w=y.indexOf(e);if(!(w<0)){y[w]=_,x[f]=p,b[C]=-1,x[C]=e,A[C]=_,_.flip();for(m=0;m<=n;++m){var k=b[m];if(!(k<0||k===r)){for(var T=new Array(n-1),M=0,E=0;E<=n;++E){var O=b[E];O<0||E===m||(T[M++]=O)}h.push(new a(T,_,m))}}}}}}h.sort(s);for(C=0;C+1<h.length;C+=2){var S=h[C],R=h[C+1],D=S.index,L=R.index;D<0||L<0||(S.cell.adjacent[S.index]=R.cell,R.cell.adjacent[R.index]=S.cell)}},c.insert=function(t,e){var r=this.vertices;r.push(t);var n=this.walk(t,e);if(n){for(var i=this.dimension,o=this.tuple,a=0;a<=i;++a){var s=n.vertices[a];o[a]=s<0?t:r[s]}var l=this.orient(o);l<0||(0!==l||(n=this.handleBoundaryDegeneracy(n,t)))&&this.addPeaks(t,n)}},c.boundary=function(){for(var t=this.dimension,e=[],r=this.simplices,n=r.length,i=0;i<n;++i){var o=r[i];if(o.boundary){for(var a=new Array(t),s=o.vertices,l=0,g=0,c=0;c<=t;++c)s[c]>=0?a[l++]=s[c]:g=1&c;if(g===(1&t)){var u=a[0];a[0]=a[1],a[1]=u}e.push(a)}}return e}},{"robust-orientation":669,"simplicial-complex":678}],233:[function(t,e,r){"use strict";var n=t("binary-search-bounds"),i=0,o=1;function a(t,e,r,n,i){this.mid=t,this.left=e,this.right=r,this.leftPoints=n,this.rightPoints=i,this.count=(e?e.count:0)+(r?r.count:0)+n.length}e.exports=function(t){if(!t||0===t.length)return new v(null);return new v(I(t))};var s=a.prototype;function l(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function g(t,e){var r=I(e);t.mid=r.mid,t.left=r.left,t.right=r.right,t.leftPoints=r.leftPoints,t.rightPoints=r.rightPoints,t.count=r.count}function c(t,e){var r=t.intervals([]);r.push(e),g(t,r)}function u(t,e){var r=t.intervals([]),n=r.indexOf(e);return n<0?i:(r.splice(n,1),g(t,r),o)}function h(t,e,r){for(var n=0;n<t.length&&t[n][0]<=e;++n){var i=r(t[n]);if(i)return i}}function d(t,e,r){for(var n=t.length-1;n>=0&&t[n][1]>=e;--n){var i=r(t[n]);if(i)return i}}function A(t,e){for(var r=0;r<t.length;++r){var n=e(t[r]);if(n)return n}}function f(t,e){return t-e}function C(t,e){var r=t[0]-e[0];return r||t[1]-e[1]}function p(t,e){var r=t[1]-e[1];return r||t[0]-e[0]}function I(t){if(0===t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t[r][0],t[r][1]);e.sort(f);var n=e[e.length>>1],i=[],o=[],s=[];for(r=0;r<t.length;++r){var l=t[r];l[1]<n?i.push(l):n<l[0]?o.push(l):s.push(l)}var g=s,c=s.slice();return g.sort(C),c.sort(p),new a(n,I(i),I(o),g,c)}function v(t){this.root=t}s.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},s.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?c(this,t):this.left.insert(t):this.left=I([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?c(this,t):this.right.insert(t):this.right=I([t]);else{var r=n.ge(this.leftPoints,t,C),i=n.ge(this.rightPoints,t,p);this.leftPoints.splice(r,0,t),this.rightPoints.splice(i,0,t)}},s.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid){return this.left?4*(this.right?this.right.count:0)>3*(e-1)?u(this,t):2===(g=this.left.remove(t))?(this.left=null,this.count-=1,o):(g===o&&(this.count-=1),g):i}else{if(!(t[0]>this.mid)){if(1===this.count)return this.leftPoints[0]===t?2:i;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var r=this,a=this.left;a.right;)r=a,a=a.right;if(r===this)a.right=this.right;else{var s=this.left;g=this.right;r.count-=a.count,r.right=a.left,a.left=s,a.right=g}l(this,a),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?l(this,this.left):l(this,this.right);return o}for(s=n.ge(this.leftPoints,t,C);s<this.leftPoints.length&&this.leftPoints[s][0]===t[0];++s)if(this.leftPoints[s]===t){this.count-=1,this.leftPoints.splice(s,1);for(g=n.ge(this.rightPoints,t,p);g<this.rightPoints.length&&this.rightPoints[g][1]===t[1];++g)if(this.rightPoints[g]===t)return this.rightPoints.splice(g,1),o}return i}return this.right?4*(this.left?this.left.count:0)>3*(e-1)?u(this,t):2===(g=this.right.remove(t))?(this.right=null,this.count-=1,o):(g===o&&(this.count-=1),g):i;var g}},s.queryPoint=function(t,e){if(t<this.mid){if(this.left)if(r=this.left.queryPoint(t,e))return r;return h(this.leftPoints,t,e)}if(t>this.mid){var r;if(this.right)if(r=this.right.queryPoint(t,e))return r;return d(this.rightPoints,t,e)}return A(this.leftPoints,e)},s.queryInterval=function(t,e,r){var n;if(t<this.mid&&this.left&&(n=this.left.queryInterval(t,e,r)))return n;if(e>this.mid&&this.right&&(n=this.right.queryInterval(t,e,r)))return n;return e<this.mid?h(this.leftPoints,e,r):t>this.mid?d(this.rightPoints,t,r):A(this.leftPoints,r)};var m=v.prototype;m.insert=function(t){this.root?this.root.insert(t):this.root=new a(t[0],null,null,[t],[t])},m.remove=function(t){if(this.root){var e=this.root.remove(t);return 2===e&&(this.root=null),e!==i}return!1},m.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},m.queryInterval=function(t,e,r){if(t<=e&&this.root)return this.root.queryInterval(t,e,r)},Object.defineProperty(m,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(m,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":234}],234:[function(t,e,r){arguments[4][148][0].apply(r,arguments)},{dup:148}],235:[function(t,e,r){"use strict";e.exports=function(t,e){e=e||new Array(t.length);for(var r=0;r<t.length;++r)e[t[r]]=r;return e}},{}],236:[function(t,e,r){"use strict";e.exports=function(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}},{}],237:[function(t,e,r){e.exports=!0},{}],238:[function(t,e,r){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}e.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},{}],239:[function(t,e,r){"use strict";e.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],240:[function(t,e,r){"use strict";e.exports=o,e.exports.isMobile=o,e.exports.default=o;var n=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function o(t){t||(t={});var e=t.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var r=t.tablet?i.test(e):n.test(e);return!r&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(r=!0),r}},{}],241:[function(t,e,r){"use strict";var n=Object.prototype.toString;e.exports=function(t){var e;return"[object Object]"===n.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))}},{}],242:[function(t,e,r){"use strict";e.exports=function(t){for(var e,r=t.length,n=0;n<r;n++)if(((e=t.charCodeAt(n))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}},{}],243:[function(t,e,r){"use strict";e.exports=function(t){return"string"==typeof t&&(t=t.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\dz]$/i.test(t)&&t.length>4))}},{}],244:[function(t,e,r){e.exports=function(t,e,r){return t*(1-r)+e*r}},{}],245:[function(t,e,r){"use strict";e.exports=function(t){for(var e=1<<t+1,r=new Array(e),n=0;n<e;++n)r[n]=o(t,n);return r};var n=t("convex-hull");function i(t,e,r){for(var n=new Array(t),i=0;i<t;++i)n[i]=0,i===e&&(n[i]+=.5),i===r&&(n[i]+=.5);return n}function o(t,e){if(0===e||e===(1<<t+1)-1)return[];for(var r=[],o=[],a=0;a<=t;++a)if(e&1<<a){r.push(i(t,a-1,a-1)),o.push(null);for(var s=0;s<=t;++s)~e&1<<s&&(r.push(i(t,a-1,s-1)),o.push([a,s]))}var l=n(r),g=[];t:for(a=0;a<l.length;++a){var c=l[a],u=[];for(s=0;s<c.length;++s){if(!o[c[s]])continue t;u.push(o[c[s]].slice())}g.push(u)}return g}},{"convex-hull":63}],246:[function(t,e,r){var n=t("./normalize"),i=t("gl-mat4/create"),o=t("gl-mat4/clone"),a=t("gl-mat4/determinant"),s=t("gl-mat4/invert"),l=t("gl-mat4/transpose"),g={length:t("gl-vec3/length"),normalize:t("gl-vec3/normalize"),dot:t("gl-vec3/dot"),cross:t("gl-vec3/cross")},c=i(),u=i(),h=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],A=[0,0,0];function f(t,e,r,n,i){t[0]=e[0]*n+r[0]*i,t[1]=e[1]*n+r[1]*i,t[2]=e[2]*n+r[2]*i}e.exports=function(t,e,r,i,C,p){if(e||(e=[0,0,0]),r||(r=[0,0,0]),i||(i=[0,0,0]),C||(C=[0,0,0,1]),p||(p=[0,0,0,1]),!n(c,t))return!1;if(o(u,c),u[3]=0,u[7]=0,u[11]=0,u[15]=1,Math.abs(a(u)<1e-8))return!1;var I,v,m,y,b,x,_,w=c[3],k=c[7],T=c[11],M=c[12],E=c[13],O=c[14],S=c[15];if(0!==w||0!==k||0!==T){if(h[0]=w,h[1]=k,h[2]=T,h[3]=S,!s(u,u))return!1;l(u,u),I=C,m=u,y=(v=h)[0],b=v[1],x=v[2],_=v[3],I[0]=m[0]*y+m[4]*b+m[8]*x+m[12]*_,I[1]=m[1]*y+m[5]*b+m[9]*x+m[13]*_,I[2]=m[2]*y+m[6]*b+m[10]*x+m[14]*_,I[3]=m[3]*y+m[7]*b+m[11]*x+m[15]*_}else C[0]=C[1]=C[2]=0,C[3]=1;if(e[0]=M,e[1]=E,e[2]=O,function(t,e){t[0][0]=e[0],t[0][1]=e[1],t[0][2]=e[2],t[1][0]=e[4],t[1][1]=e[5],t[1][2]=e[6],t[2][0]=e[8],t[2][1]=e[9],t[2][2]=e[10]}(d,c),r[0]=g.length(d[0]),g.normalize(d[0],d[0]),i[0]=g.dot(d[0],d[1]),f(d[1],d[1],d[0],1,-i[0]),r[1]=g.length(d[1]),g.normalize(d[1],d[1]),i[0]/=r[1],i[1]=g.dot(d[0],d[2]),f(d[2],d[2],d[0],1,-i[1]),i[2]=g.dot(d[1],d[2]),f(d[2],d[2],d[1],1,-i[2]),r[2]=g.length(d[2]),g.normalize(d[2],d[2]),i[1]/=r[2],i[2]/=r[2],g.cross(A,d[1],d[2]),g.dot(d[0],A)<0)for(var R=0;R<3;R++)r[R]*=-1,d[R][0]*=-1,d[R][1]*=-1,d[R][2]*=-1;return p[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0)),p[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0)),p[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0)),p[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0)),d[2][1]>d[1][2]&&(p[0]=-p[0]),d[0][2]>d[2][0]&&(p[1]=-p[1]),d[1][0]>d[0][1]&&(p[2]=-p[2]),!0}},{"./normalize":247,"gl-mat4/clone":170,"gl-mat4/create":171,"gl-mat4/determinant":172,"gl-mat4/invert":176,"gl-mat4/transpose":187,"gl-vec3/cross":214,"gl-vec3/dot":215,"gl-vec3/length":216,"gl-vec3/normalize":218}],247:[function(t,e,r){e.exports=function(t,e){var r=e[15];if(0===r)return!1;for(var n=1/r,i=0;i<16;i++)t[i]=e[i]*n;return!0}},{}],248:[function(t,e,r){var n=t("gl-vec3/lerp"),i=t("mat4-recompose"),o=t("mat4-decompose"),a=t("gl-mat4/determinant"),s=t("quat-slerp"),l=u(),g=u(),c=u();function u(){return{translate:h(),scale:h(1),skew:h(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function h(t){return[t||0,t||0,t||0]}e.exports=function(t,e,r,u){if(0===a(e)||0===a(r))return!1;var h=o(e,l.translate,l.scale,l.skew,l.perspective,l.quaternion),d=o(r,g.translate,g.scale,g.skew,g.perspective,g.quaternion);return!(!h||!d||(n(c.translate,l.translate,g.translate,u),n(c.skew,l.skew,g.skew,u),n(c.scale,l.scale,g.scale,u),n(c.perspective,l.perspective,g.perspective,u),s(c.quaternion,l.quaternion,g.quaternion,u),i(t,c.translate,c.scale,c.skew,c.perspective,c.quaternion),0))}},{"gl-mat4/determinant":172,"gl-vec3/lerp":217,"mat4-decompose":246,"mat4-recompose":249,"quat-slerp":652}],249:[function(t,e,r){var n={identity:t("gl-mat4/identity"),translate:t("gl-mat4/translate"),multiply:t("gl-mat4/multiply"),create:t("gl-mat4/create"),scale:t("gl-mat4/scale"),fromRotationTranslation:t("gl-mat4/fromRotationTranslation")},i=(n.create(),n.create());e.exports=function(t,e,r,o,a,s){return n.identity(t),n.fromRotationTranslation(t,s,e),t[3]=a[0],t[7]=a[1],t[11]=a[2],t[15]=a[3],n.identity(i),0!==o[2]&&(i[9]=o[2],n.multiply(t,t,i)),0!==o[1]&&(i[9]=0,i[8]=o[1],n.multiply(t,t,i)),0!==o[0]&&(i[8]=0,i[4]=o[0],n.multiply(t,t,i)),n.scale(t,t,r),t}},{"gl-mat4/create":171,"gl-mat4/fromRotationTranslation":174,"gl-mat4/identity":175,"gl-mat4/multiply":178,"gl-mat4/scale":185,"gl-mat4/translate":186}],250:[function(t,e,r){"use strict";e.exports=Math.log2||function(t){return Math.log(t)*Math.LOG2E}},{}],251:[function(t,e,r){"use strict";var n=t("binary-search-bounds"),i=t("mat4-interpolate"),o=t("gl-mat4/invert"),a=t("gl-mat4/rotateX"),s=t("gl-mat4/rotateY"),l=t("gl-mat4/rotateZ"),g=t("gl-mat4/lookAt"),c=t("gl-mat4/translate"),u=(t("gl-mat4/scale"),t("gl-vec3/normalize")),h=[0,0,0];function d(t){this._components=t.slice(),this._time=[0],this.prevMatrix=t.slice(),this.nextMatrix=t.slice(),this.computedMatrix=t.slice(),this.computedInverse=t.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}e.exports=function(t){return new d((t=t||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var A=d.prototype;A.recalcMatrix=function(t){var e=this._time,r=n.le(e,t),a=this.computedMatrix;if(!(r<0)){var s=this._components;if(r===e.length-1)for(var l=16*r,g=0;g<16;++g)a[g]=s[l++];else{var c=e[r+1]-e[r],h=(l=16*r,this.prevMatrix),d=!0;for(g=0;g<16;++g)h[g]=s[l++];var A=this.nextMatrix;for(g=0;g<16;++g)A[g]=s[l++],d=d&&h[g]===A[g];if(c<1e-6||d)for(g=0;g<16;++g)a[g]=h[g];else i(a,h,A,(t-e[r])/c)}var f=this.computedUp;f[0]=a[1],f[1]=a[5],f[2]=a[9],u(f,f);var C=this.computedInverse;o(C,a);var p=this.computedEye,I=C[15];p[0]=C[12]/I,p[1]=C[13]/I,p[2]=C[14]/I;var v=this.computedCenter,m=Math.exp(this.computedRadius[0]);for(g=0;g<3;++g)v[g]=p[g]-a[2+4*g]*m}},A.idle=function(t){if(!(t<this.lastT())){for(var e=this._components,r=e.length-16,n=0;n<16;++n)e.push(e[r++]);this._time.push(t)}},A.flush=function(t){var e=n.gt(this._time,t)-2;e<0||(this._time.splice(0,e),this._components.splice(0,16*e))},A.lastT=function(){return this._time[this._time.length-1]},A.lookAt=function(t,e,r,n){this.recalcMatrix(t),e=e||this.computedEye,r=r||h,n=n||this.computedUp,this.setMatrix(t,g(this.computedMatrix,e,r,n));for(var i=0,o=0;o<3;++o)i+=Math.pow(r[o]-e[o],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},A.rotate=function(t,e,r,n){this.recalcMatrix(t);var i=this.computedInverse;e&&s(i,i,e),r&&a(i,i,r),n&&l(i,i,n),this.setMatrix(t,o(this.computedMatrix,i))};var f=[0,0,0];A.pan=function(t,e,r,n){f[0]=-(e||0),f[1]=-(r||0),f[2]=-(n||0),this.recalcMatrix(t);var i=this.computedInverse;c(i,i,f),this.setMatrix(t,o(i,i))},A.translate=function(t,e,r,n){f[0]=e||0,f[1]=r||0,f[2]=n||0,this.recalcMatrix(t);var i=this.computedMatrix;c(i,i,f),this.setMatrix(t,i)},A.setMatrix=function(t,e){if(!(t<this.lastT())){this._time.push(t);for(var r=0;r<16;++r)this._components.push(e[r])}},A.setDistance=function(t,e){this.computedRadius[0]=e},A.setDistanceLimits=function(t,e){var r=this._limits;r[0]=t,r[1]=e},A.getDistanceLimits=function(t){var e=this._limits;return t?(t[0]=e[0],t[1]=e[1],t):e}},{"binary-search-bounds":252,"gl-mat4/invert":176,"gl-mat4/lookAt":177,"gl-mat4/rotateX":182,"gl-mat4/rotateY":183,"gl-mat4/rotateZ":184,"gl-mat4/scale":185,"gl-mat4/translate":186,"gl-vec3/normalize":218,"mat4-interpolate":248}],252:[function(t,e,r){arguments[4][148][0].apply(r,arguments)},{dup:148}],253:[function(t,e,r){"use strict";e.exports=function(t){var e=t.length;if(e<3){for(var r=new Array(e),i=0;i<e;++i)r[i]=i;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:r}for(var o=new Array(e),i=0;i<e;++i)o[i]=i;o.sort(function(e,r){var n=t[e][0]-t[r][0];return n||t[e][1]-t[r][1]});for(var a=[o[0],o[1]],s=[o[0],o[1]],i=2;i<e;++i){for(var l=o[i],g=t[l],c=a.length;c>1&&n(t[a[c-2]],t[a[c-1]],g)<=0;)c-=1,a.pop();for(a.push(l),c=s.length;c>1&&n(t[s[c-2]],t[s[c-1]],g)>=0;)c-=1,s.pop();s.push(l)}for(var r=new Array(s.length+a.length-2),u=0,i=0,h=a.length;i<h;++i)r[u++]=a[i];for(var d=s.length-2;d>0;--d)r[u++]=s[d];return r};var n=t("robust-orientation")[3]},{"robust-orientation":669}],254:[function(t,e,r){"use strict";e.exports=function(t,e){e||(e=t,t=window);var r=0,i=0,o=0,a={shift:!1,alt:!1,control:!1,meta:!1},s=!1;function l(t){var e=!1;return"altKey"in t&&(e=e||t.altKey!==a.alt,a.alt=!!t.altKey),"shiftKey"in t&&(e=e||t.shiftKey!==a.shift,a.shift=!!t.shiftKey),"ctrlKey"in t&&(e=e||t.ctrlKey!==a.control,a.control=!!t.ctrlKey),"metaKey"in t&&(e=e||t.metaKey!==a.meta,a.meta=!!t.metaKey),e}function g(t,s){var g=n.x(s),c=n.y(s);"buttons"in s&&(t=0|s.buttons),(t!==r||g!==i||c!==o||l(s))&&(r=0|t,i=g||0,o=c||0,e&&e(r,i,o,a))}function c(t){g(0,t)}function u(){(r||i||o||a.shift||a.alt||a.meta||a.control)&&(i=o=0,r=0,a.shift=a.alt=a.control=a.meta=!1,e&&e(0,0,0,a))}function h(t){l(t)&&e&&e(r,i,o,a)}function d(t){0===n.buttons(t)?g(0,t):g(r,t)}function A(t){g(r|n.buttons(t),t)}function f(t){g(r&~n.buttons(t),t)}function C(){s||(s=!0,t.addEventListener("mousemove",d),t.addEventListener("mousedown",A),t.addEventListener("mouseup",f),t.addEventListener("mouseleave",c),t.addEventListener("mouseenter",c),t.addEventListener("mouseout",c),t.addEventListener("mouseover",c),t.addEventListener("blur",u),t.addEventListener("keyup",h),t.addEventListener("keydown",h),t.addEventListener("keypress",h),t!==window&&(window.addEventListener("blur",u),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}C();var p={element:t};return Object.defineProperties(p,{enabled:{get:function(){return s},set:function(e){e?C():s&&(s=!1,t.removeEventListener("mousemove",d),t.removeEventListener("mousedown",A),t.removeEventListener("mouseup",f),t.removeEventListener("mouseleave",c),t.removeEventListener("mouseenter",c),t.removeEventListener("mouseout",c),t.removeEventListener("mouseover",c),t.removeEventListener("blur",u),t.removeEventListener("keyup",h),t.removeEventListener("keydown",h),t.removeEventListener("keypress",h),t!==window&&(window.removeEventListener("blur",u),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return o},enumerable:!0},mods:{get:function(){return a},enumerable:!0}}),p};var n=t("mouse-event")},{"mouse-event":256}],255:[function(t,e,r){var n={left:0,top:0};e.exports=function(t,e,r){e=e||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var i=t.clientX||0,o=t.clientY||0,a=(s=e,s===window||s===document||s===document.body?n:s.getBoundingClientRect());var s;return r[0]=i-a.left,r[1]=o-a.top,r}},{}],256:[function(t,e,r){"use strict";function n(t){return t.target||t.srcElement||window}r.buttons=function(t){if("object"==typeof t){if("buttons"in t)return t.buttons;if("which"in t){if(2===(e=t.which))return 4;if(3===e)return 2;if(e>0)return 1<<e-1}else if("button"in t){var e;if(1===(e=t.button))return 4;if(2===e)return 2;if(e>=0)return 1<<e}}return 0},r.element=n,r.x=function(t){if("object"==typeof t){if("offsetX"in t)return t.offsetX;var e=n(t).getBoundingClientRect();return t.clientX-e.left}return 0},r.y=function(t){if("object"==typeof t){if("offsetY"in t)return t.offsetY;var e=n(t).getBoundingClientRect();return t.clientY-e.top}return 0}},{}],257:[function(t,e,r){"use strict";var n=t("to-px");e.exports=function(t,e,r){"function"==typeof t&&(r=!!e,e=t,t=window);var i=n("ex",t),o=function(t){r&&t.preventDefault();var n=t.deltaX||0,o=t.deltaY||0,a=t.deltaZ||0,s=t.deltaMode,l=1;switch(s){case 1:l=i;break;case 2:l=window.innerHeight}if(o*=l,a*=l,(n*=l)||o||a)return e(n,o,a,t)};return t.addEventListener("wheel",o),o}},{"to-px":695}],258:[function(t,e,r){"use strict";var n=t("typedarray-pool");function i(t){return"a"+t}function o(t){return"d"+t}function a(t,e){return"c"+t+"_"+e}function s(t){return"s"+t}function l(t,e){return"t"+t+"_"+e}function g(t){return"o"+t}function c(t){return"x"+t}function u(t){return"p"+t}function h(t,e){return"d"+t+"_"+e}function d(t){return"i"+t}function A(t,e){return"u"+t+"_"+e}function f(t){return"b"+t}function C(t){return"y"+t}function p(t){return"e"+t}function I(t){return"v"+t}e.exports=function(t){function e(t){throw new Error("ndarray-extract-contour: "+t)}"object"!=typeof t&&e("Must specify arguments");var r=t.order;Array.isArray(r)||e("Must specify order");var k=t.arrayArguments||1;k<1&&e("Must have at least one array argument");var T=t.scalarArguments||0;T<0&&e("Scalar arg count must be > 0");"function"!=typeof t.vertex&&e("Must specify vertex creation function");"function"!=typeof t.cell&&e("Must specify cell creation function");"function"!=typeof t.phase&&e("Must specify phase function");for(var M=t.getters||[],E=new Array(k),O=0;O<k;++O)M.indexOf(O)>=0?E[O]=!0:E[O]=!1;return function(t,e,r,k,T,M){var E=M.length,O=T.length;if(O<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var S="extractContour"+T.join("_"),R=[],D=[],L=[],P=0;P<E;++P)L.push(i(P));for(var P=0;P<k;++P)L.push(c(P));for(var P=0;P<O;++P)D.push(s(P)+"="+i(0)+".shape["+P+"]|0");for(var P=0;P<E;++P){D.push(o(P)+"="+i(P)+".data",g(P)+"="+i(P)+".offset|0");for(var N=0;N<O;++N)D.push(l(P,N)+"="+i(P)+".stride["+N+"]|0")}for(var P=0;P<E;++P){D.push(u(P)+"="+g(P)),D.push(a(P,0));for(var N=1;N<1<<O;++N){for(var z=[],F=0;F<O;++F)N&1<<F&&z.push("-"+l(P,F));D.push(h(P,N)+"=("+z.join("")+")|0"),D.push(a(P,N)+"=0")}}for(var P=0;P<E;++P)for(var N=0;N<O;++N){var B=[l(P,T[N])];N>0&&B.push(l(P,T[N-1])+"*"+s(T[N-1])),D.push(A(P,T[N])+"=("+B.join("-")+")|0")}for(var P=0;P<O;++P)D.push(d(P)+"=0");D.push(y+"=0");for(var j=["2"],P=O-2;P>=0;--P)j.push(s(T[P]));D.push(b+"=("+j.join("*")+")|0",m+"=mallocUint32("+b+")",v+"=mallocUint32("+b+")",x+"=0"),D.push(f(0)+"=0");for(var N=1;N<1<<O;++N){for(var V=[],G=[],F=0;F<O;++F)N&1<<F&&(0===G.length?V.push("1"):V.unshift(G.join("*"))),G.push(s(T[F]));var U="";V[0].indexOf(s(T[O-2]))<0&&(U="-");var Z=w(O,N,T);D.push(p(Z)+"=(-"+V.join("-")+")|0",C(Z)+"=("+U+V.join("-")+")|0",f(Z)+"=0")}function H(t,e){R.push("for(",d(T[t]),"=",e,";",d(T[t]),"<",s(T[t]),";","++",d(T[t]),"){")}function W(t){for(var e=0;e<E;++e)R.push(u(e),"+=",A(e,T[t]),";");R.push("}")}function Y(){for(var t=1;t<1<<O;++t)R.push(_,"=",p(t),";",p(t),"=",C(t),";",C(t),"=",_,";")}D.push(I(0)+"=0",_+"=0"),function t(e,r){if(e<0)return void function(t){for(var e=0;e<E;++e)M[e]?R.push(a(e,0),"=",o(e),".get(",u(e),");"):R.push(a(e,0),"=",o(e),"[",u(e),"];");for(var r=[],e=0;e<E;++e)r.push(a(e,0));for(var e=0;e<k;++e)r.push(c(e));R.push(f(0),"=",m,"[",x,"]=phase(",r.join(),");");for(var n=1;n<1<<O;++n)R.push(f(n),"=",m,"[",x,"+",p(n),"];");for(var i=[],n=1;n<1<<O;++n)i.push("("+f(0)+"!=="+f(n)+")");R.push("if(",i.join("||"),"){");for(var s=[],e=0;e<O;++e)s.push(d(e));for(var e=0;e<E;++e){s.push(a(e,0));for(var n=1;n<1<<O;++n)M[e]?R.push(a(e,n),"=",o(e),".get(",u(e),"+",h(e,n),");"):R.push(a(e,n),"=",o(e),"[",u(e),"+",h(e,n),"];"),s.push(a(e,n))}for(var e=0;e<1<<O;++e)s.push(f(e));for(var e=0;e<k;++e)s.push(c(e));R.push("vertex(",s.join(),");",I(0),"=",v,"[",x,"]=",y,"++;");for(var l=(1<<O)-1,g=f(l),n=0;n<O;++n)if(0==(t&~(1<<n))){for(var A=l^1<<n,C=f(A),b=[],_=A;_>0;_=_-1&A)b.push(v+"["+x+"+"+p(_)+"]");b.push(I(0));for(var _=0;_<E;++_)1&n?b.push(a(_,l),a(_,A)):b.push(a(_,A),a(_,l));1&n?b.push(g,C):b.push(C,g);for(var _=0;_<k;++_)b.push(c(_));R.push("if(",g,"!==",C,"){","face(",b.join(),")}")}R.push("}",x,"+=1;")}(r);!function(t){for(var e=t-1;e>=0;--e)H(e,0);for(var r=[],e=0;e<E;++e)M[e]?r.push(o(e)+".get("+u(e)+")"):r.push(o(e)+"["+u(e)+"]");for(var e=0;e<k;++e)r.push(c(e));R.push(m,"[",x,"++]=phase(",r.join(),");");for(var e=0;e<t;++e)W(e);for(var n=0;n<E;++n)R.push(u(n),"+=",A(n,T[t]),";")}(e);R.push("if(",s(T[e]),">0){",d(T[e]),"=1;");t(e-1,r|1<<T[e]);for(var n=0;n<E;++n)R.push(u(n),"+=",A(n,T[e]),";");e===O-1&&(R.push(x,"=0;"),Y());H(e,2);t(e-1,r);e===O-1&&(R.push("if(",d(T[O-1]),"&1){",x,"=0;}"),Y());W(e);R.push("}")}(O-1,0),R.push("freeUint32(",v,");freeUint32(",m,");");var X=["'use strict';","function ",S,"(",L.join(),"){","var ",D.join(),";",R.join(""),"}","return ",S].join("");return new Function("vertex","face","phase","mallocUint32","freeUint32",X)(t,e,r,n.mallocUint32,n.freeUint32)}(t.vertex,t.cell,t.phase,T,r,E)};var v="V",m="P",y="N",b="Q",x="X",_="T";function w(t,e,r){for(var n=0,i=0;i<t;++i)e&1<<i&&(n|=1<<r[i]);return n}},{"typedarray-pool":711}],259:[function(t,e,r){"use strict";var n=t("cwise-compiler"),i={body:"",args:[],thisVars:[],localVars:[]};function o(t){if(!t)return i;for(var e=0;e<t.args.length;++e){var r=t.args[e];t.args[e]=0===e?{name:r,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function a(t){for(var e=[],r=0;r<t.args.length;++r)e.push("a"+r);return new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""))(function(t){return n({args:t.args,pre:o(t.pre),body:o(t.body),post:o(t.proc),funcName:t.funcName})}(t))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in s){var e=s[t];r[t]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),r[t+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a"+e+"=b"},rvalue:!0,funcName:t+"eq"}),r[t+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),r[t+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a"+e+"=s"},rvalue:!0,funcName:t+"seq"})}}();var l={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in l){var e=l[t];r[t]=a({args:["array","array"],body:{args:["a","b"],body:"a="+e+"b"},funcName:t}),r[t+"eq"]=a({args:["array"],body:{args:["a"],body:"a="+e+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var g={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in g){var e=g[t];r[t]=a({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),r[t+"s"]=a({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),r[t+"eq"]=a({args:["array","array"],body:{args:["a","b"],body:"a=a"+e+"b"},rvalue:!0,count:2,funcName:t+"eq"}),r[t+"seq"]=a({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+e+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<c.length;++t){var e=c[t];r[e]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:e}),r[e+"eq"]=a({args:["array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"})}}();var u=["max","min","atan2","pow"];!function(){for(var t=0;t<u.length;++t){var e=u[t];r[e]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e}),r[e+"s"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e+"s"}),r[e+"eq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"}),r[e+"seq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"seq"})}}();var h=["atan2","pow"];!function(){for(var t=0;t<h.length;++t){var e=h[t];r[e+"op"]=a({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"op"}),r[e+"ops"]=a({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"ops"}),r[e+"opeq"]=a({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opeq"}),r[e+"opseq"]=a({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opseq"})}}(),r.any=n({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),r.all=n({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),r.sum=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),r.prod=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),r.norm2squared=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),r.norm2=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),r.norminf=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),r.norm1=n({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),r.sup=n({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.inf=n({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.argmin=n({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.argmax=n({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.random=a({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),r.assign=a({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),r.assigns=a({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),r.equals=n({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":68}],260:[function(t,e,r){"use strict";var n=t("typedarray-pool"),i=32;function o(t){switch(t){case"uint8":return[n.mallocUint8,n.freeUint8];case"uint16":return[n.mallocUint16,n.freeUint16];case"uint32":return[n.mallocUint32,n.freeUint32];case"int8":return[n.mallocInt8,n.freeInt8];case"int16":return[n.mallocInt16,n.freeInt16];case"int32":return[n.mallocInt32,n.freeInt32];case"float32":return[n.mallocFloat,n.freeFloat];case"float64":return[n.mallocDouble,n.freeDouble];default:return null}}function a(t){for(var e=[],r=0;r<t;++r)e.push("s"+r);for(r=0;r<t;++r)e.push("n"+r);for(r=1;r<t;++r)e.push("d"+r);for(r=1;r<t;++r)e.push("e"+r);for(r=1;r<t;++r)e.push("f"+r);return e}e.exports=function(t,e){var r=["'use strict'"],n=["ndarraySortWrapper",t.join("d"),e].join("");r.push(["function ",n,"(",["array"].join(","),"){"].join(""));for(var s=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],l=0;l<t.length;++l)s.push(["s",l,"=stride[",l,"]|0,n",l,"=shape[",l,"]|0"].join(""));var g=new Array(t.length),c=[];for(l=0;l<t.length;++l)0!==(d=t[l])&&(0===c.length?g[d]="1":g[d]=c.join("*"),c.push("n"+d));var u=-1,h=-1;for(l=0;l<t.length;++l){var d,A=t[l];0!==A&&(u>0?s.push(["d",A,"=s",A,"-d",u,"*n",u].join("")):s.push(["d",A,"=s",A].join("")),u=A),0!=(d=t.length-1-l)&&(h>0?s.push(["e",d,"=s",d,"-e",h,"*n",h,",f",d,"=",g[d],"-f",h,"*n",h].join("")):s.push(["e",d,"=s",d,",f",d,"=",g[d]].join("")),h=d)}r.push("var "+s.join(","));var f=["0","n0-1","data","offset"].concat(a(t.length));r.push(["if(n0<=",i,"){","insertionSort(",f.join(","),")}else{","quickSort(",f.join(","),")}"].join("")),r.push("}return "+n);var C=new Function("insertionSort","quickSort",r.join("\n")),p=function(t,e){var r=["'use strict'"],n=["ndarrayInsertionSort",t.join("d"),e].join(""),i=["left","right","data","offset"].concat(a(t.length)),s=o(e),l=["i,j,cptr,ptr=left*s0+offset"];if(t.length>1){for(var g=[],c=1;c<t.length;++c)l.push("i"+c),g.push("n"+c);s?l.push("scratch=malloc("+g.join("*")+")"):l.push("scratch=new Array("+g.join("*")+")"),l.push("dptr","sptr","a","b")}else l.push("scratch");function u(t){return"generic"===e?["data.get(",t,")"].join(""):["data[",t,"]"].join("")}function h(t,r){return"generic"===e?["data.set(",t,",",r,")"].join(""):["data[",t,"]=",r].join("")}if(r.push(["function ",n,"(",i.join(","),"){var ",l.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),t.length>1){for(r.push("dptr=0;sptr=ptr"),c=t.length-1;c>=0;--c)0!==(d=t[c])&&r.push(["for(i",d,"=0;i",d,"<n",d,";++i",d,"){"].join(""));for(r.push("scratch[dptr++]=",u("sptr")),c=0;c<t.length;++c)0!==(d=t[c])&&r.push("sptr+=d"+d,"}");for(r.push("__g:while(j--\x3eleft){","dptr=0","sptr=cptr-s0"),c=1;c<t.length;++c)1===c&&r.push("__l:"),r.push(["for(i",c,"=0;i",c,"<n",c,";++i",c,"){"].join(""));for(r.push(["a=",u("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join("")),c=t.length-1;c>=1;--c)r.push("sptr+=e"+c,"dptr+=f"+c,"}");for(r.push("dptr=cptr;sptr=cptr-s0"),c=t.length-1;c>=0;--c)0!==(d=t[c])&&r.push(["for(i",d,"=0;i",d,"<n",d,";++i",d,"){"].join(""));for(r.push(h("dptr",u("sptr"))),c=0;c<t.length;++c)0!==(d=t[c])&&r.push(["dptr+=d",d,";sptr+=d",d].join(""),"}");for(r.push("cptr-=s0\n}"),r.push("dptr=cptr;sptr=0"),c=t.length-1;c>=0;--c)0!==(d=t[c])&&r.push(["for(i",d,"=0;i",d,"<n",d,";++i",d,"){"].join(""));for(r.push(h("dptr","scratch[sptr++]")),c=0;c<t.length;++c){var d;0!==(d=t[c])&&r.push("dptr+=d"+d,"}")}}else r.push("scratch="+u("ptr"),"while((j--\x3eleft)&&("+u("cptr-s0")+">scratch)){",h("cptr",u("cptr-s0")),"cptr-=s0","}",h("cptr","scratch"));return r.push("}"),t.length>1&&s&&r.push("free(scratch)"),r.push("} return "+n),s?new Function("malloc","free",r.join("\n"))(s[0],s[1]):new Function(r.join("\n"))()}(t,e);return C(p,function(t,e,r){var n=["'use strict'"],s=["ndarrayQuickSort",t.join("d"),e].join(""),l=["left","right","data","offset"].concat(a(t.length)),g=o(e),c=0;n.push(["function ",s,"(",l.join(","),"){"].join(""));var u=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(t.length>1){for(var h=[],d=1;d<t.length;++d)h.push("n"+d),u.push("i"+d);for(d=0;d<8;++d)u.push("b_ptr"+d);u.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+h.join("*")),g?u.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):u.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else u.push("pivot1","pivot2");function A(t){return["(offset+",t,"*s0)"].join("")}function f(t){return"generic"===e?["data.get(",t,")"].join(""):["data[",t,"]"].join("")}function C(t,r){return"generic"===e?["data.set(",t,",",r,")"].join(""):["data[",t,"]=",r].join("")}function p(e,r,i){if(1===e.length)n.push("ptr0="+A(e[0]));else for(var o=0;o<e.length;++o)n.push(["b_ptr",o,"=s0*",e[o]].join(""));for(r&&n.push("pivot_ptr=0"),n.push("ptr_shift=offset"),o=t.length-1;o>=0;--o)0!==(a=t[o])&&n.push(["for(i",a,"=0;i",a,"<n",a,";++i",a,"){"].join(""));if(e.length>1)for(o=0;o<e.length;++o)n.push(["ptr",o,"=b_ptr",o,"+ptr_shift"].join(""));for(n.push(i),r&&n.push("++pivot_ptr"),o=0;o<t.length;++o){var a;0!==(a=t[o])&&(e.length>1?n.push("ptr_shift+=d"+a):n.push("ptr0+=d"+a),n.push("}"))}}function I(e,r,i,o){if(1===r.length)n.push("ptr0="+A(r[0]));else{for(var a=0;a<r.length;++a)n.push(["b_ptr",a,"=s0*",r[a]].join(""));n.push("ptr_shift=offset")}for(i&&n.push("pivot_ptr=0"),e&&n.push(e+":"),a=1;a<t.length;++a)n.push(["for(i",a,"=0;i",a,"<n",a,";++i",a,"){"].join(""));if(r.length>1)for(a=0;a<r.length;++a)n.push(["ptr",a,"=b_ptr",a,"+ptr_shift"].join(""));for(n.push(o),a=t.length-1;a>=1;--a)i&&n.push("pivot_ptr+=f"+a),r.length>1?n.push("ptr_shift+=e"+a):n.push("ptr0+=e"+a),n.push("}")}function v(){t.length>1&&g&&n.push("free(pivot1)","free(pivot2)")}function m(e,r){var i="el"+e,o="el"+r;if(t.length>1){var a="__l"+ ++c;I(a,[i,o],!1,["comp=",f("ptr0"),"-",f("ptr1"),"\n","if(comp>0){tmp0=",i,";",i,"=",o,";",o,"=tmp0;break ",a,"}\n","if(comp<0){break ",a,"}"].join(""))}else n.push(["if(",f(A(i)),">",f(A(o)),"){tmp0=",i,";",i,"=",o,";",o,"=tmp0}"].join(""))}function y(e,r){t.length>1?p([e,r],!1,C("ptr0",f("ptr1"))):n.push(C(A(e),f(A(r))))}function b(e,r,i){if(t.length>1){var o="__l"+ ++c;I(o,[r],!0,[e,"=",f("ptr0"),"-pivot",i,"[pivot_ptr]\n","if(",e,"!==0){break ",o,"}"].join(""))}else n.push([e,"=",f(A(r)),"-pivot",i].join(""))}function x(e,r){t.length>1?p([e,r],!1,["tmp=",f("ptr0"),"\n",C("ptr0",f("ptr1")),"\n",C("ptr1","tmp")].join("")):n.push(["ptr0=",A(e),"\n","ptr1=",A(r),"\n","tmp=",f("ptr0"),"\n",C("ptr0",f("ptr1")),"\n",C("ptr1","tmp")].join(""))}function _(e,r,i){t.length>1?(p([e,r,i],!1,["tmp=",f("ptr0"),"\n",C("ptr0",f("ptr1")),"\n",C("ptr1",f("ptr2")),"\n",C("ptr2","tmp")].join("")),n.push("++"+r,"--"+i)):n.push(["ptr0=",A(e),"\n","ptr1=",A(r),"\n","ptr2=",A(i),"\n","++",r,"\n","--",i,"\n","tmp=",f("ptr0"),"\n",C("ptr0",f("ptr1")),"\n",C("ptr1",f("ptr2")),"\n",C("ptr2","tmp")].join(""))}function w(t,e){x(t,e),n.push("--"+e)}function k(e,r,i){t.length>1?p([e,r],!0,[C("ptr0",f("ptr1")),"\n",C("ptr1",["pivot",i,"[pivot_ptr]"].join(""))].join("")):n.push(C(A(e),f(A(r))),C(A(r),"pivot"+i))}function T(e,r){n.push(["if((",r,"-",e,")<=",i,"){\n","insertionSort(",e,",",r,",data,offset,",a(t.length).join(","),")\n","}else{\n",s,"(",e,",",r,",data,offset,",a(t.length).join(","),")\n","}"].join(""))}function M(e,r,i){t.length>1?(n.push(["__l",++c,":while(true){"].join("")),p([e],!0,["if(",f("ptr0"),"!==pivot",r,"[pivot_ptr]){break __l",c,"}"].join("")),n.push(i,"}")):n.push(["while(",f(A(e)),"===pivot",r,"){",i,"}"].join(""))}return n.push("var "+u.join(",")),m(1,2),m(4,5),m(1,3),m(2,3),m(1,4),m(3,4),m(2,5),m(2,3),m(4,5),t.length>1?p(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",f("ptr1"),"\n","pivot2[pivot_ptr]=",f("ptr3"),"\n","pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\n","x=",f("ptr0"),"\n","y=",f("ptr2"),"\n","z=",f("ptr4"),"\n",C("ptr5","x"),"\n",C("ptr6","y"),"\n",C("ptr7","z")].join("")):n.push(["pivot1=",f(A("el2")),"\n","pivot2=",f(A("el4")),"\n","pivots_are_equal=pivot1===pivot2\n","x=",f(A("el1")),"\n","y=",f(A("el3")),"\n","z=",f(A("el5")),"\n",C(A("index1"),"x"),"\n",C(A("index3"),"y"),"\n",C(A("index5"),"z")].join("")),y("index2","left"),y("index4","right"),n.push("if(pivots_are_equal){"),n.push("for(k=less;k<=great;++k){"),b("comp","k",1),n.push("if(comp===0){continue}"),n.push("if(comp<0){"),n.push("if(k!==less){"),x("k","less"),n.push("}"),n.push("++less"),n.push("}else{"),n.push("while(true){"),b("comp","great",1),n.push("if(comp>0){"),n.push("great--"),n.push("}else if(comp<0){"),_("k","less","great"),n.push("break"),n.push("}else{"),w("k","great"),n.push("break"),n.push("}"),n.push("}"),n.push("}"),n.push("}"),n.push("}else{"),n.push("for(k=less;k<=great;++k){"),b("comp_pivot1","k",1),n.push("if(comp_pivot1<0){"),n.push("if(k!==less){"),x("k","less"),n.push("}"),n.push("++less"),n.push("}else{"),b("comp_pivot2","k",2),n.push("if(comp_pivot2>0){"),n.push("while(true){"),b("comp","great",2),n.push("if(comp>0){"),n.push("if(--great<k){break}"),n.push("continue"),n.push("}else{"),b("comp","great",1),n.push("if(comp<0){"),_("k","less","great"),n.push("}else{"),w("k","great"),n.push("}"),n.push("break"),n.push("}"),n.push("}"),n.push("}"),n.push("}"),n.push("}"),n.push("}"),k("left","(less-1)",1),k("right","(great+1)",2),T("left","(less-2)"),T("(great+2)","right"),n.push("if(pivots_are_equal){"),v(),n.push("return"),n.push("}"),n.push("if(less<index1&&great>index5){"),M("less",1,"++less"),M("great",2,"--great"),n.push("for(k=less;k<=great;++k){"),b("comp_pivot1","k",1),n.push("if(comp_pivot1===0){"),n.push("if(k!==less){"),x("k","less"),n.push("}"),n.push("++less"),n.push("}else{"),b("comp_pivot2","k",2),n.push("if(comp_pivot2===0){"),n.push("while(true){"),b("comp","great",2),n.push("if(comp===0){"),n.push("if(--great<k){break}"),n.push("continue"),n.push("}else{"),b("comp","great",1),n.push("if(comp<0){"),_("k","less","great"),n.push("}else{"),w("k","great"),n.push("}"),n.push("break"),n.push("}"),n.push("}"),n.push("}"),n.push("}"),n.push("}"),n.push("}"),v(),T("less","great"),n.push("}return "+s),t.length>1&&g?new Function("insertionSort","malloc","free",n.join("\n"))(r,g[0],g[1]):new Function("insertionSort",n.join("\n"))(r)}(t,e,p))}},{"typedarray-pool":711}],261:[function(t,e,r){"use strict";var n=t("./lib/compile_sort.js"),i={};e.exports=function(t){var e=t.order,r=t.dtype,o=[e,r].join(":"),a=i[o];return a||(i[o]=a=n(e,r)),a(t),t}},{"./lib/compile_sort.js":260}],262:[function(t,e,r){var n=t("iota-array"),i=t("is-buffer"),o="undefined"!=typeof Float64Array;function a(t,e){return t[0]-e[0]}function s(){var t,e=this.stride,r=new Array(e.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(e[t]),t];r.sort(a);var n=new Array(r.length);for(t=0;t<n.length;++t)n[t]=r[t][1];return n}function l(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var i="generic"===t;if(-1===e){var o="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return new Function(o)()}if(0===e){o="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";return new Function("TrivialArray",o)(g[t][0])}o=["'use strict'"];var a=n(e),l=a.map(function(t){return"i"+t}),c="this.offset+"+a.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),u=a.map(function(t){return"b"+t}).join(","),h=a.map(function(t){return"c"+t}).join(",");o.push("function "+r+"(a,"+u+","+h+",d){this.data=a","this.shape=["+u+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),o.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+a.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===e?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),e<4?(o.push("function "+r+"_order(){"),2===e?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+r+"_set("+l.join(",")+",v){"),i?o.push("return this.data.set("+c+",v)}"):o.push("return this.data["+c+"]=v}"),o.push("proto.get=function "+r+"_get("+l.join(",")+"){"),i?o.push("return this.data.get("+c+")}"):o.push("return this.data["+c+"]}"),o.push("proto.index=function "+r+"_index(",l.join(),"){return "+c+"}"),o.push("proto.hi=function "+r+"_hi("+l.join(",")+"){return new "+r+"(this.data,"+a.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+a.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var d=a.map(function(t){return"a"+t+"=this.shape["+t+"]"}),A=a.map(function(t){return"c"+t+"=this.stride["+t+"]"});o.push("proto.lo=function "+r+"_lo("+l.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+A.join(","));for(var f=0;f<e;++f)o.push("if(typeof i"+f+"==='number'&&i"+f+">=0){d=i"+f+"|0;b+=c"+f+"*d;a"+f+"-=d}");o.push("return new "+r+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"c"+t}).join(",")+",b)}"),o.push("proto.step=function "+r+"_step("+l.join(",")+"){var "+a.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+a.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(f=0;f<e;++f)o.push("if(typeof i"+f+"==='number'){d=i"+f+"|0;if(d<0){c+=b"+f+"*(a"+f+"-1);a"+f+"=ceil(-a"+f+"/d)}else{a"+f+"=ceil(a"+f+"/d)}b"+f+"*=d}");o.push("return new "+r+"(this.data,"+a.map(function(t){return"a"+t}).join(",")+","+a.map(function(t){return"b"+t}).join(",")+",c)}");var C=new Array(e),p=new Array(e);for(f=0;f<e;++f)C[f]="a[i"+f+"]",p[f]="b[i"+f+"]";o.push("proto.transpose=function "+r+"_transpose("+l+"){"+l.map(function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+C.join(",")+","+p.join(",")+",this.offset)}"),o.push("proto.pick=function "+r+"_pick("+l+"){var a=[],b=[],c=this.offset");for(f=0;f<e;++f)o.push("if(typeof i"+f+"==='number'&&i"+f+">=0){c=(c+this.stride["+f+"]*i"+f+")|0}else{a.push(this.shape["+f+"]);b.push(this.stride["+f+"])}");return o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+a.map(function(t){return"shape["+t+"]"}).join(",")+","+a.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",o.join("\n"))(g[t],s)}var g={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};e.exports=function(t,e,r,n){if(void 0===t)return(0,g.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var a=e.length;if(void 0===r){r=new Array(a);for(var s=a-1,c=1;s>=0;--s)r[s]=c,c*=e[s]}if(void 0===n)for(n=0,s=0;s<a;++s)r[s]<0&&(n-=(e[s]-1)*r[s]);for(var u=function(t){if(i(t))return"buffer";if(o)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}(t),h=g[u];h.length<=a+1;)h.push(l(u,h.length-1));return(0,h[a+1])(t,e,r,n)}},{"iota-array":236,"is-buffer":238}],263:[function(t,e,r){"use strict";var n=t("double-bits"),i=Math.pow(2,-1074),o=-1>>>0;e.exports=function(t,e){if(isNaN(t)||isNaN(e))return NaN;if(t===e)return t;if(0===t)return e<0?-i:i;var r=n.hi(t),a=n.lo(t);e>t==t>0?a===o?(r+=1,a=0):a+=1:0===a?(a=o,r-=1):a-=1;return n.pack(a,r)}},{"double-bits":77}],264:[function(t,e,r){var n=Math.PI,i=g(120);function o(t,e,r,n){return["C",t,e,r,n,r,n]}function a(t,e,r,n,i,o){return["C",t/3+2/3*r,e/3+2/3*n,i/3+2/3*r,o/3+2/3*n,i,o]}function s(t,e,r,o,a,g,c,u,h,d){if(d)x=d[0],_=d[1],y=d[2],b=d[3];else{var A=l(t,e,-a);t=A.x,e=A.y;var f=(t-(u=(A=l(u,h,-a)).x))/2,C=(e-(h=A.y))/2,p=f*f/(r*r)+C*C/(o*o);p>1&&(r*=p=Math.sqrt(p),o*=p);var I=r*r,v=o*o,m=(g==c?-1:1)*Math.sqrt(Math.abs((I*v-I*C*C-v*f*f)/(I*C*C+v*f*f)));m==1/0&&(m=1);var y=m*r*C/o+(t+u)/2,b=m*-o*f/r+(e+h)/2,x=Math.asin(((e-b)/o).toFixed(9)),_=Math.asin(((h-b)/o).toFixed(9));x=t<y?n-x:x,_=u<y?n-_:_,x<0&&(x=2*n+x),_<0&&(_=2*n+_),c&&x>_&&(x-=2*n),!c&&_>x&&(_-=2*n)}if(Math.abs(_-x)>i){var w=_,k=u,T=h;_=x+i*(c&&_>x?1:-1);var M=s(u=y+r*Math.cos(_),h=b+o*Math.sin(_),r,o,a,0,c,k,T,[_,w,y,b])}var E=Math.tan((_-x)/4),O=4/3*r*E,S=4/3*o*E,R=[2*t-(t+O*Math.sin(x)),2*e-(e-S*Math.cos(x)),u+O*Math.sin(_),h-S*Math.cos(_),u,h];if(d)return R;M&&(R=R.concat(M));for(var D=0;D<R.length;){var L=l(R[D],R[D+1],a);R[D++]=L.x,R[D++]=L.y}return R}function l(t,e,r){return{x:t*Math.cos(r)-e*Math.sin(r),y:t*Math.sin(r)+e*Math.cos(r)}}function g(t){return t*(n/180)}e.exports=function(t){for(var e,r=[],n=0,i=0,l=0,c=0,u=null,h=null,d=0,A=0,f=0,C=t.length;f<C;f++){var p=t[f],I=p[0];switch(I){case"M":l=p[1],c=p[2];break;case"A":(p=s(d,A,p[1],p[2],g(p[3]),p[4],p[5],p[6],p[7])).unshift("C"),p.length>7&&(r.push(p.splice(0,7)),p.unshift("C"));break;case"S":var v=d,m=A;"C"!=e&&"S"!=e||(v+=v-n,m+=m-i),p=["C",v,m,p[1],p[2],p[3],p[4]];break;case"T":"Q"==e||"T"==e?(u=2*d-u,h=2*A-h):(u=d,h=A),p=a(d,A,u,h,p[1],p[2]);break;case"Q":u=p[1],h=p[2],p=a(d,A,p[1],p[2],p[3],p[4]);break;case"L":p=o(d,A,p[1],p[2]);break;case"H":p=o(d,A,p[1],A);break;case"V":p=o(d,A,d,p[1]);break;case"Z":p=o(d,A,l,c)}e=I,d=p[p.length-2],A=p[p.length-1],p.length>4?(n=p[p.length-4],i=p[p.length-3]):(n=d,i=A),r.push(p)}return r}},{}],265:[function(t,e,r){r.vertexNormals=function(t,e,r){for(var n=e.length,i=new Array(n),o=void 0===r?1e-6:r,a=0;a<n;++a)i[a]=[0,0,0];for(a=0;a<t.length;++a)for(var s=t[a],l=0,g=s[s.length-1],c=s[0],u=0;u<s.length;++u){l=g,g=c,c=s[(u+1)%s.length];for(var h=e[l],d=e[g],A=e[c],f=new Array(3),C=0,p=new Array(3),I=0,v=0;v<3;++v)f[v]=h[v]-d[v],C+=f[v]*f[v],p[v]=A[v]-d[v],I+=p[v]*p[v];if(C*I>o){var m=i[g],y=1/Math.sqrt(C*I);for(v=0;v<3;++v){var b=(v+1)%3,x=(v+2)%3;m[v]+=y*(p[b]*f[x]-p[x]*f[b])}}}for(a=0;a<n;++a){m=i[a];var _=0;for(v=0;v<3;++v)_+=m[v]*m[v];if(_>o)for(y=1/Math.sqrt(_),v=0;v<3;++v)m[v]*=y;else for(v=0;v<3;++v)m[v]=0}return i},r.faceNormals=function(t,e,r){for(var n=t.length,i=new Array(n),o=void 0===r?1e-6:r,a=0;a<n;++a){for(var s=t[a],l=new Array(3),g=0;g<3;++g)l[g]=e[s[g]];var c=new Array(3),u=new Array(3);for(g=0;g<3;++g)c[g]=l[1][g]-l[0][g],u[g]=l[2][g]-l[0][g];var h=new Array(3),d=0;for(g=0;g<3;++g){var A=(g+1)%3,f=(g+2)%3;h[g]=c[A]*u[f]-c[f]*u[A],d+=h[g]*h[g]}d=d>o?1/Math.sqrt(d):0;for(g=0;g<3;++g)h[g]*=d;i[a]=h}return i}},{}],266:[function(t,e,r){"use strict";var n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,a,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),l=1;l<arguments.length;l++){for(var g in r=Object(arguments[l]))i.call(r,g)&&(s[g]=r[g]);if(n){a=n(r);for(var c=0;c<a.length;c++)o.call(r,a[c])&&(s[a[c]]=r[a[c]])}}return s}},{}],267:[function(t,e,r){"use strict";e.exports=function(t,e,r,n,i,o,a,s,l,g){var c=e+o+g;if(u>0){var u=Math.sqrt(c+1);t[0]=.5*(a-l)/u,t[1]=.5*(s-n)/u,t[2]=.5*(r-o)/u,t[3]=.5*u}else{var h=Math.max(e,o,g),u=Math.sqrt(2*h-c+1);e>=h?(t[0]=.5*u,t[1]=.5*(i+r)/u,t[2]=.5*(s+n)/u,t[3]=.5*(a-l)/u):o>=h?(t[0]=.5*(r+i)/u,t[1]=.5*u,t[2]=.5*(l+a)/u,t[3]=.5*(s-n)/u):(t[0]=.5*(n+s)/u,t[1]=.5*(a+l)/u,t[2]=.5*u,t[3]=.5*(r-i)/u)}return t}},{}],268:[function(t,e,r){"use strict";e.exports=function(t){var e=(t=t||{}).center||[0,0,0],r=t.rotation||[0,0,0,1],n=t.radius||1;e=[].slice.call(e,0,3),c(r=[].slice.call(r,0,4),r);var i=new u(r,e,Math.log(n));i.setDistanceLimits(t.zoomMin,t.zoomMax),("eye"in t||"up"in t)&&i.lookAt(0,t.eye,t.center,t.up);return i};var n=t("filtered-vector"),i=t("gl-mat4/lookAt"),o=t("gl-mat4/fromQuat"),a=t("gl-mat4/invert"),s=t("./lib/quatFromFrame");function l(t,e,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2))}function g(t,e,r,n){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2)+Math.pow(n,2))}function c(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=g(r,n,i,o);a>1e-6?(t[0]=r/a,t[1]=n/a,t[2]=i/a,t[3]=o/a):(t[0]=t[1]=t[2]=0,t[3]=1)}function u(t,e,r){this.radius=n([r]),this.center=n(e),this.rotation=n(t),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var h=u.prototype;h.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},h.recalcMatrix=function(t){this.radius.curve(t),this.center.curve(t),this.rotation.curve(t);var e=this.computedRotation;c(e,e);var r=this.computedMatrix;o(r,e);var n=this.computedCenter,i=this.computedEye,a=this.computedUp,s=Math.exp(this.computedRadius[0]);i[0]=n[0]+s*r[2],i[1]=n[1]+s*r[6],i[2]=n[2]+s*r[10],a[0]=r[1],a[1]=r[5],a[2]=r[9];for(var l=0;l<3;++l){for(var g=0,u=0;u<3;++u)g+=r[l+4*u]*i[u];r[12+l]=-g}},h.getMatrix=function(t,e){this.recalcMatrix(t);var r=this.computedMatrix;if(e){for(var n=0;n<16;++n)e[n]=r[n];return e}return r},h.idle=function(t){this.center.idle(t),this.radius.idle(t),this.rotation.idle(t)},h.flush=function(t){this.center.flush(t),this.radius.flush(t),this.rotation.flush(t)},h.pan=function(t,e,r,n){e=e||0,r=r||0,n=n||0,this.recalcMatrix(t);var i=this.computedMatrix,o=i[1],a=i[5],s=i[9],g=l(o,a,s);o/=g,a/=g,s/=g;var c=i[0],u=i[4],h=i[8],d=c*o+u*a+h*s,A=l(c-=o*d,u-=a*d,h-=s*d);c/=A,u/=A,h/=A;var f=i[2],C=i[6],p=i[10],I=f*o+C*a+p*s,v=f*c+C*u+p*h,m=l(f-=I*o+v*c,C-=I*a+v*u,p-=I*s+v*h);f/=m,C/=m,p/=m;var y=c*e+o*r,b=u*e+a*r,x=h*e+s*r;this.center.move(t,y,b,x);var _=Math.exp(this.computedRadius[0]);_=Math.max(1e-4,_+n),this.radius.set(t,Math.log(_))},h.rotate=function(t,e,r,n){this.recalcMatrix(t),e=e||0,r=r||0;var i=this.computedMatrix,o=i[0],a=i[4],s=i[8],c=i[1],u=i[5],h=i[9],d=i[2],A=i[6],f=i[10],C=e*o+r*c,p=e*a+r*u,I=e*s+r*h,v=-(A*I-f*p),m=-(f*C-d*I),y=-(d*p-A*C),b=Math.sqrt(Math.max(0,1-Math.pow(v,2)-Math.pow(m,2)-Math.pow(y,2))),x=g(v,m,y,b);x>1e-6?(v/=x,m/=x,y/=x,b/=x):(v=m=y=0,b=1);var _=this.computedRotation,w=_[0],k=_[1],T=_[2],M=_[3],E=w*b+M*v+k*y-T*m,O=k*b+M*m+T*v-w*y,S=T*b+M*y+w*m-k*v,R=M*b-w*v-k*m-T*y;if(n){v=d,m=A,y=f;var D=Math.sin(n)/l(v,m,y);v*=D,m*=D,y*=D,R=R*(b=Math.cos(e))-(E=E*b+R*v+O*y-S*m)*v-(O=O*b+R*m+S*v-E*y)*m-(S=S*b+R*y+E*m-O*v)*y}var L=g(E,O,S,R);L>1e-6?(E/=L,O/=L,S/=L,R/=L):(E=O=S=0,R=1),this.rotation.set(t,E,O,S,R)},h.lookAt=function(t,e,r,n){this.recalcMatrix(t),r=r||this.computedCenter,e=e||this.computedEye,n=n||this.computedUp;var o=this.computedMatrix;i(o,e,r,n);var a=this.computedRotation;s(a,o[0],o[1],o[2],o[4],o[5],o[6],o[8],o[9],o[10]),c(a,a),this.rotation.set(t,a[0],a[1],a[2],a[3]);for(var l=0,g=0;g<3;++g)l+=Math.pow(r[g]-e[g],2);this.radius.set(t,.5*Math.log(Math.max(l,1e-6))),this.center.set(t,r[0],r[1],r[2])},h.translate=function(t,e,r,n){this.center.move(t,e||0,r||0,n||0)},h.setMatrix=function(t,e){var r=this.computedRotation;s(r,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]),c(r,r),this.rotation.set(t,r[0],r[1],r[2],r[3]);var n=this.computedMatrix;a(n,e);var i=n[15];if(Math.abs(i)>1e-6){var o=n[12]/i,l=n[13]/i,g=n[14]/i;this.recalcMatrix(t);var u=Math.exp(this.computedRadius[0]);this.center.set(t,o-n[2]*u,l-n[6]*u,g-n[10]*u),this.radius.idle(t)}else this.center.idle(t),this.radius.idle(t)},h.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},h.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=e>0?Math.log(e):1/0,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},h.getDistanceLimits=function(t){var e=this.radius.bounds;return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},h.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},h.fromJSON=function(t){var e=this.lastT(),r=t.center;r&&this.center.set(e,r[0],r[1],r[2]);var n=t.rotation;n&&this.rotation.set(e,n[0],n[1],n[2],n[3]);var i=t.distance;i&&i>0&&this.radius.set(e,Math.log(i)),this.setDistanceLimits(t.zoomMin,t.zoomMax)}},{"./lib/quatFromFrame":267,"filtered-vector":147,"gl-mat4/fromQuat":173,"gl-mat4/invert":176,"gl-mat4/lookAt":177}],269:[function(t,e,r){"use strict";var n=t("repeat-string");e.exports=function(t,e,r){return n(r=void 0!==r?r+"":" ",e)+t}},{"repeat-string":662}],270:[function(t,e,r){"use strict";var n=t("pick-by-alias");e.exports=function(t){var e;arguments.length>1&&(t=arguments);"string"==typeof t?t=t.split(/\s/).map(parseFloat):"number"==typeof t&&(t=[t]);t.length&&"number"==typeof t[0]?e=1===t.length?{width:t[0],height:t[0],x:0,y:0}:2===t.length?{width:t[0],height:t[1],x:0,y:0}:{x:t[0],y:t[1],width:t[2]-t[0]||0,height:t[3]-t[1]||0}:t&&(t=n(t,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),e={x:t.left||0,y:t.top||0},null==t.width?t.right?e.width=t.right-e.x:e.width=0:e.width=t.width,null==t.height?t.bottom?e.height=t.bottom-e.y:e.height=0:e.height=t.height);return e}},{"pick-by-alias":276}],271:[function(t,e,r){e.exports=function(t){var e=[];return t.replace(i,function(t,r,i){var a=r.toLowerCase();for(i=function(t){var e=t.match(o);return e?e.map(Number):[]}(i),"m"==a&&i.length>2&&(e.push([r].concat(i.splice(0,2))),a="l",r="m"==r?"l":"L");;){if(i.length==n[a])return i.unshift(r),e.push(i);if(i.length<n[a])throw new Error("malformed path data");e.push([r].concat(i.splice(0,n[a])))}}),e};var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var o=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],272:[function(t,e,r){e.exports=function(t,e){e||(e=[0,""]),t=String(t);var r=parseFloat(t,10);return e[0]=r,e[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},{}],273:[function(t,e,r){(function(t){(function(){var r,n,i,o,a,s;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:void 0!==t&&null!==t&&t.hrtime?(e.exports=function(){return(r()-a)/1e6},n=t.hrtime,o=(r=function(){var t;return 1e9*(t=n())[0]+t[1]})(),s=1e9*t.uptime(),a=o-s):Date.now?(e.exports=function(){return Date.now()-i},i=Date.now()):(e.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,t("_process"))},{_process:651}],274:[function(t,e,r){"use strict";e.exports=function(t){var e=t.length;if(e<n){for(var r=1,o=0;o<e;++o)for(var a=0;a<o;++a)if(t[o]<t[a])r=-r;else if(t[o]===t[a])return 0;return r}for(var s=i.mallocUint8(e),o=0;o<e;++o)s[o]=0;for(var r=1,o=0;o<e;++o)if(!s[o]){var l=1;s[o]=1;for(var a=t[o];a!==o;a=t[a]){if(s[a])return i.freeUint8(s),0;l+=1,s[a]=1}1&l||(r=-r)}return i.freeUint8(s),r};var n=32,i=t("typedarray-pool")},{"typedarray-pool":711}],275:[function(t,e,r){"use strict";var n=t("typedarray-pool"),i=t("invert-permutation");r.rank=function(t){var e=t.length;switch(e){case 0:case 1:return 0;case 2:return t[1]}var r,o,a,s=n.mallocUint32(e),l=n.mallocUint32(e),g=0;for(i(t,l),a=0;a<e;++a)s[a]=t[a];for(a=e-1;a>0;--a)o=l[a],r=s[a],s[a]=s[o],s[o]=r,l[a]=l[r],l[r]=o,g=(g+r)*a;return n.freeUint32(l),n.freeUint32(s),g},r.unrank=function(t,e,r){switch(t){case 0:return r||[];case 1:return r?(r[0]=0,r):[0];case 2:return r?(e?(r[0]=0,r[1]=1):(r[0]=1,r[1]=0),r):e?[0,1]:[1,0]}var n,i,o,a=1;for((r=r||new Array(t))[0]=0,o=1;o<t;++o)r[o]=o,a=a*o|0;for(o=t-1;o>0;--o)e=e-(n=e/a|0)*a|0,a=a/o|0,i=0|r[o],r[o]=0|r[n],r[n]=0|i;return r}},{"invert-permutation":235,"typedarray-pool":711}],276:[function(t,e,r){"use strict";e.exports=function(t,e,r){var n,o,a={};if("string"==typeof e&&(e=i(e)),Array.isArray(e)){var s={};for(o=0;o<e.length;o++)s[e[o]]=!0;e=s}for(n in e)e[n]=i(e[n]);var l={};for(n in e){var g=e[n];if(Array.isArray(g))for(o=0;o<g.length;o++){var c=g[o];if(r&&(l[c]=!0),c in t){if(a[n]=t[c],r)for(var u=o;u<g.length;u++)l[g[u]]=!0;break}}else n in t&&(e[n]&&(a[n]=t[n]),r&&(l[n]=!0))}if(r)for(n in t)l[n]||(a[n]=t[n]);return a};var n={};function i(t){return n[t]?n[t]:("string"==typeof t&&(t=n[t]=t.split(/\s*,\s*|\s+/)),t)}},{}],277:[function(t,e,r){"use strict";e.exports=function(t,e){for(var r=0|e.length,i=t.length,o=[new Array(r),new Array(r)],a=0;a<r;++a)o[0][a]=[],o[1][a]=[];for(var a=0;a<i;++a){var s=t[a];o[0][s[0]].push(s),o[1][s[1]].push(s)}for(var l=[],a=0;a<r;++a)o[0][a].length+o[1][a].length===0&&l.push([a]);function g(t,e){var r=o[e][t[e]];r.splice(r.indexOf(t),1)}function c(t,r,i){for(var a,s,l,c=0;c<2;++c)if(o[c][r].length>0){a=o[c][r][0],l=c;break}s=a[1^l];for(var u=0;u<2;++u)for(var h=o[u][r],d=0;d<h.length;++d){var A=h[d],f=A[1^u],C=n(e[t],e[r],e[s],e[f]);C>0&&(a=A,s=f,l=u)}return i?s:(a&&g(a,l),s)}function u(t,r){var i=o[r][t][0],a=[t];g(i,r);for(var s=i[1^r];;){for(;s!==t;)a.push(s),s=c(a[a.length-2],s,!1);if(o[0][t].length+o[1][t].length===0)break;var l=a[a.length-1],u=t,h=a[1],d=c(l,u,!0);if(n(e[l],e[u],e[h],e[d])<0)break;a.push(t),s=c(l,u)}return a}function h(t,e){return e[1]===e[e.length-1]}for(var a=0;a<r;++a)for(var d=0;d<2;++d){for(var A=[];o[d][a].length>0;){o[0][a].length;var f=u(a,d);h(A,f)?A.push.apply(A,f):(A.length>0&&l.push(A),A=f)}A.length>0&&l.push(A)}return l};var n=t("compare-angle")},{"compare-angle":62}],278:[function(t,e,r){"use strict";e.exports=function(t,e){for(var r=n(t,e.length),i=new Array(e.length),o=new Array(e.length),a=[],s=0;s<e.length;++s){var l=r[s].length;o[s]=l,i[s]=!0,l<=1&&a.push(s)}for(;a.length>0;){var g=a.pop();i[g]=!1;for(var c=r[g],s=0;s<c.length;++s){var u=c[s];0==--o[u]&&a.push(u)}}for(var h=new Array(e.length),d=[],s=0;s<e.length;++s)if(i[s]){var g=d.length;h[s]=g,d.push(e[s])}else h[s]=-1;for(var A=[],s=0;s<t.length;++s){var f=t[s];i[f[0]]&&i[f[1]]&&A.push([h[f[0]],h[f[1]]])}return[A,d]};var n=t("edges-to-adjacency-list")},{"edges-to-adjacency-list":82}],279:[function(t,e,r){"use strict";e.exports=function(t,e){var r=g(t,e);t=r[0];for(var u=(e=r[1]).length,h=(t.length,n(t,e.length)),d=0;d<u;++d)if(h[d].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var A=i(t,e);for(var f=(A=A.filter(function(t){for(var r=t.length,n=[0],i=0;i<r;++i){var o=e[t[i]],l=e[t[(i+1)%r]],g=a(-o[0],o[1]),c=a(-o[0],l[1]),u=a(l[0],o[1]),h=a(l[0],l[1]);n=s(n,s(s(g,c),s(u,h)))}return n[n.length-1]>0})).length,C=new Array(f),p=new Array(f),d=0;d<f;++d){C[d]=d;var I=new Array(f),v=A[d].map(function(t){return e[t]}),m=o([v]),y=0;t:for(var b=0;b<f;++b)if(I[b]=0,d!==b){for(var x=A[b],_=x.length,w=0;w<_;++w){var k=m(e[x[w]]);if(0!==k){k<0&&(I[b]=1,y+=1);continue t}}I[b]=1,y+=1}p[d]=[y,d,I]}p.sort(function(t,e){return e[0]-t[0]});for(var d=0;d<f;++d)for(var I=p[d],T=I[1],M=I[2],b=0;b<f;++b)M[b]&&(C[b]=T);for(var E=function(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=[];return e}(f),d=0;d<f;++d)E[d].push(C[d]),E[C[d]].push(d);for(var O={},S=c(u,!1),d=0;d<f;++d)for(var x=A[d],_=x.length,b=0;b<_;++b){var R=x[b],D=x[(b+1)%_],L=Math.min(R,D)+":"+Math.max(R,D);if(L in O){var P=O[L];E[P].push(d),E[d].push(P),S[R]=S[D]=!0}else O[L]=d}function N(t){for(var e=t.length,r=0;r<e;++r)if(!S[t[r]])return!1;return!0}for(var z=[],F=c(f,-1),d=0;d<f;++d)C[d]!==d||N(A[d])?F[d]=-1:(z.push(d),F[d]=0);var r=[];for(;z.length>0;){var B=z.pop(),j=E[B];l(j,function(t,e){return t-e});var V,G=j.length,U=F[B];if(0===U){var x=A[B];V=[x]}for(var d=0;d<G;++d){var Z=j[d];if(!(F[Z]>=0)&&(F[Z]=1^U,z.push(Z),0===U)){var x=A[Z];N(x)||(x.reverse(),V.push(x))}}0===U&&r.push(V)}return r};var n=t("edges-to-adjacency-list"),i=t("planar-dual"),o=t("point-in-big-polygon"),a=t("two-product"),s=t("robust-sum"),l=t("uniq"),g=t("./lib/trim-leaves");function c(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=e;return r}},{"./lib/trim-leaves":278,"edges-to-adjacency-list":82,"planar-dual":277,"point-in-big-polygon":641,"robust-sum":674,"two-product":698,uniq:713}],280:[function(t,e,r){"use strict";var n=t("../src/lib"),i={"X,X div":"direction:ltr;font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color 0.3s ease 0s;-moz-transition:background-color 0.3s ease 0s;-ms-transition:background-color 0.3s ease 0s;-o-transition:background-color 0.3s ease 0s;transition:background-color 0.3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var o in i){var a=o.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");n.addStyleRule(a,i[o])}},{"../src/lib":426}],281:[function(t,e,r){"use strict";e.exports=t("../src/traces/bar")},{"../src/traces/bar":542}],282:[function(t,e,r){"use strict";e.exports=t("../src/core")},{"../src/core":406}],283:[function(t,e,r){"use strict";e.exports=t("../src/traces/heatmap")},{"../src/traces/heatmap":559}],284:[function(t,e,r){"use strict";e.exports=t("../src/traces/parcoords")},{"../src/traces/parcoords":579}],285:[function(t,e,r){"use strict";e.exports=t("../src/traces/scatter")},{"../src/traces/scatter":599}],286:[function(t,e,r){"use strict";e.exports=t("../src/traces/scatter3d")},{"../src/traces/scatter3d":619}],287:[function(t,e,r){"use strict";e.exports=t("../src/traces/splom")},{"../src/traces/splom":632}],288:[function(t,e,r){"use strict";e.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],289:[function(t,e,r){"use strict";var n=t("./arrow_paths"),i=t("../../plots/font_attributes"),o=t("../../plots/cartesian/constants"),a=t("../../plot_api/plot_template").templatedArray;e.exports=a("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:i({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:n.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:n.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",o.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",o.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",o.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:i({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../plot_api/plot_template":463,"../../plots/cartesian/constants":479,"../../plots/font_attributes":499,"./arrow_paths":288}],290:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../plots/cartesian/axes"),o=t("./draw").draw;function a(t){var e=t._fullLayout;n.filterVisible(e.annotations).forEach(function(e){var r=i.getFromId(t,e.xref),n=i.getFromId(t,e.yref);e._extremes={},r&&s(e,r),n&&s(e,n)})}function s(t,e){var r,n=e._id,o=n.charAt(0),a=t[o],s=t["a"+o],l=t[o+"ref"],g=t["a"+o+"ref"],c=t["_"+o+"padplus"],u=t["_"+o+"padminus"],h={x:1,y:-1}[o]*t[o+"shift"],d=3*t.arrowsize*t.arrowwidth||0,A=d+h,f=d-h,C=3*t.startarrowsize*t.arrowwidth||0,p=C+h,I=C-h;if(g===l){var v=i.findExtremes(e,[e.r2c(a)],{ppadplus:A,ppadminus:f}),m=i.findExtremes(e,[e.r2c(s)],{ppadplus:Math.max(c,p),ppadminus:Math.max(u,I)});r={min:[v.min[0],m.min[0]],max:[v.max[0],m.max[0]]}}else p=s?p+s:p,I=s?I-s:I,r=i.findExtremes(e,[e.r2c(a)],{ppadplus:Math.max(c,A,p),ppadminus:Math.max(u,f,I)});t._extremes[n]=r}e.exports=function(t){var e=t._fullLayout;if(n.filterVisible(e.annotations).length&&t._fullData.length)return n.syncOrAsync([o,a],t)}},{"../../lib":426,"../../plots/cartesian/axes":473,"./draw":295}],291:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../registry"),o=t("../../plot_api/plot_template").arrayEditor;function a(t,e){var r,n,i,o,a,l,g,c=t._fullLayout.annotations,u=[],h=[],d=[],A=(e||[]).length;for(r=0;r<c.length;r++)if(o=(i=c[r]).clicktoshow){for(n=0;n<A;n++)if(l=(a=e[n]).xaxis,g=a.yaxis,l._id===i.xref&&g._id===i.yref&&l.d2r(a.x)===s(i._xclick,l)&&g.d2r(a.y)===s(i._yclick,g)){(i.visible?"onout"===o?h:d:u).push(r);break}n===A&&i.visible&&"onout"===o&&h.push(r)}return{on:u,off:h,explicitOff:d}}function s(t,e){return"log"===e.type?e.l2r(t):e.d2r(t)}e.exports={hasClickToShow:function(t,e){var r=a(t,e);return r.on.length>0||r.explicitOff.length>0},onClick:function(t,e){var r,s,l=a(t,e),g=l.on,c=l.off.concat(l.explicitOff),u={},h=t._fullLayout.annotations;if(!g.length&&!c.length)return;for(r=0;r<g.length;r++)(s=o(t.layout,"annotations",h[g[r]])).modifyItem("visible",!0),n.extendFlat(u,s.getUpdateObj());for(r=0;r<c.length;r++)(s=o(t.layout,"annotations",h[c[r]])).modifyItem("visible",!1),n.extendFlat(u,s.getUpdateObj());return i.call("update",t,{},u)}}},{"../../lib":426,"../../plot_api/plot_template":463,"../../registry":524}],292:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../color");e.exports=function(t,e,r,o){o("opacity");var a=o("bgcolor"),s=o("bordercolor"),l=i.opacity(s);o("borderpad");var g=o("borderwidth"),c=o("showarrow");if(o("text",c?" ":r._dfltTitle.annotation),o("textangle"),n.coerceFont(o,"font",r.font),o("width"),o("align"),o("height")&&o("valign"),c){var u,h,d=o("arrowside");-1!==d.indexOf("end")&&(u=o("arrowhead"),h=o("arrowsize")),-1!==d.indexOf("start")&&(o("startarrowhead",u),o("startarrowsize",h)),o("arrowcolor",l?e.bordercolor:i.defaultLine),o("arrowwidth",2*(l&&g||1)),o("standoff"),o("startstandoff")}var A=o("hovertext"),f=r.hoverlabel||{};if(A){var C=o("hoverlabel.bgcolor",f.bgcolor||(i.opacity(a)?i.rgb(a):i.defaultLine)),p=o("hoverlabel.bordercolor",f.bordercolor||i.contrast(C));n.coerceFont(o,"hoverlabel.font",{family:f.font.family,size:f.font.size,color:f.font.color||p})}o("captureevents",!!A)}},{"../../lib":426,"../color":304}],293:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../../lib/to_log_range");e.exports=function(t,e,r,o){e=e||{};var a="log"===r&&"linear"===e.type,s="linear"===r&&"log"===e.type;if(a||s)for(var l,g,c=t._fullLayout.annotations,u=e._id.charAt(0),h=0;h<c.length;h++)l=c[h],g="annotations["+h+"].",l[u+"ref"]===e._id&&d(u),l["a"+u+"ref"]===e._id&&d("a"+u);function d(t){var r=l[t],s=null;s=a?i(r,e.range):Math.pow(10,r),n(s)||(s=null),o(g+t,s)}}},{"../../lib/to_log_range":452,"fast-isnumeric":145}],294:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../plots/cartesian/axes"),o=t("../../plots/array_container_defaults"),a=t("./common_defaults"),s=t("./attributes");function l(t,e,r){function o(r,i){return n.coerce(t,e,s,r,i)}var l=o("visible"),g=o("clicktoshow");if(l||g){a(t,e,r,o);for(var c=e.showarrow,u=["x","y"],h=[-10,-30],d={_fullLayout:r},A=0;A<2;A++){var f=u[A],C=i.coerceRef(t,e,d,f,"","paper");if("paper"!==C)i.getFromId(d,C)._annIndices.push(e._index);if(i.coercePosition(e,d,o,C,f,.5),c){var p="a"+f,I=i.coerceRef(t,e,d,p,"pixel");"pixel"!==I&&I!==C&&(I=e[p]="pixel");var v="pixel"===I?h[A]:.4;i.coercePosition(e,d,o,I,p,v)}o(f+"anchor"),o(f+"shift")}if(n.noneOrAll(t,e,["x","y"]),c&&n.noneOrAll(t,e,["ax","ay"]),g){var m=o("xclick"),y=o("yclick");e._xclick=void 0===m?e.x:i.cleanPosition(m,d,e.xref),e._yclick=void 0===y?e.y:i.cleanPosition(y,d,e.yref)}}}e.exports=function(t,e){o(t,e,{name:"annotations",handleItemDefaults:l})}},{"../../lib":426,"../../plots/array_container_defaults":469,"../../plots/cartesian/axes":473,"./attributes":289,"./common_defaults":292}],295:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../registry"),o=t("../../plots/plots"),a=t("../../lib"),s=t("../../plots/cartesian/axes"),l=t("../color"),g=t("../drawing"),c=t("../fx"),u=t("../../lib/svg_text_utils"),h=t("../../lib/setcursor"),d=t("../dragelement"),A=t("../../plot_api/plot_template").arrayEditor,f=t("./draw_arrow_head");function C(t,e){var r=t._fullLayout.annotations[e]||{},n=s.getFromId(t,r.xref),i=s.getFromId(t,r.yref);n&&n.setScale(),i&&i.setScale(),p(t,r,e,!1,n,i)}function p(t,e,r,o,s,C){var p,I,v=t._fullLayout,m=t._fullLayout._size,y=t._context.edits;o?(p="annotation-"+o,I=o+".annotations"):(p="annotation",I="annotations");var b=A(t.layout,I,e),x=b.modifyBase,_=b.modifyItem,w=b.getUpdateObj;v._infolayer.selectAll("."+p+'[data-index="'+r+'"]').remove();var k="clip"+v._uid+"_ann"+r;if(e._input&&!1!==e.visible){var T={x:{},y:{}},M=+e.textangle||0,E=v._infolayer.append("g").classed(p,!0).attr("data-index",String(r)).style("opacity",e.opacity),O=E.append("g").classed("annotation-text-g",!0),S=y[e.showarrow?"annotationTail":"annotationPosition"],R=e.captureevents||y.annotationText||S,D=O.append("g").style("pointer-events",R?"all":null).call(h,"pointer").on("click",function(){t._dragging=!1,t.emit("plotly_clickannotation",U(n.event))});e.hovertext&&D.on("mouseover",function(){var r=e.hoverlabel,n=r.font,i=this.getBoundingClientRect(),o=t.getBoundingClientRect();c.loneHover({x0:i.left-o.left,x1:i.right-o.left,y:(i.top+i.bottom)/2-o.top,text:e.hovertext,color:r.bgcolor,borderColor:r.bordercolor,fontFamily:n.family,fontSize:n.size,fontColor:n.color},{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:t})}).on("mouseout",function(){c.loneUnhover(v._hoverlayer.node())});var L=e.borderwidth,P=e.borderpad,N=L+P,z=D.append("rect").attr("class","bg").style("stroke-width",L+"px").call(l.stroke,e.bordercolor).call(l.fill,e.bgcolor),F=e.width||e.height,B=v._topclips.selectAll("#"+k).data(F?[0]:[]);B.enter().append("clipPath").classed("annclip",!0).attr("id",k).append("rect"),B.exit().remove();var j=e.font,V=v._meta?a.templateString(e.text,v._meta):e.text,G=D.append("text").classed("annotation-text",!0).text(V);y.annotationText?G.call(u.makeEditable,{delegate:D,gd:t}).call(Z).on("edit",function(r){e.text=r,this.call(Z),_("text",r),s&&s.autorange&&x(s._name+".autorange",!0),C&&C.autorange&&x(C._name+".autorange",!0),i.call("_guiRelayout",t,w())}):G.call(Z)}else n.selectAll("#"+k).remove();function U(t){var n={index:r,annotation:e._input,fullAnnotation:e,event:t};return o&&(n.subplotId=o),n}function Z(r){return r.call(g.font,j).attr({"text-anchor":{left:"start",right:"end"}[e.align]||"middle"}),u.convertToTspans(r,t,H),r}function H(){var r=G.selectAll("a");1===r.size()&&r.text()===G.text()&&D.insert("a",":first-child").attr({"xlink:xlink:href":r.attr("xlink:href"),"xlink:xlink:show":r.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(z.node());var n=D.select(".annotation-text-math-group"),c=!n.empty(),A=g.bBox((c?n:G).node()),p=A.width,I=A.height,b=e.width||p,R=e.height||I,P=Math.round(b+2*N),j=Math.round(R+2*N);function V(t,e){return"auto"===e&&(e=t<1/3?"left":t>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[e]}for(var Z=!1,H=["x","y"],W=0;W<H.length;W++){var Y,X,q,Q,K,J=H[W],$=e[J+"ref"]||J,tt=e["a"+J+"ref"],et={x:s,y:C}[J],rt=(M+("x"===J?0:-90))*Math.PI/180,nt=P*Math.cos(rt),it=j*Math.sin(rt),ot=Math.abs(nt)+Math.abs(it),at=e[J+"anchor"],st=e[J+"shift"]*("x"===J?1:-1),lt=T[J];if(et){var gt=et.r2fraction(e[J]);(gt<0||gt>1)&&(tt===$?((gt=et.r2fraction(e["a"+J]))<0||gt>1)&&(Z=!0):Z=!0),Y=et._offset+et.r2p(e[J]),Q=.5}else"x"===J?(q=e[J],Y=m.l+m.w*q):(q=1-e[J],Y=m.t+m.h*q),Q=e.showarrow?.5:q;if(e.showarrow){lt.head=Y;var ct=e["a"+J];K=nt*V(.5,e.xanchor)-it*V(.5,e.yanchor),tt===$?(lt.tail=et._offset+et.r2p(ct),X=K):(lt.tail=Y+ct,X=K+ct),lt.text=lt.tail+K;var ut=v["x"===J?"width":"height"];if("paper"===$&&(lt.head=a.constrain(lt.head,1,ut-1)),"pixel"===tt){var ht=-Math.max(lt.tail-3,lt.text),dt=Math.min(lt.tail+3,lt.text)-ut;ht>0?(lt.tail+=ht,lt.text+=ht):dt>0&&(lt.tail-=dt,lt.text-=dt)}lt.tail+=st,lt.head+=st}else X=K=ot*V(Q,at),lt.text=Y+K;lt.text+=st,K+=st,X+=st,e["_"+J+"padplus"]=ot/2+X,e["_"+J+"padminus"]=ot/2-X,e["_"+J+"size"]=ot,e["_"+J+"shift"]=K}if(Z)D.remove();else{var At=0,ft=0;if("left"!==e.align&&(At=(b-p)*("center"===e.align?.5:1)),"top"!==e.valign&&(ft=(R-I)*("middle"===e.valign?.5:1)),c)n.select("svg").attr({x:N+At-1,y:N+ft}).call(g.setClipUrl,F?k:null,t);else{var Ct=N+ft-A.top,pt=N+At-A.left;G.call(u.positionText,pt,Ct).call(g.setClipUrl,F?k:null,t)}B.select("rect").call(g.setRect,N,N,b,R),z.call(g.setRect,L/2,L/2,P-L,j-L),D.call(g.setTranslate,Math.round(T.x.text-P/2),Math.round(T.y.text-j/2)),O.attr({transform:"rotate("+M+","+T.x.text+","+T.y.text+")"});var It,vt=function(r,n){E.selectAll(".annotation-arrow-g").remove();var c=T.x.head,u=T.y.head,h=T.x.tail+r,A=T.y.tail+n,p=T.x.text+r,I=T.y.text+n,v=a.rotationXYMatrix(M,p,I),b=a.apply2DTransform(v),k=a.apply2DTransform2(v),S=+z.attr("width"),R=+z.attr("height"),L=p-.5*S,P=L+S,N=I-.5*R,F=N+R,B=[[L,N,L,F],[L,F,P,F],[P,F,P,N],[P,N,L,N]].map(k);if(!B.reduce(function(t,e){return t^!!a.segmentsIntersect(c,u,c+1e6,u+1e6,e[0],e[1],e[2],e[3])},!1)){B.forEach(function(t){var e=a.segmentsIntersect(h,A,c,u,t[0],t[1],t[2],t[3]);e&&(h=e.x,A=e.y)});var j=e.arrowwidth,V=e.arrowcolor,G=e.arrowside,U=E.append("g").style({opacity:l.opacity(V)}).classed("annotation-arrow-g",!0),Z=U.append("path").attr("d","M"+h+","+A+"L"+c+","+u).style("stroke-width",j+"px").call(l.stroke,l.rgb(V));if(f(Z,G,e),y.annotationPosition&&Z.node().parentNode&&!o){var H=c,W=u;if(e.standoff){var Y=Math.sqrt(Math.pow(c-h,2)+Math.pow(u-A,2));H+=e.standoff*(h-c)/Y,W+=e.standoff*(A-u)/Y}var X,q,Q=U.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(h-H)+","+(A-W),transform:"translate("+H+","+W+")"}).style("stroke-width",j+6+"px").call(l.stroke,"rgba(0,0,0,0)").call(l.fill,"rgba(0,0,0,0)");d.init({element:Q.node(),gd:t,prepFn:function(){var t=g.getTranslate(D);X=t.x,q=t.y,s&&s.autorange&&x(s._name+".autorange",!0),C&&C.autorange&&x(C._name+".autorange",!0)},moveFn:function(t,r){var n=b(X,q),i=n[0]+t,o=n[1]+r;D.call(g.setTranslate,i,o),_("x",s?s.p2r(s.r2p(e.x)+t):e.x+t/m.w),_("y",C?C.p2r(C.r2p(e.y)+r):e.y-r/m.h),e.axref===e.xref&&_("ax",s.p2r(s.r2p(e.ax)+t)),e.ayref===e.yref&&_("ay",C.p2r(C.r2p(e.ay)+r)),U.attr("transform","translate("+t+","+r+")"),O.attr({transform:"rotate("+M+","+i+","+o+")"})},doneFn:function(){i.call("_guiRelayout",t,w());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}};if(e.showarrow&&vt(0,0),S)d.init({element:D.node(),gd:t,prepFn:function(){It=O.attr("transform")},moveFn:function(t,r){var n="pointer";if(e.showarrow)e.axref===e.xref?_("ax",s.p2r(s.r2p(e.ax)+t)):_("ax",e.ax+t),e.ayref===e.yref?_("ay",C.p2r(C.r2p(e.ay)+r)):_("ay",e.ay+r),vt(t,r);else{if(o)return;var i,a;if(s)i=s.p2r(s.r2p(e.x)+t);else{var l=e._xsize/m.w,g=e.x+(e._xshift-e.xshift)/m.w-l/2;i=d.align(g+t/m.w,l,0,1,e.xanchor)}if(C)a=C.p2r(C.r2p(e.y)+r);else{var c=e._ysize/m.h,u=e.y-(e._yshift+e.yshift)/m.h-c/2;a=d.align(u-r/m.h,c,0,1,e.yanchor)}_("x",i),_("y",a),s&&C||(n=d.getCursor(s?.5:i,C?.5:a,e.xanchor,e.yanchor))}O.attr({transform:"translate("+t+","+r+")"+It}),h(D,n)},clickFn:function(r,n){e.captureevents&&t.emit("plotly_clickannotation",U(n))},doneFn:function(){h(D),i.call("_guiRelayout",t,w());var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}}e.exports={draw:function(t){var e=t._fullLayout;e._infolayer.selectAll(".annotation").remove();for(var r=0;r<e.annotations.length;r++)e.annotations[r].visible&&C(t,r);return o.previousPromises(t)},drawOne:C,drawRaw:p}},{"../../lib":426,"../../lib/setcursor":446,"../../lib/svg_text_utils":450,"../../plot_api/plot_template":463,"../../plots/cartesian/axes":473,"../../plots/plots":515,"../../registry":524,"../color":304,"../dragelement":322,"../drawing":325,"../fx":343,"./draw_arrow_head":296,d3:74}],296:[function(t,e,r){"use strict";var n=t("d3"),i=t("../color"),o=t("./arrow_paths");e.exports=function(t,e,r){var a,s,l,g,c=t.node(),u=o[r.arrowhead||0],h=o[r.startarrowhead||0],d=(r.arrowwidth||1)*(r.arrowsize||1),A=(r.arrowwidth||1)*(r.startarrowsize||1),f=e.indexOf("start")>=0,C=e.indexOf("end")>=0,p=u.backoff*d+r.standoff,I=h.backoff*A+r.startstandoff;if("line"===c.nodeName){a={x:+t.attr("x1"),y:+t.attr("y1")},s={x:+t.attr("x2"),y:+t.attr("y2")};var v=a.x-s.x,m=a.y-s.y;if(g=(l=Math.atan2(m,v))+Math.PI,p&&I&&p+I>Math.sqrt(v*v+m*m))return void S();if(p){if(p*p>v*v+m*m)return void S();var y=p*Math.cos(l),b=p*Math.sin(l);s.x+=y,s.y+=b,t.attr({x2:s.x,y2:s.y})}if(I){if(I*I>v*v+m*m)return void S();var x=I*Math.cos(l),_=I*Math.sin(l);a.x-=x,a.y-=_,t.attr({x1:a.x,y1:a.y})}}else if("path"===c.nodeName){var w=c.getTotalLength(),k="";if(w<p+I)return void S();var T=c.getPointAtLength(0),M=c.getPointAtLength(.1);l=Math.atan2(T.y-M.y,T.x-M.x),a=c.getPointAtLength(Math.min(I,w)),k="0px,"+I+"px,";var E=c.getPointAtLength(w),O=c.getPointAtLength(w-.1);g=Math.atan2(E.y-O.y,E.x-O.x),s=c.getPointAtLength(Math.max(0,w-p)),k+=w-(k?I+p:p)+"px,"+w+"px",t.style("stroke-dasharray",k)}function S(){t.style("stroke-dasharray","0px,100px")}function R(e,o,a,s){e.path&&(e.noRotate&&(a=0),n.select(c.parentNode).append("path").attr({class:t.attr("class"),d:e.path,transform:"translate("+o.x+","+o.y+")"+(a?"rotate("+180*a/Math.PI+")":"")+"scale("+s+")"}).style({fill:i.rgb(r.arrowcolor),"stroke-width":0}))}f&&R(h,a,l,A),C&&R(u,s,g,d)}},{"../color":304,"./arrow_paths":288,d3:74}],297:[function(t,e,r){"use strict";var n=t("./draw"),i=t("./click");e.exports={moduleType:"component",name:"annotations",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("annotations"),calcAutorange:t("./calc_autorange"),draw:n.draw,drawOne:n.drawOne,drawRaw:n.drawRaw,hasClickToShow:i.hasClickToShow,onClick:i.onClick,convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":483,"./attributes":289,"./calc_autorange":290,"./click":291,"./convert_coords":293,"./defaults":294,"./draw":295}],298:[function(t,e,r){"use strict";var n=t("../annotations/attributes"),i=t("../../plot_api/edit_types").overrideAll,o=t("../../plot_api/plot_template").templatedArray;e.exports=i(o("annotation",{visible:n.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:n.xanchor,xshift:n.xshift,yanchor:n.yanchor,yshift:n.yshift,text:n.text,textangle:n.textangle,font:n.font,width:n.width,height:n.height,opacity:n.opacity,align:n.align,valign:n.valign,bgcolor:n.bgcolor,bordercolor:n.bordercolor,borderpad:n.borderpad,borderwidth:n.borderwidth,showarrow:n.showarrow,arrowcolor:n.arrowcolor,arrowhead:n.arrowhead,startarrowhead:n.startarrowhead,arrowside:n.arrowside,arrowsize:n.arrowsize,startarrowsize:n.startarrowsize,arrowwidth:n.arrowwidth,standoff:n.standoff,startstandoff:n.startstandoff,hovertext:n.hovertext,hoverlabel:n.hoverlabel,captureevents:n.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":456,"../../plot_api/plot_template":463,"../annotations/attributes":289}],299:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../plots/cartesian/axes");function o(t,e){var r=e.fullSceneLayout.domain,o=e.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};t._xa={},n.extendFlat(t._xa,a),i.setConvert(t._xa),t._xa._offset=o.l+r.x[0]*o.w,t._xa.l2p=function(){return.5*(1+t._pdata[0]/t._pdata[3])*o.w*(r.x[1]-r.x[0])},t._ya={},n.extendFlat(t._ya,a),i.setConvert(t._ya),t._ya._offset=o.t+(1-r.y[1])*o.h,t._ya.l2p=function(){return.5*(1-t._pdata[1]/t._pdata[3])*o.h*(r.y[1]-r.y[0])}}e.exports=function(t){for(var e=t.fullSceneLayout.annotations,r=0;r<e.length;r++)o(e[r],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()}},{"../../lib":426,"../../plots/cartesian/axes":473}],300:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../plots/cartesian/axes"),o=t("../../plots/array_container_defaults"),a=t("../annotations/common_defaults"),s=t("./attributes");function l(t,e,r,o){function l(r,i){return n.coerce(t,e,s,r,i)}function g(t){var n=t+"axis",o={_fullLayout:{}};return o._fullLayout[n]=r[n],i.coercePosition(e,o,l,t,t,.5)}l("visible")&&(a(t,e,o.fullLayout,l),g("x"),g("y"),g("z"),n.noneOrAll(t,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",l("xanchor"),l("yanchor"),l("xshift"),l("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",l("ax",-10),l("ay",-30),n.noneOrAll(t,e,["ax","ay"])))}e.exports=function(t,e,r){o(t,e,{name:"annotations",handleItemDefaults:l,fullLayout:r.fullLayout})}},{"../../lib":426,"../../plots/array_container_defaults":469,"../../plots/cartesian/axes":473,"../annotations/common_defaults":292,"./attributes":298}],301:[function(t,e,r){"use strict";var n=t("../annotations/draw").drawRaw,i=t("../../plots/gl3d/project"),o=["x","y","z"];e.exports=function(t){for(var e=t.fullSceneLayout,r=t.dataScale,a=e.annotations,s=0;s<a.length;s++){for(var l=a[s],g=!1,c=0;c<3;c++){var u=o[c],h=l[u],d=e[u+"axis"].r2fraction(h);if(d<0||d>1){g=!0;break}}g?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+s+'"]').remove():(l._pdata=i(t.glplot.cameraParams,[e.xaxis.r2l(l.x)*r[0],e.yaxis.r2l(l.y)*r[1],e.zaxis.r2l(l.z)*r[2]]),n(t.graphDiv,l,s,t.id,l._xa,l._ya))}}},{"../../plots/gl3d/project":511,"../annotations/draw":295}],302:[function(t,e,r){"use strict";var n=t("../../registry"),i=t("../../lib");e.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),includeBasePlot:function(t,e){var r=n.subplotsRegistry.gl3d;if(!r)return;for(var o=r.attrRegex,a=Object.keys(t),s=0;s<a.length;s++){var l=a[s];o.test(l)&&(t[l].annotations||[]).length&&(i.pushUnique(e._basePlotModules,r),i.pushUnique(e._subplots.gl3d,l))}},convert:t("./convert"),draw:t("./draw")}},{"../../lib":426,"../../registry":524,"./attributes":298,"./convert":299,"./defaults":300,"./draw":301}],303:[function(t,e,r){"use strict";r.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],r.defaultLine="#444",r.lightLine="#eee",r.background="#fff",r.borderLine="#BEC8D9",r.lightFraction=1e3/11},{}],304:[function(t,e,r){"use strict";var n=t("tinycolor2"),i=t("fast-isnumeric"),o=e.exports={},a=t("./attributes");o.defaults=a.defaults;var s=o.defaultLine=a.defaultLine;o.lightLine=a.lightLine;var l=o.background=a.background;function g(t){if(i(t)||"string"!=typeof t)return t;var e=t.trim();if("rgb"!==e.substr(0,3))return t;var r=e.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return t;var n=r[1].trim().split(/\s*[\s,]\s*/),o="a"===e.charAt(3)&&4===n.length;if(!o&&3!==n.length)return t;for(var a=0;a<n.length;a++){if(!n[a].length)return t;if(n[a]=Number(n[a]),!(n[a]>=0))return t;if(3===a)n[a]>1&&(n[a]=1);else if(n[a]>=1)return t}var s=Math.round(255*n[0])+", "+Math.round(255*n[1])+", "+Math.round(255*n[2]);return o?"rgba("+s+", "+n[3]+")":"rgb("+s+")"}o.tinyRGB=function(t){var e=t.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},o.rgb=function(t){return o.tinyRGB(n(t))},o.opacity=function(t){return t?n(t).getAlpha():0},o.addOpacity=function(t,e){var r=n(t).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+e+")"},o.combine=function(t,e){var r=n(t).toRgb();if(1===r.a)return n(t).toRgbString();var i=n(e||l).toRgb(),o=1===i.a?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},a={r:o.r*(1-r.a)+r.r*r.a,g:o.g*(1-r.a)+r.g*r.a,b:o.b*(1-r.a)+r.b*r.a};return n(a).toRgbString()},o.contrast=function(t,e,r){var i=n(t);return 1!==i.getAlpha()&&(i=n(o.combine(t,l))),(i.isDark()?e?i.lighten(e):l:r?i.darken(r):s).toString()},o.stroke=function(t,e){var r=n(e);t.style({stroke:o.tinyRGB(r),"stroke-opacity":r.getAlpha()})},o.fill=function(t,e){var r=n(e);t.style({fill:o.tinyRGB(r),"fill-opacity":r.getAlpha()})},o.clean=function(t){if(t&&"object"==typeof t){var e,r,n,i,a=Object.keys(t);for(e=0;e<a.length;e++)if(i=t[n=a[e]],"color"===n.substr(n.length-5))if(Array.isArray(i))for(r=0;r<i.length;r++)i[r]=g(i[r]);else t[n]=g(i);else if("colorscale"===n.substr(n.length-10)&&Array.isArray(i))for(r=0;r<i.length;r++)Array.isArray(i[r])&&(i[r][1]=g(i[r][1]));else if(Array.isArray(i)){var s=i[0];if(!Array.isArray(s)&&s&&"object"==typeof s)for(r=0;r<i.length;r++)o.clean(i[r])}else i&&"object"==typeof i&&o.clean(i)}}},{"./attributes":303,"fast-isnumeric":145,tinycolor2:693}],305:[function(t,e,r){"use strict";var n=t("../../plots/cartesian/layout_attributes"),i=t("../../plots/font_attributes"),o=t("../../lib/extend").extendFlat,a=t("../../plot_api/edit_types").overrideAll;e.exports=a({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:n.linecolor,outlinewidth:n.linewidth,bordercolor:n.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:o({},n.ticks,{dflt:""}),ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,showticklabels:n.showticklabels,tickfont:i({}),tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,separatethousands:n.separatethousands,exponentformat:n.exponentformat,showexponent:n.showexponent,title:{text:{valType:"string"},font:i({}),side:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},_deprecated:{title:{valType:"string"},titlefont:i({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":419,"../../plot_api/edit_types":456,"../../plots/cartesian/layout_attributes":485,"../../plots/font_attributes":499}],306:[function(t,e,r){"use strict";e.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],307:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../plot_api/plot_template"),o=t("../../plots/cartesian/tick_value_defaults"),a=t("../../plots/cartesian/tick_mark_defaults"),s=t("../../plots/cartesian/tick_label_defaults"),l=t("./attributes");e.exports=function(t,e,r){var g=i.newContainer(e,"colorbar"),c=t.colorbar||{};function u(t,e){return n.coerce(c,g,l,t,e)}u("thickness","fraction"===u("thicknessmode")?30/(r.width-r.margin.l-r.margin.r):30),u("len","fraction"===u("lenmode")?1:r.height-r.margin.t-r.margin.b),u("x"),u("xanchor"),u("xpad"),u("y"),u("yanchor"),u("ypad"),n.noneOrAll(c,g,["x","y"]),u("outlinecolor"),u("outlinewidth"),u("bordercolor"),u("borderwidth"),u("bgcolor"),o(c,g,u,"linear");var h={outerTicks:!1,font:r.font};s(c,g,u,"linear",h),a(c,g,u,"linear",h),u("title.text",r._dfltTitle.colorbar),n.coerceFont(u,"title.font",r.font),u("title.side")}},{"../../lib":426,"../../plot_api/plot_template":463,"../../plots/cartesian/tick_label_defaults":492,"../../plots/cartesian/tick_mark_defaults":493,"../../plots/cartesian/tick_value_defaults":494,"./attributes":305}],308:[function(t,e,r){"use strict";var n=t("d3"),i=t("tinycolor2"),o=t("../../plots/plots"),a=t("../../registry"),s=t("../../plots/cartesian/axes"),l=t("../dragelement"),g=t("../../lib"),c=t("../../lib/extend").extendFlat,u=t("../../lib/setcursor"),h=t("../drawing"),d=t("../color"),A=t("../titles"),f=t("../../lib/svg_text_utils"),C=t("../colorscale/helpers").flipScale,p=t("../../plots/cartesian/axis_defaults"),I=t("../../plots/cartesian/position_defaults"),v=t("../../plots/cartesian/layout_attributes"),m=t("../../constants/alignment"),y=m.LINE_SPACING,b=m.FROM_TL,x=m.FROM_BR,_=t("./constants").cn;e.exports={draw:function(t){var e=t._fullLayout._infolayer.selectAll("g."+_.colorbar).data(function(t){var e,r,n,i,o=t._fullLayout,a=t.calcdata,s=[];function l(t){return c(t,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function g(){"function"==typeof i.calc?i.calc(t,n,e):(e._fillgradient=r.reversescale?C(r.colorscale):r.colorscale,e._zrange=[r[i.min],r[i.max]])}for(var u=0;u<a.length;u++){var h=a[u],d=(n=h[0].trace)._module.colorbar;if(!0===n.visible&&d)for(var A=Array.isArray(d),f=A?d:[d],p=0;p<f.length;p++){var I=(i=f[p]).container;(r=I?n[I]:n)&&r.showscale&&((e=l(r.colorbar))._id="cb"+n.uid+(A&&I?"-"+I:""),e._traceIndex=n.index,e._propPrefix=(I?I+".":"")+"colorbar.",e._meta=n._meta,g(),s.push(e))}}for(var v in o._colorAxes)if((r=o[v]).showscale){var m=o._colorAxes[v];(e=l(r.colorbar))._id="cb"+v,e._propPrefix=v+".colorbar.",e._meta=o._meta,i={min:"cmin",max:"cmax"},"heatmap"!==m[0]&&(n=m[1],i.calc=n._module.colorbar.calc),g(),s.push(e)}return s}(t),function(t){return t._id});e.enter().append("g").attr("class",function(t){return t._id}).classed(_.colorbar,!0),e.each(function(e){var r=n.select(this);g.ensureSingle(r,"rect",_.cbbg),g.ensureSingle(r,"g",_.cbfills),g.ensureSingle(r,"g",_.cblines),g.ensureSingle(r,"g",_.cbaxis,function(t){t.classed(_.crisp,!0)}),g.ensureSingle(r,"g",_.cbtitleunshift,function(t){t.append("g").classed(_.cbtitle,!0)}),g.ensureSingle(r,"rect",_.cboutline);var C=function(t,e,r){var a=r._fullLayout,l=a._size,u=e._fillcolor,C=e._line,m=e.title,w=m.side,k=e._zrange||n.extent(("function"==typeof u?u:C.color).domain()),T="function"==typeof C.color?C.color:function(){return C.color},M="function"==typeof u?u:function(){return u},E=e._levels,O=function(t,e,r){var n,i,o=e._levels,a=[],s=[],l=o.end+o.size/100,g=o.size,c=1.001*r[0]-.001*r[1],u=1.001*r[1]-.001*r[0];for(i=0;i<1e5&&(n=o.start+i*g,!(g>0?n>=l:n<=l));i++)n>c&&n<u&&a.push(n);if(e._fillgradient)s=[0];else if("function"==typeof e._fillcolor){var h=e._filllevels;if(h)for(l=h.end+h.size/100,g=h.size,i=0;i<1e5&&(n=h.start+i*g,!(g>0?n>=l:n<=l));i++)n>r[0]&&n<r[1]&&s.push(n);else(s=a.map(function(t){return t-o.size/2})).push(s[s.length-1]+o.size)}else e._fillcolor&&"string"==typeof e._fillcolor&&(s=[0]);return o.size<0&&(a.reverse(),s.reverse()),{line:a,fill:s}}(0,e,k),S=O.fill,R=O.line,D=Math.round(e.thickness*("fraction"===e.thicknessmode?l.w:1)),L=D/l.w,P=Math.round(e.len*("fraction"===e.lenmode?l.h:1)),N=P/l.h,z=e.xpad/l.w,F=(e.borderwidth+e.outlinewidth)/2,B=e.ypad/l.h,j=Math.round(e.x*l.w+e.xpad),V=e.x-L*({middle:.5,right:1}[e.xanchor]||0),G=e.y+N*(({top:-.5,bottom:.5}[e.yanchor]||0)-.5),U=Math.round(l.h*(1-G)),Z=U-P;e._lenFrac=N,e._thickFrac=L,e._xLeftFrac=V,e._yBottomFrac=G;var H=e._axis=function(t,e,r){var n=t._fullLayout,i={type:"linear",range:r,tickmode:e.tickmode,nticks:e.nticks,tick0:e.tick0,dtick:e.dtick,tickvals:e.tickvals,ticktext:e.ticktext,ticks:e.ticks,ticklen:e.ticklen,tickwidth:e.tickwidth,tickcolor:e.tickcolor,showticklabels:e.showticklabels,tickfont:e.tickfont,tickangle:e.tickangle,tickformat:e.tickformat,exponentformat:e.exponentformat,separatethousands:e.separatethousands,showexponent:e.showexponent,showtickprefix:e.showtickprefix,tickprefix:e.tickprefix,showticksuffix:e.showticksuffix,ticksuffix:e.ticksuffix,title:e.title,showline:!0,anchor:"free",side:"right",position:1},o={type:"linear",_id:"y"+e._id},a={letter:"y",font:n.font,noHover:!0,noTickson:!0,calendar:n.calendar};function s(t,e){return g.coerce(i,o,v,t,e)}return p(i,o,s,a,n),I(i,o,s,a),o}(r,e,k);if(H.position=e.x+z+L,-1!==["top","bottom"].indexOf(w)&&(H.title.side=w,H.titlex=e.x+z,H.titley=G+("top"===m.side?N-B:B)),C.color&&"auto"===e.tickmode){H.tickmode="linear",H.tick0=E.start;var W=E.size,Y=g.constrain((U-Z)/50,4,15)+1,X=(k[1]-k[0])/((e.nticks||Y)*W);if(X>1){var q=Math.pow(10,Math.floor(Math.log(X)/Math.LN10));W*=q*g.roundUp(X/q,[2,5,10]),(Math.abs(E.start)/E.size+1e-6)%1<2e-6&&(H.tick0=0)}H.dtick=W}H.domain=[G+B,G+N-B],H.setScale(),t.attr("transform","translate("+Math.round(l.l)+","+Math.round(l.t)+")");var Q,K=t.select("."+_.cbtitleunshift).attr("transform","translate(-"+Math.round(l.l)+",-"+Math.round(l.t)+")"),J=t.select("."+_.cbaxis),$=0;function tt(n,i){var o={propContainer:H,propName:e._propPrefix+"title",traceIndex:e._traceIndex,_meta:e._meta,placeholder:a._dfltTitle.colorbar,containerGroup:t.select("."+_.cbtitle)},s="h"===n.charAt(0)?n.substr(1):"h"+n;t.selectAll("."+s+",."+s+"-math-group").remove(),A.draw(r,n,c(o,i||{}))}return g.syncOrAsync([o.previousPromises,function(){if(-1!==["top","bottom"].indexOf(w)){var t,r=l.l+(e.x+z)*l.w,n=H.title.font.size;t="top"===w?(1-(G+N-B))*l.h+l.t+3+.75*n:(1-(G+B))*l.h+l.t-3-.25*n,tt(H._id+"title",{attributes:{x:r,y:t,"text-anchor":"start"}})}},function(){if(-1!==["top","bottom"].indexOf(w)){var o=t.select("."+_.cbtitle),a=o.select("text"),c=[-e.outlinewidth/2,e.outlinewidth/2],u=o.select(".h"+H._id+"title-math-group").node(),d=15.6;if(a.node()&&(d=parseInt(a.node().style.fontSize,10)*y),u?($=h.bBox(u).height)>d&&(c[1]-=($-d)/2):a.node()&&!a.classed(_.jsPlaceholder)&&($=h.bBox(a.node()).height),$){if($+=5,"top"===w)H.domain[1]-=$/l.h,c[1]*=-1;else{H.domain[0]+=$/l.h;var A=f.lineCount(a);c[1]+=(1-A)*d}o.attr("transform","translate("+c+")"),H.setScale()}}t.selectAll("."+_.cbfills+",."+_.cblines).attr("transform","translate(0,"+Math.round(l.h*(1-H.domain[1]))+")"),J.attr("transform","translate(0,"+Math.round(-l.t)+")");var p=t.select("."+_.cbfills).selectAll("rect."+_.cbfill).data(S);p.enter().append("rect").classed(_.cbfill,!0).style("stroke","none"),p.exit().remove();var I=k.map(H.c2p).map(Math.round).sort(function(t,e){return t-e});p.each(function(t,o){var a=[0===o?k[0]:(S[o]+S[o-1])/2,o===S.length-1?k[1]:(S[o]+S[o+1])/2].map(H.c2p).map(Math.round);a[1]=g.constrain(a[1]+(a[1]>a[0])?1:-1,I[0],I[1]);var s=n.select(this).attr({x:j,width:Math.max(D,2),y:n.min(a),height:Math.max(n.max(a)-n.min(a),2)});if(e._fillgradient)h.gradient(s,r,e._id,"vertical",e._fillgradient,"fill");else{var l=M(t).replace("e-","");s.attr("fill",i(l).toHexString())}});var v=t.select("."+_.cblines).selectAll("path."+_.cbline).data(C.color&&C.width?R:[]);v.enter().append("path").classed(_.cbline,!0),v.exit().remove(),v.each(function(t){n.select(this).attr("d","M"+j+","+(Math.round(H.c2p(t))+C.width/2%1)+"h"+D).call(h.lineGroupStyle,C.width,T(t),C.dash)}),J.selectAll("g."+H._id+"tick,path").remove();var m=j+D+(e.outlinewidth||0)/2-("outside"===e.ticks?1:0),b=s.calcTicks(H),x=s.makeTransFn(H),E=s.getTickSigns(H)[2];return s.drawTicks(r,H,{vals:"inside"===H.ticks?s.clipEnds(H,b):b,layer:J,path:s.makeTickPath(H,m,E),transFn:x}),s.drawLabels(r,H,{vals:b,layer:J,transFn:x,labelFns:s.makeLabelFns(H,m)})},function(){if(-1===["top","bottom"].indexOf(w)){var t=H.title.font.size,e=H._offset+H._length/2,i=l.l+(H.position||0)*l.w+("right"===H.side?10+t*(H.showticklabels?1:.5):-10-t*(H.showticklabels?.5:0));tt("h"+H._id+"title",{avoid:{selection:n.select(r).selectAll("g."+H._id+"tick"),side:w,offsetLeft:l.l,offsetTop:0,maxShift:a.width},attributes:{x:i,y:e,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}},o.previousPromises,function(){var n=D+e.outlinewidth/2+h.bBox(J.node()).width;if((Q=K.select("text")).node()&&!Q.classed(_.jsPlaceholder)){var i,a=K.select(".h"+H._id+"title-math-group").node();i=a&&-1!==["top","bottom"].indexOf(w)?h.bBox(a).width:h.bBox(K.node()).right-j-l.l,n=Math.max(n,i)}var s=2*e.xpad+n+e.borderwidth+e.outlinewidth/2,g=U-Z;t.select("."+_.cbbg).attr({x:j-e.xpad-(e.borderwidth+e.outlinewidth)/2,y:Z-F,width:Math.max(s,2),height:Math.max(g+2*F,2)}).call(d.fill,e.bgcolor).call(d.stroke,e.bordercolor).style("stroke-width",e.borderwidth),t.selectAll("."+_.cboutline).attr({x:j,y:Z+e.ypad+("top"===w?$:0),width:Math.max(D,2),height:Math.max(g-2*e.ypad-$,2)}).call(d.stroke,e.outlinecolor).style({fill:"none","stroke-width":e.outlinewidth});var c=({center:.5,right:1}[e.xanchor]||0)*s;t.attr("transform","translate("+(l.l-c)+","+l.t+")");var u={},A=b[e.yanchor],f=x[e.yanchor];"pixels"===e.lenmode?(u.y=e.y,u.t=g*A,u.b=g*f):(u.t=u.b=0,u.yt=e.y+e.len*A,u.yb=e.y-e.len*f);var C=b[e.xanchor],p=x[e.xanchor];if("pixels"===e.thicknessmode)u.x=e.x,u.l=s*C,u.r=s*p;else{var I=s-D;u.l=I*C,u.r=I*p,u.xl=e.x-e.thickness*C,u.xr=e.x+e.thickness*p}o.autoMargin(r,e._id,u)}],r)}(r,e,t);C&&C.then&&(t._promises||[]).push(C),t._context.edits.colorbarPosition&&function(t,e,r){var n,i,o,s=r._fullLayout._size;l.init({element:t.node(),gd:r,prepFn:function(){n=t.attr("transform"),u(t)},moveFn:function(r,a){t.attr("transform",n+" translate("+r+","+a+")"),i=l.align(e._xLeftFrac+r/s.w,e._thickFrac,0,1,e.xanchor),o=l.align(e._yBottomFrac-a/s.h,e._lenFrac,0,1,e.yanchor);var g=l.getCursor(i,o,e.xanchor,e.yanchor);u(t,g)},doneFn:function(){if(u(t),void 0!==i&&void 0!==o){var n={};n[e._propPrefix+"x"]=i,n[e._propPrefix+"y"]=o,void 0!==e._traceIndex?a.call("_guiRestyle",r,n,e._traceIndex):a.call("_guiRelayout",r,n)}}})}(r,e,t)}),e.exit().each(function(e){o.autoMargin(t,e._id)}).remove(),e.order()}}},{"../../constants/alignment":399,"../../lib":426,"../../lib/extend":419,"../../lib/setcursor":446,"../../lib/svg_text_utils":450,"../../plots/cartesian/axes":473,"../../plots/cartesian/axis_defaults":475,"../../plots/cartesian/layout_attributes":485,"../../plots/cartesian/position_defaults":488,"../../plots/plots":515,"../../registry":524,"../color":304,"../colorscale/helpers":315,"../dragelement":322,"../drawing":325,"../titles":392,"./constants":306,d3:74,tinycolor2:693}],309:[function(t,e,r){"use strict";var n=t("../../lib");e.exports=function(t){return n.isPlainObject(t.colorbar)}},{"../../lib":426}],310:[function(t,e,r){"use strict";e.exports={moduleType:"component",name:"colorbar",attributes:t("./attributes"),supplyDefaults:t("./defaults"),draw:t("./draw").draw,hasColorbar:t("./has_colorbar")}},{"./attributes":305,"./defaults":307,"./draw":308,"./has_colorbar":309}],311:[function(t,e,r){"use strict";var n=t("../colorbar/attributes"),i=t("../../lib/regex").counter,o=t("./scales.js").scales;Object.keys(o);function a(t){return"`"+t+"`"}e.exports=function(t,e){t=t||"";var r,s=(e=e||{}).cLetter||"c",l=("onlyIfNumerical"in e?e.onlyIfNumerical:Boolean(t),"noScale"in e?e.noScale:"marker.line"===t),g="showScaleDflt"in e?e.showScaleDflt:"z"===s,c="string"==typeof e.colorscaleDflt?o[e.colorscaleDflt]:null,u=e.editTypeOverride||"",h=t?t+".":"";"colorAttr"in e?(r=e.colorAttr,e.colorAttr):a(h+(r={z:"z",c:"color"}[s]));var d=s+"auto",A=s+"min",f=s+"max",C=s+"mid",p=(a(h+d),a(h+A),a(h+f),{});p[A]=p[f]=void 0;var I={};I[d]=!1;var v={};return"color"===r&&(v.color={valType:"color",arrayOk:!0,editType:u||"style"},e.anim&&(v.color.anim=!0)),v[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:p},v[A]={valType:"number",dflt:null,editType:u||"plot",impliedEdits:I},v[f]={valType:"number",dflt:null,editType:u||"plot",impliedEdits:I},v[C]={valType:"number",dflt:null,editType:"calc",impliedEdits:p},v.colorscale={valType:"colorscale",editType:"calc",dflt:c,impliedEdits:{autocolorscale:!1}},v.autocolorscale={valType:"boolean",dflt:!1!==e.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},v.reversescale={valType:"boolean",dflt:!1,editType:"plot"},l||(v.showscale={valType:"boolean",dflt:g,editType:"calc"},v.colorbar=n),e.noColorAxis||(v.coloraxis={valType:"subplotid",regex:i("coloraxis"),dflt:null,editType:"calc"}),v}},{"../../lib/regex":442,"../colorbar/attributes":305,"./scales.js":319}],312:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../../lib"),o=t("./helpers").extractOpts;e.exports=function(t,e,r){var a,s=t._fullLayout,l=r.vals,g=r.containerStr,c=g?i.nestedProperty(e,g).get():e,u=o(c),h=!1!==u.auto,d=u.min,A=u.max,f=u.mid,C=function(){return i.aggNums(Math.min,null,l)},p=function(){return i.aggNums(Math.max,null,l)};(void 0===d?d=C():h&&(d=c._colorAx&&n(d)?Math.min(d,C()):C()),void 0===A?A=p():h&&(A=c._colorAx&&n(A)?Math.max(A,p()):p()),h&&void 0!==f&&(A-f>f-d?d=f-(A-f):A-f<f-d&&(A=f+(f-d))),d===A&&(d-=.5,A+=.5),u._sync("min",d),u._sync("max",A),u.autocolorscale)&&(a=d*A<0?s.colorscale.diverging:d>=0?s.colorscale.sequential:s.colorscale.sequentialminus,u._sync("colorscale",a))}},{"../../lib":426,"./helpers":315,"fast-isnumeric":145}],313:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("./helpers").hasColorscale,o=t("./helpers").extractOpts;e.exports=function(t,e){function r(t,e){var r=t["_"+e];void 0!==r&&(t[e]=r)}function a(t,i){var a=i.container?n.nestedProperty(t,i.container).get():t;if(a)if(a.coloraxis)a._colorAx=e[a.coloraxis];else{var s=o(a),l=s.auto;(l||void 0===s.min)&&r(a,i.min),(l||void 0===s.max)&&r(a,i.max),s.autocolorscale&&r(a,"colorscale")}}for(var s=0;s<t.length;s++){var l=t[s],g=l._module.colorbar;if(g)if(Array.isArray(g))for(var c=0;c<g.length;c++)a(l,g[c]);else a(l,g);i(l,"marker.line")&&a(l,{container:"marker.line",min:"cmin",max:"cmax"})}for(var u in e._colorAxes)a(e[u],{min:"cmin",max:"cmax"})}},{"../../lib":426,"./helpers":315}],314:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../../lib"),o=t("../colorbar/has_colorbar"),a=t("../colorbar/defaults"),s=t("./scales").isValid,l=t("../../registry").traceIs;function g(t,e){var r=e.slice(0,e.length-1);return e?i.nestedProperty(t,r).get()||{}:t}e.exports=function t(e,r,c,u,h){var d=h.prefix,A=h.cLetter,f="_module"in r,C=g(e,d),p=g(r,d),I=g(r._template||{},d)||{},v=function(){return delete e.coloraxis,delete r.coloraxis,t(e,r,c,u,h)};if(f){var m=c._colorAxes||{},y=u(d+"coloraxis");if(y){var b=l(r,"contour")&&i.nestedProperty(r,"contours.coloring").get()||"heatmap",x=m[y];return void(x?(x[2].push(v),x[0]!==b&&(x[0]=!1,i.warn(["Ignoring coloraxis:",y,"setting","as it is linked to incompatible colorscales."].join(" ")))):m[y]=[b,r,[v]])}}var _=C[A+"min"],w=C[A+"max"],k=n(_)&&n(w)&&_<w;u(d+A+"auto",!k)?u(d+A+"mid"):(u(d+A+"min"),u(d+A+"max"));var T,M,E=C.colorscale,O=I.colorscale;(void 0!==E&&(T=!s(E)),void 0!==O&&(T=!s(O)),u(d+"autocolorscale",T),u(d+"colorscale"),u(d+"reversescale"),"marker.line."!==d)&&(d&&f&&(M=o(C)),u(d+"showscale",M)&&(d&&I&&(p._template=I),a(C,p,c)))}},{"../../lib":426,"../../registry":524,"../colorbar/defaults":307,"../colorbar/has_colorbar":309,"./scales":319,"fast-isnumeric":145}],315:[function(t,e,r){"use strict";var n=t("d3"),i=t("tinycolor2"),o=t("fast-isnumeric"),a=t("../../lib"),s=t("../color"),l=t("./scales").isValid;var g=["showscale","autocolorscale","colorscale","reversescale","colorbar"],c=["min","max","mid","auto"];function u(t){var e,r,n,i=t._colorAx,o=i||t,a={};for(r=0;r<g.length;r++)a[n=g[r]]=o[n];if(i)for(e="c",r=0;r<c.length;r++)a[n=c[r]]=o["c"+n];else{var s;for(r=0;r<c.length;r++)(s="c"+(n=c[r]))in o?a[n]=o[s]:(s="z"+n)in o&&(a[n]=o[s]);e=s.charAt(0)}return a._sync=function(t,r){var n=-1!==c.indexOf(t)?e+t:t;o[n]=o["_"+n]=r},a}function h(t){for(var e=u(t),r=e.min,n=e.max,i=e.reversescale?d(e.colorscale):e.colorscale,o=i.length,a=new Array(o),s=new Array(o),l=0;l<o;l++){var g=i[l];a[l]=r+g[0]*(n-r),s[l]=g[1]}return{domain:a,range:s}}function d(t){for(var e=t.length,r=new Array(e),n=e-1,i=0;n>=0;n--,i++){var o=t[n];r[i]=[1-o[0],o[1]]}return r}function A(t,e){e=e||{};for(var r=t.domain,a=t.range,l=a.length,g=new Array(l),c=0;c<l;c++){var u=i(a[c]).toRgb();g[c]=[u.r,u.g,u.b,u.a]}var h,d=n.scale.linear().domain(r).range(g).clamp(!0),A=e.noNumericCheck,C=e.returnArray;return(h=A&&C?d:A?function(t){return f(d(t))}:C?function(t){return o(t)?d(t):i(t).isValid()?t:s.defaultLine}:function(t){return o(t)?f(d(t)):i(t).isValid()?t:s.defaultLine}).domain=d.domain,h.range=function(){return a},h}function f(t){var e={r:t[0],g:t[1],b:t[2],a:t[3]};return i(e).toRgbString()}e.exports={hasColorscale:function(t,e,r){var n=e?a.nestedProperty(t,e).get()||{}:t,i=n[r||"color"],s=!1;if(a.isArrayOrTypedArray(i))for(var g=0;g<i.length;g++)if(o(i[g])){s=!0;break}return a.isPlainObject(n)&&(s||!0===n.showscale||o(n.cmin)&&o(n.cmax)||l(n.colorscale)||a.isPlainObject(n.colorbar))},extractOpts:u,extractScale:h,flipScale:d,makeColorScaleFunc:A,makeColorScaleFuncFromTrace:function(t,e){return A(h(t),e)}}},{"../../lib":426,"../color":304,"./scales":319,d3:74,"fast-isnumeric":145,tinycolor2:693}],316:[function(t,e,r){"use strict";var n=t("./scales"),i=t("./helpers");e.exports={moduleType:"component",name:"colorscale",attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyLayoutDefaults:t("./layout_defaults"),handleDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc"),scales:n.scales,defaultScale:n.defaultScale,getScale:n.get,isValidScale:n.isValid,hasColorscale:i.hasColorscale,extractOpts:i.extractOpts,extractScale:i.extractScale,flipScale:i.flipScale,makeColorScaleFunc:i.makeColorScaleFunc,makeColorScaleFuncFromTrace:i.makeColorScaleFuncFromTrace}},{"./attributes":311,"./calc":312,"./cross_trace_defaults":313,"./defaults":314,"./helpers":315,"./layout_attributes":317,"./layout_defaults":318,"./scales":319}],317:[function(t,e,r){"use strict";var n=t("../../lib/extend").extendFlat,i=t("./attributes"),o=t("./scales").scales;e.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:o.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:o.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:o.RdBu,editType:"calc"}},coloraxis:n({_isSubplotObj:!0,editType:"calc"},i("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":419,"./attributes":311,"./scales":319}],318:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../plot_api/plot_template"),o=t("./layout_attributes"),a=t("./defaults");e.exports=function(t,e){function r(r,i){return n.coerce(t,e,o,r,i)}r("colorscale.sequential"),r("colorscale.sequentialminus"),r("colorscale.diverging");var s,l,g=e._colorAxes;function c(t,e){return n.coerce(s,l,o.coloraxis,t,e)}for(var u in g){var h=g[u];if(h[0])s=t[u]||{},(l=i.newContainer(e,u,"coloraxis"))._name=u,a(s,l,e,c,{prefix:"",cLetter:"c"});else{for(var d=0;d<h[2].length;d++)h[2][d]();delete e._colorAxes[u]}}}},{"../../lib":426,"../../plot_api/plot_template":463,"./defaults":314,"./layout_attributes":317}],319:[function(t,e,r){"use strict";var n=t("tinycolor2"),i={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},o=i.RdBu;function a(t){var e=0;if(!Array.isArray(t)||t.length<2)return!1;if(!t[0]||!t[t.length-1])return!1;if(0!=+t[0][0]||1!=+t[t.length-1][0])return!1;for(var r=0;r<t.length;r++){var i=t[r];if(2!==i.length||+i[0]<e||!n(i[1]).isValid())return!1;e=+i[0]}return!0}e.exports={scales:i,defaultScale:o,get:function(t,e){if(e||(e=o),!t)return e;function r(){try{t=i[t]||JSON.parse(t)}catch(r){t=e}}return"string"==typeof t&&(r(),"string"==typeof t&&r()),a(t)?t:e},isValid:function(t){return void 0!==i[t]||a(t)}}},{tinycolor2:693}],320:[function(t,e,r){"use strict";e.exports=function(t,e,r,n,i){var o=(t-r)/(n-r),a=o+e/(n-r),s=(o+a)/2;return"left"===i||"bottom"===i?o:"center"===i||"middle"===i?s:"right"===i||"top"===i?a:o<2/3-s?o:a>4/3-s?a:s}},{}],321:[function(t,e,r){"use strict";var n=t("../../lib"),i=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];e.exports=function(t,e,r,o){return t="left"===r?0:"center"===r?1:"right"===r?2:n.constrain(Math.floor(3*t),0,2),e="bottom"===o?0:"middle"===o?1:"top"===o?2:n.constrain(Math.floor(3*e),0,2),i[e][t]}},{"../../lib":426}],322:[function(t,e,r){"use strict";var n=t("mouse-event-offset"),i=t("has-hover"),o=t("has-passive-events"),a=t("../../lib").removeElement,s=t("../../plots/cartesian/constants"),l=e.exports={};l.align=t("./align"),l.getCursor=t("./cursor");var g=t("./unhover");function c(){var t=document.createElement("div");t.className="dragcover";var e=t.style;return e.position="fixed",e.left=0,e.right=0,e.top=0,e.bottom=0,e.zIndex=999999999,e.background="none",document.body.appendChild(t),t}function u(t){return n(t.changedTouches?t.changedTouches[0]:t,document.body)}l.unhover=g.wrapped,l.unhoverRaw=g.raw,l.init=function(t){var e,r,n,g,h,d,A,f,C=t.gd,p=1,I=C._context.doubleClickDelay,v=t.element;C._mouseDownTime||(C._mouseDownTime=0),v.style.pointerEvents="all",v.onmousedown=y,o?(v._ontouchstart&&v.removeEventListener("touchstart",v._ontouchstart),v._ontouchstart=y,v.addEventListener("touchstart",y,{passive:!1})):v.ontouchstart=y;var m=t.clampFn||function(t,e,r){return Math.abs(t)<r&&(t=0),Math.abs(e)<r&&(e=0),[t,e]};function y(o){C._dragged=!1,C._dragging=!0;var a=u(o);e=a[0],r=a[1],A=o.target,d=o,f=2===o.buttons||o.ctrlKey,void 0===o.clientX&&void 0===o.clientY&&(o.clientX=e,o.clientY=r),(n=(new Date).getTime())-C._mouseDownTime<I?p+=1:(p=1,C._mouseDownTime=n),t.prepFn&&t.prepFn(o,e,r),i&&!f?(h=c()).style.cursor=window.getComputedStyle(v).cursor:i||(h=document,g=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(v).cursor),document.addEventListener("mouseup",x),document.addEventListener("touchend",x),!1!==t.dragmode&&(o.preventDefault(),document.addEventListener("mousemove",b),document.addEventListener("touchmove",b,{passive:!1}))}function b(n){n.preventDefault();var i=u(n),o=t.minDrag||s.MINDRAG,a=m(i[0]-e,i[1]-r,o),g=a[0],c=a[1];(g||c)&&(C._dragged=!0,l.unhover(C)),C._dragged&&t.moveFn&&!f&&(C._dragdata={element:v,dx:g,dy:c},t.moveFn(g,c))}function x(e){if(delete C._dragdata,!1!==t.dragmode&&(e.preventDefault(),document.removeEventListener("mousemove",b),document.removeEventListener("touchmove",b)),document.removeEventListener("mouseup",x),document.removeEventListener("touchend",x),i?a(h):g&&(h.documentElement.style.cursor=g,g=null),C._dragging){if(C._dragging=!1,(new Date).getTime()-C._mouseDownTime>I&&(p=Math.max(p-1,1)),C._dragged)t.doneFn&&t.doneFn();else if(t.clickFn&&t.clickFn(p,d),!f){var r;try{r=new MouseEvent("click",e)}catch(t){var n=u(e);(r=document.createEvent("MouseEvents")).initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,n[0],n[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}A.dispatchEvent(r)}C._dragging=!1,C._dragged=!1}else C._dragged=!1}},l.coverSlip=c},{"../../lib":426,"../../plots/cartesian/constants":479,"./align":320,"./cursor":321,"./unhover":323,"has-hover":229,"has-passive-events":230,"mouse-event-offset":255}],323:[function(t,e,r){"use strict";var n=t("../../lib/events"),i=t("../../lib/throttle"),o=t("../../lib/dom").getGraphDiv,a=t("../fx/constants"),s=e.exports={};s.wrapped=function(t,e,r){(t=o(t))._fullLayout&&i.clear(t._fullLayout._uid+a.HOVERID),s.raw(t,e,r)},s.raw=function(t,e){var r=t._fullLayout,i=t._hoverdata;e||(e={}),e.target&&!1===n.triggerHandler(t,"plotly_beforehover",e)||(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,e.target&&i&&t.emit("plotly_unhover",{event:e,points:i}))}},{"../../lib/dom":417,"../../lib/events":418,"../../lib/throttle":451,"../fx/constants":337}],324:[function(t,e,r){"use strict";r.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},{}],325:[function(t,e,r){"use strict";var n=t("d3"),i=t("fast-isnumeric"),o=t("tinycolor2"),a=t("../../registry"),s=t("../color"),l=t("../colorscale"),g=t("../../lib"),c=t("../../lib/svg_text_utils"),u=t("../../constants/xmlns_namespaces"),h=t("../../constants/alignment").LINE_SPACING,d=t("../../constants/interactions").DESELECTDIM,A=t("../../traces/scatter/subtypes"),f=t("../../traces/scatter/make_bubble_size_func"),C=t("../../components/fx/helpers").appendArrayPointValue,p=e.exports={};p.font=function(t,e,r,n){g.isPlainObject(e)&&(n=e.color,r=e.size,e=e.family),e&&t.style("font-family",e),r+1&&t.style("font-size",r+"px"),n&&t.call(s.fill,n)},p.setPosition=function(t,e,r){t.attr("x",e).attr("y",r)},p.setSize=function(t,e,r){t.attr("width",e).attr("height",r)},p.setRect=function(t,e,r,n,i){t.call(p.setPosition,e,r).call(p.setSize,n,i)},p.translatePoint=function(t,e,r,n){var o=r.c2p(t.x),a=n.c2p(t.y);return!!(i(o)&&i(a)&&e.node())&&("text"===e.node().nodeName?e.attr("x",o).attr("y",a):e.attr("transform","translate("+o+","+a+")"),!0)},p.translatePoints=function(t,e,r){t.each(function(t){var i=n.select(this);p.translatePoint(t,i,e,r)})},p.hideOutsideRangePoint=function(t,e,r,n,i,o){e.attr("display",r.isPtWithinRange(t,i)&&n.isPtWithinRange(t,o)?null:"none")},p.hideOutsideRangePoints=function(t,e){if(e._hasClipOnAxisFalse){var r=e.xaxis,i=e.yaxis;t.each(function(e){var o=e[0].trace,s=o.xcalendar,l=o.ycalendar,g=a.traceIs(o,"bar-like")?".bartext":".point,.textpoint";t.selectAll(g).each(function(t){p.hideOutsideRangePoint(t,n.select(this),r,i,s,l)})})}},p.crispRound=function(t,e,r){return e&&i(e)?t._context.staticPlot?e:e<1?1:Math.round(e):r||0},p.singleLineStyle=function(t,e,r,n,i){e.style("fill","none");var o=(((t||[])[0]||{}).trace||{}).line||{},a=r||o.width||0,l=i||o.dash||"";s.stroke(e,n||o.color),p.dashLine(e,l,a)},p.lineGroupStyle=function(t,e,r,i){t.style("fill","none").each(function(t){var o=(((t||[])[0]||{}).trace||{}).line||{},a=e||o.width||0,l=i||o.dash||"";n.select(this).call(s.stroke,r||o.color).call(p.dashLine,l,a)})},p.dashLine=function(t,e,r){r=+r||0,e=p.dashStyle(e,r),t.style({"stroke-dasharray":e,"stroke-width":r+"px"})},p.dashStyle=function(t,e){e=+e||1;var r=Math.max(e,3);return"solid"===t?t="":"dot"===t?t=r+"px,"+r+"px":"dash"===t?t=3*r+"px,"+3*r+"px":"longdash"===t?t=5*r+"px,"+5*r+"px":"dashdot"===t?t=3*r+"px,"+r+"px,"+r+"px,"+r+"px":"longdashdot"===t&&(t=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"),t},p.singleFillStyle=function(t){var e=(((n.select(t.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;e&&t.call(s.fill,e)},p.fillGroupStyle=function(t){t.style("stroke-width",0).each(function(t){var e=n.select(this);t[0].trace&&e.call(s.fill,t[0].trace.fillcolor)})};var I=t("./symbol_defs");p.symbolNames=[],p.symbolFuncs=[],p.symbolNeedLines={},p.symbolNoDot={},p.symbolNoFill={},p.symbolList=[],Object.keys(I).forEach(function(t){var e=I[t],r=e.n;p.symbolList.push(r,t,r+100,t+"-open"),p.symbolNames[r]=t,p.symbolFuncs[r]=e.f,e.needLine&&(p.symbolNeedLines[r]=!0),e.noDot?p.symbolNoDot[r]=!0:p.symbolList.push(r+200,t+"-dot",r+300,t+"-open-dot"),e.noFill&&(p.symbolNoFill[r]=!0)});var v=p.symbolNames.length,m="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";function y(t,e){var r=t%100;return p.symbolFuncs[r](e)+(t>=200?m:"")}p.symbolNumber=function(t){if("string"==typeof t){var e=0;t.indexOf("-open")>0&&(e=100,t=t.replace("-open","")),t.indexOf("-dot")>0&&(e+=200,t=t.replace("-dot","")),(t=p.symbolNames.indexOf(t))>=0&&(t+=e)}return t%100>=v||t>=400?0:Math.floor(Math.max(t,0))};var b={x1:1,x2:0,y1:0,y2:0},x={x1:0,x2:0,y1:1,y2:0},_=n.format("~.1f"),w={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:b},horizontalreversed:{node:"linearGradient",attrs:b,reversed:!0},vertical:{node:"linearGradient",attrs:x},verticalreversed:{node:"linearGradient",attrs:x,reversed:!0}};p.gradient=function(t,e,r,i,a,l){for(var c=a.length,u=w[i],h=new Array(c),d=0;d<c;d++)u.reversed?h[c-1-d]=[_(100*(1-a[d][0])),a[d][1]]:h[d]=[_(100*a[d][0]),a[d][1]];var A=e._fullLayout,f="g"+A._uid+"-"+r,C=A._defs.select(".gradients").selectAll("#"+f).data([i+h.join(";")],g.identity);C.exit().remove(),C.enter().append(u.node).each(function(){var t=n.select(this);u.attrs&&t.attr(u.attrs),t.attr("id",f);var e=t.selectAll("stop").data(h);e.exit().remove(),e.enter().append("stop"),e.each(function(t){var e=o(t[1]);n.select(this).attr({offset:t[0]+"%","stop-color":s.tinyRGB(e),"stop-opacity":e.getAlpha()})})}),t.style(l,P(f,e)).style(l+"-opacity",null);var p=function(t){return"."+t.attr("class").replace(/\s/g,".")},I=p(n.select(t.node().parentNode))+">"+p(t);A._gradientUrlQueryParts[I]=1},p.initGradients=function(t){var e=t._fullLayout;g.ensureSingle(e._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),e._gradientUrlQueryParts={}},p.pointStyle=function(t,e,r){if(t.size()){var i=p.makePointStyleFns(e);t.each(function(t){p.singlePointStyle(t,n.select(this),e,i,r)})}},p.singlePointStyle=function(t,e,r,n,i){var o=r.marker,a=o.line;if(e.style("opacity",n.selectedOpacityFn?n.selectedOpacityFn(t):void 0===t.mo?o.opacity:t.mo),n.ms2mrc){var l;l="various"===t.ms||"various"===o.size?3:n.ms2mrc(t.ms),t.mrc=l,n.selectedSizeFn&&(l=t.mrc=n.selectedSizeFn(t));var c=p.symbolNumber(t.mx||o.symbol)||0;t.om=c%200>=100,e.attr("d",y(c,l))}var u,h,d,A=!1;if(t.so)d=a.outlierwidth,h=a.outliercolor,u=o.outliercolor;else{var f=(a||{}).width;d=(t.mlw+1||f+1||(t.trace?(t.trace.marker.line||{}).width:0)+1)-1||0,h="mlc"in t?t.mlcc=n.lineScale(t.mlc):g.isArrayOrTypedArray(a.color)?s.defaultLine:a.color,g.isArrayOrTypedArray(o.color)&&(u=s.defaultLine,A=!0),u="mc"in t?t.mcc=n.markerScale(t.mc):o.color||"rgba(0,0,0,0)",n.selectedColorFn&&(u=n.selectedColorFn(t))}if(t.om)e.call(s.stroke,u).style({"stroke-width":(d||1)+"px",fill:"none"});else{e.style("stroke-width",(t.isBlank?0:d)+"px");var C=o.gradient,I=t.mgt;if(I?A=!0:I=C&&C.type,Array.isArray(I)&&(I=I[0],w[I]||(I=0)),I&&"none"!==I){var v=t.mgc;v?A=!0:v=C.color;var m=r.uid;A&&(m+="-"+t.i),p.gradient(e,i,m,I,[[0,v],[1,u]],"fill")}else s.fill(e,u);d&&s.stroke(e,h)}},p.makePointStyleFns=function(t){var e={},r=t.marker;return e.markerScale=p.tryColorscale(r,""),e.lineScale=p.tryColorscale(r,"line"),a.traceIs(t,"symbols")&&(e.ms2mrc=A.isBubble(t)?f(t):function(){return(r.size||6)/2}),t.selectedpoints&&g.extendFlat(e,p.makeSelectedPointStyleFns(t)),e},p.makeSelectedPointStyleFns=function(t){var e={},r=t.selected||{},n=t.unselected||{},i=t.marker||{},o=r.marker||{},s=n.marker||{},l=i.opacity,c=o.opacity,u=s.opacity,h=void 0!==c,A=void 0!==u;(g.isArrayOrTypedArray(l)||h||A)&&(e.selectedOpacityFn=function(t){var e=void 0===t.mo?i.opacity:t.mo;return t.selected?h?c:e:A?u:d*e});var f=i.color,C=o.color,p=s.color;(C||p)&&(e.selectedColorFn=function(t){var e=t.mcc||f;return t.selected?C||e:p||e});var I=i.size,v=o.size,m=s.size,y=void 0!==v,b=void 0!==m;return a.traceIs(t,"symbols")&&(y||b)&&(e.selectedSizeFn=function(t){var e=t.mrc||I/2;return t.selected?y?v/2:e:b?m/2:e}),e},p.makeSelectedTextStyleFns=function(t){var e={},r=t.selected||{},n=t.unselected||{},i=t.textfont||{},o=r.textfont||{},a=n.textfont||{},l=i.color,g=o.color,c=a.color;return e.selectedTextColorFn=function(t){var e=t.tc||l;return t.selected?g||e:c||(g?e:s.addOpacity(e,d))},e},p.selectedPointStyle=function(t,e){if(t.size()&&e.selectedpoints){var r=p.makeSelectedPointStyleFns(e),i=e.marker||{},o=[];r.selectedOpacityFn&&o.push(function(t,e){t.style("opacity",r.selectedOpacityFn(e))}),r.selectedColorFn&&o.push(function(t,e){s.fill(t,r.selectedColorFn(e))}),r.selectedSizeFn&&o.push(function(t,e){var n=e.mx||i.symbol||0,o=r.selectedSizeFn(e);t.attr("d",y(p.symbolNumber(n),o)),e.mrc2=o}),o.length&&t.each(function(t){for(var e=n.select(this),r=0;r<o.length;r++)o[r](e,t)})}},p.tryColorscale=function(t,e){var r=e?g.nestedProperty(t,e).get():t;if(r){var n=r.color;if((r.colorscale||r._colorAx)&&g.isArrayOrTypedArray(n))return l.makeColorScaleFuncFromTrace(r)}return g.identity};var k={start:1,end:-1,middle:0,bottom:1,top:-1};function T(t,e,r,i){var o=n.select(t.node().parentNode),a=-1!==e.indexOf("top")?"top":-1!==e.indexOf("bottom")?"bottom":"middle",s=-1!==e.indexOf("left")?"end":-1!==e.indexOf("right")?"start":"middle",l=i?i/.8+1:0,g=(c.lineCount(t)-1)*h+1,u=k[s]*l,d=.75*r+k[a]*l+(k[a]-1)*g*r/2;t.attr("text-anchor",s),o.attr("transform","translate("+u+","+d+")")}function M(t,e){var r=t.ts||e.textfont.size;return i(r)&&r>0?r:0}p.textPointStyle=function(t,e,r){if(t.size()){var i;if(e.selectedpoints){var o=p.makeSelectedTextStyleFns(e);i=o.selectedTextColorFn}var a=e.texttemplate,s=r._fullLayout;t.each(function(t){var o=n.select(this),l=a?g.extractOption(t,e,"txt","texttemplate"):g.extractOption(t,e,"tx","text");if(l||0===l){if(a){var u=e._module.formatLabels?e._module.formatLabels(t,e,s):{},h={};C(h,e,t.i);var d=e._meta||{};l=g.texttemplateString(l,u,s._d3locale,h,t,d)}var A=t.tp||e.textposition,f=M(t,e),I=i?i(t):t.tc||e.textfont.color;o.call(p.font,t.tf||e.textfont.family,f,I).text(l).call(c.convertToTspans,r).call(T,A,f,t.mrc)}else o.remove()})}},p.selectedTextStyle=function(t,e){if(t.size()&&e.selectedpoints){var r=p.makeSelectedTextStyleFns(e);t.each(function(t){var i=n.select(this),o=r.selectedTextColorFn(t),a=t.tp||e.textposition,l=M(t,e);s.fill(i,o),T(i,a,l,t.mrc2||t.mrc)})}};var E=.5;function O(t,e,r,i){var o=t[0]-e[0],a=t[1]-e[1],s=r[0]-e[0],l=r[1]-e[1],g=Math.pow(o*o+a*a,E/2),c=Math.pow(s*s+l*l,E/2),u=(c*c*o-g*g*s)*i,h=(c*c*a-g*g*l)*i,d=3*c*(g+c),A=3*g*(g+c);return[[n.round(e[0]+(d&&u/d),2),n.round(e[1]+(d&&h/d),2)],[n.round(e[0]-(A&&u/A),2),n.round(e[1]-(A&&h/A),2)]]}p.smoothopen=function(t,e){if(t.length<3)return"M"+t.join("L");var r,n="M"+t[0],i=[];for(r=1;r<t.length-1;r++)i.push(O(t[r-1],t[r],t[r+1],e));for(n+="Q"+i[0][0]+" "+t[1],r=2;r<t.length-1;r++)n+="C"+i[r-2][1]+" "+i[r-1][0]+" "+t[r];return n+="Q"+i[t.length-3][1]+" "+t[t.length-1]},p.smoothclosed=function(t,e){if(t.length<3)return"M"+t.join("L")+"Z";var r,n="M"+t[0],i=t.length-1,o=[O(t[i],t[0],t[1],e)];for(r=1;r<i;r++)o.push(O(t[r-1],t[r],t[r+1],e));for(o.push(O(t[i-1],t[i],t[0],e)),r=1;r<=i;r++)n+="C"+o[r-1][1]+" "+o[r][0]+" "+t[r];return n+="C"+o[i][1]+" "+o[0][0]+" "+t[0]+"Z"};var S={hv:function(t,e){return"H"+n.round(e[0],2)+"V"+n.round(e[1],2)},vh:function(t,e){return"V"+n.round(e[1],2)+"H"+n.round(e[0],2)},hvh:function(t,e){return"H"+n.round((t[0]+e[0])/2,2)+"V"+n.round(e[1],2)+"H"+n.round(e[0],2)},vhv:function(t,e){return"V"+n.round((t[1]+e[1])/2,2)+"H"+n.round(e[0],2)+"V"+n.round(e[1],2)}},R=function(t,e){return"L"+n.round(e[0],2)+","+n.round(e[1],2)};p.steps=function(t){var e=S[t]||R;return function(t){for(var r="M"+n.round(t[0][0],2)+","+n.round(t[0][1],2),i=1;i<t.length;i++)r+=e(t[i-1],t[i]);return r}},p.makeTester=function(){var t=g.ensureSingleById(n.select("body"),"svg","js-plotly-tester",function(t){t.attr(u.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),e=g.ensureSingle(t,"path","js-reference-point",function(t){t.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});p.tester=t,p.testref=e},p.savedBBoxes={};var D=0;function L(t){var e=t.getAttribute("data-unformatted");if(null!==e)return e+t.getAttribute("data-math")+t.getAttribute("text-anchor")+t.getAttribute("style")}function P(t,e){if(!t)return null;var r=e._context;return"url('"+(r._exportedPlot?"":r._baseUrl||"")+"#"+t+"')"}p.bBox=function(t,e,r){var i,o,a;if(r||(r=L(t)),r){if(i=p.savedBBoxes[r])return g.extendFlat({},i)}else if(1===t.childNodes.length){var s=t.childNodes[0];if(r=L(s)){var l=+s.getAttribute("x")||0,u=+s.getAttribute("y")||0,h=s.getAttribute("transform");if(!h){var d=p.bBox(s,!1,r);return l&&(d.left+=l,d.right+=l),u&&(d.top+=u,d.bottom+=u),d}if(r+="~"+l+"~"+u+"~"+h,i=p.savedBBoxes[r])return g.extendFlat({},i)}}e?o=t:(a=p.tester.node(),o=t.cloneNode(!0),a.appendChild(o)),n.select(o).attr("transform",null).call(c.positionText,0,0);var A=o.getBoundingClientRect(),f=p.testref.node().getBoundingClientRect();e||a.removeChild(o);var C={height:A.height,width:A.width,left:A.left-f.left,top:A.top-f.top,right:A.right-f.left,bottom:A.bottom-f.top};return D>=1e4&&(p.savedBBoxes={},D=0),r&&(p.savedBBoxes[r]=C),D++,g.extendFlat({},C)},p.setClipUrl=function(t,e,r){t.attr("clip-path",P(e,r))},p.getTranslate=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(t,e,r){return[e,r].join(" ")}).split(" ");return{x:+e[0]||0,y:+e[1]||0}},p.setTranslate=function(t,e,r){var n=t.attr?"attr":"getAttribute",i=t.attr?"attr":"setAttribute",o=t[n]("transform")||"";return e=e||0,r=r||0,o=o.replace(/(\btranslate\(.*?\);?)/,"").trim(),o=(o+=" translate("+e+", "+r+")").trim(),t[i]("transform",o),o},p.getScale=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(t,e,r){return[e,r].join(" ")}).split(" ");return{x:+e[0]||1,y:+e[1]||1}},p.setScale=function(t,e,r){var n=t.attr?"attr":"getAttribute",i=t.attr?"attr":"setAttribute",o=t[n]("transform")||"";return e=e||1,r=r||1,o=o.replace(/(\bscale\(.*?\);?)/,"").trim(),o=(o+=" scale("+e+", "+r+")").trim(),t[i]("transform",o),o};var N=/\s*sc.*/;p.setPointGroupScale=function(t,e,r){if(e=e||1,r=r||1,t){var n=1===e&&1===r?"":" scale("+e+","+r+")";t.each(function(){var t=(this.getAttribute("transform")||"").replace(N,"");t=(t+=n).trim(),this.setAttribute("transform",t)})}};var z=/translate\([^)]*\)\s*$/;p.setTextPointsScale=function(t,e,r){t&&t.each(function(){var t,i=n.select(this),o=i.select("text");if(o.node()){var a=parseFloat(o.attr("x")||0),s=parseFloat(o.attr("y")||0),l=(i.attr("transform")||"").match(z);t=1===e&&1===r?[]:["translate("+a+","+s+")","scale("+e+","+r+")","translate("+-a+","+-s+")"],l&&t.push(l),i.attr("transform",t.join(" "))}})}},{"../../components/fx/helpers":339,"../../constants/alignment":399,"../../constants/interactions":403,"../../constants/xmlns_namespaces":405,"../../lib":426,"../../lib/svg_text_utils":450,"../../registry":524,"../../traces/scatter/make_bubble_size_func":604,"../../traces/scatter/subtypes":611,"../color":304,"../colorscale":316,"./symbol_defs":326,d3:74,"fast-isnumeric":145,tinycolor2:693}],326:[function(t,e,r){"use strict";var n=t("d3");e.exports={circle:{n:0,f:function(t){var e=n.round(t,2);return"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"}},square:{n:1,f:function(t){var e=n.round(t,2);return"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"}},diamond:{n:2,f:function(t){var e=n.round(1.3*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"Z"}},cross:{n:3,f:function(t){var e=n.round(.4*t,2),r=n.round(1.2*t,2);return"M"+r+","+e+"H"+e+"V"+r+"H-"+e+"V"+e+"H-"+r+"V-"+e+"H-"+e+"V-"+r+"H"+e+"V-"+e+"H"+r+"Z"}},x:{n:4,f:function(t){var e=n.round(.8*t/Math.sqrt(2),2),r="l"+e+","+e,i="l"+e+",-"+e,o="l-"+e+",-"+e,a="l-"+e+","+e;return"M0,"+e+r+i+o+i+o+a+o+a+r+a+r+"Z"}},"triangle-up":{n:5,f:function(t){var e=n.round(2*t/Math.sqrt(3),2);return"M-"+e+","+n.round(t/2,2)+"H"+e+"L0,-"+n.round(t,2)+"Z"}},"triangle-down":{n:6,f:function(t){var e=n.round(2*t/Math.sqrt(3),2);return"M-"+e+",-"+n.round(t/2,2)+"H"+e+"L0,"+n.round(t,2)+"Z"}},"triangle-left":{n:7,f:function(t){var e=n.round(2*t/Math.sqrt(3),2);return"M"+n.round(t/2,2)+",-"+e+"V"+e+"L-"+n.round(t,2)+",0Z"}},"triangle-right":{n:8,f:function(t){var e=n.round(2*t/Math.sqrt(3),2);return"M-"+n.round(t/2,2)+",-"+e+"V"+e+"L"+n.round(t,2)+",0Z"}},"triangle-ne":{n:9,f:function(t){var e=n.round(.6*t,2),r=n.round(1.2*t,2);return"M-"+r+",-"+e+"H"+e+"V"+r+"Z"}},"triangle-se":{n:10,f:function(t){var e=n.round(.6*t,2),r=n.round(1.2*t,2);return"M"+e+",-"+r+"V"+e+"H-"+r+"Z"}},"triangle-sw":{n:11,f:function(t){var e=n.round(.6*t,2),r=n.round(1.2*t,2);return"M"+r+","+e+"H-"+e+"V-"+r+"Z"}},"triangle-nw":{n:12,f:function(t){var e=n.round(.6*t,2),r=n.round(1.2*t,2);return"M-"+e+","+r+"V-"+e+"H"+r+"Z"}},pentagon:{n:13,f:function(t){var e=n.round(.951*t,2),r=n.round(.588*t,2),i=n.round(-t,2),o=n.round(-.309*t,2);return"M"+e+","+o+"L"+r+","+n.round(.809*t,2)+"H-"+r+"L-"+e+","+o+"L0,"+i+"Z"}},hexagon:{n:14,f:function(t){var e=n.round(t,2),r=n.round(t/2,2),i=n.round(t*Math.sqrt(3)/2,2);return"M"+i+",-"+r+"V"+r+"L0,"+e+"L-"+i+","+r+"V-"+r+"L0,-"+e+"Z"}},hexagon2:{n:15,f:function(t){var e=n.round(t,2),r=n.round(t/2,2),i=n.round(t*Math.sqrt(3)/2,2);return"M-"+r+","+i+"H"+r+"L"+e+",0L"+r+",-"+i+"H-"+r+"L-"+e+",0Z"}},octagon:{n:16,f:function(t){var e=n.round(.924*t,2),r=n.round(.383*t,2);return"M-"+r+",-"+e+"H"+r+"L"+e+",-"+r+"V"+r+"L"+r+","+e+"H-"+r+"L-"+e+","+r+"V-"+r+"Z"}},star:{n:17,f:function(t){var e=1.4*t,r=n.round(.225*e,2),i=n.round(.951*e,2),o=n.round(.363*e,2),a=n.round(.588*e,2),s=n.round(-e,2),l=n.round(-.309*e,2),g=n.round(.118*e,2),c=n.round(.809*e,2);return"M"+r+","+l+"H"+i+"L"+o+","+g+"L"+a+","+c+"L0,"+n.round(.382*e,2)+"L-"+a+","+c+"L-"+o+","+g+"L-"+i+","+l+"H-"+r+"L0,"+s+"Z"}},hexagram:{n:18,f:function(t){var e=n.round(.66*t,2),r=n.round(.38*t,2),i=n.round(.76*t,2);return"M-"+i+",0l-"+r+",-"+e+"h"+i+"l"+r+",-"+e+"l"+r+","+e+"h"+i+"l-"+r+","+e+"l"+r+","+e+"h-"+i+"l-"+r+","+e+"l-"+r+",-"+e+"h-"+i+"Z"}},"star-triangle-up":{n:19,f:function(t){var e=n.round(t*Math.sqrt(3)*.8,2),r=n.round(.8*t,2),i=n.round(1.6*t,2),o=n.round(4*t,2),a="A "+o+","+o+" 0 0 1 ";return"M-"+e+","+r+a+e+","+r+a+"0,-"+i+a+"-"+e+","+r+"Z"}},"star-triangle-down":{n:20,f:function(t){var e=n.round(t*Math.sqrt(3)*.8,2),r=n.round(.8*t,2),i=n.round(1.6*t,2),o=n.round(4*t,2),a="A "+o+","+o+" 0 0 1 ";return"M"+e+",-"+r+a+"-"+e+",-"+r+a+"0,"+i+a+e+",-"+r+"Z"}},"star-square":{n:21,f:function(t){var e=n.round(1.1*t,2),r=n.round(2*t,2),i="A "+r+","+r+" 0 0 1 ";return"M-"+e+",-"+e+i+"-"+e+","+e+i+e+","+e+i+e+",-"+e+i+"-"+e+",-"+e+"Z"}},"star-diamond":{n:22,f:function(t){var e=n.round(1.4*t,2),r=n.round(1.9*t,2),i="A "+r+","+r+" 0 0 1 ";return"M-"+e+",0"+i+"0,"+e+i+e+",0"+i+"0,-"+e+i+"-"+e+",0Z"}},"diamond-tall":{n:23,f:function(t){var e=n.round(.7*t,2),r=n.round(1.4*t,2);return"M0,"+r+"L"+e+",0L0,-"+r+"L-"+e+",0Z"}},"diamond-wide":{n:24,f:function(t){var e=n.round(1.4*t,2),r=n.round(.7*t,2);return"M0,"+r+"L"+e+",0L0,-"+r+"L-"+e+",0Z"}},hourglass:{n:25,f:function(t){var e=n.round(t,2);return"M"+e+","+e+"H-"+e+"L"+e+",-"+e+"H-"+e+"Z"},noDot:!0},bowtie:{n:26,f:function(t){var e=n.round(t,2);return"M"+e+","+e+"V-"+e+"L-"+e+","+e+"V-"+e+"Z"},noDot:!0},"circle-cross":{n:27,f:function(t){var e=n.round(t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(t){var e=n.round(t,2),r=n.round(t/Math.sqrt(2),2);return"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(t){var e=n.round(t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(t){var e=n.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(t){var e=n.round(1.3*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM0,-"+e+"V"+e+"M-"+e+",0H"+e},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(t){var e=n.round(1.3*t,2),r=n.round(.65*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM-"+r+",-"+r+"L"+r+","+r+"M-"+r+","+r+"L"+r+",-"+r},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(t){var e=n.round(1.4*t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(t){var e=n.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(t){var e=n.round(1.2*t,2),r=n.round(.85*t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(t){var e=n.round(t/2,2),r=n.round(t,2);return"M"+e+","+r+"V-"+r+"m-"+r+",0V"+r+"M"+r+","+e+"H-"+r+"m0,-"+r+"H"+r},needLine:!0,noFill:!0},"y-up":{n:37,f:function(t){var e=n.round(1.2*t,2),r=n.round(1.6*t,2),i=n.round(.8*t,2);return"M-"+e+","+i+"L0,0M"+e+","+i+"L0,0M0,-"+r+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(t){var e=n.round(1.2*t,2),r=n.round(1.6*t,2),i=n.round(.8*t,2);return"M-"+e+",-"+i+"L0,0M"+e+",-"+i+"L0,0M0,"+r+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(t){var e=n.round(1.2*t,2),r=n.round(1.6*t,2),i=n.round(.8*t,2);return"M"+i+","+e+"L0,0M"+i+",-"+e+"L0,0M-"+r+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(t){var e=n.round(1.2*t,2),r=n.round(1.6*t,2),i=n.round(.8*t,2);return"M-"+i+","+e+"L0,0M-"+i+",-"+e+"L0,0M"+r+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(t){var e=n.round(1.4*t,2);return"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(t){var e=n.round(1.4*t,2);return"M0,"+e+"V-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(t){var e=n.round(t,2);return"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(t){var e=n.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e},needLine:!0,noDot:!0,noFill:!0}}},{d3:74}],327:[function(t,e,r){"use strict";e.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],328:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../../registry"),o=t("../../plots/cartesian/axes"),a=t("../../lib"),s=t("./compute_error");function l(t,e,r,i){var l=e["error_"+i]||{},g=[];if(l.visible&&-1!==["linear","log"].indexOf(r.type)){for(var c=s(l),u=0;u<t.length;u++){var h=t[u],d=h.i;if(void 0===d)d=u;else if(null===d)continue;var A=h[i];if(n(r.c2l(A))){var f=c(A,d);if(n(f[0])&&n(f[1])){var C=h[i+"s"]=A-f[0],p=h[i+"h"]=A+f[1];g.push(C,p)}}}var I=r._id,v=e._extremes[I],m=o.findExtremes(r,g,a.extendFlat({tozero:v.opts.tozero},{padded:!0}));v.min=v.min.concat(m.min),v.max=v.max.concat(m.max)}}e.exports=function(t){for(var e=t.calcdata,r=0;r<e.length;r++){var n=e[r],a=n[0].trace;if(!0===a.visible&&i.traceIs(a,"errorBarsOK")){var s=o.getFromId(t,a.xaxis),g=o.getFromId(t,a.yaxis);l(n,a,s,"x"),l(n,a,g,"y")}}}},{"../../lib":426,"../../plots/cartesian/axes":473,"../../registry":524,"./compute_error":329,"fast-isnumeric":145}],329:[function(t,e,r){"use strict";function n(t,e){return"percent"===t?function(t){return Math.abs(t*e/100)}:"constant"===t?function(){return Math.abs(e)}:"sqrt"===t?function(t){return Math.sqrt(Math.abs(t))}:void 0}e.exports=function(t){var e=t.type,r=t.symmetric;if("data"===e){var i=t.array||[];if(r)return function(t,e){var r=+i[e];return[r,r]};var o=t.arrayminus||[];return function(t,e){var r=+i[e],n=+o[e];return isNaN(r)&&isNaN(n)?[NaN,NaN]:[n||0,r||0]}}var a=n(e,t.value),s=n(e,t.valueminus);return r||void 0===t.valueminus?function(t){var e=a(t);return[e,e]}:function(t){return[s(t),a(t)]}}},{}],330:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../../registry"),o=t("../../lib"),a=t("../../plot_api/plot_template"),s=t("./attributes");e.exports=function(t,e,r,l){var g="error_"+l.axis,c=a.newContainer(e,g),u=t[g]||{};function h(t,e){return o.coerce(u,c,s,t,e)}if(!1!==h("visible",void 0!==u.array||void 0!==u.value||"sqrt"===u.type)){var d=h("type","array"in u?"data":"percent"),A=!0;"sqrt"!==d&&(A=h("symmetric",!(("data"===d?"arrayminus":"valueminus")in u))),"data"===d?(h("array"),h("traceref"),A||(h("arrayminus"),h("tracerefminus"))):"percent"!==d&&"constant"!==d||(h("value"),A||h("valueminus"));var f="copy_"+l.inherit+"style";if(l.inherit)(e["error_"+l.inherit]||{}).visible&&h(f,!(u.color||n(u.thickness)||n(u.width)));l.inherit&&c[f]||(h("color",r),h("thickness"),h("width",i.traceIs(e,"gl3d")?0:4))}}},{"../../lib":426,"../../plot_api/plot_template":463,"../../registry":524,"./attributes":327,"fast-isnumeric":145}],331:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../plot_api/edit_types").overrideAll,o=t("./attributes"),a={error_x:n.extendFlat({},o),error_y:n.extendFlat({},o)};delete a.error_x.copy_zstyle,delete a.error_y.copy_zstyle,delete a.error_y.copy_ystyle;var s={error_x:n.extendFlat({},o),error_y:n.extendFlat({},o),error_z:n.extendFlat({},o)};delete s.error_x.copy_ystyle,delete s.error_y.copy_ystyle,delete s.error_z.copy_ystyle,delete s.error_z.copy_zstyle,e.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:a,bar:a,histogram:a,scatter3d:i(s,"calc","nested"),scattergl:i(a,"calc","nested")}},supplyDefaults:t("./defaults"),calc:t("./calc"),makeComputeError:t("./compute_error"),plot:t("./plot"),style:t("./style"),hoverInfo:function(t,e,r){(e.error_y||{}).visible&&(r.yerr=t.yh-t.y,e.error_y.symmetric||(r.yerrneg=t.y-t.ys));(e.error_x||{}).visible&&(r.xerr=t.xh-t.x,e.error_x.symmetric||(r.xerrneg=t.x-t.xs))}}},{"../../lib":426,"../../plot_api/edit_types":456,"./attributes":327,"./calc":328,"./compute_error":329,"./defaults":330,"./plot":332,"./style":333}],332:[function(t,e,r){"use strict";var n=t("d3"),i=t("fast-isnumeric"),o=t("../drawing"),a=t("../../traces/scatter/subtypes");e.exports=function(t,e,r,s){var l=r.xaxis,g=r.yaxis,c=s&&s.duration>0;e.each(function(e){var u,h=e[0].trace,d=h.error_x||{},A=h.error_y||{};h.ids&&(u=function(t){return t.id});var f=a.hasMarkers(h)&&h.marker.maxdisplayed>0;A.visible||d.visible||(e=[]);var C=n.select(this).selectAll("g.errorbar").data(e,u);if(C.exit().remove(),e.length){d.visible||C.selectAll("path.xerror").remove(),A.visible||C.selectAll("path.yerror").remove(),C.style("opacity",1);var p=C.enter().append("g").classed("errorbar",!0);c&&p.style("opacity",0).transition().duration(s.duration).style("opacity",1),o.setClipUrl(C,r.layerClipId,t),C.each(function(t){var e=n.select(this),r=function(t,e,r){var n={x:e.c2p(t.x),y:r.c2p(t.y)};void 0!==t.yh&&(n.yh=r.c2p(t.yh),n.ys=r.c2p(t.ys),i(n.ys)||(n.noYS=!0,n.ys=r.c2p(t.ys,!0)));void 0!==t.xh&&(n.xh=e.c2p(t.xh),n.xs=e.c2p(t.xs),i(n.xs)||(n.noXS=!0,n.xs=e.c2p(t.xs,!0)));return n}(t,l,g);if(!f||t.vis){var o,a=e.select("path.yerror");if(A.visible&&i(r.x)&&i(r.yh)&&i(r.ys)){var u=A.width;o="M"+(r.x-u)+","+r.yh+"h"+2*u+"m-"+u+",0V"+r.ys,r.noYS||(o+="m-"+u+",0h"+2*u),!a.size()?a=e.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):c&&(a=a.transition().duration(s.duration).ease(s.easing)),a.attr("d",o)}else a.remove();var h=e.select("path.xerror");if(d.visible&&i(r.y)&&i(r.xh)&&i(r.xs)){var C=(d.copy_ystyle?A:d).width;o="M"+r.xh+","+(r.y-C)+"v"+2*C+"m0,-"+C+"H"+r.xs,r.noXS||(o+="m0,-"+C+"v"+2*C),!h.size()?h=e.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):c&&(h=h.transition().duration(s.duration).ease(s.easing)),h.attr("d",o)}else h.remove()}})}})}},{"../../traces/scatter/subtypes":611,"../drawing":325,d3:74,"fast-isnumeric":145}],333:[function(t,e,r){"use strict";var n=t("d3"),i=t("../color");e.exports=function(t){t.each(function(t){var e=t[0].trace,r=e.error_y||{},o=e.error_x||{},a=n.select(this);a.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call(i.stroke,r.color),o.copy_ystyle&&(o=r),a.selectAll("path.xerror").style("stroke-width",o.thickness+"px").call(i.stroke,o.color)})}},{"../color":304,d3:74}],334:[function(t,e,r){"use strict";var n=t("../../plots/font_attributes"),i=t("./layout_attributes").hoverlabel,o=t("../../lib/extend").extendFlat;e.exports={hoverlabel:{bgcolor:o({},i.bgcolor,{arrayOk:!0}),bordercolor:o({},i.bordercolor,{arrayOk:!0}),font:n({arrayOk:!0,editType:"none"}),align:o({},i.align,{arrayOk:!0}),namelength:o({},i.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":419,"../../plots/font_attributes":499,"./layout_attributes":344}],335:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../registry");function o(t,e,r,i){i=i||n.identity,Array.isArray(t)&&(e[0][r]=i(t))}e.exports=function(t){var e=t.calcdata,r=t._fullLayout;function a(t){return function(e){return n.coerceHoverinfo({hoverinfo:e},{_module:t._module},r)}}for(var s=0;s<e.length;s++){var l=e[s],g=l[0].trace;if(!i.traceIs(g,"pie-like")){var c=i.traceIs(g,"2dMap")?o:n.fillArray;c(g.hoverinfo,l,"hi",a(g)),g.hovertemplate&&c(g.hovertemplate,l,"ht"),g.hoverlabel&&(c(g.hoverlabel.bgcolor,l,"hbg"),c(g.hoverlabel.bordercolor,l,"hbc"),c(g.hoverlabel.font.size,l,"hts"),c(g.hoverlabel.font.color,l,"htc"),c(g.hoverlabel.font.family,l,"htf"),c(g.hoverlabel.namelength,l,"hnl"),c(g.hoverlabel.align,l,"hta"))}}}},{"../../lib":426,"../../registry":524}],336:[function(t,e,r){"use strict";var n=t("../../registry"),i=t("./hover").hover;e.exports=function(t,e,r){var o=n.getComponentMethod("annotations","onClick")(t,t._hoverdata);function a(){t.emit("plotly_click",{points:t._hoverdata,event:e})}void 0!==r&&i(t,e,r,!0),t._hoverdata&&e&&e.target&&(o&&o.then?o.then(a):a(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":524,"./hover":340}],337:[function(t,e,r){"use strict";e.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],338:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("./attributes"),o=t("./hoverlabel_defaults");e.exports=function(t,e,r,a){var s=n.extendFlat({},a.hoverlabel);e.hovertemplate&&(s.namelength=-1),o(t,e,function(r,o){return n.coerce(t,e,i,r,o)},s)}},{"../../lib":426,"./attributes":334,"./hoverlabel_defaults":341}],339:[function(t,e,r){"use strict";var n=t("../../lib");r.getSubplot=function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},r.isTraceInSubplots=function(t,e){if("splom"===t.type){for(var n=t.xaxes||[],i=t.yaxes||[],o=0;o<n.length;o++)for(var a=0;a<i.length;a++)if(-1!==e.indexOf(n[o]+i[a]))return!0;return!1}return-1!==e.indexOf(r.getSubplot(t))},r.flat=function(t,e){for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=e;return r},r.p2c=function(t,e){for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=t[n].p2c(e);return r},r.getDistanceFunction=function(t,e,n,i){return"closest"===t?i||r.quadrature(e,n):"x"===t.charAt(0)?e:n},r.getClosest=function(t,e,r){if(!1!==r.index)r.index>=0&&r.index<t.length?r.distance=0:r.index=!1;else for(var n=0;n<t.length;n++){var i=e(t[n]);i<=r.distance&&(r.index=n,r.distance=i)}return r},r.inbox=function(t,e,r){return t*e<0||0===t?r:1/0},r.quadrature=function(t,e){return function(r){var n=t(r),i=e(r);return Math.sqrt(n*n+i*i)}},r.makeEventData=function(t,e,n){var i="index"in t?t.index:t.pointNumber,o={data:e._input,fullData:e,curveNumber:e.index,pointNumber:i};if(e._indexToPoints){var a=e._indexToPoints[i];1===a.length?o.pointIndex=a[0]:o.pointIndices=a}else o.pointIndex=i;return e._module.eventData?o=e._module.eventData(o,t,e,n,i):("xVal"in t?o.x=t.xVal:"x"in t&&(o.x=t.x),"yVal"in t?o.y=t.yVal:"y"in t&&(o.y=t.y),t.xa&&(o.xaxis=t.xa),t.ya&&(o.yaxis=t.ya),void 0!==t.zLabelVal&&(o.z=t.zLabelVal)),r.appendArrayPointValue(o,e,i),o},r.appendArrayPointValue=function(t,e,r){var i=e._arrayAttrs;if(i)for(var s=0;s<i.length;s++){var l=i[s],g=o(l);if(void 0===t[g]){var c=a(n.nestedProperty(e,l).get(),r);void 0!==c&&(t[g]=c)}}},r.appendArrayMultiPointValues=function(t,e,r){var i=e._arrayAttrs;if(i)for(var s=0;s<i.length;s++){var l=i[s],g=o(l);if(void 0===t[g]){for(var c=n.nestedProperty(e,l).get(),u=new Array(r.length),h=0;h<r.length;h++)u[h]=a(c,r[h]);t[g]=u}}};var i={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function o(t){return i[t]||t}function a(t,e){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(t[e[0]])?t[e[0]][e[1]]:void 0:t[e]}var s={x:!0,y:!0},l={"x unified":!0,"y unified":!0};r.isUnifiedHover=function(t){return"string"==typeof t&&!!l[t]},r.isXYhover=function(t){return"string"==typeof t&&!!s[t]}},{"../../lib":426}],340:[function(t,e,r){"use strict";var n=t("d3"),i=t("fast-isnumeric"),o=t("tinycolor2"),a=t("../../lib"),s=t("../../lib/events"),l=t("../../lib/svg_text_utils"),g=t("../../lib/override_cursor"),c=t("../drawing"),u=t("../color"),h=t("../dragelement"),d=t("../../plots/cartesian/axes"),A=t("../../registry"),f=t("./helpers"),C=t("./constants"),p=t("../legend/defaults"),I=t("../legend/draw"),v=C.YANGLE,m=Math.PI*v/180,y=1/Math.sin(m),b=Math.cos(m),x=Math.sin(m),_=C.HOVERARROWSIZE,w=C.HOVERTEXTPAD;function k(t){return[t.trace.index,t.index,t.x0,t.y0,t.name,t.attr,t.xa,t.ya||""].join(",")}r.hover=function(t,e,r,o){t=a.getGraphDiv(t),a.throttle(t._fullLayout._uid+C.HOVERID,C.HOVERMINTIME,function(){!function(t,e,r,o){r||(r="xy");var l=Array.isArray(r)?r:[r],c=t._fullLayout,d=c._plots||[],C=d[r],p=c._has("cartesian");if(C){var I=C.overlays.map(function(t){return t.id});l=l.concat(I)}for(var v=l.length,m=new Array(v),b=new Array(v),x=!1,_=0;_<v;_++){var w=l[_];if(d[w])x=!0,m[_]=d[w].xaxis,b[_]=d[w].yaxis;else{if(!c[w]||!c[w]._subplot)return void a.warn("Unrecognized subplot: "+w);var T=c[w]._subplot;m[_]=T.xaxis,b[_]=T.yaxis}}var E=e.hovermode||c.hovermode;E&&!x&&(E="closest");if(-1===["x","y","closest","x unified","y unified"].indexOf(E)||!t.calcdata||t.querySelector(".zoombox")||t._dragging)return h.unhoverRaw(t,e);var L,P,N,z,F,B,j,V,G,U,Z,H,W,Y=-1===c.hoverdistance?1/0:c.hoverdistance,X=-1===c.spikedistance?1/0:c.spikedistance,q=[],Q=[],K={hLinePoint:null,vLinePoint:null},J=!1;if(Array.isArray(e))for(E="array",N=0;N<e.length;N++)(F=t.calcdata[e[N].curveNumber||0])&&(B=F[0].trace,"skip"!==F[0].trace.hoverinfo&&(Q.push(F),"h"===B.orientation&&(J=!0)));else{for(z=0;z<t.calcdata.length;z++)F=t.calcdata[z],"skip"!==(B=F[0].trace).hoverinfo&&f.isTraceInSubplots(B,l)&&(Q.push(F),"h"===B.orientation&&(J=!0));var $,tt,et=!e.target;if(et)$="xpx"in e?e.xpx:m[0]._length/2,tt="ypx"in e?e.ypx:b[0]._length/2;else{if(!1===s.triggerHandler(t,"plotly_beforehover",e))return;var rt=e.target.getBoundingClientRect();if($=e.clientX-rt.left,tt=e.clientY-rt.top,$<0||$>m[0]._length||tt<0||tt>b[0]._length)return h.unhoverRaw(t,e)}if(e.pointerX=$+m[0]._offset,e.pointerY=tt+b[0]._offset,L="xval"in e?f.flat(l,e.xval):f.p2c(m,$),P="yval"in e?f.flat(l,e.yval):f.p2c(b,tt),!i(L[0])||!i(P[0]))return a.warn("Fx.hover failed",e,t),h.unhoverRaw(t,e)}var nt=1/0;function it(t,r){for(z=0;z<Q.length;z++)if((F=Q[z])&&F[0]&&F[0].trace&&!0===(B=F[0].trace).visible&&0!==B._length&&-1===["carpet","contourcarpet"].indexOf(B._module.name)){if("splom"===B.type?j=l[V=0]:(j=f.getSubplot(B),V=l.indexOf(j)),G=E,f.isUnifiedHover(G)&&(G=G.charAt(0)),H={cd:F,trace:B,xa:m[V],ya:b[V],maxHoverDistance:Y,maxSpikeDistance:X,index:!1,distance:Math.min(nt,Y),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:u.defaultLine,name:B.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},c[j]&&(H.subplot=c[j]._subplot),c._splomScenes&&c._splomScenes[B.uid]&&(H.scene=c._splomScenes[B.uid]),W=q.length,"array"===G){var n=e[z];"pointNumber"in n?(H.index=n.pointNumber,G="closest"):(G="","xval"in n&&(U=n.xval,G="x"),"yval"in n&&(Z=n.yval,G=G?"closest":"y"))}else void 0!==t&&void 0!==r?(U=t,Z=r):(U=L[V],Z=P[V]);if(0!==Y)if(B._module&&B._module.hoverPoints){var o=B._module.hoverPoints(H,U,Z,G,c._hoverlayer);if(o)for(var s,g=0;g<o.length;g++)s=o[g],i(s.x0)&&i(s.y0)&&q.push(S(s,E))}else a.log("Unrecognized trace type in hover:",B);if("closest"===E&&q.length>W&&(q.splice(0,W),nt=q[0].distance),p&&0!==X&&0===q.length){H.distance=X,H.index=!1;var h=B._module.hoverPoints(H,U,Z,"closest",c._hoverlayer);if(h&&(h=h.filter(function(t){return t.spikeDistance<=X})),h&&h.length){var d,A=h.filter(function(t){return t.xa.showspikes&&"hovered data"!==t.xa.spikesnap});if(A.length){var C=A[0];i(C.x0)&&i(C.y0)&&(d=at(C),(!K.vLinePoint||K.vLinePoint.spikeDistance>d.spikeDistance)&&(K.vLinePoint=d))}var I=h.filter(function(t){return t.ya.showspikes&&"hovered data"!==t.ya.spikesnap});if(I.length){var v=I[0];i(v.x0)&&i(v.y0)&&(d=at(v),(!K.hLinePoint||K.hLinePoint.spikeDistance>d.spikeDistance)&&(K.hLinePoint=d))}}}}}function ot(t,e){for(var r,n=null,i=1/0,o=0;o<t.length;o++)(r=t[o].spikeDistance)<=i&&r<=e&&(n=t[o],i=r);return n}function at(t){return t?{xa:t.xa,ya:t.ya,x:void 0!==t.xSpike?t.xSpike:(t.x0+t.x1)/2,y:void 0!==t.ySpike?t.ySpike:(t.y0+t.y1)/2,distance:t.distance,spikeDistance:t.spikeDistance,curveNumber:t.trace.index,color:t.color,pointNumber:t.index}:null}it();var st={fullLayout:c,container:c._hoverlayer,outerContainer:c._paperdiv,event:e},lt=t._spikepoints,gt={vLinePoint:K.vLinePoint,hLinePoint:K.hLinePoint};if(t._spikepoints=gt,p&&0!==X&&0!==q.length){var ct=q.filter(function(t){return t.ya.showspikes}),ut=ot(ct,X);K.hLinePoint=at(ut);var ht=q.filter(function(t){return t.xa.showspikes}),dt=ot(ht,X);K.vLinePoint=at(dt)}if(0===q.length){var At=h.unhoverRaw(t,e);return!p||null===K.hLinePoint&&null===K.vLinePoint||D(lt)&&R(t,K,st),At}p&&D(lt)&&R(t,K,st);if(q.sort(function(t,e){return t.distance-e.distance}),f.isXYhover(G)&&0!==q[0].length&&"splom"!==q[0].trace.type){var ft=q[0],Ct=ft.cd[ft.index],pt="group"===c.boxmode||"group"===c.violinmode,It=ft.xVal,vt=ft.xa;"category"===vt.type&&(It=vt._categoriesMap[It]),"date"===vt.type&&(It=vt.d2c(It)),Ct&&Ct.t&&Ct.t.posLetter===vt._id&&pt&&(It+=Ct.t.dPos);var mt=ft.yVal;"category"===(vt=ft.ya).type&&(mt=vt._categoriesMap[mt]),"date"===vt.type&&(mt=vt.d2c(mt)),Ct&&Ct.t&&Ct.t.posLetter===vt._id&&pt&&(mt+=Ct.t.dPos),it(It,mt);var yt={};q=q.filter(function(t){var e=k(t);if(!yt[e])return yt[e]=!0,yt[e]})}var bt=t._hoverdata,xt=[];for(N=0;N<q.length;N++){var _t=q[N],wt=f.makeEventData(_t,_t.trace,_t.cd);if(!1!==_t.hovertemplate){var kt=!1;_t.cd[_t.index]&&_t.cd[_t.index].ht&&(kt=_t.cd[_t.index].ht),_t.hovertemplate=kt||_t.trace.hovertemplate||!1}_t.eventData=[wt],xt.push(wt)}t._hoverdata=xt;var Tt="y"===E&&(Q.length>1||q.length>1)||"closest"===E&&J&&q.length>1,Mt=u.combine(c.plot_bgcolor||u.background,c.paper_bgcolor),Et={hovermode:E,rotateLabels:Tt,bgColor:Mt,container:c._hoverlayer,outerContainer:c._paperdiv,commonLabelOpts:c.hoverlabel,hoverdistance:c.hoverdistance},Ot=M(q,Et,t);f.isUnifiedHover(E)||(!function(t,e,r){var n,i,o,a,s,l,g,c=0,u=1,h=t.size(),d=new Array(h),A=0;function f(t){var e=t[0],r=t[t.length-1];if(i=e.pmin-e.pos-e.dp+e.size,o=r.pos+r.dp+r.size-e.pmax,i>.01){for(s=t.length-1;s>=0;s--)t[s].dp+=i;n=!1}if(!(o<.01)){if(i<-.01){for(s=t.length-1;s>=0;s--)t[s].dp-=o;n=!1}if(n){var g=0;for(a=0;a<t.length;a++)(l=t[a]).pos+l.dp+l.size>e.pmax&&g++;for(a=t.length-1;a>=0&&!(g<=0);a--)(l=t[a]).pos>e.pmax-1&&(l.del=!0,g--);for(a=0;a<t.length&&!(g<=0);a++)if((l=t[a]).pos<e.pmin+1)for(l.del=!0,g--,o=2*l.size,s=t.length-1;s>=0;s--)t[s].dp-=o;for(a=t.length-1;a>=0&&!(g<=0);a--)(l=t[a]).pos+l.dp+l.size>e.pmax&&(l.del=!0,g--)}}}t.each(function(t){var n=t[e],i="x"===n._id.charAt(0),o=n.range;0===A&&o&&o[0]>o[1]!==i&&(u=-1),d[A++]=[{datum:t,traceIndex:t.trace.index,dp:0,pos:t.pos,posref:t.posref,size:t.by*(i?y:1)/2,pmin:0,pmax:i?r.width:r.height}]}),d.sort(function(t,e){return t[0].posref-e[0].posref||u*(e[0].traceIndex-t[0].traceIndex)});for(;!n&&c<=h;){for(c++,n=!0,a=0;a<d.length-1;){var C=d[a],p=d[a+1],I=C[C.length-1],v=p[0];if((i=I.pos+I.dp+I.size-v.pos-v.dp+v.size)>.01&&I.pmin===v.pmin&&I.pmax===v.pmax){for(s=p.length-1;s>=0;s--)p[s].dp+=i;for(C.push.apply(C,p),d.splice(a+1,1),g=0,s=C.length-1;s>=0;s--)g+=C[s].dp;for(o=g/C.length,s=C.length-1;s>=0;s--)C[s].dp-=o;n=!1}else a++}d.forEach(f)}for(a=d.length-1;a>=0;a--){var m=d[a];for(s=m.length-1;s>=0;s--){var b=m[s],x=b.datum;x.offset=b.dp,x.del=b.del}}}(Ot,Tt?"xa":"ya",c),O(Ot,Tt));if(e.target&&e.target.tagName){var St=A.getComponentMethod("annotations","hasClickToShow")(t,xt);g(n.select(e.target),St?"pointer":"")}if(!e.target||o||!function(t,e,r){if(!r||r.length!==t._hoverdata.length)return!0;for(var n=r.length-1;n>=0;n--){var i=r[n],o=t._hoverdata[n];if(i.curveNumber!==o.curveNumber||String(i.pointNumber)!==String(o.pointNumber)||String(i.pointNumbers)!==String(o.pointNumbers))return!0}return!1}(t,0,bt))return;bt&&t.emit("plotly_unhover",{event:e,points:bt});t.emit("plotly_hover",{event:e,points:t._hoverdata,xaxes:m,yaxes:b,xvals:L,yvals:P})}(t,e,r,o)})},r.loneHover=function(t,e){var r=!0;Array.isArray(t)||(r=!1,t=[t]);var i=t.map(function(t){return{color:t.color||u.defaultLine,x0:t.x0||t.x||0,x1:t.x1||t.x||0,y0:t.y0||t.y||0,y1:t.y1||t.y||0,xLabel:t.xLabel,yLabel:t.yLabel,zLabel:t.zLabel,text:t.text,name:t.name,idealAlign:t.idealAlign,borderColor:t.borderColor,fontFamily:t.fontFamily,fontSize:t.fontSize,fontColor:t.fontColor,nameLength:t.nameLength,textAlign:t.textAlign,trace:t.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:t.hovertemplate||!1,eventData:t.eventData||!1,hovertemplateLabels:t.hovertemplateLabels||!1}}),o=n.select(e.container),a=e.outerContainer?n.select(e.outerContainer):o,s={hovermode:"closest",rotateLabels:!1,bgColor:e.bgColor||u.background,container:o,outerContainer:a},l=M(i,s,e.gd),g=0,c=0;return l.sort(function(t,e){return t.y0-e.y0}).each(function(t,r){var n=t.y0-t.by/2;t.offset=n-5<g?g-n+5:0,g=n+t.by+t.offset,r===e.anchorIndex&&(c=t.offset)}).each(function(t){t.offset-=c}),O(l,s.rotateLabels),r?l:l.node()};var T=/<extra>([\s\S]*)<\/extra>/;function M(t,e,r){var i=r._fullLayout,o=e.hovermode,s=e.rotateLabels,g=e.bgColor,h=e.container,d=e.outerContainer,A=e.commonLabelOpts||{},m=e.fontFamily||C.HOVERFONT,y=e.fontSize||C.HOVERFONTSIZE,b=t[0],x=b.xa,T=b.ya,M="y"===o.charAt(0)?"yLabel":"xLabel",O=b[M],S=(String(O)||"").split(" ")[0],R=d.node().getBoundingClientRect(),D=R.top,L=R.width,P=R.height,N=void 0!==O&&b.distance<=e.hoverdistance&&("x"===o||"y"===o);if(N){var z,F,B=!0;for(z=0;z<t.length;z++)if(B&&void 0===t[z].zLabel&&(B=!1),F=t[z].hoverinfo||t[z].trace.hoverinfo){var j=Array.isArray(F)?F:F.split("+");if(-1===j.indexOf("all")&&-1===j.indexOf(o)){N=!1;break}}B&&(N=!1)}var V=h.selectAll("g.axistext").data(N?[0]:[]);function G(t){return t.filter(function(t){return void 0!==t.zLabelVal||(t[M]||"").split(" ")[0]===S})}if(V.enter().append("g").classed("axistext",!0),V.exit().remove(),V.each(function(){var e=n.select(this),s=a.ensureSingle(e,"path","",function(t){t.style({"stroke-width":"1px"})}),g=a.ensureSingle(e,"text","",function(t){t.attr("data-notex",1)}),h=A.bgcolor||u.defaultLine,d=A.bordercolor||u.contrast(h),f=u.contrast(h),C={family:A.font.family||m,size:A.font.size||y,color:A.font.color||f};s.style({fill:h,stroke:d}),g.text(O).call(c.font,C).call(l.positionText,0,0).call(l.convertToTspans,r),e.attr("transform","");var p,I,v=g.node().getBoundingClientRect();if("x"===o){var k="top"===x.side?"-":"";g.attr("text-anchor","middle").call(l.positionText,0,"top"===x.side?D-v.bottom-_-w:D-v.top+_+w),p=x._offset+(b.x0+b.x1)/2,I=T._offset+("top"===x.side?0:T._length);var M=v.width/2+w;p<M?(p=M,s.attr("d","M-"+(M-_)+",0L-"+(M-2*_)+","+k+_+"H"+(w+v.width/2)+"v"+k+(2*w+v.height)+"H-"+M+"V"+k+_+"Z")):p>i.width-M?(p=i.width-M,s.attr("d","M"+(M-_)+",0L"+M+","+k+_+"v"+k+(2*w+v.height)+"H-"+M+"V"+k+_+"H"+(M-2*_)+"Z")):s.attr("d","M0,0L"+_+","+k+_+"H"+(w+v.width/2)+"v"+k+(2*w+v.height)+"H-"+(w+v.width/2)+"V"+k+_+"H-"+_+"Z")}else{var E,S,R;"right"===T.side?(E="start",S=1,R="",p=x._offset+x._length):(E="end",S=-1,R="-",p=x._offset),I=T._offset+(b.y0+b.y1)/2,g.attr("text-anchor",E),s.attr("d","M0,0L"+R+_+","+_+"V"+(w+v.height/2)+"h"+R+(2*w+v.width)+"V-"+(w+v.height/2)+"H"+R+_+"V-"+_+"Z");var L,P=v.height/2,N=D-v.top-P,z="clip"+i._uid+"commonlabel"+T._id;if(p<v.width+2*w+_){L="M-"+(_+w)+"-"+P+"h-"+(v.width-w)+"V"+P+"h"+(v.width-w)+"Z";var F=v.width-p+w;l.positionText(g,F,N),"end"===E&&g.selectAll("tspan").each(function(){var t=n.select(this),e=c.tester.append("text").text(t.text()).call(c.font,C),r=e.node().getBoundingClientRect();Math.round(r.width)<Math.round(v.width)&&t.attr("x",F-r.width),e.remove()})}else l.positionText(g,S*(w+_),N),L=null;var B=i._topclips.selectAll("#"+z).data(L?[0]:[]);B.enter().append("clipPath").attr("id",z).append("path"),B.exit().remove(),B.select("path").attr("d",L),c.setClipUrl(g,L?z:null,r)}e.attr("transform","translate("+p+","+I+")"),t=G(t)}),f.isUnifiedHover(o)){if(h.selectAll("g.hovertext").remove(),void 0!==O&&b.distance<=e.hoverdistance&&(t=G(t)),0===t.length)return;var U={showlegend:!0,legend:{title:{text:O,font:i.hoverlabel.font},font:i.hoverlabel.font,bgcolor:i.hoverlabel.bgcolor,bordercolor:i.hoverlabel.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:i.legend?i.legend.traceorder:void 0,orientation:"v"}},Z={};p(U,Z,r._fullData);var H=Z.legend;H.entries=[];for(var W=0;W<t.length;W++){var Y=E(t[W],!0,o,i,O),X=Y[0],q=Y[1],Q=t[W];Q.name=q,Q.text=""!==q?q+" : "+X:X;var K=Q.cd[Q.index];K&&(K.mc&&(Q.mc=K.mc),K.mcc&&(Q.mc=K.mcc),K.mlc&&(Q.mlc=K.mlc),K.mlcc&&(Q.mlc=K.mlcc),K.mlw&&(Q.mlw=K.mlw),K.mrc&&(Q.mrc=K.mrc),K.dir&&(Q.dir=K.dir)),Q._distinct=!0,H.entries.push([Q])}H.entries.sort(function(t,e){return t[0].trace.index-e[0].trace.index}),H.layer=h,I(r,H);var J=a.mean(t.map(function(t){return(t.y0+t.y1)/2})),$=a.mean(t.map(function(t){return(t.x0+t.x1)/2})),tt=h.select("g.legend"),et=tt.node().getBoundingClientRect();$+=x._offset,J+=T._offset-et.height/2;var rt=et.width+2*w;!($+rt<=L)&&$-rt>=0?$-=rt:$+=2*w;var nt=et.height+2*w,it=J+nt>=P;return nt<=P&&(J<=D?J=T._offset+2*w:it&&(J=P-nt)),tt.attr("transform","translate("+$+","+J+")"),tt}var ot=h.selectAll("g.hovertext").data(t,function(t){return k(t)});return ot.enter().append("g").classed("hovertext",!0).each(function(){var t=n.select(this);t.append("rect").call(u.fill,u.addOpacity(g,.8)),t.append("text").classed("name",!0),t.append("path").style("stroke-width","1px"),t.append("text").classed("nums",!0).call(c.font,m,y)}),ot.exit().remove(),ot.each(function(t){var e=n.select(this).attr("transform",""),a=t.bgcolor||t.color,h=u.combine(u.opacity(a)?a:u.defaultLine,g),d=u.combine(u.opacity(t.color)?t.color:u.defaultLine,g),A=t.borderColor||u.contrast(h),f=E(t,N,o,i,O,e),C=f[0],p=f[1],I=e.select("text.nums").call(c.font,t.fontFamily||m,t.fontSize||y,t.fontColor||A).text(C).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,r),b=e.select("text.name"),x=0,k=0;if(p&&p!==C){b.call(c.font,t.fontFamily||m,t.fontSize||y,d).text(p).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,r);var T=b.node().getBoundingClientRect();x=T.width+2*w,k=T.height+2*w}else b.remove(),e.select("rect").remove();e.select("path").style({fill:h,stroke:A});var M,S,R=I.node().getBoundingClientRect(),z=t.xa._offset+(t.x0+t.x1)/2,F=t.ya._offset+(t.y0+t.y1)/2,B=Math.abs(t.x1-t.x0),j=Math.abs(t.y1-t.y0),V=R.width+_+w+x;if(t.ty0=D-R.top,t.bx=R.width+2*w,t.by=Math.max(R.height+2*w,k),t.anchor="start",t.txwidth=R.width,t.tx2width=x,t.offset=0,s)t.pos=z,M=F+j/2+V<=P,S=F-j/2-V>=0,"top"!==t.idealAlign&&M||!S?M?(F+=j/2,t.anchor="start"):t.anchor="middle":(F-=j/2,t.anchor="end");else if(t.pos=F,M=z+B/2+V<=L,S=z-B/2-V>=0,"left"!==t.idealAlign&&M||!S)if(M)z+=B/2,t.anchor="start";else{t.anchor="middle";var G=V/2,U=z+G-L,Z=z-G;U>0&&(z-=U),Z<0&&(z+=-Z)}else z-=B/2,t.anchor="end";I.attr("text-anchor",t.anchor),x&&b.attr("text-anchor",t.anchor),e.attr("transform","translate("+z+","+F+")"+(s?"rotate("+v+")":""))}),ot}function E(t,e,r,n,i,o){var s="",l="";void 0!==t.nameOverride&&(t.name=t.nameOverride),t.name&&(t.trace._meta&&(t.name=a.templateString(t.name,t.trace._meta)),s=L(t.name,t.nameLength)),void 0!==t.zLabel?(void 0!==t.xLabel&&(l+="x: "+t.xLabel+"<br>"),void 0!==t.yLabel&&(l+="y: "+t.yLabel+"<br>"),"choropleth"!==t.trace.type&&"choroplethmapbox"!==t.trace.type&&(l+=(l?"z: ":"")+t.zLabel)):e&&t[r.charAt(0)+"Label"]===i?l=t[("x"===r.charAt(0)?"y":"x")+"Label"]||"":void 0===t.xLabel?void 0!==t.yLabel&&"scattercarpet"!==t.trace.type&&(l=t.yLabel):l=void 0===t.yLabel?t.xLabel:"("+t.xLabel+", "+t.yLabel+")",!t.text&&0!==t.text||Array.isArray(t.text)||(l+=(l?"<br>":"")+t.text),void 0!==t.extraText&&(l+=(l?"<br>":"")+t.extraText),o&&""===l&&!t.hovertemplate&&(""===s&&o.remove(),l=s);var g=n._d3locale,c=t.hovertemplate||!1,u=t.hovertemplateLabels||t,h=t.eventData[0]||{};return c&&(l=(l=a.hovertemplateString(c,u,g,h,t.trace._meta)).replace(T,function(e,r){return s=L(r,t.nameLength),""})),[l,s]}function O(t,e){t.each(function(t){var r=n.select(this);if(t.del)return r.remove();var i=r.select("text.nums"),o=t.anchor,a="end"===o?-1:1,s={start:1,end:-1,middle:0}[o],g=s*(_+w),u=g+s*(t.txwidth+w),h=0,d=t.offset;"middle"===o&&(g-=t.tx2width/2,u+=t.txwidth/2+w),e&&(d*=-x,h=t.offset*b),r.select("path").attr("d","middle"===o?"M-"+(t.bx/2+t.tx2width/2)+","+(d-t.by/2)+"h"+t.bx+"v"+t.by+"h-"+t.bx+"Z":"M0,0L"+(a*_+h)+","+(_+d)+"v"+(t.by/2-_)+"h"+a*t.bx+"v-"+t.by+"H"+(a*_+h)+"V"+(d-_)+"Z");var A=g+h,f=d+t.ty0-t.by/2+w,C=t.textAlign||"auto";"auto"!==C&&("left"===C&&"start"!==o?(i.attr("text-anchor","start"),A="middle"===o?-t.bx/2-t.tx2width/2+w:-t.bx-w):"right"===C&&"end"!==o&&(i.attr("text-anchor","end"),A="middle"===o?t.bx/2-t.tx2width/2-w:t.bx+w)),i.call(l.positionText,A,f),t.tx2width&&(r.select("text.name").call(l.positionText,u+s*w+h,d+t.ty0-t.by/2+w),r.select("rect").call(c.setRect,u+(s-1)*t.tx2width/2+h,d-t.by/2-1,t.tx2width,t.by+2))})}function S(t,e){var r=t.index,n=t.trace||{},o=t.cd[0],s=t.cd[r]||{};function l(t){return t||i(t)&&0===t}var g=Array.isArray(r)?function(t,e){var i=a.castOption(o,r,t);return l(i)?i:a.extractOption({},n,"",e)}:function(t,e){return a.extractOption(s,n,t,e)};function c(e,r,n){var i=g(r,n);l(i)&&(t[e]=i)}if(c("hoverinfo","hi","hoverinfo"),c("bgcolor","hbg","hoverlabel.bgcolor"),c("borderColor","hbc","hoverlabel.bordercolor"),c("fontFamily","htf","hoverlabel.font.family"),c("fontSize","hts","hoverlabel.font.size"),c("fontColor","htc","hoverlabel.font.color"),c("nameLength","hnl","hoverlabel.namelength"),c("textAlign","hta","hoverlabel.align"),t.posref="y"===e||"closest"===e&&"h"===n.orientation?t.xa._offset+(t.x0+t.x1)/2:t.ya._offset+(t.y0+t.y1)/2,t.x0=a.constrain(t.x0,0,t.xa._length),t.x1=a.constrain(t.x1,0,t.xa._length),t.y0=a.constrain(t.y0,0,t.ya._length),t.y1=a.constrain(t.y1,0,t.ya._length),void 0!==t.xLabelVal&&(t.xLabel="xLabel"in t?t.xLabel:d.hoverLabelText(t.xa,t.xLabelVal),t.xVal=t.xa.c2d(t.xLabelVal)),void 0!==t.yLabelVal&&(t.yLabel="yLabel"in t?t.yLabel:d.hoverLabelText(t.ya,t.yLabelVal),t.yVal=t.ya.c2d(t.yLabelVal)),void 0!==t.zLabelVal&&void 0===t.zLabel&&(t.zLabel=String(t.zLabelVal)),!(isNaN(t.xerr)||"log"===t.xa.type&&t.xerr<=0)){var u=d.tickText(t.xa,t.xa.c2l(t.xerr),"hover").text;void 0!==t.xerrneg?t.xLabel+=" +"+u+" / -"+d.tickText(t.xa,t.xa.c2l(t.xerrneg),"hover").text:t.xLabel+=" ± "+u,"x"===e&&(t.distance+=1)}if(!(isNaN(t.yerr)||"log"===t.ya.type&&t.yerr<=0)){var h=d.tickText(t.ya,t.ya.c2l(t.yerr),"hover").text;void 0!==t.yerrneg?t.yLabel+=" +"+h+" / -"+d.tickText(t.ya,t.ya.c2l(t.yerrneg),"hover").text:t.yLabel+=" ± "+h,"y"===e&&(t.distance+=1)}var A=t.hoverinfo||t.trace.hoverinfo;return A&&"all"!==A&&(-1===(A=Array.isArray(A)?A:A.split("+")).indexOf("x")&&(t.xLabel=void 0),-1===A.indexOf("y")&&(t.yLabel=void 0),-1===A.indexOf("z")&&(t.zLabel=void 0),-1===A.indexOf("text")&&(t.text=void 0),-1===A.indexOf("name")&&(t.name=void 0)),t}function R(t,e,r){var n,i,a=r.container,s=r.fullLayout,l=s._size,g=r.event,h=!!e.hLinePoint,A=!!e.vLinePoint;if(a.selectAll(".spikeline").remove(),A||h){var f=u.combine(s.plot_bgcolor,s.paper_bgcolor);if(h){var C,p,I=e.hLinePoint;n=I&&I.xa,"cursor"===(i=I&&I.ya).spikesnap?(C=g.pointerX,p=g.pointerY):(C=n._offset+I.x,p=i._offset+I.y);var v,m,y=o.readability(I.color,f)<1.5?u.contrast(f):I.color,b=i.spikemode,x=i.spikethickness,_=i.spikecolor||y,w=d.getPxPosition(t,i);if(-1!==b.indexOf("toaxis")||-1!==b.indexOf("across")){if(-1!==b.indexOf("toaxis")&&(v=w,m=C),-1!==b.indexOf("across")){var k=i._counterDomainMin,T=i._counterDomainMax;"free"===i.anchor&&(k=Math.min(k,i.position),T=Math.max(T,i.position)),v=l.l+k*l.w,m=l.l+T*l.w}a.insert("line",":first-child").attr({x1:v,x2:m,y1:p,y2:p,"stroke-width":x,stroke:_,"stroke-dasharray":c.dashStyle(i.spikedash,x)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:v,x2:m,y1:p,y2:p,"stroke-width":x+2,stroke:f}).classed("spikeline",!0).classed("crisp",!0)}-1!==b.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:w+("right"!==i.side?x:-x),cy:p,r:x,fill:_}).classed("spikeline",!0)}if(A){var M,E,O=e.vLinePoint;n=O&&O.xa,i=O&&O.ya,"cursor"===n.spikesnap?(M=g.pointerX,E=g.pointerY):(M=n._offset+O.x,E=i._offset+O.y);var S,R,D=o.readability(O.color,f)<1.5?u.contrast(f):O.color,L=n.spikemode,P=n.spikethickness,N=n.spikecolor||D,z=d.getPxPosition(t,n);if(-1!==L.indexOf("toaxis")||-1!==L.indexOf("across")){if(-1!==L.indexOf("toaxis")&&(S=z,R=E),-1!==L.indexOf("across")){var F=n._counterDomainMin,B=n._counterDomainMax;"free"===n.anchor&&(F=Math.min(F,n.position),B=Math.max(B,n.position)),S=l.t+(1-B)*l.h,R=l.t+(1-F)*l.h}a.insert("line",":first-child").attr({x1:M,x2:M,y1:S,y2:R,"stroke-width":P,stroke:N,"stroke-dasharray":c.dashStyle(n.spikedash,P)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:M,x2:M,y1:S,y2:R,"stroke-width":P+2,stroke:f}).classed("spikeline",!0).classed("crisp",!0)}-1!==L.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:M,cy:z-("top"!==n.side?P:-P),r:P,fill:N}).classed("spikeline",!0)}}}function D(t,e){return!e||(e.vLinePoint!==t._spikepoints.vLinePoint||e.hLinePoint!==t._spikepoints.hLinePoint)}function L(t,e){return l.plainText(t||"",{len:e,allowedTags:["br","sub","sup","b","i","em"]})}},{"../../lib":426,"../../lib/events":418,"../../lib/override_cursor":437,"../../lib/svg_text_utils":450,"../../plots/cartesian/axes":473,"../../registry":524,"../color":304,"../dragelement":322,"../drawing":325,"../legend/defaults":355,"../legend/draw":356,"./constants":337,"./helpers":339,d3:74,"fast-isnumeric":145,tinycolor2:693}],341:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../color"),o=t("./helpers").isUnifiedHover;e.exports=function(t,e,r,a){function s(t){a.font[t]||(a.font[t]=e.legend?e.legend.font[t]:e.font[t])}a=a||{},e&&o(e.hovermode)&&(a.font||(a.font={}),s("size"),s("family"),s("color"),e.legend?(a.bgcolor||(a.bgcolor=i.combine(e.legend.bgcolor,e.paper_bgcolor)),a.bordercolor||(a.bordercolor=e.legend.bordercolor)):a.bgcolor||(a.bgcolor=e.paper_bgcolor)),r("hoverlabel.bgcolor",a.bgcolor),r("hoverlabel.bordercolor",a.bordercolor),r("hoverlabel.namelength",a.namelength),n.coerceFont(r,"hoverlabel.font",a.font),r("hoverlabel.align",a.align)}},{"../../lib":426,"../color":304,"./helpers":339}],342:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("./layout_attributes");e.exports=function(t,e,r){function o(r,o){return void 0!==e[r]?e[r]:n.coerce(t,e,i,r,o)}var a,s=o("clickmode");return e._has("cartesian")?s.indexOf("select")>-1?a="closest":(e._isHoriz=function(t,e){for(var r=e._scatterStackOpts||{},n=0;n<t.length;n++){var i=t[n],o=i.xaxis+i.yaxis,a=r[o]||{},s=a[i.stackgroup]||{};if("h"!==i.orientation&&"h"!==s.orientation)return!1}return!0}(r,e),a=e._isHoriz?"y":"x"):a="closest",o("hovermode",a)}},{"../../lib":426,"./layout_attributes":344}],343:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../lib"),o=t("../dragelement"),a=t("./helpers"),s=t("./layout_attributes"),l=t("./hover");e.exports={moduleType:"component",name:"fx",constants:t("./constants"),schema:{layout:s},attributes:t("./attributes"),layoutAttributes:s,supplyLayoutGlobalDefaults:t("./layout_global_defaults"),supplyDefaults:t("./defaults"),supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),getDistanceFunction:a.getDistanceFunction,getClosest:a.getClosest,inbox:a.inbox,quadrature:a.quadrature,appendArrayPointValue:a.appendArrayPointValue,castHoverOption:function(t,e,r){return i.castOption(t,e,"hoverlabel."+r)},castHoverinfo:function(t,e,r){return i.castOption(t,r,"hoverinfo",function(r){return i.coerceHoverinfo({hoverinfo:r},{_module:t._module},e)})},hover:l.hover,unhover:o.unhover,loneHover:l.loneHover,loneUnhover:function(t){var e=i.isD3Selection(t)?t:n.select(t);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:t("./click")}},{"../../lib":426,"../dragelement":322,"./attributes":334,"./calc":335,"./click":336,"./constants":337,"./defaults":338,"./helpers":339,"./hover":340,"./layout_attributes":344,"./layout_defaults":345,"./layout_global_defaults":346,d3:74}],344:[function(t,e,r){"use strict";var n=t("./constants"),i=t("../../plots/font_attributes")({editType:"none"});i.family.dflt=n.HOVERFONT,i.size.dflt=n.HOVERFONTSIZE,e.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:i,align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":499,"./constants":337}],345:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("./helpers").isUnifiedHover,o=t("./layout_attributes"),a=t("./hovermode_defaults"),s=t("./hoverlabel_defaults");e.exports=function(t,e,r){function l(r,i){return n.coerce(t,e,o,r,i)}var g=a(t,e,r);g&&(l("hoverdistance"),l("spikedistance",i(g)?-1:void 0)),"select"===l("dragmode")&&l("selectdirection");var c=e._has("mapbox"),u=e._has("geo"),h=e._basePlotModules.length;"zoom"===e.dragmode&&((c||u)&&1===h||c&&u&&2===h)&&(e.dragmode="pan"),s(t,e,l)}},{"../../lib":426,"./helpers":339,"./hoverlabel_defaults":341,"./hovermode_defaults":342,"./layout_attributes":344}],346:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("./hoverlabel_defaults"),o=t("./layout_attributes");e.exports=function(t,e){i(t,e,function(r,i){return n.coerce(t,e,o,r,i)})}},{"../../lib":426,"./hoverlabel_defaults":341,"./layout_attributes":344}],347:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../lib/regex").counter,o=t("../../plots/domain").attributes,a=t("../../plots/cartesian/constants").idRegex,s=t("../../plot_api/plot_template"),l={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[i("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[a.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[a.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:o({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function g(t,e,r){var n=e[r+"axes"],i=Object.keys((t._splomAxes||{})[r]||{});return Array.isArray(n)?n:i.length?i:void 0}function c(t,e,r,n,i,o){var a=e(t+"gap",r),s=e("domain."+t);e(t+"side",n);for(var l=new Array(i),g=s[0],c=(s[1]-g)/(i-a),u=c*(1-a),h=0;h<i;h++){var d=g+c*h;l[o?i-1-h:h]=[d,d+u]}return l}function u(t,e,r,n,i){var o,a=new Array(r);function s(t,r){-1!==e.indexOf(r)&&void 0===n[r]?(a[t]=r,n[r]=t):a[t]=""}if(Array.isArray(t))for(o=0;o<r;o++)s(o,t[o]);else for(s(0,i),o=1;o<r;o++)s(o,i+(o+1));return a}e.exports={moduleType:"component",name:"grid",schema:{layout:{grid:l}},layoutAttributes:l,sizeDefaults:function(t,e){var r=t.grid||{},i=g(e,r,"x"),o=g(e,r,"y");if(t.grid||i||o){var a,u,h=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]),d=Array.isArray(i),A=Array.isArray(o),f=d&&i!==r.xaxes&&A&&o!==r.yaxes;h?(a=r.subplots.length,u=r.subplots[0].length):(A&&(a=o.length),d&&(u=i.length));var C=s.newContainer(e,"grid"),p=_("rows",a),I=_("columns",u);if(p*I>1){h||d||A||"independent"===_("pattern")&&(h=!0),C._hasSubplotGrid=h;var v,m,y="top to bottom"===_("roworder"),b=h?.2:.1,x=h?.3:.1;f&&e._splomGridDflt&&(v=e._splomGridDflt.xside,m=e._splomGridDflt.yside),C._domains={x:c("x",_,b,v,I),y:c("y",_,x,m,p,y)}}else delete e.grid}function _(t,e){return n.coerce(r,C,l,t,e)}},contentDefaults:function(t,e){var r=e.grid;if(r&&r._domains){var n,i,o,a,s,l,c,h=t.grid||{},d=e._subplots,A=r._hasSubplotGrid,f=r.rows,C=r.columns,p="independent"===r.pattern,I=r._axisMap={};if(A){var v=h.subplots||[];l=r.subplots=new Array(f);var m=1;for(n=0;n<f;n++){var y=l[n]=new Array(C),b=v[n]||[];for(i=0;i<C;i++)if(p?(s=1===m?"xy":"x"+m+"y"+m,m++):s=b[i],y[i]="",-1!==d.cartesian.indexOf(s)){if(c=s.indexOf("y"),o=s.slice(0,c),a=s.slice(c),void 0!==I[o]&&I[o]!==i||void 0!==I[a]&&I[a]!==n)continue;y[i]=s,I[o]=i,I[a]=n}}}else{var x=g(e,h,"x"),_=g(e,h,"y");r.xaxes=u(x,d.xaxis,C,I,"x"),r.yaxes=u(_,d.yaxis,f,I,"y")}var w=r._anchors={},k="top to bottom"===r.roworder;for(var T in I){var M,E,O,S=T.charAt(0),R=r[S+"side"];if(R.length<8)w[T]="free";else if("x"===S){if("t"===R.charAt(0)===k?(M=0,E=1,O=f):(M=f-1,E=-1,O=-1),A){var D=I[T];for(n=M;n!==O;n+=E)if((s=l[n][D])&&(c=s.indexOf("y"),s.slice(0,c)===T)){w[T]=s.slice(c);break}}else for(n=M;n!==O;n+=E)if(a=r.yaxes[n],-1!==d.cartesian.indexOf(T+a)){w[T]=a;break}}else if("l"===R.charAt(0)?(M=0,E=1,O=C):(M=C-1,E=-1,O=-1),A){var L=I[T];for(n=M;n!==O;n+=E)if((s=l[L][n])&&(c=s.indexOf("y"),s.slice(c)===T)){w[T]=s.slice(0,c);break}}else for(n=M;n!==O;n+=E)if(o=r.xaxes[n],-1!==d.cartesian.indexOf(o+T)){w[T]=o;break}}}}}},{"../../lib":426,"../../lib/regex":442,"../../plot_api/plot_template":463,"../../plots/cartesian/constants":479,"../../plots/domain":498}],348:[function(t,e,r){"use strict";var n=t("../../plots/cartesian/constants"),i=t("../../plot_api/plot_template").templatedArray;e.exports=i("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",n.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",n.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../plot_api/plot_template":463,"../../plots/cartesian/constants":479}],349:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../../lib/to_log_range");e.exports=function(t,e,r,o){e=e||{};var a="log"===r&&"linear"===e.type,s="linear"===r&&"log"===e.type;if(a||s)for(var l,g,c=t._fullLayout.images,u=e._id.charAt(0),h=0;h<c.length;h++)if(g="images["+h+"].",(l=c[h])[u+"ref"]===e._id){var d=l[u],A=l["size"+u],f=null,C=null;if(a){f=i(d,e.range);var p=A/Math.pow(10,f)/2;C=2*Math.log(p+Math.sqrt(1+p*p))/Math.LN10}else C=(f=Math.pow(10,d))*(Math.pow(10,A/2)-Math.pow(10,-A/2));n(f)?n(C)||(C=null):(f=null,C=null),o(g+u,f),o(g+"size"+u,C)}}},{"../../lib/to_log_range":452,"fast-isnumeric":145}],350:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../plots/cartesian/axes"),o=t("../../plots/array_container_defaults"),a=t("./attributes");function s(t,e,r){function o(r,i){return n.coerce(t,e,a,r,i)}if(!o("visible",!!o("source")))return e;o("layer"),o("xanchor"),o("yanchor"),o("sizex"),o("sizey"),o("sizing"),o("opacity");for(var s={_fullLayout:r},l=["x","y"],g=0;g<2;g++){var c=l[g],u=i.coerceRef(t,e,s,c,"paper");if("paper"!==u)i.getFromId(s,u)._imgIndices.push(e._index);i.coercePosition(e,s,o,u,c,0)}return e}e.exports=function(t,e){o(t,e,{name:"images",handleItemDefaults:s})}},{"../../lib":426,"../../plots/array_container_defaults":469,"../../plots/cartesian/axes":473,"./attributes":348}],351:[function(t,e,r){"use strict";var n=t("d3"),i=t("../drawing"),o=t("../../plots/cartesian/axes"),a=t("../../constants/xmlns_namespaces");e.exports=function(t){var e,r,s=t._fullLayout,l=[],g={},c=[];for(r=0;r<s.images.length;r++){var u=s.images[r];if(u.visible)if("below"===u.layer&&"paper"!==u.xref&&"paper"!==u.yref){e=u.xref+u.yref;var h=s._plots[e];if(!h){c.push(u);continue}h.mainplot&&(e=h.mainplot.id),g[e]||(g[e]=[]),g[e].push(u)}else"above"===u.layer?l.push(u):c.push(u)}var d={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};function A(e){var r=n.select(this);if(this._imgSrc!==e.source)if(r.attr("xmlns",a.svg),e.source&&"data:"===e.source.slice(0,5))r.attr("xlink:href",e.source),this._imgSrc=e.source;else{var i=new Promise(function(t){var n=new Image;function i(){r.remove(),t()}this.img=n,n.setAttribute("crossOrigin","anonymous"),n.onerror=i,n.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);var n=e.toDataURL("image/png");r.attr("xlink:href",n),t()},r.on("error",i),n.src=e.source,this._imgSrc=e.source}.bind(this));t._promises.push(i)}}function f(e){var r=n.select(this),a=o.getFromId(t,e.xref),l=o.getFromId(t,e.yref),g=s._size,c=a?Math.abs(a.l2p(e.sizex)-a.l2p(0)):e.sizex*g.w,u=l?Math.abs(l.l2p(e.sizey)-l.l2p(0)):e.sizey*g.h,h=c*d.x[e.xanchor].offset,A=u*d.y[e.yanchor].offset,f=d.x[e.xanchor].sizing+d.y[e.yanchor].sizing,C=(a?a.r2p(e.x)+a._offset:e.x*g.w+g.l)+h,p=(l?l.r2p(e.y)+l._offset:g.h-e.y*g.h+g.t)+A;switch(e.sizing){case"fill":f+=" slice";break;case"stretch":f="none"}r.attr({x:C,y:p,width:c,height:u,preserveAspectRatio:f,opacity:e.opacity});var I=(a?a._id:"")+(l?l._id:"");i.setClipUrl(r,I?"clip"+s._uid+I:null,t)}var C=s._imageLowerLayer.selectAll("image").data(c),p=s._imageUpperLayer.selectAll("image").data(l);C.enter().append("image"),p.enter().append("image"),C.exit().remove(),p.exit().remove(),C.each(function(t){A.bind(this)(t),f.bind(this)(t)}),p.each(function(t){A.bind(this)(t),f.bind(this)(t)});var I=Object.keys(s._plots);for(r=0;r<I.length;r++){e=I[r];var v=s._plots[e];if(v.imagelayer){var m=v.imagelayer.selectAll("image").data(g[e]||[]);m.enter().append("image"),m.exit().remove(),m.each(function(t){A.bind(this)(t),f.bind(this)(t)})}}}},{"../../constants/xmlns_namespaces":405,"../../plots/cartesian/axes":473,"../drawing":325,d3:74}],352:[function(t,e,r){"use strict";e.exports={moduleType:"component",name:"images",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("images"),draw:t("./draw"),convertCoords:t("./convert_coords")}},{"../../plots/cartesian/include_components":483,"./attributes":348,"./convert_coords":349,"./defaults":350,"./draw":351}],353:[function(t,e,r){"use strict";var n=t("../../plots/font_attributes"),i=t("../color/attributes");e.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:n({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:n({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":499,"../color/attributes":303}],354:[function(t,e,r){"use strict";e.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,textGap:40,itemGap:5}},{}],355:[function(t,e,r){"use strict";var n=t("../../registry"),i=t("../../lib"),o=t("../../plot_api/plot_template"),a=t("./attributes"),s=t("../../plots/layout_attributes"),l=t("./helpers");e.exports=function(t,e,r){for(var g=t.legend||{},c=0,u=!1,h="normal",d=0;d<r.length;d++){var A=r[d];A.visible&&((A.showlegend||A._dfltShowLegend&&!(A._module&&A._module.attributes&&A._module.attributes.showlegend&&!1===A._module.attributes.showlegend.dflt))&&(c++,A.showlegend&&(u=!0,(n.traceIs(A,"pie-like")||!0===A._input.showlegend)&&c++)),(n.traceIs(A,"bar")&&"stack"===e.barmode||-1!==["tonextx","tonexty"].indexOf(A.fill))&&(h=l.isGrouped({traceorder:h})?"grouped+reversed":"reversed"),void 0!==A.legendgroup&&""!==A.legendgroup&&(h=l.isReversed({traceorder:h})?"reversed+grouped":"grouped"))}var f=i.coerce(t,e,s,"showlegend",u&&c>1);if(!1!==f||g.uirevision){var C=o.newContainer(e,"legend");if(y("uirevision",e.uirevision),!1!==f){y("bgcolor",e.paper_bgcolor),y("bordercolor"),y("borderwidth"),i.coerceFont(y,"font",e.font);var p,I,v,m=y("orientation");"h"===m?(p=0,n.getComponentMethod("rangeslider","isVisible")(t.xaxis)?(I=1.1,v="bottom"):(I=-.1,v="top")):(p=1.02,I=1,v="auto"),y("traceorder",h),l.isGrouped(e.legend)&&y("tracegroupgap"),y("itemsizing"),y("itemclick"),y("itemdoubleclick"),y("x",p),y("xanchor"),y("y",I),y("yanchor",v),y("valign"),i.noneOrAll(g,C,["x","y"]),y("title.text")&&(y("title.side","h"===m?"left":"top"),i.coerceFont(y,"title.font",e.font))}}function y(t,e){return i.coerce(g,C,a,t,e)}}},{"../../lib":426,"../../plot_api/plot_template":463,"../../plots/layout_attributes":513,"../../registry":524,"./attributes":353,"./helpers":359}],356:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../lib"),o=t("../../plots/plots"),a=t("../../registry"),s=t("../../lib/events"),l=t("../dragelement"),g=t("../drawing"),c=t("../color"),u=t("../../lib/svg_text_utils"),h=t("./handle_click"),d=t("./constants"),A=t("../../constants/alignment"),f=A.LINE_SPACING,C=A.FROM_TL,p=A.FROM_BR,I=t("./get_legend_data"),v=t("./style"),m=t("./helpers");function y(t,e,r,n,i){var o=r.data()[0][0].trace,l={event:i,node:r.node(),curveNumber:o.index,expandedIndex:o._expandedIndex,data:t.data,layout:t.layout,frames:t._transitionData._frames,config:t._context,fullData:t._fullData,fullLayout:t._fullLayout};if(o._group&&(l.group=o._group),a.traceIs(o,"pie-like")&&(l.label=r.datum()[0].label),!1!==s.triggerHandler(t,"plotly_legendclick",l))if(1===n)e._clickTimeout=setTimeout(function(){h(r,t,n)},t._context.doubleClickDelay);else if(2===n){e._clickTimeout&&clearTimeout(e._clickTimeout),t._legendMouseDownTime=0,!1!==s.triggerHandler(t,"plotly_legenddoubleclick",l)&&h(r,t,n)}}function b(t,e,r){var n,o=t.data()[0][0],s=o.trace,l=a.traceIs(s,"pie-like"),c=s.index,h=r._main&&e._context.edits.legendText&&!l,A=r._maxNameLength;r.entries?n=o.text:(n=l?o.label:s.name,s._meta&&(n=i.templateString(n,s._meta)));var f=i.ensureSingle(t,"text","legendtext");f.attr("text-anchor","start").classed("user-select-none",!0).call(g.font,r.font).text(h?x(n,A):n),u.positionText(f,d.textGap,0),h?f.call(u.makeEditable,{gd:e,text:n}).call(w,t,e,r).on("edit",function(n){this.text(x(n,A)).call(w,t,e,r);var s=o.trace._fullInput||{},l={};if(a.hasTransform(s,"groupby")){var g=a.getTransformIndices(s,"groupby"),u=g[g.length-1],h=i.keyedContainer(s,"transforms["+u+"].styles","target","value.name");h.set(o.trace._group,n),l=h.constructUpdate()}else l.name=n;return a.call("_guiRestyle",e,l,c)}):w(f,t,e,r)}function x(t,e){var r=Math.max(4,e);if(t&&t.trim().length>=r/2)return t;for(var n=r-(t=t||"").length;n>0;n--)t+=" ";return t}function _(t,e){var r,o=e._context.doubleClickDelay,a=1,s=i.ensureSingle(t,"rect","legendtoggle",function(t){t.style("cursor","pointer").attr("pointer-events","all").call(c.fill,"rgba(0,0,0,0)")});s.on("mousedown",function(){(r=(new Date).getTime())-e._legendMouseDownTime<o?a+=1:(a=1,e._legendMouseDownTime=r)}),s.on("mouseup",function(){if(!e._dragged&&!e._editing){var r=e._fullLayout.legend;(new Date).getTime()-e._legendMouseDownTime>o&&(a=Math.max(a-1,1)),y(e,r,t,a,n.event)}})}function w(t,e,r,n){n._main||t.attr("data-notex",!0),u.convertToTspans(t,r,function(){!function(t,e,r){var n=t.data()[0][0];if(r._main&&n&&!n.trace.showlegend)return void t.remove();var i=t.select("g[class*=math-group]"),o=i.node();r||(r=e._fullLayout.legend);var a,s,l=r.borderwidth,c=(n?r:r.title).font.size*f;if(o){var h=g.bBox(o);a=h.height,s=h.width,n?g.setTranslate(i,0,.25*a):g.setTranslate(i,l,.75*a+l)}else{var A=t.select(n?".legendtext":".legendtitletext"),C=u.lineCount(A),p=A.node();a=c*C,s=p?g.bBox(p).width:0;var I=c*((C-1)/2-.3);n?u.positionText(A,d.textGap,-I):u.positionText(A,d.titlePad+l,c+l)}n?(n.lineHeight=c,n.height=Math.max(a,16)+3,n.width=s):(r._titleWidth=s,r._titleHeight=a)}(e,r,n)})}function k(t){return i.isRightAnchor(t)?"right":i.isCenterAnchor(t)?"center":"left"}function T(t){return i.isBottomAnchor(t)?"bottom":i.isMiddleAnchor(t)?"middle":"top"}e.exports=function(t,e){var r,s=t._fullLayout,u="legend"+s._uid;if(e?(r=e.layer,u+="-hover"):((e=s.legend||{})._main=!0,r=s._infolayer),r){var h;if(t._legendMouseDownTime||(t._legendMouseDownTime=0),e._main){if(!t.calcdata)return;h=s.showlegend&&I(t.calcdata,e)}else{if(!e.entries)return;h=I(e.entries,e)}var A=s.hiddenlabels||[];if(e._main&&(!s.showlegend||!h.length))return r.selectAll(".legend").remove(),s._topdefs.select("#"+u).remove(),o.autoMargin(t,"legend");var f=i.ensureSingle(r,"g","legend",function(t){e._main&&t.attr("pointer-events","all")}),x=i.ensureSingleById(s._topdefs,"clipPath",u,function(t){t.append("rect")}),M=i.ensureSingle(f,"rect","bg",function(t){t.attr("shape-rendering","crispEdges")});M.call(c.stroke,e.bordercolor).call(c.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px");var E=i.ensureSingle(f,"g","scrollbox"),O=e.title;if(e._titleWidth=0,e._titleHeight=0,O.text){var S=i.ensureSingle(E,"text","legendtitletext");S.attr("text-anchor","start").classed("user-select-none",!0).call(g.font,O.font).text(O.text),w(S,E,t,e)}var R=i.ensureSingle(f,"rect","scrollbar",function(t){t.attr(d.scrollBarEnterAttrs).call(c.fill,d.scrollBarColor)}),D=E.selectAll("g.groups").data(h);D.enter().append("g").attr("class","groups"),D.exit().remove();var L=D.selectAll("g.traces").data(i.identity);L.enter().append("g").attr("class","traces"),L.exit().remove(),L.style("opacity",function(t){var e=t[0].trace;return a.traceIs(e,"pie-like")?-1!==A.indexOf(t[0].label)?.5:1:"legendonly"===e.visible?.5:1}).each(function(){n.select(this).call(b,t,e)}).call(v,t,e).each(function(){e._main&&n.select(this).call(_,t)}),i.syncOrAsync([o.previousPromises,function(){return function(t,e,r,i){var o=t._fullLayout;i||(i=o.legend);var a=o._size,s=m.isVertical(i),l=m.isGrouped(i),c=i.borderwidth,u=2*c,h=d.textGap,A=d.itemGap,f=2*(c+A),C=T(i),p=i.y<0||0===i.y&&"top"===C,I=i.y>1||1===i.y&&"bottom"===C;i._maxHeight=Math.max(p||I?o.height/2:a.h,30);var v=0;i._width=0,i._height=0;var y=function(t){var e=0,r=0,n=t.title.side;n&&(-1!==n.indexOf("left")&&(e=t._titleWidth),-1!==n.indexOf("top")&&(r=t._titleHeight));return[e,r]}(i);if(s)r.each(function(t){var e=t[0].height;g.setTranslate(this,c+y[0],c+y[1]+i._height+e/2+A),i._height+=e,i._width=Math.max(i._width,t[0].width)}),v=h+i._width,i._width+=A+h+u,i._height+=f,l&&(e.each(function(t,e){g.setTranslate(this,0,e*i.tracegroupgap)}),i._height+=(i._lgroupsLength-1)*i.tracegroupgap);else{var b=k(i),x=i.x<0||0===i.x&&"right"===b,_=i.x>1||1===i.x&&"left"===b,w=I||p,M=o.width/2;i._maxWidth=Math.max(x?w&&"left"===b?a.l+a.w:M:_?w&&"right"===b?a.r+a.w:M:a.w,2*h);var E=0,O=0;r.each(function(t){var e=t[0].width+h;E=Math.max(E,e),O+=e}),v=null;var S=0;if(l){var R=0,D=0,L=0;e.each(function(){var t=0,e=0;n.select(this).selectAll("g.traces").each(function(r){var n=r[0].height;g.setTranslate(this,y[0],y[1]+c+A+n/2+e),e+=n,t=Math.max(t,h+r[0].width)}),R=Math.max(R,e);var r=t+A;r+c+D>i._maxWidth&&(S=Math.max(S,D),D=0,L+=R+i.tracegroupgap,R=e),g.setTranslate(this,D,L),D+=r}),i._width=Math.max(S,D)+c,i._height=L+R+f}else{var P=r.size(),N=O+u+(P-1)*A<i._maxWidth,z=0,F=0,B=0,j=0;r.each(function(t){var e=t[0].height,r=h+t[0].width,n=(N?r:E)+A;n+c+F>i._maxWidth&&(S=Math.max(S,j),F=0,B+=z,i._height+=z,z=0),g.setTranslate(this,y[0]+c+F,y[1]+c+B+e/2+A),j=F+r+A,F+=n,z=Math.max(z,e)}),N?(i._width=F+u,i._height=z+f):(i._width=Math.max(S,j)+u,i._height+=z+f)}}i._width=Math.ceil(Math.max(i._width+y[0],i._titleWidth+2*(c+d.titlePad))),i._height=Math.ceil(Math.max(i._height+y[1],i._titleHeight+2*(c+d.itemGap))),i._effHeight=Math.min(i._height,i._maxHeight);var V=t._context.edits,G=V.legendText||V.legendPosition;r.each(function(t){var e=n.select(this).select(".legendtoggle"),r=t[0].height,i=G?h:v||h+t[0].width;s||(i+=A/2),g.setRect(e,0,-r/2,i,r)})}(t,D,L,e)},function(){if(!e._main||!function(t){var e=t._fullLayout.legend,r=k(e),n=T(e);return o.autoMargin(t,"legend",{x:e.x,y:e.y,l:e._width*C[r],r:e._width*p[r],b:e._effHeight*p[n],t:e._effHeight*C[n]})}(t)){var c,h,A,I,v=s._size,m=e.borderwidth,b=v.l+v.w*e.x-C[k(e)]*e._width,_=v.t+v.h*(1-e.y)-C[T(e)]*e._effHeight;if(e._main&&s.margin.autoexpand){var w=b,O=_;b=i.constrain(b,0,s.width-e._width),_=i.constrain(_,0,s.height-e._effHeight),b!==w&&i.log("Constrain legend.x to make legend fit inside graph"),_!==O&&i.log("Constrain legend.y to make legend fit inside graph")}if(e._main&&g.setTranslate(f,b,_),R.on(".drag",null),f.on("wheel",null),!e._main||e._height<=e._maxHeight||t._context.staticPlot){var S=e._effHeight;e._main||(S=e._height),M.attr({width:e._width-m,height:S-m,x:m/2,y:m/2}),g.setTranslate(E,0,0),x.select("rect").attr({width:e._width-2*m,height:S-2*m,x:m,y:m}),g.setClipUrl(E,u,t),g.setRect(R,0,0,0,0),delete e._scrollY}else{var D,L,P,N=Math.max(d.scrollBarMinHeight,e._effHeight*e._effHeight/e._height),z=e._effHeight-N-2*d.scrollBarMargin,F=e._height-e._effHeight,B=z/F,j=Math.min(e._scrollY||0,F);M.attr({width:e._width-2*m+d.scrollBarWidth+d.scrollBarMargin,height:e._effHeight-m,x:m/2,y:m/2}),x.select("rect").attr({width:e._width-2*m+d.scrollBarWidth+d.scrollBarMargin,height:e._effHeight-2*m,x:m,y:m+j}),g.setClipUrl(E,u,t),U(j,N,B),f.on("wheel",function(){U(j=i.constrain(e._scrollY+n.event.deltaY/z*F,0,F),N,B),0!==j&&j!==F&&n.event.preventDefault()});var V=n.behavior.drag().on("dragstart",function(){var t=n.event.sourceEvent;D="touchstart"===t.type?t.changedTouches[0].clientY:t.clientY,P=j}).on("drag",function(){var t=n.event.sourceEvent;2===t.buttons||t.ctrlKey||(L="touchmove"===t.type?t.changedTouches[0].clientY:t.clientY,U(j=function(t,e,r){var n=(r-e)/B+t;return i.constrain(n,0,F)}(P,D,L),N,B))});R.call(V);var G=n.behavior.drag().on("dragstart",function(){var t=n.event.sourceEvent;"touchstart"===t.type&&(D=t.changedTouches[0].clientY,P=j)}).on("drag",function(){var t=n.event.sourceEvent;"touchmove"===t.type&&(L=t.changedTouches[0].clientY,U(j=function(t,e,r){var n=(e-r)/B+t;return i.constrain(n,0,F)}(P,D,L),N,B))});E.call(G)}if(t._context.edits.legendPosition)f.classed("cursor-move",!0),l.init({element:f.node(),gd:t,prepFn:function(){var t=g.getTranslate(f);A=t.x,I=t.y},moveFn:function(t,r){var n=A+t,i=I+r;g.setTranslate(f,n,i),c=l.align(n,0,v.l,v.l+v.w,e.xanchor),h=l.align(i,0,v.t+v.h,v.t,e.yanchor)},doneFn:function(){void 0!==c&&void 0!==h&&a.call("_guiRelayout",t,{"legend.x":c,"legend.y":h})},clickFn:function(e,n){var i=r.selectAll("g.traces").filter(function(){var t=this.getBoundingClientRect();return n.clientX>=t.left&&n.clientX<=t.right&&n.clientY>=t.top&&n.clientY<=t.bottom});i.size()>0&&y(t,f,i,e,n)}})}function U(r,n,i){e._scrollY=t._fullLayout.legend._scrollY=r,g.setTranslate(E,0,-r),g.setRect(R,e._width,d.scrollBarMargin+r*i,d.scrollBarWidth,n),x.select("rect").attr("y",m+r)}}],t)}}},{"../../constants/alignment":399,"../../lib":426,"../../lib/events":418,"../../lib/svg_text_utils":450,"../../plots/plots":515,"../../registry":524,"../color":304,"../dragelement":322,"../drawing":325,"./constants":354,"./get_legend_data":357,"./handle_click":358,"./helpers":359,"./style":361,d3:74}],357:[function(t,e,r){"use strict";var n=t("../../registry"),i=t("./helpers");e.exports=function(t,e){var r,o,a={},s=[],l=!1,g={},c=0,u=0,h=e._main;function d(t,r){if(""!==t&&i.isGrouped(e))-1===s.indexOf(t)?(s.push(t),l=!0,a[t]=[[r]]):a[t].push([r]);else{var n="~~i"+c;s.push(n),a[n]=[[r]],c++}}for(r=0;r<t.length;r++){var A=t[r],f=A[0],C=f.trace,p=C.legendgroup;if(!h||C.visible&&C.showlegend)if(n.traceIs(C,"pie-like"))for(g[p]||(g[p]={}),o=0;o<A.length;o++){var I=A[o].label;g[p][I]||(d(p,{label:I,color:A[o].color,i:A[o].i,trace:C,pts:A[o].pts}),g[p][I]=!0,u=Math.max(u,(I||"").length))}else d(p,f),u=Math.max(u,(C.name||"").length)}if(!s.length)return[];var v,m,y=s.length;if(l&&i.isGrouped(e))for(m=new Array(y),r=0;r<y;r++)v=a[s[r]],m[r]=i.isReversed(e)?v.reverse():v;else{for(m=[new Array(y)],r=0;r<y;r++)v=a[s[r]][0],m[0][i.isReversed(e)?y-r-1:r]=v;y=1}return e._lgroupsLength=y,e._maxNameLength=u,m}},{"../../registry":524,"./helpers":359}],358:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../registry"),o=!0;e.exports=function(t,e,r){var a=e._fullLayout;if(!e._dragged&&!e._editing){var s,l=a.legend.itemclick,g=a.legend.itemdoubleclick;if(1===r&&"toggle"===l&&"toggleothers"===g&&o&&e.data&&e._context.showTips?(n.notifier(n._(e,"Double-click on legend to isolate one trace"),"long"),o=!1):o=!1,1===r?s=l:2===r&&(s=g),s){var c,u,h,d,A,f=a.hiddenlabels?a.hiddenlabels.slice():[],C=t.data()[0][0],p=e._fullData,I=C.trace,v=I.legendgroup,m={},y=[],b=[],x=[];if(i.traceIs(I,"pie-like")){var _=C.label,w=f.indexOf(_);"toggle"===s?-1===w?f.push(_):f.splice(w,1):"toggleothers"===s&&(f=[],e.calcdata[0].forEach(function(t){_!==t.label&&f.push(t.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===f.length&&-1===w&&(f=[])),i.call("_guiRelayout",e,"hiddenlabels",f)}else{var k,T=v&&v.length,M=[];if(T)for(c=0;c<p.length;c++)(k=p[c]).visible&&k.legendgroup===v&&M.push(c);if("toggle"===s){var E;switch(I.visible){case!0:E="legendonly";break;case!1:E=!1;break;case"legendonly":E=!0}if(T)for(c=0;c<p.length;c++)!1!==p[c].visible&&p[c].legendgroup===v&&F(p[c],E);else F(I,E)}else if("toggleothers"===s){var O,S,R,D,L=!0;for(c=0;c<p.length;c++)if(O=p[c]===I,R=!0!==p[c].showlegend,!(O||R||(S=T&&p[c].legendgroup===v)||!0!==p[c].visible||i.traceIs(p[c],"notLegendIsolatable"))){L=!1;break}for(c=0;c<p.length;c++)if(!1!==p[c].visible&&!i.traceIs(p[c],"notLegendIsolatable"))switch(I.visible){case"legendonly":F(p[c],!0);break;case!0:D=!!L||"legendonly",O=p[c]===I,R=!0!==p[c].showlegend&&!p[c].legendgroup,S=O||T&&p[c].legendgroup===v,F(p[c],!(!S&&!R)||D)}}for(c=0;c<b.length;c++)if(h=b[c]){var P=h.constructUpdate(),N=Object.keys(P);for(u=0;u<N.length;u++)d=N[u],(m[d]=m[d]||[])[x[c]]=P[d]}for(A=Object.keys(m),c=0;c<A.length;c++)for(d=A[c],u=0;u<y.length;u++)m[d].hasOwnProperty(u)||(m[d][u]=void 0);i.call("_guiRestyle",e,m,y)}}}function z(t,e,r){var n=y.indexOf(t),i=m[e];return i||(i=m[e]=[]),-1===y.indexOf(t)&&(y.push(t),n=y.length-1),i[n]=r,n}function F(t,e){var r=t._fullInput;if(i.hasTransform(r,"groupby")){var o=b[r.index];if(!o){var a=i.getTransformIndices(r,"groupby"),s=a[a.length-1];o=n.keyedContainer(r,"transforms["+s+"].styles","target","value.visible"),b[r.index]=o}var l=o.get(t._group);void 0===l&&(l=!0),!1!==l&&o.set(t._group,e),x[r.index]=z(r.index,"visible",!1!==r.visible)}else{var g=!1!==r.visible&&e;z(r.index,"visible",g)}}}},{"../../lib":426,"../../registry":524}],359:[function(t,e,r){"use strict";r.isGrouped=function(t){return-1!==(t.traceorder||"").indexOf("grouped")},r.isVertical=function(t){return"h"!==t.orientation},r.isReversed=function(t){return-1!==(t.traceorder||"").indexOf("reversed")}},{}],360:[function(t,e,r){"use strict";e.exports={moduleType:"component",name:"legend",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw"),style:t("./style")}},{"./attributes":353,"./defaults":355,"./draw":356,"./style":361}],361:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../registry"),o=t("../../lib"),a=t("../drawing"),s=t("../color"),l=t("../colorscale/helpers").extractOpts,g=t("../../traces/scatter/subtypes"),c=t("../../traces/pie/style_one"),u=t("../../traces/pie/helpers").castOption,h=12,d=5,A=2,f=10,C=5;function p(t,e){return(e?"radial":"horizontal")+(t?"":"reversed")}e.exports=function(t,e,r){var I=e._fullLayout;r||(r=I.legend);var v="constant"===r.itemsizing,m=function(t,e,r,n){var i;if(t+1)i=t;else{if(!(e&&e.width>0))return 0;i=e.width}return v?n:Math.min(i,r)};function y(t,e,r){var o=t[0].trace,a=o.marker||{},l=a.line||{},g=r?o.visible&&o.type===r:i.traceIs(o,"bar"),c=n.select(e).select("g.legendpoints").selectAll("path.legend"+r).data(g?[t]:[]);c.enter().append("path").classed("legend"+r,!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),c.exit().remove(),c.each(function(t){var e=n.select(this),r=t[0],i=m(r.mlw,a.line,C,A);e.style("stroke-width",i+"px").call(s.fill,r.mc||a.color),i&&s.stroke(e,r.mlc||l.color)})}function b(t,e,r){var a=t[0],s=a.trace,l=r?s.visible&&s.type===r:i.traceIs(s,r),g=n.select(e).select("g.legendpoints").selectAll("path.legend"+r).data(l?[t]:[]);if(g.enter().append("path").classed("legend"+r,!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),g.exit().remove(),g.size()){var h=(s.marker||{}).line,d=m(u(h.width,a.pts),h,C,A),f=o.minExtend(s,{marker:{line:{width:d}}});f.marker.line.color=h.color;var p=o.minExtend(a,{trace:f});c(g,p,f)}}t.each(function(t){var e=n.select(this),i=o.ensureSingle(e,"g","layers");i.style("opacity",t[0].trace.opacity);var a=r.valign,s=t[0].lineHeight,l=t[0].height;if("middle"!==a&&s&&l){var g={top:1,bottom:-1}[a]*(.5*(s-l+3));i.attr("transform","translate(0,"+g+")")}else i.attr("transform",null);i.selectAll("g.legendfill").data([t]).enter().append("g").classed("legendfill",!0),i.selectAll("g.legendlines").data([t]).enter().append("g").classed("legendlines",!0);var c=i.selectAll("g.legendsymbols").data([t]);c.enter().append("g").classed("legendsymbols",!0),c.selectAll("g.legendpoints").data([t]).enter().append("g").classed("legendpoints",!0)}).each(function(t){var r,i=t[0].trace,g=[];if(i.visible)switch(i.type){case"histogram2d":case"heatmap":g=[["M-15,-2V4H15V-2Z"]],r=!0;break;case"choropleth":case"choroplethmapbox":g=[["M-6,-6V6H6V-6Z"]],r=!0;break;case"densitymapbox":g=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],r="radial";break;case"cone":g=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],r=!1;break;case"streamtube":g=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],r=!1;break;case"surface":g=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],r=!0;break;case"mesh3d":g=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],r=!1;break;case"volume":g=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],r=!0;break;case"isosurface":g=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],r=!1}var c=n.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(g);c.enter().append("path").classed("legend3dandfriends",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1),c.exit().remove(),c.each(function(t,g){var c,u=n.select(this),h=l(i),d=h.colorscale,A=h.reversescale;if(d){if(!r){var f=d.length;c=0===g?d[A?f-1:0][1]:1===g?d[A?0:f-1][1]:d[Math.floor((f-1)/2)][1]}}else{var C=i.vertexcolor||i.facecolor||i.color;c=o.isArrayOrTypedArray(C)?C[g]||C[0]:C}u.attr("d",t[0]),c?u.call(s.fill,c):u.call(function(t){if(t.size()){var n="legendfill-"+i.uid;a.gradient(t,e,n,p(A,"radial"===r),d,"fill")}})})}).each(function(t){var e=t[0].trace,r="waterfall"===e.type;if(t[0]._distinct&&r){var i=t[0].trace[t[0].dir].marker;return t[0].mc=i.color,t[0].mlw=i.line.width,t[0].mlc=i.line.color,y(t,this,"waterfall")}var o=[];e.visible&&r&&(o=t[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var a=n.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(o);a.enter().append("path").classed("legendwaterfall",!0).attr("transform","translate(20,0)").style("stroke-miterlimit",1),a.exit().remove(),a.each(function(t){var r=n.select(this),i=e[t[0]].marker,o=m(void 0,i.line,C,A);r.attr("d",t[1]).style("stroke-width",o+"px").call(s.fill,i.color),o&&r.call(s.stroke,i.line.color)})}).each(function(t){y(t,this,"funnel")}).each(function(t){y(t,this)}).each(function(t){var r=t[0].trace,l=n.select(this).select("g.legendpoints").selectAll("path.legendbox").data(r.visible&&i.traceIs(r,"box-violin")?[t]:[]);l.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),l.exit().remove(),l.each(function(){var t=n.select(this);if("all"!==r.boxpoints&&"all"!==r.points||0!==s.opacity(r.fillcolor)||0!==s.opacity((r.line||{}).color)){var i=m(void 0,r.line,C,A);t.style("stroke-width",i+"px").call(s.fill,r.fillcolor),i&&s.stroke(t,r.line.color)}else{var g=o.minExtend(r,{marker:{size:v?h:o.constrain(r.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});l.call(a.pointStyle,g,e)}})}).each(function(t){b(t,this,"funnelarea")}).each(function(t){b(t,this,"pie")}).each(function(t){var r,i,s=t[0],c=s.trace,u=c.visible&&c.fill&&"none"!==c.fill,h=g.hasLines(c),A=c.contours,C=!1,I=!1,v=l(c),y=v.colorscale,b=v.reversescale;if(A){var x=A.coloring;"lines"===x?C=!0:h="none"===x||"heatmap"===x||A.showlines,"constraint"===A.type?u="="!==A._operation:"fill"!==x&&"heatmap"!==x||(I=!0)}var _=g.hasMarkers(c)||g.hasText(c)||!u&&!I?"M5,0":h||C?"M5,-2":"M5,-3",w=n.select(this),k=w.select(".legendfill").selectAll("path").data(u||I?[t]:[]);if(k.enter().append("path").classed("js-fill",!0),k.exit().remove(),k.attr("d",_+"h30v6h-30z").call(u?a.fillGroupStyle:function(t){if(t.size()){var r="legendfill-"+c.uid;a.gradient(t,e,r,p(b),y,"fill")}}),h||C){var T=m(void 0,c.line,f,d);i=o.minExtend(c,{line:{width:T}}),r=[o.minExtend(s,{trace:i})]}var M=w.select(".legendlines").selectAll("path").data(h||C?[r]:[]);M.enter().append("path").classed("js-line",!0),M.exit().remove(),M.attr("d",_+(C?"l30,0.0001":"h30")).call(h?a.lineGroupStyle:function(t){if(t.size()){var r="legendline-"+c.uid;a.lineGroupStyle(t),a.gradient(t,e,r,p(b),y,"stroke")}})}).each(function(t){var r,i,s=t[0],l=s.trace,c=g.hasMarkers(l),u=g.hasText(l),f=g.hasLines(l);function C(t,e,r,n){var i=o.nestedProperty(l,t).get(),a=o.isArrayOrTypedArray(i)&&e?e(i):i;if(v&&a&&void 0!==n&&(a=n),r){if(a<r[0])return r[0];if(a>r[1])return r[1]}return a}function p(t){return s._distinct&&s.index&&t[s.index]?t[s.index]:t[0]}if(c||u||f){var I={},m={};if(c){I.mc=C("marker.color",p),I.mx=C("marker.symbol",p),I.mo=C("marker.opacity",o.mean,[.2,1]),I.mlc=C("marker.line.color",p),I.mlw=C("marker.line.width",o.mean,[0,5],A),m.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var y=C("marker.size",o.mean,[2,16],h);I.ms=y,m.marker.size=y}f&&(m.line={width:C("line.width",p,[0,10],d)}),u&&(I.tx="Aa",I.tp=C("textposition",p),I.ts=10,I.tc=C("textfont.color",p),I.tf=C("textfont.family",p)),r=[o.minExtend(s,I)],(i=o.minExtend(l,m)).selectedpoints=null,i.texttemplate=null}var b=n.select(this).select("g.legendpoints"),x=b.selectAll("path.scatterpts").data(c?r:[]);x.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform","translate(20,0)"),x.exit().remove(),x.call(a.pointStyle,i,e),c&&(r[0].mrc=3);var _=b.selectAll("g.pointtext").data(u?r:[]);_.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),_.exit().remove(),_.selectAll("text").call(a.textPointStyle,i,e)}).each(function(t){var e=t[0].trace,r=n.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(e.visible&&"candlestick"===e.type?[t,t]:[]);r.enter().append("path").classed("legendcandle",!0).attr("d",function(t,e){return e?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1),r.exit().remove(),r.each(function(t,r){var i=n.select(this),o=e[r?"increasing":"decreasing"],a=m(void 0,o.line,C,A);i.style("stroke-width",a+"px").call(s.fill,o.fillcolor),a&&s.stroke(i,o.line.color)})}).each(function(t){var e=t[0].trace,r=n.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(e.visible&&"ohlc"===e.type?[t,t]:[]);r.enter().append("path").classed("legendohlc",!0).attr("d",function(t,e){return e?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1),r.exit().remove(),r.each(function(t,r){var i=n.select(this),o=e[r?"increasing":"decreasing"],l=m(void 0,o.line,C,A);i.style("fill","none").call(a.dashLine,o.line.dash,l),l&&s.stroke(i,o.line.color)})})}},{"../../lib":426,"../../registry":524,"../../traces/pie/helpers":584,"../../traces/pie/style_one":585,"../../traces/scatter/subtypes":611,"../color":304,"../colorscale/helpers":315,"../drawing":325,d3:74}],362:[function(t,e,r){"use strict";var n=t("../../registry"),i=t("../../plots/plots"),o=t("../../plots/cartesian/axis_ids"),a=t("../../lib"),s=t("../../fonts/ploticon"),l=a._,g=e.exports={};function c(t,e){var r,i,a=e.currentTarget,s=a.getAttribute("data-attr"),l=a.getAttribute("data-val")||!0,g=t._fullLayout,c={},u=o.list(t,null,!0),h=g._cartesianSpikesEnabled;if("zoom"===s){var d,A="in"===l?.5:2,f=(1+A)/2,C=(1-A)/2;for(i=0;i<u.length;i++)if(!(r=u[i]).fixedrange)if(d=r._name,"auto"===l)c[d+".autorange"]=!0;else if("reset"===l){if(void 0===r._rangeInitial)c[d+".autorange"]=!0;else{var p=r._rangeInitial.slice();c[d+".range[0]"]=p[0],c[d+".range[1]"]=p[1]}void 0!==r._showSpikeInitial&&(c[d+".showspikes"]=r._showSpikeInitial,"on"!==h||r._showSpikeInitial||(h="off"))}else{var I=[r.r2l(r.range[0]),r.r2l(r.range[1])],v=[f*I[0]+C*I[1],f*I[1]+C*I[0]];c[d+".range[0]"]=r.l2r(v[0]),c[d+".range[1]"]=r.l2r(v[1])}}else"hovermode"!==s||"x"!==l&&"y"!==l||(l=g._isHoriz?"y":"x",a.setAttribute("data-val",l)),c[s]=l;g._cartesianSpikesEnabled=h,n.call("_guiRelayout",t,c)}function u(t,e){for(var r=e.currentTarget,i=r.getAttribute("data-attr"),o=r.getAttribute("data-val")||!0,a=t._fullLayout._subplots.gl3d||[],s={},l=i.split("."),g=0;g<a.length;g++)s[a[g]+"."+l[1]]=o;var c="pan"===o?o:"zoom";s.dragmode=c,n.call("_guiRelayout",t,s)}function h(t,e){for(var r=e.currentTarget.getAttribute("data-attr"),i=t._fullLayout,o=i._subplots.gl3d||[],a={},s=0;s<o.length;s++){var l,g=o[s],c=g+".camera",u=g+".aspectratio",h=g+".aspectmode",d=i[g]._scene;"resetLastSave"===r?(a[c+".up"]=d.viewInitial.up,a[c+".eye"]=d.viewInitial.eye,a[c+".center"]=d.viewInitial.center,l=!0):"resetDefault"===r&&(a[c+".up"]=null,a[c+".eye"]=null,a[c+".center"]=null,l=!0),l&&(a[u+".x"]=d.viewInitial.aspectratio.x,a[u+".y"]=d.viewInitial.aspectratio.y,a[u+".z"]=d.viewInitial.aspectratio.z,a[h]=d.viewInitial.aspectmode)}n.call("_guiRelayout",t,a)}function d(t,e){var r=e.currentTarget,n=r._previousVal,i=t._fullLayout,o=i._subplots.gl3d||[],a=["xaxis","yaxis","zaxis"],s={},l={};if(n)l=n,r._previousVal=null;else{for(var g=0;g<o.length;g++){var c=o[g],u=i[c],h=c+".hovermode";s[h]=u.hovermode,l[h]=!1;for(var d=0;d<3;d++){var A=a[d],f=c+"."+A+".showspikes";l[f]=!1,s[f]=u[A].showspikes}}r._previousVal=s}return l}function A(t,e){for(var r=e.currentTarget,i=r.getAttribute("data-attr"),o=r.getAttribute("data-val")||!0,a=t._fullLayout,s=a._subplots.geo||[],l=0;l<s.length;l++){var g=s[l],c=a[g];if("zoom"===i){var u=c.projection.scale,h="in"===o?2*u:.5*u;n.call("_guiRelayout",t,g+".projection.scale",h)}}"reset"===i&&I(t,"geo")}function f(t){var e=t._fullLayout;return!e.hovermode&&(e._has("cartesian")?e._isHoriz?"y":"x":"closest")}function C(t){var e=f(t);n.call("_guiRelayout",t,"hovermode",e)}function p(t,e){for(var r=e.currentTarget.getAttribute("data-val"),i=t._fullLayout,o=i._subplots.mapbox||[],a={},s=0;s<o.length;s++){var l=o[s],g=i[l].zoom,c="in"===r?1.05*g:g/1.05;a[l+".zoom"]=c}n.call("_guiRelayout",t,a)}function I(t,e){for(var r=t._fullLayout,i=r._subplots[e]||[],o={},a=0;a<i.length;a++)for(var s=i[a],l=r[s]._subplot.viewInitial,g=Object.keys(l),c=0;c<g.length;c++){var u=g[c];o[s+"."+u]=l[u]}n.call("_guiRelayout",t,o)}g.toImage={name:"toImage",title:function(t){var e=(t._context.toImageButtonOptions||{}).format||"png";return l(t,"png"===e?"Download plot as a png":"Download plot")},icon:s.camera,click:function(t){var e=t._context.toImageButtonOptions,r={format:e.format||"png"};a.notifier(l(t,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==r.format&&a.isIE()&&(a.notifier(l(t,"IE only supports svg.  Changing format to svg."),"long"),r.format="svg"),["filename","width","height","scale"].forEach(function(t){t in e&&(r[t]=e[t])}),n.call("downloadImage",t,r).then(function(e){a.notifier(l(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){a.notifier(l(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}},g.sendDataToCloud={name:"sendDataToCloud",title:function(t){return l(t,"Edit in Chart Studio")},icon:s.disk,click:function(t){i.sendDataToCloud(t)}},g.editInChartStudio={name:"editInChartStudio",title:function(t){return l(t,"Edit in Chart Studio")},icon:s.pencil,click:function(t){i.sendDataToCloud(t)}},g.zoom2d={name:"zoom2d",title:function(t){return l(t,"Zoom")},attr:"dragmode",val:"zoom",icon:s.zoombox,click:c},g.pan2d={name:"pan2d",title:function(t){return l(t,"Pan")},attr:"dragmode",val:"pan",icon:s.pan,click:c},g.select2d={name:"select2d",title:function(t){return l(t,"Box Select")},attr:"dragmode",val:"select",icon:s.selectbox,click:c},g.lasso2d={name:"lasso2d",title:function(t){return l(t,"Lasso Select")},attr:"dragmode",val:"lasso",icon:s.lasso,click:c},g.zoomIn2d={name:"zoomIn2d",title:function(t){return l(t,"Zoom in")},attr:"zoom",val:"in",icon:s.zoom_plus,click:c},g.zoomOut2d={name:"zoomOut2d",title:function(t){return l(t,"Zoom out")},attr:"zoom",val:"out",icon:s.zoom_minus,click:c},g.autoScale2d={name:"autoScale2d",title:function(t){return l(t,"Autoscale")},attr:"zoom",val:"auto",icon:s.autoscale,click:c},g.resetScale2d={name:"resetScale2d",title:function(t){return l(t,"Reset axes")},attr:"zoom",val:"reset",icon:s.home,click:c},g.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(t){return l(t,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:s.tooltip_basic,gravity:"ne",click:c},g.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(t){return l(t,"Compare data on hover")},attr:"hovermode",val:function(t){return t._fullLayout._isHoriz?"y":"x"},icon:s.tooltip_compare,gravity:"ne",click:c},g.zoom3d={name:"zoom3d",title:function(t){return l(t,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:s.zoombox,click:u},g.pan3d={name:"pan3d",title:function(t){return l(t,"Pan")},attr:"scene.dragmode",val:"pan",icon:s.pan,click:u},g.orbitRotation={name:"orbitRotation",title:function(t){return l(t,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:s["3d_rotate"],click:u},g.tableRotation={name:"tableRotation",title:function(t){return l(t,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:s["z-axis"],click:u},g.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(t){return l(t,"Reset camera to default")},attr:"resetDefault",icon:s.home,click:h},g.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(t){return l(t,"Reset camera to last save")},attr:"resetLastSave",icon:s.movie,click:h},g.hoverClosest3d={name:"hoverClosest3d",title:function(t){return l(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:function(t,e){var r=d(t,e);n.call("_guiRelayout",t,r)}},g.zoomInGeo={name:"zoomInGeo",title:function(t){return l(t,"Zoom in")},attr:"zoom",val:"in",icon:s.zoom_plus,click:A},g.zoomOutGeo={name:"zoomOutGeo",title:function(t){return l(t,"Zoom out")},attr:"zoom",val:"out",icon:s.zoom_minus,click:A},g.resetGeo={name:"resetGeo",title:function(t){return l(t,"Reset")},attr:"reset",val:null,icon:s.autoscale,click:A},g.hoverClosestGeo={name:"hoverClosestGeo",title:function(t){return l(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:C},g.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(t){return l(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:C},g.hoverClosestPie={name:"hoverClosestPie",title:function(t){return l(t,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:s.tooltip_basic,gravity:"ne",click:C},g.resetViewSankey={name:"resetSankeyGroup",title:function(t){return l(t,"Reset view")},icon:s.home,click:function(t){for(var e={"node.groups":[],"node.x":[],"node.y":[]},r=0;r<t._fullData.length;r++){var i=t._fullData[r]._viewInitial;e["node.groups"].push(i.node.groups.slice()),e["node.x"].push(i.node.x.slice()),e["node.y"].push(i.node.y.slice())}n.call("restyle",t,e)}},g.toggleHover={name:"toggleHover",title:function(t){return l(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:s.tooltip_basic,gravity:"ne",click:function(t,e){var r=d(t,e);r.hovermode=f(t),n.call("_guiRelayout",t,r)}},g.resetViews={name:"resetViews",title:function(t){return l(t,"Reset views")},icon:s.home,click:function(t,e){var r=e.currentTarget;r.setAttribute("data-attr","zoom"),r.setAttribute("data-val","reset"),c(t,e),r.setAttribute("data-attr","resetLastSave"),h(t,e),I(t,"geo"),I(t,"mapbox")}},g.toggleSpikelines={name:"toggleSpikelines",title:function(t){return l(t,"Toggle Spike Lines")},icon:s.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(t){var e=t._fullLayout,r=e._cartesianSpikesEnabled;e._cartesianSpikesEnabled="on"===r?"off":"on",n.call("_guiRelayout",t,function(t){for(var e="on"===t._fullLayout._cartesianSpikesEnabled,r=o.list(t,null,!0),n={},i=0;i<r.length;i++){var a=r[i];n[a._name+".showspikes"]=!!e||a._showSpikeInitial}return n}(t))}},g.resetViewMapbox={name:"resetViewMapbox",title:function(t){return l(t,"Reset view")},attr:"reset",icon:s.home,click:function(t){I(t,"mapbox")}},g.zoomInMapbox={name:"zoomInMapbox",title:function(t){return l(t,"Zoom in")},attr:"zoom",val:"in",icon:s.zoom_plus,click:p},g.zoomOutMapbox={name:"zoomOutMapbox",title:function(t){return l(t,"Zoom out")},attr:"zoom",val:"out",icon:s.zoom_minus,click:p}},{"../../fonts/ploticon":408,"../../lib":426,"../../plots/cartesian/axis_ids":476,"../../plots/plots":515,"../../registry":524}],363:[function(t,e,r){"use strict";r.manage=t("./manage")},{"./manage":364}],364:[function(t,e,r){"use strict";var n=t("../../plots/cartesian/axis_ids"),i=t("../../traces/scatter/subtypes"),o=t("../../registry"),a=t("../fx/helpers").isUnifiedHover,s=t("./modebar"),l=t("./buttons");e.exports=function(t){var e=t._fullLayout,r=t._context,g=e._modeBar;if(r.displayModeBar||r.watermark){if(!Array.isArray(r.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(r.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var c,u=r.modeBarButtons;c=Array.isArray(u)&&u.length?function(t){for(var e=0;e<t.length;e++)for(var r=t[e],n=0;n<r.length;n++){var i=r[n];if("string"==typeof i){if(void 0===l[i])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));t[e][n]=l[i]}}return t}(u):!r.displayModeBar&&r.watermark?[]:function(t){var e=t._fullLayout,r=t._fullData,s=t._context,g=s.modeBarButtonsToRemove,c=s.modeBarButtonsToAdd,u=e._has("cartesian"),h=e._has("gl3d"),d=e._has("geo"),A=e._has("pie"),f=e._has("funnelarea"),C=e._has("gl2d"),p=e._has("ternary"),I=e._has("mapbox"),v=e._has("polar"),m=e._has("sankey"),y=function(t){for(var e=n.list({_fullLayout:t},null,!0),r=0;r<e.length;r++)if(!e[r].fixedrange)return!1;return!0}(e),b=a(e.hovermode),x=[];function _(t){if(t.length){for(var e=[],r=0;r<t.length;r++){var n=t[r];-1===g.indexOf(n)&&e.push(l[n])}x.push(e)}}var w=["toImage"];s.showEditInChartStudio?w.push("editInChartStudio"):s.showSendToCloud&&w.push("sendDataToCloud");_(w);var k=[],T=[],M=[],E=[];(u||C||A||f||p)+d+h+I+v>1?(T=["toggleHover"],M=["resetViews"]):d?(k=["zoomInGeo","zoomOutGeo"],T=["hoverClosestGeo"],M=["resetGeo"]):h?(T=["hoverClosest3d"],M=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(k=["zoomInMapbox","zoomOutMapbox"],T=["toggleHover"],M=["resetViewMapbox"]):C?T=["hoverClosestGl2d"]:A?T=["hoverClosestPie"]:m?(T=["hoverClosestCartesian","hoverCompareCartesian"],M=["resetViewSankey"]):T=["toggleHover"];u&&(T=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]);((function(t){for(var e=0;e<t.length;e++)if(!o.traceIs(t[e],"noHover"))return!1;return!0})(r)||b)&&(T=[]);!u&&!C||y||(k=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==M[0]&&(M=["resetScale2d"]));h?E=["zoom3d","pan3d","orbitRotation","tableRotation"]:(u||C)&&!y||p?E=["zoom2d","pan2d"]:I||d?E=["pan2d"]:v&&(E=["zoom2d"]);(function(t){for(var e=!1,r=0;r<t.length&&!e;r++){var n=t[r];n._module&&n._module.selectPoints&&(o.traceIs(n,"scatter-like")?(i.hasMarkers(n)||i.hasText(n))&&(e=!0):o.traceIs(n,"box-violin")&&"all"!==n.boxpoints&&"all"!==n.points||(e=!0))}return e})(r)&&E.push("select2d","lasso2d");return _(E),_(k.concat(M)),_(T),function(t,e){if(e.length)if(Array.isArray(e[0]))for(var r=0;r<e.length;r++)t.push(e[r]);else t.push(e);return t}(x,c)}(t),g?g.update(t,c):e._modeBar=s(t,c)}else g&&(g.destroy(),delete e._modeBar)}},{"../../plots/cartesian/axis_ids":476,"../../registry":524,"../../traces/scatter/subtypes":611,"../fx/helpers":339,"./buttons":362,"./modebar":365}],365:[function(t,e,r){"use strict";var n=t("d3"),i=t("fast-isnumeric"),o=t("../../lib"),a=t("../../fonts/ploticon"),s=new DOMParser;function l(t){this.container=t.container,this.element=document.createElement("div"),this.update(t.graphInfo,t.buttons),this.container.appendChild(this.element)}var g=l.prototype;g.update=function(t,e){this.graphInfo=t;var r=this.graphInfo._context,n=this.graphInfo._fullLayout,i="modebar-"+n._uid;this.element.setAttribute("id",i),this._uid=i,this.element.className="modebar","hover"===r.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===n.modebar.orientation&&(this.element.className+=" vertical",e=e.reverse());var a=n.modebar,s="hover"===r.displayModeBar?".js-plotly-plot .plotly:hover ":"";o.deleteRelatedStyleRule(i),o.addRelatedStyleRule(i,s+"#"+i+" .modebar-group","background-color: "+a.bgcolor),o.addRelatedStyleRule(i,"#"+i+" .modebar-btn .icon path","fill: "+a.color),o.addRelatedStyleRule(i,"#"+i+" .modebar-btn:hover .icon path","fill: "+a.activecolor),o.addRelatedStyleRule(i,"#"+i+" .modebar-btn.active .icon path","fill: "+a.activecolor);var l=!this.hasButtons(e),g=this.hasLogo!==r.displaylogo,c=this.locale!==r.locale;if(this.locale=r.locale,(l||g||c)&&(this.removeAllButtons(),this.updateButtons(e),r.watermark||r.displaylogo)){var u=this.getLogo();r.watermark&&(u.className=u.className+" watermark"),"v"===n.modebar.orientation?this.element.insertBefore(u,this.element.childNodes[0]):this.element.appendChild(u),this.hasLogo=!0}this.updateActiveButton()},g.updateButtons=function(t){var e=this;this.buttons=t,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(t){var r=e.createGroup();t.forEach(function(t){var n=t.name;if(!n)throw new Error("must provide button 'name' in button config");if(-1!==e.buttonsNames.indexOf(n))throw new Error("button name '"+n+"' is taken");e.buttonsNames.push(n);var i=e.createButton(t);e.buttonElements.push(i),r.appendChild(i)}),e.element.appendChild(r)})},g.createGroup=function(){var t=document.createElement("div");return t.className="modebar-group",t},g.createButton=function(t){var e=this,r=document.createElement("a");r.setAttribute("rel","tooltip"),r.className="modebar-btn";var i=t.title;void 0===i?i=t.name:"function"==typeof i&&(i=i(this.graphInfo)),(i||0===i)&&r.setAttribute("data-title",i),void 0!==t.attr&&r.setAttribute("data-attr",t.attr);var o=t.val;if(void 0!==o&&("function"==typeof o&&(o=o(this.graphInfo)),r.setAttribute("data-val",o)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");r.addEventListener("click",function(r){t.click(e.graphInfo,r),e.updateActiveButton(r.currentTarget)}),r.setAttribute("data-toggle",t.toggle||!1),t.toggle&&n.select(r).classed("active",!0);var s=t.icon;return"function"==typeof s?r.appendChild(s()):r.appendChild(this.createIcon(s||a.question)),r.setAttribute("data-gravity",t.gravity||"n"),r},g.createIcon=function(t){var e,r=i(t.height)?Number(t.height):t.ascent-t.descent,n="http://www.w3.org/2000/svg";if(t.path){(e=document.createElementNS(n,"svg")).setAttribute("viewBox",[0,0,t.width,r].join(" ")),e.setAttribute("class","icon");var o=document.createElementNS(n,"path");o.setAttribute("d",t.path),t.transform?o.setAttribute("transform",t.transform):void 0!==t.ascent&&o.setAttribute("transform","matrix(1 0 0 -1 0 "+t.ascent+")"),e.appendChild(o)}t.svg&&(e=s.parseFromString(t.svg,"application/xml").childNodes[0]);return e.setAttribute("height","1em"),e.setAttribute("width","1em"),e},g.updateActiveButton=function(t){var e=this.graphInfo._fullLayout,r=void 0!==t?t.getAttribute("data-attr"):null;this.buttonElements.forEach(function(t){var i=t.getAttribute("data-val")||!0,a=t.getAttribute("data-attr"),s="true"===t.getAttribute("data-toggle"),l=n.select(t);if(s)a===r&&l.classed("active",!l.classed("active"));else{var g=null===a?a:o.nestedProperty(e,a).get();l.classed("active",g===i)}})},g.hasButtons=function(t){var e=this.buttons;if(!e)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r){if(t[r].length!==e[r].length)return!1;for(var n=0;n<t[r].length;n++)if(t[r][n].name!==e[r][n].name)return!1}return!0},g.getLogo=function(){var t=this.createGroup(),e=document.createElement("a");return e.href="https://plotly.com/",e.target="_blank",e.setAttribute("data-title",o._(this.graphInfo,"Produced with Plotly")),e.className="modebar-btn plotlyjsicon modebar-btn--logo",e.appendChild(this.createIcon(a.newplotlylogo)),t.appendChild(e),t},g.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},g.destroy=function(){o.removeElement(this.container.querySelector(".modebar")),o.deleteRelatedStyleRule(this._uid)},e.exports=function(t,e){var r=t._fullLayout,i=new l({graphInfo:t,container:r._modebardiv.node(),buttons:e});return r._privateplot&&n.select(i.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),i}},{"../../fonts/ploticon":408,"../../lib":426,d3:74,"fast-isnumeric":145}],366:[function(t,e,r){"use strict";var n=t("../../plots/font_attributes"),i=t("../color/attributes"),o=(0,t("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});e.exports={visible:{valType:"boolean",editType:"plot"},buttons:o,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:n({editType:"plot"}),bgcolor:{valType:"color",dflt:i.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:i.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":463,"../../plots/font_attributes":499,"../color/attributes":303}],367:[function(t,e,r){"use strict";e.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],368:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../color"),o=t("../../plot_api/plot_template"),a=t("../../plots/array_container_defaults"),s=t("./attributes"),l=t("./constants");function g(t,e,r,i){var o=i.calendar;function a(r,i){return n.coerce(t,e,s.buttons,r,i)}if(a("visible")){var l=a("step");"all"!==l&&(!o||"gregorian"===o||"month"!==l&&"year"!==l?a("stepmode"):e.stepmode="backward",a("count")),a("label")}}e.exports=function(t,e,r,c,u){var h=t.rangeselector||{},d=o.newContainer(e,"rangeselector");function A(t,e){return n.coerce(h,d,s,t,e)}if(A("visible",a(h,d,{name:"buttons",handleItemDefaults:g,calendar:u}).length>0)){var f=function(t,e,r){for(var n=r.filter(function(r){return e[r].anchor===t._id}),i=0,o=0;o<n.length;o++){var a=e[n[o]].domain;a&&(i=Math.max(a[1],i))}return[t.domain[0],i+l.yPad]}(e,r,c);A("x",f[0]),A("y",f[1]),n.noneOrAll(t,e,["x","y"]),A("xanchor"),A("yanchor"),n.coerceFont(A,"font",r.font);var C=A("bgcolor");A("activecolor",i.contrast(C,l.lightAmount,l.darkAmount)),A("bordercolor"),A("borderwidth")}}},{"../../lib":426,"../../plot_api/plot_template":463,"../../plots/array_container_defaults":469,"../color":304,"./attributes":366,"./constants":367}],369:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../registry"),o=t("../../plots/plots"),a=t("../color"),s=t("../drawing"),l=t("../../lib"),g=t("../../lib/svg_text_utils"),c=t("../../plots/cartesian/axis_ids"),u=t("../../constants/alignment"),h=u.LINE_SPACING,d=u.FROM_TL,A=u.FROM_BR,f=t("./constants"),C=t("./get_update_object");function p(t){return t._id}function I(t,e,r){var n=l.ensureSingle(t,"rect","selector-rect",function(t){t.attr("shape-rendering","crispEdges")});n.attr({rx:f.rx,ry:f.ry}),n.call(a.stroke,e.bordercolor).call(a.fill,function(t,e){return e._isActive||e._isHovered?t.activecolor:t.bgcolor}(e,r)).style("stroke-width",e.borderwidth+"px")}function v(t,e,r,n){l.ensureSingle(t,"text","selector-text",function(t){t.classed("user-select-none",!0).attr("text-anchor","middle")}).call(s.font,e.font).text(function(t,e){if(t.label)return e?l.templateString(t.label,e):t.label;return"all"===t.step?"all":t.count+t.step.charAt(0)}(r,n._fullLayout._meta)).call(function(t){g.convertToTspans(t,n)})}e.exports=function(t){var e=t._fullLayout._infolayer.selectAll(".rangeselector").data(function(t){for(var e=c.list(t,"x",!0),r=[],n=0;n<e.length;n++){var i=e[n];i.rangeselector&&i.rangeselector.visible&&r.push(i)}return r}(t),p);e.enter().append("g").classed("rangeselector",!0),e.exit().remove(),e.style({cursor:"pointer","pointer-events":"all"}),e.each(function(e){var r=n.select(this),a=e,c=a.rangeselector,u=r.selectAll("g.button").data(l.filterVisible(c.buttons));u.enter().append("g").classed("button",!0),u.exit().remove(),u.each(function(e){var r=n.select(this),o=C(a,e);e._isActive=function(t,e,r){if("all"===e.step)return!0===t.autorange;var n=Object.keys(r);return t.range[0]===r[n[0]]&&t.range[1]===r[n[1]]}(a,e,o),r.call(I,c,e),r.call(v,c,e,t),r.on("click",function(){t._dragged||i.call("_guiRelayout",t,o)}),r.on("mouseover",function(){e._isHovered=!0,r.call(I,c,e)}),r.on("mouseout",function(){e._isHovered=!1,r.call(I,c,e)})}),function(t,e,r,i,a){var c=0,u=0,C=r.borderwidth;e.each(function(){var t=n.select(this),e=t.select(".selector-text"),i=r.font.size*h,o=Math.max(i*g.lineCount(e),16)+3;u=Math.max(u,o)}),e.each(function(){var t=n.select(this),e=t.select(".selector-rect"),i=t.select(".selector-text"),o=i.node()&&s.bBox(i.node()).width,a=r.font.size*h,l=g.lineCount(i),d=Math.max(o+10,f.minButtonWidth);t.attr("transform","translate("+(C+c)+","+C+")"),e.attr({x:0,y:0,width:d,height:u}),g.positionText(i,d/2,u/2-(l-1)*a/2+3),c+=d+5});var p=t._fullLayout._size,I=p.l+p.w*r.x,v=p.t+p.h*(1-r.y),m="left";l.isRightAnchor(r)&&(I-=c,m="right");l.isCenterAnchor(r)&&(I-=c/2,m="center");var y="top";l.isBottomAnchor(r)&&(v-=u,y="bottom");l.isMiddleAnchor(r)&&(v-=u/2,y="middle");c=Math.ceil(c),u=Math.ceil(u),I=Math.round(I),v=Math.round(v),o.autoMargin(t,i+"-range-selector",{x:r.x,y:r.y,l:c*d[m],r:c*A[m],b:u*A[y],t:u*d[y]}),a.attr("transform","translate("+I+","+v+")")}(t,u,c,a._name,r)})}},{"../../constants/alignment":399,"../../lib":426,"../../lib/svg_text_utils":450,"../../plots/cartesian/axis_ids":476,"../../plots/plots":515,"../../registry":524,"../color":304,"../drawing":325,"./constants":367,"./get_update_object":370,d3:74}],370:[function(t,e,r){"use strict";var n=t("d3");e.exports=function(t,e){var r=t._name,i={};if("all"===e.step)i[r+".autorange"]=!0;else{var o=function(t,e){var r,i=t.range,o=new Date(t.r2l(i[1])),a=e.step,s=e.count;switch(e.stepmode){case"backward":r=t.l2r(+n.time[a].utc.offset(o,-s));break;case"todate":var l=n.time[a].utc.offset(o,-s);r=t.l2r(+n.time[a].utc.ceil(l))}var g=i[1];return[r,g]}(t,e);i[r+".range[0]"]=o[0],i[r+".range[1]"]=o[1]}return i}},{d3:74}],371:[function(t,e,r){"use strict";e.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:t("./attributes")}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":366,"./defaults":368,"./draw":369}],372:[function(t,e,r){"use strict";var n=t("../color/attributes");e.exports={bgcolor:{valType:"color",dflt:n.background,editType:"plot"},bordercolor:{valType:"color",dflt:n.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":303}],373:[function(t,e,r){"use strict";var n=t("../../plots/cartesian/axis_ids").list,i=t("../../plots/cartesian/autorange").getAutoRange,o=t("./constants");e.exports=function(t){for(var e=n(t,"x",!0),r=0;r<e.length;r++){var a=e[r],s=a[o.name];s&&s.visible&&s.autorange&&(s._input.autorange=!0,s._input.range=s.range=i(t,a))}}},{"../../plots/cartesian/autorange":472,"../../plots/cartesian/axis_ids":476,"./constants":374}],374:[function(t,e,r){"use strict";e.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],375:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../plot_api/plot_template"),o=t("../../plots/cartesian/axis_ids"),a=t("./attributes"),s=t("./oppaxis_attributes");e.exports=function(t,e,r){var l=t[r],g=e[r];if(l.rangeslider||e._requestRangeslider[g._id]){n.isPlainObject(l.rangeslider)||(l.rangeslider={});var c,u,h=l.rangeslider,d=i.newContainer(g,"rangeslider");if(y("visible")){y("bgcolor",e.plot_bgcolor),y("bordercolor"),y("borderwidth"),y("thickness"),y("autorange",!g.isValidRange(h.range)),y("range");var A=e._subplots;if(A)for(var f=A.cartesian.filter(function(t){return t.substr(0,t.indexOf("y"))===o.name2id(r)}).map(function(t){return t.substr(t.indexOf("y"),t.length)}),C=n.simpleMap(f,o.id2name),p=0;p<C.length;p++){var I=C[p];c=h[I]||{},u=i.newContainer(d,I,"yaxis");var v,m=e[I];c.range&&m.isValidRange(c.range)&&(v="fixed"),"match"!==b("rangemode",v)&&b("range",m.range.slice())}d._input=h}}function y(t,e){return n.coerce(h,d,a,t,e)}function b(t,e){return n.coerce(c,u,s,t,e)}}},{"../../lib":426,"../../plot_api/plot_template":463,"../../plots/cartesian/axis_ids":476,"./attributes":372,"./oppaxis_attributes":379}],376:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../registry"),o=t("../../plots/plots"),a=t("../../lib"),s=t("../drawing"),l=t("../color"),g=t("../titles"),c=t("../../plots/cartesian"),u=t("../../plots/cartesian/axis_ids"),h=t("../dragelement"),d=t("../../lib/setcursor"),A=t("./constants");function f(t,e,r,n){var i=a.ensureSingle(t,"rect",A.bgClassName,function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),o=n.borderwidth%2==0?n.borderwidth:n.borderwidth-1,l=-n._offsetShift,g=s.crispRound(e,n.borderwidth);i.attr({width:n._width+o,height:n._height+o,transform:"translate("+l+","+l+")",fill:n.bgcolor,stroke:n.bordercolor,"stroke-width":g})}function C(t,e,r,n){var i=e._fullLayout;a.ensureSingleById(i._topdefs,"clipPath",n._clipId,function(t){t.append("rect").attr({x:0,y:0})}).select("rect").attr({width:n._width,height:n._height})}function p(t,e,r,i){var l,g=e.calcdata,h=t.selectAll("g."+A.rangePlotClassName).data(r._subplotsWith,a.identity);h.enter().append("g").attr("class",function(t){return A.rangePlotClassName+" "+t}).call(s.setClipUrl,i._clipId,e),h.order(),h.exit().remove(),h.each(function(t,a){var s=n.select(this),h=0===a,d=u.getFromId(e,t,"y"),A=d._name,f=i[A],C={data:[],layout:{xaxis:{type:r.type,domain:[0,1],range:i.range.slice(),calendar:r.calendar},width:i._width,height:i._height,margin:{t:0,b:0,l:0,r:0}},_context:e._context};r.rangebreaks&&(C.layout.xaxis.rangebreaks=r.rangebreaks),C.layout[A]={type:d.type,domain:[0,1],range:"match"!==f.rangemode?f.range.slice():d.range.slice(),calendar:d.calendar},d.rangebreaks&&(C.layout[A].rangebreaks=d.rangebreaks),o.supplyDefaults(C);var p=C._fullLayout.xaxis,I=C._fullLayout[A];p.clearCalc(),p.setScale(),I.clearCalc(),I.setScale();var v={id:t,plotgroup:s,xaxis:p,yaxis:I,isRangePlot:!0};h?l=v:(v.mainplot="xy",v.mainplotinfo=l),c.rangePlot(e,v,function(t,e){for(var r=[],n=0;n<t.length;n++){var i=t[n],o=i[0].trace;o.xaxis+o.yaxis===e&&r.push(i)}return r}(g,t))})}function I(t,e,r,n,i){(a.ensureSingle(t,"rect",A.maskMinClassName,function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",n._height).call(l.fill,A.maskColor),a.ensureSingle(t,"rect",A.maskMaxClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",n._height).call(l.fill,A.maskColor),"match"!==i.rangemode)&&(a.ensureSingle(t,"rect",A.maskMinOppAxisClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",n._width).call(l.fill,A.maskOppAxisColor),a.ensureSingle(t,"rect",A.maskMaxOppAxisClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",n._width).style("border-top",A.maskOppBorder).call(l.fill,A.maskOppAxisColor))}function v(t,e,r,n){e._context.staticPlot||a.ensureSingle(t,"rect",A.slideBoxClassName,function(t){t.attr({y:0,cursor:A.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:n._height,fill:A.slideBoxFill})}function m(t,e,r,n){var i=a.ensureSingle(t,"g",A.grabberMinClassName),o=a.ensureSingle(t,"g",A.grabberMaxClassName),s={x:0,width:A.handleWidth,rx:A.handleRadius,fill:l.background,stroke:l.defaultLine,"stroke-width":A.handleStrokeWidth,"shape-rendering":"crispEdges"},g={y:Math.round(n._height/4),height:Math.round(n._height/2)};if(a.ensureSingle(i,"rect",A.handleMinClassName,function(t){t.attr(s)}).attr(g),a.ensureSingle(o,"rect",A.handleMaxClassName,function(t){t.attr(s)}).attr(g),!e._context.staticPlot){var c={width:A.grabAreaWidth,x:0,y:0,fill:A.grabAreaFill,cursor:A.grabAreaCursor};a.ensureSingle(i,"rect",A.grabAreaMinClassName,function(t){t.attr(c)}).attr("height",n._height),a.ensureSingle(o,"rect",A.grabAreaMaxClassName,function(t){t.attr(c)}).attr("height",n._height)}}e.exports=function(t){for(var e=t._fullLayout,r=e._rangeSliderData,o=0;o<r.length;o++){var s=r[o][A.name];s._clipId=s._id+"-"+e._uid}var l=e._infolayer.selectAll("g."+A.containerClassName).data(r,function(t){return t._name});l.exit().each(function(t){var r=t[A.name];e._topdefs.select("#"+r._clipId).remove()}).remove(),0!==r.length&&(l.enter().append("g").classed(A.containerClassName,!0).attr("pointer-events","all"),l.each(function(r){var o=n.select(this),s=r[A.name],l=e[u.id2name(r.anchor)],c=s[u.id2name(r.anchor)];if(s.range){var y,b=a.simpleMap(s.range,r.r2l),x=a.simpleMap(r.range,r.r2l);y=x[0]<x[1]?[Math.min(b[0],x[0]),Math.max(b[1],x[1])]:[Math.max(b[0],x[0]),Math.min(b[1],x[1])],s.range=s._input.range=a.simpleMap(y,r.l2r)}r.cleanRange("rangeslider.range");var _=e._size,w=r.domain;s._width=_.w*(w[1]-w[0]);var k=Math.round(_.l+_.w*w[0]),T=Math.round(_.t+_.h*(1-r._counterDomainMin)+("bottom"===r.side?r._depth:0)+s._offsetShift+A.extraPad);o.attr("transform","translate("+k+","+T+")"),s._rl=a.simpleMap(s.range,r.r2l);var M=s._rl[0],E=s._rl[1],O=E-M;if(s.p2d=function(t){return t/s._width*O+M},s.d2p=function(t){return(t-M)/O*s._width},r.rangebreaks){var S=r.locateBreaks(M,E);if(S.length){var R,D,L=0;for(R=0;R<S.length;R++)L+=(D=S[R]).max-D.min;var P=s._width/(E-M-L),N=[-P*M];for(R=0;R<S.length;R++)D=S[R],N.push(N[N.length-1]-P*(D.max-D.min));for(s.d2p=function(t){for(var e=N[0],r=0;r<S.length;r++){var n=S[r];if(t>=n.max)e=N[r+1];else if(t<n.min)break}return e+P*t},R=0;R<S.length;R++)(D=S[R]).pmin=s.d2p(D.min),D.pmax=s.d2p(D.max);s.p2d=function(t){for(var e=N[0],r=0;r<S.length;r++){var n=S[r];if(t>=n.pmax)e=N[r+1];else if(t<n.pmin)break}return(t-e)/P}}}if("match"!==c.rangemode){var z=l.r2l(c.range[0]),F=l.r2l(c.range[1])-z;s.d2pOppAxis=function(t){return(t-z)/F*s._height}}o.call(f,t,r,s).call(C,t,r,s).call(p,t,r,s).call(I,t,r,s,c).call(v,t,r,s).call(m,t,r,s),function(t,e,r,o){var s=t.select("rect."+A.slideBoxClassName).node(),l=t.select("rect."+A.grabAreaMinClassName).node(),g=t.select("rect."+A.grabAreaMaxClassName).node();t.on("mousedown",function(){var c=n.event,u=c.target,A=c.clientX,f=A-t.node().getBoundingClientRect().left,C=o.d2p(r._rl[0]),p=o.d2p(r._rl[1]),I=h.coverSlip();function v(t){var c,h,v,m=+t.clientX-A;switch(u){case s:v="ew-resize",c=C+m,h=p+m;break;case l:v="col-resize",c=C+m,h=p;break;case g:v="col-resize",c=C,h=p+m;break;default:v="ew-resize",c=f,h=f+m}if(h<c){var y=h;h=c,c=y}o._pixelMin=c,o._pixelMax=h,d(n.select(I),v),function(t,e,r,n){function o(t){return r.l2r(a.constrain(t,n._rl[0],n._rl[1]))}var s=o(n.p2d(n._pixelMin)),l=o(n.p2d(n._pixelMax));window.requestAnimationFrame(function(){i.call("_guiRelayout",e,r._name+".range",[s,l])})}(0,e,r,o)}I.addEventListener("mousemove",v),I.addEventListener("mouseup",function t(){I.removeEventListener("mousemove",v);I.removeEventListener("mouseup",t);a.removeElement(I)})})}(o,t,r,s),function(t,e,r,n,i,o){var s=A.handleWidth/2;function l(t){return a.constrain(t,0,n._width)}function g(t){return a.constrain(t,0,n._height)}function c(t){return a.constrain(t,-s,n._width+s)}var u=l(n.d2p(r._rl[0])),h=l(n.d2p(r._rl[1]));if(t.select("rect."+A.slideBoxClassName).attr("x",u).attr("width",h-u),t.select("rect."+A.maskMinClassName).attr("width",u),t.select("rect."+A.maskMaxClassName).attr("x",h).attr("width",n._width-h),"match"!==o.rangemode){var d=n._height-g(n.d2pOppAxis(i._rl[1])),f=n._height-g(n.d2pOppAxis(i._rl[0]));t.select("rect."+A.maskMinOppAxisClassName).attr("x",u).attr("height",d).attr("width",h-u),t.select("rect."+A.maskMaxOppAxisClassName).attr("x",u).attr("y",f).attr("height",n._height-f).attr("width",h-u),t.select("rect."+A.slideBoxClassName).attr("y",d).attr("height",f-d)}var C=Math.round(c(u-s))-.5,p=Math.round(c(h-s))+.5;t.select("g."+A.grabberMinClassName).attr("transform","translate("+C+",0.5)"),t.select("g."+A.grabberMaxClassName).attr("transform","translate("+p+",0.5)")}(o,0,r,s,l,c),"bottom"===r.side&&g.draw(t,r._id+"title",{propContainer:r,propName:r._name+".title",placeholder:e._dfltTitle.x,attributes:{x:r._offset+r._length/2,y:T+s._height+s._offsetShift+10+1.5*r.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":426,"../../lib/setcursor":446,"../../plots/cartesian":484,"../../plots/cartesian/axis_ids":476,"../../plots/plots":515,"../../registry":524,"../color":304,"../dragelement":322,"../drawing":325,"../titles":392,"./constants":374,d3:74}],377:[function(t,e,r){"use strict";var n=t("../../plots/cartesian/axis_ids"),i=t("../../lib/svg_text_utils"),o=t("./constants"),a=t("../../constants/alignment").LINE_SPACING,s=o.name;function l(t){var e=t&&t[s];return e&&e.visible}r.isVisible=l,r.makeData=function(t){var e=n.list({_fullLayout:t},"x",!0),r=t.margin,i=[];if(!t._has("gl2d"))for(var o=0;o<e.length;o++){var a=e[o];if(l(a)){i.push(a);var g=a[s];g._id=s+a._id,g._height=(t.height-r.b-r.t)*g.thickness,g._offsetShift=Math.floor(g.borderwidth/2)}}t._rangeSliderData=i},r.autoMarginOpts=function(t,e){var r=t._fullLayout,n=e[s],l=e._id.charAt(0),g=0,c=0;"bottom"===e.side&&(g=e._depth,e.title.text!==r._dfltTitle[l]&&(c=1.5*e.title.font.size+10+n._offsetShift,c+=(e.title.text.match(i.BR_TAG_ALL)||[]).length*e.title.font.size*a));return{x:0,y:e._counterDomainMin,l:0,r:0,t:0,b:n._height+g+Math.max(r.margin.b,c),pad:o.extraPad+2*n._offsetShift}}},{"../../constants/alignment":399,"../../lib/svg_text_utils":450,"../../plots/cartesian/axis_ids":476,"./constants":374}],378:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("./attributes"),o=t("./oppaxis_attributes"),a=t("./helpers");e.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:n.extendFlat({},i,{yaxis:o})}}},layoutAttributes:t("./attributes"),handleDefaults:t("./defaults"),calcAutorange:t("./calc_autorange"),draw:t("./draw"),isVisible:a.isVisible,makeData:a.makeData,autoMarginOpts:a.autoMarginOpts}},{"../../lib":426,"./attributes":372,"./calc_autorange":373,"./defaults":375,"./draw":376,"./helpers":377,"./oppaxis_attributes":379}],379:[function(t,e,r){"use strict";e.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],380:[function(t,e,r){"use strict";var n=t("../annotations/attributes"),i=t("../../traces/scatter/attributes").line,o=t("../drawing/attributes").dash,a=t("../../lib/extend").extendFlat,s=t("../../plot_api/plot_template").templatedArray;e.exports=s("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:a({},n.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:a({},n.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:a({},i.color,{editType:"arraydraw"}),width:a({},i.width,{editType:"calc+arraydraw"}),dash:a({},o,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"})},{"../../lib/extend":419,"../../plot_api/plot_template":463,"../../traces/scatter/attributes":587,"../annotations/attributes":289,"../drawing/attributes":324}],381:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../plots/cartesian/axes"),o=t("./constants"),a=t("./helpers");function s(t){return g(t.line.width,t.xsizemode,t.x0,t.x1,t.path,!1)}function l(t){return g(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function g(t,e,r,i,s,l){var g=t/2,c=l;if("pixel"===e){var u=s?a.extractPathCoords(s,l?o.paramIsY:o.paramIsX):[r,i],h=n.aggNums(Math.max,null,u),d=n.aggNums(Math.min,null,u),A=d<0?Math.abs(d)+g:g,f=h>0?h+g:g;return{ppad:g,ppadplus:c?A:f,ppadminus:c?f:A}}return{ppad:g}}function c(t,e,r,n,i){var s="category"===t.type||"multicategory"===t.type?t.r2c:t.d2c;if(void 0!==e)return[s(e),s(r)];if(n){var l,g,c,u,h=1/0,d=-1/0,A=n.match(o.segmentRE);for("date"===t.type&&(s=a.decodeDate(s)),l=0;l<A.length;l++)void 0!==(g=i[A[l].charAt(0)].drawn)&&(!(c=A[l].substr(1).match(o.paramRE))||c.length<g||((u=s(c[g]))<h&&(h=u),u>d&&(d=u)));return d>=h?[h,d]:void 0}}e.exports=function(t){var e=t._fullLayout,r=n.filterVisible(e.shapes);if(r.length&&t._fullData.length)for(var a=0;a<r.length;a++){var g,u,h=r[a];if(h._extremes={},"paper"!==h.xref){var d="pixel"===h.xsizemode?h.xanchor:h.x0,A="pixel"===h.xsizemode?h.xanchor:h.x1;(u=c(g=i.getFromId(t,h.xref),d,A,h.path,o.paramIsX))&&(h._extremes[g._id]=i.findExtremes(g,u,s(h)))}if("paper"!==h.yref){var f="pixel"===h.ysizemode?h.yanchor:h.y0,C="pixel"===h.ysizemode?h.yanchor:h.y1;(u=c(g=i.getFromId(t,h.yref),f,C,h.path,o.paramIsY))&&(h._extremes[g._id]=i.findExtremes(g,u,l(h)))}}}},{"../../lib":426,"../../plots/cartesian/axes":473,"./constants":382,"./helpers":385}],382:[function(t,e,r){"use strict";e.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],383:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../plots/cartesian/axes"),o=t("../../plots/array_container_defaults"),a=t("./attributes"),s=t("./helpers");function l(t,e,r){function o(r,i){return n.coerce(t,e,a,r,i)}if(o("visible")){o("layer"),o("opacity"),o("fillcolor"),o("line.color"),o("line.width"),o("line.dash");for(var l=o("type",t.path?"path":"rect"),g=o("xsizemode"),c=o("ysizemode"),u=["x","y"],h=0;h<2;h++){var d,A,f,C=u[h],p=C+"anchor",I="x"===C?g:c,v={_fullLayout:r},m=i.coerceRef(t,e,v,C,"","paper");if("paper"!==m?((d=i.getFromId(v,m))._shapeIndices.push(e._index),f=s.rangeToShapePosition(d),A=s.shapePositionToRange(d)):A=f=n.identity,"path"!==l){var y=C+"0",b=C+"1",x=t[y],_=t[b];t[y]=A(t[y],!0),t[b]=A(t[b],!0),"pixel"===I?(o(y,0),o(b,10)):(i.coercePosition(e,v,o,m,y,.25),i.coercePosition(e,v,o,m,b,.75)),e[y]=f(e[y]),e[b]=f(e[b]),t[y]=x,t[b]=_}if("pixel"===I){var w=t[p];t[p]=A(t[p],!0),i.coercePosition(e,v,o,m,p,.25),e[p]=f(e[p]),t[p]=w}}"path"===l?o("path"):n.noneOrAll(t,e,["x0","x1","y0","y1"])}}e.exports=function(t,e){o(t,e,{name:"shapes",handleItemDefaults:l})}},{"../../lib":426,"../../plots/array_container_defaults":469,"../../plots/cartesian/axes":473,"./attributes":380,"./helpers":385}],384:[function(t,e,r){"use strict";var n=t("../../registry"),i=t("../../lib"),o=t("../../plots/cartesian/axes"),a=t("../color"),s=t("../drawing"),l=t("../../plot_api/plot_template").arrayEditor,g=t("../dragelement"),c=t("../../lib/setcursor"),u=t("./constants"),h=t("./helpers");function d(t,e){t._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+e+'"]').remove();var r=t._fullLayout.shapes[e]||{};if(r._input&&!1!==r.visible)if("below"!==r.layer)p(t._fullLayout._shapeUpperLayer);else if("paper"===r.xref||"paper"===r.yref)p(t._fullLayout._shapeLowerLayer);else{var d=t._fullLayout._plots[r.xref+r.yref];if(d)p((d.mainplotinfo||d).shapelayer);else p(t._fullLayout._shapeLowerLayer)}function p(d){var p={"data-index":e,"fill-rule":"evenodd",d:f(t,r)},I=r.line.width?r.line.color:"rgba(0,0,0,0)",v=d.append("path").attr(p).style("opacity",r.opacity).call(a.stroke,I).call(a.fill,r.fillcolor).call(s.dashLine,r.line.dash,r.line.width);A(v,t,r),t._context.edits.shapePosition&&function(t,e,r,a,d){var p,I,v,m,y,b,x,_,w,k,T,M,E,O,S,R,D=10,L=10,P="pixel"===r.xsizemode,N="pixel"===r.ysizemode,z="line"===r.type,F="path"===r.type,B=l(t.layout,"shapes",r),j=B.modifyItem,V=o.getFromId(t,r.xref),G=o.getFromId(t,r.yref),U=h.getDataToPixel(t,V),Z=h.getDataToPixel(t,G,!0),H=h.getPixelToData(t,V),W=h.getPixelToData(t,G,!0),Y=z?function(){var t=Math.max(r.line.width,10),n=d.append("g").attr("data-index",a);n.append("path").attr("d",e.attr("d")).style({cursor:"move","stroke-width":t,"stroke-opacity":"0"});var i={"fill-opacity":"0"},o=t/2>10?t/2:10;return n.append("circle").attr({"data-line-point":"start-point",cx:P?U(r.xanchor)+r.x0:U(r.x0),cy:N?Z(r.yanchor)-r.y0:Z(r.y0),r:o}).style(i).classed("cursor-grab",!0),n.append("circle").attr({"data-line-point":"end-point",cx:P?U(r.xanchor)+r.x1:U(r.x1),cy:N?Z(r.yanchor)-r.y1:Z(r.y1),r:o}).style(i).classed("cursor-grab",!0),n}():e,X={element:Y.node(),gd:t,prepFn:function(n){P&&(y=U(r.xanchor));N&&(b=Z(r.yanchor));"path"===r.type?S=r.path:(p=P?r.x0:U(r.x0),I=N?r.y0:Z(r.y0),v=P?r.x1:U(r.x1),m=N?r.y1:Z(r.y1));p<v?(w=p,E="x0",k=v,O="x1"):(w=v,E="x1",k=p,O="x0");!N&&I<m||N&&I>m?(x=I,T="y0",_=m,M="y1"):(x=m,T="y1",_=I,M="y0");q(n),J(d,r),function(t,e,r){var n=e.xref,i=e.yref,a=o.getFromId(r,n),l=o.getFromId(r,i),g="";"paper"===n||a.autorange||(g+=n);"paper"===i||l.autorange||(g+=i);s.setClipUrl(t,g?"clip"+r._fullLayout._uid+g:null,r)}(e,r,t),X.moveFn="move"===R?Q:K},doneFn:function(){c(e),$(d),A(e,t,r),n.call("_guiRelayout",t,B.getUpdateObj())},clickFn:function(){$(d)}};function q(t){if(z)R="path"===t.target.tagName?"move":"start-point"===t.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var r=X.element.getBoundingClientRect(),n=r.right-r.left,i=r.bottom-r.top,o=t.clientX-r.left,a=t.clientY-r.top,s=!F&&n>D&&i>L&&!t.shiftKey?g.getCursor(o/n,1-a/i):"move";c(e,s),R=s.split("-")[0]}}function Q(n,i){if("path"===r.type){var o=function(t){return t},a=o,s=o;P?j("xanchor",r.xanchor=H(y+n)):(a=function(t){return H(U(t)+n)},V&&"date"===V.type&&(a=h.encodeDate(a))),N?j("yanchor",r.yanchor=W(b+i)):(s=function(t){return W(Z(t)+i)},G&&"date"===G.type&&(s=h.encodeDate(s))),j("path",r.path=C(S,a,s))}else P?j("xanchor",r.xanchor=H(y+n)):(j("x0",r.x0=H(p+n)),j("x1",r.x1=H(v+n))),N?j("yanchor",r.yanchor=W(b+i)):(j("y0",r.y0=W(I+i)),j("y1",r.y1=W(m+i)));e.attr("d",f(t,r)),J(d,r)}function K(n,i){if(F){var o=function(t){return t},a=o,s=o;P?j("xanchor",r.xanchor=H(y+n)):(a=function(t){return H(U(t)+n)},V&&"date"===V.type&&(a=h.encodeDate(a))),N?j("yanchor",r.yanchor=W(b+i)):(s=function(t){return W(Z(t)+i)},G&&"date"===G.type&&(s=h.encodeDate(s))),j("path",r.path=C(S,a,s))}else if(z){if("resize-over-start-point"===R){var l=p+n,g=N?I-i:I+i;j("x0",r.x0=P?l:H(l)),j("y0",r.y0=N?g:W(g))}else if("resize-over-end-point"===R){var c=v+n,u=N?m-i:m+i;j("x1",r.x1=P?c:H(c)),j("y1",r.y1=N?u:W(u))}}else{var A=~R.indexOf("n")?x+i:x,B=~R.indexOf("s")?_+i:_,Y=~R.indexOf("w")?w+n:w,X=~R.indexOf("e")?k+n:k;~R.indexOf("n")&&N&&(A=x-i),~R.indexOf("s")&&N&&(B=_-i),(!N&&B-A>L||N&&A-B>L)&&(j(T,r[T]=N?A:W(A)),j(M,r[M]=N?B:W(B))),X-Y>D&&(j(E,r[E]=P?Y:H(Y)),j(O,r[O]=P?X:H(X)))}e.attr("d",f(t,r)),J(d,r)}function J(t,e){(P||N)&&function(){var r="path"!==e.type,n=t.selectAll(".visual-cue").data([0]);n.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var o=U(P?e.xanchor:i.midRange(r?[e.x0,e.x1]:h.extractPathCoords(e.path,u.paramIsX))),a=Z(N?e.yanchor:i.midRange(r?[e.y0,e.y1]:h.extractPathCoords(e.path,u.paramIsY)));if(o=h.roundPositionForSharpStrokeRendering(o,1),a=h.roundPositionForSharpStrokeRendering(a,1),P&&N){var s="M"+(o-1-1)+","+(a-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";n.attr("d",s)}else if(P){var l="M"+(o-1-1)+","+(a-9-1)+"v18 h2 v-18 Z";n.attr("d",l)}else{var g="M"+(o-9-1)+","+(a-1-1)+"h18 v2 h-18 Z";n.attr("d",g)}}()}function $(t){t.selectAll(".visual-cue").remove()}g.init(X),Y.node().onmousemove=q}(t,v,r,e,d)}}function A(t,e,r){var n=(r.xref+r.yref).replace(/paper/g,"");s.setClipUrl(t,n?"clip"+e._fullLayout._uid+n:null,e)}function f(t,e){var r,n,a,s,l,g,c,d,A=e.type,f=o.getFromId(t,e.xref),C=o.getFromId(t,e.yref),p=t._fullLayout._size;if(f?(r=h.shapePositionToRange(f),n=function(t){return f._offset+f.r2p(r(t,!0))}):n=function(t){return p.l+p.w*t},C?(a=h.shapePositionToRange(C),s=function(t){return C._offset+C.r2p(a(t,!0))}):s=function(t){return p.t+p.h*(1-t)},"path"===A)return f&&"date"===f.type&&(n=h.decodeDate(n)),C&&"date"===C.type&&(s=h.decodeDate(s)),function(t,e,r){var n=t.path,o=t.xsizemode,a=t.ysizemode,s=t.xanchor,l=t.yanchor;return n.replace(u.segmentRE,function(t){var n=0,g=t.charAt(0),c=u.paramIsX[g],h=u.paramIsY[g],d=u.numParams[g],A=t.substr(1).replace(u.paramRE,function(t){return c[n]?t="pixel"===o?e(s)+Number(t):e(t):h[n]&&(t="pixel"===a?r(l)-Number(t):r(t)),++n>d&&(t="X"),t});return n>d&&(A=A.replace(/[\s,]*X.*/,""),i.log("Ignoring extra params in segment "+t)),g+A})}(e,n,s);if("pixel"===e.xsizemode){var I=n(e.xanchor);l=I+e.x0,g=I+e.x1}else l=n(e.x0),g=n(e.x1);if("pixel"===e.ysizemode){var v=s(e.yanchor);c=v-e.y0,d=v-e.y1}else c=s(e.y0),d=s(e.y1);if("line"===A)return"M"+l+","+c+"L"+g+","+d;if("rect"===A)return"M"+l+","+c+"H"+g+"V"+d+"H"+l+"Z";var m=(l+g)/2,y=(c+d)/2,b=Math.abs(m-l),x=Math.abs(y-c),_="A"+b+","+x,w=m+b+","+y;return"M"+w+_+" 0 1,1 "+(m+","+(y-x))+_+" 0 0,1 "+w+"Z"}function C(t,e,r){return t.replace(u.segmentRE,function(t){var n=0,i=t.charAt(0),o=u.paramIsX[i],a=u.paramIsY[i],s=u.numParams[i];return i+t.substr(1).replace(u.paramRE,function(t){return n>=s?t:(o[n]?t=e(t):a[n]&&(t=r(t)),n++,t)})})}e.exports={draw:function(t){var e=t._fullLayout;for(var r in e._shapeUpperLayer.selectAll("path").remove(),e._shapeLowerLayer.selectAll("path").remove(),e._plots){var n=e._plots[r].shapelayer;n&&n.selectAll("path").remove()}for(var i=0;i<e.shapes.length;i++)e.shapes[i].visible&&d(t,i)},drawOne:d}},{"../../lib":426,"../../lib/setcursor":446,"../../plot_api/plot_template":463,"../../plots/cartesian/axes":473,"../../registry":524,"../color":304,"../dragelement":322,"../drawing":325,"./constants":382,"./helpers":385}],385:[function(t,e,r){"use strict";var n=t("./constants"),i=t("../../lib");r.rangeToShapePosition=function(t){return"log"===t.type?t.r2d:function(t){return t}},r.shapePositionToRange=function(t){return"log"===t.type?t.d2r:function(t){return t}},r.decodeDate=function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},r.encodeDate=function(t){return function(e){return t(e).replace(" ","_")}},r.extractPathCoords=function(t,e){var r=[];return t.match(n.segmentRE).forEach(function(t){var o=e[t.charAt(0)].drawn;if(void 0!==o){var a=t.substr(1).match(n.paramRE);!a||a.length<o||r.push(i.cleanNumber(a[o]))}}),r},r.getDataToPixel=function(t,e,n){var i,o=t._fullLayout._size;if(e){var a=r.shapePositionToRange(e);i=function(t){return e._offset+e.r2p(a(t,!0))},"date"===e.type&&(i=r.decodeDate(i))}else i=n?function(t){return o.t+o.h*(1-t)}:function(t){return o.l+o.w*t};return i},r.getPixelToData=function(t,e,n){var i,o=t._fullLayout._size;if(e){var a=r.rangeToShapePosition(e);i=function(t){return a(e.p2r(t-e._offset))}}else i=n?function(t){return 1-(t-o.t)/o.h}:function(t){return(t-o.l)/o.w};return i},r.roundPositionForSharpStrokeRendering=function(t,e){var r=1===Math.round(e%2),n=Math.round(t);return r?n+.5:n}},{"../../lib":426,"./constants":382}],386:[function(t,e,r){"use strict";var n=t("./draw");e.exports={moduleType:"component",name:"shapes",layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),includeBasePlot:t("../../plots/cartesian/include_components")("shapes"),calcAutorange:t("./calc_autorange"),draw:n.draw,drawOne:n.drawOne}},{"../../plots/cartesian/include_components":483,"./attributes":380,"./calc_autorange":381,"./defaults":383,"./draw":384}],387:[function(t,e,r){"use strict";var n=t("../../plots/font_attributes"),i=t("../../plots/pad_attributes"),o=t("../../lib/extend").extendDeepAll,a=t("../../plot_api/edit_types").overrideAll,s=t("../../plots/animation_attributes"),l=t("../../plot_api/plot_template").templatedArray,g=t("./constants"),c=l("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});e.exports=a(l("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:c,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:o(i({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:s.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:n({})},font:n({}),activebgcolor:{valType:"color",dflt:g.gripBgActiveColor},bgcolor:{valType:"color",dflt:g.railBgColor},bordercolor:{valType:"color",dflt:g.railBorderColor},borderwidth:{valType:"number",min:0,dflt:g.railBorderWidth},ticklen:{valType:"number",min:0,dflt:g.tickLength},tickcolor:{valType:"color",dflt:g.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:g.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":419,"../../plot_api/edit_types":456,"../../plot_api/plot_template":463,"../../plots/animation_attributes":468,"../../plots/font_attributes":499,"../../plots/pad_attributes":514,"./constants":388}],388:[function(t,e,r){"use strict";e.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],389:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../plots/array_container_defaults"),o=t("./attributes"),a=t("./constants").name,s=o.steps;function l(t,e,r){function a(r,i){return n.coerce(t,e,o,r,i)}for(var s=i(t,e,{name:"steps",handleItemDefaults:g}),l=0,c=0;c<s.length;c++)s[c].visible&&l++;if(l<2?e.visible=!1:a("visible")){e._stepCount=l;var u=e._visibleSteps=n.filterVisible(s);(s[a("active")]||{}).visible||(e.active=u[0]._index),a("x"),a("y"),n.noneOrAll(t,e,["x","y"]),a("xanchor"),a("yanchor"),a("len"),a("lenmode"),a("pad.t"),a("pad.r"),a("pad.b"),a("pad.l"),n.coerceFont(a,"font",r.font),a("currentvalue.visible")&&(a("currentvalue.xanchor"),a("currentvalue.prefix"),a("currentvalue.suffix"),a("currentvalue.offset"),n.coerceFont(a,"currentvalue.font",e.font)),a("transition.duration"),a("transition.easing"),a("bgcolor"),a("activebgcolor"),a("bordercolor"),a("borderwidth"),a("ticklen"),a("tickwidth"),a("tickcolor"),a("minorticklen")}}function g(t,e){function r(r,i){return n.coerce(t,e,s,r,i)}("skip"===t.method||Array.isArray(t.args)?r("visible"):e.visible=!1)&&(r("method"),r("args"),r("value",r("label","step-"+e._index)),r("execute"))}e.exports=function(t,e){i(t,e,{name:a,handleItemDefaults:l})}},{"../../lib":426,"../../plots/array_container_defaults":469,"./attributes":387,"./constants":388}],390:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../plots/plots"),o=t("../color"),a=t("../drawing"),s=t("../../lib"),l=t("../../lib/svg_text_utils"),g=t("../../plot_api/plot_template").arrayEditor,c=t("./constants"),u=t("../../constants/alignment"),h=u.LINE_SPACING,d=u.FROM_TL,A=u.FROM_BR;function f(t){return c.autoMarginIdRoot+t._index}function C(t){return t._index}function p(t,e){var r=a.tester.selectAll("g."+c.labelGroupClass).data(e._visibleSteps);r.enter().append("g").classed(c.labelGroupClass,!0);var o=0,g=0;r.each(function(t){var r=m(n.select(this),{step:t},e).node();if(r){var i=a.bBox(r);g=Math.max(g,i.height),o=Math.max(o,i.width)}}),r.remove();var u=e._dims={};u.inputAreaWidth=Math.max(c.railWidth,c.gripHeight);var h=t._fullLayout._size;u.lx=h.l+h.w*e.x,u.ly=h.t+h.h*(1-e.y),"fraction"===e.lenmode?u.outerLength=Math.round(h.w*e.len):u.outerLength=e.len,u.inputAreaStart=0,u.inputAreaLength=Math.round(u.outerLength-e.pad.l-e.pad.r);var C=(u.inputAreaLength-2*c.stepInset)/(e._stepCount-1),p=o+c.labelPadding;if(u.labelStride=Math.max(1,Math.ceil(p/C)),u.labelHeight=g,u.currentValueMaxWidth=0,u.currentValueHeight=0,u.currentValueTotalHeight=0,u.currentValueMaxLines=1,e.currentvalue.visible){var v=a.tester.append("g");r.each(function(t){var r=I(v,e,t.label),n=r.node()&&a.bBox(r.node())||{width:0,height:0},i=l.lineCount(r);u.currentValueMaxWidth=Math.max(u.currentValueMaxWidth,Math.ceil(n.width)),u.currentValueHeight=Math.max(u.currentValueHeight,Math.ceil(n.height)),u.currentValueMaxLines=Math.max(u.currentValueMaxLines,i)}),u.currentValueTotalHeight=u.currentValueHeight+e.currentvalue.offset,v.remove()}u.height=u.currentValueTotalHeight+c.tickOffset+e.ticklen+c.labelOffset+u.labelHeight+e.pad.t+e.pad.b;var y="left";s.isRightAnchor(e)&&(u.lx-=u.outerLength,y="right"),s.isCenterAnchor(e)&&(u.lx-=u.outerLength/2,y="center");var b="top";s.isBottomAnchor(e)&&(u.ly-=u.height,b="bottom"),s.isMiddleAnchor(e)&&(u.ly-=u.height/2,b="middle"),u.outerLength=Math.ceil(u.outerLength),u.height=Math.ceil(u.height),u.lx=Math.round(u.lx),u.ly=Math.round(u.ly);var x={y:e.y,b:u.height*A[b],t:u.height*d[b]};"fraction"===e.lenmode?(x.l=0,x.xl=e.x-e.len*d[y],x.r=0,x.xr=e.x+e.len*A[y]):(x.x=e.x,x.l=u.outerLength*d[y],x.r=u.outerLength*A[y]),i.autoMargin(t,f(e),x)}function I(t,e,r){if(e.currentvalue.visible){var n,i,o=e._dims;switch(e.currentvalue.xanchor){case"right":n=o.inputAreaLength-c.currentValueInset-o.currentValueMaxWidth,i="left";break;case"center":n=.5*o.inputAreaLength,i="middle";break;default:n=c.currentValueInset,i="left"}var g=s.ensureSingle(t,"text",c.labelClass,function(t){t.classed("user-select-none",!0).attr({"text-anchor":i,"data-notex":1})}),u=e.currentvalue.prefix?e.currentvalue.prefix:"";if("string"==typeof r)u+=r;else{var d=e.steps[e.active].label,A=e._gd._fullLayout._meta;A&&(d=s.templateString(d,A)),u+=d}e.currentvalue.suffix&&(u+=e.currentvalue.suffix),g.call(a.font,e.currentvalue.font).text(u).call(l.convertToTspans,e._gd);var f=l.lineCount(g),C=(o.currentValueMaxLines+1-f)*e.currentvalue.font.size*h;return l.positionText(g,n,C),g}}function v(t,e,r){s.ensureSingle(t,"rect",c.gripRectClass,function(n){n.call(_,e,t,r).style("pointer-events","all")}).attr({width:c.gripWidth,height:c.gripHeight,rx:c.gripRadius,ry:c.gripRadius}).call(o.stroke,r.bordercolor).call(o.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function m(t,e,r){var n=s.ensureSingle(t,"text",c.labelClass,function(t){t.classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1})}),i=e.step.label,o=r._gd._fullLayout._meta;return o&&(i=s.templateString(i,o)),n.call(a.font,r.font).text(i).call(l.convertToTspans,r._gd),n}function y(t,e){var r=s.ensureSingle(t,"g",c.labelsClass),i=e._dims,o=r.selectAll("g."+c.labelGroupClass).data(i.labelSteps);o.enter().append("g").classed(c.labelGroupClass,!0),o.exit().remove(),o.each(function(t){var r=n.select(this);r.call(m,t,e),a.setTranslate(r,T(e,t.fraction),c.tickOffset+e.ticklen+e.font.size*h+c.labelOffset+i.currentValueTotalHeight)})}function b(t,e,r,n,i){var o=Math.round(n*(r._stepCount-1)),a=r._visibleSteps[o]._index;a!==r.active&&x(t,e,r,a,!0,i)}function x(t,e,r,n,o,a){var s=r.active;r.active=n,g(t.layout,c.name,r).applyUpdate("active",n);var l=r.steps[r.active];e.call(k,r,a),e.call(I,r),t.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:o,previousActive:s}),l&&l.method&&o&&(e._nextMethod?(e._nextMethod.step=l,e._nextMethod.doCallback=o,e._nextMethod.doTransition=a):(e._nextMethod={step:l,doCallback:o,doTransition:a},e._nextMethodRaf=window.requestAnimationFrame(function(){var r=e._nextMethod.step;r.method&&(r.execute&&i.executeAPICommand(t,r.method,r.args),e._nextMethod=null,e._nextMethodRaf=null)})))}function _(t,e,r){var i=r.node(),a=n.select(e);function s(){return r.data()[0]}t.on("mousedown",function(){var t=s();e.emit("plotly_sliderstart",{slider:t});var l=r.select("."+c.gripRectClass);n.event.stopPropagation(),n.event.preventDefault(),l.call(o.fill,t.activebgcolor);var g=M(t,n.mouse(i)[0]);b(e,r,t,g,!0),t._dragging=!0,a.on("mousemove",function(){var t=s(),o=M(t,n.mouse(i)[0]);b(e,r,t,o,!1)}),a.on("mouseup",function(){var t=s();t._dragging=!1,l.call(o.fill,t.bgcolor),a.on("mouseup",null),a.on("mousemove",null),e.emit("plotly_sliderend",{slider:t,step:t.steps[t.active]})})})}function w(t,e){var r=t.selectAll("rect."+c.tickRectClass).data(e._visibleSteps),i=e._dims;r.enter().append("rect").classed(c.tickRectClass,!0),r.exit().remove(),r.attr({width:e.tickwidth+"px","shape-rendering":"crispEdges"}),r.each(function(t,r){var s=r%i.labelStride==0,l=n.select(this);l.attr({height:s?e.ticklen:e.minorticklen}).call(o.fill,e.tickcolor),a.setTranslate(l,T(e,r/(e._stepCount-1))-.5*e.tickwidth,(s?c.tickOffset:c.minorTickOffset)+i.currentValueTotalHeight)})}function k(t,e,r){for(var n=t.select("rect."+c.gripRectClass),i=0,o=0;o<e._stepCount;o++)if(e._visibleSteps[o]._index===e.active){i=o;break}var a=T(e,i/(e._stepCount-1));if(!e._invokingCommand){var s=n;r&&e.transition.duration>0&&(s=s.transition().duration(e.transition.duration).ease(e.transition.easing)),s.attr("transform","translate("+(a-.5*c.gripWidth)+","+e._dims.currentValueTotalHeight+")")}}function T(t,e){var r=t._dims;return r.inputAreaStart+c.stepInset+(r.inputAreaLength-2*c.stepInset)*Math.min(1,Math.max(0,e))}function M(t,e){var r=t._dims;return Math.min(1,Math.max(0,(e-c.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*c.stepInset-2*r.inputAreaStart)))}function E(t,e,r){var n=r._dims,i=s.ensureSingle(t,"rect",c.railTouchRectClass,function(n){n.call(_,e,t,r).style("pointer-events","all")});i.attr({width:n.inputAreaLength,height:Math.max(n.inputAreaWidth,c.tickOffset+r.ticklen+n.labelHeight)}).call(o.fill,r.bgcolor).attr("opacity",0),a.setTranslate(i,0,n.currentValueTotalHeight)}function O(t,e){var r=e._dims,n=r.inputAreaLength-2*c.railInset,i=s.ensureSingle(t,"rect",c.railRectClass);i.attr({width:n,height:c.railWidth,rx:c.railRadius,ry:c.railRadius,"shape-rendering":"crispEdges"}).call(o.stroke,e.bordercolor).call(o.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px"),a.setTranslate(i,c.railInset,.5*(r.inputAreaWidth-c.railWidth)+r.currentValueTotalHeight)}e.exports=function(t){var e=t._fullLayout,r=function(t,e){for(var r=t[c.name],n=[],i=0;i<r.length;i++){var o=r[i];o.visible&&(o._gd=e,n.push(o))}return n}(e,t),o=e._infolayer.selectAll("g."+c.containerClassName).data(r.length>0?[0]:[]);function s(e){e._commandObserver&&(e._commandObserver.remove(),delete e._commandObserver),i.autoMargin(t,f(e))}if(o.enter().append("g").classed(c.containerClassName,!0).style("cursor","ew-resize"),o.exit().each(function(){n.select(this).selectAll("g."+c.groupClassName).each(s)}).remove(),0!==r.length){var l=o.selectAll("g."+c.groupClassName).data(r,C);l.enter().append("g").classed(c.groupClassName,!0),l.exit().each(s).remove();for(var g=0;g<r.length;g++){var u=r[g];p(t,u)}l.each(function(e){var r=n.select(this);!function(t){var e=t._dims;e.labelSteps=[];for(var r=t._stepCount,n=0;n<r;n+=e.labelStride)e.labelSteps.push({fraction:n/(r-1),step:t._visibleSteps[n]})}(e),i.manageCommandObserver(t,e,e._visibleSteps,function(e){var n=r.data()[0];n.active!==e.index&&(n._dragging||x(t,r,n,e.index,!1,!0))}),function(t,e,r){(r.steps[r.active]||{}).visible||(r.active=r._visibleSteps[0]._index);e.call(I,r).call(O,r).call(y,r).call(w,r).call(E,t,r).call(v,t,r);var n=r._dims;a.setTranslate(e,n.lx+r.pad.l,n.ly+r.pad.t),e.call(k,r,!1),e.call(I,r)}(t,n.select(this),e)})}}},{"../../constants/alignment":399,"../../lib":426,"../../lib/svg_text_utils":450,"../../plot_api/plot_template":463,"../../plots/plots":515,"../color":304,"../drawing":325,"./constants":388,d3:74}],391:[function(t,e,r){"use strict";var n=t("./constants");e.exports={moduleType:"component",name:n.name,layoutAttributes:t("./attributes"),supplyLayoutDefaults:t("./defaults"),draw:t("./draw")}},{"./attributes":387,"./constants":388,"./defaults":389,"./draw":390}],392:[function(t,e,r){"use strict";var n=t("d3"),i=t("fast-isnumeric"),o=t("../../plots/plots"),a=t("../../registry"),s=t("../../lib"),l=t("../drawing"),g=t("../color"),c=t("../../lib/svg_text_utils"),u=t("../../constants/interactions"),h=t("../../constants/alignment").OPPOSITE_SIDE,d=/ [XY][0-9]* /;e.exports={draw:function(t,e,r){var A,f=r.propContainer,C=r.propName,p=r.placeholder,I=r.traceIndex,v=r.avoid||{},m=r.attributes,y=r.transform,b=r.containerGroup,x=t._fullLayout,_=1,w=!1,k=f.title,T=(k&&k.text?k.text:"").trim(),M=k&&k.font?k.font:{},E=M.family,O=M.size,S=M.color;"title.text"===C?A="titleText":-1!==C.indexOf("axis")?A="axisTitleText":C.indexOf(!0)&&(A="colorbarTitleText");var R=t._context.edits[A];""===T?_=0:T.replace(d," % ")===p.replace(d," % ")&&(_=.2,w=!0,R||(T="")),r._meta?T=s.templateString(T,r._meta):x._meta&&(T=s.templateString(T,x._meta));var D=T||R;b||(b=s.ensureSingle(x._infolayer,"g","g-"+e));var L=b.selectAll("text").data(D?[0]:[]);if(L.enter().append("text"),L.text(T).attr("class",e),L.exit().remove(),!D)return b;function P(t){s.syncOrAsync([N,z],t)}function N(e){var r;return y?(r="",y.rotate&&(r+="rotate("+[y.rotate,m.x,m.y]+")"),y.offset&&(r+="translate(0, "+y.offset+")")):r=null,e.attr("transform",r),e.style({"font-family":E,"font-size":n.round(O,2)+"px",fill:g.rgb(S),opacity:_*g.opacity(S),"font-weight":o.fontWeight}).attr(m).call(c.convertToTspans,t),o.previousPromises(t)}function z(t){var e=n.select(t.node().parentNode);if(v&&v.selection&&v.side&&T){e.attr("transform",null);var r=h[v.side],o="left"===v.side||"top"===v.side?-1:1,a=i(v.pad)?v.pad:2,g=l.bBox(e.node()),c={left:0,top:0,right:x.width,bottom:x.height},u=v.maxShift||o*(c[v.side]-g[v.side]),d=0;if(u<0)d=u;else{var A=v.offsetLeft||0,f=v.offsetTop||0;g.left-=A,g.right-=A,g.top-=f,g.bottom-=f,v.selection.each(function(){var t=l.bBox(this);s.bBoxIntersect(g,t,a)&&(d=Math.max(d,o*(t[v.side]-g[r])+a))}),d=Math.min(u,d)}if(d>0||u<0){var C={left:[-d,0],right:[d,0],top:[0,-d],bottom:[0,d]}[v.side];e.attr("transform","translate("+C+")")}}}return L.call(P),R&&(T?L.on(".opacity",null):(_=0,w=!0,L.text(p).on("mouseover.opacity",function(){n.select(this).transition().duration(u.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){n.select(this).transition().duration(u.HIDE_PLACEHOLDER).style("opacity",0)})),L.call(c.makeEditable,{gd:t}).on("edit",function(e){void 0!==I?a.call("_guiRestyle",t,C,e,I):a.call("_guiRelayout",t,C,e)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(P)}).on("input",function(t){this.text(t||" ").call(c.positionText,m.x,m.y)})),L.classed("js-placeholder",w),b}}},{"../../constants/alignment":399,"../../constants/interactions":403,"../../lib":426,"../../lib/svg_text_utils":450,"../../plots/plots":515,"../../registry":524,"../color":304,"../drawing":325,d3:74,"fast-isnumeric":145}],393:[function(t,e,r){"use strict";var n=t("../../plots/font_attributes"),i=t("../color/attributes"),o=t("../../lib/extend").extendFlat,a=t("../../plot_api/edit_types").overrideAll,s=t("../../plots/pad_attributes"),l=t("../../plot_api/plot_template").templatedArray,g=l("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});e.exports=a(l("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:g,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:o(s({editType:"arraydraw"}),{}),font:n({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:i.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":419,"../../plot_api/edit_types":456,"../../plot_api/plot_template":463,"../../plots/font_attributes":499,"../../plots/pad_attributes":514,"../color/attributes":303}],394:[function(t,e,r){"use strict";e.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"◄",right:"►",up:"▲",down:"▼"}}},{}],395:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../plots/array_container_defaults"),o=t("./attributes"),a=t("./constants").name,s=o.buttons;function l(t,e,r){function a(r,i){return n.coerce(t,e,o,r,i)}a("visible",i(t,e,{name:"buttons",handleItemDefaults:g}).length>0)&&(a("active"),a("direction"),a("type"),a("showactive"),a("x"),a("y"),n.noneOrAll(t,e,["x","y"]),a("xanchor"),a("yanchor"),a("pad.t"),a("pad.r"),a("pad.b"),a("pad.l"),n.coerceFont(a,"font",r.font),a("bgcolor",r.paper_bgcolor),a("bordercolor"),a("borderwidth"))}function g(t,e){function r(r,i){return n.coerce(t,e,s,r,i)}r("visible","skip"===t.method||Array.isArray(t.args))&&(r("method"),r("args"),r("args2"),r("label"),r("execute"))}e.exports=function(t,e){i(t,e,{name:a,handleItemDefaults:l})}},{"../../lib":426,"../../plots/array_container_defaults":469,"./attributes":393,"./constants":394}],396:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../plots/plots"),o=t("../color"),a=t("../drawing"),s=t("../../lib"),l=t("../../lib/svg_text_utils"),g=t("../../plot_api/plot_template").arrayEditor,c=t("../../constants/alignment").LINE_SPACING,u=t("./constants"),h=t("./scrollbox");function d(t){return t._index}function A(t,e){return+t.attr(u.menuIndexAttrName)===e._index}function f(t,e,r,n,i,o,a,s){e.active=a,g(t.layout,u.name,e).applyUpdate("active",a),"buttons"===e.type?p(t,n,null,null,e):"dropdown"===e.type&&(i.attr(u.menuIndexAttrName,"-1"),C(t,n,i,o,e),s||p(t,n,i,o,e))}function C(t,e,r,n,i){var o=s.ensureSingle(e,"g",u.headerClassName,function(t){t.style("pointer-events","all")}),l=i._dims,g=i.active,c=i.buttons[g]||u.blankHeaderOpts,h={y:i.pad.t,yPad:0,x:i.pad.l,xPad:0,index:0},d={width:l.headerWidth,height:l.headerHeight};o.call(I,i,c,t).call(k,i,h,d),s.ensureSingle(e,"text",u.headerArrowClassName,function(t){t.classed("user-select-none",!0).attr("text-anchor","end").call(a.font,i.font).text(u.arrowSymbol[i.direction])}).attr({x:l.headerWidth-u.arrowOffsetX+i.pad.l,y:l.headerHeight/2+u.textOffsetY+i.pad.t}),o.on("click",function(){r.call(T,String(A(r,i)?-1:i._index)),p(t,e,r,n,i)}),o.on("mouseover",function(){o.call(b)}),o.on("mouseout",function(){o.call(x,i)}),a.setTranslate(e,l.lx,l.ly)}function p(t,e,r,o,a){r||(r=e).attr("pointer-events","all");var l=function(t){return-1==+t.attr(u.menuIndexAttrName)}(r)&&"buttons"!==a.type?[]:a.buttons,g="dropdown"===a.type?u.dropdownButtonClassName:u.buttonClassName,c=r.selectAll("g."+g).data(s.filterVisible(l)),h=c.enter().append("g").classed(g,!0),d=c.exit();"dropdown"===a.type?(h.attr("opacity","0").transition().attr("opacity","1"),d.transition().attr("opacity","0").remove()):d.remove();var A=0,C=0,p=a._dims,v=-1!==["up","down"].indexOf(a.direction);"dropdown"===a.type&&(v?C=p.headerHeight+u.gapButtonHeader:A=p.headerWidth+u.gapButtonHeader),"dropdown"===a.type&&"up"===a.direction&&(C=-u.gapButtonHeader+u.gapButton-p.openHeight),"dropdown"===a.type&&"left"===a.direction&&(A=-u.gapButtonHeader+u.gapButton-p.openWidth);var m={x:p.lx+A+a.pad.l,y:p.ly+C+a.pad.t,yPad:u.gapButton,xPad:u.gapButton,index:0},_={l:m.x+a.borderwidth,t:m.y+a.borderwidth};c.each(function(s,l){var g=n.select(this);g.call(I,a,s,t).call(k,a,m),g.on("click",function(){n.event.defaultPrevented||(s.execute&&(s.args2&&a.active===l?(f(t,a,0,e,r,o,-1),i.executeAPICommand(t,s.method,s.args2)):(f(t,a,0,e,r,o,l),i.executeAPICommand(t,s.method,s.args))),t.emit("plotly_buttonclicked",{menu:a,button:s,active:a.active}))}),g.on("mouseover",function(){g.call(b)}),g.on("mouseout",function(){g.call(x,a),c.call(y,a)})}),c.call(y,a),v?(_.w=Math.max(p.openWidth,p.headerWidth),_.h=m.y-_.t):(_.w=m.x-_.l,_.h=Math.max(p.openHeight,p.headerHeight)),_.direction=a.direction,o&&(c.size()?function(t,e,r,n,i,o){var a,s,l,g=i.direction,c="up"===g||"down"===g,h=i._dims,d=i.active;if(c)for(s=0,l=0;l<d;l++)s+=h.heights[l]+u.gapButton;else for(a=0,l=0;l<d;l++)a+=h.widths[l]+u.gapButton;n.enable(o,a,s),n.hbar&&n.hbar.attr("opacity","0").transition().attr("opacity","1");n.vbar&&n.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,o,a,_):function(t){var e=!!t.hbar,r=!!t.vbar;e&&t.hbar.transition().attr("opacity","0").each("end",function(){e=!1,r||t.disable()});r&&t.vbar.transition().attr("opacity","0").each("end",function(){r=!1,e||t.disable()})}(o))}function I(t,e,r,n){t.call(v,e).call(m,e,r,n)}function v(t,e){s.ensureSingle(t,"rect",u.itemRectClassName,function(t){t.attr({rx:u.rx,ry:u.ry,"shape-rendering":"crispEdges"})}).call(o.stroke,e.bordercolor).call(o.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px")}function m(t,e,r,n){var i=s.ensureSingle(t,"text",u.itemTextClassName,function(t){t.classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1})}),o=r.label,g=n._fullLayout._meta;g&&(o=s.templateString(o,g)),i.call(a.font,e.font).text(o).call(l.convertToTspans,n)}function y(t,e){var r=e.active;t.each(function(t,i){var a=n.select(this);i===r&&e.showactive&&a.select("rect."+u.itemRectClassName).call(o.fill,u.activeColor)})}function b(t){t.select("rect."+u.itemRectClassName).call(o.fill,u.hoverColor)}function x(t,e){t.select("rect."+u.itemRectClassName).call(o.fill,e.bgcolor)}function _(t,e){var r=e._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},o=a.tester.selectAll("g."+u.dropdownButtonClassName).data(s.filterVisible(e.buttons));o.enter().append("g").classed(u.dropdownButtonClassName,!0);var g=-1!==["up","down"].indexOf(e.direction);o.each(function(i,o){var s=n.select(this);s.call(I,e,i,t);var h=s.select("."+u.itemTextClassName),d=h.node()&&a.bBox(h.node()).width,A=Math.max(d+u.textPadX,u.minWidth),f=e.font.size*c,C=l.lineCount(h),p=Math.max(f*C,u.minHeight)+u.textOffsetY;p=Math.ceil(p),A=Math.ceil(A),r.widths[o]=A,r.heights[o]=p,r.height1=Math.max(r.height1,p),r.width1=Math.max(r.width1,A),g?(r.totalWidth=Math.max(r.totalWidth,A),r.openWidth=r.totalWidth,r.totalHeight+=p+u.gapButton,r.openHeight+=p+u.gapButton):(r.totalWidth+=A+u.gapButton,r.openWidth+=A+u.gapButton,r.totalHeight=Math.max(r.totalHeight,p),r.openHeight=r.totalHeight)}),g?r.totalHeight-=u.gapButton:r.totalWidth-=u.gapButton,r.headerWidth=r.width1+u.arrowPadX,r.headerHeight=r.height1,"dropdown"===e.type&&(g?(r.width1+=u.arrowPadX,r.totalHeight=r.height1):r.totalWidth=r.width1,r.totalWidth+=u.arrowPadX),o.remove();var h=r.totalWidth+e.pad.l+e.pad.r,d=r.totalHeight+e.pad.t+e.pad.b,A=t._fullLayout._size;r.lx=A.l+A.w*e.x,r.ly=A.t+A.h*(1-e.y);var f="left";s.isRightAnchor(e)&&(r.lx-=h,f="right"),s.isCenterAnchor(e)&&(r.lx-=h/2,f="center");var C="top";s.isBottomAnchor(e)&&(r.ly-=d,C="bottom"),s.isMiddleAnchor(e)&&(r.ly-=d/2,C="middle"),r.totalWidth=Math.ceil(r.totalWidth),r.totalHeight=Math.ceil(r.totalHeight),r.lx=Math.round(r.lx),r.ly=Math.round(r.ly),i.autoMargin(t,w(e),{x:e.x,y:e.y,l:h*({right:1,center:.5}[f]||0),r:h*({left:1,center:.5}[f]||0),b:d*({top:1,middle:.5}[C]||0),t:d*({bottom:1,middle:.5}[C]||0)})}function w(t){return u.autoMarginIdRoot+t._index}function k(t,e,r,n){n=n||{};var i=t.select("."+u.itemRectClassName),o=t.select("."+u.itemTextClassName),s=e.borderwidth,g=r.index,h=e._dims;a.setTranslate(t,s+r.x,s+r.y);var d=-1!==["up","down"].indexOf(e.direction),A=n.height||(d?h.heights[g]:h.height1);i.attr({x:0,y:0,width:n.width||(d?h.width1:h.widths[g]),height:A});var f=e.font.size*c,C=(l.lineCount(o)-1)*f/2;l.positionText(o,u.textOffsetX,A/2-C+u.textOffsetY),d?r.y+=h.heights[g]+r.yPad:r.x+=h.widths[g]+r.xPad,r.index++}function T(t,e){t.attr(u.menuIndexAttrName,e||"-1").selectAll("g."+u.dropdownButtonClassName).remove()}e.exports=function(t){var e=t._fullLayout,r=s.filterVisible(e[u.name]);function o(e){i.autoMargin(t,w(e))}var a=e._menulayer.selectAll("g."+u.containerClassName).data(r.length>0?[0]:[]);if(a.enter().append("g").classed(u.containerClassName,!0).style("cursor","pointer"),a.exit().each(function(){n.select(this).selectAll("g."+u.headerGroupClassName).each(o)}).remove(),0!==r.length){var l=a.selectAll("g."+u.headerGroupClassName).data(r,d);l.enter().append("g").classed(u.headerGroupClassName,!0);for(var g=s.ensureSingle(a,"g",u.dropdownButtonGroupClassName,function(t){t.style("pointer-events","all")}),c=0;c<r.length;c++){var I=r[c];_(t,I)}var v="updatemenus"+e._uid,m=new h(t,g,v);l.enter().size()&&(g.node().parentNode.appendChild(g.node()),g.call(T)),l.exit().each(function(t){g.call(T),o(t)}).remove(),l.each(function(e){var r=n.select(this),o="dropdown"===e.type?g:null;i.manageCommandObserver(t,e,e.buttons,function(n){f(t,e,e.buttons[n.index],r,o,m,n.index,!0)}),"dropdown"===e.type?(C(t,r,g,m,e),A(g,e)&&p(t,r,g,m,e)):p(t,r,null,null,e)})}}},{"../../constants/alignment":399,"../../lib":426,"../../lib/svg_text_utils":450,"../../plot_api/plot_template":463,"../../plots/plots":515,"../color":304,"../drawing":325,"./constants":394,"./scrollbox":398,d3:74}],397:[function(t,e,r){arguments[4][391][0].apply(r,arguments)},{"./attributes":393,"./constants":394,"./defaults":395,"./draw":396,dup:391}],398:[function(t,e,r){"use strict";e.exports=s;var n=t("d3"),i=t("../color"),o=t("../drawing"),a=t("../../lib");function s(t,e,r){this.gd=t,this.container=e,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}s.barWidth=2,s.barLength=20,s.barRadius=2,s.barPad=1,s.barColor="#808BA4",s.prototype.enable=function(t,e,r){var a=this.gd._fullLayout,l=a.width,g=a.height;this.position=t;var c,u,h,d,A=this.position.l,f=this.position.w,C=this.position.t,p=this.position.h,I=this.position.direction,v="down"===I,m="left"===I,y="up"===I,b=f,x=p;v||m||"right"===I||y||(this.position.direction="down",v=!0),v||y?(u=(c=A)+b,v?(h=C,x=(d=Math.min(h+x,g))-h):x=(d=C+x)-(h=Math.max(d-x,0))):(d=(h=C)+x,m?b=(u=A+b)-(c=Math.max(u-b,0)):(c=A,b=(u=Math.min(c+b,l))-c)),this._box={l:c,t:h,w:b,h:x};var _=f>b,w=s.barLength+2*s.barPad,k=s.barWidth+2*s.barPad,T=A,M=C+p;M+k>g&&(M=g-k);var E=this.container.selectAll("rect.scrollbar-horizontal").data(_?[0]:[]);E.exit().on(".drag",null).remove(),E.enter().append("rect").classed("scrollbar-horizontal",!0).call(i.fill,s.barColor),_?(this.hbar=E.attr({rx:s.barRadius,ry:s.barRadius,x:T,y:M,width:w,height:k}),this._hbarXMin=T+w/2,this._hbarTranslateMax=b-w):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var O=p>x,S=s.barWidth+2*s.barPad,R=s.barLength+2*s.barPad,D=A+f,L=C;D+S>l&&(D=l-S);var P=this.container.selectAll("rect.scrollbar-vertical").data(O?[0]:[]);P.exit().on(".drag",null).remove(),P.enter().append("rect").classed("scrollbar-vertical",!0).call(i.fill,s.barColor),O?(this.vbar=P.attr({rx:s.barRadius,ry:s.barRadius,x:D,y:L,width:S,height:R}),this._vbarYMin=L+R/2,this._vbarTranslateMax=x-R):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var N=this.id,z=c-.5,F=O?u+S+.5:u+.5,B=h-.5,j=_?d+k+.5:d+.5,V=a._topdefs.selectAll("#"+N).data(_||O?[0]:[]);if(V.exit().remove(),V.enter().append("clipPath").attr("id",N).append("rect"),_||O?(this._clipRect=V.select("rect").attr({x:Math.floor(z),y:Math.floor(B),width:Math.ceil(F)-Math.floor(z),height:Math.ceil(j)-Math.floor(B)}),this.container.call(o.setClipUrl,N,this.gd),this.bg.attr({x:A,y:C,width:f,height:p})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),_||O){var G=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(G);var U=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault(),n.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));_&&this.hbar.on(".drag",null).call(U),O&&this.vbar.on(".drag",null).call(U)}this.setTranslate(e,r)},s.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(o.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},s.prototype._onBoxDrag=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t-=n.event.dx),this.vbar&&(e-=n.event.dy),this.setTranslate(t,e)},s.prototype._onBoxWheel=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t+=n.event.deltaY),this.vbar&&(e+=n.event.deltaY),this.setTranslate(t,e)},s.prototype._onBarDrag=function(){var t=this.translateX,e=this.translateY;if(this.hbar){var r=t+this._hbarXMin,i=r+this._hbarTranslateMax;t=(a.constrain(n.event.x,r,i)-r)/(i-r)*(this.position.w-this._box.w)}if(this.vbar){var o=e+this._vbarYMin,s=o+this._vbarTranslateMax;e=(a.constrain(n.event.y,o,s)-o)/(s-o)*(this.position.h-this._box.h)}this.setTranslate(t,e)},s.prototype.setTranslate=function(t,e){var r=this.position.w-this._box.w,n=this.position.h-this._box.h;if(t=a.constrain(t||0,0,r),e=a.constrain(e||0,0,n),this.translateX=t,this.translateY=e,this.container.call(o.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-e),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+e-.5)}),this.hbar){var i=t/r;this.hbar.call(o.setTranslate,t+i*this._hbarTranslateMax,e)}if(this.vbar){var s=e/n;this.vbar.call(o.setTranslate,t,e+s*this._vbarTranslateMax)}}},{"../../lib":426,"../color":304,"../drawing":325,d3:74}],399:[function(t,e,r){"use strict";e.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],400:[function(t,e,r){"use strict";e.exports={FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Formatting.md#d3_format",DATE_FORMAT_LINK:"https://github.com/d3/d3-3.x-api-reference/blob/master/Time-Formatting.md#format"}},{}],401:[function(t,e,r){"use strict";e.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],402:[function(t,e,r){"use strict";e.exports={circle:"●","circle-open":"○",square:"■","square-open":"□",diamond:"◆","diamond-open":"◇",cross:"+",x:"❌"}},{}],403:[function(t,e,r){"use strict";e.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],404:[function(t,e,r){"use strict";e.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"−"}},{}],405:[function(t,e,r){"use strict";r.xmlns="http://www.w3.org/2000/xmlns/",r.svg="http://www.w3.org/2000/svg",r.xlink="http://www.w3.org/1999/xlink",r.svgAttrs={xmlns:r.svg,"xmlns:xlink":r.xlink}},{}],406:[function(t,e,r){"use strict";r.version=t("./version").version,t("es6-promise").polyfill(),t("../build/plotcss"),t("./fonts/mathjax_config")();for(var n=t("./registry"),i=r.register=n.register,o=t("./plot_api"),a=Object.keys(o),s=0;s<a.length;s++){var l=a[s];"_"!==l.charAt(0)&&(r[l]=o[l]),i({moduleType:"apiMethod",name:l,fn:o[l]})}i(t("./traces/scatter")),i([t("./components/legend"),t("./components/fx"),t("./components/annotations"),t("./components/annotations3d"),t("./components/shapes"),t("./components/images"),t("./components/updatemenus"),t("./components/sliders"),t("./components/rangeslider"),t("./components/rangeselector"),t("./components/grid"),t("./components/errorbars"),t("./components/colorscale"),t("./components/colorbar")]),i([t("./locale-en"),t("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(i(window.PlotlyLocales),delete window.PlotlyLocales),r.Icons=t("./fonts/ploticon"),r.Plots=t("./plots/plots"),r.Fx=t("./components/fx"),r.Snapshot=t("./snapshot"),r.PlotSchema=t("./plot_api/plot_schema"),r.Queue=t("./lib/queue"),r.d3=t("d3")},{"../build/plotcss":280,"./components/annotations":297,"./components/annotations3d":302,"./components/colorbar":310,"./components/colorscale":316,"./components/errorbars":331,"./components/fx":343,"./components/grid":347,"./components/images":352,"./components/legend":360,"./components/rangeselector":371,"./components/rangeslider":378,"./components/shapes":386,"./components/sliders":391,"./components/updatemenus":397,"./fonts/mathjax_config":407,"./fonts/ploticon":408,"./lib/queue":441,"./locale-en":454,"./locale-en-us":453,"./plot_api":458,"./plot_api/plot_schema":462,"./plots/plots":515,"./registry":524,"./snapshot":529,"./traces/scatter":599,"./version":636,d3:74,"es6-promise":127}],407:[function(t,e,r){"use strict";e.exports=function(){"undefined"!=typeof MathJax&&("local"!==(window.PlotlyConfig||{}).MathJaxConfig&&(MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured()))}},{}],408:[function(t,e,r){"use strict";e.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],409:[function(t,e,r){"use strict";r.isLeftAnchor=function(t){return"left"===t.xanchor||"auto"===t.xanchor&&t.x<=1/3},r.isCenterAnchor=function(t){return"center"===t.xanchor||"auto"===t.xanchor&&t.x>1/3&&t.x<2/3},r.isRightAnchor=function(t){return"right"===t.xanchor||"auto"===t.xanchor&&t.x>=2/3},r.isTopAnchor=function(t){return"top"===t.yanchor||"auto"===t.yanchor&&t.y>=2/3},r.isMiddleAnchor=function(t){return"middle"===t.yanchor||"auto"===t.yanchor&&t.y>1/3&&t.y<2/3},r.isBottomAnchor=function(t){return"bottom"===t.yanchor||"auto"===t.yanchor&&t.y<=1/3}},{}],410:[function(t,e,r){"use strict";var n=t("./mod"),i=n.mod,o=n.modHalf,a=Math.PI,s=2*a;function l(t){return Math.abs(t[1]-t[0])>s-1e-14}function g(t,e){return o(e-t,s)}function c(t,e){if(l(e))return!0;var r,n;e[0]<e[1]?(r=e[0],n=e[1]):(r=e[1],n=e[0]),(r=i(r,s))>(n=i(n,s))&&(n+=s);var o=i(t,s),a=o+s;return o>=r&&o<=n||a>=r&&a<=n}function u(t,e,r,n,i,o,g){i=i||0,o=o||0;var c,u,h,d,A,f=l([r,n]);function C(t,e){return[t*Math.cos(e)+i,o-t*Math.sin(e)]}f?(c=0,u=a,h=s):r<n?(c=r,h=n):(c=n,h=r),t<e?(d=t,A=e):(d=e,A=t);var p,I=Math.abs(h-c)<=a?0:1;function v(t,e,r){return"A"+[t,t]+" "+[0,I,r]+" "+C(t,e)}return f?p=null===d?"M"+C(A,c)+v(A,u,0)+v(A,h,0)+"Z":"M"+C(d,c)+v(d,u,0)+v(d,h,0)+"ZM"+C(A,c)+v(A,u,1)+v(A,h,1)+"Z":null===d?(p="M"+C(A,c)+v(A,h,0),g&&(p+="L0,0Z")):p="M"+C(d,c)+"L"+C(A,c)+v(A,h,0)+"L"+C(d,h)+v(d,c,1)+"Z",p}e.exports={deg2rad:function(t){return t/180*a},rad2deg:function(t){return t/a*180},angleDelta:g,angleDist:function(t,e){return Math.abs(g(t,e))},isFullCircle:l,isAngleInsideSector:c,isPtInsideSector:function(t,e,r,n){return!!c(e,n)&&(r[0]<r[1]?(i=r[0],o=r[1]):(i=r[1],o=r[0]),t>=i&&t<=o);var i,o},pathArc:function(t,e,r,n,i){return u(null,t,e,r,n,i,0)},pathSector:function(t,e,r,n,i){return u(null,t,e,r,n,i,1)},pathAnnulus:function(t,e,r,n,i,o){return u(t,e,r,n,i,o,1)}}},{"./mod":433}],411:[function(t,e,r){"use strict";var n=Array.isArray,i="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},o="undefined"==typeof DataView?function(){}:DataView;function a(t){return i.isView(t)&&!(t instanceof o)}function s(t){return n(t)||a(t)}function l(t,e,r){if(s(t)){if(s(t[0])){for(var n=r,i=0;i<t.length;i++)n=e(n,t[i].length);return n}return t.length}return 0}r.isTypedArray=a,r.isArrayOrTypedArray=s,r.isArray1D=function(t){return!s(t[0])},r.ensureArray=function(t,e){return n(t)||(t=[]),t.length=e,t},r.concat=function(){var t,e,r,i,o,a,s,l,g=[],c=!0,u=0;for(r=0;r<arguments.length;r++)(a=(i=arguments[r]).length)&&(e?g.push(i):(e=i,o=a),n(i)?t=!1:(c=!1,u?t!==i.constructor&&(t=!1):t=i.constructor),u+=a);if(!u)return[];if(!g.length)return e;if(c)return e.concat.apply(e,g);if(t){for((s=new t(u)).set(e),r=0;r<g.length;r++)i=g[r],s.set(i,o),o+=i.length;return s}for(s=new Array(u),l=0;l<e.length;l++)s[l]=e[l];for(r=0;r<g.length;r++){for(i=g[r],l=0;l<i.length;l++)s[o+l]=i[l];o+=l}return s},r.maxRowLength=function(t){return l(t,Math.max,0)},r.minRowLength=function(t){return l(t,Math.min,1/0)}},{}],412:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../constants/numerical").BADNUM,o=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;e.exports=function(t){return"string"==typeof t&&(t=t.replace(o,"")),n(t)?Number(t):i}},{"../constants/numerical":404,"fast-isnumeric":145}],413:[function(t,e,r){"use strict";e.exports=function(t){var e=t._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(t){t.regl&&t.regl.clear({color:!0,depth:!0})})}},{}],414:[function(t,e,r){"use strict";e.exports=function(t){t._responsiveChartHandler&&(window.removeEventListener("resize",t._responsiveChartHandler),delete t._responsiveChartHandler)}},{}],415:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("tinycolor2"),o=t("../plots/attributes"),a=t("../components/colorscale/scales"),s=t("../constants/interactions").DESELECTDIM,l=t("./nested_property"),g=t("./regex").counter,c=t("./mod").modHalf,u=t("./array").isArrayOrTypedArray;function h(t,e){var n=r.valObjectMeta[e.valType];if(e.arrayOk&&u(t))return!0;if(n.validateFunction)return n.validateFunction(t,e);var i={},o=i,a={set:function(t){o=t}};return n.coerceFunction(t,a,i,e),o!==i}r.valObjectMeta={data_array:{coerceFunction:function(t,e,r){u(t)?e.set(t):void 0!==r&&e.set(r)}},enumerated:{coerceFunction:function(t,e,r,n){n.coerceNumber&&(t=+t),-1===n.values.indexOf(t)?e.set(r):e.set(t)},validateFunction:function(t,e){e.coerceNumber&&(t=+t);for(var r=e.values,n=0;n<r.length;n++){var i=String(r[n]);if("/"===i.charAt(0)&&"/"===i.charAt(i.length-1)){if(new RegExp(i.substr(1,i.length-2)).test(t))return!0}else if(t===r[n])return!0}return!1}},boolean:{coerceFunction:function(t,e,r){!0===t||!1===t?e.set(t):e.set(r)}},number:{coerceFunction:function(t,e,r,i){!n(t)||void 0!==i.min&&t<i.min||void 0!==i.max&&t>i.max?e.set(r):e.set(+t)}},integer:{coerceFunction:function(t,e,r,i){t%1||!n(t)||void 0!==i.min&&t<i.min||void 0!==i.max&&t>i.max?e.set(r):e.set(+t)}},string:{coerceFunction:function(t,e,r,n){if("string"!=typeof t){var i="number"==typeof t;!0!==n.strict&&i?e.set(String(t)):e.set(r)}else n.noBlank&&!t?e.set(r):e.set(t)}},color:{coerceFunction:function(t,e,r){i(t).isValid()?e.set(t):e.set(r)}},colorlist:{coerceFunction:function(t,e,r){Array.isArray(t)&&t.length&&t.every(function(t){return i(t).isValid()})?e.set(t):e.set(r)}},colorscale:{coerceFunction:function(t,e,r){e.set(a.get(t,r))}},angle:{coerceFunction:function(t,e,r){"auto"===t?e.set("auto"):n(t)?e.set(c(+t,360)):e.set(r)}},subplotid:{coerceFunction:function(t,e,r,n){var i=n.regex||g(r);"string"==typeof t&&i.test(t)?e.set(t):e.set(r)},validateFunction:function(t,e){var r=e.dflt;return t===r||"string"==typeof t&&!!g(r).test(t)}},flaglist:{coerceFunction:function(t,e,r,n){if("string"==typeof t)if(-1===(n.extras||[]).indexOf(t)){for(var i=t.split("+"),o=0;o<i.length;){var a=i[o];-1===n.flags.indexOf(a)||i.indexOf(a)<o?i.splice(o,1):o++}i.length?e.set(i.join("+")):e.set(r)}else e.set(t);else e.set(r)}},any:{coerceFunction:function(t,e,r){void 0===t?e.set(r):e.set(t)}},info_array:{coerceFunction:function(t,e,n,i){function o(t,e,n){var i,o={set:function(t){i=t}};return void 0===n&&(n=e.dflt),r.valObjectMeta[e.valType].coerceFunction(t,o,n,e),i}var a=2===i.dimensions||"1-2"===i.dimensions&&Array.isArray(t)&&Array.isArray(t[0]);if(Array.isArray(t)){var s,l,g,c,u,h,d=i.items,A=[],f=Array.isArray(d),C=f&&a&&Array.isArray(d[0]),p=a&&f&&!C,I=f&&!p?d.length:t.length;if(n=Array.isArray(n)?n:[],a)for(s=0;s<I;s++)for(A[s]=[],g=Array.isArray(t[s])?t[s]:[],u=p?d.length:f?d[s].length:g.length,l=0;l<u;l++)c=p?d[l]:f?d[s][l]:d,void 0!==(h=o(g[l],c,(n[s]||[])[l]))&&(A[s][l]=h);else for(s=0;s<I;s++)void 0!==(h=o(t[s],f?d[s]:d,n[s]))&&(A[s]=h);e.set(A)}else e.set(n)},validateFunction:function(t,e){if(!Array.isArray(t))return!1;var r=e.items,n=Array.isArray(r),i=2===e.dimensions;if(!e.freeLength&&t.length!==r.length)return!1;for(var o=0;o<t.length;o++)if(i){if(!Array.isArray(t[o])||!e.freeLength&&t[o].length!==r[o].length)return!1;for(var a=0;a<t[o].length;a++)if(!h(t[o][a],n?r[o][a]:r))return!1}else if(!h(t[o],n?r[o]:r))return!1;return!0}}},r.coerce=function(t,e,n,i,o){var a=l(n,i).get(),s=l(t,i),g=l(e,i),c=s.get(),d=e._template;if(void 0===c&&d&&(c=l(d,i).get(),d=0),void 0===o&&(o=a.dflt),a.arrayOk&&u(c))return g.set(c),c;var A=r.valObjectMeta[a.valType].coerceFunction;A(c,g,o,a);var f=g.get();return d&&f===o&&!h(c,a)&&(A(c=l(d,i).get(),g,o,a),f=g.get()),f},r.coerce2=function(t,e,n,i,o){var a=l(t,i),s=r.coerce(t,e,n,i,o),g=a.get();return void 0!==g&&null!==g&&s},r.coerceFont=function(t,e,r){var n={};return r=r||{},n.family=t(e+".family",r.family),n.size=t(e+".size",r.size),n.color=t(e+".color",r.color),n},r.coerceHoverinfo=function(t,e,n){var i,a=e._module.attributes,s=a.hoverinfo?a:o,l=s.hoverinfo;if(1===n._dataLength){var g="all"===l.dflt?l.flags.slice():l.dflt.split("+");g.splice(g.indexOf("name"),1),i=g.join("+")}return r.coerce(t,e,s,"hoverinfo",i)},r.coerceSelectionMarkerOpacity=function(t,e){if(t.marker){var r,n,i=t.marker.opacity;if(void 0!==i)u(i)||t.selected||t.unselected||(r=i,n=s*i),e("selected.marker.opacity",r),e("unselected.marker.opacity",n)}},r.validate=h},{"../components/colorscale/scales":319,"../constants/interactions":403,"../plots/attributes":470,"./array":411,"./mod":433,"./nested_property":434,"./regex":442,"fast-isnumeric":145,tinycolor2:693}],416:[function(t,e,r){"use strict";var n,i,o=t("d3"),a=t("fast-isnumeric"),s=t("./loggers"),l=t("./mod").mod,g=t("../constants/numerical"),c=g.BADNUM,u=g.ONEDAY,h=g.ONEHOUR,d=g.ONEMIN,A=g.ONESEC,f=g.EPOCHJD,C=t("../registry"),p=o.time.format.utc,I=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,v=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,m=(new Date).getFullYear()-70;function y(t){return t&&C.componentsRegistry.calendars&&"string"==typeof t&&"gregorian"!==t}function b(t,e){return String(t+Math.pow(10,e)).substr(1)}r.dateTick0=function(t,e){return y(t)?e?C.getComponentMethod("calendars","CANONICAL_SUNDAY")[t]:C.getComponentMethod("calendars","CANONICAL_TICK")[t]:e?"2000-01-02":"2000-01-01"},r.dfltRange=function(t){return y(t)?C.getComponentMethod("calendars","DFLTRANGE")[t]:["2000-01-01","2001-01-01"]},r.isJSDate=function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.getTime},r.dateTime2ms=function(t,e){if(r.isJSDate(t)){var o=t.getTimezoneOffset()*d,a=(t.getUTCMinutes()-t.getMinutes())*d+(t.getUTCSeconds()-t.getSeconds())*A+(t.getUTCMilliseconds()-t.getMilliseconds());if(a){var s=3*d;o=o-s/2+l(a-o+s/2,s)}return(t=Number(t)-o)>=n&&t<=i?t:c}if("string"!=typeof t&&"number"!=typeof t)return c;t=String(t);var g=y(e),p=t.charAt(0);!g||"G"!==p&&"g"!==p||(t=t.substr(1),e="");var b=g&&"chinese"===e.substr(0,7),x=t.match(b?v:I);if(!x)return c;var _=x[1],w=x[3]||"1",k=Number(x[5]||1),T=Number(x[7]||0),M=Number(x[9]||0),E=Number(x[11]||0);if(g){if(2===_.length)return c;var O;_=Number(_);try{var S=C.getComponentMethod("calendars","getCal")(e);if(b){var R="i"===w.charAt(w.length-1);w=parseInt(w,10),O=S.newDate(_,S.toMonthIndex(_,w,R),k)}else O=S.newDate(_,Number(w),k)}catch(t){return c}return O?(O.toJD()-f)*u+T*h+M*d+E*A:c}_=2===_.length?(Number(_)+2e3-m)%100+m:Number(_),w-=1;var D=new Date(Date.UTC(2e3,w,k,T,M));return D.setUTCFullYear(_),D.getUTCMonth()!==w?c:D.getUTCDate()!==k?c:D.getTime()+E*A},n=r.MIN_MS=r.dateTime2ms("-9999"),i=r.MAX_MS=r.dateTime2ms("9999-12-31 23:59:59.9999"),r.isDateTime=function(t,e){return r.dateTime2ms(t,e)!==c};var x=90*u,_=3*h,w=5*d;function k(t,e,r,n,i){if((e||r||n||i)&&(t+=" "+b(e,2)+":"+b(r,2),(n||i)&&(t+=":"+b(n,2),i))){for(var o=4;i%10==0;)o-=1,i/=10;t+="."+b(i,o)}return t}r.ms2DateTime=function(t,e,r){if("number"!=typeof t||!(t>=n&&t<=i))return c;e||(e=0);var o,a,s,g,I,v,m=Math.floor(10*l(t+.05,1)),b=Math.round(t-m/10);if(y(r)){var T=Math.floor(b/u)+f,M=Math.floor(l(t,u));try{o=C.getComponentMethod("calendars","getCal")(r).fromJD(T).formatDate("yyyy-mm-dd")}catch(t){o=p("G%Y-%m-%d")(new Date(b))}if("-"===o.charAt(0))for(;o.length<11;)o="-0"+o.substr(1);else for(;o.length<10;)o="0"+o;a=e<x?Math.floor(M/h):0,s=e<x?Math.floor(M%h/d):0,g=e<_?Math.floor(M%d/A):0,I=e<w?M%A*10+m:0}else v=new Date(b),o=p("%Y-%m-%d")(v),a=e<x?v.getUTCHours():0,s=e<x?v.getUTCMinutes():0,g=e<_?v.getUTCSeconds():0,I=e<w?10*v.getUTCMilliseconds()+m:0;return k(o,a,s,g,I)},r.ms2DateTimeLocal=function(t){if(!(t>=n+u&&t<=i-u))return c;var e=Math.floor(10*l(t+.05,1)),r=new Date(Math.round(t-e/10));return k(o.time.format("%Y-%m-%d")(r),r.getHours(),r.getMinutes(),r.getSeconds(),10*r.getUTCMilliseconds()+e)},r.cleanDate=function(t,e,n){if(t===c)return e;if(r.isJSDate(t)||"number"==typeof t&&isFinite(t)){if(y(n))return s.error("JS Dates and milliseconds are incompatible with world calendars",t),e;if(!(t=r.ms2DateTimeLocal(+t))&&void 0!==e)return e}else if(!r.isDateTime(t,n))return s.error("unrecognized date",t),e;return t};var T=/%\d?f/g;function M(t,e,r,n){t=t.replace(T,function(t){var r=Math.min(+t.charAt(1)||6,6);return(e/1e3%1+2).toFixed(r).substr(2).replace(/0+$/,"")||"0"});var i=new Date(Math.floor(e+.05));if(y(n))try{t=C.getComponentMethod("calendars","worldCalFmt")(t,e,n)}catch(t){return"Invalid"}return r(t)(i)}var E=[59,59.9,59.99,59.999,59.9999];r.formatDate=function(t,e,r,n,i,o){if(i=y(i)&&i,!e)if("y"===r)e=o.year;else if("m"===r)e=o.month;else{if("d"!==r)return function(t,e){var r=l(t+.05,u),n=b(Math.floor(r/h),2)+":"+b(l(Math.floor(r/d),60),2);if("M"!==e){a(e)||(e=0);var i=(100+Math.min(l(t/A,60),E[e])).toFixed(e).substr(1);e>0&&(i=i.replace(/0+$/,"").replace(/[\.]$/,"")),n+=":"+i}return n}(t,r)+"\n"+M(o.dayMonthYear,t,n,i);e=o.dayMonth+"\n"+o.year}return M(e,t,n,i)};var O=3*u;r.incrementMonth=function(t,e,r){r=y(r)&&r;var n=l(t,u);if(t=Math.round(t-n),r)try{var i=Math.round(t/u)+f,o=C.getComponentMethod("calendars","getCal")(r),a=o.fromJD(i);return e%12?o.add(a,e,"m"):o.add(a,e/12,"y"),(a.toJD()-f)*u+n}catch(e){s.error("invalid ms "+t+" in calendar "+r)}var g=new Date(t+O);return g.setUTCMonth(g.getUTCMonth()+e)+n-O},r.findExactDates=function(t,e){for(var r,n,i=0,o=0,s=0,l=0,g=y(e)&&C.getComponentMethod("calendars","getCal")(e),c=0;c<t.length;c++)if(n=t[c],a(n)){if(!(n%u))if(g)try{1===(r=g.fromJD(n/u+f)).day()?1===r.month()?i++:o++:s++}catch(t){}else 1===(r=new Date(n)).getUTCDate()?0===r.getUTCMonth()?i++:o++:s++}else l++;s+=o+=i;var h=t.length-l;return{exactYears:i/h,exactMonths:o/h,exactDays:s/h}}},{"../constants/numerical":404,"../registry":524,"./loggers":430,"./mod":433,d3:74,"fast-isnumeric":145}],417:[function(t,e,r){"use strict";var n=t("d3"),i=t("./loggers");function o(t){var e=t&&t.parentNode;e&&e.removeChild(t)}function a(t,e,r){var n="plotly.js-style-"+t,o=document.getElementById(n);o||((o=document.createElement("style")).setAttribute("id",n),o.appendChild(document.createTextNode("")),document.head.appendChild(o));var a=o.sheet;a.insertRule?a.insertRule(e+"{"+r+"}",0):a.addRule?a.addRule(e,r,0):i.warn("addStyleRule failed")}e.exports={getGraphDiv:function(t){var e;if("string"==typeof t){if(null===(e=document.getElementById(t)))throw new Error("No DOM element with id '"+t+"' exists on the page.");return e}if(null===t||void 0===t)throw new Error("DOM element provided is null or undefined");return t},isPlotDiv:function(t){var e=n.select(t);return e.node()instanceof HTMLElement&&e.size()&&e.classed("js-plotly-plot")},removeElement:o,addStyleRule:function(t,e){a("global",t,e)},addRelatedStyleRule:a,deleteRelatedStyleRule:function(t){var e="plotly.js-style-"+t,r=document.getElementById(e);r&&o(r)}}},{"./loggers":430,d3:74}],418:[function(t,e,r){"use strict";var n=t("events").EventEmitter,i={init:function(t){if(t._ev instanceof n)return t;var e=new n,r=new n;return t._ev=e,t._internalEv=r,t.on=e.on.bind(e),t.once=e.once.bind(e),t.removeListener=e.removeListener.bind(e),t.removeAllListeners=e.removeAllListeners.bind(e),t._internalOn=r.on.bind(r),t._internalOnce=r.once.bind(r),t._removeInternalListener=r.removeListener.bind(r),t._removeAllInternalListeners=r.removeAllListeners.bind(r),t.emit=function(n,i){"undefined"!=typeof jQuery&&jQuery(t).trigger(n,i),e.emit(n,i),r.emit(n,i)},t},triggerHandler:function(t,e,r){var n,i;"undefined"!=typeof jQuery&&(n=jQuery(t).triggerHandler(e,r));var o=t._ev;if(!o)return n;var a,s=o._events[e];if(!s)return n;function l(t){return t.listener?(o.removeListener(e,t.listener),t.fired?void 0:(t.fired=!0,t.listener.apply(o,[r]))):t.apply(o,[r])}for(s=Array.isArray(s)?s:[s],a=0;a<s.length-1;a++)l(s[a]);return i=l(s[a]),void 0!==n?n:i},purge:function(t){return delete t._ev,delete t.on,delete t.once,delete t.removeListener,delete t.removeAllListeners,delete t.emit,delete t._ev,delete t._internalEv,delete t._internalOn,delete t._internalOnce,delete t._removeInternalListener,delete t._removeAllInternalListeners,t}};e.exports=i},{events:140}],419:[function(t,e,r){"use strict";var n=t("./is_plain_object.js"),i=Array.isArray;function o(t,e,r,a){var s,l,g,c,u,h,d=t[0],A=t.length;if(2===A&&i(d)&&i(t[1])&&0===d.length){if(function(t,e){var r,n;for(r=0;r<t.length;r++){if(null!==(n=t[r])&&"object"==typeof n)return!1;void 0!==n&&(e[r]=n)}return!0}(t[1],d))return d;d.splice(0,d.length)}for(var f=1;f<A;f++)for(l in s=t[f])g=d[l],c=s[l],a&&i(c)?d[l]=c:e&&c&&(n(c)||(u=i(c)))?(u?(u=!1,h=g&&i(g)?g:[]):h=g&&n(g)?g:{},d[l]=o([h,c],e,r,a)):(void 0!==c||r)&&(d[l]=c);return d}r.extendFlat=function(){return o(arguments,!1,!1,!1)},r.extendDeep=function(){return o(arguments,!0,!1,!1)},r.extendDeepAll=function(){return o(arguments,!0,!0,!1)},r.extendDeepNoArrays=function(){return o(arguments,!0,!1,!0)}},{"./is_plain_object.js":427}],420:[function(t,e,r){"use strict";e.exports=function(t){for(var e={},r=[],n=0,i=0;i<t.length;i++){var o=t[i];1!==e[o]&&(e[o]=1,r[n++]=o)}return r}},{}],421:[function(t,e,r){"use strict";function n(t){return!0===t.visible}function i(t){var e=t[0].trace;return!0===e.visible&&0!==e._length}e.exports=function(t){for(var e,r=(e=t,Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace?i:n),o=[],a=0;a<t.length;a++){var s=t[a];r(s)&&o.push(s)}return o}},{}],422:[function(t,e,r){"use strict";var n,i,o,a=t("./mod").mod;function s(t,e,r,n,i,o,a,s){var l=r-t,g=i-t,c=a-i,u=n-e,h=o-e,d=s-o,A=l*d-c*u;if(0===A)return null;var f=(g*d-c*h)/A,C=(g*u-l*h)/A;return C<0||C>1||f<0||f>1?null:{x:t+l*f,y:e+u*f}}function l(t,e,r,n,i){var o=n*t+i*e;if(o<0)return n*n+i*i;if(o>r){var a=n-t,s=i-e;return a*a+s*s}var l=n*e-i*t;return l*l/r}r.segmentsIntersect=s,r.segmentDistance=function(t,e,r,n,i,o,a,g){if(s(t,e,r,n,i,o,a,g))return 0;var c=r-t,u=n-e,h=a-i,d=g-o,A=c*c+u*u,f=h*h+d*d,C=Math.min(l(c,u,A,i-t,o-e),l(c,u,A,a-t,g-e),l(h,d,f,t-i,e-o),l(h,d,f,r-i,n-o));return Math.sqrt(C)},r.getTextLocation=function(t,e,r,s){if(t===i&&s===o||(n={},i=t,o=s),n[r])return n[r];var l=t.getPointAtLength(a(r-s/2,e)),g=t.getPointAtLength(a(r+s/2,e)),c=Math.atan((g.y-l.y)/(g.x-l.x)),u=t.getPointAtLength(a(r,e)),h={x:(4*u.x+l.x+g.x)/6,y:(4*u.y+l.y+g.y)/6,theta:c};return n[r]=h,h},r.clearLocationCache=function(){i=null},r.getVisibleSegment=function(t,e,r){var n,i,o=e.left,a=e.right,s=e.top,l=e.bottom,g=0,c=t.getTotalLength(),u=c;function h(e){var r=t.getPointAtLength(e);0===e?n=r:e===c&&(i=r);var g=r.x<o?o-r.x:r.x>a?r.x-a:0,u=r.y<s?s-r.y:r.y>l?r.y-l:0;return Math.sqrt(g*g+u*u)}for(var d=h(g);d;){if((g+=d+r)>u)return;d=h(g)}for(d=h(u);d;){if(g>(u-=d+r))return;d=h(u)}return{min:g,max:u,len:u-g,total:c,isClosed:0===g&&u===c&&Math.abs(n.x-i.x)<.1&&Math.abs(n.y-i.y)<.1}},r.findPointOnPath=function(t,e,r,n){for(var i,o,a,s=(n=n||{}).pathLength||t.getTotalLength(),l=n.tolerance||.001,g=n.iterationLimit||30,c=t.getPointAtLength(0)[r]>t.getPointAtLength(s)[r]?-1:1,u=0,h=0,d=s;u<g;){if(i=(h+d)/2,a=(o=t.getPointAtLength(i))[r]-e,Math.abs(a)<l)return o;c*a>0?d=i:h=i,u++}return o}},{"./mod":433}],423:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("tinycolor2"),o=t("color-normalize"),a=t("../components/colorscale"),s=t("../components/color/attributes").defaultLine,l=t("./array").isArrayOrTypedArray,g=o(s),c=1;function u(t,e){var r=t;return r[3]*=e,r}function h(t){if(n(t))return g;var e=o(t);return e.length?e:g}function d(t){return n(t)?t:c}e.exports={formatColor:function(t,e,r){var n,i,s,A,f,C=t.color,p=l(C),I=l(e),v=a.extractOpts(t),m=[];if(n=void 0!==v.colorscale?a.makeColorScaleFuncFromTrace(t):h,i=p?function(t,e){return void 0===t[e]?g:o(n(t[e]))}:h,s=I?function(t,e){return void 0===t[e]?c:d(t[e])}:d,p||I)for(var y=0;y<r;y++)A=i(C,y),f=s(e,y),m[y]=u(A,f);else m=u(o(C),e);return m},parseColorScale:function(t,e){void 0===e&&(e=1);var r=a.extractOpts(t);return(r.reversescale?a.flipScale(r.colorscale):r.colorscale).map(function(t){var r=t[0],n=i(t[1]).toRgb();return{index:r,rgb:[n.r,n.g,n.b,e]}})}}},{"../components/color/attributes":303,"../components/colorscale":316,"./array":411,"color-normalize":55,"fast-isnumeric":145,tinycolor2:693}],424:[function(t,e,r){"use strict";var n=t("./identity");function i(t){return[t]}e.exports={keyFun:function(t){return t.key},repeat:i,descend:n,wrap:i,unwrap:function(t){return t[0]}}},{"./identity":425}],425:[function(t,e,r){"use strict";e.exports=function(t){return t}},{}],426:[function(t,e,r){"use strict";var n=t("d3"),i=t("fast-isnumeric"),o=t("../constants/numerical"),a=o.FP_SAFE,s=o.BADNUM,l=e.exports={};l.nestedProperty=t("./nested_property"),l.keyedContainer=t("./keyed_container"),l.relativeAttr=t("./relative_attr"),l.isPlainObject=t("./is_plain_object"),l.toLogRange=t("./to_log_range"),l.relinkPrivateKeys=t("./relink_private");var g=t("./array");l.isTypedArray=g.isTypedArray,l.isArrayOrTypedArray=g.isArrayOrTypedArray,l.isArray1D=g.isArray1D,l.ensureArray=g.ensureArray,l.concat=g.concat,l.maxRowLength=g.maxRowLength,l.minRowLength=g.minRowLength;var c=t("./mod");l.mod=c.mod,l.modHalf=c.modHalf;var u=t("./coerce");l.valObjectMeta=u.valObjectMeta,l.coerce=u.coerce,l.coerce2=u.coerce2,l.coerceFont=u.coerceFont,l.coerceHoverinfo=u.coerceHoverinfo,l.coerceSelectionMarkerOpacity=u.coerceSelectionMarkerOpacity,l.validate=u.validate;var h=t("./dates");l.dateTime2ms=h.dateTime2ms,l.isDateTime=h.isDateTime,l.ms2DateTime=h.ms2DateTime,l.ms2DateTimeLocal=h.ms2DateTimeLocal,l.cleanDate=h.cleanDate,l.isJSDate=h.isJSDate,l.formatDate=h.formatDate,l.incrementMonth=h.incrementMonth,l.dateTick0=h.dateTick0,l.dfltRange=h.dfltRange,l.findExactDates=h.findExactDates,l.MIN_MS=h.MIN_MS,l.MAX_MS=h.MAX_MS;var d=t("./search");l.findBin=d.findBin,l.sorterAsc=d.sorterAsc,l.sorterDes=d.sorterDes,l.distinctVals=d.distinctVals,l.roundUp=d.roundUp,l.sort=d.sort,l.findIndexOfMin=d.findIndexOfMin;var A=t("./stats");l.aggNums=A.aggNums,l.len=A.len,l.mean=A.mean,l.median=A.median,l.midRange=A.midRange,l.variance=A.variance,l.stdev=A.stdev,l.interp=A.interp;var f=t("./matrix");l.init2dArray=f.init2dArray,l.transposeRagged=f.transposeRagged,l.dot=f.dot,l.translationMatrix=f.translationMatrix,l.rotationMatrix=f.rotationMatrix,l.rotationXYMatrix=f.rotationXYMatrix,l.apply2DTransform=f.apply2DTransform,l.apply2DTransform2=f.apply2DTransform2;var C=t("./angles");l.deg2rad=C.deg2rad,l.rad2deg=C.rad2deg,l.angleDelta=C.angleDelta,l.angleDist=C.angleDist,l.isFullCircle=C.isFullCircle,l.isAngleInsideSector=C.isAngleInsideSector,l.isPtInsideSector=C.isPtInsideSector,l.pathArc=C.pathArc,l.pathSector=C.pathSector,l.pathAnnulus=C.pathAnnulus;var p=t("./anchor_utils");l.isLeftAnchor=p.isLeftAnchor,l.isCenterAnchor=p.isCenterAnchor,l.isRightAnchor=p.isRightAnchor,l.isTopAnchor=p.isTopAnchor,l.isMiddleAnchor=p.isMiddleAnchor,l.isBottomAnchor=p.isBottomAnchor;var I=t("./geometry2d");l.segmentsIntersect=I.segmentsIntersect,l.segmentDistance=I.segmentDistance,l.getTextLocation=I.getTextLocation,l.clearLocationCache=I.clearLocationCache,l.getVisibleSegment=I.getVisibleSegment,l.findPointOnPath=I.findPointOnPath;var v=t("./extend");l.extendFlat=v.extendFlat,l.extendDeep=v.extendDeep,l.extendDeepAll=v.extendDeepAll,l.extendDeepNoArrays=v.extendDeepNoArrays;var m=t("./loggers");l.log=m.log,l.warn=m.warn,l.error=m.error;var y=t("./regex");l.counterRegex=y.counter;var b=t("./throttle");l.throttle=b.throttle,l.throttleDone=b.done,l.clearThrottle=b.clear;var x=t("./dom");function _(t){var e={};for(var r in t)for(var n=t[r],i=0;i<n.length;i++)e[n[i]]=+r;return e}l.getGraphDiv=x.getGraphDiv,l.isPlotDiv=x.isPlotDiv,l.removeElement=x.removeElement,l.addStyleRule=x.addStyleRule,l.addRelatedStyleRule=x.addRelatedStyleRule,l.deleteRelatedStyleRule=x.deleteRelatedStyleRule,l.clearResponsive=t("./clear_responsive"),l.makeTraceGroups=t("./make_trace_groups"),l._=t("./localize"),l.notifier=t("./notifier"),l.filterUnique=t("./filter_unique"),l.filterVisible=t("./filter_visible"),l.pushUnique=t("./push_unique"),l.cleanNumber=t("./clean_number"),l.ensureNumber=function(t){return i(t)?(t=Number(t))<-a||t>a?s:i(t)?Number(t):s:s},l.isIndex=function(t,e){return!(void 0!==e&&t>=e)&&(i(t)&&t>=0&&t%1==0)},l.noop=t("./noop"),l.identity=t("./identity"),l.repeat=function(t,e){for(var r=new Array(e),n=0;n<e;n++)r[n]=t;return r},l.swapAttrs=function(t,e,r,n){r||(r="x"),n||(n="y");for(var i=0;i<e.length;i++){var o=e[i],a=l.nestedProperty(t,o.replace("?",r)),s=l.nestedProperty(t,o.replace("?",n)),g=a.get();a.set(s.get()),s.set(g)}},l.raiseToTop=function(t){t.parentNode.appendChild(t)},l.cancelTransition=function(t){return t.transition().duration(0)},l.constrain=function(t,e,r){return e>r?Math.max(r,Math.min(e,t)):Math.max(e,Math.min(r,t))},l.bBoxIntersect=function(t,e,r){return r=r||0,t.left<=e.right+r&&e.left<=t.right+r&&t.top<=e.bottom+r&&e.top<=t.bottom+r},l.simpleMap=function(t,e,r,n){for(var i=t.length,o=new Array(i),a=0;a<i;a++)o[a]=e(t[a],r,n);return o},l.randstr=function t(e,r,n,i){if(n||(n=16),void 0===r&&(r=24),r<=0)return"0";var o,a,s=Math.log(Math.pow(2,r))/Math.log(n),g="";for(o=2;s===1/0;o*=2)s=Math.log(Math.pow(2,r/o))/Math.log(n)*o;var c=s-Math.floor(s);for(o=0;o<Math.floor(s);o++)g=Math.floor(Math.random()*n).toString(n)+g;c&&(a=Math.pow(n,c),g=Math.floor(Math.random()*a).toString(n)+g);var u=parseInt(g,n);return e&&e[g]||u!==1/0&&u>=Math.pow(2,r)?i>10?(l.warn("randstr failed uniqueness"),g):t(e,r,n,(i||0)+1):g},l.OptionControl=function(t,e){t||(t={}),e||(e="opt");var r={optionList:[],_newoption:function(n){n[e]=t,r[n.name]=n,r.optionList.push(n)}};return r["_"+e]=t,r},l.smooth=function(t,e){if((e=Math.round(e)||0)<2)return t;var r,n,i,o,a=t.length,s=2*a,l=2*e-1,g=new Array(l),c=new Array(a);for(r=0;r<l;r++)g[r]=(1-Math.cos(Math.PI*(r+1)/e))/(2*e);for(r=0;r<a;r++){for(o=0,n=0;n<l;n++)(i=r+n+1-e)<-a?i-=s*Math.round(i/s):i>=s&&(i-=s*Math.floor(i/s)),i<0?i=-1-i:i>=a&&(i=s-1-i),o+=t[i]*g[n];c[r]=o}return c},l.syncOrAsync=function(t,e,r){var n;function i(){return l.syncOrAsync(t,e,r)}for(;t.length;)if((n=(0,t.splice(0,1)[0])(e))&&n.then)return n.then(i).then(void 0,l.promiseError);return r&&r(e)},l.stripTrailingSlash=function(t){return"/"===t.substr(-1)?t.substr(0,t.length-1):t},l.noneOrAll=function(t,e,r){if(t){var n,i,o=!1,a=!0;for(n=0;n<r.length;n++)void 0!==(i=t[r[n]])&&null!==i?o=!0:a=!1;if(o&&!a)for(n=0;n<r.length;n++)t[r[n]]=e[r[n]]}},l.mergeArray=function(t,e,r,n){var i="function"==typeof n;if(l.isArrayOrTypedArray(t))for(var o=Math.min(t.length,e.length),a=0;a<o;a++){var s=t[a];e[a][r]=i?n(s):s}},l.mergeArrayCastPositive=function(t,e,r){return l.mergeArray(t,e,r,function(t){var e=+t;return isFinite(e)&&e>0?e:0})},l.fillArray=function(t,e,r,n){if(n=n||l.identity,l.isArrayOrTypedArray(t))for(var i=0;i<e.length;i++)e[i][r]=n(t[i])},l.castOption=function(t,e,r,n){n=n||l.identity;var i=l.nestedProperty(t,r).get();return l.isArrayOrTypedArray(i)?Array.isArray(e)&&l.isArrayOrTypedArray(i[e[0]])?n(i[e[0]][e[1]]):n(i[e]):i},l.extractOption=function(t,e,r,n){if(r in t)return t[r];var i=l.nestedProperty(e,n).get();return Array.isArray(i)?void 0:i},l.tagSelected=function(t,e,r){var n,i,o=e.selectedpoints,a=e._indexToPoints;a&&(n=_(a));for(var s=0;s<o.length;s++){var g=o[s];if(l.isIndex(g)||l.isArrayOrTypedArray(g)&&l.isIndex(g[0])&&l.isIndex(g[1])){var c=n?n[g]:g,u=r?r[c]:c;void 0!==(i=u)&&i<t.length&&(t[u].selected=1)}}},l.selIndices2selPoints=function(t){var e=t.selectedpoints,r=t._indexToPoints;if(r){for(var n=_(r),i=[],o=0;o<e.length;o++){var a=e[o];if(l.isIndex(a)){var s=n[a];l.isIndex(s)&&i.push(s)}}return i}return e},l.getTargetArray=function(t,e){var r=e.target;if("string"==typeof r&&r){var n=l.nestedProperty(t,r).get();return!!Array.isArray(n)&&n}return!!Array.isArray(r)&&r},l.minExtend=function(t,e){var r={};"object"!=typeof e&&(e={});var n,i,o,a=Object.keys(t);for(n=0;n<a.length;n++)o=t[i=a[n]],"_"!==i.charAt(0)&&"function"!=typeof o&&("module"===i?r[i]=o:Array.isArray(o)?r[i]="colorscale"===i?o.slice():o.slice(0,3):l.isTypedArray(o)?r[i]=o.subarray(0,3):r[i]=o&&"object"==typeof o?l.minExtend(t[i],e[i]):o);for(a=Object.keys(e),n=0;n<a.length;n++)"object"==typeof(o=e[i=a[n]])&&i in r&&"object"==typeof r[i]||(r[i]=o);return r},l.titleCase=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},l.containsAny=function(t,e){for(var r=0;r<e.length;r++)if(-1!==t.indexOf(e[r]))return!0;return!1},l.isIE=function(){return void 0!==window.navigator.msSaveBlob};var w=/MSIE [1-9]\./;l.isIE9orBelow=function(){return l.isIE()&&w.test(window.navigator.userAgent)};var k=/Version\/[\d\.]+.*Safari/;l.isSafari=function(){return k.test(window.navigator.userAgent)},l.isD3Selection=function(t){return t&&"function"==typeof t.classed},l.ensureSingle=function(t,e,r,n){var i=t.select(e+(r?"."+r:""));if(i.size())return i;var o=t.append(e);return r&&o.classed(r,!0),n&&o.call(n),o},l.ensureSingleById=function(t,e,r,n){var i=t.select(e+"#"+r);if(i.size())return i;var o=t.append(e).attr("id",r);return n&&o.call(n),o},l.objectFromPath=function(t,e){for(var r,n=t.split("."),i=r={},o=0;o<n.length;o++){var a=n[o],s=null,l=n[o].match(/(.*)\[([0-9]+)\]/);l?(a=l[1],s=l[2],r=r[a]=[],o===n.length-1?r[s]=e:r[s]={},r=r[s]):(o===n.length-1?r[a]=e:r[a]={},r=r[a])}return i};var T=/^([^\[\.]+)\.(.+)?/,M=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;l.expandObjectPaths=function(t){var e,r,n,i,o,a,s;if("object"==typeof t&&!Array.isArray(t))for(r in t)t.hasOwnProperty(r)&&((e=r.match(T))?(i=t[r],n=e[1],delete t[r],t[n]=l.extendDeepNoArrays(t[n]||{},l.objectFromPath(r,l.expandObjectPaths(i))[n])):(e=r.match(M))?(i=t[r],n=e[1],o=parseInt(e[2]),delete t[r],t[n]=t[n]||[],"."===e[3]?(s=e[4],a=t[n][o]=t[n][o]||{},l.extendDeepNoArrays(a,l.objectFromPath(s,l.expandObjectPaths(i)))):t[n][o]=l.expandObjectPaths(i)):t[r]=l.expandObjectPaths(t[r]));return t},l.numSeparate=function(t,e,r){if(r||(r=!1),"string"!=typeof e||0===e.length)throw new Error("Separator string required for formatting!");"number"==typeof t&&(t=String(t));var n=/(\d+)(\d{3})/,i=e.charAt(0),o=e.charAt(1),a=t.split("."),s=a[0],l=a.length>1?i+a[1]:"";if(o&&(a.length>1||s.length>4||r))for(;n.test(s);)s=s.replace(n,"$1"+o+"$2");return s+l},l.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var E=/^\w*$/;l.templateString=function(t,e){var r={};return t.replace(l.TEMPLATE_STRING_REGEX,function(t,n){var i;return E.test(n)?i=e[n]:(r[n]=r[n]||l.nestedProperty(e,n).get,i=r[n]()),l.isValidTextValue(i)?i:""})};var O={max:10,count:0,name:"hovertemplate"};l.hovertemplateString=function(){return D.apply(O,arguments)};var S={max:10,count:0,name:"texttemplate"};l.texttemplateString=function(){return D.apply(S,arguments)};var R=/^[:|\|]/;function D(t,e,r){var i=this,o=arguments;e||(e={});var a={};return t.replace(l.TEMPLATE_STRING_REGEX,function(t,s,g){var c,u,h,d;for(h=3;h<o.length;h++)if(c=o[h]){if(c.hasOwnProperty(s)){u=c[s];break}if(E.test(s)||(u=a[s]||l.nestedProperty(c,s).get())&&(a[s]=u),void 0!==u)break}if(void 0===u&&i)return i.count<i.max&&(l.warn("Variable '"+s+"' in "+i.name+" could not be found!"),u=t),i.count===i.max&&l.warn("Too many "+i.name+" warnings - additional warnings will be suppressed"),i.count++,t;if(g){if(":"===g[0]&&(u=(d=r?r.numberFormat:n.format)(g.replace(R,""))(u)),"|"===g[0]){d=r?r.timeFormat.utc:n.time.format.utc;var A=l.dateTime2ms(u);u=l.formatDate(A,g.replace(R,""),!1,d)}}else e.hasOwnProperty(s+"Label")&&(u=e[s+"Label"]);return u})}l.subplotSort=function(t,e){for(var r=Math.min(t.length,e.length)+1,n=0,i=0,o=0;o<r;o++){var a=t.charCodeAt(o)||0,s=e.charCodeAt(o)||0,l=a>=48&&a<=57,g=s>=48&&s<=57;if(l&&(n=10*n+a-48),g&&(i=10*i+s-48),!l||!g){if(n!==i)return n-i;if(a!==s)return a-s}}return i-n};var L=2e9;l.seedPseudoRandom=function(){L=2e9},l.pseudoRandom=function(){var t=L;return L=(69069*L+1)%4294967296,Math.abs(L-t)<429496729?l.pseudoRandom():L/4294967296},l.fillText=function(t,e,r){var n=Array.isArray(r)?function(t){r.push(t)}:function(t){r.text=t},i=l.extractOption(t,e,"htx","hovertext");if(l.isValidTextValue(i))return n(i);var o=l.extractOption(t,e,"tx","text");return l.isValidTextValue(o)?n(o):void 0},l.isValidTextValue=function(t){return t||0===t},l.formatPercent=function(t,e){e=e||0;for(var r=(Math.round(100*t*Math.pow(10,e))*Math.pow(.1,e)).toFixed(e)+"%",n=0;n<e;n++)-1!==r.indexOf(".")&&(r=(r=r.replace("0%","%")).replace(".%","%"));return r},l.isHidden=function(t){var e=window.getComputedStyle(t).display;return!e||"none"===e},l.getTextTransform=function(t){var e=t.noCenter,r=t.textX,n=t.textY,i=t.targetX,o=t.targetY,a=t.anchorX||0,s=t.anchorY||0,l=t.rotate,g=t.scale;return g?g>1&&(g=1):g=0,"translate("+(i-g*(r+a))+","+(o-g*(n+s))+")"+(g<1?"scale("+g+")":"")+(l?"rotate("+l+(e?"":" "+r+" "+n)+")":"")},l.ensureUniformFontSize=function(t,e){var r=l.extendFlat({},e);return r.size=Math.max(e.size,t._fullLayout.uniformtext.minsize||0),r}},{"../constants/numerical":404,"./anchor_utils":409,"./angles":410,"./array":411,"./clean_number":412,"./clear_responsive":414,"./coerce":415,"./dates":416,"./dom":417,"./extend":419,"./filter_unique":420,"./filter_visible":421,"./geometry2d":422,"./identity":425,"./is_plain_object":427,"./keyed_container":428,"./localize":429,"./loggers":430,"./make_trace_groups":431,"./matrix":432,"./mod":433,"./nested_property":434,"./noop":435,"./notifier":436,"./push_unique":440,"./regex":442,"./relative_attr":443,"./relink_private":444,"./search":445,"./stats":448,"./throttle":451,"./to_log_range":452,d3:74,"fast-isnumeric":145}],427:[function(t,e,r){"use strict";e.exports=function(t){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(t):"[object Object]"===Object.prototype.toString.call(t)&&Object.getPrototypeOf(t)===Object.prototype}},{}],428:[function(t,e,r){"use strict";var n=t("./nested_property"),i=/^\w*$/;e.exports=function(t,e,r,o){var a,s,l;r=r||"name",o=o||"value";var g={};e&&e.length?(l=n(t,e),s=l.get()):s=t,e=e||"";var c={};if(s)for(a=0;a<s.length;a++)c[s[a][r]]=a;var u=i.test(o),h={set:function(t,e){var i=null===e?4:0;if(!s){if(!l||4===i)return;s=[],l.set(s)}var a=c[t];if(void 0===a){if(4===i)return;i|=3,a=s.length,c[t]=a}else e!==(u?s[a][o]:n(s[a],o).get())&&(i|=2);var d=s[a]=s[a]||{};return d[r]=t,u?d[o]=e:n(d,o).set(e),null!==e&&(i&=-5),g[a]=g[a]|i,h},get:function(t){if(s){var e=c[t];return void 0===e?void 0:u?s[e][o]:n(s[e],o).get()}},rename:function(t,e){var n=c[t];return void 0===n?h:(g[n]=1|g[n],c[e]=n,delete c[t],s[n][r]=e,h)},remove:function(t){var e=c[t];if(void 0===e)return h;var i=s[e];if(Object.keys(i).length>2)return g[e]=2|g[e],h.set(t,null);if(u){for(a=e;a<s.length;a++)g[a]=3|g[a];for(a=e;a<s.length;a++)c[s[a][r]]--;s.splice(e,1),delete c[t]}else n(i,o).set(null),g[e]=6|g[e];return h},constructUpdate:function(){for(var t,i,a={},l=Object.keys(g),c=0;c<l.length;c++)i=l[c],t=e+"["+i+"]",s[i]?(1&g[i]&&(a[t+"."+r]=s[i][r]),2&g[i]&&(a[t+"."+o]=u?4&g[i]?null:s[i][o]:4&g[i]?null:n(s[i],o).get())):a[t]=null;return a}};return h}},{"./nested_property":434}],429:[function(t,e,r){"use strict";var n=t("../registry");e.exports=function(t,e){for(var r=t._context.locale,i=0;i<2;i++){for(var o=t._context.locales,a=0;a<2;a++){var s=(o[r]||{}).dictionary;if(s){var l=s[e];if(l)return l}o=n.localeRegistry}var g=r.split("-")[0];if(g===r)break;r=g}return e}},{"../registry":524}],430:[function(t,e,r){"use strict";var n=t("../plot_api/plot_config").dfltConfig,i=t("./notifier"),o=e.exports={};function a(t,e){if(t&&t.apply)try{return void t.apply(console,e)}catch(t){}for(var r=0;r<e.length;r++)try{t(e[r])}catch(t){console.log(e[r])}}o.log=function(){var t;if(n.logging>1){var e=["LOG:"];for(t=0;t<arguments.length;t++)e.push(arguments[t]);a(console.trace||console.log,e)}if(n.notifyOnLogging>1){var r=[];for(t=0;t<arguments.length;t++)r.push(arguments[t]);i(r.join("<br>"),"long")}},o.warn=function(){var t;if(n.logging>0){var e=["WARN:"];for(t=0;t<arguments.length;t++)e.push(arguments[t]);a(console.trace||console.log,e)}if(n.notifyOnLogging>0){var r=[];for(t=0;t<arguments.length;t++)r.push(arguments[t]);i(r.join("<br>"),"stick")}},o.error=function(){var t;if(n.logging>0){var e=["ERROR:"];for(t=0;t<arguments.length;t++)e.push(arguments[t]);a(console.error,e)}if(n.notifyOnLogging>0){var r=[];for(t=0;t<arguments.length;t++)r.push(arguments[t]);i(r.join("<br>"),"stick")}}},{"../plot_api/plot_config":461,"./notifier":436}],431:[function(t,e,r){"use strict";var n=t("d3");e.exports=function(t,e,r){var i=t.selectAll("g."+r.replace(/\s/g,".")).data(e,function(t){return t[0].trace.uid});i.exit().remove(),i.enter().append("g").attr("class",r),i.order();var o=t.classed("rangeplot")?"nodeRangePlot3":"node3";return i.each(function(t){t[0][o]=n.select(this)}),i}},{d3:74}],432:[function(t,e,r){"use strict";r.init2dArray=function(t,e){for(var r=new Array(t),n=0;n<t;n++)r[n]=new Array(e);return r},r.transposeRagged=function(t){var e,r,n=0,i=t.length;for(e=0;e<i;e++)n=Math.max(n,t[e].length);var o=new Array(n);for(e=0;e<n;e++)for(o[e]=new Array(i),r=0;r<i;r++)o[e][r]=t[r][e];return o},r.dot=function(t,e){if(!t.length||!e.length||t.length!==e.length)return null;var n,i,o=t.length;if(t[0].length)for(n=new Array(o),i=0;i<o;i++)n[i]=r.dot(t[i],e);else if(e[0].length){var a=r.transposeRagged(e);for(n=new Array(a.length),i=0;i<a.length;i++)n[i]=r.dot(t,a[i])}else for(n=0,i=0;i<o;i++)n+=t[i]*e[i];return n},r.translationMatrix=function(t,e){return[[1,0,t],[0,1,e],[0,0,1]]},r.rotationMatrix=function(t){var e=t*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},r.rotationXYMatrix=function(t,e,n){return r.dot(r.dot(r.translationMatrix(e,n),r.rotationMatrix(t)),r.translationMatrix(-e,-n))},r.apply2DTransform=function(t){return function(){var e=arguments;3===e.length&&(e=e[0]);var n=1===arguments.length?e[0]:[e[0],e[1]];return r.dot(t,[n[0],n[1],1]).slice(0,2)}},r.apply2DTransform2=function(t){var e=r.apply2DTransform(t);return function(t){return e(t.slice(0,2)).concat(e(t.slice(2,4)))}}},{}],433:[function(t,e,r){"use strict";e.exports={mod:function(t,e){var r=t%e;return r<0?r+e:r},modHalf:function(t,e){return Math.abs(t)>e/2?t-Math.round(t/e)*e:t}}},{}],434:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("./array").isArrayOrTypedArray;e.exports=function(t,e){if(n(e))e=String(e);else if("string"!=typeof e||"[-1]"===e.substr(e.length-4))throw"bad property string";for(var r,o,a,l=0,g=e.split(".");l<g.length;){if(r=String(g[l]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(r[1])g[l]=r[1];else{if(0!==l)throw"bad property string";g.splice(0,1)}for(o=r[2].substr(1,r[2].length-2).split("]["),a=0;a<o.length;a++)l++,g.splice(l,0,Number(o[a]))}l++}return"object"!=typeof t?function(t,e,r){return{set:function(){throw"bad container"},get:function(){},astr:e,parts:r,obj:t}}(t,e,g):{set:s(t,g,e),get:function t(e,r){return function(){var n,o,a,s,l,g=e;for(s=0;s<r.length-1;s++){if(-1===(n=r[s])){for(o=!0,a=[],l=0;l<g.length;l++)a[l]=t(g[l],r.slice(s+1))(),a[l]!==a[0]&&(o=!1);return o?a[0]:a}if("number"==typeof n&&!i(g))return;if("object"!=typeof(g=g[n])||null===g)return}if("object"==typeof g&&null!==g&&null!==(a=g[r[s]]))return a}}(t,g),astr:e,parts:g,obj:t}};var o=/(^|\.)args\[/;function a(t,e){return void 0===t||null===t&&!e.match(o)}function s(t,e,r){return function(n){var o,s,u=t,h="",d=[[t,h]],A=a(n,r);for(s=0;s<e.length-1;s++){if("number"==typeof(o=e[s])&&!i(u))throw"array index but container is not an array";if(-1===o){if(A=!g(u,e.slice(s+1),n,r))break;return}if(!c(u,o,e[s+1],A))break;if("object"!=typeof(u=u[o])||null===u)throw"container is not an object";h=l(h,o),d.push([u,h])}if(A){if(s===e.length-1&&(delete u[e[s]],Array.isArray(u)&&+e[s]==u.length-1))for(;u.length&&void 0===u[u.length-1];)u.pop()}else u[e[s]]=n}}function l(t,e){var r=e;return n(e)?r="["+e+"]":t&&(r="."+e),t+r}function g(t,e,r,n){var o,l=i(r),g=!0,u=r,h=n.replace("-1",0),d=!l&&a(r,h),A=e[0];for(o=0;o<t.length;o++)h=n.replace("-1",o),l&&(d=a(u=r[o%r.length],h)),d&&(g=!1),c(t,o,A,d)&&s(t[o],e,n.replace("-1",o))(u);return g}function c(t,e,r,n){if(void 0===t[e]){if(n)return!1;t[e]="number"==typeof r?[]:{}}return!0}},{"./array":411,"fast-isnumeric":145}],435:[function(t,e,r){"use strict";e.exports=function(){}},{}],436:[function(t,e,r){"use strict";var n=t("d3"),i=t("fast-isnumeric"),o=[];e.exports=function(t,e){if(-1===o.indexOf(t)){o.push(t);var r=1e3;i(e)?r=e:"long"===e&&(r=3e3);var a=n.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",!0),a.selectAll(".notifier-note").data(o).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(t){var i=n.select(this);i.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){i.transition().call(s)});for(var o=i.append("p"),a=t.split(/<br\s*\/?>/g),l=0;l<a.length;l++)l&&o.append("br"),o.append("span").text(a[l]);"stick"===e?i.transition().duration(350).style("opacity",1):i.transition().duration(700).style("opacity",1).transition().delay(r).call(s)})}function s(t){t.duration(700).style("opacity",0).each("end",function(t){var e=o.indexOf(t);-1!==e&&o.splice(e,1),n.select(this).remove()})}}},{d3:74,"fast-isnumeric":145}],437:[function(t,e,r){"use strict";var n=t("./setcursor"),i="data-savedcursor";e.exports=function(t,e){var r=t.attr(i);if(e){if(!r){for(var o=(t.attr("class")||"").split(" "),a=0;a<o.length;a++){var s=o[a];0===s.indexOf("cursor-")&&t.attr(i,s.substr(7)).classed(s,!1)}t.attr(i)||t.attr(i,"!!")}n(t,e)}else r&&(t.attr(i,null),"!!"===r?n(t):n(t,r))}},{"./setcursor":446}],438:[function(t,e,r){"use strict";var n=t("./matrix").dot,i=t("../constants/numerical").BADNUM,o=e.exports={};o.tester=function(t){var e,r=t.slice(),n=r[0][0],o=n,a=r[0][1],s=a;for(r.push(r[0]),e=1;e<r.length;e++)n=Math.min(n,r[e][0]),o=Math.max(o,r[e][0]),a=Math.min(a,r[e][1]),s=Math.max(s,r[e][1]);var l,g=!1;5===r.length&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(g=!0,l=function(t){return t[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(g=!0,l=function(t){return t[1]===r[0][1]}));var c=!0,u=r[0];for(e=1;e<r.length;e++)if(u[0]!==r[e][0]||u[1]!==r[e][1]){c=!1;break}return{xmin:n,xmax:o,ymin:a,ymax:s,pts:r,contains:g?function(t,e){var r=t[0],g=t[1];return!(r===i||r<n||r>o||g===i||g<a||g>s||e&&l(t))}:function(t,e){var l=t[0],g=t[1];if(l===i||l<n||l>o||g===i||g<a||g>s)return!1;var c,u,h,d,A,f=r.length,C=r[0][0],p=r[0][1],I=0;for(c=1;c<f;c++)if(u=C,h=p,C=r[c][0],p=r[c][1],!(l<(d=Math.min(u,C))||l>Math.max(u,C)||g>Math.max(h,p)))if(g<Math.min(h,p))l!==d&&I++;else{if(g===(A=C===u?g:h+(l-u)*(p-h)/(C-u)))return 1!==c||!e;g<=A&&l!==d&&I++}return I%2==1},isRect:g,degenerate:c}},o.isSegmentBent=function(t,e,r,i){var o,a,s,l=t[e],g=[t[r][0]-l[0],t[r][1]-l[1]],c=n(g,g),u=Math.sqrt(c),h=[-g[1]/u,g[0]/u];for(o=e+1;o<r;o++)if(a=[t[o][0]-l[0],t[o][1]-l[1]],(s=n(a,g))<0||s>c||Math.abs(n(a,h))>i)return!0;return!1},o.filter=function(t,e){var r=[t[0]],n=0,i=0;function a(a){t.push(a);var s=r.length,l=n;r.splice(i+1);for(var g=l+1;g<t.length;g++)(g===t.length-1||o.isSegmentBent(t,l,g+1,e))&&(r.push(t[g]),r.length<s-2&&(n=g,i=r.length-1),l=g)}t.length>1&&a(t.pop());return{addPt:a,raw:t,filtered:r}}},{"../constants/numerical":404,"./matrix":432}],439:[function(t,e,r){(function(r){"use strict";var n=t("./show_no_webgl_msg"),i=t("regl");e.exports=function(t,e){var o=t._fullLayout,a=!0;return o._glcanvas.each(function(n){if(!n.regl&&(!n.pick||o._has("parcoords"))){try{n.regl=i({canvas:this,attributes:{antialias:!n.pick,preserveDrawingBuffer:!0},pixelRatio:t._context.plotGlPixelRatio||r.devicePixelRatio,extensions:e||[]})}catch(t){a=!1}a&&this.addEventListener("webglcontextlost",function(e){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:e,layer:n.key})},!1)}}),a||n({container:o._glcontainer.node()}),a}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./show_no_webgl_msg":447,regl:661}],440:[function(t,e,r){"use strict";e.exports=function(t,e){if(e instanceof RegExp){for(var r=e.toString(),n=0;n<t.length;n++)if(t[n]instanceof RegExp&&t[n].toString()===r)return t;t.push(e)}else!e&&0!==e||-1!==t.indexOf(e)||t.push(e);return t}},{}],441:[function(t,e,r){"use strict";var n=t("../lib"),i=t("../plot_api/plot_config").dfltConfig;var o={add:function(t,e,r,n,o){var a,s;t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},s=t.undoQueue.index,t.autoplay?t.undoQueue.inSequence||(t.autoplay=!1):(!t.undoQueue.sequence||t.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(s,t.undoQueue.queue.length-s,a),t.undoQueue.index+=1):a=t.undoQueue.queue[s-1],t.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(e),a.undo.args.unshift(r),a.redo.calls.push(n),a.redo.args.push(o)),t.undoQueue.queue.length>i.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--))},startSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},stopSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},undo:function(t){var e,r;if(t.framework&&t.framework.isPolar)t.framework.undo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,r=0;r<e.undo.calls.length;r++)o.plotDo(t,e.undo.calls[r],e.undo.args[r]);t.undoQueue.inSequence=!1,t.autoplay=!1}},redo:function(t){var e,r;if(t.framework&&t.framework.isPolar)t.framework.redo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,r=0;r<e.redo.calls.length;r++)o.plotDo(t,e.redo.calls[r],e.redo.args[r]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}}};o.plotDo=function(t,e,r){t.autoplay=!0,r=function(t,e){for(var r,i=[],o=0;o<e.length;o++)r=e[o],i[o]=r===t?r:"object"==typeof r?Array.isArray(r)?n.extendDeep([],r):n.extendDeepAll({},r):r;return i}(t,r),e.apply(null,r)},e.exports=o},{"../lib":426,"../plot_api/plot_config":461}],442:[function(t,e,r){"use strict";r.counter=function(t,e,r,n){var i=(e||"")+(r?"":"$"),o=!1===n?"":"^";return"xy"===t?new RegExp(o+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+i):new RegExp(o+t+"([2-9]|[1-9][0-9]+)?"+i)}},{}],443:[function(t,e,r){"use strict";var n=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,i=/^[^\.\[\]]+$/;e.exports=function(t,e){for(;e;){var r=t.match(n);if(r)t=r[1];else{if(!t.match(i))throw new Error("bad relativeAttr call:"+[t,e]);t=""}if("^"!==e.charAt(0))break;e=e.slice(1)}return t&&"["!==e.charAt(0)?t+"."+e:t+e}},{}],444:[function(t,e,r){"use strict";var n=t("./array").isArrayOrTypedArray,i=t("./is_plain_object");e.exports=function t(e,r){for(var o in r){var a=r[o],s=e[o];if(s!==a)if("_"===o.charAt(0)||"function"==typeof a){if(o in e)continue;e[o]=a}else if(n(a)&&n(s)&&i(a[0])){if("customdata"===o||"ids"===o)continue;for(var l=Math.min(a.length,s.length),g=0;g<l;g++)s[g]!==a[g]&&i(a[g])&&i(s[g])&&t(s[g],a[g])}else i(a)&&i(s)&&(t(s,a),Object.keys(s).length||delete e[o])}}},{"./array":411,"./is_plain_object":427}],445:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("./loggers"),o=t("./identity");function a(t,e){return t<e}function s(t,e){return t<=e}function l(t,e){return t>e}function g(t,e){return t>=e}r.findBin=function(t,e,r){if(n(e.start))return r?Math.ceil((t-e.start)/e.size-1e-9)-1:Math.floor((t-e.start)/e.size+1e-9);var o,c,u=0,h=e.length,d=0,A=h>1?(e[h-1]-e[0])/(h-1):1;for(c=A>=0?r?a:s:r?g:l,t+=1e-9*A*(r?-1:1)*(A>=0?1:-1);u<h&&d++<100;)c(e[o=Math.floor((u+h)/2)],t)?u=o+1:h=o;return d>90&&i.log("Long binary search..."),u-1},r.sorterAsc=function(t,e){return t-e},r.sorterDes=function(t,e){return e-t},r.distinctVals=function(t){var e=t.slice();e.sort(r.sorterAsc);for(var n=e.length-1,i=e[n]-e[0]||1,o=i/(n||1)/1e4,a=[e[0]],s=0;s<n;s++)e[s+1]>e[s]+o&&(i=Math.min(i,e[s+1]-e[s]),a.push(e[s+1]));return{vals:a,minDiff:i}},r.roundUp=function(t,e,r){for(var n,i=0,o=e.length-1,a=0,s=r?0:1,l=r?1:0,g=r?Math.ceil:Math.floor;i<o&&a++<100;)e[n=g((i+o)/2)]<=t?i=n+s:o=n-l;return e[i]},r.sort=function(t,e){for(var r=0,n=0,i=1;i<t.length;i++){var o=e(t[i],t[i-1]);if(o<0?r=1:o>0&&(n=1),r&&n)return t.sort(e)}return n?t:t.reverse()},r.findIndexOfMin=function(t,e){e=e||o;for(var r,n=1/0,i=0;i<t.length;i++){var a=e(t[i]);a<n&&(n=a,r=i)}return r}},{"./identity":425,"./loggers":430,"fast-isnumeric":145}],446:[function(t,e,r){"use strict";e.exports=function(t,e){(t.attr("class")||"").split(" ").forEach(function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)}),e&&t.classed("cursor-"+e,!0)}},{}],447:[function(t,e,r){"use strict";var n=t("../components/color"),i=function(){};e.exports=function(t){for(var e in t)"function"==typeof t[e]&&(t[e]=i);t.destroy=function(){t.container.parentNode.removeChild(t.container)};var r=document.createElement("div");r.className="no-webgl",r.style.cursor="pointer",r.style.fontSize="24px",r.style.color=n.defaults[0],r.style.position="absolute",r.style.left=r.style.top="0px",r.style.width=r.style.height="100%",r.style["background-color"]=n.lightLine,r.style["z-index"]=30;var o=document.createElement("p");return o.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",o.style.position="relative",o.style.top="50%",o.style.left="50%",o.style.height="30%",o.style.width="50%",o.style.margin="-15% 0 0 -25%",r.appendChild(o),t.container.appendChild(r),t.container.style.background="#FFFFFF",t.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":304}],448:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("./array").isArrayOrTypedArray;r.aggNums=function(t,e,o,a){var s,l;if((!a||a>o.length)&&(a=o.length),n(e)||(e=!1),i(o[0])){for(l=new Array(a),s=0;s<a;s++)l[s]=r.aggNums(t,e,o[s]);o=l}for(s=0;s<a;s++)n(e)?n(o[s])&&(e=t(+e,+o[s])):e=o[s];return e},r.len=function(t){return r.aggNums(function(t){return t+1},0,t)},r.mean=function(t,e){return e||(e=r.len(t)),r.aggNums(function(t,e){return t+e},0,t)/e},r.midRange=function(t){if(void 0!==t&&0!==t.length)return(r.aggNums(Math.max,null,t)+r.aggNums(Math.min,null,t))/2},r.variance=function(t,e,i){return e||(e=r.len(t)),n(i)||(i=r.mean(t,e)),r.aggNums(function(t,e){return t+Math.pow(e-i,2)},0,t)/e},r.stdev=function(t,e,n){return Math.sqrt(r.variance(t,e,n))},r.median=function(t){var e=t.slice().sort();return r.interp(e,.5)},r.interp=function(t,e){if(!n(e))throw"n should be a finite number";if((e=e*t.length-.5)<0)return t[0];if(e>t.length-1)return t[t.length-1];var r=e%1;return r*t[Math.ceil(e)]+(1-r)*t[Math.floor(e)]}},{"./array":411,"fast-isnumeric":145}],449:[function(t,e,r){"use strict";var n=t("color-normalize");e.exports=function(t){return t?n(t):[0,0,0,1]}},{"color-normalize":55}],450:[function(t,e,r){"use strict";var n=t("d3"),i=t("../lib"),o=t("../constants/xmlns_namespaces"),a=t("../constants/alignment").LINE_SPACING;function s(t,e){return t.node().getBoundingClientRect()[e]}var l=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;r.convertToTspans=function(t,e,k){var T=t.text(),E=!t.attr("data-notex")&&"undefined"!=typeof MathJax&&T.match(l),O=n.select(t.node().parentNode);if(!O.empty()){var S=t.attr("class")?t.attr("class").split(" ")[0]:"text";return S+="-math",O.selectAll("svg."+S).remove(),O.selectAll("g."+S+"-group").remove(),t.style("display",null).attr({"data-unformatted":T,"data-math":"N"}),E?(e&&e._promises||[]).push(new Promise(function(e){t.style("display","none");var r=parseInt(t.node().style.fontSize,10),o={fontSize:r};!function(t,e,r){var o,a,s,l;MathJax.Hub.Queue(function(){return a=i.extendDeepAll({},MathJax.Hub.config),s=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(o=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var r="math-output-"+i.randstr({},64);return l=n.select("body").append("div").attr({id:r}).style({visibility:"hidden",position:"absolute"}).style({"font-size":e.fontSize+"px"}).text(t.replace(g,"\\lt ").replace(c,"\\gt ")),MathJax.Hub.Typeset(l.node())},function(){var e=n.select("body").select("#MathJax_SVG_glyphs");if(l.select(".MathJax_SVG").empty()||!l.select("svg").node())i.log("There was an error in the tex syntax.",t),r();else{var a=l.select("svg").node().getBoundingClientRect();r(l.select(".MathJax_SVG"),e,a)}if(l.remove(),"SVG"!==o)return MathJax.Hub.setRenderer(o)},function(){return void 0!==s&&(MathJax.Hub.processSectionDelay=s),MathJax.Hub.Config(a)})}(E[2],o,function(n,i,o){O.selectAll("svg."+S).remove(),O.selectAll("g."+S+"-group").remove();var a=n&&n.select("svg");if(!a||!a.node())return R(),void e();var l=O.append("g").classed(S+"-group",!0).attr({"pointer-events":"none","data-unformatted":T,"data-math":"Y"});l.node().appendChild(a.node()),i&&i.node()&&a.node().insertBefore(i.node().cloneNode(!0),a.node().firstChild),a.attr({class:S,height:o.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var g=t.node().style.fill||"black",c=a.select("g");c.attr({fill:g,stroke:g});var u=s(c,"width"),h=s(c,"height"),d=+t.attr("x")-u*{start:0,middle:.5,end:1}[t.attr("text-anchor")||"start"],A=-(r||s(t,"height"))/4;"y"===S[0]?(l.attr({transform:"rotate("+[-90,+t.attr("x"),+t.attr("y")]+") translate("+[-u/2,A-h/2]+")"}),a.attr({x:+t.attr("x"),y:+t.attr("y")})):"l"===S[0]?a.attr({x:t.attr("x"),y:A-h/2}):"a"===S[0]&&0!==S.indexOf("atitle")?a.attr({x:0,y:A}):a.attr({x:d,y:+t.attr("y")+A-h/2}),k&&k.call(t,l),e(l)})})):R(),t}function R(){O.empty()||(S=t.attr("class")+"-math",O.select("svg."+S).remove()),t.text("").style("white-space","pre"),function(t,e){e=e.replace(C," ");var r,s=!1,l=[],g=-1;function c(){g++;var e=document.createElementNS(o.svg,"tspan");n.select(e).attr({class:"line",dy:g*a+"em"}),t.appendChild(e),r=e;var i=l;if(l=[{node:e}],i.length>1)for(var s=1;s<i.length;s++)k(i[s])}function k(t){var e,i=t.type,a={};if("a"===i){e="a";var s=t.target,g=t.href,c=t.popup;g&&(a={"xlink:xlink:show":"_blank"===s||"_"!==s.charAt(0)?"new":"replace",target:s,"xlink:xlink:href":g},c&&(a.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+c+'");return false;'))}else e="tspan";t.style&&(a.style=t.style);var u=document.createElementNS(o.svg,e);if("sup"===i||"sub"===i){T(r,A),r.appendChild(u);var f=document.createElementNS(o.svg,"tspan");T(f,A),n.select(f).attr("dy",d[i]),a.dy=h[i],r.appendChild(u),r.appendChild(f)}else r.appendChild(u);n.select(u).attr(a),r=t.node=u,l.push(t)}function T(t,e){t.appendChild(document.createTextNode(e))}function E(t){if(1!==l.length){var n=l.pop();t!==n.type&&i.log("Start tag <"+n.type+"> doesnt match end tag <"+t+">. Pretending it did match.",e),r=l[l.length-1].node}else i.log("Ignoring unexpected end tag </"+t+">.",e)}v.test(e)?c():(r=t,l=[{node:t}]);for(var O=e.split(p),S=0;S<O.length;S++){var R=O[S],D=R.match(I),L=D&&D[2].toLowerCase(),P=u[L];if("br"===L)c();else if(void 0===P)T(r,M(R));else if(D[1])E(L);else{var N=D[4],z={type:L},F=_(N,m);if(F?(F=F.replace(w,"$1 fill:"),P&&(F+=";"+P)):P&&(F=P),F&&(z.style=F),"a"===L){s=!0;var B=_(N,y);if(B){var j=document.createElement("a");j.href=B,-1!==f.indexOf(j.protocol)&&(z.href=encodeURI(decodeURI(B)),z.target=_(N,b)||"_blank",z.popup=_(N,x))}}k(z)}}return s}(t.node(),T)&&t.style("pointer-events","all"),r.positionText(t),k&&k.call(t)}};var g=/(<|&lt;|&#60;)/g,c=/(>|&gt;|&#62;)/g;var u={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},h={sub:"0.3em",sup:"-0.6em"},d={sub:"-0.21em",sup:"0.42em"},A="​",f=["http:","https:","mailto:","",void 0,":"],C=r.NEWLINES=/(\r\n?|\n)/g,p=/(<[^<>]*>)/,I=/<(\/?)([^ >]*)(\s+(.*))?>/i,v=/<br(\s+.*)?>/i;r.BR_TAG_ALL=/<br(\s+.*)?>/gi;var m=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,y=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,b=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,x=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function _(t,e){if(!t)return null;var r=t.match(e),n=r&&(r[3]||r[4]);return n&&M(n)}var w=/(^|;)\s*color:/;r.plainText=function(t,e){for(var r=void 0!==(e=e||{}).len&&-1!==e.len?e.len:1/0,n=void 0!==e.allowedTags?e.allowedTags:["br"],i="...".length,o=t.split(p),a=[],s="",l=0,g=0;g<o.length;g++){var c=o[g],u=c.match(I),h=u&&u[2].toLowerCase();if(h)-1!==n.indexOf(h)&&(a.push(c),s=h);else{var d=c.length;if(l+d<r)a.push(c),l+=d;else if(l<r){var A=r-l;s&&("br"!==s||A<=i||d<=i)&&a.pop(),r>i?a.push(c.substr(0,A-i)+"..."):a.push(c.substr(0,A));break}s=""}}return a.join("")};var k={mu:"μ",amp:"&",lt:"<",gt:">",nbsp:" ",times:"×",plusmn:"±",deg:"°"},T=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function M(t){return t.replace(T,function(t,e){return("#"===e.charAt(0)?function(t){if(t>1114111)return;var e=String.fromCodePoint;if(e)return e(t);var r=String.fromCharCode;return t<=65535?r(t):r(55232+(t>>10),t%1024+56320)}("x"===e.charAt(1)?parseInt(e.substr(2),16):parseInt(e.substr(1),10)):k[e])||t})}function E(t,e,r){var n,i,o,a=r.horizontalAlign,s=r.verticalAlign||"top",l=t.node().getBoundingClientRect(),g=e.node().getBoundingClientRect();return i="bottom"===s?function(){return l.bottom-n.height}:"middle"===s?function(){return l.top+(l.height-n.height)/2}:function(){return l.top},o="right"===a?function(){return l.right-n.width}:"center"===a?function(){return l.left+(l.width-n.width)/2}:function(){return l.left},function(){return n=this.node().getBoundingClientRect(),this.style({top:i()-g.top+"px",left:o()-g.left+"px","z-index":1e3}),this}}r.convertEntities=M,r.lineCount=function(t){return t.selectAll("tspan.line").size()||1},r.positionText=function(t,e,r){return t.each(function(){var t=n.select(this);function i(e,r){return void 0===r?null===(r=t.attr(e))&&(t.attr(e,0),r=0):t.attr(e,r),r}var o=i("x",e),a=i("y",r);"text"===this.nodeName&&t.selectAll("tspan.line").attr({x:o,y:a})})},r.makeEditable=function(t,e){var r=e.gd,i=e.delegate,o=n.dispatch("edit","input","cancel"),a=i||t;if(t.style({"pointer-events":i?"none":"all"}),1!==t.size())throw new Error("boo");function s(){!function(){var i=n.select(r).select(".svg-container"),a=i.append("div"),s=t.node().style,g=parseFloat(s.fontSize||12),c=e.text;void 0===c&&(c=t.attr("data-unformatted"));a.classed("plugin-editable editable",!0).style({position:"absolute","font-family":s.fontFamily||"Arial","font-size":g,color:e.fill||s.fill||"black",opacity:1,"background-color":e.background||"transparent",outline:"#ffffff33 1px solid",margin:[-g/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(c).call(E(t,i,e)).on("blur",function(){r._editing=!1,t.text(this.textContent).style({opacity:1});var e,i=n.select(this).attr("class");(e=i?"."+i.split(" ")[0]+"-math-group":"[class*=-math-group]")&&n.select(t.node().parentNode).select(e).style({opacity:0});var a=this.textContent;n.select(this).transition().duration(0).remove(),n.select(document).on("mouseup",null),o.edit.call(t,a)}).on("focus",function(){var t=this;r._editing=!0,n.select(document).on("mouseup",function(){if(n.event.target===t)return!1;document.activeElement===a.node()&&a.node().blur()})}).on("keyup",function(){27===n.event.which?(r._editing=!1,t.style({opacity:1}),n.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),o.cancel.call(t,this.textContent)):(o.input.call(t,this.textContent),n.select(this).call(E(t,i,e)))}).on("keydown",function(){13===n.event.which&&this.blur()}).call(l)}(),t.style({opacity:0});var i,s=a.attr("class");(i=s?"."+s.split(" ")[0]+"-math-group":"[class*=-math-group]")&&n.select(t.node().parentNode).select(i).style({opacity:0})}function l(t){var e=t.node(),r=document.createRange();r.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(r),e.focus()}return e.immediate?s():a.on("click",s),n.rebind(t,o,"on")}},{"../constants/alignment":399,"../constants/xmlns_namespaces":405,"../lib":426,d3:74}],451:[function(t,e,r){"use strict";var n={};function i(t){t&&null!==t.timer&&(clearTimeout(t.timer),t.timer=null)}r.throttle=function(t,e,r){var o=n[t],a=Date.now();if(!o){for(var s in n)n[s].ts<a-6e4&&delete n[s];o=n[t]={ts:0,timer:null}}function l(){r(),o.ts=Date.now(),o.onDone&&(o.onDone(),o.onDone=null)}i(o),a>o.ts+e?l():o.timer=setTimeout(function(){l(),o.timer=null},e)},r.done=function(t){var e=n[t];return e&&e.timer?new Promise(function(t){var r=e.onDone;e.onDone=function(){r&&r(),t(),e.onDone=null}}):Promise.resolve()},r.clear=function(t){if(t)i(n[t]),delete n[t];else for(var e in n)r.clear(e)}},{}],452:[function(t,e,r){"use strict";var n=t("fast-isnumeric");e.exports=function(t,e){if(t>0)return Math.log(t)/Math.LN10;var r=Math.log(Math.min(e[0],e[1]))/Math.LN10;return n(r)||(r=Math.log(Math.max(e[0],e[1]))/Math.LN10-6),r}},{"fast-isnumeric":145}],453:[function(t,e,r){"use strict";e.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],454:[function(t,e,r){"use strict";e.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],455:[function(t,e,r){"use strict";var n=t("../registry");e.exports=function(t){for(var e,r,i=n.layoutArrayContainers,o=n.layoutArrayRegexes,a=t.split("[")[0],s=0;s<o.length;s++)if((r=t.match(o[s]))&&0===r.index){e=r[0];break}if(e||(e=i[i.indexOf(a)]),!e)return!1;var l=t.substr(e.length);return l?!!(r=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:e,index:Number(r[1]),property:r[3]||""}:{array:e,index:"",property:""}}},{"../registry":524}],456:[function(t,e,r){"use strict";var n=t("../lib"),i=n.extendFlat,o=n.isPlainObject,a={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},s={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},l=a.flags.slice().concat(["fullReplot"]),g=s.flags.slice().concat("layoutReplot");function c(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=!1;return e}function u(t,e,r){var n=i({},t);for(var a in n){var s=n[a];o(s)&&(n[a]=h(s,e,r,a))}return"from-root"===r&&(n.editType=e),n}function h(t,e,r,n){if(t.valType){var o=i({},t);if(o.editType=e,Array.isArray(t.items)){o.items=new Array(t.items.length);for(var a=0;a<t.items.length;a++)o.items[a]=h(t.items[a],e,"from-root")}return o}return u(t,e,"_"===n.charAt(0)?"nested":"from-root")}e.exports={traces:a,layout:s,traceFlags:function(){return c(l)},layoutFlags:function(){return c(g)},update:function(t,e){var r=e.editType;if(r&&"none"!==r)for(var n=r.split("+"),i=0;i<n.length;i++)t[n[i]]=!0},overrideAll:u}},{"../lib":426}],457:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("gl-mat4/fromQuat"),o=t("../registry"),a=t("../lib"),s=t("../plots/plots"),l=t("../plots/cartesian/axis_ids"),g=t("../components/color"),c=l.cleanId,u=l.getFromTrace,h=o.traceIs;function d(t,e){var r=t[e],n=e.charAt(0);r&&"paper"!==r&&(t[e]=c(r,n))}function A(t){function e(e,r){var n=t[e],i=t.title&&t.title[r];n&&!i&&(t.title||(t.title={}),t.title[r]=t[e],delete t[e])}t&&("string"!=typeof t.title&&"number"!=typeof t.title||(t.title={text:t.title}),e("titlefont","font"),e("titleposition","position"),e("titleside","side"),e("titleoffset","offset"))}function f(t){if(!a.isPlainObject(t))return!1;var e=t.name;return delete t.name,delete t.showlegend,("string"==typeof e||"number"==typeof e)&&String(e)}function C(t,e,r,n){if(r&&!n)return t;if(n&&!r)return e;if(!t.trim())return e;if(!e.trim())return t;var i,o=Math.min(t.length,e.length);for(i=0;i<o&&t.charAt(i)===e.charAt(i);i++);return t.substr(0,i).trim()}function p(t){var e="middle",r="center";return"string"==typeof t&&(-1!==t.indexOf("top")?e="top":-1!==t.indexOf("bottom")&&(e="bottom"),-1!==t.indexOf("left")?r="left":-1!==t.indexOf("right")&&(r="right")),e+" "+r}function I(t,e){return e in t&&"object"==typeof t[e]&&0===Object.keys(t[e]).length}r.clearPromiseQueue=function(t){Array.isArray(t._promises)&&t._promises.length>0&&a.log("Clearing previous rejected promises from queue."),t._promises=[]},r.cleanLayout=function(t){var e,n;t||(t={}),t.xaxis1&&(t.xaxis||(t.xaxis=t.xaxis1),delete t.xaxis1),t.yaxis1&&(t.yaxis||(t.yaxis=t.yaxis1),delete t.yaxis1),t.scene1&&(t.scene||(t.scene=t.scene1),delete t.scene1);var o=(s.subplotsRegistry.cartesian||{}).attrRegex,l=(s.subplotsRegistry.polar||{}).attrRegex,u=(s.subplotsRegistry.ternary||{}).attrRegex,h=(s.subplotsRegistry.gl3d||{}).attrRegex,f=Object.keys(t);for(e=0;e<f.length;e++){var C=f[e];if(o&&o.test(C)){var p=t[C];p.anchor&&"free"!==p.anchor&&(p.anchor=c(p.anchor)),p.overlaying&&(p.overlaying=c(p.overlaying)),p.type||(p.isdate?p.type="date":p.islog?p.type="log":!1===p.isdate&&!1===p.islog&&(p.type="linear")),"withzero"!==p.autorange&&"tozero"!==p.autorange||(p.autorange=!0,p.rangemode="tozero"),delete p.islog,delete p.isdate,delete p.categories,I(p,"domain")&&delete p.domain,void 0!==p.autotick&&(void 0===p.tickmode&&(p.tickmode=p.autotick?"auto":"linear"),delete p.autotick),A(p)}else if(l&&l.test(C)){A(t[C].radialaxis)}else if(u&&u.test(C)){var v=t[C];A(v.aaxis),A(v.baxis),A(v.caxis)}else if(h&&h.test(C)){var m=t[C],y=m.cameraposition;if(Array.isArray(y)&&4===y[0].length){var b=y[0],x=y[1],_=y[2],w=i([],b),k=[];for(n=0;n<3;++n)k[n]=x[n]+_*w[2+4*n];m.camera={eye:{x:k[0],y:k[1],z:k[2]},center:{x:x[0],y:x[1],z:x[2]},up:{x:0,y:0,z:1}},delete m.cameraposition}A(m.xaxis),A(m.yaxis),A(m.zaxis)}}var T=Array.isArray(t.annotations)?t.annotations.length:0;for(e=0;e<T;e++){var M=t.annotations[e];a.isPlainObject(M)&&(M.ref&&("paper"===M.ref?(M.xref="paper",M.yref="paper"):"data"===M.ref&&(M.xref="x",M.yref="y"),delete M.ref),d(M,"xref"),d(M,"yref"))}var E=Array.isArray(t.shapes)?t.shapes.length:0;for(e=0;e<E;e++){var O=t.shapes[e];a.isPlainObject(O)&&(d(O,"xref"),d(O,"yref"))}var S=t.legend;return S&&(S.x>3?(S.x=1.02,S.xanchor="left"):S.x<-2&&(S.x=-.02,S.xanchor="right"),S.y>3?(S.y=1.02,S.yanchor="bottom"):S.y<-2&&(S.y=-.02,S.yanchor="top")),A(t),"rotate"===t.dragmode&&(t.dragmode="orbit"),g.clean(t),t.template&&t.template.layout&&r.cleanLayout(t.template.layout),t},r.cleanData=function(t){for(var e=0;e<t.length;e++){var n,i=t[e];if("histogramy"===i.type&&"xbins"in i&&!("ybins"in i)&&(i.ybins=i.xbins,delete i.xbins),i.error_y&&"opacity"in i.error_y){var l=g.defaults,u=i.error_y.color||(h(i,"bar")?g.defaultLine:l[e%l.length]);i.error_y.color=g.addOpacity(g.rgb(u),g.opacity(u)*i.error_y.opacity),delete i.error_y.opacity}if("bardir"in i&&("h"!==i.bardir||!h(i,"bar")&&"histogram"!==i.type.substr(0,9)||(i.orientation="h",r.swapXYData(i)),delete i.bardir),"histogramy"===i.type&&r.swapXYData(i),"histogramx"!==i.type&&"histogramy"!==i.type||(i.type="histogram"),"scl"in i&&!("colorscale"in i)&&(i.colorscale=i.scl,delete i.scl),"reversescl"in i&&!("reversescale"in i)&&(i.reversescale=i.reversescl,delete i.reversescl),i.xaxis&&(i.xaxis=c(i.xaxis,"x")),i.yaxis&&(i.yaxis=c(i.yaxis,"y")),h(i,"gl3d")&&i.scene&&(i.scene=s.subplotsRegistry.gl3d.cleanId(i.scene)),!h(i,"pie-like")&&!h(i,"bar-like"))if(Array.isArray(i.textposition))for(n=0;n<i.textposition.length;n++)i.textposition[n]=p(i.textposition[n]);else i.textposition&&(i.textposition=p(i.textposition));var d=o.getModule(i);if(d&&d.colorbar){var v=d.colorbar.container,m=v?i[v]:i;m&&m.colorscale&&("YIGnBu"===m.colorscale&&(m.colorscale="YlGnBu"),"YIOrRd"===m.colorscale&&(m.colorscale="YlOrRd"))}if("surface"===i.type&&a.isPlainObject(i.contours)){var y=["x","y","z"];for(n=0;n<y.length;n++){var b=i.contours[y[n]];a.isPlainObject(b)&&(b.highlightColor&&(b.highlightcolor=b.highlightColor,delete b.highlightColor),b.highlightWidth&&(b.highlightwidth=b.highlightWidth,delete b.highlightWidth))}}if("candlestick"===i.type||"ohlc"===i.type){var x=!1!==(i.increasing||{}).showlegend,_=!1!==(i.decreasing||{}).showlegend,w=f(i.increasing),k=f(i.decreasing);if(!1!==w&&!1!==k){var T=C(w,k,x,_);T&&(i.name=T)}else!w&&!k||i.name||(i.name=w||k)}if(Array.isArray(i.transforms)){var M=i.transforms;for(n=0;n<M.length;n++){var E=M[n];if(a.isPlainObject(E))switch(E.type){case"filter":E.filtersrc&&(E.target=E.filtersrc,delete E.filtersrc),E.calendar&&(E.valuecalendar||(E.valuecalendar=E.calendar),delete E.calendar);break;case"groupby":if(E.styles=E.styles||E.style,E.styles&&!Array.isArray(E.styles)){var O=E.styles,S=Object.keys(O);E.styles=[];for(var R=0;R<S.length;R++)E.styles.push({target:S[R],value:O[S[R]]})}}}}I(i,"line")&&delete i.line,"marker"in i&&(I(i.marker,"line")&&delete i.marker.line,I(i,"marker")&&delete i.marker),g.clean(i),i.autobinx&&(delete i.autobinx,delete i.xbins),i.autobiny&&(delete i.autobiny,delete i.ybins),A(i),i.colorbar&&A(i.colorbar),i.marker&&i.marker.colorbar&&A(i.marker.colorbar),i.line&&i.line.colorbar&&A(i.line.colorbar),i.aaxis&&A(i.aaxis),i.baxis&&A(i.baxis)}},r.swapXYData=function(t){var e;if(a.swapAttrs(t,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(t.z)&&Array.isArray(t.z[0])&&(t.transpose?delete t.transpose:t.transpose=!0),t.error_x&&t.error_y){var r=t.error_y,n="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);a.swapAttrs(t,["error_?.copy_ystyle"]),n&&a.swapAttrs(t,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof t.hoverinfo){var i=t.hoverinfo.split("+");for(e=0;e<i.length;e++)"x"===i[e]?i[e]="y":"y"===i[e]&&(i[e]="x");t.hoverinfo=i.join("+")}},r.coerceTraceIndices=function(t,e){if(n(e))return[e];if(!Array.isArray(e)||!e.length)return t.data.map(function(t,e){return e});if(Array.isArray(e)){for(var r=[],i=0;i<e.length;i++)a.isIndex(e[i],t.data.length)?r.push(e[i]):a.warn("trace index (",e[i],") is not a number or is out of bounds");return r}return e},r.manageArrayContainers=function(t,e,r){var i=t.obj,o=t.parts,s=o.length,l=o[s-1],g=n(l);if(g&&null===e){var c=o.slice(0,s-1).join(".");a.nestedProperty(i,c).get().splice(l,1)}else g&&void 0===t.get()?(void 0===t.get()&&(r[t.astr]=null),t.set(e)):t.set(e)};var v=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function m(t){var e=t.search(v);if(e>0)return t.substr(0,e)}r.hasParent=function(t,e){for(var r=m(e);r;){if(r in t)return!0;r=m(r)}return!1};var y=["x","y","z"];r.clearAxisTypes=function(t,e,r){for(var n=0;n<e.length;n++)for(var i=t._fullData[n],o=0;o<3;o++){var s=u(t,i,y[o]);if(s&&"log"!==s.type){var l=s._name,g=s._id.substr(1);if("scene"===g.substr(0,5)){if(void 0!==r[g])continue;l=g+"."+l}var c=l+".type";void 0===r[l]&&void 0===r[c]&&a.nestedProperty(t.layout,c).set(null)}}}},{"../components/color":304,"../lib":426,"../plots/cartesian/axis_ids":476,"../plots/plots":515,"../registry":524,"fast-isnumeric":145,"gl-mat4/fromQuat":173}],458:[function(t,e,r){"use strict";var n=t("./plot_api");r.plot=n.plot,r.newPlot=n.newPlot,r.restyle=n.restyle,r.relayout=n.relayout,r.redraw=n.redraw,r.update=n.update,r._guiRestyle=n._guiRestyle,r._guiRelayout=n._guiRelayout,r._guiUpdate=n._guiUpdate,r._storeDirectGUIEdit=n._storeDirectGUIEdit,r.react=n.react,r.extendTraces=n.extendTraces,r.prependTraces=n.prependTraces,r.addTraces=n.addTraces,r.deleteTraces=n.deleteTraces,r.moveTraces=n.moveTraces,r.purge=n.purge,r.addFrames=n.addFrames,r.deleteFrames=n.deleteFrames,r.animate=n.animate,r.setPlotConfig=n.setPlotConfig,r.toImage=t("./to_image"),r.validate=t("./validate"),r.downloadImage=t("../snapshot/download");var i=t("./template_api");r.makeTemplate=i.makeTemplate,r.validateTemplate=i.validateTemplate},{"../snapshot/download":526,"./plot_api":460,"./template_api":465,"./to_image":466,"./validate":467}],459:[function(t,e,r){"use strict";var n=t("../lib/is_plain_object"),i=t("../lib/noop"),o=t("../lib/loggers"),a=t("../lib/search").sorterAsc,s=t("../registry");r.containerArrayMatch=t("./container_array_match");var l=r.isAddVal=function(t){return"add"===t||n(t)},g=r.isRemoveVal=function(t){return null===t||"remove"===t};r.applyContainerArrayChanges=function(t,e,r,n,c){var u=e.astr,h=s.getComponentMethod(u,"supplyLayoutDefaults"),d=s.getComponentMethod(u,"draw"),A=s.getComponentMethod(u,"drawOne"),f=n.replot||n.recalc||h===i||d===i,C=t.layout,p=t._fullLayout;if(r[""]){Object.keys(r).length>1&&o.warn("Full array edits are incompatible with other edits",u);var I=r[""][""];if(g(I))e.set(null);else{if(!Array.isArray(I))return o.warn("Unrecognized full array edit value",u,I),!0;e.set(I)}return!f&&(h(C,p),d(t),!0)}var v,m,y,b,x,_,w,k,T=Object.keys(r).map(Number).sort(a),M=e.get(),E=M||[],O=c(p,u).get(),S=[],R=-1,D=E.length;for(v=0;v<T.length;v++)if(b=r[y=T[v]],x=Object.keys(b),_=b[""],w=l(_),y<0||y>E.length-(w?0:1))o.warn("index out of range",u,y);else if(void 0!==_)x.length>1&&o.warn("Insertion & removal are incompatible with edits to the same index.",u,y),g(_)?S.push(y):w?("add"===_&&(_={}),E.splice(y,0,_),O&&O.splice(y,0,{})):o.warn("Unrecognized full object edit value",u,y,_),-1===R&&(R=y);else for(m=0;m<x.length;m++)k=u+"["+y+"].",c(E[y],x[m],k).set(b[x[m]]);for(v=S.length-1;v>=0;v--)E.splice(S[v],1),O&&O.splice(S[v],1);if(E.length?M||e.set(E):e.set(null),f)return!1;if(h(C,p),A!==i){var L;if(-1===R)L=T;else{for(D=Math.max(E.length,D),L=[],v=0;v<T.length&&!((y=T[v])>=R);v++)L.push(y);for(v=R;v<D;v++)L.push(v)}for(v=0;v<L.length;v++)A(t,L[v])}else d(t);return!0}},{"../lib/is_plain_object":427,"../lib/loggers":430,"../lib/noop":435,"../lib/search":445,"../registry":524,"./container_array_match":455}],460:[function(t,e,r){"use strict";var n=t("d3"),i=t("fast-isnumeric"),o=t("has-hover"),a=t("../lib"),s=a.nestedProperty,l=t("../lib/events"),g=t("../lib/queue"),c=t("../registry"),u=t("./plot_schema"),h=t("../plots/plots"),d=t("../plots/polar/legacy"),A=t("../plots/cartesian/axes"),f=t("../components/drawing"),C=t("../components/color"),p=t("../plots/cartesian/graph_interact").initInteractions,I=t("../constants/xmlns_namespaces"),v=t("../lib/svg_text_utils"),m=t("../plots/cartesian/select").clearSelect,y=t("./plot_config").dfltConfig,b=t("./manage_arrays"),x=t("./helpers"),_=t("./subroutines"),w=t("./edit_types"),k=t("../plots/cartesian/constants").AX_NAME_PATTERN,T=0,M=5;function E(t){var e=t._fullLayout;e._redrawFromAutoMarginCount?e._redrawFromAutoMarginCount--:t.emit("plotly_afterplot")}function O(t,e){try{t._fullLayout._paper.style("background",e)}catch(t){a.error(t)}}function S(t,e){O(t,C.combine(e,"white"))}function R(t,e){if(!t._context){t._context=a.extendDeep({},y);var r=n.select("base");t._context._baseUrl=r.size()&&r.attr("href")?window.location.href.split("#")[0]:""}var i,s,l,g=t._context;if(e){for(s=Object.keys(e),i=0;i<s.length;i++)"editable"!==(l=s[i])&&"edits"!==l&&l in g&&("setBackground"===l&&"opaque"===e[l]?g[l]=S:g[l]=e[l]);e.plot3dPixelRatio&&!g.plotGlPixelRatio&&(g.plotGlPixelRatio=g.plot3dPixelRatio);var c=e.editable;if(void 0!==c)for(g.editable=c,s=Object.keys(g.edits),i=0;i<s.length;i++)g.edits[s[i]]=c;if(e.edits)for(s=Object.keys(e.edits),i=0;i<s.length;i++)(l=s[i])in g.edits&&(g.edits[l]=e.edits[l]);g._exportedPlot=e._exportedPlot}g.staticPlot&&(g.editable=!1,g.edits={},g.autosizable=!1,g.scrollZoom=!1,g.doubleClick=!1,g.showTips=!1,g.showLink=!1,g.displayModeBar=!1),"hover"!==g.displayModeBar||o||(g.displayModeBar=!0),"transparent"!==g.setBackground&&"function"==typeof g.setBackground||(g.setBackground=O),g._hasZeroHeight=g._hasZeroHeight||0===t.clientHeight,g._hasZeroWidth=g._hasZeroWidth||0===t.clientWidth;var u=g.scrollZoom,h=g._scrollZoom={};if(!0===u)h.cartesian=1,h.gl3d=1,h.geo=1,h.mapbox=1;else if("string"==typeof u){var d=u.split("+");for(i=0;i<d.length;i++)h[d[i]]=1}else!1!==u&&(h.gl3d=1,h.geo=1,h.mapbox=1)}function D(t,e){var r,n,i=e+1,o=[];for(r=0;r<t.length;r++)(n=t[r])<0?o.push(i+n):o.push(n);return o}function L(t,e,r){var n,i;for(n=0;n<e.length;n++){if((i=e[n])!==parseInt(i,10))throw new Error("all values in "+r+" must be integers");if(i>=t.data.length||i<-t.data.length)throw new Error(r+" must be valid indices for gd.data.");if(e.indexOf(i,n+1)>-1||i>=0&&e.indexOf(-t.data.length+i)>-1||i<0&&e.indexOf(t.data.length+i)>-1)throw new Error("each index in "+r+" must be unique.")}}function P(t,e,r){if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("currentIndices is a required argument.");if(Array.isArray(e)||(e=[e]),L(t,e,"currentIndices"),void 0===r||Array.isArray(r)||(r=[r]),void 0!==r&&L(t,r,"newIndices"),void 0!==r&&e.length!==r.length)throw new Error("current and new indices must be of equal length.")}function N(t,e,r,n,o){!function(t,e,r,n){var i=a.isPlainObject(n);if(!Array.isArray(t.data))throw new Error("gd.data must be an array");if(!a.isPlainObject(e))throw new Error("update must be a key:value object");if(void 0===r)throw new Error("indices must be an integer or array of integers");for(var o in L(t,r,"indices"),e){if(!Array.isArray(e[o])||e[o].length!==r.length)throw new Error("attribute "+o+" must be an array of length equal to indices array length");if(i&&(!(o in n)||!Array.isArray(n[o])||n[o].length!==e[o].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(t,e,r,n);for(var l=function(t,e,r,n){var o,l,g,c,u,h=a.isPlainObject(n),d=[];for(var A in Array.isArray(r)||(r=[r]),r=D(r,t.data.length-1),e)for(var f=0;f<r.length;f++){if(o=t.data[r[f]],l=(g=s(o,A)).get(),c=e[A][f],!a.isArrayOrTypedArray(c))throw new Error("attribute: "+A+" index: "+f+" must be an array");if(!a.isArrayOrTypedArray(l))throw new Error("cannot extend missing or non-array attribute: "+A);if(l.constructor!==c.constructor)throw new Error("cannot extend array with an array of a different type: "+A);u=h?n[A][f]:n,i(u)||(u=-1),d.push({prop:g,target:l,insert:c,maxp:Math.floor(u)})}return d}(t,e,r,n),g={},c={},u=0;u<l.length;u++){var h=l[u].prop,d=l[u].maxp,A=o(l[u].target,l[u].insert,d);h.set(A[0]),Array.isArray(g[h.astr])||(g[h.astr]=[]),g[h.astr].push(A[1]),Array.isArray(c[h.astr])||(c[h.astr]=[]),c[h.astr].push(l[u].target.length)}return{update:g,maxPoints:c}}function z(t,e){var r=new t.constructor(t.length+e.length);return r.set(t),r.set(e,t.length),r}function F(t,e,n,i){t=a.getGraphDiv(t),x.clearPromiseQueue(t);var o={};if("string"==typeof e)o[e]=n;else{if(!a.isPlainObject(e))return a.warn("Restyle fail.",e,n,i),Promise.reject();o=a.extendFlat({},e),void 0===i&&(i=n)}Object.keys(o).length&&(t.changed=!0);var s=x.coerceTraceIndices(t,i),l=G(t,o,s),c=l.flags;c.calc&&(t.calcdata=void 0),c.clearAxisTypes&&x.clearAxisTypes(t,s,{});var u=[];c.fullReplot?u.push(r.plot):(u.push(h.previousPromises),h.supplyDefaults(t),c.markerSize&&(h.doCalcdata(t),W(u)),c.style&&u.push(_.doTraceStyle),c.colorbars&&u.push(_.doColorBars),u.push(E)),u.push(h.rehover,h.redrag),g.add(t,F,[t,l.undoit,l.traces],F,[t,l.redoit,l.traces]);var d=a.syncOrAsync(u,t);return d&&d.then||(d=Promise.resolve()),d.then(function(){return t.emit("plotly_restyle",l.eventData),t})}function B(t){return void 0===t?null:t}function j(t,e){return e?function(e,r,n){var i=s(e,r),o=i.set;return i.set=function(e){V((n||"")+r,i.get(),e,t),o(e)},i}:s}function V(t,e,r,n){if(Array.isArray(e)||Array.isArray(r))for(var i=Array.isArray(e)?e:[],o=Array.isArray(r)?r:[],s=Math.max(i.length,o.length),l=0;l<s;l++)V(t+"["+l+"]",i[l],o[l],n);else if(a.isPlainObject(e)||a.isPlainObject(r)){var g=a.isPlainObject(e)?e:{},c=a.isPlainObject(r)?r:{},u=a.extendFlat({},g,c);for(var h in u)V(t+"."+h,g[h],c[h],n)}else void 0===n[t]&&(n[t]=B(e))}function G(t,e,r){var n,i=t._fullLayout,o=t._fullData,l=t.data,g=i._guiEditing,d=j(i._preGUI,g),f=a.extendDeepAll({},e);U(e);var C,p=w.traceFlags(),I={},v={};function m(){return r.map(function(){})}function y(t){var e=A.id2name(t);-1===C.indexOf(e)&&C.push(e)}function b(t){return"LAYOUT"+t+".autorange"}function _(t){return"LAYOUT"+t+".range"}function k(t){for(var e=t;e<o.length;e++)if(o[e]._input===l[t])return o[e]}function T(n,o,a){if(Array.isArray(n))n.forEach(function(t){T(t,o,a)});else if(!(n in e||x.hasParent(e,n))){var s;if("LAYOUT"===n.substr(0,6))s=d(t.layout,n.replace("LAYOUT",""));else{var c=r[a];s=j(i._tracePreGUI[k(c)._fullInput.uid],g)(l[c],n)}n in v||(v[n]=m()),void 0===v[n][a]&&(v[n][a]=B(s.get())),void 0!==o&&s.set(o)}}function M(t){return function(e){return o[e][t]}}function E(t){return function(e,n){return!1===e?o[r[n]][t]:null}}for(var O in e){if(x.hasParent(e,O))throw new Error("cannot set "+O+" and a parent attribute simultaneously");var S,R,D,L,P,N,z=e[O];if("autobinx"!==O&&"autobiny"!==O||(O=O.charAt(O.length-1)+"bins",z=Array.isArray(z)?z.map(E(O)):!1===z?r.map(M(O)):null),I[O]=z,"LAYOUT"!==O.substr(0,6)){for(v[O]=m(),n=0;n<r.length;n++){if(S=l[r[n]],R=k(r[n]),L=(D=j(i._tracePreGUI[R._fullInput.uid],g)(S,O)).get(),void 0!==(P=Array.isArray(z)?z[n%z.length]:z)){var F=D.parts[D.parts.length-1],V=O.substr(0,O.length-F.length-1),G=V?V+".":"",Z=V?s(R,V).get():R;if((N=u.getTraceValObject(R,D.parts))&&N.impliedEdits&&null!==P)for(var H in N.impliedEdits)T(a.relativeAttr(O,H),N.impliedEdits[H],n);else if("thicknessmode"!==F&&"lenmode"!==F||L===P||"fraction"!==P&&"pixels"!==P||!Z){if("type"===O&&("pie"===P!=("pie"===L)||"funnelarea"===P!=("funnelarea"===L))){var W="x",Y="y";"bar"!==P&&"bar"!==L||"h"!==S.orientation||(W="y",Y="x"),a.swapAttrs(S,["?","?src"],"labels",W),a.swapAttrs(S,["d?","?0"],"label",W),a.swapAttrs(S,["?","?src"],"values",Y),"pie"===L||"funnelarea"===L?(s(S,"marker.color").set(s(S,"marker.colors").get()),i._pielayer.selectAll("g.trace").remove()):c.traceIs(S,"cartesian")&&s(S,"marker.colors").set(s(S,"marker.color").get())}}else{var X=i._size,q=Z.orient,Q="top"===q||"bottom"===q;if("thicknessmode"===F){var K=Q?X.h:X.w;T(G+"thickness",Z.thickness*("fraction"===P?1/K:K),n)}else{var J=Q?X.w:X.h;T(G+"len",Z.len*("fraction"===P?1/J:J),n)}}v[O][n]=B(L);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(O)){if("orientation"===O){D.set(P);var $=S.x&&!S.y?"h":"v";if((D.get()||$)===R.orientation)continue}else"orientationaxes"===O&&(S.orientation={v:"h",h:"v"}[R.orientation]);x.swapXYData(S),p.calc=p.clearAxisTypes=!0}else-1!==h.dataArrayContainers.indexOf(D.parts[0])?(x.manageArrayContainers(D,P,v),p.calc=!0):(N?N.arrayOk&&!c.traceIs(R,"regl")&&(a.isArrayOrTypedArray(P)||a.isArrayOrTypedArray(L))?p.calc=!0:w.update(p,N):p.calc=!0,D.set(P))}}if(-1!==["swapxyaxes","orientationaxes"].indexOf(O)&&A.swap(t,r),"orientationaxes"===O){var tt=s(t.layout,"hovermode");"x"===tt.get()?tt.set("y"):"y"===tt.get()?tt.set("x"):"x unified"===tt.get()?tt.set("y unified"):"y unified"===tt.get()&&tt.set("x unified")}if(-1!==["orientation","type"].indexOf(O)){for(C=[],n=0;n<r.length;n++){var et=l[r[n]];c.traceIs(et,"cartesian")&&(y(et.xaxis||"x"),y(et.yaxis||"y"))}T(C.map(b),!0,0),T(C.map(_),[0,1],0)}}else D=d(t.layout,O.replace("LAYOUT","")),v[O]=[B(D.get())],D.set(Array.isArray(z)?z[0]:z),p.calc=!0}return(p.calc||p.plot)&&(p.fullReplot=!0),{flags:p,undoit:v,redoit:I,traces:r,eventData:a.extendDeepNoArrays([],[f,r])}}function U(t){var e,r,n,i=a.counterRegex("axis",".title",!1,!1),o=/colorbar\.title$/,s=Object.keys(t);for(e=0;e<s.length;e++)r=s[e],n=t[r],"title"!==r&&!i.test(r)&&!o.test(r)||"string"!=typeof n&&"number"!=typeof n?r.indexOf("titlefont")>-1?l(r,r.replace("titlefont","title.font")):r.indexOf("titleposition")>-1?l(r,r.replace("titleposition","title.position")):r.indexOf("titleside")>-1?l(r,r.replace("titleside","title.side")):r.indexOf("titleoffset")>-1&&l(r,r.replace("titleoffset","title.offset")):l(r,r.replace("title","title.text"));function l(e,r){t[r]=t[e],delete t[e]}}function Z(t,e,r){if(t=a.getGraphDiv(t),x.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);var n={};if("string"==typeof e)n[e]=r;else{if(!a.isPlainObject(e))return a.warn("Relayout fail.",e,r),Promise.reject();n=a.extendFlat({},e)}Object.keys(n).length&&(t.changed=!0);var i=Q(t,n),o=i.flags;o.calc&&(t.calcdata=void 0);var s=[h.previousPromises];o.layoutReplot?s.push(_.layoutReplot):Object.keys(n).length&&(H(t,o,i)||h.supplyDefaults(t),o.legend&&s.push(_.doLegend),o.layoutstyle&&s.push(_.layoutStyles),o.axrange&&W(s,i.rangesAltered),o.ticks&&s.push(_.doTicksRelayout),o.modebar&&s.push(_.doModeBar),o.camera&&s.push(_.doCamera),o.colorbars&&s.push(_.doColorBars),s.push(E)),s.push(h.rehover,h.redrag),g.add(t,Z,[t,i.undoit],Z,[t,i.redoit]);var l=a.syncOrAsync(s,t);return l&&l.then||(l=Promise.resolve(t)),l.then(function(){return t.emit("plotly_relayout",i.eventData),t})}function H(t,e,r){var n=t._fullLayout;if(!e.axrange)return!1;for(var i in e)if("axrange"!==i&&e[i])return!1;for(var o in r.rangesAltered){var a=A.id2name(o),s=t.layout[a],l=n[a];if(l.autorange=s.autorange,l.range=s.range.slice(),l.cleanRange(),l._matchGroup)for(var g in l._matchGroup)if(g!==o){var c=n[A.id2name(g)];c.autorange=l.autorange,c.range=l.range.slice(),c._input.range=l.range.slice()}}return!0}function W(t,e){var r=e?function(t){var r=[],n=!0;for(var i in e){var o=A.getFromId(t,i);if(r.push(i),o._matchGroup)for(var a in o._matchGroup)e[a]||r.push(a);o.automargin&&(n=!1)}return A.draw(t,r,{skipTitle:n})}:function(t){return A.draw(t,"redraw")};t.push(m,_.doAutoRangeAndConstraints,r,_.drawData,_.finalDraw)}var Y=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,X=/^[xyz]axis[0-9]*\.autorange$/,q=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Q(t,e){var r,n,i,o=t.layout,l=t._fullLayout,g=l._guiEditing,h=j(l._preGUI,g),d=Object.keys(e),f=A.list(t),C=a.extendDeepAll({},e),p={};for(U(e),d=Object.keys(e),n=0;n<d.length;n++)if(0===d[n].indexOf("allaxes")){for(i=0;i<f.length;i++){var I=f[i]._id.substr(1),v=-1!==I.indexOf("scene")?I+".":"",m=d[n].replace("allaxes",v+f[i]._name);e[m]||(e[m]=e[d[n]])}delete e[d[n]]}var y=w.layoutFlags(),_={},T={};function M(t,r){if(Array.isArray(t))t.forEach(function(t){M(t,r)});else if(!(t in e||x.hasParent(e,t))){var n=h(o,t);t in T||(T[t]=B(n.get())),void 0!==r&&n.set(r)}}var E,O={};function S(t){var e=A.name2id(t.split(".")[0]);return O[e]=1,e}for(var R in e){if(x.hasParent(e,R))throw new Error("cannot set "+R+" and a parent attribute simultaneously");for(var D=h(o,R),L=e[R],P=D.parts.length-1;P>0&&"string"!=typeof D.parts[P];)P--;var N=D.parts[P],z=D.parts[P-1]+"."+N,F=D.parts.slice(0,P).join("."),V=s(t.layout,F).get(),G=s(l,F).get(),Z=D.get();if(void 0!==L){_[R]=L,T[R]="reverse"===N?L:B(Z);var H=u.getLayoutValObject(l,D.parts);if(H&&H.impliedEdits&&null!==L)for(var W in H.impliedEdits)M(a.relativeAttr(R,W),H.impliedEdits[W]);if(-1!==["width","height"].indexOf(R))if(L){M("autosize",null);var Q="height"===R?"width":"height";M(Q,l[Q])}else l[R]=t._initialAutoSize[R];else if("autosize"===R)M("width",L?null:l.width),M("height",L?null:l.height);else if(z.match(Y))S(z),s(l,F+"._inputRange").set(null);else if(z.match(X)){S(z),s(l,F+"._inputRange").set(null);var J=s(l,F).get();J._inputDomain&&(J._input.domain=J._inputDomain.slice())}else z.match(q)&&s(l,F+"._inputDomain").set(null);if("type"===N){var $=V,tt="linear"===G.type&&"log"===L,et="log"===G.type&&"linear"===L;if(tt||et){if($&&$.range)if(G.autorange)tt&&($.range=$.range[1]>$.range[0]?[1,2]:[2,1]);else{var rt=$.range[0],nt=$.range[1];tt?(rt<=0&&nt<=0&&M(F+".autorange",!0),rt<=0?rt=nt/1e6:nt<=0&&(nt=rt/1e6),M(F+".range[0]",Math.log(rt)/Math.LN10),M(F+".range[1]",Math.log(nt)/Math.LN10)):(M(F+".range[0]",Math.pow(10,rt)),M(F+".range[1]",Math.pow(10,nt)))}else M(F+".autorange",!0);Array.isArray(l._subplots.polar)&&l._subplots.polar.length&&l[D.parts[0]]&&"radialaxis"===D.parts[1]&&delete l[D.parts[0]]._subplot.viewInitial["radialaxis.range"],c.getComponentMethod("annotations","convertCoords")(t,G,L,M),c.getComponentMethod("images","convertCoords")(t,G,L,M)}else M(F+".autorange",!0),M(F+".range",null);s(l,F+"._inputRange").set(null)}else if(N.match(k)){var it=s(l,R).get(),ot=(L||{}).type;ot&&"-"!==ot||(ot="linear"),c.getComponentMethod("annotations","convertCoords")(t,it,ot,M),c.getComponentMethod("images","convertCoords")(t,it,ot,M)}var at=b.containerArrayMatch(R);if(at){r=at.array,n=at.index;var st=at.property,lt=H||{editType:"calc"};""!==n&&""===st&&(b.isAddVal(L)?T[R]=null:b.isRemoveVal(L)?T[R]=(s(o,r).get()||[])[n]:a.warn("unrecognized full object value",e)),w.update(y,lt),p[r]||(p[r]={});var gt=p[r][n];gt||(gt=p[r][n]={}),gt[st]=L,delete e[R]}else"reverse"===N?(V.range?V.range.reverse():(M(F+".autorange",!0),V.range=[1,0]),G.autorange?y.calc=!0:y.plot=!0):(l._has("scatter-like")&&l._has("regl")&&"dragmode"===R&&("lasso"===L||"select"===L)&&"lasso"!==Z&&"select"!==Z?y.plot=!0:l._has("gl2d")?y.plot=!0:H?w.update(y,H):y.calc=!0,D.set(L))}}for(r in p){b.applyContainerArrayChanges(t,h(o,r),p[r],y,h)||(y.plot=!0)}var ct=l._axisConstraintGroups||[];for(E in O)for(n=0;n<ct.length;n++){var ut=ct[n];if(ut[E])for(var ht in y.calc=!0,ut)O[ht]||(A.getFromId(t,ht)._constraintShrinkable=!0)}return(K(t)||e.height||e.width)&&(y.plot=!0),(y.plot||y.calc)&&(y.layoutReplot=!0),{flags:y,rangesAltered:O,undoit:T,redoit:_,eventData:C}}function K(t){var e=t._fullLayout,r=e.width,n=e.height;return t.layout.autosize&&h.plotAutoSize(t,t.layout,e),e.width!==r||e.height!==n}function J(t,e,n,i){if(t=a.getGraphDiv(t),x.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);a.isPlainObject(e)||(e={}),a.isPlainObject(n)||(n={}),Object.keys(e).length&&(t.changed=!0),Object.keys(n).length&&(t.changed=!0);var o=x.coerceTraceIndices(t,i),s=G(t,a.extendFlat({},e),o),l=s.flags,c=Q(t,a.extendFlat({},n)),u=c.flags;(l.calc||u.calc)&&(t.calcdata=void 0),l.clearAxisTypes&&x.clearAxisTypes(t,o,n);var d=[];u.layoutReplot?d.push(_.layoutReplot):l.fullReplot?d.push(r.plot):(d.push(h.previousPromises),H(t,u,c)||h.supplyDefaults(t),l.style&&d.push(_.doTraceStyle),(l.colorbars||u.colorbars)&&d.push(_.doColorBars),u.legend&&d.push(_.doLegend),u.layoutstyle&&d.push(_.layoutStyles),u.axrange&&W(d,c.rangesAltered),u.ticks&&d.push(_.doTicksRelayout),u.modebar&&d.push(_.doModeBar),u.camera&&d.push(_.doCamera),d.push(E)),d.push(h.rehover,h.redrag),g.add(t,J,[t,s.undoit,c.undoit,s.traces],J,[t,s.redoit,c.redoit,s.traces]);var A=a.syncOrAsync(d,t);return A&&A.then||(A=Promise.resolve(t)),A.then(function(){return t.emit("plotly_update",{data:s.eventData,layout:c.eventData}),t})}function $(t){return function(e){e._fullLayout._guiEditing=!0;var r=t.apply(null,arguments);return e._fullLayout._guiEditing=!1,r}}var tt=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],et=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function rt(t,e){for(var r=0;r<e.length;r++){var n=e[r],i=t.match(n.pattern);if(i)return{head:i[1],attr:n.attr}}}function nt(t,e){var r=s(e,t).get();if(void 0!==r)return r;var n=t.split(".");for(n.pop();n.length>1;)if(n.pop(),void 0!==(r=s(e,n.join(".")+".uirevision").get()))return r;return e.uirevision}function it(t,e){for(var r=0;r<e.length;r++)if(e[r]._fullInput.uid===t)return r;return-1}function ot(t,e,r){for(var n=0;n<e.length;n++)if(e[n].uid===t)return n;return!e[r]||e[r].uid?-1:r}function at(t,e){var r=a.isPlainObject(t),n=Array.isArray(t);return r||n?(r&&a.isPlainObject(e)||n&&Array.isArray(e))&&JSON.stringify(t)===JSON.stringify(e):t===e}function st(t,e,r,n){var i,o,l,g=n.getValObject,c=n.flags,u=n.immutable,h=n.inArray,d=n.arrayIndex;function A(){var t=i.editType;h&&-1!==t.indexOf("arraydraw")?a.pushUnique(c.arrays[h],d):(w.update(c,i),"none"!==t&&c.nChanges++,n.transition&&i.anim&&c.nChangesAnim++,(Y.test(l)||X.test(l))&&(c.rangesAltered[r[0]]=1),q.test(l)&&s(e,"_inputDomain").set(null),"datarevision"===o&&(c.newDataRevision=1))}function f(t){return"data_array"===t.valType||t.arrayOk}for(o in t){if(c.calc&&!n.transition)return;var C=t[o],p=e[o],I=r.concat(o);if(l=I.join("."),"_"!==o.charAt(0)&&"function"!=typeof C&&C!==p){if(("tick0"===o||"dtick"===o)&&"geo"!==r[0]){var v=e.tickmode;if("auto"===v||"array"===v||!v)continue}if(("range"!==o||!e.autorange)&&("zmin"!==o&&"zmax"!==o||"contourcarpet"!==e.type)&&(i=g(I))&&(!i._compareAsJSON||JSON.stringify(C)!==JSON.stringify(p))){var m,y=i.valType,b=f(i),x=Array.isArray(C),_=Array.isArray(p);if(x&&_){var k="_input_"+o,T=t[k],M=e[k];if(Array.isArray(T)&&T===M)continue}if(void 0===p)b&&x?c.calc=!0:A();else if(i._isLinkedToArray){var E=[],O=!1;h||(c.arrays[o]=E);var S=Math.min(C.length,p.length),R=Math.max(C.length,p.length);if(S!==R){if("arraydraw"!==i.editType){A();continue}O=!0}for(m=0;m<S;m++)st(C[m],p[m],I.concat(m),a.extendFlat({inArray:o,arrayIndex:m},n));if(O)for(m=S;m<R;m++)E.push(m)}else!y&&a.isPlainObject(C)?st(C,p,I,n):b?x&&_?(u&&(c.calc=!0),(u||n.newDataRevision)&&A()):x!==_?c.calc=!0:A():x&&_&&C.length===p.length&&String(C)===String(p)||A()}}}for(o in e)if(!(o in t||"_"===o.charAt(0)||"function"==typeof e[o])){if(f(i=g(r.concat(o)))&&Array.isArray(e[o]))return void(c.calc=!0);A()}}function lt(t){var e=n.select(t),r=t._fullLayout;if(r._container=e.selectAll(".plot-container").data([0]),r._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),r._paperdiv=r._container.selectAll(".svg-container").data([0]),r._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]),r._glcontainer.enter().append("div").classed("gl-container",!0),r._paperdiv.selectAll(".main-svg").remove(),r._paperdiv.select(".modebar-container").remove(),r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",!0),r._toppaper=r._paperdiv.append("svg").classed("main-svg",!0),r._modebardiv=r._paperdiv.append("div"),r._hoverpaper=r._paperdiv.append("svg").classed("main-svg",!0),!r._uid){var i={};n.selectAll("defs").each(function(){this.id&&(i[this.id.split("-")[1]]=1)}),r._uid=a.randstr(i)}r._paperdiv.selectAll(".main-svg").attr(I.svgAttrs),r._defs=r._paper.append("defs").attr("id","defs-"+r._uid),r._clips=r._defs.append("g").classed("clips",!0),r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid),r._topclips=r._topdefs.append("g").classed("clips",!0),r._bgLayer=r._paper.append("g").classed("bglayer",!0),r._draggers=r._paper.append("g").classed("draglayer",!0);var o=r._paper.append("g").classed("layer-below",!0);r._imageLowerLayer=o.append("g").classed("imagelayer",!0),r._shapeLowerLayer=o.append("g").classed("shapelayer",!0),r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",!0),r._polarlayer=r._paper.append("g").classed("polarlayer",!0),r._ternarylayer=r._paper.append("g").classed("ternarylayer",!0),r._geolayer=r._paper.append("g").classed("geolayer",!0),r._funnelarealayer=r._paper.append("g").classed("funnelarealayer",!0),r._pielayer=r._paper.append("g").classed("pielayer",!0),r._treemaplayer=r._paper.append("g").classed("treemaplayer",!0),r._sunburstlayer=r._paper.append("g").classed("sunburstlayer",!0),r._indicatorlayer=r._toppaper.append("g").classed("indicatorlayer",!0),r._glimages=r._paper.append("g").classed("glimages",!0);var s=r._toppaper.append("g").classed("layer-above",!0);r._imageUpperLayer=s.append("g").classed("imagelayer",!0),r._shapeUpperLayer=s.append("g").classed("shapelayer",!0),r._infolayer=r._toppaper.append("g").classed("infolayer",!0),r._menulayer=r._toppaper.append("g").classed("menulayer",!0),r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",!0),r._hoverlayer=r._hoverpaper.append("g").classed("hoverlayer",!0),r._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),t.emit("plotly_framework")}r.animate=function(t,e,r){if(t=a.getGraphDiv(t),!a.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var n=t._transitionData;n._frameQueue||(n._frameQueue=[]);var i=(r=h.supplyAnimationDefaults(r)).transition,o=r.frame;function s(t){return Array.isArray(i)?t>=i.length?i[0]:i[t]:i}function l(t){return Array.isArray(o)?t>=o.length?o[0]:o[t]:o}function g(t,e){var r=0;return function(){if(t&&++r===e)return t()}}return void 0===n._frameWaitingCnt&&(n._frameWaitingCnt=0),new Promise(function(o,c){function u(){n._currentFrame&&n._currentFrame.onComplete&&n._currentFrame.onComplete();var e=n._currentFrame=n._frameQueue.shift();if(e){var r=e.name?e.name.toString():null;t._fullLayout._currentFrame=r,n._lastFrameAt=Date.now(),n._timeToNext=e.frameOpts.duration,h.transition(t,e.frame.data,e.frame.layout,x.coerceTraceIndices(t,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){e.onComplete&&e.onComplete()}),t.emit("plotly_animatingframe",{name:r,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else t.emit("plotly_animated"),window.cancelAnimationFrame(n._animationRaf),n._animationRaf=null}function d(){t.emit("plotly_animating"),n._lastFrameAt=-1/0,n._timeToNext=0,n._runningTransitions=0,n._currentFrame=null;var e=function(){n._animationRaf=window.requestAnimationFrame(e),Date.now()-n._lastFrameAt>n._timeToNext&&u()};e()}var A,f,C=0;function p(t){return Array.isArray(i)?C>=i.length?t.transitionOpts=i[C]:t.transitionOpts=i[0]:t.transitionOpts=i,C++,t}var I=[],v=void 0===e||null===e,m=Array.isArray(e);if(v||m||!a.isPlainObject(e)){if(v||-1!==["string","number"].indexOf(typeof e))for(A=0;A<n._frames.length;A++)(f=n._frames[A])&&(v||String(f.group)===String(e))&&I.push({type:"byname",name:String(f.name),data:p({name:f.name})});else if(m)for(A=0;A<e.length;A++){var y=e[A];-1!==["number","string"].indexOf(typeof y)?(y=String(y),I.push({type:"byname",name:y,data:p({name:y})})):a.isPlainObject(y)&&I.push({type:"object",data:p(a.extendFlat({},y))})}}else I.push({type:"object",data:p(a.extendFlat({},e))});for(A=0;A<I.length;A++)if("byname"===(f=I[A]).type&&!n._frameHash[f.data.name])return a.warn('animate failure: frame not found: "'+f.data.name+'"'),void c();-1!==["next","immediate"].indexOf(r.mode)&&function(){if(0!==n._frameQueue.length){for(;n._frameQueue.length;){var e=n._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}t.emit("plotly_animationinterrupted",[])}}(),"reverse"===r.direction&&I.reverse();var b=t._fullLayout._currentFrame;if(b&&r.fromcurrent){var _=-1;for(A=0;A<I.length;A++)if("byname"===(f=I[A]).type&&f.name===b){_=A;break}if(_>0&&_<I.length-1){var w=[];for(A=0;A<I.length;A++)f=I[A],("byname"!==I[A].type||A>_)&&w.push(f);I=w}}I.length>0?function(e){if(0!==e.length){for(var i=0;i<e.length;i++){var a;a="byname"===e[i].type?h.computeFrame(t,e[i].name):e[i].data;var u=l(i),A=s(i);A.duration=Math.min(A.duration,u.duration);var f={frame:a,name:e[i].name,frameOpts:u,transitionOpts:A};i===e.length-1&&(f.onComplete=g(o,2),f.onInterrupt=c),n._frameQueue.push(f)}"immediate"===r.mode&&(n._lastFrameAt=-1/0),n._animationRaf||d()}}(I):(t.emit("plotly_animated"),o())})},r.addFrames=function(t,e,r){if(t=a.getGraphDiv(t),null===e||void 0===e)return Promise.resolve();if(!a.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var n,i,o,s,l=t._transitionData._frames,c=t._transitionData._frameHash;if(!Array.isArray(e))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+e);var u=l.length+2*e.length,d=[],A={};for(n=e.length-1;n>=0;n--)if(a.isPlainObject(e[n])){var f=e[n].name,C=(c[f]||A[f]||{}).name,p=e[n].name,I=c[C]||A[C];C&&p&&"number"==typeof p&&I&&T<M&&(T++,a.warn('addFrames: overwriting frame "'+(c[C]||A[C]).name+'" with a frame whose name of type "number" also equates to "'+C+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),T===M&&a.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),A[f]={name:f},d.push({frame:h.supplyFrameDefaults(e[n]),index:r&&void 0!==r[n]&&null!==r[n]?r[n]:u+n})}d.sort(function(t,e){return t.index>e.index?-1:t.index<e.index?1:0});var v=[],m=[],y=l.length;for(n=d.length-1;n>=0;n--){if("number"==typeof(i=d[n].frame).name&&a.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!i.name)for(;c[i.name="frame "+t._transitionData._counter++];);if(c[i.name]){for(o=0;o<l.length&&(l[o]||{}).name!==i.name;o++);v.push({type:"replace",index:o,value:i}),m.unshift({type:"replace",index:o,value:l[o]})}else s=Math.max(0,Math.min(d[n].index,y)),v.push({type:"insert",index:s,value:i}),m.unshift({type:"delete",index:s}),y++}var b=h.modifyFrames,x=h.modifyFrames,_=[t,m],w=[t,v];return g&&g.add(t,b,_,x,w),h.modifyFrames(t,v)},r.deleteFrames=function(t,e){if(t=a.getGraphDiv(t),!a.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);var r,n,i=t._transitionData._frames,o=[],s=[];if(!e)for(e=[],r=0;r<i.length;r++)e.push(r);for((e=e.slice()).sort(),r=e.length-1;r>=0;r--)n=e[r],o.push({type:"delete",index:n}),s.unshift({type:"insert",index:n,value:i[n]});var l=h.modifyFrames,c=h.modifyFrames,u=[t,s],d=[t,o];return g&&g.add(t,l,u,c,d),h.modifyFrames(t,o)},r.addTraces=function t(e,n,i){e=a.getGraphDiv(e);var o,s,l=[],c=r.deleteTraces,u=t,h=[e,l],d=[e,n];for(function(t,e,r){var n,i;if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("traces must be defined.");for(Array.isArray(e)||(e=[e]),n=0;n<e.length;n++)if("object"!=typeof(i=e[n])||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if(void 0===r||Array.isArray(r)||(r=[r]),void 0!==r&&r.length!==e.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(e,n,i),Array.isArray(n)||(n=[n]),n=n.map(function(t){return a.extendFlat({},t)}),x.cleanData(n),o=0;o<n.length;o++)e.data.push(n[o]);for(o=0;o<n.length;o++)l.push(-n.length+o);if(void 0===i)return s=r.redraw(e),g.add(e,c,h,u,d),s;Array.isArray(i)||(i=[i]);try{P(e,l,i)}catch(t){throw e.data.splice(e.data.length-n.length,n.length),t}return g.startSequence(e),g.add(e,c,h,u,d),s=r.moveTraces(e,l,i),g.stopSequence(e),s},r.deleteTraces=function t(e,n){e=a.getGraphDiv(e);var i,o,s=[],l=r.addTraces,c=t,u=[e,s,n],h=[e,n];if(void 0===n)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(n)||(n=[n]),L(e,n,"indices"),(n=D(n,e.data.length-1)).sort(a.sorterDes),i=0;i<n.length;i+=1)o=e.data.splice(n[i],1)[0],s.push(o);var d=r.redraw(e);return g.add(e,l,u,c,h),d},r.extendTraces=function t(e,n,i,o){var s=N(e=a.getGraphDiv(e),n,i,o,function(t,e,r){var n,i;if(a.isTypedArray(t))if(r<0){var o=new t.constructor(0),s=z(t,e);r<0?(n=s,i=o):(n=o,i=s)}else if(n=new t.constructor(r),i=new t.constructor(t.length+e.length-r),r===e.length)n.set(e),i.set(t);else if(r<e.length){var l=e.length-r;n.set(e.subarray(l)),i.set(t),i.set(e.subarray(0,l),t.length)}else{var g=r-e.length,c=t.length-g;n.set(t.subarray(c)),n.set(e,g),i.set(t.subarray(0,c))}else n=t.concat(e),i=r>=0&&r<n.length?n.splice(0,n.length-r):[];return[n,i]}),l=r.redraw(e),c=[e,s.update,i,s.maxPoints];return g.add(e,r.prependTraces,c,t,arguments),l},r.moveTraces=function t(e,n,i){var o,s=[],l=[],c=t,u=t,h=[e=a.getGraphDiv(e),i,n],d=[e,n,i];if(P(e,n,i),n=Array.isArray(n)?n:[n],void 0===i)for(i=[],o=0;o<n.length;o++)i.push(-n.length+o);for(i=Array.isArray(i)?i:[i],n=D(n,e.data.length-1),i=D(i,e.data.length-1),o=0;o<e.data.length;o++)-1===n.indexOf(o)&&s.push(e.data[o]);for(o=0;o<n.length;o++)l.push({newIndex:i[o],trace:e.data[n[o]]});for(l.sort(function(t,e){return t.newIndex-e.newIndex}),o=0;o<l.length;o+=1)s.splice(l[o].newIndex,0,l[o].trace);e.data=s;var A=r.redraw(e);return g.add(e,c,h,u,d),A},r.prependTraces=function t(e,n,i,o){var s=N(e=a.getGraphDiv(e),n,i,o,function(t,e,r){var n,i;if(a.isTypedArray(t))if(r<=0){var o=new t.constructor(0),s=z(e,t);r<0?(n=s,i=o):(n=o,i=s)}else if(n=new t.constructor(r),i=new t.constructor(t.length+e.length-r),r===e.length)n.set(e),i.set(t);else if(r<e.length){var l=e.length-r;n.set(e.subarray(0,l)),i.set(e.subarray(l)),i.set(t,l)}else{var g=r-e.length;n.set(e),n.set(t.subarray(0,g),e.length),i.set(t.subarray(g))}else n=e.concat(t),i=r>=0&&r<n.length?n.splice(r,n.length):[];return[n,i]}),l=r.redraw(e),c=[e,s.update,i,s.maxPoints];return g.add(e,r.extendTraces,c,t,arguments),l},r.newPlot=function(t,e,n,i){return t=a.getGraphDiv(t),h.cleanPlot([],{},t._fullData||[],t._fullLayout||{}),h.purge(t),r.plot(t,e,n,i)},r.plot=function(t,e,i,o){var s;if(t=a.getGraphDiv(t),l.init(t),a.isPlainObject(e)){var g=e;e=g.data,i=g.layout,o=g.config,s=g.frames}if(!1===l.triggerHandler(t,"plotly_beforeplot",[e,i,o]))return Promise.reject();e||i||a.isPlotDiv(t)||a.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",t),R(t,o),i||(i={}),n.select(t).classed("js-plotly-plot",!0),f.makeTester(),Array.isArray(t._promises)||(t._promises=[]);var u=0===(t.data||[]).length&&Array.isArray(e);Array.isArray(e)&&(x.cleanData(e),u?t.data=e:t.data.push.apply(t.data,e),t.empty=!1),t.layout&&!u||(t.layout=x.cleanLayout(i)),h.supplyDefaults(t);var C=t._fullLayout,I=C._has("cartesian");if(!C._has("polar")&&e&&e[0]&&e[0].r)return a.log("Legacy polar charts are deprecated!"),function(t,e,r){var i=n.select(t).selectAll(".plot-container").data([0]);i.enter().insert("div",":first-child").classed("plot-container plotly",!0);var o=i.selectAll(".svg-container").data([0]);o.enter().append("div").classed("svg-container",!0).style("position","relative"),o.html(""),e&&(t.data=e),r&&(t.layout=r),d.manager.fillLayout(t),o.style({width:t._fullLayout.width+"px",height:t._fullLayout.height+"px"}),t.framework=d.manager.framework(t),t.framework({data:t.data,layout:t.layout},o.node()),t.framework.setUndoPoint();var s=t.framework.svg(),l=1,g=t._fullLayout.title?t._fullLayout.title.text:"";""!==g&&g||(l=0);var c=function(){this.call(v.convertToTspans,t)},u=s.select(".title-group text").call(c);if(t._context.edits.titleText){var A=a._(t,"Click to enter Plot title");g&&g!==A||(l=.2,u.attr({"data-unformatted":A}).text(A).style({opacity:l}).on("mouseover.opacity",function(){n.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){n.select(this).transition().duration(1e3).style("opacity",0)}));var f=function(){this.call(v.makeEditable,{gd:t}).on("edit",function(e){t.framework({layout:{title:{text:e}}}),this.text(e).call(c),this.call(f)}).on("cancel",function(){var t=this.attr("data-unformatted");this.text(t).call(c)})};u.call(f)}return t._context.setBackground(t,t._fullLayout.paper_bgcolor),h.addLinks(t),Promise.resolve()}(t,e,i);C._replotting=!0,u&&lt(t),t.framework!==lt&&(t.framework=lt,lt(t)),f.initGradients(t),u&&A.saveShowSpikeInitial(t);var m=!t.calcdata||t.calcdata.length!==(t._fullData||[]).length;m&&h.doCalcdata(t);for(var y=0;y<t.calcdata.length;y++)t.calcdata[y][0].trace=t._fullData[y];t._context.responsive?t._responsiveChartHandler||(t._responsiveChartHandler=function(){a.isHidden(t)||h.resize(t)},window.addEventListener("resize",t._responsiveChartHandler)):a.clearResponsive(t);var b=a.extendFlat({},C._size),w=0;function k(){if(h.clearAutoMarginIds(t),_.drawMarginPushers(t),A.allowAutoMargin(t),C._has("pie"))for(var e=t._fullData,r=0;r<e.length;r++){var n=e[r];"pie"===n.type&&n.automargin&&h.allowAutoMargin(t,"pie."+n.uid+".automargin")}return h.doAutoMargin(t),h.previousPromises(t)}function T(){t._transitioning||(_.doAutoRangeAndConstraints(t),u&&A.saveRangeInitial(t),c.getComponentMethod("rangeslider","calcAutorange")(t))}var M=[h.previousPromises,function(){if(s)return r.addFrames(t,s)},function e(){for(var r=C._basePlotModules,n=0;n<r.length;n++)r[n].drawFramework&&r[n].drawFramework(t);if(!C._glcanvas&&C._has("gl")&&(C._glcanvas=C._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(t){return t.key}),C._glcanvas.enter().append("canvas").attr("class",function(t){return"gl-canvas gl-canvas-"+t.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"})),C._glcanvas){C._glcanvas.attr("width",C.width).attr("height",C.height);var i=C._glcanvas.data()[0].regl;if(i&&(Math.floor(C.width)!==i._gl.drawingBufferWidth||Math.floor(C.height)!==i._gl.drawingBufferHeight)){var o="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!w)return a.log(o+" Clearing graph and plotting again."),h.cleanPlot([],{},t._fullData,C),h.supplyDefaults(t),C=t._fullLayout,h.doCalcdata(t),w++,e();a.error(o)}}return"h"===C.modebar.orientation?C._modebardiv.style("height",null).style("width","100%"):C._modebardiv.style("width",null).style("height",C.height+"px"),h.previousPromises(t)},k,function(){if(h.didMarginChange(b,C._size))return a.syncOrAsync([k,_.layoutStyles],t)}];I&&M.push(function(){if(m)return a.syncOrAsync([c.getComponentMethod("shapes","calcAutorange"),c.getComponentMethod("annotations","calcAutorange"),T],t);T()}),M.push(_.layoutStyles),I&&M.push(function(){return A.draw(t,u?"":"redraw")}),M.push(_.drawData,_.finalDraw,p,h.addLinks,h.rehover,h.redrag,h.doAutoMargin,h.previousPromises);var O=a.syncOrAsync(M,t);return O&&O.then||(O=Promise.resolve()),O.then(function(){return E(t),t})},r.purge=function(t){var e=(t=a.getGraphDiv(t))._fullLayout||{},r=t._fullData||[];return h.cleanPlot([],{},r,e),h.purge(t),l.purge(t),e._container&&e._container.remove(),delete t._context,t},r.react=function(t,e,n,i){var o,l;t=a.getGraphDiv(t),x.clearPromiseQueue(t);var g=t._fullData,d=t._fullLayout;if(a.isPlotDiv(t)&&g&&d){if(a.isPlainObject(e)){var A=e;e=A.data,n=A.layout,i=A.config,o=A.frames}var f=!1;if(i){var C=a.extendDeep({},t._context);t._context=void 0,R(t,i),f=function t(e,r){var n;for(n in e)if("_"!==n.charAt(0)){var i=e[n],o=r[n];if(i!==o)if(a.isPlainObject(i)&&a.isPlainObject(o)){if(t(i,o))return!0}else{if(!Array.isArray(i)||!Array.isArray(o))return!0;if(i.length!==o.length)return!0;for(var s=0;s<i.length;s++)if(i[s]!==o[s]){if(!a.isPlainObject(i[s])||!a.isPlainObject(o[s]))return!0;if(t(i[s],o[s]))return!0}}}}(C,t._context)}t.data=e||[],x.cleanData(t.data),t.layout=n||{},x.cleanLayout(t.layout),function(t,e,r,n){var i,o,l,g,c,u,h,d,A=n._preGUI,f=[],C={};for(i in A){if(c=rt(i,tt)){if(o=c.attr||c.head+".uirevision",(g=(l=s(n,o).get())&&nt(o,e))&&g===l&&(null===(u=A[i])&&(u=void 0),at(d=(h=s(e,i)).get(),u))){void 0===d&&"autorange"===i.substr(i.length-9)&&f.push(i.substr(0,i.length-10)),h.set(B(s(n,i).get()));continue}}else a.warn("unrecognized GUI edit: "+i);delete A[i],"range["===i.substr(i.length-8,6)&&(C[i.substr(0,i.length-9)]=1)}for(var p=0;p<f.length;p++){var I=f[p];if(C[I]){var v=s(e,I).get();v&&delete v.autorange}}var m=n._tracePreGUI;for(var y in m){var b,x=m[y],_=null;for(i in x){if(!_){var w=it(y,r);if(w<0){delete m[y];break}var k=ot(y,t,(b=r[w]._fullInput).index);if(k<0){delete m[y];break}_=t[k]}if(c=rt(i,et)){if(c.attr?g=(l=s(n,c.attr).get())&&nt(c.attr,e):(l=b.uirevision,void 0===(g=_.uirevision)&&(g=e.uirevision)),g&&g===l&&(null===(u=x[i])&&(u=void 0),at(d=(h=s(_,i)).get(),u))){h.set(B(s(b,i).get()));continue}}else a.warn("unrecognized GUI edit: "+i+" in trace uid "+y);delete x[i]}}}(t.data,t.layout,g,d),h.supplyDefaults(t,{skipUpdateCalc:!0});var p=t._fullData,I=t._fullLayout,v=void 0===I.datarevision,m=I.transition,y=function(t,e,r,n,i){var o=w.layoutFlags();return o.arrays={},o.rangesAltered={},o.nChanges=0,o.nChangesAnim=0,st(e,r,[],{getValObject:function(t){return u.getLayoutValObject(r,t)},flags:o,immutable:n,transition:i,gd:t}),(o.plot||o.calc)&&(o.layoutReplot=!0),i&&o.nChanges&&o.nChangesAnim&&(o.anim=o.nChanges===o.nChangesAnim?"all":"some"),o}(t,d,I,v,m),b=y.newDataRevision,k=function(t,e,r,n,i,o){var a=e.length===r.length;if(!i&&!a)return{fullReplot:!0,calc:!0};var s,l,g=w.traceFlags();g.arrays={},g.nChanges=0,g.nChangesAnim=0;var c={getValObject:function(t){var e=u.getTraceValObject(l,t);return!l._module.animatable&&e.anim&&(e.anim=!1),e},flags:g,immutable:n,transition:i,newDataRevision:o,gd:t},d={};for(s=0;s<e.length;s++)if(r[s]){if(l=r[s]._fullInput,h.hasMakesDataTransform(l)&&(l=r[s]),d[l.uid])continue;d[l.uid]=1,st(e[s]._fullInput,l,[],c)}return(g.calc||g.plot)&&(g.fullReplot=!0),i&&g.nChanges&&g.nChangesAnim&&(g.anim=g.nChanges===g.nChangesAnim&&a?"all":"some"),g}(t,g,p,v,m,b);K(t)&&(y.layoutReplot=!0),k.calc||y.calc?t.calcdata=void 0:h.supplyDefaultsUpdateCalc(t.calcdata,p);var T=[];if(o&&(t._transitionData={},h.createTransitionData(t),T.push(function(){return r.addFrames(t,o)})),I.transition&&!f&&(k.anim||y.anim))h.doCalcdata(t),_.doAutoRangeAndConstraints(t),T.push(function(){return h.transitionFromReact(t,k,y,d)});else if(k.fullReplot||y.layoutReplot||f)t._fullLayout._skipDefaults=!0,T.push(r.plot);else{for(var M in y.arrays){var O=y.arrays[M];if(O.length){var S=c.getComponentMethod(M,"drawOne");if(S!==a.noop)for(var D=0;D<O.length;D++)S(t,O[D]);else{var L=c.getComponentMethod(M,"draw");if(L===a.noop)throw new Error("cannot draw components: "+M);L(t)}}}T.push(h.previousPromises),k.style&&T.push(_.doTraceStyle),(k.colorbars||y.colorbars)&&T.push(_.doColorBars),y.legend&&T.push(_.doLegend),y.layoutstyle&&T.push(_.layoutStyles),y.axrange&&W(T),y.ticks&&T.push(_.doTicksRelayout),y.modebar&&T.push(_.doModeBar),y.camera&&T.push(_.doCamera),T.push(E)}T.push(h.rehover,h.redrag),(l=a.syncOrAsync(T,t))&&l.then||(l=Promise.resolve(t))}else l=r.newPlot(t,e,n,i);return l.then(function(){return t.emit("plotly_react",{data:e,layout:n}),t})},r.redraw=function(t){if(t=a.getGraphDiv(t),!a.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);return x.cleanData(t.data),x.cleanLayout(t.layout),t.calcdata=void 0,r.plot(t).then(function(){return t.emit("plotly_redraw"),t})},r.relayout=Z,r.restyle=F,r.setPlotConfig=function(t){return a.extendFlat(y,t)},r.update=J,r._guiRelayout=$(Z),r._guiRestyle=$(F),r._guiUpdate=$(J),r._storeDirectGUIEdit=function(t,e,r){for(var n in r)V(n,s(t,n).get(),r[n],e)}},{"../components/color":304,"../components/drawing":325,"../constants/xmlns_namespaces":405,"../lib":426,"../lib/events":418,"../lib/queue":441,"../lib/svg_text_utils":450,"../plots/cartesian/axes":473,"../plots/cartesian/constants":479,"../plots/cartesian/graph_interact":482,"../plots/cartesian/select":490,"../plots/plots":515,"../plots/polar/legacy":518,"../registry":524,"./edit_types":456,"./helpers":457,"./manage_arrays":459,"./plot_config":461,"./plot_schema":462,"./subroutines":464,d3:74,"fast-isnumeric":145,"has-hover":229}],461:[function(t,e,r){"use strict";var n={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},i={};!function t(e,r){for(var n in e){var i=e[n];i.valType?r[n]=i.dflt:(r[n]||(r[n]={}),t(i,r[n]))}}(n,i),e.exports={configAttributes:n,dfltConfig:i}},{}],462:[function(t,e,r){"use strict";var n=t("../registry"),i=t("../lib"),o=t("../plots/attributes"),a=t("../plots/layout_attributes"),s=t("../plots/frame_attributes"),l=t("../plots/animation_attributes"),g=t("./plot_config").configAttributes,c=t("../plots/polar/legacy/area_attributes"),u=t("../plots/polar/legacy/axis_attributes"),h=t("./edit_types"),d=i.extendFlat,A=i.extendDeepAll,f=i.isPlainObject,C=i.isArrayOrTypedArray,p=i.nestedProperty,I=i.valObjectMeta,v="_isSubplotObj",m="_isLinkedToArray",y=[v,m,"_arrayAttrRegexps","_deprecated"];function b(t,e,r){if(!t)return!1;if(t._isLinkedToArray)if(x(e[r]))r++;else if(r<e.length)return!1;for(;r<e.length;r++){var n=t[e[r]];if(!f(n))break;if(t=n,r===e.length-1)break;if(t._isLinkedToArray){if(!x(e[++r]))return!1}else if("info_array"===t.valType){var i=e[++r];if(!x(i))return!1;var o=t.items;if(Array.isArray(o)){if(i>=o.length)return!1;if(2===t.dimensions){if(r++,e.length===r)return t;var a=e[r];if(!x(a))return!1;t=o[i][a]}else t=o[i]}else t=o}}return t}function x(t){return t===Math.round(t)&&t>=0}function _(t){return function(t){r.crawl(t,function(t,e,n){r.isValObject(t)?"data_array"===t.valType?(t.role="data",n[e+"src"]={valType:"string",editType:"none"}):!0===t.arrayOk&&(n[e+"src"]={valType:"string",editType:"none"}):f(t)&&(t.role="object")})}(t),function(t){r.crawl(t,function(t,e,r){if(!t)return;var n=t[m];if(!n)return;delete t[m],r[e]={items:{}},r[e].items[n]=t,r[e].role="object"})}(t),function(t){!function t(e){for(var r in e)if(f(e[r]))t(e[r]);else if(Array.isArray(e[r]))for(var n=0;n<e[r].length;n++)t(e[r][n]);else e[r]instanceof RegExp&&(e[r]=e[r].toString())}(t)}(t),t}function w(t,e,r){var n=p(t,r),i=A({},e.layoutAttributes);i[v]=!0,n.set(i)}function k(t,e,r){var n=p(t,r);n.set(A(n.get()||{},e))}r.IS_SUBPLOT_OBJ=v,r.IS_LINKED_TO_ARRAY=m,r.DEPRECATED="_deprecated",r.UNDERSCORE_ATTRS=y,r.get=function(){var t={};n.allTypes.concat("area").forEach(function(e){t[e]=function(t){var e,i;"area"===t?(e={attributes:c},i={}):(e=n.modules[t]._module,i=e.basePlotModule);var a={type:null},s=A({},o),l=A({},e.attributes);r.crawl(l,function(t,e,r,n,i){p(s,i).set(void 0),void 0===t&&p(l,i).set(void 0)}),A(a,s),n.traceIs(t,"noOpacity")&&delete a.opacity;n.traceIs(t,"showLegend")||(delete a.showlegend,delete a.legendgroup);n.traceIs(t,"noHover")&&(delete a.hoverinfo,delete a.hoverlabel);e.selectPoints||delete a.selectedpoints;A(a,l),i.attributes&&A(a,i.attributes);a.type=t;var g={meta:e.meta||{},categories:e.categories||{},animatable:Boolean(e.animatable),type:t,attributes:_(a)};if(e.layoutAttributes){var u={};A(u,e.layoutAttributes),g.layoutAttributes=_(u)}e.animatable||r.crawl(g,function(t){r.isValObject(t)&&"anim"in t&&delete t.anim});return g}(e)});var e,i={};return Object.keys(n.transformsRegistry).forEach(function(t){i[t]=function(t){var e=n.transformsRegistry[t],r=A({},e.attributes);return Object.keys(n.componentsRegistry).forEach(function(e){var i=n.componentsRegistry[e];i.schema&&i.schema.transforms&&i.schema.transforms[t]&&Object.keys(i.schema.transforms[t]).forEach(function(e){k(r,i.schema.transforms[t][e],e)})}),{attributes:_(r)}}(t)}),{defs:{valObjects:I,metaKeys:y.concat(["description","role","editType","impliedEdits"]),editType:{traces:h.traces,layout:h.layout},impliedEdits:{}},traces:t,layout:function(){var t,e,r={};for(t in A(r,a),n.subplotsRegistry)if((e=n.subplotsRegistry[t]).layoutAttributes)if(Array.isArray(e.attr))for(var i=0;i<e.attr.length;i++)w(r,e,e.attr[i]);else{var o="subplot"===e.attr?e.name:e.attr;w(r,e,o)}for(t in r=function(t){return d(t,{radialaxis:u.radialaxis,angularaxis:u.angularaxis}),d(t,u.layout),t}(r),n.componentsRegistry){var s=(e=n.componentsRegistry[t]).schema;if(s&&(s.subplots||s.layout)){var l=s.subplots;if(l&&l.xaxis&&!l.yaxis)for(var g in l.xaxis)delete r.yaxis[g]}else"colorscale"===e.name?A(r,e.layoutAttributes):e.layoutAttributes&&k(r,e.layoutAttributes,e.name)}return{layoutAttributes:_(r)}}(),transforms:i,frames:(e={frames:A({},s)},_(e),e.frames),animation:_(l),config:_(g)}},r.crawl=function(t,e,n,i){var o=n||0;i=i||"",Object.keys(t).forEach(function(n){var a=t[n];if(-1===y.indexOf(n)){var s=(i?i+".":"")+n;e(a,n,t,o,s),r.isValObject(a)||f(a)&&"impliedEdits"!==n&&r.crawl(a,e,o+1,s)}})},r.isValObject=function(t){return t&&void 0!==t.valType},r.findArrayAttributes=function(t){var e,n,i=[],a=[],s=[];function l(t,r,o,l){a=a.slice(0,l).concat([r]),s=s.slice(0,l).concat([t&&t._isLinkedToArray]),t&&("data_array"===t.valType||!0===t.arrayOk)&&!("colorbar"===a[l-1]&&("ticktext"===r||"tickvals"===r))&&function t(e,r,o){var l=e[a[r]];var g=o+a[r];if(r===a.length-1)C(l)&&i.push(n+g);else if(s[r]){if(Array.isArray(l))for(var c=0;c<l.length;c++)f(l[c])&&t(l[c],r+1,g+"["+c+"].")}else f(l)&&t(l,r+1,g+".")}(e,0,"")}e=t,n="",r.crawl(o,l),t._module&&t._module.attributes&&r.crawl(t._module.attributes,l);var g=t.transforms;if(g)for(var c=0;c<g.length;c++){var u=g[c],h=u._module;h&&(n="transforms["+c+"].",e=u,r.crawl(h.attributes,l))}return i},r.getTraceValObject=function(t,e){var r,i,a=e[0],s=1;if("transforms"===a){if(1===e.length)return o.transforms;var l=t.transforms;if(!Array.isArray(l)||!l.length)return!1;var g=e[1];if(!x(g)||g>=l.length)return!1;i=(r=(n.transformsRegistry[l[g].type]||{}).attributes)&&r[e[2]],s=3}else if("area"===t.type)i=c[a];else{var u=t._module;if(u||(u=(n.modules[t.type||o.type.dflt]||{})._module),!u)return!1;if(!(i=(r=u.attributes)&&r[a])){var h=u.basePlotModule;h&&h.attributes&&(i=h.attributes[a])}i||(i=o[a])}return b(i,e,s)},r.getLayoutValObject=function(t,e){return b(function(t,e){var r,i,o,s,l=t._basePlotModules;if(l){var g;for(r=0;r<l.length;r++){if((o=l[r]).attrRegex&&o.attrRegex.test(e)){if(o.layoutAttrOverrides)return o.layoutAttrOverrides;!g&&o.layoutAttributes&&(g=o.layoutAttributes)}var c=o.baseLayoutAttrOverrides;if(c&&e in c)return c[e]}if(g)return g}var h=t._modules;if(h)for(r=0;r<h.length;r++)if((s=h[r].layoutAttributes)&&e in s)return s[e];for(i in n.componentsRegistry){if("colorscale"===(o=n.componentsRegistry[i]).name&&0===e.indexOf("coloraxis"))return o.layoutAttributes[e];if(!o.schema&&e===o.name)return o.layoutAttributes}if(e in a)return a[e];if("radialaxis"===e||"angularaxis"===e)return u[e];return u.layout[e]||!1}(t,e[0]),e,1)}},{"../lib":426,"../plots/animation_attributes":468,"../plots/attributes":470,"../plots/frame_attributes":500,"../plots/layout_attributes":513,"../plots/polar/legacy/area_attributes":516,"../plots/polar/legacy/axis_attributes":517,"../registry":524,"./edit_types":456,"./plot_config":461}],463:[function(t,e,r){"use strict";var n=t("../lib"),i=t("../plots/attributes"),o="templateitemname",a={name:{valType:"string",editType:"none"}};function s(t){return t&&"string"==typeof t}function l(t){var e=t.length-1;return"s"!==t.charAt(e)&&n.warn("bad argument to arrayDefaultKey: "+t),t.substr(0,t.length-1)+"defaults"}a[o]={valType:"string",editType:"calc"},r.templatedArray=function(t,e){return e._isLinkedToArray=t,e.name=a.name,e[o]=a[o],e},r.traceTemplater=function(t){var e,r,o={};for(e in t)r=t[e],Array.isArray(r)&&r.length&&(o[e]=0);return{newTrace:function(a){var s={type:e=n.coerce(a,{},i,"type"),_template:null};if(e in o){r=t[e];var l=o[e]%r.length;o[e]++,s._template=r[l]}return s}}},r.newContainer=function(t,e,r){var i=t._template,o=i&&(i[e]||r&&i[r]);return n.isPlainObject(o)||(o=null),t[e]={_template:o}},r.arrayTemplater=function(t,e,r){var n=t._template,i=n&&n[l(e)],a=n&&n[e];Array.isArray(a)&&a.length||(a=[]);var g={};return{newItem:function(t){var e={name:t.name,_input:t},n=e[o]=t[o];if(!s(n))return e._template=i,e;for(var l=0;l<a.length;l++){var c=a[l];if(c.name===n)return g[n]=1,e._template=c,e}return e[r]=t[r]||!1,e._template=!1,e},defaultItems:function(){for(var t=[],e=0;e<a.length;e++){var r=a[e],n=r.name;if(s(n)&&!g[n]){var i={_template:r,name:n,_input:{_templateitemname:n}};i[o]=r[o],t.push(i),g[n]=1}}return t}}},r.arrayDefaultKey=l,r.arrayEditor=function(t,e,r){var i=(n.nestedProperty(t,e).get()||[]).length,a=r._index,s=a>=i&&(r._input||{})._templateitemname;s&&(a=i);var l,g=e+"["+a+"]";function c(){l={},s&&(l[g]={},l[g][o]=s)}function u(t,e){s?n.nestedProperty(l[g],t).set(e):l[g+"."+t]=e}function h(){var t=l;return c(),t}return c(),{modifyBase:function(t,e){l[t]=e},modifyItem:u,getUpdateObj:h,applyUpdate:function(e,r){e&&u(e,r);var i=h();for(var o in i)n.nestedProperty(t,o).set(i[o])}}}},{"../lib":426,"../plots/attributes":470}],464:[function(t,e,r){"use strict";var n=t("d3"),i=t("../registry"),o=t("../plots/plots"),a=t("../lib"),s=t("../lib/clear_gl_canvases"),l=t("../components/color"),g=t("../components/drawing"),c=t("../components/titles"),u=t("../components/modebar"),h=t("../plots/cartesian/axes"),d=t("../constants/alignment"),A=t("../plots/cartesian/constraints"),f=A.enforce,C=A.clean,p=t("../plots/cartesian/autorange").doAutoRange,I="start",v="middle",m="end";function y(t,e,r){for(var n=0;n<r.length;n++){var i=r[n][0],o=r[n][1];if(!(i[0]>=t[1]||i[1]<=t[0])&&(o[0]<e[1]&&o[1]>e[0]))return!0}return!1}function b(t){var e,i,s,c,A,f,C=t._fullLayout,p=C._size,I=p.p,v=h.list(t,"",!0);if(C._paperdiv.style({width:t._context.responsive&&C.autosize&&!t._context._hasZeroWidth&&!t.layout.width?"100%":C.width+"px",height:t._context.responsive&&C.autosize&&!t._context._hasZeroHeight&&!t.layout.height?"100%":C.height+"px"}).selectAll(".main-svg").call(g.setSize,C.width,C.height),t._context.setBackground(t,C.paper_bgcolor),r.drawMainTitle(t),u.manage(t),!C._has("cartesian"))return o.previousPromises(t);function m(t,e,r){var n=t._lw/2;return"x"===t._id.charAt(0)?e?"top"===r?e._offset-I-n:e._offset+e._length+I+n:p.t+p.h*(1-(t.position||0))+n%1:e?"right"===r?e._offset+e._length+I+n:e._offset-I-n:p.l+p.w*(t.position||0)+n%1}for(e=0;e<v.length;e++){var b=(c=v[e])._anchorAxis;c._linepositions={},c._lw=g.crispRound(t,c.linewidth,1),c._mainLinePosition=m(c,b,c.side),c._mainMirrorPosition=c.mirror&&b?m(c,b,d.OPPOSITE_SIDE[c.side]):null}var _=[],k=[],T=[],M=1===l.opacity(C.paper_bgcolor)&&1===l.opacity(C.plot_bgcolor)&&C.paper_bgcolor===C.plot_bgcolor;for(i in C._plots)if((s=C._plots[i]).mainplot)s.bg&&s.bg.remove(),s.bg=void 0;else{var E=s.xaxis.domain,O=s.yaxis.domain,S=s.plotgroup;if(y(E,O,T)){var R=S.node(),D=s.bg=a.ensureSingle(S,"rect","bg");R.insertBefore(D.node(),R.childNodes[0]),k.push(i)}else S.select("rect.bg").remove(),T.push([E,O]),M||(_.push(i),k.push(i))}var L,P,N,z,F,B,j,V,G,U,Z,H,W,Y=C._bgLayer.selectAll(".bg").data(_);for(Y.enter().append("rect").classed("bg",!0),Y.exit().remove(),Y.each(function(t){C._plots[t].bg=n.select(this)}),e=0;e<k.length;e++)s=C._plots[k[e]],A=s.xaxis,f=s.yaxis,s.bg&&s.bg.call(g.setRect,A._offset-I,f._offset-I,A._length+2*I,f._length+2*I).call(l.fill,C.plot_bgcolor).style("stroke-width",0);if(!C._hasOnlyLargeSploms)for(i in C._plots){s=C._plots[i],A=s.xaxis,f=s.yaxis;var X,q,Q=s.clipId="clip"+C._uid+i+"plot",K=a.ensureSingleById(C._clips,"clipPath",Q,function(t){t.classed("plotclip",!0).append("rect")});s.clipRect=K.select("rect").attr({width:A._length,height:f._length}),g.setTranslate(s.plot,A._offset,f._offset),s._hasClipOnAxisFalse?(X=null,q=Q):(X=Q,q=null),g.setClipUrl(s.plot,X,t),s.layerClipId=q}function J(t){return"M"+L+","+t+"H"+P}function $(t){return"M"+A._offset+","+t+"h"+A._length}function tt(t){return"M"+t+","+V+"V"+j}function et(t){return"M"+t+","+f._offset+"v"+f._length}function rt(t,e,r){if(!t.showline||i!==t._mainSubplot)return"";if(!t._anchorAxis)return r(t._mainLinePosition);var n=e(t._mainLinePosition);return t.mirror&&(n+=e(t._mainMirrorPosition)),n}for(i in C._plots){s=C._plots[i],A=s.xaxis,f=s.yaxis;var nt="M0,0";x(A,i)&&(F=w(A,"left",f,v),L=A._offset-(F?I+F:0),B=w(A,"right",f,v),P=A._offset+A._length+(B?I+B:0),N=m(A,f,"bottom"),z=m(A,f,"top"),!(W=!A._anchorAxis||i!==A._mainSubplot)||"allticks"!==A.mirror&&"all"!==A.mirror||(A._linepositions[i]=[N,z]),nt=rt(A,J,$),W&&A.showline&&("all"===A.mirror||"allticks"===A.mirror)&&(nt+=J(N)+J(z)),s.xlines.style("stroke-width",A._lw+"px").call(l.stroke,A.showline?A.linecolor:"rgba(0,0,0,0)")),s.xlines.attr("d",nt);var it="M0,0";x(f,i)&&(Z=w(f,"bottom",A,v),j=f._offset+f._length+(Z?I:0),H=w(f,"top",A,v),V=f._offset-(H?I:0),G=m(f,A,"left"),U=m(f,A,"right"),!(W=!f._anchorAxis||i!==f._mainSubplot)||"allticks"!==f.mirror&&"all"!==f.mirror||(f._linepositions[i]=[G,U]),it=rt(f,tt,et),W&&f.showline&&("all"===f.mirror||"allticks"===f.mirror)&&(it+=tt(G)+tt(U)),s.ylines.style("stroke-width",f._lw+"px").call(l.stroke,f.showline?f.linecolor:"rgba(0,0,0,0)")),s.ylines.attr("d",it)}return h.makeClipPaths(t),o.previousPromises(t)}function x(t,e){return(t.ticks||t.showline)&&(e===t._mainSubplot||"all"===t.mirror||"allticks"===t.mirror)}function _(t,e,r){if(!r.showline||!r._lw)return!1;if("all"===r.mirror||"allticks"===r.mirror)return!0;var n=r._anchorAxis;if(!n)return!1;var i=d.FROM_BL[e];return r.side===e?n.domain[i]===t.domain[i]:r.mirror&&n.domain[1-i]===t.domain[1-i]}function w(t,e,r,n){if(_(t,e,r))return r._lw;for(var i=0;i<n.length;i++){var o=n[i];if(o._mainAxis===r._mainAxis&&_(t,e,o))return o._lw}return 0}r.layoutStyles=function(t){return a.syncOrAsync([o.doAutoMargin,b],t)},r.drawMainTitle=function(t){var e=t._fullLayout,r=function(t){var e=t.title,r=v;a.isRightAnchor(e)?r=m:a.isLeftAnchor(e)&&(r=I);return r}(e),n=function(t){var e=t.title,r="0em";a.isTopAnchor(e)?r=d.CAP_SHIFT+"em":a.isMiddleAnchor(e)&&(r=d.MID_SHIFT+"em");return r}(e);c.draw(t,"gtitle",{propContainer:e,propName:"title.text",placeholder:e._dfltTitle.plot,attributes:{x:function(t,e){var r=t.title,n=t._size,i=0;e===I?i=r.pad.l:e===m&&(i=-r.pad.r);switch(r.xref){case"paper":return n.l+n.w*r.x+i;case"container":default:return t.width*r.x+i}}(e,r),y:function(t,e){var r=t.title,n=t._size,i=0;"0em"!==e&&e?e===d.CAP_SHIFT+"em"&&(i=r.pad.t):i=-r.pad.b;if("auto"===r.y)return n.t/2;switch(r.yref){case"paper":return n.t+n.h-n.h*r.y+i;case"container":default:return t.height-t.height*r.y+i}}(e,n),"text-anchor":r,dy:n}})},r.doTraceStyle=function(t){var e,n=t.calcdata,a=[];for(e=0;e<n.length;e++){var l=n[e],g=l[0]||{},c=g.trace||{},u=c._module||{},h=u.arraysToCalcdata;h&&h(l,c);var d=u.editStyle;d&&a.push({fn:d,cd0:g})}if(a.length){for(e=0;e<a.length;e++){var A=a[e];A.fn(t,A.cd0)}s(t),r.redrawReglTraces(t)}return o.style(t),i.getComponentMethod("legend","draw")(t),o.previousPromises(t)},r.doColorBars=function(t){return i.getComponentMethod("colorbar","draw")(t),o.previousPromises(t)},r.layoutReplot=function(t){var e=t.layout;return t.layout=void 0,i.call("plot",t,"",e)},r.doLegend=function(t){return i.getComponentMethod("legend","draw")(t),o.previousPromises(t)},r.doTicksRelayout=function(t){return h.draw(t,"redraw"),t._fullLayout._hasOnlyLargeSploms&&(i.subplotsRegistry.splom.updateGrid(t),s(t),r.redrawReglTraces(t)),r.drawMainTitle(t),o.previousPromises(t)},r.doModeBar=function(t){var e=t._fullLayout;u.manage(t);for(var r=0;r<e._basePlotModules.length;r++){var n=e._basePlotModules[r].updateFx;n&&n(t)}return o.previousPromises(t)},r.doCamera=function(t){for(var e=t._fullLayout,r=e._subplots.gl3d,n=0;n<r.length;n++){var i=e[r[n]];i._scene.setViewport(i)}},r.drawData=function(t){var e=t._fullLayout;s(t);for(var n=e._basePlotModules,a=0;a<n.length;a++)n[a].plot(t);return r.redrawReglTraces(t),o.style(t),i.getComponentMethod("shapes","draw")(t),i.getComponentMethod("annotations","draw")(t),i.getComponentMethod("images","draw")(t),e._replotting=!1,o.previousPromises(t)},r.redrawReglTraces=function(t){var e=t._fullLayout;if(e._has("regl")){var r,n,i=t._fullData,o=[],s=[];for(e._hasOnlyLargeSploms&&e._splomGrid.draw(),r=0;r<i.length;r++){var l=i[r];!0===l.visible&&0!==l._length&&("splom"===l.type?e._splomScenes[l.uid].draw():"scattergl"===l.type?a.pushUnique(o,l.xaxis+l.yaxis):"scatterpolargl"===l.type&&a.pushUnique(s,l.subplot))}for(r=0;r<o.length;r++)(n=e._plots[o[r]])._scene&&n._scene.draw();for(r=0;r<s.length;r++)(n=e[s[r]]._subplot)._scene&&n._scene.draw()}},r.doAutoRangeAndConstraints=function(t){for(var e,r,n=t._fullLayout,i=h.list(t,"",!0),o=n._axisMatchGroups||[],s={},l=0;l<i.length;l++)e=i[l],C(t,e),p(t,e),s[e._id]=1;f(t);t:for(var g=0;g<o.length;g++){var c,u=o[g],d=null;for(c in u)if(s[(e=h.getFromId(t,c))._id]){if(!1===e.autorange)continue t;r=a.simpleMap(e.range,e.r2l),d?d[0]<d[1]?(d[0]=Math.min(d[0],r[0]),d[1]=Math.max(d[1],r[1])):(d[0]=Math.max(d[0],r[0]),d[1]=Math.min(d[1],r[1])):d=r}for(c in u)(e=h.getFromId(t,c)).range=a.simpleMap(d,e.l2r),e._input.range=e.range.slice(),e.setScale()}},r.finalDraw=function(t){i.getComponentMethod("rangeslider","draw")(t),i.getComponentMethod("rangeselector","draw")(t)},r.drawMarginPushers=function(t){i.getComponentMethod("legend","draw")(t),i.getComponentMethod("rangeselector","draw")(t),i.getComponentMethod("sliders","draw")(t),i.getComponentMethod("updatemenus","draw")(t),i.getComponentMethod("colorbar","draw")(t)}},{"../components/color":304,"../components/drawing":325,"../components/modebar":363,"../components/titles":392,"../constants/alignment":399,"../lib":426,"../lib/clear_gl_canvases":413,"../plots/cartesian/autorange":472,"../plots/cartesian/axes":473,"../plots/cartesian/constraints":480,"../plots/plots":515,"../registry":524,d3:74}],465:[function(t,e,r){"use strict";var n=t("../lib"),i=n.isPlainObject,o=t("./plot_schema"),a=t("../plots/plots"),s=t("../plots/attributes"),l=t("./plot_template"),g=t("./plot_config").dfltConfig;function c(t,e){t=n.extendDeep({},t);var r,o,a=Object.keys(t).sort();function s(e,r,n){if(i(r)&&i(e))c(e,r);else if(Array.isArray(r)&&Array.isArray(e)){var a=l.arrayTemplater({_template:t},n);for(o=0;o<r.length;o++){var s=r[o],g=a.newItem(s)._template;g&&c(g,s)}var u=a.defaultItems();for(o=0;o<u.length;o++)r.push(u[o]._template);for(o=0;o<r.length;o++)delete r[o].templateitemname}}for(r=0;r<a.length;r++){var g=a[r],h=t[g];if(g in e?s(h,e[g],g):e[g]=h,u(g)===g)for(var d in e){var A=u(d);d===A||A!==g||d in t||s(h,e[d],g)}}}function u(t){return t.replace(/[0-9]+$/,"")}function h(t,e,r,o,a){var s=a&&r(a);for(var g in t){var c=t[g],A=d(t,g,o),f=d(t,g,a),C=r(f);if(!C){var p=u(g);p!==g&&(C=r(f=d(t,p,a)))}if((!s||s!==C)&&!(!C||C._noTemplating||"data_array"===C.valType||C.arrayOk&&Array.isArray(c)))if(!C.valType&&i(c))h(c,e,r,A,f);else if(C._isLinkedToArray&&Array.isArray(c))for(var I=!1,v=0,m={},y=0;y<c.length;y++){var b=c[y];if(i(b)){var x=b.name;if(x)m[x]||(h(b,e,r,d(c,v,A),d(c,v,f)),v++,m[x]=1);else if(!I){var _=d(t,l.arrayDefaultKey(g),o),w=d(c,v,A);h(b,e,r,w,d(c,v,f));var k=n.nestedProperty(e,w);n.nestedProperty(e,_).set(k.get()),k.set(null),I=!0}}}else{n.nestedProperty(e,A).set(c)}}}function d(t,e,r){return r?Array.isArray(t)?r+"["+e+"]":r+"."+e:e}function A(t){for(var e=0;e<t.length;e++)if(i(t[e]))return!0}function f(t){var e;switch(t.code){case"data":e="The template has no key data.";break;case"layout":e="The template has no key layout.";break;case"missing":e=t.path?"There are no templates for item "+t.path+" with name "+t.templateitemname:"There are no templates for trace "+t.index+", of type "+t.traceType+".";break;case"unused":e=t.path?"The template item at "+t.path+" was not used in constructing the plot.":t.dataCount?"Some of the templates of type "+t.traceType+" were not used. The template has "+t.templateCount+" traces, the data only has "+t.dataCount+" of this type.":"The template has "+t.templateCount+" traces of type "+t.traceType+" but there are none in the data.";break;case"reused":e="Some of the templates of type "+t.traceType+" were used more than once. The template has "+t.templateCount+" traces, the data has "+t.dataCount+" of this type."}return t.msg=e,t}r.makeTemplate=function(t){t=n.isPlainObject(t)?t:n.getGraphDiv(t),t=n.extendDeep({_context:g},{data:t.data,layout:t.layout}),a.supplyDefaults(t);var e=t.data||[],r=t.layout||{};r._basePlotModules=t._fullLayout._basePlotModules,r._modules=t._fullLayout._modules;var l={data:{},layout:{}};e.forEach(function(t){var e={};h(t,e,function(t,e){return o.getTraceValObject(t,n.nestedProperty({},e).parts)}.bind(null,t));var r=n.coerce(t,{},s,"type"),i=l.data[r];i||(i=l.data[r]=[]),i.push(e)}),h(r,l.layout,function(t,e){return o.getLayoutValObject(t,n.nestedProperty({},e).parts)}.bind(null,r)),delete l.layout.template;var u=r.template;if(i(u)){var d,A,f,C,p,I,v=u.layout;i(v)&&c(v,l.layout);var m=u.data;if(i(m)){for(A in l.data)if(f=m[A],Array.isArray(f)){for(I=(p=l.data[A]).length,C=f.length,d=0;d<I;d++)c(f[d%C],p[d]);for(d=I;d<C;d++)p.push(n.extendDeep({},f[d]))}for(A in m)A in l.data||(l.data[A]=n.extendDeep([],m[A]))}}return l},r.validateTemplate=function(t,e){var r=n.extendDeep({},{_context:g,data:t.data,layout:t.layout}),o=r.layout||{};i(e)||(e=o.template||{});var s=e.layout,l=e.data,c=[];r.layout=o,r.layout.template=e,a.supplyDefaults(r);var h=r._fullLayout,C=r._fullData,p={};if(i(s)?(!function t(e,r){for(var n in e)if("_"!==n.charAt(0)&&i(e[n])){var o,a=u(n),s=[];for(o=0;o<r.length;o++)s.push(d(e,n,r[o])),a!==n&&s.push(d(e,a,r[o]));for(o=0;o<s.length;o++)p[s[o]]=1;t(e[n],s)}}(h,["layout"]),function t(e,r){for(var n in e)if(-1===n.indexOf("defaults")&&i(e[n])){var o=d(e,n,r);p[o]?t(e[n],o):c.push({code:"unused",path:o})}}(s,"layout")):c.push({code:"layout"}),i(l)){for(var I,v={},m=0;m<C.length;m++){var y=C[m];v[I=y.type]=(v[I]||0)+1,y._fullInput._template||c.push({code:"missing",index:y._fullInput.index,traceType:I})}for(I in l){var b=l[I].length,x=v[I]||0;b>x?c.push({code:"unused",traceType:I,templateCount:b,dataCount:x}):x>b&&c.push({code:"reused",traceType:I,templateCount:b,dataCount:x})}}else c.push({code:"data"});if(function t(e,r){for(var n in e)if("_"!==n.charAt(0)){var o=e[n],a=d(e,n,r);i(o)?(Array.isArray(e)&&!1===o._template&&o.templateitemname&&c.push({code:"missing",path:a,templateitemname:o.templateitemname}),t(o,a)):Array.isArray(o)&&A(o)&&t(o,a)}}({data:C,layout:h},""),c.length)return c.map(f)}},{"../lib":426,"../plots/attributes":470,"../plots/plots":515,"./plot_config":461,"./plot_schema":462,"./plot_template":463}],466:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("./plot_api"),o=t("../plots/plots"),a=t("../lib"),s=t("../snapshot/helpers"),l=t("../snapshot/tosvg"),g=t("../snapshot/svgtoimg"),c=t("../version").version,u={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};e.exports=function(t,e){var r,h,d,A;function f(t){return!(t in e)||a.validate(e[t],u[t])}if(e=e||{},a.isPlainObject(t)?(r=t.data||[],h=t.layout||{},d=t.config||{},A={}):(t=a.getGraphDiv(t),r=a.extendDeep([],t.data),h=a.extendDeep({},t.layout),d=t._context,A=t._fullLayout||{}),!f("width")&&null!==e.width||!f("height")&&null!==e.height)throw new Error("Height and width should be pixel values.");if(!f("format"))throw new Error("Image format is not jpeg, png, svg or webp.");var C={};function p(t,r){return a.coerce(e,C,u,t,r)}var I=p("format"),v=p("width"),m=p("height"),y=p("scale"),b=p("setBackground"),x=p("imageDataOnly"),_=document.createElement("div");_.style.position="absolute",_.style.left="-5000px",document.body.appendChild(_);var w=a.extendFlat({},h);v?w.width=v:null===e.width&&n(A.width)&&(w.width=A.width),m?w.height=m:null===e.height&&n(A.height)&&(w.height=A.height);var k=a.extendFlat({},d,{_exportedPlot:!0,staticPlot:!0,setBackground:b}),T=s.getRedrawFunc(_);function M(){return new Promise(function(t){setTimeout(t,s.getDelay(_._fullLayout))})}function E(){return new Promise(function(t,e){var r=l(_,I,y),n=_._fullLayout.width,u=_._fullLayout.height;function h(){i.purge(_),document.body.removeChild(_)}if("full-json"===I){var d=o.graphJson(_,!1,"keepdata","object",!0,!0);return d.version=c,d=JSON.stringify(d),h(),t(x?d:s.encodeJSON(d))}if(h(),"svg"===I)return t(x?r:s.encodeSVG(r));var A=document.createElement("canvas");A.id=a.randstr(),g({format:I,width:n,height:u,scale:y,canvas:A,svg:r,promise:!0}).then(t).catch(e)})}return new Promise(function(t,e){i.plot(_,r,w,k).then(T).then(M).then(E).then(function(e){t(function(t){return x?t.replace(s.IMAGE_URL_PREFIX,""):t}(e))}).catch(function(t){e(t)})})}},{"../lib":426,"../plots/plots":515,"../snapshot/helpers":528,"../snapshot/svgtoimg":530,"../snapshot/tosvg":532,"../version":636,"./plot_api":460,"fast-isnumeric":145}],467:[function(t,e,r){"use strict";var n=t("../lib"),i=t("../plots/plots"),o=t("./plot_schema"),a=t("./plot_config").dfltConfig,s=n.isPlainObject,l=Array.isArray,g=n.isArrayOrTypedArray;function c(t,e,r,i,o,a){a=a||[];for(var u=Object.keys(t),h=0;h<u.length;h++){var C=u[h];if("transforms"!==C){var p=a.slice();p.push(C);var I=t[C],v=e[C],m=f(r,C),y=(m||{}).valType,b="info_array"===y,x="colorscale"===y,_=(m||{}).items;if(A(r,C))if(s(I)&&s(v)&&"any"!==y)c(I,v,m,i,o,p);else if(b&&l(I)){I.length>v.length&&i.push(d("unused",o,p.concat(v.length)));var w,k,T,M,E,O=v.length,S=Array.isArray(_);if(S&&(O=Math.min(O,_.length)),2===m.dimensions)for(k=0;k<O;k++)if(l(I[k])){I[k].length>v[k].length&&i.push(d("unused",o,p.concat(k,v[k].length)));var R=v[k].length;for(w=0;w<(S?Math.min(R,_[k].length):R);w++)T=S?_[k][w]:_,M=I[k][w],E=v[k][w],n.validate(M,T)?E!==M&&E!==+M&&i.push(d("dynamic",o,p.concat(k,w),M,E)):i.push(d("value",o,p.concat(k,w),M))}else i.push(d("array",o,p.concat(k),I[k]));else for(k=0;k<O;k++)T=S?_[k]:_,M=I[k],E=v[k],n.validate(M,T)?E!==M&&E!==+M&&i.push(d("dynamic",o,p.concat(k),M,E)):i.push(d("value",o,p.concat(k),M))}else if(m.items&&!b&&l(I)){var D,L,P=_[Object.keys(_)[0]],N=[];for(D=0;D<v.length;D++){var z=v[D]._index||D;if((L=p.slice()).push(z),s(I[z])&&s(v[D])){N.push(z);var F=I[z],B=v[D];s(F)&&!1!==F.visible&&!1===B.visible?i.push(d("invisible",o,L)):c(F,B,P,i,o,L)}}for(D=0;D<I.length;D++)(L=p.slice()).push(D),s(I[D])?-1===N.indexOf(D)&&i.push(d("unused",o,L)):i.push(d("object",o,L,I[D]))}else!s(I)&&s(v)?i.push(d("object",o,p,I)):g(I)||!g(v)||b||x?C in e?n.validate(I,m)?"enumerated"===m.valType&&(m.coerceNumber&&I!==+v||I!==v)&&i.push(d("dynamic",o,p,I,v)):i.push(d("value",o,p,I)):i.push(d("unused",o,p,I)):i.push(d("array",o,p,I));else i.push(d("schema",o,p))}}return i}e.exports=function(t,e){var r,g,u=o.get(),h=[],A={_context:n.extendFlat({},a)};l(t)?(A.data=n.extendDeep([],t),r=t):(A.data=[],r=[],h.push(d("array","data"))),s(e)?(A.layout=n.extendDeep({},e),g=e):(A.layout={},g={},arguments.length>1&&h.push(d("object","layout"))),i.supplyDefaults(A);for(var f=A._fullData,C=r.length,p=0;p<C;p++){var I=r[p],v=["data",p];if(s(I)){var m=f[p],y=m.type,b=u.traces[y].attributes;b.type={valType:"enumerated",values:[y]},!1===m.visible&&!1!==I.visible&&h.push(d("invisible",v)),c(I,m,b,h,v);var x=I.transforms,_=m.transforms;if(x){l(x)||h.push(d("array",v,["transforms"])),v.push("transforms");for(var w=0;w<x.length;w++){var k=["transforms",w],T=x[w].type;if(s(x[w])){var M=u.transforms[T]?u.transforms[T].attributes:{};M.type={valType:"enumerated",values:Object.keys(u.transforms)},c(x[w],_[w],M,h,v,k)}else h.push(d("object",v,k))}}}else h.push(d("object",v))}return c(g,A._fullLayout,function(t,e){for(var r=t.layout.layoutAttributes,i=0;i<e.length;i++){var o=e[i],a=t.traces[o.type],s=a.layoutAttributes;s&&(o.subplot?n.extendFlat(r[a.attributes.subplot.dflt],s):n.extendFlat(r,s))}return r}(u,f),h,"layout"),0===h.length?void 0:h};var u={object:function(t,e){return("layout"===t&&""===e?"The layout argument":"data"===t[0]&&""===e?"Trace "+t[1]+" in the data argument":h(t)+"key "+e)+" must be linked to an object container"},array:function(t,e){return("data"===t?"The data argument":h(t)+"key "+e)+" must be linked to an array container"},schema:function(t,e){return h(t)+"key "+e+" is not part of the schema"},unused:function(t,e,r){var n=s(r)?"container":"key";return h(t)+n+" "+e+" did not get coerced"},dynamic:function(t,e,r,n){return[h(t)+"key",e,"(set to '"+r+"')","got reset to","'"+n+"'","during defaults."].join(" ")},invisible:function(t,e){return(e?h(t)+"item "+e:"Trace "+t[1])+" got defaulted to be not visible"},value:function(t,e,r){return[h(t)+"key "+e,"is set to an invalid value ("+r+")"].join(" ")}};function h(t){return l(t)?"In data trace "+t[1]+", ":"In "+t+", "}function d(t,e,r,i,o){var a,s;r=r||"",l(e)?(a=e[0],s=e[1]):(a=e,s=null);var g=function(t){if(!l(t))return String(t);for(var e="",r=0;r<t.length;r++){var n=t[r];"number"==typeof n?e=e.substr(0,e.length-1)+"["+n+"]":e+=n,r<t.length-1&&(e+=".")}return e}(r),c=u[t](e,g,i,o);return n.log(c),{code:t,container:a,trace:s,path:r,astr:g,msg:c}}function A(t,e){var r=p(e),n=r.keyMinusId,i=r.id;return!!(n in t&&t[n]._isSubplotObj&&i)||e in t}function f(t,e){return e in t?t[e]:t[p(e).keyMinusId]}var C=n.counterRegex("([a-z]+)");function p(t){var e=t.match(C);return{keyMinusId:e&&e[1],id:e&&e[2]}}},{"../lib":426,"../plots/plots":515,"./plot_config":461,"./plot_schema":462}],468:[function(t,e,r){"use strict";e.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],469:[function(t,e,r){"use strict";var n=t("../lib"),i=t("../plot_api/plot_template");e.exports=function(t,e,r){var o,a,s=r.name,l=r.inclusionAttr||"visible",g=e[s],c=n.isArrayOrTypedArray(t[s])?t[s]:[],u=e[s]=[],h=i.arrayTemplater(e,s,l);for(o=0;o<c.length;o++){var d=c[o];n.isPlainObject(d)?a=h.newItem(d):(a=h.newItem({}))[l]=!1,a._index=o,!1!==a[l]&&r.handleItemDefaults(d,a,e,r),u.push(a)}var A=h.defaultItems();for(o=0;o<A.length;o++)(a=A[o])._index=u.length,r.handleItemDefaults({},a,e,r,{}),u.push(a);if(n.isArrayOrTypedArray(g)){var f=Math.min(g.length,u.length);for(o=0;o<f;o++)n.relinkPrivateKeys(u[o],g[o])}return u}},{"../lib":426,"../plot_api/plot_template":463}],470:[function(t,e,r){"use strict";var n=t("../components/fx/attributes");e.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:n.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":334}],471:[function(t,e,r){"use strict";e.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],472:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../../lib"),o=t("../../constants/numerical").FP_SAFE,a=t("../../registry");function s(t,e){var r,n,o=[],a=l(e),s=g(t,e),c=s.min,u=s.max;if(0===c.length||0===u.length)return i.simpleMap(e.range,e.r2l);var h=c[0].val,d=u[0].val;for(r=1;r<c.length&&h===d;r++)h=Math.min(h,c[r].val);for(r=1;r<u.length&&h===d;r++)d=Math.max(d,u[r].val);var A=!1;if(e.range){var f=i.simpleMap(e.range,e.r2l);A=f[1]<f[0]}"reversed"===e.autorange&&(A=!0,e.autorange=!0);var C,p,I,v,m,y,b=e.rangemode,x="tozero"===b,_="nonnegative"===b,w=e._length,k=w/10,T=function(t,r){var n=0;if(e.rangebreaks)for(var i=e.locateBreaks(t,r),o=0;o<i.length;o++){var a=i[o];n+=a.max-a.min}return n},M=0;for(r=0;r<c.length;r++)for(C=c[r],n=0;n<u.length;n++)(y=(p=u[n]).val-C.val-T(C.val,p.val))>0&&((m=w-a(C)-a(p))>k?y/m>M&&(I=C,v=p,M=y/m):y/w>M&&(I={val:C.val,pad:0},v={val:p.val,pad:0},M=y/w));if(h===d){var E=h-1,O=h+1;if(x)if(0===h)o=[0,1];else{var S=(h>0?u:c).reduce(function(t,e){return Math.max(t,a(e))},0),R=h/(1-Math.min(.5,S/w));o=h>0?[0,R]:[R,0]}else o=_?[Math.max(0,E),Math.max(1,O)]:[E,O]}else x?(I.val>=0&&(I={val:0,pad:0}),v.val<=0&&(v={val:0,pad:0})):_&&(I.val-M*a(I)<0&&(I={val:0,pad:0}),v.val<=0&&(v={val:1,pad:0})),M=(v.val-I.val-T(C.val,p.val))/(w-a(I)-a(v)),o=[I.val-M*a(I),v.val+M*a(v)];return A&&o.reverse(),i.simpleMap(o,e.l2r||Number)}function l(t){var e=t._length/20;return"domain"===t.constrain&&t._inputDomain&&(e*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(t){return t.pad+(t.extrapad?e:0)}}function g(t,e){var r,n,i,o=e._id,a=t._fullData,s=t._fullLayout,l=[],g=[];function h(t,e){for(r=0;r<e.length;r++){var a=t[e[r]],s=(a._extremes||{})[o];if(!0===a.visible&&s){for(n=0;n<s.min.length;n++)i=s.min[n],c(l,i.val,i.pad,{extrapad:i.extrapad});for(n=0;n<s.max.length;n++)i=s.max[n],u(g,i.val,i.pad,{extrapad:i.extrapad})}}}return h(a,e._traceIndices),h(s.annotations||[],e._annIndices||[]),h(s.shapes||[],e._shapeIndices||[]),{min:l,max:g}}function c(t,e,r,n){h(t,e,r,n,A)}function u(t,e,r,n){h(t,e,r,n,f)}function h(t,e,r,n,i){for(var o=n.tozero,a=n.extrapad,s=!0,l=0;l<t.length&&s;l++){var g=t[l];if(i(g.val,e)&&g.pad>=r&&(g.extrapad||!a)){s=!1;break}i(e,g.val)&&g.pad<=r&&(a||!g.extrapad)&&(t.splice(l,1),l--)}if(s){var c=o&&0===e;t.push({val:e,pad:c?0:r,extrapad:!c&&a})}}function d(t){return n(t)&&Math.abs(t)<o}function A(t,e){return t<=e}function f(t,e){return t>=e}e.exports={getAutoRange:s,makePadFn:l,doAutoRange:function(t,e){if(e.setScale(),e.autorange){e.range=s(t,e),e._r=e.range.slice(),e._rl=i.simpleMap(e._r,e.r2l);var r=e._input,n={};n[e._attr+".range"]=e.range,n[e._attr+".autorange"]=e.autorange,a.call("_storeDirectGUIEdit",t.layout,t._fullLayout._preGUI,n),r.range=e.range.slice(),r.autorange=e.autorange}var o=e._anchorAxis;if(o&&o.rangeslider){var l=o.rangeslider[e._name];l&&"auto"===l.rangemode&&(l.range=s(t,e)),o._input.rangeslider[e._name]=i.extendFlat({},l)}},findExtremes:function(t,e,r){r||(r={});t._m||t.setScale();var i,a,s,l,g,h,A,f,C,p=[],I=[],v=e.length,m=r.padded||!1,y=r.tozero&&("linear"===t.type||"-"===t.type),b="log"===t.type,x=!1,_=r.vpadLinearized||!1;function w(t){if(Array.isArray(t))return x=!0,function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}var k=w((t._m>0?r.ppadplus:r.ppadminus)||r.ppad||0),T=w((t._m>0?r.ppadminus:r.ppadplus)||r.ppad||0),M=w(r.vpadplus||r.vpad),E=w(r.vpadminus||r.vpad);if(!x){if(f=1/0,C=-1/0,b)for(i=0;i<v;i++)(a=e[i])<f&&a>0&&(f=a),a>C&&a<o&&(C=a);else for(i=0;i<v;i++)(a=e[i])<f&&a>-o&&(f=a),a>C&&a<o&&(C=a);e=[f,C],v=2}var O={tozero:y,extrapad:m};function S(r){s=e[r],n(s)&&(h=k(r),A=T(r),_?(l=t.c2l(s)-E(r),g=t.c2l(s)+M(r)):(f=s-E(r),C=s+M(r),b&&f<C/10&&(f=C/10),l=t.c2l(f),g=t.c2l(C)),y&&(l=Math.min(0,l),g=Math.max(0,g)),d(l)&&c(p,l,A,O),d(g)&&u(I,g,h,O))}var R=Math.min(6,v);for(i=0;i<R;i++)S(i);for(i=v-1;i>=R;i--)S(i);return{min:p,max:I,opts:r}},concatExtremes:g}},{"../../constants/numerical":404,"../../lib":426,"../../registry":524,"fast-isnumeric":145}],473:[function(t,e,r){"use strict";var n=t("d3"),i=t("fast-isnumeric"),o=t("../../plots/plots"),a=t("../../registry"),s=t("../../lib"),l=t("../../lib/svg_text_utils"),g=t("../../components/titles"),c=t("../../components/color"),u=t("../../components/drawing"),h=t("./layout_attributes"),d=t("./clean_ticks"),A=t("../../constants/numerical"),f=A.ONEAVGYEAR,C=A.ONEAVGMONTH,p=A.ONEDAY,I=A.ONEHOUR,v=A.ONEMIN,m=A.ONESEC,y=A.MINUS_SIGN,b=A.BADNUM,x=t("../../constants/alignment"),_=x.MID_SHIFT,w=x.CAP_SHIFT,k=x.LINE_SPACING,T=x.OPPOSITE_SIDE,M=e.exports={};M.setConvert=t("./set_convert");var E=t("./axis_autotype"),O=t("./axis_ids");M.id2name=O.id2name,M.name2id=O.name2id,M.cleanId=O.cleanId,M.list=O.list,M.listIds=O.listIds,M.getFromId=O.getFromId,M.getFromTrace=O.getFromTrace;var S=t("./autorange");M.getAutoRange=S.getAutoRange,M.findExtremes=S.findExtremes,M.coerceRef=function(t,e,r,n,i,o){var a=n.charAt(n.length-1),l=r._fullLayout._subplots[a+"axis"],g=n+"ref",c={};return i||(i=l[0]||o),o||(o=i),c[g]={valType:"enumerated",values:l.concat(o?[o]:[]),dflt:i},s.coerce(t,e,c,g)},M.coercePosition=function(t,e,r,n,i,o){var a,l;if("paper"===n||"pixel"===n)a=s.ensureNumber,l=r(i,o);else{var g=M.getFromId(e,n);l=r(i,o=g.fraction2r(o)),a=g.cleanPos}t[i]=a(l)},M.cleanPosition=function(t,e,r){return("paper"===r||"pixel"===r?s.ensureNumber:M.getFromId(e,r).cleanPos)(t)},M.redrawComponents=function(t,e){e=e||M.listIds(t);var r=t._fullLayout;function n(n,i,o,s){for(var l=a.getComponentMethod(n,i),g={},c=0;c<e.length;c++)for(var u=r[M.id2name(e[c])][o],h=0;h<u.length;h++){var d=u[h];if(!g[d]&&(l(t,d),g[d]=1,s))return}}n("annotations","drawOne","_annIndices"),n("shapes","drawOne","_shapeIndices"),n("images","draw","_imgIndices",!0)};var R=M.getDataConversions=function(t,e,r,n){var i,o="x"===r||"y"===r||"z"===r?r:n;if(Array.isArray(o)){if(i={type:E(n),_categories:[]},M.setConvert(i),"category"===i.type)for(var a=0;a<n.length;a++)i.d2c(n[a])}else i=M.getFromTrace(t,e,o);return i?{d2c:i.d2c,c2d:i.c2d}:"ids"===o?{d2c:L,c2d:L}:{d2c:D,c2d:D}};function D(t){return+t}function L(t){return String(t)}M.getDataToCoordFunc=function(t,e,r,n){return R(t,e,r,n).d2c},M.counterLetter=function(t){var e=t.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},M.minDtick=function(t,e,r,n){-1===["log","category","multicategory"].indexOf(t.type)&&n?void 0===t._minDtick?(t._minDtick=e,t._forceTick0=r):t._minDtick&&((t._minDtick/e+1e-6)%1<2e-6&&((r-t._forceTick0)/e%1+1.000001)%1<2e-6?(t._minDtick=e,t._forceTick0=r):((e/t._minDtick+1e-6)%1>2e-6||((r-t._forceTick0)/t._minDtick%1+1.000001)%1>2e-6)&&(t._minDtick=0)):t._minDtick=0},M.saveRangeInitial=function(t,e){for(var r=M.list(t,"",!0),n=!1,i=0;i<r.length;i++){var o=r[i],a=void 0===o._rangeInitial,s=a||!(o.range[0]===o._rangeInitial[0]&&o.range[1]===o._rangeInitial[1]);(a&&!1===o.autorange||e&&s)&&(o._rangeInitial=o.range.slice(),n=!0)}return n},M.saveShowSpikeInitial=function(t,e){for(var r=M.list(t,"",!0),n=!1,i="on",o=0;o<r.length;o++){var a=r[o],s=void 0===a._showSpikeInitial,l=s||!(a.showspikes===a._showspikes);(s||e&&l)&&(a._showSpikeInitial=a.showspikes,n=!0),"on"!==i||a.showspikes||(i="off")}return t._fullLayout._cartesianSpikesEnabled=i,n},M.autoBin=function(t,e,r,n,o,a){var l,g=s.aggNums(Math.min,null,t),c=s.aggNums(Math.max,null,t);if("category"===e.type||"multicategory"===e.type)return{start:g-.5,end:c+.5,size:Math.max(1,Math.round(a)||1),_dataSpan:c-g};if(o||(o=e.calendar),l="log"===e.type?{type:"linear",range:[g,c]}:{type:e.type,range:s.simpleMap([g,c],e.c2r,0,o),calendar:o},M.setConvert(l),a=a&&d.dtick(a,l.type))l.dtick=a,l.tick0=d.tick0(void 0,l.type,o);else{var u;if(r)u=(c-g)/r;else{var h=s.distinctVals(t),A=Math.pow(10,Math.floor(Math.log(h.minDiff)/Math.LN10)),f=A*s.roundUp(h.minDiff/A,[.9,1.9,4.9,9.9],!0);u=Math.max(f,2*s.stdev(t)/Math.pow(t.length,n?.25:.4)),i(u)||(u=1)}M.autoTicks(l,u)}var C,I=l.dtick,v=M.tickIncrement(M.tickFirst(l),I,"reverse",o);if("number"==typeof I)C=(v=function(t,e,r,n,o){var a=0,s=0,l=0,g=0;function c(e){return(1+100*(e-t)/r.dtick)%100<2}for(var u=0;u<e.length;u++)e[u]%1==0?l++:i(e[u])||g++,c(e[u])&&a++,c(e[u]+r.dtick/2)&&s++;var h=e.length-g;if(l===h&&"date"!==r.type)r.dtick<1?t=n-.5*r.dtick:(t-=.5)+r.dtick<n&&(t+=r.dtick);else if(s<.1*h&&(a>.3*h||c(n)||c(o))){var d=r.dtick/2;t+=t+d<n?d:-d}return t}(v,t,l,g,c))+(1+Math.floor((c-v)/I))*I;else for("M"===l.dtick.charAt(0)&&(v=function(t,e,r,n,i){var o=s.findExactDates(e,i);if(o.exactDays>.8){var a=Number(r.substr(1));o.exactYears>.8&&a%12==0?t=M.tickIncrement(t,"M6","reverse")+1.5*p:o.exactMonths>.8?t=M.tickIncrement(t,"M1","reverse")+15.5*p:t-=p/2;var l=M.tickIncrement(t,r);if(l<=n)return l}return t}(v,t,I,g,o)),C=v,0;C<=c;)C=M.tickIncrement(C,I,!1,o),0;return{start:e.c2r(v,0,o),end:e.c2r(C,0,o),size:I,_dataSpan:c-g}},M.prepTicks=function(t){var e=s.simpleMap(t.range,t.r2l);if("auto"===t.tickmode||!t.dtick){var r,n=t.nticks;n||("category"===t.type||"multicategory"===t.type?(r=t.tickfont?1.2*(t.tickfont.size||12):15,n=t._length/r):(r="y"===t._id.charAt(0)?40:80,n=s.constrain(t._length/r,4,9)+1),"radialaxis"===t._name&&(n*=2)),"array"===t.tickmode&&(n*=100),t._roughDTick=(Math.abs(e[1]-e[0])-(t._lBreaks||0))/n,M.autoTicks(t,t._roughDTick),t._minDtick>0&&t.dtick<2*t._minDtick&&(t.dtick=t._minDtick,t.tick0=t.l2r(t._forceTick0))}t.tick0||(t.tick0="date"===t.type?"2000-01-01":0),"date"===t.type&&t.dtick<.1&&(t.dtick=.1),U(t)},M.calcTicks=function(t){M.prepTicks(t);var e=s.simpleMap(t.range,t.r2l);if("array"===t.tickmode)return function(t){var e=t.tickvals,r=t.ticktext,n=new Array(e.length),i=s.simpleMap(t.range,t.r2l),o=1.0001*i[0]-1e-4*i[1],a=1.0001*i[1]-1e-4*i[0],l=Math.min(o,a),g=Math.max(o,a),c=0;Array.isArray(r)||(r=[]);var u="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(var h=0;h<e.length;h++){var d=u(e[h]);d>l&&d<g&&(void 0===r[h]?n[c]=M.tickText(t,d):n[c]=Z(t,d,String(r[h])),c++)}c<e.length&&n.splice(c,e.length-c);t.rangebreaks&&(n=n.filter(function(e){return t.maskBreaks(e.x)!==b}));return n}(t);t._tmin=M.tickFirst(t);var r=1.0001*e[0]-1e-4*e[1],n=1.0001*e[1]-1e-4*e[0],o=e[1]<e[0];if(t._tmin<r!==o)return[];"category"!==t.type&&"multicategory"!==t.type||(n=o?Math.max(-.5,n):Math.min(t._categories.length-.5,n));var a,l="log"===t.type&&!(i(t.dtick)||"L"===t.dtick.charAt(0));if(function(){var e=null,r=Math.max(1e3,t._length||0);a=[];for(var i=t._tmin;(o?i>=n:i<=n)&&!(a.length>r||i===e);i=M.tickIncrement(i,t.dtick,o,t.calendar)){e=i;var s=!1;l&&i!==(0|i)&&(s=!0),a.push({minor:s,value:i})}}(),t.rangebreaks){if("auto"===t.tickmode)for(var g=0;g<a.length;g++){var c=a[g].value;if(t.maskBreaks(c)===b)for(var u=0;u<t._rangebreaks.length;u++){var h=t._rangebreaks[u];if(c>=h.min&&c<h.max){a[g].value=h.max;break}}}var d=a.length;if(d>2){for(var A,f=2*(t.tickfont?t.tickfont.size:12),C=[],p=o?1:-1,I=o?d-1:0,v=o?0:d-1;p*v<=p*I;v+=p){var m=t.c2p(a[v].value);(void 0===A||Math.abs(m-A)>f)&&(A=m,C.push(a[v]))}a=C.reverse()}}ot(t)&&360===Math.abs(e[1]-e[0])&&a.pop(),t._tmax=(a[a.length-1]||{}).value,t._prevDateHead="",t._inCalcTicks=!0;for(var y=new Array(a.length),x=0;x<a.length;x++){var _=a[x].minor,w=a[x].value;y[x]=M.tickText(t,w,!1,_)}return t._inCalcTicks=!1,y};var P=[2,5,10],N=[1,2,3,6,12],z=[1,2,5,10,15,30],F=[1,2,3,7,14],B=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],j=[-.301,0,.301,.699,1],V=[15,30,45,90,180];function G(t,e,r){return e*s.roundUp(t/e,r)}function U(t){var e=t.dtick;if(t._tickexponent=0,i(e)||"string"==typeof e||(e=1),"category"!==t.type&&"multicategory"!==t.type||(t._tickround=null),"date"===t.type){var r=t.r2l(t.tick0),n=t.l2r(r).replace(/(^-|i)/g,""),o=n.length;if("M"===String(e).charAt(0))o>10||"01-01"!==n.substr(5)?t._tickround="d":t._tickround=+e.substr(1)%12==0?"y":"m";else if(e>=p&&o<=10||e>=15*p)t._tickround="d";else if(e>=v&&o<=16||e>=I)t._tickround="M";else if(e>=m&&o<=19||e>=v)t._tickround="S";else{var a=t.l2r(r+e).replace(/^-/,"").length;t._tickround=Math.max(o,a)-20,t._tickround<0&&(t._tickround=4)}}else if(i(e)||"L"===e.charAt(0)){var s=t.range.map(t.r2d||Number);i(e)||(e=Number(e.substr(1))),t._tickround=2-Math.floor(Math.log(e)/Math.LN10+.01);var l=Math.max(Math.abs(s[0]),Math.abs(s[1])),g=Math.floor(Math.log(l)/Math.LN10+.01);Math.abs(g)>3&&(W(t.exponentformat)&&!Y(g)?t._tickexponent=3*Math.round((g-1)/3):t._tickexponent=g)}else t._tickround=null}function Z(t,e,r){var n=t.tickfont||{};return{x:e,dx:0,dy:0,text:r||"",fontSize:n.size,font:n.family,fontColor:n.color}}M.autoTicks=function(t,e){var r;function n(t){return Math.pow(t,Math.floor(Math.log(e)/Math.LN10))}if("date"===t.type){t.tick0=s.dateTick0(t.calendar);var o=2*e;o>f?(e/=f,r=n(10),t.dtick="M"+12*G(e,r,P)):o>C?(e/=C,t.dtick="M"+G(e,1,N)):o>p?(t.dtick=G(e,p,t._hasDayOfWeekBreaks?[1,7,14]:F),t.tick0=s.dateTick0(t.calendar,!0)):o>I?t.dtick=G(e,I,N):o>v?t.dtick=G(e,v,z):o>m?t.dtick=G(e,m,z):(r=n(10),t.dtick=G(e,r,P))}else if("log"===t.type){t.tick0=0;var a=s.simpleMap(t.range,t.r2l);if(e>.7)t.dtick=Math.ceil(e);else if(Math.abs(a[1]-a[0])<1){var l=1.5*Math.abs((a[1]-a[0])/e);e=Math.abs(Math.pow(10,a[1])-Math.pow(10,a[0]))/l,r=n(10),t.dtick="L"+G(e,r,P)}else t.dtick=e>.3?"D2":"D1"}else"category"===t.type||"multicategory"===t.type?(t.tick0=0,t.dtick=Math.ceil(Math.max(e,1))):ot(t)?(t.tick0=0,r=1,t.dtick=G(e,r,V)):(t.tick0=0,r=n(10),t.dtick=G(e,r,P));if(0===t.dtick&&(t.dtick=1),!i(t.dtick)&&"string"!=typeof t.dtick){var g=t.dtick;throw t.dtick=1,"ax.dtick error: "+String(g)}},M.tickIncrement=function(t,e,r,o){var a=r?-1:1;if(i(e))return t+a*e;var l=e.charAt(0),g=a*Number(e.substr(1));if("M"===l)return s.incrementMonth(t,g,o);if("L"===l)return Math.log(Math.pow(10,t)+g)/Math.LN10;if("D"===l){var c="D2"===e?j:B,u=t+.01*a,h=s.roundUp(s.mod(u,1),c,r);return Math.floor(u)+Math.log(n.round(Math.pow(10,h),1))/Math.LN10}throw"unrecognized dtick "+String(e)},M.tickFirst=function(t){var e=t.r2l||Number,r=s.simpleMap(t.range,e),o=r[1]<r[0],a=o?Math.floor:Math.ceil,l=1.0001*r[0]-1e-4*r[1],g=t.dtick,c=e(t.tick0);if(i(g)){var u=a((l-c)/g)*g+c;return"category"!==t.type&&"multicategory"!==t.type||(u=s.constrain(u,0,t._categories.length-1)),u}var h=g.charAt(0),d=Number(g.substr(1));if("M"===h){for(var A,f,C,p=0,I=c;p<10;){if(((A=M.tickIncrement(I,g,o,t.calendar))-l)*(I-l)<=0)return o?Math.min(I,A):Math.max(I,A);f=(l-(I+A)/2)/(A-I),C=h+(Math.abs(Math.round(f))||1)*d,I=M.tickIncrement(I,C,f<0?!o:o,t.calendar),p++}return s.error("tickFirst did not converge",t),I}if("L"===h)return Math.log(a((Math.pow(10,l)-c)/d)*d+c)/Math.LN10;if("D"===h){var v="D2"===g?j:B,m=s.roundUp(s.mod(l,1),v,o);return Math.floor(l)+Math.log(n.round(Math.pow(10,m),1))/Math.LN10}throw"unrecognized dtick "+String(g)},M.tickText=function(t,e,r,n){var o,a=Z(t,e),l="array"===t.tickmode,g=r||l,c=t.type,u="category"===c?t.d2l_noadd:t.d2l;if(l&&Array.isArray(t.ticktext)){var h=s.simpleMap(t.range,t.r2l),d=(Math.abs(h[1]-h[0])-(t._lBreaks||0))/1e4;for(o=0;o<t.ticktext.length&&!(Math.abs(e-u(t.tickvals[o]))<d);o++);if(o<t.ticktext.length)return a.text=String(t.ticktext[o]),a}function A(n){if(void 0===n)return!0;if(r)return"none"===n;var i={first:t._tmin,last:t._tmax}[n];return"all"!==n&&e!==i}var f=r?"never":"none"!==t.exponentformat&&A(t.showexponent)?"hide":"";if("date"===c?function(t,e,r,n){var o=t._tickround,a=r&&t.hoverformat||M.getTickFormat(t);n&&(o=i(o)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[o]);var l,g=s.formatDate(e.x,a,o,t._dateFormat,t.calendar,t._extraFormat),c=g.indexOf("\n");-1!==c&&(l=g.substr(c+1),g=g.substr(0,c));n&&("00:00:00"===g||"00:00"===g?(g=l,l=""):8===g.length&&(g=g.replace(/:00$/,"")));l&&(r?"d"===o?g+=", "+l:g=l+(g?", "+g:""):t._inCalcTicks&&l===t._prevDateHead||(g+="<br>"+l,t._prevDateHead=l));e.text=g}(t,a,r,g):"log"===c?function(t,e,r,n,o){var a=t.dtick,l=e.x,g=t.tickformat,c="string"==typeof a&&a.charAt(0);"never"===o&&(o="");n&&"L"!==c&&(a="L3",c="L");if(g||"L"===c)e.text=X(Math.pow(10,l),t,o,n);else if(i(a)||"D"===c&&s.mod(l+.01,1)<.1){var u=Math.round(l),h=Math.abs(u),d=t.exponentformat;"power"===d||W(d)&&Y(u)?(e.text=0===u?1:1===u?"10":"10<sup>"+(u>1?"":y)+h+"</sup>",e.fontSize*=1.25):("e"===d||"E"===d)&&h>2?e.text="1"+d+(u>0?"+":y)+h:(e.text=X(Math.pow(10,l),t,"","fakehover"),"D1"===a&&"y"===t._id.charAt(0)&&(e.dy-=e.fontSize/6))}else{if("D"!==c)throw"unrecognized dtick "+String(a);e.text=String(Math.round(Math.pow(10,s.mod(l,1)))),e.fontSize*=.75}if("D1"===t.dtick){var A=String(e.text).charAt(0);"0"!==A&&"1"!==A||("y"===t._id.charAt(0)?e.dx-=e.fontSize/4:(e.dy+=e.fontSize/2,e.dx+=(t.range[1]>t.range[0]?1:-1)*e.fontSize*(l<0?.5:.25)))}}(t,a,0,g,f):"category"===c?function(t,e){var r=t._categories[Math.round(e.x)];void 0===r&&(r="");e.text=String(r)}(t,a):"multicategory"===c?function(t,e,r){var n=Math.round(e.x),i=t._categories[n]||[],o=void 0===i[1]?"":String(i[1]),a=void 0===i[0]?"":String(i[0]);r?e.text=a+" - "+o:(e.text=o,e.text2=a)}(t,a,r):ot(t)?function(t,e,r,n,i){if("radians"!==t.thetaunit||r)e.text=X(e.x,t,i,n);else{var o=e.x/180;if(0===o)e.text="0";else{var a=function(t){function e(t,e){return Math.abs(t-e)<=1e-6}var r=function(t){var r=1;for(;!e(Math.round(t*r)/r,t);)r*=10;return r}(t),n=t*r,i=Math.abs(function t(r,n){return e(n,0)?r:t(n,r%n)}(n,r));return[Math.round(n/i),Math.round(r/i)]}(o);if(a[1]>=100)e.text=X(s.deg2rad(e.x),t,i,n);else{var l=e.x<0;1===a[1]?1===a[0]?e.text="π":e.text=a[0]+"π":e.text=["<sup>",a[0],"</sup>","⁄","<sub>",a[1],"</sub>","π"].join(""),l&&(e.text=y+e.text)}}}}(t,a,r,g,f):function(t,e,r,n,i){"never"===i?i="":"all"===t.showexponent&&Math.abs(e.x/t.dtick)<1e-6&&(i="hide");e.text=X(e.x,t,i,n)}(t,a,0,g,f),n||(t.tickprefix&&!A(t.showtickprefix)&&(a.text=t.tickprefix+a.text),t.ticksuffix&&!A(t.showticksuffix)&&(a.text+=t.ticksuffix)),"boundaries"===t.tickson||t.showdividers){var C=function(e){var r=t.l2p(e);return r>=0&&r<=t._length?e:null};a.xbnd=[C(a.x-.5),C(a.x+t.dtick-.5)]}return a},M.hoverLabelText=function(t,e,r){if(r!==b&&r!==e)return M.hoverLabelText(t,e)+" - "+M.hoverLabelText(t,r);var n="log"===t.type&&e<=0,i=M.tickText(t,t.c2l(n?-e:e),"hover").text;return n?0===e?"0":y+i:i};var H=["f","p","n","μ","m","","k","M","G","T"];function W(t){return"SI"===t||"B"===t}function Y(t){return t>14||t<-15}function X(t,e,r,n){var o=t<0,a=e._tickround,l=r||e.exponentformat||"B",g=e._tickexponent,c=M.getTickFormat(e),u=e.separatethousands;if(n){var h={exponentformat:l,dtick:"none"===e.showexponent?e.dtick:i(t)&&Math.abs(t)||1,range:"none"===e.showexponent?e.range.map(e.r2d):[0,t||1]};U(h),a=(Number(h._tickround)||0)+4,g=h._tickexponent,e.hoverformat&&(c=e.hoverformat)}if(c)return e._numFormat(c)(t).replace(/-/g,y);var d,A=Math.pow(10,-a)/2;if("none"===l&&(g=0),(t=Math.abs(t))<A)t="0",o=!1;else{if(t+=A,g&&(t*=Math.pow(10,-g),a+=g),0===a)t=String(Math.floor(t));else if(a<0){t=(t=String(Math.round(t))).substr(0,t.length+a);for(var f=a;f<0;f++)t+="0"}else{var C=(t=String(t)).indexOf(".")+1;C&&(t=t.substr(0,C+a).replace(/\.?0+$/,""))}t=s.numSeparate(t,e._separators,u)}g&&"hide"!==l&&(W(l)&&Y(g)&&(l="power"),d=g<0?y+-g:"power"!==l?"+"+g:String(g),"e"===l||"E"===l?t+=l+d:"power"===l?t+="×10<sup>"+d+"</sup>":"B"===l&&9===g?t+="B":W(l)&&(t+=H[g/3+5]));return o?y+t:t}function q(t){return[t.text,t.x,t.axInfo,t.font,t.fontSize,t.fontColor].join("_")}function Q(t){var e=t.title.font.size,r=(t.title.text.match(l.BR_TAG_ALL)||[]).length;return t.title.hasOwnProperty("standoff")?r?e*(w+r*k):e*w:r?e*(r+1)*k:e}function K(t,e){var r=t.l2p(e);return r>1&&r<t._length-1}function J(t){var e=n.select(t),r=e.select(".text-math-group");return r.empty()?e.select("text"):r}function $(t){return t._id+".automargin"}function tt(t){return $(t)+".mirror"}function et(t){return t._id+".rangeslider"}function rt(t,e){for(var r=0;r<e.length;r++)-1===t.indexOf(e[r])&&t.push(e[r])}function nt(t,e,r){var n,i,o=[],a=[],l=t.layout;for(n=0;n<e.length;n++)o.push(M.getFromId(t,e[n]));for(n=0;n<r.length;n++)a.push(M.getFromId(t,r[n]));var g=Object.keys(h),c=["anchor","domain","overlaying","position","side","tickangle","editType"],u=["linear","log"];for(n=0;n<g.length;n++){var d=g[n],A=o[0][d],f=a[0][d],C=!0,p=!1,I=!1;if("_"!==d.charAt(0)&&"function"!=typeof A&&-1===c.indexOf(d)){for(i=1;i<o.length&&C;i++){var v=o[i][d];"type"===d&&-1!==u.indexOf(A)&&-1!==u.indexOf(v)&&A!==v?p=!0:v!==A&&(C=!1)}for(i=1;i<a.length&&C;i++){var m=a[i][d];"type"===d&&-1!==u.indexOf(f)&&-1!==u.indexOf(m)&&f!==m?I=!0:a[i][d]!==f&&(C=!1)}C&&(p&&(l[o[0]._name].type="linear"),I&&(l[a[0]._name].type="linear"),it(l,d,o,a,t._fullLayout._dfltTitle))}}for(n=0;n<t._fullLayout.annotations.length;n++){var y=t._fullLayout.annotations[n];-1!==e.indexOf(y.xref)&&-1!==r.indexOf(y.yref)&&s.swapAttrs(l.annotations[n],["?"])}}function it(t,e,r,n,i){var o,a=s.nestedProperty,l=a(t[r[0]._name],e).get(),g=a(t[n[0]._name],e).get();for("title"===e&&(l&&l.text===i.x&&(l.text=i.y),g&&g.text===i.y&&(g.text=i.x)),o=0;o<r.length;o++)a(t,r[o]._name+"."+e).set(g);for(o=0;o<n.length;o++)a(t,n[o]._name+"."+e).set(l)}function ot(t){return"angularaxis"===t._id}M.getTickFormat=function(t){var e,r,n,i,o,a,s,l;function g(t){return"string"!=typeof t?t:Number(t.replace("M",""))*C}function c(t,e){var r=["L","D"];if(typeof t==typeof e){if("number"==typeof t)return t-e;var n=r.indexOf(t.charAt(0)),i=r.indexOf(e.charAt(0));return n===i?Number(t.replace(/(L|D)/g,""))-Number(e.replace(/(L|D)/g,"")):n-i}return"number"==typeof t?1:-1}function u(t,e){var r=null===e[0],n=null===e[1],i=c(t,e[0])>=0,o=c(t,e[1])<=0;return(r||i)&&(n||o)}if(t.tickformatstops&&t.tickformatstops.length>0)switch(t.type){case"date":case"linear":for(e=0;e<t.tickformatstops.length;e++)if((n=t.tickformatstops[e]).enabled&&(i=t.dtick,o=n.dtickrange,a=void 0,void 0,void 0,a=g||function(t){return t},s=o[0],l=o[1],(!s&&"number"!=typeof s||a(s)<=a(i))&&(!l&&"number"!=typeof l||a(l)>=a(i)))){r=n;break}break;case"log":for(e=0;e<t.tickformatstops.length;e++)if((n=t.tickformatstops[e]).enabled&&u(t.dtick,n.dtickrange)){r=n;break}}return r?r.value:t.tickformat},M.getSubplots=function(t,e){var r=t._fullLayout._subplots,n=r.cartesian.concat(r.gl2d||[]),i=e?M.findSubplotsWithAxis(n,e):n;return i.sort(function(t,e){var r=t.substr(1).split("y"),n=e.substr(1).split("y");return r[0]===n[0]?+r[1]-+n[1]:+r[0]-+n[0]}),i},M.findSubplotsWithAxis=function(t,e){for(var r=new RegExp("x"===e._id.charAt(0)?"^"+e._id+"y":e._id+"$"),n=[],i=0;i<t.length;i++){var o=t[i];r.test(o)&&n.push(o)}return n},M.makeClipPaths=function(t){var e=t._fullLayout;if(!e._hasOnlyLargeSploms){var r,i,o={_offset:0,_length:e.width,_id:""},a={_offset:0,_length:e.height,_id:""},s=M.list(t,"x",!0),l=M.list(t,"y",!0),g=[];for(r=0;r<s.length;r++)for(g.push({x:s[r],y:a}),i=0;i<l.length;i++)0===r&&g.push({x:o,y:l[i]}),g.push({x:s[r],y:l[i]});var c=e._clips.selectAll(".axesclip").data(g,function(t){return t.x._id+t.y._id});c.enter().append("clipPath").classed("axesclip",!0).attr("id",function(t){return"clip"+e._uid+t.x._id+t.y._id}).append("rect"),c.exit().remove(),c.each(function(t){n.select(this).select("rect").attr({x:t.x._offset||0,y:t.y._offset||0,width:t.x._length||1,height:t.y._length||1})})}},M.draw=function(t,e,r){var n=t._fullLayout;"redraw"===e&&n._paper.selectAll("g.subplot").each(function(t){var e=t[0],r=n._plots[e],i=r.xaxis,o=r.yaxis;r.xaxislayer.selectAll("."+i._id+"tick").remove(),r.yaxislayer.selectAll("."+o._id+"tick").remove(),r.xaxislayer.selectAll("."+i._id+"tick2").remove(),r.yaxislayer.selectAll("."+o._id+"tick2").remove(),r.xaxislayer.selectAll("."+i._id+"divider").remove(),r.yaxislayer.selectAll("."+o._id+"divider").remove(),r.gridlayer&&r.gridlayer.selectAll("path").remove(),r.zerolinelayer&&r.zerolinelayer.selectAll("path").remove(),n._infolayer.select(".g-"+i._id+"title").remove(),n._infolayer.select(".g-"+o._id+"title").remove()});var i=e&&"redraw"!==e?e:M.listIds(t);return s.syncOrAsync(i.map(function(e){return function(){if(e){var n=M.getFromId(t,e),i=M.drawOne(t,n,r);return n._r=n.range.slice(),n._rl=s.simpleMap(n._r,n.r2l),i}}}))},M.drawOne=function(t,e,r){var n,i,l;r=r||{},e.setScale();var h=t._fullLayout,d=e._id,A=d.charAt(0),f=M.counterLetter(d),C=h._plots[e._mainSubplot];if(C){var p=C[A+"axislayer"],I=e._mainLinePosition,v=e._mainMirrorPosition,m=e._vals=M.calcTicks(e),y=[e.mirror,I,v].join("_");for(n=0;n<m.length;n++)m[n].axInfo=y;e._selections={},e._tickAngles&&(e._prevTickAngles=e._tickAngles),e._tickAngles={},e._depth=null;var b={};if(e.visible){var x,_,w=M.makeTransFn(e);if("boundaries"===e.tickson){var E=function(t,e){var r,n=[],i=function(t,e){var r=t.xbnd[e];null!==r&&n.push(s.extendFlat({},t,{x:r}))};if(e.length){for(r=0;r<e.length;r++)i(e[r],0);i(e[r-1],1)}return n}(0,m);_=M.clipEnds(e,E),x="inside"===e.ticks?_:E}else _=M.clipEnds(e,m),x="inside"===e.ticks?_:m;var O=e._gridVals=_,S=function(t,e){var r,n,i=[],o=function(t,e){var r=t.xbnd[e];null!==r&&i.push(s.extendFlat({},t,{x:r}))};if(t.showdividers&&e.length){for(r=0;r<e.length;r++){var a=e[r];a.text2!==n&&o(a,0),n=a.text2}o(e[r-1],1)}return i}(e,m);if(!h._hasOnlyLargeSploms){var R=e._subplotsWith,D={};for(n=0;n<R.length;n++){i=R[n];var L=(l=h._plots[i])[f+"axis"],P=L._mainAxis._id;if(!D[P]){D[P]=1;var N="x"===A?"M0,"+L._offset+"v"+L._length:"M"+L._offset+",0h"+L._length;M.drawGrid(t,e,{vals:O,counterAxis:L,layer:l.gridlayer.select("."+d),path:N,transFn:w}),M.drawZeroLine(t,e,{counterAxis:L,layer:l.zerolinelayer,path:N,transFn:w})}}}var z=M.getTickSigns(e),F=[];if(e.ticks){var B,j,V,G=M.makeTickPath(e,I,z[2]);if(e._anchorAxis&&e.mirror&&!0!==e.mirror?(B=M.makeTickPath(e,v,z[3]),j=G+B):(B="",j=G),e.showdividers&&"outside"===e.ticks&&"boundaries"===e.tickson){var U={};for(n=0;n<S.length;n++)U[S[n].x]=1;V=function(t){return U[t.x]?B:j}}else V=j;M.drawTicks(t,e,{vals:x,layer:p,path:V,transFn:w}),"allticks"===e.mirror&&(F=Object.keys(e._linepositions||{}))}for(n=0;n<F.length;n++){i=F[n],l=h._plots[i];var H=e._linepositions[i]||[],W=M.makeTickPath(e,H[0],z[0])+M.makeTickPath(e,H[1],z[1]);M.drawTicks(t,e,{vals:x,layer:l[A+"axislayer"],path:W,transFn:w})}var Y=[];if(Y.push(function(){return M.drawLabels(t,e,{vals:m,layer:p,transFn:w,labelFns:M.makeLabelFns(e,I)})}),"multicategory"===e.type){var X={x:2,y:10}[A];Y.push(function(){var r={x:"height",y:"width"}[A],n=rt()[r]+X+(e._tickAngles[d+"tick"]?e.tickfont.size*k:0);return M.drawLabels(t,e,{vals:function(t,e){for(var r=[],n={},i=0;i<e.length;i++){var o=e[i];n[o.text2]?n[o.text2].push(o.x):n[o.text2]=[o.x]}for(var a in n)r.push(Z(t,s.interp(n[a],.5),a));return r}(e,m),layer:p,cls:d+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:w,labelFns:M.makeLabelFns(e,I+n*z[4])})}),Y.push(function(){return e._depth=z[4]*(rt("tick2")[e.side]-I),function(t,e,r){var n=e._id+"divider",i=r.vals,o=r.layer.selectAll("path."+n).data(i,q);o.exit().remove(),o.enter().insert("path",":first-child").classed(n,1).classed("crisp",1).call(c.stroke,e.dividercolor).style("stroke-width",u.crispRound(t,e.dividerwidth,1)+"px"),o.attr("transform",r.transFn).attr("d",r.path)}(t,e,{vals:S,layer:p,path:M.makeTickPath(e,I,z[4],e._depth),transFn:w})})}else e.title.hasOwnProperty("standoff")&&Y.push(function(){e._depth=z[4]*(rt()[e.side]-I)});var K=a.getComponentMethod("rangeslider","isVisible")(e);return Y.push(function(){var r,n,i,s,l=e.side.charAt(0),g=T[e.side].charAt(0),c=M.getPxPosition(t,e),u="outside"===e.ticks?e.ticklen:0;if((e.automargin||K)&&("multicategory"===e.type?r=rt("tick2"):(r=rt(),"x"===A&&"b"===l&&(e._depth=Math.max(r.width>0?r.bottom-c:0,u)))),e.automargin){n={x:0,y:0,r:0,l:0,t:0,b:0};var d=[0,1];if("x"===A){if("b"===l?n[l]=e._depth:(n[l]=e._depth=Math.max(r.width>0?c-r.top:0,u),d.reverse()),r.width>0){var C=r.right-(e._offset+e._length);C>0&&(n.xr=1,n.r=C);var p=e._offset-r.left;p>0&&(n.xl=0,n.l=p)}}else if("l"===l?n[l]=e._depth=Math.max(r.height>0?c-r.left:0,u):(n[l]=e._depth=Math.max(r.height>0?r.right-c:0,u),d.reverse()),r.height>0){var I=r.bottom-(e._offset+e._length);I>0&&(n.yb=0,n.b=I);var v=e._offset-r.top;v>0&&(n.yt=1,n.t=v)}n[f]="free"===e.anchor?e.position:e._anchorAxis.domain[d[0]],e.title.text!==h._dfltTitle[A]&&(n[l]+=Q(e)+(e.title.standoff||0)),e.mirror&&"free"!==e.anchor&&((i={x:0,y:0,r:0,l:0,t:0,b:0})[g]=e.linewidth,e.mirror&&!0!==e.mirror&&(i[g]+=u),!0===e.mirror||"ticks"===e.mirror?i[f]=e._anchorAxis.domain[d[1]]:"all"!==e.mirror&&"allticks"!==e.mirror||(i[f]=[e._counterDomainMin,e._counterDomainMax][d[1]]))}K&&(s=a.getComponentMethod("rangeslider","autoMarginOpts")(t,e)),o.autoMargin(t,$(e),n),o.autoMargin(t,tt(e),i),o.autoMargin(t,et(e),s)}),r.skipTitle||K&&"bottom"===e.side||Y.push(function(){return function(t,e){var r,n=t._fullLayout,i=e._id,o=i.charAt(0),a=e.title.font.size;if(e.title.hasOwnProperty("standoff"))r=e._depth+e.title.standoff+Q(e);else{if("multicategory"===e.type)r=e._depth;else{r=10+1.5*a+(e.linewidth?e.linewidth-1:0)}r+="x"===o?"top"===e.side?a*(e.showticklabels?1:0):a*(e.showticklabels?1.5:.5):"right"===e.side?a*(e.showticklabels?1:.5):a*(e.showticklabels?.5:0)}var s,l,c,h,d=M.getPxPosition(t,e);"x"===o?(l=e._offset+e._length/2,c="top"===e.side?d-r:d+r):(c=e._offset+e._length/2,l="right"===e.side?d+r:d-r,s={rotate:"-90",offset:0});if("multicategory"!==e.type){var A=e._selections[e._id+"tick"];if(h={selection:A,side:e.side},A&&A.node()&&A.node().parentNode){var f=u.getTranslate(A.node().parentNode);h.offsetLeft=f.x,h.offsetTop=f.y}e.title.hasOwnProperty("standoff")&&(h.pad=0)}return g.draw(t,i+"title",{propContainer:e,propName:e._name+".title.text",placeholder:n._dfltTitle[o],avoid:h,transform:s,attributes:{x:l,y:c,"text-anchor":"middle"}})}(t,e)}),s.syncOrAsync(Y)}}function rt(t){var r=d+(t||"tick");return b[r]||(b[r]=function(t,e){var r,n,i,o;t._selections[e].size()?(r=1/0,n=-1/0,i=1/0,o=-1/0,t._selections[e].each(function(){var t=J(this),e=u.bBox(t.node().parentNode);r=Math.min(r,e.top),n=Math.max(n,e.bottom),i=Math.min(i,e.left),o=Math.max(o,e.right)})):(r=0,n=0,i=0,o=0);return{top:r,bottom:n,left:i,right:o,height:n-r,width:o-i}}(e,r)),b[r]}},M.getTickSigns=function(t){var e=t._id.charAt(0),r={x:"top",y:"right"}[e],n=t.side===r?1:-1,i=[-1,1,n,-n];return"inside"!==t.ticks==("x"===e)&&(i=i.map(function(t){return-t})),t.side&&i.push({l:-1,t:-1,r:1,b:1}[t.side.charAt(0)]),i},M.makeTransFn=function(t){var e=t._id.charAt(0),r=t._offset;return"x"===e?function(e){return"translate("+(r+t.l2p(e.x))+",0)"}:function(e){return"translate(0,"+(r+t.l2p(e.x))+")"}},M.makeTickPath=function(t,e,r,n){n=void 0!==n?n:t.ticklen;var i=t._id.charAt(0),o=(t.linewidth||1)/2;return"x"===i?"M0,"+(e+o*r)+"v"+n*r:"M"+(e+o*r)+",0h"+n*r},M.makeLabelFns=function(t,e,r){var n=t._id.charAt(0),o="boundaries"!==t.tickson&&"outside"===t.ticks,a=0,l=0;if(o&&(a+=t.ticklen),r&&"outside"===t.ticks){var g=s.deg2rad(r);a=t.ticklen*Math.cos(g)+1,l=t.ticklen*Math.sin(g)}t.showticklabels&&(o||t.showline)&&(a+=.2*t.tickfont.size);var c,u,h,d,A={labelStandoff:a+=(t.linewidth||1)/2,labelShift:l};return"x"===n?(d="bottom"===t.side?1:-1,c=l*d,u=e+a*d,h="bottom"===t.side?1:-.2,A.xFn=function(t){return t.dx+c},A.yFn=function(t){return t.dy+u+t.fontSize*h},A.anchorFn=function(t,e){return i(e)&&0!==e&&180!==e?e*d<0?"end":"start":"middle"},A.heightFn=function(e,r,n){return r<-60||r>60?-.5*n:"top"===t.side?-n:0}):"y"===n&&(d="right"===t.side?1:-1,c=a,u=-l*d,h=90===Math.abs(t.tickangle)?.5:0,A.xFn=function(t){return t.dx+e+(c+t.fontSize*h)*d},A.yFn=function(t){return t.dy+u+t.fontSize*_},A.anchorFn=function(e,r){return i(r)&&90===Math.abs(r)?"middle":"right"===t.side?"start":"end"},A.heightFn=function(e,r,n){return(r*="left"===t.side?1:-1)<-30?-n:r<30?-.5*n:0}),A},M.drawTicks=function(t,e,r){r=r||{};var n=e._id+"tick",i=r.layer.selectAll("path."+n).data(e.ticks?r.vals:[],q);i.exit().remove(),i.enter().append("path").classed(n,1).classed("ticks",1).classed("crisp",!1!==r.crisp).call(c.stroke,e.tickcolor).style("stroke-width",u.crispRound(t,e.tickwidth,1)+"px").attr("d",r.path),i.attr("transform",r.transFn)},M.drawGrid=function(t,e,r){r=r||{};var n=e._id+"grid",i=r.vals,o=r.counterAxis;if(!1===e.showgrid)i=[];else if(o&&M.shouldShowZeroLine(t,e,o))for(var a="array"===e.tickmode,s=0;s<i.length;s++){var l=i[s].x;if(a?!l:Math.abs(l)<e.dtick/100){if(i=i.slice(0,s).concat(i.slice(s+1)),!a)break;s--}}var g=r.layer.selectAll("path."+n).data(i,q);g.exit().remove(),g.enter().append("path").classed(n,1).classed("crisp",!1!==r.crisp),e._gw=u.crispRound(t,e.gridwidth,1),g.attr("transform",r.transFn).attr("d",r.path).call(c.stroke,e.gridcolor||"#ddd").style("stroke-width",e._gw+"px"),"function"==typeof r.path&&g.attr("d",r.path)},M.drawZeroLine=function(t,e,r){r=r||r;var n=e._id+"zl",i=M.shouldShowZeroLine(t,e,r.counterAxis),o=r.layer.selectAll("path."+n).data(i?[{x:0,id:e._id}]:[]);o.exit().remove(),o.enter().append("path").classed(n,1).classed("zl",1).classed("crisp",!1!==r.crisp).each(function(){r.layer.selectAll("path").sort(function(t,e){return O.idSort(t.id,e.id)})}),o.attr("transform",r.transFn).attr("d",r.path).call(c.stroke,e.zerolinecolor||c.defaultLine).style("stroke-width",u.crispRound(t,e.zerolinewidth,e._gw||1)+"px")},M.drawLabels=function(t,e,r){r=r||{};var o=t._fullLayout,a=e._id,g=a.charAt(0),c=r.cls||a+"tick",h=r.vals,d=r.labelFns,A=r.secondary?0:e.tickangle,f=(e._prevTickAngles||{})[c],C=r.layer.selectAll("g."+c).data(e.showticklabels?h:[],q),p=[];function I(t,e){t.each(function(t){var o=n.select(this),a=o.select(".text-math-group"),s=d.anchorFn(t,e),g=r.transFn.call(o.node(),t)+(i(e)&&0!=+e?" rotate("+e+","+d.xFn(t)+","+(d.yFn(t)-t.fontSize/2)+")":""),c=l.lineCount(o),h=k*t.fontSize,A=d.heightFn(t,i(e)?+e:0,(c-1)*h);if(A&&(g+=" translate(0, "+A+")"),a.empty())o.select("text").attr({transform:g,"text-anchor":s});else{var f=u.bBox(a.node()).width*{end:-.5,start:.5}[s];a.attr("transform",g+(f?"translate("+f+",0)":""))}})}C.enter().append("g").classed(c,1).append("text").attr("text-anchor","middle").each(function(e){var r=n.select(this),i=t._promises.length;r.call(l.positionText,d.xFn(e),d.yFn(e)).call(u.font,e.font,e.fontSize,e.fontColor).text(e.text).call(l.convertToTspans,t),t._promises[i]?p.push(t._promises.pop().then(function(){I(r,A)})):I(r,A)}),C.exit().remove(),r.repositionOnUpdate&&C.each(function(t){n.select(this).select("text").call(l.positionText,d.xFn(t),d.yFn(t))}),I(C,f+1?f:A);var v=null;e._selections&&(e._selections[c]=C);var m=[function(){return p.length&&Promise.all(p)}];e.automargin&&o._redrawFromAutoMarginCount&&90===f?(v=90,m.push(function(){I(C,f)})):m.push(function(){if(I(C,A),h.length&&"x"===g&&!i(A)&&("log"!==e.type||"D"!==String(e.dtick).charAt(0))){v=0;var t,n=0,o=[];if(C.each(function(t){n=Math.max(n,t.fontSize);var r=e.l2p(t.x),i=J(this),a=u.bBox(i.node());o.push({top:0,bottom:10,height:10,left:r-a.width/2,right:r+a.width/2+2,width:a.width+2})}),"boundaries"!==e.tickson&&!e.showdividers||r.secondary){var a=h.length,l=Math.abs((h[a-1].x-h[0].x)*e._m)/(a-1)<2.5*n||"multicategory"===e.type;for(t=0;t<o.length-1;t++)if(s.bBoxIntersect(o[t],o[t+1])){v=l?90:30;break}}else{var c=2;for(e.ticks&&(c+=e.tickwidth/2),t=0;t<o.length;t++){var d=h[t].xbnd,f=o[t];if(null!==d[0]&&f.left-e.l2p(d[0])<c||null!==d[1]&&e.l2p(d[1])-f.right<c){v=90;break}}}v&&I(C,v)}}),e._tickAngles&&m.push(function(){e._tickAngles[c]=null===v?i(A)?A:0:v});var y=s.syncOrAsync(m);return y&&y.then&&t._promises.push(y),y},M.getPxPosition=function(t,e){var r,n=t._fullLayout._size,i=e._id.charAt(0),o=e.side;return"free"!==e.anchor?r=e._anchorAxis:"x"===i?r={_offset:n.t+(1-(e.position||0))*n.h,_length:0}:"y"===i&&(r={_offset:n.l+(e.position||0)*n.w,_length:0}),"top"===o||"left"===o?r._offset:"bottom"===o||"right"===o?r._offset+r._length:void 0},M.shouldShowZeroLine=function(t,e,r){var n=s.simpleMap(e.range,e.r2l);return n[0]*n[1]<=0&&e.zeroline&&("linear"===e.type||"-"===e.type)&&!(e.rangebreaks&&e.maskBreaks(0)===b)&&(K(e,0)||!function(t,e,r,n){var i=r._mainAxis;if(!i)return;var o=t._fullLayout,a=e._id.charAt(0),s=M.counterLetter(e._id),l=e._offset+(Math.abs(n[0])<Math.abs(n[1])==("x"===a)?0:e._length);function g(t){if(!t.showline||!t.linewidth)return!1;var r=Math.max((t.linewidth+e.zerolinewidth)/2,1);function n(t){return"number"==typeof t&&Math.abs(t-l)<r}if(n(t._mainLinePosition)||n(t._mainMirrorPosition))return!0;var i=t._linepositions||{};for(var o in i)if(n(i[o][0])||n(i[o][1]))return!0}var c=o._plots[r._mainSubplot];if(!(c.mainplotinfo||c).overlays.length)return g(r);for(var u=M.list(t,s),h=0;h<u.length;h++){var d=u[h];if(d._mainAxis===i&&g(d))return!0}}(t,e,r,n)||function(t,e){for(var r=t._fullData,n=e._mainSubplot,i=e._id.charAt(0),o=0;o<r.length;o++){var s=r[o];if(!0===s.visible&&s.xaxis+s.yaxis===n){if(a.traceIs(s,"bar-like")&&s.orientation==={x:"h",y:"v"}[i])return!0;if(s.fill&&s.fill.charAt(s.fill.length-1)===i)return!0}}return!1}(t,e))},M.clipEnds=function(t,e){return e.filter(function(e){return K(t,e.x)})},M.allowAutoMargin=function(t){for(var e=M.list(t,"",!0),r=0;r<e.length;r++){var n=e[r];n.automargin&&(o.allowAutoMargin(t,$(n)),n.mirror&&o.allowAutoMargin(t,tt(n))),a.getComponentMethod("rangeslider","isVisible")(n)&&o.allowAutoMargin(t,et(n))}},M.swap=function(t,e){for(var r=function(t,e){var r,n,i=[];for(r=0;r<e.length;r++){var o=[],a=t._fullData[e[r]].xaxis,s=t._fullData[e[r]].yaxis;if(a&&s){for(n=0;n<i.length;n++)-1===i[n].x.indexOf(a)&&-1===i[n].y.indexOf(s)||o.push(n);if(o.length){var l,g=i[o[0]];if(o.length>1)for(n=1;n<o.length;n++)l=i[o[n]],rt(g.x,l.x),rt(g.y,l.y);rt(g.x,[a]),rt(g.y,[s])}else i.push({x:[a],y:[s]})}}return i}(t,e),n=0;n<r.length;n++)nt(t,r[n].x,r[n].y)}},{"../../components/color":304,"../../components/drawing":325,"../../components/titles":392,"../../constants/alignment":399,"../../constants/numerical":404,"../../lib":426,"../../lib/svg_text_utils":450,"../../plots/plots":515,"../../registry":524,"./autorange":472,"./axis_autotype":474,"./axis_ids":476,"./clean_ticks":478,"./layout_attributes":485,"./set_convert":491,d3:74,"fast-isnumeric":145}],474:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../../lib"),o=t("../../constants/numerical").BADNUM;e.exports=function(t,e,r){return!(r=r||{}).noMultiCategory&&(a=t,i.isArrayOrTypedArray(a[0])&&i.isArrayOrTypedArray(a[1]))?"multicategory":function(t,e){for(var r=Math.max(1,(t.length-1)/1e3),o=0,a=0,s={},l=0;l<t.length;l+=r){var g=t[Math.round(l)],c=String(g);s[c]||(s[c]=1,i.isDateTime(g,e)&&(o+=1),n(g)&&(a+=1))}return o>2*a}(t,e)?"date":function(t){for(var e=Math.max(1,(t.length-1)/1e3),r=0,n=0,a={},s=0;s<t.length;s+=e){var l=t[Math.round(s)],g=String(l);a[g]||(a[g]=1,"boolean"==typeof l?n++:i.cleanNumber(l)!==o?r++:"string"==typeof l&&n++)}return n>2*r}(t)?"category":function(t){if(!t)return!1;for(var e=0;e<t.length;e++)if(n(t[e]))return!0;return!1}(t)?"linear":"-";var a}},{"../../constants/numerical":404,"../../lib":426,"fast-isnumeric":145}],475:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../../registry"),o=t("../../lib"),a=t("../array_container_defaults"),s=t("./layout_attributes"),l=t("./tick_value_defaults"),g=t("./tick_mark_defaults"),c=t("./tick_label_defaults"),u=t("./category_order_defaults"),h=t("./line_grid_defaults"),d=t("./set_convert"),A=t("./constants").WEEKDAY_PATTERN,f=t("./constants").HOUR_PATTERN;function C(t,e,r){function i(r,n){return o.coerce(t,e,s.rangebreaks,r,n)}if(i("enabled")){var a=i("bounds");if(a&&a.length>=2){var l,g,c="";if(2===a.length)for(l=0;l<2;l++)if(g=I(a[l])){c=A;break}var u=i("pattern",c);if(u===A)for(l=0;l<2;l++)(g=I(a[l]))&&(e.bounds[l]=a[l]=g-1);if(u)for(l=0;l<2;l++)switch(g=a[l],u){case A:if(!n(g))return void(e.enabled=!1);if((g=+g)!==Math.floor(g)||g<0||g>=7)return void(e.enabled=!1);e.bounds[l]=a[l]=g;break;case f:if(!n(g))return void(e.enabled=!1);if((g=+g)<0||g>24)return void(e.enabled=!1);e.bounds[l]=a[l]=g}if(!1===r.autorange){var h=r.range;if(h[0]<h[1]){if(a[0]<h[0]&&a[1]>h[1])return void(e.enabled=!1)}else if(a[0]>h[0]&&a[1]<h[1])return void(e.enabled=!1)}}else{var d=i("values");if(!d||!d.length)return void(e.enabled=!1);i("dvalue")}}}e.exports=function(t,e,r,n,f){var p=n.letter,I=n.font||{},v=n.splomStash||{},m=r("visible",!n.visibleDflt),y=e._template||{},b=e.type||y.type||"-";"date"===b&&i.getComponentMethod("calendars","handleDefaults")(t,e,"calendar",n.calendar);d(e,f);var x=!e.isValidRange(t.range);x&&n.reverseDflt&&(x="reversed"),!r("autorange",x)||"linear"!==b&&"-"!==b||r("rangemode"),r("range"),e.cleanRange(),u(t,e,r,n),"category"===b||n.noHover||r("hoverformat");var _=r("color"),w=_!==s.color.dflt?_:I.color,k=v.label||f._dfltTitle[p];if(c(t,e,r,b,n,{pass:1}),!m)return e;r("title.text",k),o.coerceFont(r,"title.font",{family:I.family,size:Math.round(1.2*I.size),color:w}),l(t,e,r,b),c(t,e,r,b,n,{pass:2}),g(t,e,r,n),h(t,e,r,{dfltColor:_,bgColor:n.bgColor,showGrid:n.showGrid,attributes:s}),(e.showline||e.ticks)&&r("mirror"),n.automargin&&r("automargin");var T,M="multicategory"===b;n.noTickson||"category"!==b&&!M||!e.ticks&&!e.showgrid||(M&&(T="boundaries"),r("tickson",T));M&&(r("showdividers")&&(r("dividercolor"),r("dividerwidth")));if("date"===b)if(a(t,e,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:C}),e.rangebreaks.length){for(var E=0;E<e.rangebreaks.length;E++)if(e.rangebreaks[E].pattern===A){e._hasDayOfWeekBreaks=!0;break}if(d(e,f),f._has("scattergl")||f._has("splom"))for(var O=0;O<n.data.length;O++){var S=n.data[O];"scattergl"!==S.type&&"splom"!==S.type||(S.visible=!1,o.warn(S.type+" traces do not work on axes with rangebreaks. Setting trace "+S.index+" to `visible: false`."))}}else delete e.rangebreaks;return e};var p={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function I(t){if("string"==typeof t)return p[t.substr(0,3).toLowerCase()]}},{"../../lib":426,"../../registry":524,"../array_container_defaults":469,"./category_order_defaults":477,"./constants":479,"./layout_attributes":485,"./line_grid_defaults":487,"./set_convert":491,"./tick_label_defaults":492,"./tick_mark_defaults":493,"./tick_value_defaults":494,"fast-isnumeric":145}],476:[function(t,e,r){"use strict";var n=t("../../registry"),i=t("./constants");r.id2name=function(t){if("string"==typeof t&&t.match(i.AX_ID_PATTERN)){var e=t.substr(1);return"1"===e&&(e=""),t.charAt(0)+"axis"+e}},r.name2id=function(t){if(t.match(i.AX_NAME_PATTERN)){var e=t.substr(5);return"1"===e&&(e=""),t.charAt(0)+e}},r.cleanId=function(t,e){if(t.match(i.AX_ID_PATTERN)&&(!e||t.charAt(0)===e)){var r=t.substr(1).replace(/^0+/,"");return"1"===r&&(r=""),t.charAt(0)+r}},r.list=function(t,e,n){var i=t._fullLayout;if(!i)return[];var o,a=r.listIds(t,e),s=new Array(a.length);for(o=0;o<a.length;o++){var l=a[o];s[o]=i[l.charAt(0)+"axis"+l.substr(1)]}if(!n){var g=i._subplots.gl3d||[];for(o=0;o<g.length;o++){var c=i[g[o]];e?s.push(c[e+"axis"]):s.push(c.xaxis,c.yaxis,c.zaxis)}}return s},r.listIds=function(t,e){var r=t._fullLayout;if(!r)return[];var n=r._subplots;return e?n[e+"axis"]:n.xaxis.concat(n.yaxis)},r.getFromId=function(t,e,n){var i=t._fullLayout;return"x"===n?e=e.replace(/y[0-9]*/,""):"y"===n&&(e=e.replace(/x[0-9]*/,"")),i[r.id2name(e)]},r.getFromTrace=function(t,e,i){var o=t._fullLayout,a=null;if(n.traceIs(e,"gl3d")){var s=e.scene;"scene"===s.substr(0,5)&&(a=o[s][i+"axis"])}else a=r.getFromId(t,e[i+"axis"]||i);return a},r.idSort=function(t,e){var r=t.charAt(0),n=e.charAt(0);return r!==n?r>n?1:-1:+(t.substr(1)||1)-+(e.substr(1)||1)},r.getAxisGroup=function(t,e){for(var r=t._axisMatchGroups,n=0;n<r.length;n++){if(r[n][e])return"g"+n}return e}},{"../../registry":524,"./constants":479}],477:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){if("category"===e.type){var i,o=t.categoryarray,a=Array.isArray(o)&&o.length>0;a&&(i="array");var s,l=r("categoryorder",i);"array"===l&&(s=r("categoryarray")),a||"array"!==l||(l=e.categoryorder="trace"),"trace"===l?e._initialCategories=[]:"array"===l?e._initialCategories=s.slice():(s=function(t,e){var r,n,i,o=e.dataAttr||t._id.charAt(0),a={};if(e.axData)r=e.axData;else for(r=[],n=0;n<e.data.length;n++){var s=e.data[n];s[o+"axis"]===t._id&&r.push(s)}for(n=0;n<r.length;n++){var l=r[n][o];for(i=0;i<l.length;i++){var g=l[i];null!==g&&void 0!==g&&(a[g]=1)}}return Object.keys(a)}(e,n).sort(),"category ascending"===l?e._initialCategories=s:"category descending"===l&&(e._initialCategories=s.reverse()))}}},{}],478:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../../lib"),o=t("../../constants/numerical").ONEDAY;r.dtick=function(t,e){var r="log"===e,i="date"===e,a="category"===e,s=i?o:1;if(!t)return s;if(n(t))return(t=Number(t))<=0?s:a?Math.max(1,Math.round(t)):i?Math.max(.1,t):t;if("string"!=typeof t||!i&&!r)return s;var l=t.charAt(0),g=t.substr(1);return(g=n(g)?Number(g):0)<=0||!(i&&"M"===l&&g===Math.round(g)||r&&"L"===l||r&&"D"===l&&(1===g||2===g))?s:t},r.tick0=function(t,e,r,o){return"date"===e?i.cleanDate(t,i.dateTick0(r)):"D1"!==o&&"D2"!==o?n(t)?Number(t):0:void 0}},{"../../constants/numerical":404,"../../lib":426,"fast-isnumeric":145}],479:[function(t,e,r){"use strict";var n=t("../../lib/regex").counter;e.exports={idRegex:{x:n("x"),y:n("y")},attrRegex:n("[xy]axis"),xAxisMatch:n("xaxis"),yAxisMatch:n("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":442}],480:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("./axis_ids").id2name,o=t("./scale_zoom"),a=t("./autorange").makePadFn,s=t("./autorange").concatExtremes,l=t("../../constants/numerical").ALMOST_EQUAL,g=t("../../constants/alignment").FROM_BL;function c(t,e,r,n,o){var a,s,l,g,c="range"!==o,u=n[i(e)].type,h=[];for(s=0;s<r.length;s++)if((l=r[s])!==e&&(g=n[i(l)]).type===u)if(g.fixedrange){if(c&&g.anchor){n[i(g.anchor)].fixedrange&&h.push(l)}}else h.push(l);for(a=0;a<t.length;a++)if(t[a][e]){var d=t[a],A=[];for(s=0;s<h.length;s++)d[l=h[s]]||A.push(l);return{linkableAxes:A,thisGroup:d}}return{linkableAxes:h,thisGroup:null}}function u(t,e,r,n,i){var o,a,s,l,g;null===e?((e={})[r]=1,g=t.length,t.push(e)):g=t.indexOf(e);var c=Object.keys(e);for(o=0;o<t.length;o++)if(s=t[o],o!==g&&s[n]){var u=s[n];for(a=0;a<c.length;a++)s[l=c[a]]=u*i*e[l];return void t.splice(g,1)}if(1!==i)for(a=0;a<c.length;a++)e[c[a]]*=i;e[n]=1}function h(t,e){var r=t._inputDomain,n=g[t.constraintoward],i=r[0]+(r[1]-r[0])*n;t.domain=t._input.domain=[i+(r[0]-i)/e,i+(r[1]-i)/e],t.setScale()}r.handleConstraintDefaults=function(t,e,r,i){var o,a,s,l,g=i.allAxisIds,h=i.layoutOut,d=i.scaleanchorDflt,A=i.constrainDflt,f=h._axisConstraintGroups,C=h._axisMatchGroups,p=e._id,I=p.charAt(0),v=((h._splomAxes||{})[I]||{})[p]||{},m=e._id,y=m.charAt(0),b=r("constrain",A);if(n.coerce(t,e,{constraintoward:{valType:"enumerated",values:"x"===y?["left","center","right"]:["bottom","middle","top"],dflt:"x"===y?"center":"middle"}},"constraintoward"),!t.matches&&!v.matches||e.fixedrange||(a=c(C,m,g,h),o=n.coerce(t,e,{matches:{valType:"enumerated",values:a.linkableAxes||[],dflt:v.matches}},"matches")),o||e.fixedrange&&"domain"!==b||!t.scaleanchor&&!d||(l=c(f,m,g,h,b),s=n.coerce(t,e,{scaleanchor:{valType:"enumerated",values:l.linkableAxes||[]}},"scaleanchor",d)),o?(delete e.constrain,u(C,a.thisGroup,m,o,1)):-1!==g.indexOf(t.matches)&&n.warn("ignored "+e._name+'.matches: "'+t.matches+'" to avoid either an infinite loop or because the target axis has fixed range.'),s){var x=r("scaleratio");x||(x=e.scaleratio=1),u(f,l.thisGroup,m,s,x)}else-1!==g.indexOf(t.scaleanchor)&&n.warn("ignored "+e._name+'.scaleanchor: "'+t.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the target axis has fixed range or this axis declares a *matches* constraint.')},r.enforce=function(t){var e,r,n,g,c,u,d,A=t._fullLayout,f=A._axisConstraintGroups||[];for(e=0;e<f.length;e++){var C=f[e],p=Object.keys(C),I=1/0,v=0,m=1/0,y={},b={},x=!1;for(r=0;r<p.length;r++)b[n=p[r]]=g=A[i(n)],g._inputDomain?g.domain=g._inputDomain.slice():g._inputDomain=g.domain.slice(),g._inputRange||(g._inputRange=g.range.slice()),g.setScale(),y[n]=c=Math.abs(g._m)/C[n],I=Math.min(I,c),"domain"!==g.constrain&&g._constraintShrinkable||(m=Math.min(m,c)),delete g._constraintShrinkable,v=Math.max(v,c),"domain"===g.constrain&&(x=!0);if(!(I>l*v)||x)for(r=0;r<p.length;r++)if(c=y[n=p[r]],u=(g=b[n]).constrain,c!==m||"domain"===u)if(d=c/m,"range"===u)o(g,d);else{var _=g._inputDomain,w=(g.domain[1]-g.domain[0])/(_[1]-_[0]),k=(g.r2l(g.range[1])-g.r2l(g.range[0]))/(g.r2l(g._inputRange[1])-g.r2l(g._inputRange[0]));if((d/=w)*k<1){g.domain=g._input.domain=_.slice(),o(g,d);continue}if(k<1&&(g.range=g._input.range=g._inputRange.slice(),d*=k),g.autorange){var T=g.r2l(g.range[0]),M=g.r2l(g.range[1]),E=(T+M)/2,O=E,S=E,R=Math.abs(M-E),D=E-R*d*1.0001,L=E+R*d*1.0001,P=a(g);h(g,d);var N,z,F=Math.abs(g._m),B=s(t,g),j=B.min,V=B.max;for(z=0;z<j.length;z++)(N=j[z].val-P(j[z])/F)>D&&N<O&&(O=N);for(z=0;z<V.length;z++)(N=V[z].val+P(V[z])/F)<L&&N>S&&(S=N);d/=(S-O)/(2*R),O=g.l2r(O),S=g.l2r(S),g.range=g._input.range=T<M?[O,S]:[S,O]}h(g,d)}}},r.clean=function(t,e){if(e._inputDomain){for(var r=!1,n=e._id,i=t._fullLayout._axisConstraintGroups,o=0;o<i.length;o++)if(i[o][n]){r=!0;break}r&&"domain"===e.constrain||(e._input.domain=e.domain=e._inputDomain,delete e._inputDomain)}}},{"../../constants/alignment":399,"../../constants/numerical":404,"../../lib":426,"./autorange":472,"./axis_ids":476,"./scale_zoom":489}],481:[function(t,e,r){"use strict";var n=t("d3"),i=t("tinycolor2"),o=t("has-passive-events"),a=t("../../registry"),s=t("../../lib"),l=t("../../lib/svg_text_utils"),g=t("../../components/color"),c=t("../../components/drawing"),u=t("../../components/fx"),h=t("./axes"),d=t("../../lib/setcursor"),A=t("../../components/dragelement"),f=t("../../constants/alignment").FROM_TL,C=t("../../lib/clear_gl_canvases"),p=t("../../plot_api/subroutines").redrawReglTraces,I=t("../plots"),v=t("./axis_ids").getFromId,m=t("./select").prepSelect,y=t("./select").clearSelect,b=t("./select").selectOnClick,x=t("./scale_zoom"),_=t("./constants"),w=_.MINDRAG,k=_.MINZOOM,T=!0;function M(t,e,r,n){var i=s.ensureSingle(t.draglayer,e,r,function(e){e.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)});return i.call(d,n),i.node()}function E(t,e,r,i,o,a,s){var l=M(t,"rect",e,r);return n.select(l).call(c.setRect,i,o,a,s),l}function O(t,e){for(var r=0;r<t.length;r++)if(!t[r].fixedrange)return e;return""}function S(t,e,r,n,i){for(var o=0;o<t.length;o++){var a=t[o];if(!a.fixedrange)if(a.rangebreaks){var s="y"===a._id.charAt(0),l=s?1-e:e,g=s?1-r:r;n[a._name+".range[0]"]=a.l2r(a.p2l(l*a._length)),n[a._name+".range[1]"]=a.l2r(a.p2l(g*a._length))}else{var c=a._rl[0],u=a._rl[1]-c;n[a._name+".range[0]"]=a.l2r(c+u*e),n[a._name+".range[1]"]=a.l2r(c+u*r)}}if(i&&i.length){var h=(e+(1-r))/2;S(i,h,1-h,n,[])}}function R(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(!n.fixedrange)if(n.rangebreaks){var i=n._length,o=(n.p2l(0+e)-n.p2l(0)+(n.p2l(i+e)-n.p2l(i)))/2;n.range=[n.l2r(n._rl[0]-o),n.l2r(n._rl[1]-o)]}else n.range=[n.l2r(n._rl[0]-e/n._m),n.l2r(n._rl[1]-e/n._m)]}}function D(t){return 1-(t>=0?Math.min(t,.9):1/(1/Math.max(t,-.3)+3.222))}function L(t,e,r,n,i){return t.append("path").attr("class","zoombox").style({fill:e>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+r+", "+n+")").attr("d",i+"Z")}function P(t,e,r){return t.append("path").attr("class","zoombox-corners").style({fill:g.background,stroke:g.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+e+", "+r+")").attr("d","M0,0Z")}function N(t,e,r,n,i,o){t.attr("d",n+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z"),z(t,e,i,o)}function z(t,e,r,n){r||(t.transition().style("fill",n>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),e.transition().style("opacity",1).duration(200))}function F(t){n.select(t).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function B(t){T&&t.data&&t._context.showTips&&(s.notifier(s._(t,"Double-click to zoom back out"),"long"),T=!1)}function j(t){return"lasso"===t||"select"===t}function V(t){var e=Math.floor(Math.min(t.b-t.t,t.r-t.l,k)/2);return"M"+(t.l-3.5)+","+(t.t-.5+e)+"h3v"+-e+"h"+e+"v-3h-"+(e+3)+"ZM"+(t.r+3.5)+","+(t.t-.5+e)+"h-3v"+-e+"h"+-e+"v-3h"+(e+3)+"ZM"+(t.r+3.5)+","+(t.b+.5-e)+"h-3v"+e+"h"+-e+"v3h"+(e+3)+"ZM"+(t.l-3.5)+","+(t.b+.5-e)+"h3v"+e+"h"+e+"v3h-"+(e+3)+"Z"}function G(t,e,r,n){for(var i,o,a,l,g=!1,c={},u={},h=0;h<e.length;h++){var d=e[h];for(i in r)if(d[i]){for(a in d)("x"===a.charAt(0)?r:n)[a]||(c[a]=i);for(o in n)d[o]&&(g=!0)}for(o in n)if(d[o])for(l in d)("x"===l.charAt(0)?r:n)[l]||(u[l]=o)}g&&(s.extendFlat(c,u),u={});var A={},f=[];for(a in c){var C=v(t,a);f.push(C),A[C._id]=C}var p={},I=[];for(l in u){var m=v(t,l);I.push(m),p[m._id]=m}return{xaHash:A,yaHash:p,xaxes:f,yaxes:I,xLinks:c,yLinks:u,isSubplotConstrained:g}}function U(t,e){if(o){var r=void 0!==t.onwheel?"wheel":"mousewheel";t._onwheel&&t.removeEventListener(r,t._onwheel),t._onwheel=e,t.addEventListener(r,e,{passive:!1})}else void 0!==t.onwheel?t.onwheel=e:void 0!==t.onmousewheel&&(t.onmousewheel=e)}function Z(t){var e=[];for(var r in t)e.push(t[r]);return e}e.exports={makeDragBox:function(t,e,r,o,g,d,T,M){var z,H,W,Y,X,q,Q,K,J,$,tt,et,rt,nt,it,ot,at,st,lt,gt,ct,ut=t._fullLayout._zoomlayer,ht=T+M==="nsew",dt=1===(T+M).length;function At(){if(z=e.xaxis,H=e.yaxis,J=z._length,$=H._length,Q=z._offset,K=H._offset,(W={})[z._id]=z,(Y={})[H._id]=H,T&&M)for(var r=e.overlays,n=0;n<r.length;n++){var i=r[n].xaxis;W[i._id]=i;var o=r[n].yaxis;Y[o._id]=o}X=Z(W),q=Z(Y),rt=O(X,M),nt=O(q,T),it=!nt&&!rt,tt=G(t,t._fullLayout._axisConstraintGroups,W,Y),et=G(t,t._fullLayout._axisMatchGroups,W,Y),ot=M||tt.isSubplotConstrained||et.isSubplotConstrained,at=T||tt.isSubplotConstrained||et.isSubplotConstrained;var a=t._fullLayout;st=a._has("scattergl"),lt=a._has("splom"),gt=a._has("svg")}At();var ft=function(t,e,r){return t?"nsew"===t?r?"":"pan"===e?"move":"crosshair":t.toLowerCase()+"-resize":"pointer"}(nt+rt,t._fullLayout.dragmode,ht),Ct=E(e,T+M+"drag",ft,r,o,g,d);if(it&&!ht)return Ct.onmousedown=null,Ct.style.pointerEvents="none",Ct;var pt,It,vt,mt,yt,bt,xt,_t,wt,kt,Tt={element:Ct,gd:t,plotinfo:e};function Mt(){Tt.plotinfo.selection=!1,y(t)}function Et(r,i){var o=t._fullLayout.clickmode;if(F(t),2!==r||dt||function(){if(!t._transitioningWithDuration){var e=t._context.doubleClick,r=[];rt&&(r=r.concat(X)),nt&&(r=r.concat(q)),et.xaxes&&(r=r.concat(et.xaxes)),et.yaxes&&(r=r.concat(et.yaxes));var n,i,o,s={};if("reset+autosize"===e)for(e="autosize",i=0;i<r.length;i++)if((n=r[i])._rangeInitial&&(n.range[0]!==n._rangeInitial[0]||n.range[1]!==n._rangeInitial[1])||!n._rangeInitial&&!n.autorange){e="reset";break}if("autosize"===e)for(i=0;i<r.length;i++)(n=r[i]).fixedrange||(s[n._name+".autorange"]=!0);else if("reset"===e)for((rt||tt.isSubplotConstrained)&&(r=r.concat(tt.xaxes)),nt&&!tt.isSubplotConstrained&&(r=r.concat(tt.yaxes)),tt.isSubplotConstrained&&(rt?nt||(r=r.concat(q)):r=r.concat(X)),i=0;i<r.length;i++)(n=r[i]).fixedrange||(n._rangeInitial?(o=n._rangeInitial,s[n._name+".range[0]"]=o[0],s[n._name+".range[1]"]=o[1]):s[n._name+".autorange"]=!0);t.emit("plotly_doubleclick",null),a.call("_guiRelayout",t,s)}}(),ht)o.indexOf("select")>-1&&b(i,t,X,q,e.id,Tt),o.indexOf("event")>-1&&u.click(t,i,e.id);else if(1===r&&dt){var s=T?H:z,g="s"===T||"w"===M?0:1,c=s._name+".range["+g+"]",h=function(t,e){var r,i=t.range[e],o=Math.abs(i-t.range[1-e]);return"date"===t.type?i:"log"===t.type?(r=Math.ceil(Math.max(0,-Math.log(o)/Math.LN10))+3,n.format("."+r+"g")(Math.pow(10,i))):(r=Math.floor(Math.log(Math.abs(i))/Math.LN10)-Math.floor(Math.log(o)/Math.LN10)+4,n.format("."+String(r)+"g")(i))}(s,g),d="left",A="middle";if(s.fixedrange)return;T?(A="n"===T?"top":"bottom","right"===s.side&&(d="right")):"e"===M&&(d="right"),t._context.showAxisRangeEntryBoxes&&n.select(Ct).call(l.makeEditable,{gd:t,immediate:!0,background:t._fullLayout.paper_bgcolor,text:String(h),fill:s.tickfont?s.tickfont.color:"#444",horizontalAlign:d,verticalAlign:A}).on("edit",function(e){var r=s.d2r(e);void 0!==r&&a.call("_guiRelayout",t,c,r)})}}function Ot(e,r){if(t._transitioningWithDuration)return!1;var n=Math.max(0,Math.min(J,e+pt)),i=Math.max(0,Math.min($,r+It)),o=Math.abs(n-pt),a=Math.abs(i-It);function s(){xt="",vt.r=vt.l,vt.t=vt.b,wt.attr("d","M0,0Z")}if(vt.l=Math.min(pt,n),vt.r=Math.max(pt,n),vt.t=Math.min(It,i),vt.b=Math.max(It,i),tt.isSubplotConstrained)o>k||a>k?(xt="xy",o/J>a/$?(a=o*$/J,It>i?vt.t=It-a:vt.b=It+a):(o=a*J/$,pt>n?vt.l=pt-o:vt.r=pt+o),wt.attr("d",V(vt))):s();else if(et.isSubplotConstrained)if(o>k||a>k){xt="xy";var l=Math.min(vt.l/J,($-vt.b)/$),g=Math.max(vt.r/J,($-vt.t)/$);vt.l=l*J,vt.r=g*J,vt.b=(1-l)*$,vt.t=(1-g)*$,wt.attr("d",V(vt))}else s();else!nt||a<Math.min(Math.max(.6*o,w),k)?o<w||!rt?s():(vt.t=0,vt.b=$,xt="x",wt.attr("d",function(t,e){return"M"+(t.l-.5)+","+(e-k-.5)+"h-3v"+(2*k+1)+"h3ZM"+(t.r+.5)+","+(e-k-.5)+"h3v"+(2*k+1)+"h-3Z"}(vt,It))):!rt||o<Math.min(.6*a,k)?(vt.l=0,vt.r=J,xt="y",wt.attr("d",function(t,e){return"M"+(e-k-.5)+","+(t.t-.5)+"v-3h"+(2*k+1)+"v3ZM"+(e-k-.5)+","+(t.b+.5)+"v3h"+(2*k+1)+"v-3Z"}(vt,pt))):(xt="xy",wt.attr("d",V(vt)));vt.w=vt.r-vt.l,vt.h=vt.b-vt.t,xt&&(kt=!0),t._dragged=kt,N(_t,wt,vt,yt,bt,mt),St(),t.emit("plotly_relayouting",ct),bt=!0}function St(){ct={},"xy"!==xt&&"x"!==xt||(S(X,vt.l/J,vt.r/J,ct,tt.xaxes),Ft("x",ct)),"xy"!==xt&&"y"!==xt||(S(q,($-vt.b)/$,($-vt.t)/$,ct,tt.yaxes),Ft("y",ct))}function Rt(){St(),F(t),jt(),B(t)}Tt.prepFn=function(e,r,n){var o=Tt.dragmode,a=t._fullLayout.dragmode;a!==o&&(Tt.dragmode=a),At(),it||(ht?e.shiftKey?"pan"===a?a="zoom":j(a)||(a="pan"):e.ctrlKey&&(a="pan"):a="pan"),Tt.minDrag="lasso"===a?1:void 0,j(a)?(Tt.xaxes=X,Tt.yaxes=q,m(e,r,n,Tt,a)):(Tt.clickFn=Et,j(o)&&Mt(),it||("zoom"===a?(Tt.moveFn=Ot,Tt.doneFn=Rt,Tt.minDrag=1,function(e,r,n){var o=Ct.getBoundingClientRect();pt=r-o.left,It=n-o.top,vt={l:pt,r:pt,w:0,t:It,b:It,h:0},mt=t._hmpixcount?t._hmlumcount/t._hmpixcount:i(t._fullLayout.plot_bgcolor).getLuminance(),bt=!1,xt="xy",kt=!1,_t=L(ut,mt,Q,K,yt="M0,0H"+J+"V"+$+"H0V0"),wt=P(ut,Q,K)}(0,r,n)):"pan"===a&&(Tt.moveFn=zt,Tt.doneFn=jt))),t._fullLayout._redrag=function(){var e=t._dragdata;e&&e.element===Ct&&(j(t._fullLayout.dragmode)||(At(),Vt([0,0,J,$]),Tt.moveFn(e.dx,e.dy)))}},A.init(Tt);var Dt=[0,0,J,$],Lt=null,Pt=_.REDRAWDELAY,Nt=e.mainplot?t._fullLayout._plots[e.mainplot]:e;function zt(e,r){if(!t._transitioningWithDuration){if(t._fullLayout._replotting=!0,"ew"===rt||"ns"===nt)return rt&&(R(X,e),Ft("x")),nt&&(R(q,r),Ft("y")),Vt([rt?-e:0,nt?-r:0,J,$]),Bt(),void t.emit("plotly_relayouting",ct);if(tt.isSubplotConstrained&&rt&&nt){var n="w"===rt==("n"===nt)?1:-1,i=(e/J+n*r/$)/2;e=i*J,r=n*i*$}"w"===rt?e=l(X,0,e):"e"===rt?e=l(X,1,-e):rt||(e=0),"n"===nt?r=l(q,1,r):"s"===nt?r=l(q,0,-r):nt||(r=0);var o="w"===rt?e:0,a="n"===nt?r:0;if(tt.isSubplotConstrained){var s;if(!rt&&1===nt.length){for(s=0;s<X.length;s++)X[s].range=X[s]._r.slice(),x(X[s],1-r/$);o=(e=r*J/$)/2}if(!nt&&1===rt.length){for(s=0;s<q.length;s++)q[s].range=q[s]._r.slice(),x(q[s],1-e/J);a=(r=e*$/J)/2}}Ft("x"),Ft("y"),Vt([o,a,J-e,$-r]),Bt(),t.emit("plotly_relayouting",ct)}function l(t,e,r){for(var n,i,o=1-e,a=0;a<t.length;a++){var s=t[a];if(!s.fixedrange){n=s,i=s._rl[o]+(s._rl[e]-s._rl[o])/D(r/s._length);var l=s.l2r(i);!1!==l&&void 0!==l&&(s.range[e]=l)}}return n._length*(n._rl[e]-i)/(n._rl[e]-n._rl[o])}}function Ft(t,e){for(var r=et.isSubplotConstrained?{x:q,y:X}[t]:et[t+"axes"],n=et.isSubplotConstrained?{x:X,y:q}[t]:[],i=0;i<r.length;i++){var o=r[i],a=o._id,s=et.xLinks[a]||et.yLinks[a],l=n[0]||W[s]||Y[s];l&&(e?(e[o._name+".range[0]"]=e[l._name+".range[0]"],e[o._name+".range[1]"]=e[l._name+".range[1]"]):o.range=l.range.slice())}}function Bt(){var e,r=[];function n(t){for(e=0;e<t.length;e++)t[e].fixedrange||r.push(t[e]._id)}for(ot&&(n(X),n(tt.xaxes),n(et.xaxes)),at&&(n(q),n(tt.yaxes),n(et.yaxes)),ct={},e=0;e<r.length;e++){var i=r[e],o=v(t,i);h.drawOne(t,o,{skipTitle:!0}),ct[o._name+".range[0]"]=o.range[0],ct[o._name+".range[1]"]=o.range[1]}h.redrawComponents(t,r)}function jt(){Vt([0,0,J,$]),s.syncOrAsync([I.previousPromises,function(){t._fullLayout._replotting=!1,a.call("_guiRelayout",t,ct)}],t)}function Vt(e){var r,n,i,o,l=t._fullLayout,g=l._plots,u=l._subplots.cartesian;if(lt&&a.subplotsRegistry.splom.drag(t),st)for(r=0;r<u.length;r++)if(i=(n=g[u[r]]).xaxis,o=n.yaxis,n._scene){var h=s.simpleMap(i.range,i.r2l),d=s.simpleMap(o.range,o.r2l);n._scene.update({range:[h[0],d[0],h[1],d[1]]})}if((lt||st)&&(C(t),p(t)),gt){var A=e[2]/z._length,f=e[3]/H._length;for(r=0;r<u.length;r++){i=(n=g[u[r]]).xaxis,o=n.yaxis;var I,v,m,y,b=ot&&!i.fixedrange&&W[i._id],x=at&&!o.fixedrange&&Y[o._id];if(b?(I=A,m=M?e[0]:Zt(i,I)):et.xaHash[i._id]?(I=A,m=e[0]*i._length/z._length):et.yaHash[i._id]?(I=f,m="ns"===nt?-e[1]*i._length/H._length:Zt(i,I,{n:"top",s:"bottom"}[nt])):m=Ut(i,I=Gt(i,A,f)),x?(v=f,y=T?e[1]:Zt(o,v)):et.yaHash[o._id]?(v=f,y=e[1]*o._length/H._length):et.xaHash[o._id]?(v=A,y="ew"===rt?-e[0]*o._length/z._length:Zt(o,v,{e:"right",w:"left"}[rt])):y=Ut(o,v=Gt(o,A,f)),I||v){I||(I=1),v||(v=1);var _=i._offset-m/I,w=o._offset-y/v;n.clipRect.call(c.setTranslate,m,y).call(c.setScale,I,v),n.plot.call(c.setTranslate,_,w).call(c.setScale,1/I,1/v),I===n.xScaleFactor&&v===n.yScaleFactor||(c.setPointGroupScale(n.zoomScalePts,I,v),c.setTextPointsScale(n.zoomScaleTxt,I,v)),c.hideOutsideRangePoints(n.clipOnAxisFalseTraces,n),n.xScaleFactor=I,n.yScaleFactor=v}}}}function Gt(t,e,r){return t.fixedrange?0:ot&&tt.xaHash[t._id]?e:at&&(tt.isSubplotConstrained?tt.xaHash:tt.yaHash)[t._id]?r:0}function Ut(t,e){return e?(t.range=t._r.slice(),x(t,e),Zt(t,e)):0}function Zt(t,e,r){return t._length*(1-e)*f[r||t.constraintoward||"middle"]}return T.length*M.length!=1&&U(Ct,function(e){if(t._context._scrollZoom.cartesian||t._fullLayout._enablescrollzoom){if(Mt(),t._transitioningWithDuration)return e.preventDefault(),void e.stopPropagation();At(),clearTimeout(Lt);var r=-e.deltaY;if(isFinite(r)||(r=e.wheelDelta/10),isFinite(r)){var n,i=Math.exp(-Math.min(Math.max(r,-20),20)/200),o=Nt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),a=(e.clientX-o.left)/o.width,l=(o.bottom-e.clientY)/o.height;if(ot){for(M||(a=.5),n=0;n<X.length;n++)g(X[n],a,i);Ft("x"),Dt[2]*=i,Dt[0]+=Dt[2]*a*(1/i-1)}if(at){for(T||(l=.5),n=0;n<q.length;n++)g(q[n],l,i);Ft("y"),Dt[3]*=i,Dt[1]+=Dt[3]*(1-l)*(1/i-1)}Vt(Dt),Bt(),t.emit("plotly_relayouting",ct),Lt=setTimeout(function(){Dt=[0,0,J,$],jt()},Pt),e.preventDefault()}else s.log("Did not find wheel motion attributes: ",e)}function g(t,e,r){if(!t.fixedrange){var n=s.simpleMap(t.range,t.r2l),i=n[0]+(n[1]-n[0])*e;t.range=n.map(function(e){return t.l2r(i+(e-i)*r)})}}}),Ct},makeDragger:M,makeRectDragger:E,makeZoombox:L,makeCorners:P,updateZoombox:N,xyCorners:V,transitionZoombox:z,removeZoombox:F,showDoubleClickNotifier:B,attachWheelEventHandler:U}},{"../../components/color":304,"../../components/dragelement":322,"../../components/drawing":325,"../../components/fx":343,"../../constants/alignment":399,"../../lib":426,"../../lib/clear_gl_canvases":413,"../../lib/setcursor":446,"../../lib/svg_text_utils":450,"../../plot_api/subroutines":464,"../../registry":524,"../plots":515,"./axes":473,"./axis_ids":476,"./constants":479,"./scale_zoom":489,"./select":490,d3:74,"has-passive-events":230,tinycolor2:693}],482:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../components/fx"),o=t("../../components/dragelement"),a=t("../../lib/setcursor"),s=t("./dragbox").makeDragBox,l=t("./constants").DRAGGERSIZE;r.initInteractions=function(t){var e=t._fullLayout;if(t._context.staticPlot)n.select(t).selectAll(".drag").remove();else if(e._has("cartesian")||e._has("splom")){Object.keys(e._plots||{}).sort(function(t,r){if((e._plots[t].mainplot&&!0)===(e._plots[r].mainplot&&!0)){var n=t.split("y"),i=r.split("y");return n[0]===i[0]?Number(n[1]||1)-Number(i[1]||1):Number(n[0]||1)-Number(i[0]||1)}return e._plots[t].mainplot?1:-1}).forEach(function(r){var n=e._plots[r],a=n.xaxis,g=n.yaxis;if(!n.mainplot){var c=s(t,n,a._offset,g._offset,a._length,g._length,"ns","ew");c.onmousemove=function(e){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===r&&t._fullLayout._plots[r]&&i.hover(t,e,r)},i.hover(t,e,r),t._fullLayout._lasthover=c,t._fullLayout._hoversubplot=r},c.onmouseout=function(e){t._dragging||(t._fullLayout._hoversubplot=null,o.unhover(t,e))},t._context.showAxisDragHandles&&(s(t,n,a._offset-l,g._offset-l,l,l,"n","w"),s(t,n,a._offset+a._length,g._offset-l,l,l,"n","e"),s(t,n,a._offset-l,g._offset+g._length,l,l,"s","w"),s(t,n,a._offset+a._length,g._offset+g._length,l,l,"s","e"))}if(t._context.showAxisDragHandles){if(r===a._mainSubplot){var u=a._mainLinePosition;"top"===a.side&&(u-=l),s(t,n,a._offset+.1*a._length,u,.8*a._length,l,"","ew"),s(t,n,a._offset,u,.1*a._length,l,"","w"),s(t,n,a._offset+.9*a._length,u,.1*a._length,l,"","e")}if(r===g._mainSubplot){var h=g._mainLinePosition;"right"!==g.side&&(h-=l),s(t,n,h,g._offset+.1*g._length,l,.8*g._length,"ns",""),s(t,n,h,g._offset+.9*g._length,l,.1*g._length,"s",""),s(t,n,h,g._offset,l,.1*g._length,"n","")}}});var a=e._hoverlayer.node();a.onmousemove=function(r){r.target=t._fullLayout._lasthover,i.hover(t,r,e._hoversubplot)},a.onclick=function(e){e.target=t._fullLayout._lasthover,i.click(t,e)},a.onmousedown=function(e){t._fullLayout._lasthover.onmousedown(e)},r.updateFx(t)}},r.updateFx=function(t){var e=t._fullLayout,r="pan"===e.dragmode?"move":"crosshair";a(e._draggers,r)}},{"../../components/dragelement":322,"../../components/fx":343,"../../lib/setcursor":446,"./constants":479,"./dragbox":481,d3:74}],483:[function(t,e,r){"use strict";var n=t("../../registry"),i=t("../../lib");e.exports=function(t){return function(e,r){var o=e[t];if(Array.isArray(o))for(var a=n.subplotsRegistry.cartesian,s=a.idRegex,l=r._subplots,g=l.xaxis,c=l.yaxis,u=l.cartesian,h=r._has("cartesian")||r._has("gl2d"),d=0;d<o.length;d++){var A=o[d];if(i.isPlainObject(A)){var f=A.xref,C=A.yref,p=s.x.test(f),I=s.y.test(C);if(p||I){h||i.pushUnique(r._basePlotModules,a);var v=!1;p&&-1===g.indexOf(f)&&(g.push(f),v=!0),I&&-1===c.indexOf(C)&&(c.push(C),v=!0),v&&p&&I&&u.push(f+C)}}}}}},{"../../lib":426,"../../registry":524}],484:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../registry"),o=t("../../lib"),a=t("../plots"),s=t("../../components/drawing"),l=t("../get_data").getModuleCalcData,g=t("./axis_ids"),c=t("./constants"),u=t("../../constants/xmlns_namespaces"),h=o.ensureSingle;function d(t,e,r){return o.ensureSingle(t,e,r,function(t){t.datum(r)})}function A(t,e,r,o,a){for(var g,u,h,d=c.traceLayerClasses,A=t._fullLayout,f=A._modules,C=[],p=[],I=0;I<f.length;I++){var v=(g=f[I]).name,m=i.modules[v].categories;if(m.svg){var y=g.layerName||v+"layer",b=g.plot;h=(u=l(r,b))[0],r=u[1],h.length&&C.push({i:d.indexOf(y),className:y,plotMethod:b,cdModule:h}),m.zoomScale&&p.push("."+y)}}C.sort(function(t,e){return t.i-e.i});var x=e.plot.selectAll("g.mlayer").data(C,function(t){return t.className});if(x.enter().append("g").attr("class",function(t){return t.className}).classed("mlayer",!0).classed("rangeplot",e.isRangePlot),x.exit().remove(),x.order(),x.each(function(r){var i=n.select(this),l=r.className;r.plotMethod(t,e,r.cdModule,i,o,a),-1===c.clipOnAxisFalseQuery.indexOf("."+l)&&s.setClipUrl(i,e.layerClipId,t)}),A._has("scattergl")&&(g=i.getModule("scattergl"),h=l(r,g)[0],g.plot(t,e,h)),!t._context.staticPlot&&(e._hasClipOnAxisFalse&&(e.clipOnAxisFalseTraces=e.plot.selectAll(c.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),p.length)){var _=e.plot.selectAll(p.join(",")).selectAll(".trace");e.zoomScalePts=_.selectAll("path.point"),e.zoomScaleTxt=_.selectAll(".textpoint")}}function f(t,e){var r=e.plotgroup,n=e.id,i=c.layerValue2layerClass[e.xaxis.layer],o=c.layerValue2layerClass[e.yaxis.layer],a=t._fullLayout._hasOnlyLargeSploms;if(e.mainplot){var s=e.mainplotinfo,l=s.plotgroup,u=n+"-x",A=n+"-y";e.gridlayer=s.gridlayer,e.zerolinelayer=s.zerolinelayer,h(s.overlinesBelow,"path",u),h(s.overlinesBelow,"path",A),h(s.overaxesBelow,"g",u),h(s.overaxesBelow,"g",A),e.plot=h(s.overplot,"g",n),h(s.overlinesAbove,"path",u),h(s.overlinesAbove,"path",A),h(s.overaxesAbove,"g",u),h(s.overaxesAbove,"g",A),e.xlines=l.select(".overlines-"+i).select("."+u),e.ylines=l.select(".overlines-"+o).select("."+A),e.xaxislayer=l.select(".overaxes-"+i).select("."+u),e.yaxislayer=l.select(".overaxes-"+o).select("."+A)}else if(a)e.xlines=h(r,"path","xlines-above"),e.ylines=h(r,"path","ylines-above"),e.xaxislayer=h(r,"g","xaxislayer-above"),e.yaxislayer=h(r,"g","yaxislayer-above");else{var f=h(r,"g","layer-subplot");e.shapelayer=h(f,"g","shapelayer"),e.imagelayer=h(f,"g","imagelayer"),e.gridlayer=h(r,"g","gridlayer"),e.zerolinelayer=h(r,"g","zerolinelayer"),h(r,"path","xlines-below"),h(r,"path","ylines-below"),e.overlinesBelow=h(r,"g","overlines-below"),h(r,"g","xaxislayer-below"),h(r,"g","yaxislayer-below"),e.overaxesBelow=h(r,"g","overaxes-below"),e.plot=h(r,"g","plot"),e.overplot=h(r,"g","overplot"),e.xlines=h(r,"path","xlines-above"),e.ylines=h(r,"path","ylines-above"),e.overlinesAbove=h(r,"g","overlines-above"),h(r,"g","xaxislayer-above"),h(r,"g","yaxislayer-above"),e.overaxesAbove=h(r,"g","overaxes-above"),e.xlines=r.select(".xlines-"+i),e.ylines=r.select(".ylines-"+o),e.xaxislayer=r.select(".xaxislayer-"+i),e.yaxislayer=r.select(".yaxislayer-"+o)}a||(d(e.gridlayer,"g",e.xaxis._id),d(e.gridlayer,"g",e.yaxis._id),e.gridlayer.selectAll("g").map(function(t){return t[0]}).sort(g.idSort)),e.xlines.style("fill","none").classed("crisp",!0),e.ylines.style("fill","none").classed("crisp",!0)}function C(t,e){if(t){var r={};for(var i in t.each(function(t){var i=t[0];n.select(this).remove(),p(i,e),r[i]=!0}),e._plots)for(var o=e._plots[i].overlays||[],a=0;a<o.length;a++){var s=o[a];r[s.id]&&s.plot.selectAll(".trace").remove()}}}function p(t,e){e._draggers.selectAll("g."+t).remove(),e._defs.select("#clip"+e._uid+t+"plot").remove()}r.name="cartesian",r.attr=["xaxis","yaxis"],r.idRoot=["x","y"],r.idRegex=c.idRegex,r.attrRegex=c.attrRegex,r.attributes=t("./attributes"),r.layoutAttributes=t("./layout_attributes"),r.supplyLayoutDefaults=t("./layout_defaults"),r.transitionAxes=t("./transition_axes"),r.finalizeSubplots=function(t,e){var r,n,i,a=e._subplots,s=a.xaxis,l=a.yaxis,u=a.cartesian,h=u.concat(a.gl2d||[]),d={},A={};for(r=0;r<h.length;r++){var f=h[r].split("y");d[f[0]]=1,A["y"+f[1]]=1}for(r=0;r<s.length;r++)d[n=s[r]]||(i=(t[g.id2name(n)]||{}).anchor,c.idRegex.y.test(i)||(i="y"),u.push(n+i),h.push(n+i),A[i]||(A[i]=1,o.pushUnique(l,i)));for(r=0;r<l.length;r++)A[i=l[r]]||(n=(t[g.id2name(i)]||{}).anchor,c.idRegex.x.test(n)||(n="x"),u.push(n+i),h.push(n+i),d[n]||(d[n]=1,o.pushUnique(s,n)));if(!h.length){for(var C in n="",i="",t){if(c.attrRegex.test(C))"x"===C.charAt(0)?(!n||+C.substr(5)<+n.substr(5))&&(n=C):(!i||+C.substr(5)<+i.substr(5))&&(i=C)}n=n?g.name2id(n):"x",i=i?g.name2id(i):"y",s.push(n),l.push(i),u.push(n+i)}},r.plot=function(t,e,r,n){var i,o=t._fullLayout,a=o._subplots.cartesian,s=t.calcdata;if(!Array.isArray(e))for(e=[],i=0;i<s.length;i++)e.push(i);for(i=0;i<a.length;i++){for(var l,g=a[i],c=o._plots[g],u=[],h=0;h<s.length;h++){var d=s[h],f=d[0].trace;f.xaxis+f.yaxis===g&&((-1!==e.indexOf(f.index)||f.carpet)&&(l&&l[0].trace.xaxis+l[0].trace.yaxis===g&&-1!==["tonextx","tonexty","tonext"].indexOf(f.fill)&&-1===u.indexOf(l)&&u.push(l),u.push(d)),l=d)}A(t,c,u,r,n)}},r.clean=function(t,e,r,n){var i,o,a,s=n._plots||{},l=e._plots||{},c=n._subplots||{};if(n._hasOnlyLargeSploms&&!e._hasOnlyLargeSploms)for(a in s)(i=s[a]).plotgroup&&i.plotgroup.remove();var u=n._has&&n._has("gl"),h=e._has&&e._has("gl");if(u&&!h)for(a in s)(i=s[a])._scene&&i._scene.destroy();if(c.xaxis&&c.yaxis){var d=g.listIds({_fullLayout:n});for(o=0;o<d.length;o++){var A=d[o];e[g.id2name(A)]||n._infolayer.selectAll(".g-"+A+"title").remove()}}var f=n._has&&n._has("cartesian"),I=e._has&&e._has("cartesian");if(f&&!I)C(n._cartesianlayer.selectAll(".subplot"),n),n._defs.selectAll(".axesclip").remove(),delete n._axisConstraintGroups;else if(c.cartesian)for(o=0;o<c.cartesian.length;o++){var v=c.cartesian[o];if(!l[v]){var m="."+v+",."+v+"-x,."+v+"-y";n._cartesianlayer.selectAll(m).remove(),p(v,n)}}},r.drawFramework=function(t){var e=t._fullLayout,r=function(t){var e,r,n,i,o,a,s=t._fullLayout,l=s._subplots.cartesian,g=l.length,c=[],u=[];for(e=0;e<g;e++){n=l[e],i=s._plots[n],o=i.xaxis,a=i.yaxis;var h=o._mainAxis,d=a._mainAxis,A=h._id+d._id,f=s._plots[A];i.overlays=[],A!==n&&f?(i.mainplot=A,i.mainplotinfo=f,u.push(n)):(i.mainplot=void 0,i.mainPlotinfo=void 0,c.push(n))}for(e=0;e<u.length;e++)n=u[e],(i=s._plots[n]).mainplotinfo.overlays.push(i);var C=c.concat(u),p=new Array(g);for(e=0;e<g;e++){n=C[e],i=s._plots[n],o=i.xaxis,a=i.yaxis;var I=[n,o.layer,a.layer,o.overlaying||"",a.overlaying||""];for(r=0;r<i.overlays.length;r++)I.push(i.overlays[r].id);p[e]=I}return p}(t),i=e._cartesianlayer.selectAll(".subplot").data(r,String);i.enter().append("g").attr("class",function(t){return"subplot "+t[0]}),i.order(),i.exit().call(C,e),i.each(function(r){var i=r[0],o=e._plots[i];o.plotgroup=n.select(this),f(t,o),o.draglayer=h(e._draggers,"g",i)})},r.rangePlot=function(t,e,r){f(t,e),A(t,e,r),a.style(t)},r.toSVG=function(t){var e=t._fullLayout._glimages,r=n.select(t).selectAll(".svg-container");r.filter(function(t,e){return e===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this.toDataURL("image/png");e.append("svg:image").attr({xmlns:u.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})},r.updateFx=t("./graph_interact").updateFx},{"../../components/drawing":325,"../../constants/xmlns_namespaces":405,"../../lib":426,"../../registry":524,"../get_data":501,"../plots":515,"./attributes":471,"./axis_ids":476,"./constants":479,"./graph_interact":482,"./layout_attributes":485,"./layout_defaults":486,"./transition_axes":495,d3:74}],485:[function(t,e,r){"use strict";var n=t("../font_attributes"),i=t("../../components/color/attributes"),o=t("../../components/drawing/attributes").dash,a=t("../../lib/extend").extendFlat,s=t("../../plot_api/plot_template").templatedArray,l=(t("../../constants/docs").FORMAT_LINK,t("../../constants/docs").DATE_FORMAT_LINK,t("../../constants/numerical").ONEDAY),g=t("./constants"),c=g.HOUR_PATTERN,u=g.WEEKDAY_PATTERN;e.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:i.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:n({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[g.idRegex.x.toString(),g.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[g.idRegex.x.toString(),g.idRegex.y.toString()],editType:"calc"},rangebreaks:s("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[u,c,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:l},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:a({},o,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"data",editType:"none"},tickfont:n({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks"},tickformatstops:s("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:i.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:i.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:i.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",g.idRegex.x.toString(),g.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",g.idRegex.x.toString(),g.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:n({editType:"ticks"})}}},{"../../components/color/attributes":303,"../../components/drawing/attributes":324,"../../constants/docs":400,"../../constants/numerical":404,"../../lib/extend":419,"../../plot_api/plot_template":463,"../font_attributes":499,"./constants":479}],486:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../components/color"),o=t("../../components/fx/helpers").isUnifiedHover,a=t("../../components/fx/hovermode_defaults"),s=t("../../plot_api/plot_template"),l=t("../layout_attributes"),g=t("./layout_attributes"),c=t("./type_defaults"),u=t("./axis_defaults"),h=t("./constraints").handleConstraintDefaults,d=t("./position_defaults"),A=t("./axis_ids"),f=A.id2name,C=A.name2id,p=t("./constants").AX_ID_PATTERN,I=t("../../registry"),v=I.traceIs,m=I.getComponentMethod;function y(t,e,r){Array.isArray(t[e])?t[e].push(r):t[e]=[r]}e.exports=function(t,e,r){var A,I,b={},x={},_={},w={},k={},T={},M={},E={},O={},S={};for(A=0;A<r.length;A++){var R=r[A];if(v(R,"cartesian")||v(R,"gl2d")){var D,L;if(R.xaxis)D=f(R.xaxis),y(b,D,R);else if(R.xaxes)for(I=0;I<R.xaxes.length;I++)y(b,f(R.xaxes[I]),R);if(R.yaxis)L=f(R.yaxis),y(b,L,R);else if(R.yaxes)for(I=0;I<R.yaxes.length;I++)y(b,f(R.yaxes[I]),R);if("funnel"===R.type?"h"===R.orientation?(D&&(x[D]=!0),L&&(M[L]=!0)):L&&(_[L]=!0):"image"===R.type?(L&&(E[L]=!0),D&&(E[D]=!0)):(L&&(k[L]=!0,T[L]=!0),v(R,"carpet")&&("carpet"!==R.type||R._cheater)||D&&(w[D]=!0)),"carpet"===R.type&&R._cheater&&D&&(x[D]=!0),v(R,"2dMap")&&(O[D]=!0,O[L]=!0),v(R,"oriented"))S["h"===R.orientation?L:D]=!0}}var P=e._subplots,N=P.xaxis,z=P.yaxis,F=n.simpleMap(N,f),B=n.simpleMap(z,f),j=F.concat(B),V=i.background;N.length&&z.length&&(V=n.coerce(t,e,l,"plot_bgcolor"));var G,U,Z,H,W,Y=i.combine(V,e.paper_bgcolor);function X(){var t=b[G]||[];W._traceIndices=t.map(function(t){return t._expandedIndex}),W._annIndices=[],W._shapeIndices=[],W._imgIndices=[],W._subplotsWith=[],W._counterAxes=[],W._name=W._attr=G,W._id=U}function q(t,e){return n.coerce(H,W,g,t,e)}function Q(t,e){return n.coerce2(H,W,g,t,e)}function K(t){return"x"===t?z:N}function J(e,r){for(var n="x"===e?F:B,i=[],o=0;o<n.length;o++){var a=n[o];a===r||(t[a]||{}).overlaying||i.push(C(a))}return i}var $={x:K("x"),y:K("y")},tt=$.x.concat($.y),et={},rt=[];function nt(){var t=H.matches;p.test(t)&&-1===tt.indexOf(t)&&(et[t]=H.type,rt=Object.keys(et))}var it=a(t,e,r),ot=o(it);for(A=0;A<j.length;A++){G=j[A],U=C(G),Z=G.charAt(0),n.isPlainObject(t[G])||(t[G]={}),H=t[G],W=s.newContainer(e,G,Z+"axis"),X();var at="x"===Z&&!w[G]&&x[G]||"y"===Z&&!k[G]&&_[G],st="y"===Z&&(!T[G]&&M[G]||E[G]),lt={letter:Z,font:e.font,outerTicks:O[G],showGrid:!S[G],data:b[G]||[],bgColor:Y,calendar:e.calendar,automargin:!0,visibleDflt:at,reverseDflt:st,splomStash:((e._splomAxes||{})[Z]||{})[U]};q("uirevision",e.uirevision),c(H,W,q,lt),u(H,W,q,lt,e);var gt=ot&&Z===it.charAt(0),ct=Q("spikecolor",ot?W.color:void 0),ut=Q("spikethickness",ot?1.5:void 0),ht=Q("spikedash",ot?"dot":void 0),dt=Q("spikemode",ot?"across":void 0),At=Q("spikesnap",ot?"hovered data":void 0);q("showspikes",!!(gt||ct||ut||ht||dt||At))||(delete W.spikecolor,delete W.spikethickness,delete W.spikedash,delete W.spikemode,delete W.spikesnap),d(H,W,q,{letter:Z,counterAxes:$[Z],overlayableAxes:J(Z,G),grid:e.grid}),q("title.standoff"),nt(),W._input=H}for(A=0;A<rt.length;){U=rt[A++],Z=(G=f(U)).charAt(0),n.isPlainObject(t[G])||(t[G]={}),H=t[G],W=s.newContainer(e,G,Z+"axis"),X();var ft={letter:Z,font:e.font,outerTicks:O[G],showGrid:!S[G],data:[],bgColor:Y,calendar:e.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,splomStash:((e._splomAxes||{})[Z]||{})[U]};q("uirevision",e.uirevision),W.type=et[U]||"linear",u(H,W,q,ft,e),d(H,W,q,{letter:Z,counterAxes:$[Z],overlayableAxes:J(Z,G),grid:e.grid}),q("fixedrange"),nt(),W._input=H}var Ct=m("rangeslider","handleDefaults"),pt=m("rangeselector","handleDefaults");for(A=0;A<F.length;A++)G=F[A],H=t[G],W=e[G],Ct(t,e,G),"date"===W.type&&pt(H,W,e,B,W.calendar),q("fixedrange");for(A=0;A<B.length;A++){G=B[A],H=t[G],W=e[G];var It=e[f(W.anchor)];q("fixedrange",m("rangeslider","isVisible")(It))}var vt=e._axisConstraintGroups=[],mt=e._axisMatchGroups=[],yt=tt.concat(rt),bt=j.concat(n.simpleMap(rt,f));for(A=0;A<bt.length;A++){var xt,_t;Z=(G=bt[A]).charAt(0),H=t[G],W=e[G],xt="y"===Z&&!H.hasOwnProperty("scaleanchor")&&E[G]?W.anchor:void 0,_t=!H.hasOwnProperty("constrain")&&E[G]?"domain":void 0,h(H,W,q,{allAxisIds:yt,layoutOut:e,scaleanchorDflt:xt,constrainDflt:_t})}for(A=0;A<mt.length;A++){var wt=mt[A],kt=null,Tt=null;for(U in wt)(W=e[f(U)]).matches||(kt=W.range,Tt=W.autorange);if(null===kt||null===Tt)for(U in wt){kt=(W=e[f(U)]).range,Tt=W.autorange;break}for(U in wt)(W=e[f(U)]).matches&&(W.range=kt.slice(),W.autorange=Tt),W._matchGroup=wt;if(vt.length)for(U in wt)for(I=0;I<vt.length;I++){var Mt=vt[I];for(var Et in Mt)U===Et&&(n.warn("Axis "+Et+" is set with both a *scaleanchor* and *matches* constraint; ignoring the scale constraint."),delete Mt[Et],Object.keys(Mt).length<2&&vt.splice(I,1))}}}},{"../../components/color":304,"../../components/fx/helpers":339,"../../components/fx/hovermode_defaults":342,"../../lib":426,"../../plot_api/plot_template":463,"../../registry":524,"../layout_attributes":513,"./axis_defaults":475,"./axis_ids":476,"./constants":479,"./constraints":480,"./layout_attributes":485,"./position_defaults":488,"./type_defaults":496}],487:[function(t,e,r){"use strict";var n=t("tinycolor2").mix,i=t("../../components/color/attributes").lightFraction,o=t("../../lib");e.exports=function(t,e,r,a){var s=(a=a||{}).dfltColor;function l(r,n){return o.coerce2(t,e,a.attributes,r,n)}var g=l("linecolor",s),c=l("linewidth");r("showline",a.showLine||!!g||!!c)||(delete e.linecolor,delete e.linewidth);var u=l("gridcolor",n(s,a.bgColor,a.blend||i).toRgbString()),h=l("gridwidth");if(r("showgrid",a.showGrid||!!u||!!h)||(delete e.gridcolor,delete e.gridwidth),!a.noZeroLine){var d=l("zerolinecolor",s),A=l("zerolinewidth");r("zeroline",a.showGrid||!!d||!!A)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":303,"../../lib":426,tinycolor2:693}],488:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../../lib");e.exports=function(t,e,r,o){var a,s,l,g,c=o.counterAxes||[],u=o.overlayableAxes||[],h=o.letter,d=o.grid;d&&(s=d._domains[h][d._axisMap[e._id]],a=d._anchors[e._id],s&&(l=d[h+"side"].split(" ")[0],g=d.domain[h]["right"===l||"top"===l?1:0])),s=s||[0,1],a=a||(n(t.position)?"free":c[0]||"free"),l=l||("x"===h?"bottom":"left"),g=g||0,"free"===i.coerce(t,e,{anchor:{valType:"enumerated",values:["free"].concat(c),dflt:a}},"anchor")&&r("position",g),i.coerce(t,e,{side:{valType:"enumerated",values:"x"===h?["bottom","top"]:["left","right"],dflt:l}},"side");var A=!1;if(u.length&&(A=i.coerce(t,e,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!A){var f=r("domain",s);f[0]>f[1]-1/4096&&(e.domain=s),i.noneOrAll(t.domain,e.domain,s)}return r("layer"),e}},{"../../lib":426,"fast-isnumeric":145}],489:[function(t,e,r){"use strict";var n=t("../../constants/alignment").FROM_BL;e.exports=function(t,e,r){void 0===r&&(r=n[t.constraintoward||"center"]);var i=[t.r2l(t.range[0]),t.r2l(t.range[1])],o=i[0]+(i[1]-i[0])*r;t.range=t._input.range=[t.l2r(o+(i[0]-o)*e),t.l2r(o+(i[1]-o)*e)]}},{"../../constants/alignment":399}],490:[function(t,e,r){"use strict";var n=t("polybooljs"),i=t("../../registry"),o=t("../../components/color"),a=t("../../components/fx"),s=t("../../lib"),l=t("../../lib/polygon"),g=t("../../lib/throttle"),c=t("../../components/fx/helpers").makeEventData,u=t("./axis_ids").getFromId,h=t("../../lib/clear_gl_canvases"),d=t("../../plot_api/subroutines").redrawReglTraces,A=t("./constants"),f=A.MINSELECT,C=l.filter,p=l.tester;function I(t){return t._id}function v(t,e,r,n,i,o,a){var s,l,g,c,u,h,d,A,f,C=e._hoverdata,p=e._fullLayout.clickmode.indexOf("event")>-1,I=[];if(function(t){return t&&Array.isArray(t)&&!0!==t[0].hoverOnBox}(C)){x(t,e,o);var v=function(t,e){var r,n,i=t[0],o=-1,a=[];for(n=0;n<e.length;n++)if(r=e[n],i.fullData._expandedIndex===r.cd[0].trace._expandedIndex){if(!0===i.hoverOnBox)break;void 0!==i.pointNumber?o=i.pointNumber:void 0!==i.binNumber&&(o=i.binNumber,a=i.pointNumbers);break}return{pointNumber:o,pointNumbers:a,searchInfo:r}}(C,s=w(e,r,n,i));if(v.pointNumbers.length>0?function(t,e){var r,n,i,o=[];for(i=0;i<t.length;i++)(r=t[i]).cd[0].trace.selectedpoints&&r.cd[0].trace.selectedpoints.length>0&&o.push(r);if(1===o.length&&o[0]===e.searchInfo&&(n=e.searchInfo.cd[0].trace).selectedpoints.length===e.pointNumbers.length){for(i=0;i<e.pointNumbers.length;i++)if(n.selectedpoints.indexOf(e.pointNumbers[i])<0)return!1;return!0}return!1}(s,v):function(t){var e,r,n,i=0;for(n=0;n<t.length;n++)if(e=t[n],(r=e.cd[0].trace).selectedpoints){if(r.selectedpoints.length>1)return!1;if((i+=r.selectedpoints.length)>1)return!1}return 1===i}(s)&&(h=T(v))){for(a&&a.remove(),f=0;f<s.length;f++)(l=s[f])._module.selectPoints(l,!1);M(e,s),_(o),p&&e.emit("plotly_deselect",null)}else{for(d=t.shiftKey&&(void 0!==h?h:T(v)),g=function(t,e,r){return{pointNumber:t,searchInfo:e,subtract:r}}(v.pointNumber,v.searchInfo,d),c=b(o.selectionDefs.concat([g])),f=0;f<s.length;f++)if(u=E(s[f]._module.selectPoints(s[f],c),s[f]),I.length)for(var m=0;m<u.length;m++)I.push(u[m]);else I=u;M(e,s,A={points:I}),g&&o&&o.selectionDefs.push(g),a&&k(o.mergedPolygons,a),p&&e.emit("plotly_selected",A)}}}function m(t){return"pointNumber"in t&&"searchInfo"in t}function y(t){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(e,r,n,i){var o=t.searchInfo.cd[0].trace._expandedIndex;return i.cd[0].trace._expandedIndex===o&&n===t.pointNumber},isRect:!1,degenerate:!1,subtract:t.subtract}}function b(t){for(var e=[],r=m(t[0])?0:t[0][0][0],n=r,i=m(t[0])?0:t[0][0][1],o=i,a=0;a<t.length;a++)if(m(t[a]))e.push(y(t[a]));else{var s=l.tester(t[a]);s.subtract=t[a].subtract,e.push(s),r=Math.min(r,s.xmin),n=Math.max(n,s.xmax),i=Math.min(i,s.ymin),o=Math.max(o,s.ymax)}return{xmin:r,xmax:n,ymin:i,ymax:o,pts:[],contains:function(t,r,n,i){for(var o=!1,a=0;a<e.length;a++)e[a].contains(t,r,n,i)&&(o=!1===e[a].subtract);return o},isRect:!1,degenerate:!1}}function x(t,e,r){var n=e._fullLayout,i=r.plotinfo,o=n._lastSelectedSubplot&&n._lastSelectedSubplot===i.id,a=t.shiftKey||t.altKey;o&&a&&i.selection&&i.selection.selectionDefs&&!r.selectionDefs?(r.selectionDefs=i.selection.selectionDefs,r.mergedPolygons=i.selection.mergedPolygons):a&&i.selection||_(r),o||(O(e),n._lastSelectedSubplot=i.id)}function _(t){var e=t.plotinfo;e.selection={},e.selection.selectionDefs=t.selectionDefs=[],e.selection.mergedPolygons=t.mergedPolygons=[]}function w(t,e,r,n){var i,o,a,s=[],l=e.map(I),g=r.map(I);for(a=0;a<t.calcdata.length;a++)if(!0===(o=(i=t.calcdata[a])[0].trace).visible&&o._module&&o._module.selectPoints)if(!n||o.subplot!==n&&o.geo!==n)if("splom"===o.type&&o._xaxes[l[0]]&&o._yaxes[g[0]]){var c=d(o._module,i,e[0],r[0]);c.scene=t._fullLayout._splomScenes[o.uid],s.push(c)}else if("sankey"===o.type){var h=d(o._module,i,e[0],r[0]);s.push(h)}else{if(-1===l.indexOf(o.xaxis))continue;if(-1===g.indexOf(o.yaxis))continue;s.push(d(o._module,i,u(t,o.xaxis),u(t,o.yaxis)))}else s.push(d(o._module,i,e[0],r[0]));return s;function d(t,e,r,n){return{_module:t,cd:e,xaxis:r,yaxis:n}}}function k(t,e){var r,n,i=[];for(r=0;r<t.length;r++){var o=t[r];i.push(o.join("L")+"L"+o[0])}n=t.length>0?"M"+i.join("M")+"Z":"M0,0Z",e.attr("d",n)}function T(t){var e=t.searchInfo.cd[0].trace,r=t.pointNumber,n=t.pointNumbers,i=n.length>0?n[0]:r;return!!e.selectedpoints&&e.selectedpoints.indexOf(i)>-1}function M(t,e,r){var n,o,a,s;for(n=0;n<e.length;n++){var l=e[n].cd[0].trace._fullInput,g=t._fullLayout._tracePreGUI[l.uid]||{};void 0===g.selectedpoints&&(g.selectedpoints=l._input.selectedpoints||null)}if(r){var c=r.points||[];for(n=0;n<e.length;n++)(s=e[n].cd[0].trace)._input.selectedpoints=s._fullInput.selectedpoints=[],s._fullInput!==s&&(s.selectedpoints=[]);for(n=0;n<c.length;n++){var u=c[n],A=u.data,f=u.fullData;u.pointIndices?([].push.apply(A.selectedpoints,u.pointIndices),s._fullInput!==s&&[].push.apply(f.selectedpoints,u.pointIndices)):(A.selectedpoints.push(u.pointIndex),s._fullInput!==s&&f.selectedpoints.push(u.pointIndex))}}else for(n=0;n<e.length;n++)delete(s=e[n].cd[0].trace).selectedpoints,delete s._input.selectedpoints,s._fullInput!==s&&delete s._fullInput.selectedpoints;var C=!1;for(n=0;n<e.length;n++){s=(a=(o=e[n]).cd)[0].trace,i.traceIs(s,"regl")&&(C=!0);var p=o._module,I=p.styleOnSelect||p.style;I&&(I(t,a,a[0].node3),a[0].nodeRangePlot3&&I(t,a,a[0].nodeRangePlot3))}C&&(h(t),d(t))}function E(t,e){if(Array.isArray(t))for(var r=e.cd,n=e.cd[0].trace,i=0;i<t.length;i++)t[i]=c(t[i],n,r);return t}function O(t){var e=(t._fullLayout||{})._zoomlayer;e&&e.selectAll(".select-outline").remove()}e.exports={prepSelect:function(t,e,r,i,l){var c,u,h,d,I,m,y,T=i.gd,O=T._fullLayout,S=O._zoomlayer,R=i.element.getBoundingClientRect(),D=i.plotinfo,L=D.xaxis._offset,P=D.yaxis._offset,N=e-R.left,z=r-R.top,F=N,B=z,j="M"+N+","+z,V=i.xaxes[0]._length,G=i.yaxes[0]._length,U=i.xaxes.concat(i.yaxes),Z=t.altKey;x(t,T,i),"lasso"===l&&(c=C([[N,z]],A.BENDPX));var H=S.selectAll("path.select-outline-"+D.id).data([1,2]);H.enter().append("path").attr("class",function(t){return"select-outline select-outline-"+t+" select-outline-"+D.id}).attr("transform","translate("+L+", "+P+")").attr("d",j+"Z");var W,Y=S.append("path").attr("class","zoombox-corners").style({fill:o.background,stroke:o.defaultLine,"stroke-width":1}).attr("transform","translate("+L+", "+P+")").attr("d","M0,0Z"),X=O._uid+A.SELECTID,q=[],Q=w(T,i.xaxes,i.yaxes,i.subplot);function K(t,e){return"log"===t.type?t.p2d(e):t.p2r(e)}function J(t){var e="y"===t._id.charAt(0)?1:0;return function(r){return K(t,r[e])}}function $(t,e){return t-e}W=D.fillRangeItems?D.fillRangeItems:"select"===l?function(t,e){var r=t.range={};for(I=0;I<U.length;I++){var n=U[I],i=n._id.charAt(0);r[n._id]=[K(n,e[i+"min"]),K(n,e[i+"max"])].sort($)}}:function(t,e,r){var n=t.lassoPoints={};for(I=0;I<U.length;I++){var i=U[I];n[i._id]=r.filtered.map(J(i))}},i.moveFn=function(t,e){F=Math.max(0,Math.min(V,t+N)),B=Math.max(0,Math.min(G,e+z));var r=Math.abs(F-N),o=Math.abs(B-z);if("select"===l){var a=O.selectdirection;"h"===(a="any"===O.selectdirection?o<Math.min(.6*r,f)?"h":r<Math.min(.6*o,f)?"v":"d":O.selectdirection)?((d=[[N,0],[N,G],[F,G],[F,0]]).xmin=Math.min(N,F),d.xmax=Math.max(N,F),d.ymin=Math.min(0,G),d.ymax=Math.max(0,G),Y.attr("d","M"+d.xmin+","+(z-f)+"h-4v"+2*f+"h4ZM"+(d.xmax-1)+","+(z-f)+"h4v"+2*f+"h-4Z")):"v"===a?((d=[[0,z],[0,B],[V,B],[V,z]]).xmin=Math.min(0,V),d.xmax=Math.max(0,V),d.ymin=Math.min(z,B),d.ymax=Math.max(z,B),Y.attr("d","M"+(N-f)+","+d.ymin+"v-4h"+2*f+"v4ZM"+(N-f)+","+(d.ymax-1)+"v4h"+2*f+"v-4Z")):"d"===a&&((d=[[N,z],[N,B],[F,B],[F,z]]).xmin=Math.min(N,F),d.xmax=Math.max(N,F),d.ymin=Math.min(z,B),d.ymax=Math.max(z,B),Y.attr("d","M0,0Z"))}else"lasso"===l&&(c.addPt([F,B]),d=c.filtered);i.selectionDefs&&i.selectionDefs.length?(h=function(t,e,r){return r?n.difference({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions:n.union({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions}(i.mergedPolygons,d,Z),d.subtract=Z,u=b(i.selectionDefs.concat([d]))):(h=[d],u=p(d)),k(h,H),g.throttle(X,A.SELECTDELAY,function(){var t;q=[];var e,r=[];for(I=0;I<Q.length;I++)if(e=(m=Q[I])._module.selectPoints(m,u),r.push(e),t=E(e,m),q.length)for(var n=0;n<t.length;n++)q.push(t[n]);else q=t;M(T,Q,y={points:q}),W(y,d,c),i.gd.emit("plotly_selecting",y)})},i.clickFn=function(t,e){var r=O.clickmode;Y.remove(),g.done(X).then(function(){if(g.clear(X),2===t){for(H.remove(),I=0;I<Q.length;I++)(m=Q[I])._module.selectPoints(m,!1);M(T,Q),_(i),T.emit("plotly_deselect",null)}else r.indexOf("select")>-1&&v(e,T,i.xaxes,i.yaxes,i.subplot,i,H),"event"===r&&T.emit("plotly_selected",void 0);a.click(T,e)}).catch(s.error)},i.doneFn=function(){Y.remove(),g.done(X).then(function(){g.clear(X),i.gd.emit("plotly_selected",y),d&&i.selectionDefs&&(d.subtract=Z,i.selectionDefs.push(d),i.mergedPolygons.length=0,[].push.apply(i.mergedPolygons,h)),i.doneFnCompleted&&i.doneFnCompleted(q)}).catch(s.error)}},clearSelect:O,selectOnClick:v}},{"../../components/color":304,"../../components/fx":343,"../../components/fx/helpers":339,"../../lib":426,"../../lib/clear_gl_canvases":413,"../../lib/polygon":438,"../../lib/throttle":451,"../../plot_api/subroutines":464,"../../registry":524,"./axis_ids":476,"./constants":479,polybooljs:642}],491:[function(t,e,r){"use strict";var n=t("d3"),i=t("fast-isnumeric"),o=t("../../lib"),a=o.cleanNumber,s=o.ms2DateTime,l=o.dateTime2ms,g=o.ensureNumber,c=o.isArrayOrTypedArray,u=t("../../constants/numerical"),h=u.FP_SAFE,d=u.BADNUM,A=u.LOG_CLIP,f=u.ONEDAY,C=u.ONEHOUR,p=u.ONEMIN,I=u.ONESEC,v=t("./axis_ids"),m=t("./constants"),y=m.HOUR_PATTERN,b=m.WEEKDAY_PATTERN;function x(t){return Math.pow(10,t)}function _(t){return null!==t&&void 0!==t}e.exports=function(t,e){e=e||{};var r=t._id||"x",u=r.charAt(0);function w(e,r){if(e>0)return Math.log(e)/Math.LN10;if(e<=0&&r&&t.range&&2===t.range.length){var n=t.range[0],i=t.range[1];return.5*(n+i-2*A*Math.abs(n-i))}return d}function k(e,r,n){var a=l(e,n||t.calendar);if(a===d){if(!i(e))return d;e=+e;var s=Math.floor(10*o.mod(e+.05,1)),g=Math.round(e-s/10);a=l(new Date(g))+s/10}return a}function T(e,r,n){return s(e,r,n||t.calendar)}function M(e){return t._categories[Math.round(e)]}function E(e){if(_(e)){if(void 0===t._categoriesMap&&(t._categoriesMap={}),void 0!==t._categoriesMap[e])return t._categoriesMap[e];t._categories.push("number"==typeof e?String(e):e);var r=t._categories.length-1;return t._categoriesMap[e]=r,r}return d}function O(e){if(t._categoriesMap)return t._categoriesMap[e]}function S(t){var e=O(t);return void 0!==e?e:i(t)?+t:void 0}function R(t,e,r){return n.round(r+e*t,2)}function D(t,e,r){return(t-r)/e}var L=function(e){return i(e)?R(e,t._m,t._b):d},P=function(e){return D(e,t._m,t._b)};if(t.rangebreaks){var N="y"===u;L=function(e){if(!i(e))return d;var r=t._rangebreaks.length;if(!r)return R(e,t._m,t._b);var n=N;t.range[0]>t.range[1]&&(n=!n);for(var o=n?-1:1,a=o*e,s=0,l=0;l<r;l++){var g=o*t._rangebreaks[l].min,c=o*t._rangebreaks[l].max;if(a<g)break;if(!(a>c)){s=a<(g+c)/2?l:l+1;break}s=l+1}var u=t._B[s]||0;return isFinite(u)?R(e,t._m2,u):0},P=function(e){var r=t._rangebreaks.length;if(!r)return D(e,t._m,t._b);for(var n=0,i=0;i<r&&!(e<t._rangebreaks[i].pmin);i++)e>t._rangebreaks[i].pmax&&(n=i+1);return D(e,t._m2,t._B[n])}}t.c2l="log"===t.type?w:g,t.l2c="log"===t.type?x:g,t.l2p=L,t.p2l=P,t.c2p="log"===t.type?function(t,e){return L(w(t,e))}:L,t.p2c="log"===t.type?function(t){return x(P(t))}:P,-1!==["linear","-"].indexOf(t.type)?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=a,t.c2d=t.c2r=t.l2d=t.l2r=g,t.d2p=t.r2p=function(e){return t.l2p(a(e))},t.p2d=t.p2r=P,t.cleanPos=g):"log"===t.type?(t.d2r=t.d2l=function(t,e){return w(a(t),e)},t.r2d=t.r2c=function(t){return x(a(t))},t.d2c=t.r2l=a,t.c2d=t.l2r=g,t.c2r=w,t.l2d=x,t.d2p=function(e,r){return t.l2p(t.d2r(e,r))},t.p2d=function(t){return x(P(t))},t.r2p=function(e){return t.l2p(a(e))},t.p2r=P,t.cleanPos=g):"date"===t.type?(t.d2r=t.r2d=o.identity,t.d2c=t.r2c=t.d2l=t.r2l=k,t.c2d=t.c2r=t.l2d=t.l2r=T,t.d2p=t.r2p=function(e,r,n){return t.l2p(k(e,0,n))},t.p2d=t.p2r=function(t,e,r){return T(P(t),e,r)},t.cleanPos=function(e){return o.cleanDate(e,d,t.calendar)}):"category"===t.type?(t.d2c=t.d2l=E,t.r2d=t.c2d=t.l2d=M,t.d2r=t.d2l_noadd=S,t.r2c=function(e){var r=S(e);return void 0!==r?r:t.fraction2r(.5)},t.l2r=t.c2r=g,t.r2l=S,t.d2p=function(e){return t.l2p(t.r2c(e))},t.p2d=function(t){return M(P(t))},t.r2p=t.d2p,t.p2r=P,t.cleanPos=function(t){return"string"==typeof t&&""!==t?t:g(t)}):"multicategory"===t.type&&(t.r2d=t.c2d=t.l2d=M,t.d2r=t.d2l_noadd=S,t.r2c=function(e){var r=S(e);return void 0!==r?r:t.fraction2r(.5)},t.r2c_just_indices=O,t.l2r=t.c2r=g,t.r2l=S,t.d2p=function(e){return t.l2p(t.r2c(e))},t.p2d=function(t){return M(P(t))},t.r2p=t.d2p,t.p2r=P,t.cleanPos=function(t){return Array.isArray(t)||"string"==typeof t&&""!==t?t:g(t)},t.setupMultiCategory=function(n){var i,a,s=t._traceIndices,l=e._axisMatchGroups;if(l&&l.length&&0===t._categories.length)for(i=0;i<l.length;i++){var g=l[i];if(g[r])for(var h in g)if(h!==r){var d=e[v.id2name(h)];s=s.concat(d._traceIndices)}}var A=[[0,{}],[0,{}]],f=[];for(i=0;i<s.length;i++){var C=n[s[i]];if(u in C){var p=C[u],I=C._length||o.minRowLength(p);if(c(p[0])&&c(p[1]))for(a=0;a<I;a++){var m=p[0][a],y=p[1][a];_(m)&&_(y)&&(f.push([m,y]),m in A[0][1]||(A[0][1][m]=A[0][0]++),y in A[1][1]||(A[1][1][y]=A[1][0]++))}}}for(f.sort(function(t,e){var r=A[0][1],n=r[t[0]]-r[e[0]];if(n)return n;var i=A[1][1];return i[t[1]]-i[e[1]]}),i=0;i<f.length;i++)E(f[i])}),t.fraction2r=function(e){var r=t.r2l(t.range[0]),n=t.r2l(t.range[1]);return t.l2r(r+e*(n-r))},t.r2fraction=function(e){var r=t.r2l(t.range[0]),n=t.r2l(t.range[1]);return(t.r2l(e)-r)/(n-r)},t.cleanRange=function(e,r){r||(r={}),e||(e="range");var n,a,s=o.nestedProperty(t,e).get();if(a=(a="date"===t.type?o.dfltRange(t.calendar):"y"===u?m.DFLTRANGEY:r.dfltRange||m.DFLTRANGEX).slice(),"tozero"!==t.rangemode&&"nonnegative"!==t.rangemode||(a[0]=0),s&&2===s.length)for("date"!==t.type||t.autorange||(s[0]=o.cleanDate(s[0],d,t.calendar),s[1]=o.cleanDate(s[1],d,t.calendar)),n=0;n<2;n++)if("date"===t.type){if(!o.isDateTime(s[n],t.calendar)){t[e]=a;break}if(t.r2l(s[0])===t.r2l(s[1])){var l=o.constrain(t.r2l(s[0]),o.MIN_MS+1e3,o.MAX_MS-1e3);s[0]=t.l2r(l-1e3),s[1]=t.l2r(l+1e3);break}}else{if(!i(s[n])){if(!i(s[1-n])){t[e]=a;break}s[n]=s[1-n]*(n?10:.1)}if(s[n]<-h?s[n]=-h:s[n]>h&&(s[n]=h),s[0]===s[1]){var g=Math.max(1,Math.abs(1e-6*s[0]));s[0]-=g,s[1]+=g}}else o.nestedProperty(t,e).set(a)},t.setScale=function(r){var n=e._size;if(t.overlaying){var i=v.getFromId({_fullLayout:e},t.overlaying);t.domain=i.domain}var o=r&&t._r?"_r":"range",a=t.calendar;t.cleanRange(o);var s,l,g=t.r2l(t[o][0],a),c=t.r2l(t[o][1],a),h="y"===u;if((h?(t._offset=n.t+(1-t.domain[1])*n.h,t._length=n.h*(t.domain[1]-t.domain[0]),t._m=t._length/(g-c),t._b=-t._m*c):(t._offset=n.l+t.domain[0]*n.w,t._length=n.w*(t.domain[1]-t.domain[0]),t._m=t._length/(c-g),t._b=-t._m*g),t._rangebreaks=[],t._lBreaks=0,t._m2=0,t._B=[],t.rangebreaks)&&(t._rangebreaks=t.locateBreaks(Math.min(g,c),Math.max(g,c)),t._rangebreaks.length)){for(s=0;s<t._rangebreaks.length;s++)l=t._rangebreaks[s],t._lBreaks+=Math.abs(l.max-l.min);var d=h;g>c&&(d=!d),d&&t._rangebreaks.reverse();var A=d?-1:1;for(t._m2=A*t._length/(Math.abs(c-g)-t._lBreaks),t._B.push(-t._m2*(h?c:g)),s=0;s<t._rangebreaks.length;s++)l=t._rangebreaks[s],t._B.push(t._B[t._B.length-1]-A*t._m2*(l.max-l.min));for(s=0;s<t._rangebreaks.length;s++)(l=t._rangebreaks[s]).pmin=L(l.min),l.pmax=L(l.max)}if(!isFinite(t._m)||!isFinite(t._b)||t._length<0)throw e._replotting=!1,new Error("Something went wrong with axis scaling")},t.maskBreaks=function(e){for(var r,n,i,s,l,g=t.rangebreaks||[],c=0;c<g.length;c++){var u=g[c];if(u.enabled)if(u.bounds){var h=u.pattern;switch(n=(r=o.simpleMap(u.bounds,h?a:t.d2c))[0],i=r[1],h){case b:s=(l=new Date(e)).getUTCDay(),n>i&&(i+=7,s<n&&(s+=7));break;case y:s=(l=new Date(e)).getUTCHours()+(l.getUTCMinutes()/60+l.getUTCSeconds()/3600+l.getUTCMilliseconds()/36e5),n>i&&(i+=24,s<n&&(s+=24));break;case"":s=e}if(s>=n&&s<i)return d}else for(var A=o.simpleMap(u.values,t.d2c).sort(o.sorterAsc),f=0;f<A.length;f++)if(i=(n=A[f])+u.dvalue,e>=n&&e<i)return d}return e},t.locateBreaks=function(e,r){var n,i,s,l,g=[];if(!t.rangebreaks)return g;var c=t.rangebreaks.slice().sort(function(t,e){return t.pattern===b&&e.pattern===y?-1:e.pattern===b&&t.pattern===y?1:0}),u=function(t,n){if((t=o.constrain(t,e,r))!==(n=o.constrain(n,e,r))){for(var i=!0,a=0;a<g.length;a++){var s=g[a];t>s.max||n<s.min||(t<s.min&&(s.min=t),n>s.max&&(s.max=n),i=!1)}i&&g.push({min:t,max:n})}};for(n=0;n<c.length;n++){var h=c[n];if(h.enabled)if(h.bounds){var d=e,A=r;h.pattern&&(d=Math.floor(d)),s=(i=o.simpleMap(h.bounds,h.pattern?a:t.r2l))[0],l=i[1];var v,m,x=new Date(d);switch(h.pattern){case b:m=7*f,v=(l-s+(l<s?7:0))*f,d+=s*f-(x.getUTCDay()*f+x.getUTCHours()*C+x.getUTCMinutes()*p+x.getUTCSeconds()*I+x.getUTCMilliseconds());break;case y:m=f,v=(l-s+(l<s?24:0))*C,d+=s*C-(x.getUTCHours()*C+x.getUTCMinutes()*p+x.getUTCSeconds()*I+x.getUTCMilliseconds());break;default:d=Math.min(i[0],i[1]),v=m=(A=Math.max(i[0],i[1]))-d}for(var _=d;_<A;_+=m)u(_,_+v)}else for(var w=o.simpleMap(h.values,t.d2c),k=0;k<w.length;k++)u(s=w[k],l=s+h.dvalue)}return g.sort(function(t,e){return t.min-e.min}),g},t.makeCalcdata=function(e,r){var n,i,a,s,l=t.type,g="date"===l&&e[r+"calendar"];if(r in e){if(n=e[r],s=e._length||o.minRowLength(n),o.isTypedArray(n)&&("linear"===l||"log"===l)){if(s===n.length)return n;if(n.subarray)return n.subarray(0,s)}if("multicategory"===l)return function(t,e){for(var r=new Array(e),n=0;n<e;n++){var i=(t[0]||[])[n],o=(t[1]||[])[n];r[n]=O([i,o])}return r}(n,s);for(i=new Array(s),a=0;a<s;a++)i[a]=t.d2c(n[a],0,g)}else{var c=r+"0"in e?t.d2c(e[r+"0"],0,g):0,u=e["d"+r]?Number(e["d"+r]):1;for(n=e[{x:"y",y:"x"}[r]],s=e._length||n.length,i=new Array(s),a=0;a<s;a++)i[a]=c+a*u}if(t.rangebreaks)for(a=0;a<s;a++)i[a]=t.maskBreaks(i[a]);return i},t.isValidRange=function(e){return Array.isArray(e)&&2===e.length&&i(t.r2l(e[0]))&&i(t.r2l(e[1]))},t.isPtWithinRange=function(e,r){var n=t.c2l(e[u],null,r),i=t.r2l(t.range[0]),o=t.r2l(t.range[1]);return i<o?i<=n&&n<=o:o<=n&&n<=i},t.clearCalc=function(){var n=function(){t._categories=[],t._categoriesMap={}},i=e._axisMatchGroups;if(i&&i.length){for(var o=!1,a=0;a<i.length;a++){var s=i[a];if(s[r]){o=!0;var l=null,g=null;for(var c in s){var u=e[v.id2name(c)];if(u._categories){l=u._categories,g=u._categoriesMap;break}}l&&g?(t._categories=l,t._categoriesMap=g):n();break}}o||n()}else n();if(t._initialCategories)for(var h=0;h<t._initialCategories.length;h++)E(t._initialCategories[h])},t.sortByInitialCategories=function(){var n=[];if(t._categories=[],t._categoriesMap={},t._initialCategories)for(var i=0;i<t._initialCategories.length;i++)E(t._initialCategories[i]);n=n.concat(t._traceIndices);var o=t._matchGroup;for(var a in o)if(r!==a){var s=e[v.id2name(a)];s._categories=t._categories,s._categoriesMap=t._categoriesMap,n=n.concat(s._traceIndices)}return n};var z=e._d3locale;"date"===t.type&&(t._dateFormat=z?z.timeFormat.utc:n.time.format.utc,t._extraFormat=e._extraFormat),t._separators=e.separators,t._numFormat=z?z.numberFormat:n.format,delete t._minDtick,delete t._forceTick0}},{"../../constants/numerical":404,"../../lib":426,"./axis_ids":476,"./constants":479,d3:74,"fast-isnumeric":145}],492:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("./layout_attributes"),o=t("../array_container_defaults");function a(t){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(e){return void 0!==t[e]});if(e.every(function(r){return t[r]===t[e[0]]})||1===e.length)return t[e[0]]}function s(t,e){function r(r,o){return n.coerce(t,e,i.tickformatstops,r,o)}r("enabled")&&(r("dtickrange"),r("value"))}e.exports=function(t,e,r,l,g,c){c&&1!==c.pass||function(t,e,r,n,i){var o=a(t);r("tickprefix")&&r("showtickprefix",o);r("ticksuffix",i.tickSuffixDflt)&&r("showticksuffix",o)}(t,0,r,0,g),c&&2!==c.pass||function(t,e,r,l,g){var c=a(t);r("tickprefix")&&r("showtickprefix",c);r("ticksuffix",g.tickSuffixDflt)&&r("showticksuffix",c);if(r("showticklabels")){var u=g.font||{},h=e.color,d=h&&h!==i.color.dflt?h:u.color;if(n.coerceFont(r,"tickfont",{family:u.family,size:u.size,color:d}),r("tickangle"),"category"!==l){var A=r("tickformat");o(t,e,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:s}),e.tickformatstops.length||delete e.tickformatstops,A||"date"===l||(r("showexponent",c),r("exponentformat"),r("separatethousands"))}}}(t,e,r,l,g)}},{"../../lib":426,"../array_container_defaults":469,"./layout_attributes":485}],493:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("./layout_attributes");e.exports=function(t,e,r,o){var a=n.coerce2(t,e,i,"ticklen"),s=n.coerce2(t,e,i,"tickwidth"),l=n.coerce2(t,e,i,"tickcolor",e.color);r("ticks",o.outerTicks||a||s||l?"outside":"")||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor)}},{"../../lib":426,"./layout_attributes":485}],494:[function(t,e,r){"use strict";var n=t("./clean_ticks");e.exports=function(t,e,r,i){function o(r){var n=t[r];return void 0!==n?n:(e._template||{})[r]}var a,s=o("tick0"),l=o("dtick"),g=o("tickvals");"array"!==o("tickmode")||"log"!==i&&"date"!==i?a=r("tickmode",Array.isArray(g)?"array":l?"linear":"auto"):a=e.tickmode="auto";if("auto"===a)r("nticks");else if("linear"===a){var c=e.dtick=n.dtick(l,i);e.tick0=n.tick0(s,i,e.calendar,c)}else if("multicategory"!==i){void 0===r("tickvals")?e.tickmode="auto":r("ticktext")}}},{"./clean_ticks":478}],495:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../registry"),o=t("../../lib"),a=t("../../components/drawing"),s=t("./axes");e.exports=function(t,e,r,l){var g=t._fullLayout;if(0!==e.length){var c,u,h,d;l&&(c=l());var A=n.ease(r.easing);return t._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(d),d=null,function(){for(var r={},n=0;n<e.length;n++){var o=e[n],a=o.plotinfo.xaxis,s=o.plotinfo.yaxis;o.xr0&&(r[a._name+".range"]=o.xr0.slice()),o.yr0&&(r[s._name+".range"]=o.yr0.slice())}return i.call("relayout",t,r).then(function(){for(var t=0;t<e.length;t++)f(e[t].plotinfo)})}()}),u=Date.now(),d=window.requestAnimationFrame(function n(){h=Date.now();for(var o=Math.min(1,(h-u)/r.duration),a=A(o),s=0;s<e.length;s++)C(e[s],a);h-u>r.duration?(function(){for(var r={},n=0;n<e.length;n++){var o=e[n],a=o.plotinfo.xaxis,s=o.plotinfo.yaxis;o.xr1&&(r[a._name+".range"]=o.xr1.slice()),o.yr1&&(r[s._name+".range"]=o.yr1.slice())}c&&c(),i.call("relayout",t,r).then(function(){for(var t=0;t<e.length;t++)f(e[t].plotinfo)})}(),d=window.cancelAnimationFrame(n)):d=window.requestAnimationFrame(n)}),Promise.resolve()}function f(t){var e=t.xaxis,r=t.yaxis;g._defs.select("#"+t.clipId+"> rect").call(a.setTranslate,0,0).call(a.setScale,1,1),t.plot.call(a.setTranslate,e._offset,r._offset).call(a.setScale,1,1);var n=t.plot.selectAll(".scatterlayer .trace");n.selectAll(".point").call(a.setPointGroupScale,1,1),n.selectAll(".textpoint").call(a.setTextPointsScale,1,1),n.call(a.hideOutsideRangePoints,t)}function C(e,r){var n=e.plotinfo,i=n.xaxis,l=n.yaxis,g=i._length,c=l._length,u=!!e.xr1,h=!!e.yr1,d=[];if(u){var A=o.simpleMap(e.xr0,i.r2l),f=o.simpleMap(e.xr1,i.r2l),C=A[1]-A[0],p=f[1]-f[0];d[0]=(A[0]*(1-r)+r*f[0]-A[0])/(A[1]-A[0])*g,d[2]=g*(1-r+r*p/C),i.range[0]=i.l2r(A[0]*(1-r)+r*f[0]),i.range[1]=i.l2r(A[1]*(1-r)+r*f[1])}else d[0]=0,d[2]=g;if(h){var I=o.simpleMap(e.yr0,l.r2l),v=o.simpleMap(e.yr1,l.r2l),m=I[1]-I[0],y=v[1]-v[0];d[1]=(I[1]*(1-r)+r*v[1]-I[1])/(I[0]-I[1])*c,d[3]=c*(1-r+r*y/m),l.range[0]=i.l2r(I[0]*(1-r)+r*v[0]),l.range[1]=l.l2r(I[1]*(1-r)+r*v[1])}else d[1]=0,d[3]=c;s.drawOne(t,i,{skipTitle:!0}),s.drawOne(t,l,{skipTitle:!0}),s.redrawComponents(t,[i._id,l._id]);var b=u?g/d[2]:1,x=h?c/d[3]:1,_=u?d[0]:0,w=h?d[1]:0,k=u?d[0]/d[2]*g:0,T=h?d[1]/d[3]*c:0,M=i._offset-k,E=l._offset-T;n.clipRect.call(a.setTranslate,_,w).call(a.setScale,1/b,1/x),n.plot.call(a.setTranslate,M,E).call(a.setScale,b,x),a.setPointGroupScale(n.zoomScalePts,1/b,1/x),a.setTextPointsScale(n.zoomScaleTxt,1/b,1/x)}s.redrawComponents(t)}},{"../../components/drawing":325,"../../lib":426,"../../registry":524,"./axes":473,d3:74}],496:[function(t,e,r){"use strict";var n=t("../../registry").traceIs,i=t("./axis_autotype");function o(t){return{v:"x",h:"y"}[t.orientation||"v"]}function a(t,e){var r=o(t),i=n(t,"box-violin"),a=n(t._fullInput||{},"candlestick");return i&&!a&&e===r&&void 0===t[r]&&void 0===t[r+"0"]}e.exports=function(t,e,r,s){"-"===r("type",(s.splomStash||{}).type)&&(!function(t,e){if("-"!==t.type)return;var r,s=t._id,l=s.charAt(0);-1!==s.indexOf("scene")&&(s=l);var g=function(t,e,r){for(var n=0;n<t.length;n++){var i=t[n];if("splom"===i.type&&i._length>0&&(i["_"+r+"axes"]||{})[e])return i;if((i[r+"axis"]||r)===e){if(a(i,r))return i;if((i[r]||[]).length||i[r+"0"])return i}}}(e,s,l);if(!g)return;if("histogram"===g.type&&l==={v:"y",h:"x"}[g.orientation||"v"])return void(t.type="linear");var c=l+"calendar",u=g[c],h={noMultiCategory:!n(g,"cartesian")||n(g,"noMultiCategory")};"box"===g.type&&g._hasPreCompStats&&l==={h:"x",v:"y"}[g.orientation||"v"]&&(h.noMultiCategory=!0);if(a(g,l)){var d=o(g),A=[];for(r=0;r<e.length;r++){var f=e[r];n(f,"box-violin")&&(f[l+"axis"]||l)===s&&(void 0!==f[d]?A.push(f[d][0]):void 0!==f.name?A.push(f.name):A.push("text"),f[c]!==u&&(u=void 0))}t.type=i(A,u,h)}else if("splom"===g.type){var C=g.dimensions,p=C[g._axesDim[s]];p.visible&&(t.type=i(p.values,u,h))}else t.type=i(g[l]||[g[l+"0"]],u,h)}(e,s.data),"-"===e.type?e.type="linear":t.type=e.type)}},{"../../registry":524,"./axis_autotype":474}],497:[function(t,e,r){"use strict";var n=t("../registry"),i=t("../lib");function o(t,e,r){var n,o,a,s=!1;if("data"===e.type)n=t._fullData[null!==e.traces?e.traces[0]:0];else{if("layout"!==e.type)return!1;n=t._fullLayout}return o=i.nestedProperty(n,e.prop).get(),(a=r[e.type]=r[e.type]||{}).hasOwnProperty(e.prop)&&a[e.prop]!==o&&(s=!0),a[e.prop]=o,{changed:s,value:o}}function a(t,e){var r=[],n=e[0],o={};if("string"==typeof n)o[n]=e[1];else{if(!i.isPlainObject(n))return r;o=n}return l(o,function(t,e,n){r.push({type:"layout",prop:t,value:n})},"",0),r}function s(t,e){var r,n,o,a,s=[];if(n=e[0],o=e[1],r=e[2],a={},"string"==typeof n)a[n]=o;else{if(!i.isPlainObject(n))return s;a=n,void 0===r&&(r=o)}return void 0===r&&(r=null),l(a,function(e,n,i){var o,a;if(Array.isArray(i)){a=i.slice();var l=Math.min(a.length,t.data.length);r&&(l=Math.min(l,r.length)),o=[];for(var g=0;g<l;g++)o[g]=r?r[g]:g}else a=i,o=r?r.slice():null;if(null===o)Array.isArray(a)&&(a=a[0]);else if(Array.isArray(o)){if(!Array.isArray(a)){var c=a;a=[];for(var u=0;u<o.length;u++)a[u]=c}a.length=Math.min(o.length,a.length)}s.push({type:"data",prop:e,traces:o,value:a})},"",0),s}function l(t,e,r,n){Object.keys(t).forEach(function(o){var a=t[o];if("_"!==o[0]){var s=r+(n>0?".":"")+o;i.isPlainObject(a)?l(a,e,s,n+1):e(s,o,a)}})}r.manageCommandObserver=function(t,e,n,a){var s={},l=!0;e&&e._commandObserver&&(s=e._commandObserver),s.cache||(s.cache={}),s.lookupTable={};var g=r.hasSimpleAPICommandBindings(t,n,s.lookupTable);if(e&&e._commandObserver){if(g)return s;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,s}if(g){o(t,g,s.cache),s.check=function(){if(l){var e=o(t,g,s.cache);return e.changed&&a&&void 0!==s.lookupTable[e.value]&&(s.disable(),Promise.resolve(a({value:e.value,type:g.type,prop:g.prop,traces:g.traces,index:s.lookupTable[e.value]})).then(s.enable,s.enable)),e.changed}};for(var c=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],u=0;u<c.length;u++)t._internalOn(c[u],s.check);s.remove=function(){for(var e=0;e<c.length;e++)t._removeInternalListener(c[e],s.check)}}else i.log("Unable to automatically bind plot updates to API command"),s.lookupTable={},s.remove=function(){};return s.disable=function(){l=!1},s.enable=function(){l=!0},e&&(e._commandObserver=s),s},r.hasSimpleAPICommandBindings=function(t,e,n){var i,o,a=e.length;for(i=0;i<a;i++){var s,l=e[i],g=l.method,c=l.args;if(Array.isArray(c)||(c=[]),!g)return!1;var u=r.computeAPICommandBindings(t,g,c);if(1!==u.length)return!1;if(o){if((s=u[0]).type!==o.type)return!1;if(s.prop!==o.prop)return!1;if(Array.isArray(o.traces)){if(!Array.isArray(s.traces))return!1;s.traces.sort();for(var h=0;h<o.traces.length;h++)if(o.traces[h]!==s.traces[h])return!1}else if(s.prop!==o.prop)return!1}else o=u[0],Array.isArray(o.traces)&&o.traces.sort();var d=(s=u[0]).value;if(Array.isArray(d)){if(1!==d.length)return!1;d=d[0]}n&&(n[d]=i)}return o},r.executeAPICommand=function(t,e,r){if("skip"===e)return Promise.resolve();var o=n.apiMethodRegistry[e],a=[t];Array.isArray(r)||(r=[]);for(var s=0;s<r.length;s++)a.push(r[s]);return o.apply(null,a).catch(function(t){return i.warn("API call to Plotly."+e+" rejected.",t),Promise.reject(t)})},r.computeAPICommandBindings=function(t,e,r){var n;switch(Array.isArray(r)||(r=[]),e){case"restyle":n=s(t,r);break;case"relayout":n=a(t,r);break;case"update":n=s(t,[r[0],r[2]]).concat(a(t,[r[1]]));break;case"animate":n=function(t,e){return Array.isArray(e[0])&&1===e[0].length&&-1!==["string","number"].indexOf(typeof e[0][0])?[{type:"layout",prop:"_currentFrame",value:e[0][0].toString()}]:[]}(0,r);break;default:n=[]}return n}},{"../lib":426,"../registry":524}],498:[function(t,e,r){"use strict";var n=t("../lib/extend").extendFlat;r.attributes=function(t,e){t=t||{},e=e||{};var r={valType:"info_array",editType:t.editType,items:[{valType:"number",min:0,max:1,editType:t.editType},{valType:"number",min:0,max:1,editType:t.editType}],dflt:[0,1]},i=(t.name&&t.name,t.trace,e.description&&e.description,{x:n({},r,{}),y:n({},r,{}),editType:t.editType});return t.noGridCell||(i.row={valType:"integer",min:0,dflt:0,editType:t.editType},i.column={valType:"integer",min:0,dflt:0,editType:t.editType}),i},r.defaults=function(t,e,r,n){var i=n&&n.x||[0,1],o=n&&n.y||[0,1],a=e.grid;if(a){var s=r("domain.column");void 0!==s&&(s<a.columns?i=a._domains.x[s]:delete t.domain.column);var l=r("domain.row");void 0!==l&&(l<a.rows?o=a._domains.y[l]:delete t.domain.row)}var g=r("domain.x",i),c=r("domain.y",o);g[0]<g[1]||(t.domain.x=i.slice()),c[0]<c[1]||(t.domain.y=o.slice())}},{"../lib/extend":419}],499:[function(t,e,r){"use strict";e.exports=function(t){var e=t.editType,r=t.colorEditType;void 0===r&&(r=e);var n={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:r},editType:e};return t.arrayOk&&(n.family.arrayOk=!0,n.size.arrayOk=!0,n.color.arrayOk=!0),n}},{}],500:[function(t,e,r){"use strict";e.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],501:[function(t,e,r){"use strict";var n=t("../registry"),i=t("./cartesian/constants").SUBPLOT_PATTERN;r.getSubplotCalcData=function(t,e,r){var i=n.subplotsRegistry[e];if(!i)return[];for(var o=i.attr,a=[],s=0;s<t.length;s++){var l=t[s];l[0].trace[o]===r&&a.push(l)}return a},r.getModuleCalcData=function(t,e){var r,i=[],o=[];if(!(r="string"==typeof e?n.getModule(e).plot:"function"==typeof e?e:e.plot))return[i,t];for(var a=0;a<t.length;a++){var s=t[a],l=s[0].trace;!0===l.visible&&0!==l._length&&(l._module.plot===r?i.push(s):o.push(s))}return[i,o]},r.getSubplotData=function(t,e,r){if(!n.subplotsRegistry[e])return[];var o,a,s,l=n.subplotsRegistry[e].attr,g=[];if("gl2d"===e){var c=r.match(i);a="x"+c[1],s="y"+c[2]}for(var u=0;u<t.length;u++)o=t[u],"gl2d"===e&&n.traceIs(o,"gl2d")?o[l[0]]===a&&o[l[1]]===s&&g.push(o):o[l]===r&&g.push(o);return g}},{"../registry":524,"./cartesian/constants":479}],502:[function(t,e,r){"use strict";var n=t("../../plot_api/edit_types").overrideAll,i=t("../../components/fx/layout_attributes"),o=t("./scene"),a=t("../get_data").getSubplotData,s=t("../../lib"),l=t("../../constants/xmlns_namespaces");r.name="gl3d",r.attr="scene",r.idRoot="scene",r.idRegex=r.attrRegex=s.counterRegex("scene"),r.attributes=t("./layout/attributes"),r.layoutAttributes=t("./layout/layout_attributes"),r.baseLayoutAttrOverrides=n({hoverlabel:i.hoverlabel},"plot","nested"),r.supplyLayoutDefaults=t("./layout/defaults"),r.plot=function(t){for(var e=t._fullLayout,r=t._fullData,n=e._subplots.gl3d,i=0;i<n.length;i++){var s=n[i],l=a(r,"gl3d",s),g=e[s],c=g.camera,u=g._scene;u||(u=new o({id:s,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio,camera:c},e),g._scene=u),u.viewInitial||(u.viewInitial={up:{x:c.up.x,y:c.up.y,z:c.up.z},eye:{x:c.eye.x,y:c.eye.y,z:c.eye.z},center:{x:c.center.x,y:c.center.y,z:c.center.z}}),u.plot(l,e,t.layout)}},r.clean=function(t,e,r,n){for(var i=n._subplots.gl3d||[],o=0;o<i.length;o++){var a=i[o];!e[a]&&n[a]._scene&&(n[a]._scene.destroy(),n._infolayer&&n._infolayer.selectAll(".annotation-"+a).remove())}},r.toSVG=function(t){for(var e=t._fullLayout,r=e._subplots.gl3d,n=e._size,i=0;i<r.length;i++){var o=e[r[i]],a=o.domain,s=o._scene,g=s.toImage("png");e._glimages.append("svg:image").attr({xmlns:l.svg,"xlink:href":g,x:n.l+n.w*a.x[0],y:n.t+n.h*(1-a.y[1]),width:n.w*(a.x[1]-a.x[0]),height:n.h*(a.y[1]-a.y[0]),preserveAspectRatio:"none"}),s.destroy()}},r.cleanId=function(t){if(t.match(/^scene[0-9]*$/)){var e=t.substr(5);return"1"===e&&(e=""),"scene"+e}},r.updateFx=function(t){for(var e=t._fullLayout,r=e._subplots.gl3d,n=0;n<r.length;n++){e[r[n]]._scene.updateFx(e.dragmode,e.hovermode)}}},{"../../components/fx/layout_attributes":344,"../../constants/xmlns_namespaces":405,"../../lib":426,"../../plot_api/edit_types":456,"../get_data":501,"./layout/attributes":503,"./layout/defaults":507,"./layout/layout_attributes":508,"./scene":512}],503:[function(t,e,r){"use strict";e.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],504:[function(t,e,r){"use strict";var n=t("../../../components/color"),i=t("../../cartesian/layout_attributes"),o=t("../../../lib/extend").extendFlat,a=t("../../../plot_api/edit_types").overrideAll;e.exports=a({visible:i.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:n.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:i.color,categoryorder:i.categoryorder,categoryarray:i.categoryarray,title:{text:i.title.text,font:i.title.font},type:o({},i.type,{values:["-","linear","log","date","category"]}),autorange:i.autorange,rangemode:i.rangemode,range:o({},i.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,mirror:i.mirror,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,showticklabels:i.showticklabels,tickfont:i.tickfont,tickangle:i.tickangle,tickprefix:i.tickprefix,showtickprefix:i.showtickprefix,ticksuffix:i.ticksuffix,showticksuffix:i.showticksuffix,showexponent:i.showexponent,exponentformat:i.exponentformat,separatethousands:i.separatethousands,tickformat:i.tickformat,tickformatstops:i.tickformatstops,hoverformat:i.hoverformat,showline:i.showline,linecolor:i.linecolor,linewidth:i.linewidth,showgrid:i.showgrid,gridcolor:o({},i.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:i.gridwidth,zeroline:i.zeroline,zerolinecolor:i.zerolinecolor,zerolinewidth:i.zerolinewidth,_deprecated:{title:i._deprecated.title,titlefont:i._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":304,"../../../lib/extend":419,"../../../plot_api/edit_types":456,"../../cartesian/layout_attributes":485}],505:[function(t,e,r){"use strict";var n=t("tinycolor2").mix,i=t("../../../lib"),o=t("../../../plot_api/plot_template"),a=t("./axis_attributes"),s=t("../../cartesian/type_defaults"),l=t("../../cartesian/axis_defaults"),g=["xaxis","yaxis","zaxis"];e.exports=function(t,e,r){var c,u;function h(t,e){return i.coerce(c,u,a,t,e)}for(var d=0;d<g.length;d++){var A=g[d];c=t[A]||{},(u=o.newContainer(e,A))._id=A[0]+r.scene,u._name=A,s(c,u,h,r),l(c,u,h,{font:r.font,letter:A[0],data:r.data,showGrid:!0,noTickson:!0,bgColor:r.bgColor,calendar:r.calendar},r.fullLayout),h("gridcolor",n(u.color,r.bgColor,13600/187).toRgbString()),h("title.text",A[0]),u.setScale=i.noop,h("showspikes")&&(h("spikesides"),h("spikethickness"),h("spikecolor",u.color)),h("showaxeslabels"),h("showbackground")&&h("backgroundcolor")}}},{"../../../lib":426,"../../../plot_api/plot_template":463,"../../cartesian/axis_defaults":475,"../../cartesian/type_defaults":496,"./axis_attributes":504,tinycolor2:693}],506:[function(t,e,r){"use strict";var n=t("../../../lib/str2rgbarray"),i=t("../../../lib"),o=["xaxis","yaxis","zaxis"];function a(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}a.prototype.merge=function(t,e){for(var r=0;r<3;++r){var a=e[o[r]];a.visible?(this.labels[r]=t._meta?i.templateString(a.title.text,t._meta):a.title.text,"font"in a.title&&(a.title.font.color&&(this.labelColor[r]=n(a.title.font.color)),a.title.font.family&&(this.labelFont[r]=a.title.font.family),a.title.font.size&&(this.labelSize[r]=a.title.font.size)),"showline"in a&&(this.lineEnable[r]=a.showline),"linecolor"in a&&(this.lineColor[r]=n(a.linecolor)),"linewidth"in a&&(this.lineWidth[r]=a.linewidth),"showgrid"in a&&(this.gridEnable[r]=a.showgrid),"gridcolor"in a&&(this.gridColor[r]=n(a.gridcolor)),"gridwidth"in a&&(this.gridWidth[r]=a.gridwidth),"log"===a.type?this.zeroEnable[r]=!1:"zeroline"in a&&(this.zeroEnable[r]=a.zeroline),"zerolinecolor"in a&&(this.zeroLineColor[r]=n(a.zerolinecolor)),"zerolinewidth"in a&&(this.zeroLineWidth[r]=a.zerolinewidth),"ticks"in a&&a.ticks?this.lineTickEnable[r]=!0:this.lineTickEnable[r]=!1,"ticklen"in a&&(this.lineTickLength[r]=this._defaultLineTickLength[r]=a.ticklen),"tickcolor"in a&&(this.lineTickColor[r]=n(a.tickcolor)),"tickwidth"in a&&(this.lineTickWidth[r]=a.tickwidth),"tickangle"in a&&(this.tickAngle[r]="auto"===a.tickangle?-3600:Math.PI*-a.tickangle/180),"showticklabels"in a&&(this.tickEnable[r]=a.showticklabels),"tickfont"in a&&(a.tickfont.color&&(this.tickColor[r]=n(a.tickfont.color)),a.tickfont.family&&(this.tickFont[r]=a.tickfont.family),a.tickfont.size&&(this.tickSize[r]=a.tickfont.size)),"mirror"in a?-1!==["ticks","all","allticks"].indexOf(a.mirror)?(this.lineTickMirror[r]=!0,this.lineMirror[r]=!0):!0===a.mirror?(this.lineTickMirror[r]=!1,this.lineMirror[r]=!0):(this.lineTickMirror[r]=!1,this.lineMirror[r]=!1):this.lineMirror[r]=!1,"showbackground"in a&&!1!==a.showbackground?(this.backgroundEnable[r]=!0,this.backgroundColor[r]=n(a.backgroundcolor)):this.backgroundEnable[r]=!1):(this.tickEnable[r]=!1,this.labelEnable[r]=!1,this.lineEnable[r]=!1,this.lineTickEnable[r]=!1,this.gridEnable[r]=!1,this.zeroEnable[r]=!1,this.backgroundEnable[r]=!1)}},e.exports=function(t,e){var r=new a;return r.merge(t,e),r}},{"../../../lib":426,"../../../lib/str2rgbarray":449}],507:[function(t,e,r){"use strict";var n=t("../../../lib"),i=t("../../../components/color"),o=t("../../../registry"),a=t("../../subplot_defaults"),s=t("./axis_defaults"),l=t("./layout_attributes"),g=t("../../get_data").getSubplotData,c="gl3d";function u(t,e,r,n){for(var a=r("bgcolor"),l=i.combine(a,n.paper_bgcolor),u=["up","center","eye"],h=0;h<u.length;h++)r("camera."+u[h]+".x"),r("camera."+u[h]+".y"),r("camera."+u[h]+".z");r("camera.projection.type");var d=!!r("aspectratio.x")&&!!r("aspectratio.y")&&!!r("aspectratio.z"),A=r("aspectmode",d?"manual":"auto");d||(t.aspectratio=e.aspectratio={x:1,y:1,z:1},"manual"===A&&(e.aspectmode="auto"),t.aspectmode=e.aspectmode);var f=g(n.fullData,c,n.id);s(t,e,{font:n.font,scene:n.id,data:f,bgColor:l,calendar:n.calendar,fullLayout:n.fullLayout}),o.getComponentMethod("annotations3d","handleDefaults")(t,e,n);var C=n.getDfltFromLayout("dragmode");if(!1!==C&&!C)if(C="orbit",t.camera&&t.camera.up){var p=t.camera.up.x,I=t.camera.up.y,v=t.camera.up.z;0!==v&&(p&&I&&v?v/Math.sqrt(p*p+I*I+v*v)>.999&&(C="turntable"):C="turntable")}else C="turntable";r("dragmode",C),r("hovermode",n.getDfltFromLayout("hovermode"))}e.exports=function(t,e,r){var i=e._basePlotModules.length>1;a(t,e,r,{type:c,attributes:l,handleDefaults:u,fullLayout:e,font:e.font,fullData:r,getDfltFromLayout:function(e){if(!i)return n.validate(t[e],l[e])?t[e]:void 0},paper_bgcolor:e.paper_bgcolor,calendar:e.calendar})}},{"../../../components/color":304,"../../../lib":426,"../../../registry":524,"../../get_data":501,"../../subplot_defaults":522,"./axis_defaults":505,"./layout_attributes":508}],508:[function(t,e,r){"use strict";var n=t("./axis_attributes"),i=t("../../domain").attributes,o=t("../../../lib/extend").extendFlat,a=t("../../../lib").counterRegex;function s(t,e,r){return{x:{valType:"number",dflt:t,editType:"camera"},y:{valType:"number",dflt:e,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}e.exports={_arrayAttrRegexps:[a("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:o(s(0,0,1),{}),center:o(s(0,0,0),{}),eye:o(s(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:i({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:n,yaxis:n,zaxis:n,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":426,"../../../lib/extend":419,"../../domain":498,"./axis_attributes":504}],509:[function(t,e,r){"use strict";var n=t("../../../lib/str2rgbarray"),i=["xaxis","yaxis","zaxis"];function o(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}o.prototype.merge=function(t){for(var e=0;e<3;++e){var r=t[i[e]];r.visible?(this.enabled[e]=r.showspikes,this.colors[e]=n(r.spikecolor),this.drawSides[e]=r.spikesides,this.lineWidth[e]=r.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},e.exports=function(t){var e=new o;return e.merge(t),e}},{"../../../lib/str2rgbarray":449}],510:[function(t,e,r){"use strict";e.exports=function(t){for(var e=t.axesOptions,r=t.glplot.axesPixels,s=t.fullSceneLayout,l=[[],[],[]],g=0;g<3;++g){var c=s[o[g]];if(c._length=(r[g].hi-r[g].lo)*r[g].pixelsPerDataUnit/t.dataScale[g],Math.abs(c._length)===1/0||isNaN(c._length))l[g]=[];else{c._input_range=c.range.slice(),c.range[0]=r[g].lo/t.dataScale[g],c.range[1]=r[g].hi/t.dataScale[g],c._m=1/(t.dataScale[g]*r[g].pixelsPerDataUnit),c.range[0]===c.range[1]&&(c.range[0]-=1,c.range[1]+=1);var u=c.tickmode;if("auto"===c.tickmode){c.tickmode="linear";var h=c.nticks||i.constrain(c._length/40,4,9);n.autoTicks(c,Math.abs(c.range[1]-c.range[0])/h)}for(var d=n.calcTicks(c),A=0;A<d.length;++A)d[A].x=d[A].x*t.dataScale[g],"date"===c.type&&(d[A].text=d[A].text.replace(/\<br\>/g," "));l[g]=d,c.tickmode=u}}e.ticks=l;for(var g=0;g<3;++g){a[g]=.5*(t.glplot.bounds[0][g]+t.glplot.bounds[1][g]);for(var A=0;A<2;++A)e.bounds[A][g]=t.glplot.bounds[A][g]}t.contourLevels=function(t){for(var e=new Array(3),r=0;r<3;++r){for(var n=t[r],i=new Array(n.length),o=0;o<n.length;++o)i[o]=n[o].x;e[r]=i}return e}(l)};var n=t("../../cartesian/axes"),i=t("../../../lib"),o=["xaxis","yaxis","zaxis"],a=[0,0,0]},{"../../../lib":426,"../../cartesian/axes":473}],511:[function(t,e,r){"use strict";function n(t,e){var r,n,i=[0,0,0,0];for(r=0;r<4;++r)for(n=0;n<4;++n)i[n]+=t[4*r+n]*e[r];return i}e.exports=function(t,e){return n(t.projection,n(t.view,n(t.model,[e[0],e[1],e[2],1])))}},{}],512:[function(t,e,r){"use strict";var n,i,o=t("gl-plot3d"),a=o.createCamera,s=o.createScene,l=t("webgl-context"),g=t("has-passive-events"),c=t("../../registry"),u=t("../../lib"),h=t("../../plots/cartesian/axes"),d=t("../../components/fx"),A=t("../../lib/str2rgbarray"),f=t("../../lib/show_no_webgl_msg"),C=t("./project"),p=t("./layout/convert"),I=t("./layout/spikes"),v=t("./layout/tick_marks"),m=t("is-mobile")({tablet:!0,featureDetect:!0});function y(t,e){var r=document.createElement("div"),n=t.container;this.graphDiv=t.graphDiv;var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",i.style["z-index"]=20,i.style["pointer-events"]="none",r.appendChild(i),this.svgContainer=i,r.id=t.id,r.style.position="absolute",r.style.top=r.style.left="0px",r.style.width=r.style.height="100%",n.appendChild(r),this.fullLayout=e,this.id=t.id||"scene",this.fullSceneLayout=e[this.id],this.plotArgs=[[],{},{}],this.axesOptions=p(e,e[this.id]),this.spikeOptions=I(e[this.id]),this.container=r,this.staticMode=!!t.staticPlot,this.pixelRatio=this.pixelRatio||t.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=c.getComponentMethod("annotations3d","convert"),this.drawAnnotations=c.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var b=y.prototype;b.prepareOptions=function(){var t={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:m,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(i||(n=document.createElement("canvas"),i=l({canvas:n,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");t.gl=i,t.canvas=n}return t},b.tryCreatePlot=function(){var t=this.prepareOptions(),e=!0;try{this.glplot=s(t)}catch(r){if(this.staticMode)e=!1;else try{u.warn(["webgl setup failed possibly due to",m?"disabling":"enabling","preserveDrawingBuffer config.","The device may not be supported by is-mobile module!","Inverting preserveDrawingBuffer option in second attempt to create webgl scene."].join(" ")),m=t.glOptions.preserveDrawingBuffer=!t.glOptions.preserveDrawingBuffer,this.glplot=s(t)}catch(t){e=!1}}return e},b.initializeGLCamera=function(){var t=this.fullSceneLayout.camera,e="orthographic"===t.projection.type;this.camera=a(this.container,{center:[t.center.x,t.center.y,t.center.z],eye:[t.eye.x,t.eye.y,t.eye.z],up:[t.up.x,t.up.y,t.up.z],_ortho:e,zoomMin:.01,zoomMax:100,mode:"orbit"})},b.initializeGLPlot=function(){var t=this;if(t.initializeGLCamera(),!t.tryCreatePlot())return f(t);t.traces={},t.make4thDimension();var e=t.graphDiv,r=e.layout,n=function(){var e={};return t.isCameraChanged(r)&&(e[t.id+".camera"]=t.getCamera()),t.isAspectChanged(r)&&(e[t.id+".aspectratio"]=t.glplot.getAspectratio(),"manual"!==r[t.id].aspectmode&&(t.fullSceneLayout.aspectmode=r[t.id].aspectmode=e[t.id+".aspectmode"]="manual")),e},i=function(t){if(!1!==t.fullSceneLayout.dragmode){var e=n();t.saveLayout(r),t.graphDiv.emit("plotly_relayout",e)}};return t.glplot.canvas.addEventListener("mouseup",function(){i(t)}),t.glplot.canvas.addEventListener("wheel",function(r){if(e._context._scrollZoom.gl3d){if(t.camera._ortho){var n=r.deltaX>r.deltaY?1.1:1/1.1,o=t.glplot.getAspectratio();t.glplot.setAspectratio({x:n*o.x,y:n*o.y,z:n*o.z})}i(t)}},!!g&&{passive:!1}),t.glplot.canvas.addEventListener("mousemove",function(){if(!1!==t.fullSceneLayout.dragmode&&0!==t.camera.mouseListener.buttons){var e=n();t.graphDiv.emit("plotly_relayouting",e)}}),t.staticMode||t.glplot.canvas.addEventListener("webglcontextlost",function(r){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:r,layer:t.id})},!1),t.glplot.oncontextloss=function(){t.recoverContext()},t.glplot.onrender=function(){t.render()},!0},b.render=function(){var t,e=this,r=e.graphDiv,n=e.svgContainer,i=e.container.getBoundingClientRect(),o=i.width,a=i.height;n.setAttributeNS(null,"viewBox","0 0 "+o+" "+a),n.setAttributeNS(null,"width",o),n.setAttributeNS(null,"height",a),v(e),e.glplot.axes.update(e.axesOptions);for(var s,l=Object.keys(e.traces),g=null,c=e.glplot.selection,A=0;A<l.length;++A)"skip"!==(t=e.traces[l[A]]).data.hoverinfo&&t.handlePick(c)&&(g=t),t.setContourLevels&&t.setContourLevels();function f(t,r){var n=e.fullSceneLayout[t];return h.tickText(n,n.d2l(r),"hover").text}if(null!==g){var p=C(e.glplot.cameraParams,c.dataCoordinate);t=g.data;var I,m=r._fullData[t.index],y=c.index,b={xLabel:f("xaxis",c.traceCoordinate[0]),yLabel:f("yaxis",c.traceCoordinate[1]),zLabel:f("zaxis",c.traceCoordinate[2])},x=d.castHoverinfo(m,e.fullLayout,y),_=(x||"").split("+"),w=x&&"all"===x;m.hovertemplate||w||(-1===_.indexOf("x")&&(b.xLabel=void 0),-1===_.indexOf("y")&&(b.yLabel=void 0),-1===_.indexOf("z")&&(b.zLabel=void 0),-1===_.indexOf("text")&&(c.textLabel=void 0),-1===_.indexOf("name")&&(g.name=void 0));var k=[];"cone"===t.type||"streamtube"===t.type?(b.uLabel=f("xaxis",c.traceCoordinate[3]),(w||-1!==_.indexOf("u"))&&k.push("u: "+b.uLabel),b.vLabel=f("yaxis",c.traceCoordinate[4]),(w||-1!==_.indexOf("v"))&&k.push("v: "+b.vLabel),b.wLabel=f("zaxis",c.traceCoordinate[5]),(w||-1!==_.indexOf("w"))&&k.push("w: "+b.wLabel),b.normLabel=c.traceCoordinate[6].toPrecision(3),(w||-1!==_.indexOf("norm"))&&k.push("norm: "+b.normLabel),"streamtube"===t.type&&(b.divergenceLabel=c.traceCoordinate[7].toPrecision(3),(w||-1!==_.indexOf("divergence"))&&k.push("divergence: "+b.divergenceLabel)),c.textLabel&&k.push(c.textLabel),I=k.join("<br>")):"isosurface"===t.type||"volume"===t.type?(b.valueLabel=h.tickText(e._mockAxis,e._mockAxis.d2l(c.traceCoordinate[3]),"hover").text,k.push("value: "+b.valueLabel),c.textLabel&&k.push(c.textLabel),I=k.join("<br>")):I=c.textLabel;var T={x:c.traceCoordinate[0],y:c.traceCoordinate[1],z:c.traceCoordinate[2],data:m._input,fullData:m,curveNumber:m.index,pointNumber:y};d.appendArrayPointValue(T,m,y),t._module.eventData&&(T=m._module.eventData(T,c,m,{},y));var M={points:[T]};e.fullSceneLayout.hovermode&&d.loneHover({trace:m,x:(.5+.5*p[0]/p[3])*o,y:(.5-.5*p[1]/p[3])*a,xLabel:b.xLabel,yLabel:b.yLabel,zLabel:b.zLabel,text:I,name:g.name,color:d.castHoverOption(m,y,"bgcolor")||g.color,borderColor:d.castHoverOption(m,y,"bordercolor"),fontFamily:d.castHoverOption(m,y,"font.family"),fontSize:d.castHoverOption(m,y,"font.size"),fontColor:d.castHoverOption(m,y,"font.color"),nameLength:d.castHoverOption(m,y,"namelength"),textAlign:d.castHoverOption(m,y,"align"),hovertemplate:u.castOption(m,y,"hovertemplate"),hovertemplateLabels:u.extendFlat({},T,b),eventData:[T]},{container:n,gd:r}),c.buttons&&c.distance<5?r.emit("plotly_click",M):r.emit("plotly_hover",M),s=M}else d.loneUnhover(n),r.emit("plotly_unhover",s);e.drawAnnotations(e)},b.recoverContext=function(){var t=this;t.glplot.dispose();var e=function(){t.glplot.gl.isContextLost()?requestAnimationFrame(e):t.initializeGLPlot()?t.plot.apply(t,t.plotArgs):u.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(e)};var x=["xaxis","yaxis","zaxis"];function _(t,e,r){for(var n=t.fullSceneLayout,i=0;i<3;i++){var o=x[i],a=o.charAt(0),s=n[o],l=e[a],g=e[a+"calendar"],c=e["_"+a+"length"];if(u.isArrayOrTypedArray(l))for(var h,d=0;d<(c||l.length);d++)if(u.isArrayOrTypedArray(l[d]))for(var A=0;A<l[d].length;++A)h=s.d2l(l[d][A],0,g),!isNaN(h)&&isFinite(h)&&(r[0][i]=Math.min(r[0][i],h),r[1][i]=Math.max(r[1][i],h));else h=s.d2l(l[d],0,g),!isNaN(h)&&isFinite(h)&&(r[0][i]=Math.min(r[0][i],h),r[1][i]=Math.max(r[1][i],h));else r[0][i]=Math.min(r[0][i],0),r[1][i]=Math.max(r[1][i],c-1)}}b.plot=function(t,e,r){if(this.plotArgs=[t,e,r],!this.glplot.contextLost){var n,i,o,a,s,l,g=e[this.id],c=r[this.id];this.fullLayout=e,this.fullSceneLayout=g,this.axesOptions.merge(e,g),this.spikeOptions.merge(g),this.setViewport(g),this.updateFx(g.dragmode,g.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(A(g.bgcolor)),this.setConvert(s),t?Array.isArray(t)||(t=[t]):t=[];var u=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(o=0;o<t.length;++o)!0===(n=t[o]).visible&&0!==n._length&&_(this,n,u);!function(t,e){for(var r=t.fullSceneLayout,n=r.annotations||[],i=0;i<3;i++)for(var o=x[i],a=o.charAt(0),s=r[o],l=0;l<n.length;l++){var g=n[l];if(g.visible){var c=s.r2l(g[a]);!isNaN(c)&&isFinite(c)&&(e[0][i]=Math.min(e[0][i],c),e[1][i]=Math.max(e[1][i],c))}}}(this,u);var h=[1,1,1];for(a=0;a<3;++a)u[1][a]===u[0][a]?h[a]=1:h[a]=1/(u[1][a]-u[0][a]);for(this.dataScale=h,this.convertAnnotations(this),o=0;o<t.length;++o)!0===(n=t[o]).visible&&0!==n._length&&((i=this.traces[n.uid])?i.data.type===n.type?i.update(n):(i.dispose(),i=n._module.plot(this,n),this.traces[n.uid]=i):(i=n._module.plot(this,n),this.traces[n.uid]=i),i.name=n.name);var d=Object.keys(this.traces);t:for(o=0;o<d.length;++o){for(a=0;a<t.length;++a)if(t[a].uid===d[o]&&!0===t[a].visible&&0!==t[a]._length)continue t;(i=this.traces[d[o]]).dispose(),delete this.traces[d[o]]}this.glplot.objects.sort(function(t,e){return t._trace.data.index-e._trace.data.index});var f,C=[[0,0,0],[0,0,0]],p=[],I={};for(o=0;o<3;++o){if((l=(s=g[x[o]]).type)in I?(I[l].acc*=h[o],I[l].count+=1):I[l]={acc:h[o],count:1},s.autorange){C[0][o]=1/0,C[1][o]=-1/0;var v=this.glplot.objects,m=this.fullSceneLayout.annotations||[],y=s._name.charAt(0);for(a=0;a<v.length;a++){var b=v[a],w=b.bounds,k=b._trace.data._pad||0;"ErrorBars"===b.constructor.name&&s._lowerLogErrorBound?C[0][o]=Math.min(C[0][o],s._lowerLogErrorBound):C[0][o]=Math.min(C[0][o],w[0][o]/h[o]-k),C[1][o]=Math.max(C[1][o],w[1][o]/h[o]+k)}for(a=0;a<m.length;a++){var T=m[a];if(T.visible){var M=s.r2l(T[y]);C[0][o]=Math.min(C[0][o],M),C[1][o]=Math.max(C[1][o],M)}}if("rangemode"in s&&"tozero"===s.rangemode&&(C[0][o]=Math.min(C[0][o],0),C[1][o]=Math.max(C[1][o],0)),C[0][o]>C[1][o])C[0][o]=-1,C[1][o]=1;else{var E=C[1][o]-C[0][o];C[0][o]-=E/32,C[1][o]+=E/32}if("reversed"===s.autorange){var O=C[0][o];C[0][o]=C[1][o],C[1][o]=O}}else{var S=s.range;C[0][o]=s.r2l(S[0]),C[1][o]=s.r2l(S[1])}C[0][o]===C[1][o]&&(C[0][o]-=1,C[1][o]+=1),p[o]=C[1][o]-C[0][o],this.glplot.setBounds(o,{min:C[0][o]*h[o],max:C[1][o]*h[o]})}var R=g.aspectmode;if("cube"===R)f=[1,1,1];else if("manual"===R){var D=g.aspectratio;f=[D.x,D.y,D.z]}else{if("auto"!==R&&"data"!==R)throw new Error("scene.js aspectRatio was not one of the enumerated types");var L=[1,1,1];for(o=0;o<3;++o){var P=I[l=(s=g[x[o]]).type];L[o]=Math.pow(P.acc,1/P.count)/h[o]}f="data"===R?L:Math.max.apply(null,L)/Math.min.apply(null,L)<=4?L:[1,1,1]}g.aspectratio.x=c.aspectratio.x=f[0],g.aspectratio.y=c.aspectratio.y=f[1],g.aspectratio.z=c.aspectratio.z=f[2],this.glplot.setAspectratio(g.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:g.aspectratio.x,y:g.aspectratio.y,z:g.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=g.aspectmode);var N=g.domain||null,z=e._size||null;if(N&&z){var F=this.container.style;F.position="absolute",F.left=z.l+N.x[0]*z.w+"px",F.top=z.t+(1-N.y[1])*z.h+"px",F.width=z.w*(N.x[1]-N.x[0])+"px",F.height=z.h*(N.y[1]-N.y[0])+"px"}this.glplot.redraw()}},b.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},b.getCamera=function(){var t;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(t=this.camera).up[0],y:t.up[1],z:t.up[2]},center:{x:t.center[0],y:t.center[1],z:t.center[2]},eye:{x:t.eye[0],y:t.eye[1],z:t.eye[2]},projection:{type:!0===t._ortho?"orthographic":"perspective"}}},b.setViewport=function(t){var e,r=t.camera;this.camera.lookAt.apply(this,[[(e=r).eye.x,e.eye.y,e.eye.z],[e.center.x,e.center.y,e.center.z],[e.up.x,e.up.y,e.up.z]]),this.glplot.setAspectratio(t.aspectratio),"orthographic"===r.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},b.isCameraChanged=function(t){var e=this.getCamera(),r=u.nestedProperty(t,this.id+".camera").get();function n(t,e,r,n){var i=["up","center","eye"],o=["x","y","z"];return e[i[r]]&&t[i[r]][o[n]]===e[i[r]][o[n]]}var i=!1;if(void 0===r)i=!0;else{for(var o=0;o<3;o++)for(var a=0;a<3;a++)if(!n(e,r,o,a)){i=!0;break}(!r.projection||e.projection&&e.projection.type!==r.projection.type)&&(i=!0)}return i},b.isAspectChanged=function(t){var e=this.glplot.getAspectratio(),r=u.nestedProperty(t,this.id+".aspectratio").get();return void 0===r||r.x!==e.x||r.y!==e.y||r.z!==e.z},b.saveLayout=function(t){var e,r,n,i,o,a,s=this.fullLayout,l=this.isCameraChanged(t),g=this.isAspectChanged(t),h=l||g;if(h){var d={};if(l&&(e=this.getCamera(),n=(r=u.nestedProperty(t,this.id+".camera")).get(),d[this.id+".camera"]=n),g&&(i=this.glplot.getAspectratio(),a=(o=u.nestedProperty(t,this.id+".aspectratio")).get(),d[this.id+".aspectratio"]=a),c.call("_storeDirectGUIEdit",t,s._preGUI,d),l)r.set(e),u.nestedProperty(s,this.id+".camera").set(e);if(g)o.set(i),u.nestedProperty(s,this.id+".aspectratio").set(i),this.glplot.redraw()}return h},b.updateFx=function(t,e){var r=this.camera;if(r)if("orbit"===t)r.mode="orbit",r.keyBindingMode="rotate";else if("turntable"===t){r.up=[0,0,1],r.mode="turntable",r.keyBindingMode="rotate";var n=this.graphDiv,i=n._fullLayout,o=this.fullSceneLayout.camera,a=o.up.x,s=o.up.y,l=o.up.z;if(l/Math.sqrt(a*a+s*s+l*l)<.999){var g=this.id+".camera.up",h={x:0,y:0,z:1},d={};d[g]=h;var A=n.layout;c.call("_storeDirectGUIEdit",A,i._preGUI,d),o.up=h,u.nestedProperty(A,g).set(h)}}else r.keyBindingMode=t;this.fullSceneLayout.hovermode=e},b.toImage=function(t){t||(t="png"),this.staticMode&&this.container.appendChild(n),this.glplot.redraw();var e=this.glplot.gl,r=e.drawingBufferWidth,i=e.drawingBufferHeight;e.bindFramebuffer(e.FRAMEBUFFER,null);var o=new Uint8Array(r*i*4);e.readPixels(0,0,r,i,e.RGBA,e.UNSIGNED_BYTE,o),function(t,e,r){for(var n=0,i=r-1;n<i;++n,--i)for(var o=0;o<e;++o)for(var a=0;a<4;++a){var s=4*(e*n+o)+a,l=4*(e*i+o)+a,g=t[s];t[s]=t[l],t[l]=g}}(o,r,i),function(t,e,r){for(var n=0;n<r;++n)for(var i=0;i<e;++i){var o=4*(e*n+i),a=t[o+3];if(a>0)for(var s=255/a,l=0;l<3;++l)t[o+l]=Math.min(s*t[o+l],255)}}(o,r,i);var a=document.createElement("canvas");a.width=r,a.height=i;var s,l=a.getContext("2d"),g=l.createImageData(r,i);switch(g.data.set(o),l.putImageData(g,0,0),t){case"jpeg":s=a.toDataURL("image/jpeg");break;case"webp":s=a.toDataURL("image/webp");break;default:s=a.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(n),s},b.setConvert=function(){for(var t=0;t<3;t++){var e=this.fullSceneLayout[x[t]];h.setConvert(e,this.fullLayout),e.setScale=u.noop}},b.make4thDimension=function(){var t=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},h.setConvert(this._mockAxis,t)},e.exports=y},{"../../components/fx":343,"../../lib":426,"../../lib/show_no_webgl_msg":447,"../../lib/str2rgbarray":449,"../../plots/cartesian/axes":473,"../../registry":524,"./layout/convert":506,"./layout/spikes":509,"./layout/tick_marks":510,"./project":511,"gl-plot3d":193,"has-passive-events":230,"is-mobile":240,"webgl-context":721}],513:[function(t,e,r){"use strict";var n=t("./font_attributes"),i=t("./animation_attributes"),o=t("../components/color/attributes"),a=t("./pad_attributes"),s=t("../lib/extend").extendFlat,l=n({editType:"calc"});l.family.dflt='"Open Sans", verdana, arial, sans-serif',l.size.dflt=12,l.color.dflt=o.defaultLine,e.exports={font:l,title:{text:{valType:"string",editType:"layoutstyle"},font:n({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:s(a({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:o.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:o.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:o.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},modebar:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"modebar"},meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:s({},i.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:n({editType:"layoutstyle"})}}},{"../components/color/attributes":303,"../lib/extend":419,"./animation_attributes":468,"./font_attributes":499,"./pad_attributes":514}],514:[function(t,e,r){"use strict";e.exports=function(t){var e=t.editType;return{t:{valType:"number",dflt:0,editType:e},r:{valType:"number",dflt:0,editType:e},b:{valType:"number",dflt:0,editType:e},l:{valType:"number",dflt:0,editType:e},editType:e}}},{}],515:[function(t,e,r){"use strict";var n=t("d3"),i=t("fast-isnumeric"),o=t("../registry"),a=t("../plot_api/plot_schema"),s=t("../plot_api/plot_template"),l=t("../lib"),g=t("../components/color"),c=t("../constants/numerical").BADNUM,u=t("./cartesian/axis_ids"),h=t("./animation_attributes"),d=t("./frame_attributes"),A=t("../plots/get_data").getModuleCalcData,f=l.relinkPrivateKeys,C=l._,p=e.exports={};l.extendFlat(p,o),p.attributes=t("./attributes"),p.attributes.type.values=p.allTypes,p.fontAttrs=t("./font_attributes"),p.layoutAttributes=t("./layout_attributes"),p.fontWeight="normal";var I=p.transformsRegistry,v=t("./command");p.executeAPICommand=v.executeAPICommand,p.computeAPICommandBindings=v.computeAPICommandBindings,p.manageCommandObserver=v.manageCommandObserver,p.hasSimpleAPICommandBindings=v.hasSimpleAPICommandBindings,p.redrawText=function(t){var e=(t=l.getGraphDiv(t))._fullLayout||{};if(!(!(e._has&&e._has("polar"))&&t.data&&t.data[0]&&t.data[0].r))return new Promise(function(e){setTimeout(function(){o.getComponentMethod("annotations","draw")(t),o.getComponentMethod("legend","draw")(t),o.getComponentMethod("colorbar","draw")(t),e(p.previousPromises(t))},300)})},p.resize=function(t){var e;t=l.getGraphDiv(t);var r=new Promise(function(r,n){t&&!l.isHidden(t)||n(new Error("Resize must be passed a displayed plot div element.")),t._redrawTimer&&clearTimeout(t._redrawTimer),t._resolveResize&&(e=t._resolveResize),t._resolveResize=r,t._redrawTimer=setTimeout(function(){if(!t.layout||t.layout.width&&t.layout.height||l.isHidden(t))r(t);else{delete t.layout.width,delete t.layout.height;var e=t.changed;t.autoplay=!0,o.call("relayout",t,{autosize:!0}).then(function(){t.changed=e,t._resolveResize===r&&(delete t._resolveResize,r(t))})}},100)});return e&&e(r),r},p.previousPromises=function(t){if((t._promises||[]).length)return Promise.all(t._promises).then(function(){t._promises=[]})},p.addLinks=function(t){if(t._context.showLink||t._context.showSources){var e=t._fullLayout,r=l.ensureSingle(e._paper,"text","js-plot-link-container",function(t){t.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:g.defaultLine,"pointer-events":"all"}).each(function(){var t=n.select(this);t.append("tspan").classed("js-link-to-tool",!0),t.append("tspan").classed("js-link-spacer",!0),t.append("tspan").classed("js-sourcelinks",!0)})}),i=r.node(),o={y:e._paper.attr("height")-9};document.body.contains(i)&&i.getComputedTextLength()>=e.width-20?(o["text-anchor"]="start",o.x=5):(o["text-anchor"]="end",o.x=e._paper.attr("width")-7),r.attr(o);var a=r.select(".js-link-to-tool"),s=r.select(".js-link-spacer"),c=r.select(".js-sourcelinks");t._context.showSources&&t._context.showSources(t),t._context.showLink&&function(t,e){e.text("");var r=e.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(t._context.linkText+" "+String.fromCharCode(187));if(t._context.sendData)r.on("click",function(){p.sendDataToCloud(t)});else{var n=window.location.pathname.split("/"),i=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+n[2].split(".")[0]+"/"+n[1]+i})}}(t,a),s.text(a.text()&&c.text()?" - ":"")}},p.sendDataToCloud=function(t){var e=(window.PLOTLYENV||{}).BASE_URL||t._context.plotlyServerURL;if(e){t.emit("plotly_beforeexport");var r=n.select(t).append("div").attr("id","hiddenform").style("display","none"),i=r.append("form").attr({action:e+"/external",method:"post",target:"_blank"});return i.append("input").attr({type:"text",name:"data"}).node().value=p.graphJson(t,!1,"keepdata"),i.node().submit(),r.remove(),t.emit("plotly_afterexport"),!1}};var m=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],y=["year","month","dayMonth","dayMonthYear"];function b(t,e){var r=t._context.locale,n=!1,i={};function a(t){for(var r=!0,o=0;o<e.length;o++){var a=e[o];i[a]||(t[a]?i[a]=t[a]:r=!1)}r&&(n=!0)}for(var s=0;s<2;s++){for(var l=t._context.locales,g=0;g<2;g++){var c=(l[r]||{}).format;if(c&&(a(c),n))break;l=o.localeRegistry}var u=r.split("-")[0];if(n||u===r)break;r=u}return n||a(o.localeRegistry.en.format),i}function x(t,e){var r={_fullLayout:e},n="x"===t._id.charAt(0),i=t._mainAxis._anchorAxis,o="",a="",s="";if(i&&(s=i._mainAxis._id,o=n?t._id+s:s+t._id),!o||!e._plots[o]){o="";for(var l=t._counterAxes,g=0;g<l.length;g++){var c=l[g],h=n?t._id+c:c+t._id;a||(a=h);var d=u.getFromId(r,c);if(s&&d.overlaying===s){o=h;break}}}return o||a}function _(t){var e=t.transforms;if(Array.isArray(e)&&e.length)for(var r=0;r<e.length;r++){var n=e[r],i=n._module||I[n.type];if(i&&i.makesData)return!0}return!1}function w(t,e,r,n){for(var i=t.transforms,o=[t],a=0;a<i.length;a++){var s=i[a],l=I[s.type];l&&l.transform&&(o=l.transform(o,{transform:s,fullTrace:t,fullData:e,layout:r,fullLayout:n,transformIndex:a}))}return o}function k(t){var e=t.margin;if(!t._size){var r=t._size={l:Math.round(e.l),r:Math.round(e.r),t:Math.round(e.t),b:Math.round(e.b),p:Math.round(e.pad)};r.w=Math.round(t.width)-r.l-r.r,r.h=Math.round(t.height)-r.t-r.b}t._pushmargin||(t._pushmargin={}),t._pushmarginIds||(t._pushmarginIds={})}p.supplyDefaults=function(t,e){var r=e&&e.skipUpdateCalc,i=t._fullLayout||{};if(i._skipDefaults)delete i._skipDefaults;else{var a,s=t._fullLayout={},g=t.layout||{},c=t._fullData||[],u=t._fullData=[],h=t.data||[],d=t.calcdata||[],A=t._context||{};t._transitionData||p.createTransitionData(t),s._dfltTitle={plot:C(t,"Click to enter Plot title"),x:C(t,"Click to enter X axis title"),y:C(t,"Click to enter Y axis title"),colorbar:C(t,"Click to enter Colorscale title"),annotation:C(t,"new text")},s._traceWord=C(t,"trace");var I=b(t,m);if(s._mapboxAccessToken=A.mapboxAccessToken,i._initialAutoSizeIsDone){var v=i.width,x=i.height;p.supplyLayoutGlobalDefaults(g,s,I),g.width||(s.width=v),g.height||(s.height=x),p.sanitizeMargins(s)}else{p.supplyLayoutGlobalDefaults(g,s,I);var _=!g.width||!g.height,w=s.autosize,T=A.autosizable;_&&(w||T)?p.plotAutoSize(t,g,s):_&&p.sanitizeMargins(s),!w&&_&&(g.width=s.width,g.height=s.height)}s._d3locale=function(t,e){return t.decimal=e.charAt(0),t.thousands=e.charAt(1),n.locale(t)}(I,s.separators),s._extraFormat=b(t,y),s._initialAutoSizeIsDone=!0,s._dataLength=h.length,s._modules=[],s._visibleModules=[],s._basePlotModules=[];var M=s._subplots=function(){var t,e,r=o.collectableSubplotTypes,n={};if(!r){r=[];var i=o.subplotsRegistry;for(var a in i){var s=i[a],g=s.attr;if(g&&(r.push(a),Array.isArray(g)))for(e=0;e<g.length;e++)l.pushUnique(r,g[e])}}for(t=0;t<r.length;t++)n[r[t]]=[];return n}(),E=s._splomAxes={x:{},y:{}},O=s._splomSubplots={};s._splomGridDflt={},s._scatterStackOpts={},s._firstScatter={},s._alignmentOpts={},s._colorAxes={},s._requestRangeslider={},s._traceUids=function(t,e){var r,n,i=e.length,o=[];for(r=0;r<t.length;r++){var a=t[r]._fullInput;a!==n&&o.push(a),n=a}var s=o.length,g=new Array(i),c={};function u(t,e){g[e]=t,c[t]=1}function h(t,e){if(t&&"string"==typeof t&&!c[t])return u(t,e),!0}for(r=0;r<i;r++){var d=e[r].uid;"number"==typeof d&&(d=String(d)),h(d,r)||(r<s&&h(o[r].uid,r)||u(l.randstr(c),r))}return g}(c,h),s._globalTransforms=(t._context||{}).globalTransforms,p.supplyDataDefaults(h,u,g,s);var S=Object.keys(E.x),R=Object.keys(E.y);if(S.length>1&&R.length>1){for(o.getComponentMethod("grid","sizeDefaults")(g,s),a=0;a<S.length;a++)l.pushUnique(M.xaxis,S[a]);for(a=0;a<R.length;a++)l.pushUnique(M.yaxis,R[a]);for(var D in O)l.pushUnique(M.cartesian,D)}if(s._has=p._hasPlotType.bind(s),c.length===u.length)for(a=0;a<u.length;a++)f(u[a],c[a]);p.supplyLayoutModuleDefaults(g,s,u,t._transitionData);var L=s._visibleModules,P=[];for(a=0;a<L.length;a++){var N=L[a].crossTraceDefaults;N&&l.pushUnique(P,N)}for(a=0;a<P.length;a++)P[a](u,s);s._hasOnlyLargeSploms=1===s._basePlotModules.length&&"splom"===s._basePlotModules[0].name&&S.length>15&&R.length>15&&0===s.shapes.length&&0===s.images.length,s._hasCartesian=s._has("cartesian"),s._hasGeo=s._has("geo"),s._hasGL3D=s._has("gl3d"),s._hasGL2D=s._has("gl2d"),s._hasTernary=s._has("ternary"),s._hasPie=s._has("pie"),p.linkSubplots(u,s,c,i),p.cleanPlot(u,s,c,i),i._zoomlayer&&!t._dragging&&i._zoomlayer.selectAll(".select-outline").remove(),function(t,e){var r,n=[];e.meta&&(r=e._meta={meta:e.meta,layout:{meta:e.meta}});for(var i=0;i<t.length;i++){var o=t[i];o.meta?n[o.index]=o._meta={meta:o.meta}:e.meta&&(o._meta={meta:e.meta}),e.meta&&(o._meta.layout={meta:e.meta})}n.length&&(r||(r=e._meta={}),r.data=n)}(u,s),f(s,i),o.getComponentMethod("colorscale","crossTraceDefaults")(u,s),s._preGUI||(s._preGUI={}),s._tracePreGUI||(s._tracePreGUI={});var z,F=s._tracePreGUI,B={};for(z in F)B[z]="old";for(a=0;a<u.length;a++)B[z=u[a]._fullInput.uid]||(F[z]={}),B[z]="new";for(z in B)"old"===B[z]&&delete F[z];k(s),o.getComponentMethod("rangeslider","makeData")(s),r||d.length!==u.length||p.supplyDefaultsUpdateCalc(d,u)}},p.supplyDefaultsUpdateCalc=function(t,e){for(var r=0;r<e.length;r++){var n=e[r],i=(t[r]||[])[0];if(i&&i.trace){var o=i.trace;if(o._hasCalcTransform){var a,s,g,c=o._arrayAttrs;for(a=0;a<c.length;a++)s=c[a],g=l.nestedProperty(o,s).get().slice(),l.nestedProperty(n,s).set(g)}i.trace=n}}},p.createTransitionData=function(t){t._transitionData||(t._transitionData={}),t._transitionData._frames||(t._transitionData._frames=[]),t._transitionData._frameHash||(t._transitionData._frameHash={}),t._transitionData._counter||(t._transitionData._counter=0),t._transitionData._interruptCallbacks||(t._transitionData._interruptCallbacks=[])},p._hasPlotType=function(t){var e,r=this._basePlotModules||[];for(e=0;e<r.length;e++)if(r[e].name===t)return!0;var n=this._modules||[];for(e=0;e<n.length;e++){var i=n[e].name;if(i===t)return!0;var a=o.modules[i];if(a&&a.categories[t])return!0}return!1},p.cleanPlot=function(t,e,r,n){var i,o,a=n._basePlotModules||[];for(i=0;i<a.length;i++){var s=a[i];s.clean&&s.clean(t,e,r,n)}var l=n._has&&n._has("gl"),g=e._has&&e._has("gl");l&&!g&&void 0!==n._glcontainer&&(n._glcontainer.selectAll(".gl-canvas").remove(),n._glcontainer.selectAll(".no-webgl").remove(),n._glcanvas=null);var c=!!n._infolayer;t:for(i=0;i<r.length;i++){var u=r[i].uid;for(o=0;o<t.length;o++){if(u===t[o].uid)continue t}c&&n._infolayer.select(".cb"+u).remove()}},p.linkSubplots=function(t,e,r,n){var i,a,s=n._plots||{},g=e._plots={},c=e._subplots,h={_fullData:t,_fullLayout:e},d=c.cartesian.concat(c.gl2d||[]);for(i=0;i<d.length;i++){var A,f=d[i],C=s[f],p=u.getFromId(h,f,"x"),I=u.getFromId(h,f,"y");for(C?A=g[f]=C:(A=g[f]={}).id=f,p._counterAxes.push(I._id),I._counterAxes.push(p._id),p._subplotsWith.push(f),I._subplotsWith.push(f),A.xaxis=p,A.yaxis=I,A._hasClipOnAxisFalse=!1,a=0;a<t.length;a++){var v=t[a];if(v.xaxis===A.xaxis._id&&v.yaxis===A.yaxis._id&&!1===v.cliponaxis){A._hasClipOnAxisFalse=!0;break}}}var m,y=u.list(h,null,!0);for(i=0;i<y.length;i++){var b=null;(m=y[i]).overlaying&&(b=u.getFromId(h,m.overlaying))&&b.overlaying&&(m.overlaying=!1,b=null),m._mainAxis=b||m,b&&(m.domain=b.domain.slice()),m._anchorAxis="free"===m.anchor?null:u.getFromId(h,m.anchor)}for(i=0;i<y.length;i++)if((m=y[i])._counterAxes.sort(u.idSort),m._subplotsWith.sort(l.subplotSort),m._mainSubplot=x(m,e),m._counterAxes.length&&(m.spikemode&&-1!==m.spikemode.indexOf("across")||m.automargin&&m.mirror&&"free"!==m.anchor||o.getComponentMethod("rangeslider","isVisible")(m))){var _=1,w=0;for(a=0;a<m._counterAxes.length;a++){var k=u.getFromId(h,m._counterAxes[a]);_=Math.min(_,k.domain[0]),w=Math.max(w,k.domain[1])}_<w&&(m._counterDomainMin=_,m._counterDomainMax=w)}},p.clearExpandedTraceDefaultColors=function(t){var e,r,n;for(r=[],(e=t._module._colorAttrs)||(t._module._colorAttrs=e=[],a.crawl(t._module.attributes,function(t,n,i,o){r[o]=n,r.length=o+1,"color"===t.valType&&void 0===t.dflt&&e.push(r.join("."))})),n=0;n<e.length;n++){l.nestedProperty(t,"_input."+e[n]).get()||l.nestedProperty(t,e[n]).set(null)}},p.supplyDataDefaults=function(t,e,r,n){var i,a,g,c=n._modules,u=n._visibleModules,h=n._basePlotModules,d=0,A=0;function C(t){e.push(t);var r=t._module;r&&(l.pushUnique(c,r),!0===t.visible&&l.pushUnique(u,r),l.pushUnique(h,t._module.basePlotModule),d++,!1!==t._input.visible&&A++)}n._transformModules=[];var I={},v=[],m=(r.template||{}).data||{},y=s.traceTemplater(m);for(i=0;i<t.length;i++){if(g=t[i],(a=y.newTrace(g)).uid=n._traceUids[i],p.supplyTraceDefaults(g,a,A,n,i),a.index=i,a._input=g,a._expandedIndex=d,a.transforms&&a.transforms.length)for(var b=!1!==g.visible&&!1===a.visible,x=w(a,e,r,n),_=0;_<x.length;_++){var k=x[_],T={_template:a._template,type:a.type,uid:a.uid+_};b&&!1===k.visible&&delete k.visible,p.supplyTraceDefaults(k,T,d,n,i),f(T,k),T.index=i,T._input=g,T._fullInput=a,T._expandedIndex=d,T._expandedInput=k,C(T)}else a._fullInput=a,a._expandedInput=a,C(a);o.traceIs(a,"carpetAxis")&&(I[a.carpet]=a),o.traceIs(a,"carpetDependent")&&v.push(i)}for(i=0;i<v.length;i++)if((a=e[v[i]]).visible){var M=I[a.carpet];a._carpet=M,M&&M.visible?(a.xaxis=M.xaxis,a.yaxis=M.yaxis):a.visible=!1}},p.supplyAnimationDefaults=function(t){var e;t=t||{};var r={};function n(e,n){return l.coerce(t||{},r,h,e,n)}if(n("mode"),n("direction"),n("fromcurrent"),Array.isArray(t.frame))for(r.frame=[],e=0;e<t.frame.length;e++)r.frame[e]=p.supplyAnimationFrameDefaults(t.frame[e]||{});else r.frame=p.supplyAnimationFrameDefaults(t.frame||{});if(Array.isArray(t.transition))for(r.transition=[],e=0;e<t.transition.length;e++)r.transition[e]=p.supplyAnimationTransitionDefaults(t.transition[e]||{});else r.transition=p.supplyAnimationTransitionDefaults(t.transition||{});return r},p.supplyAnimationFrameDefaults=function(t){var e={};function r(r,n){return l.coerce(t||{},e,h.frame,r,n)}return r("duration"),r("redraw"),e},p.supplyAnimationTransitionDefaults=function(t){var e={};function r(r,n){return l.coerce(t||{},e,h.transition,r,n)}return r("duration"),r("easing"),e},p.supplyFrameDefaults=function(t){var e={};function r(r,n){return l.coerce(t,e,d,r,n)}return r("group"),r("name"),r("traces"),r("baseframe"),r("data"),r("layout"),e},p.supplyTraceDefaults=function(t,e,r,n,i){var a,s=n.colorway||g.defaults,c=s[r%s.length];function u(r,n){return l.coerce(t,e,p.attributes,r,n)}var h=u("visible");u("type"),u("name",n._traceWord+" "+i),u("uirevision",n.uirevision);var d=p.getModule(e);if(e._module=d,d){var A=d.basePlotModule,f=A.attr,C=A.attributes;if(f&&C){var I=n._subplots,v="";if(h||"gl2d"!==A.name){if(Array.isArray(f))for(a=0;a<f.length;a++){var m=f[a],y=l.coerce(t,e,C,m);I[m]&&l.pushUnique(I[m],y),v+=y}else v=l.coerce(t,e,C,f);I[A.name]&&l.pushUnique(I[A.name],v)}}}return h&&(u("customdata"),u("ids"),u("meta"),o.traceIs(e,"showLegend")?(l.coerce(t,e,d.attributes.showlegend?d.attributes:p.attributes,"showlegend"),u("legendgroup"),e._dfltShowLegend=!0):e._dfltShowLegend=!1,d&&d.supplyDefaults(t,e,c,n),o.traceIs(e,"noOpacity")||u("opacity"),o.traceIs(e,"notLegendIsolatable")&&(e.visible=!!e.visible),o.traceIs(e,"noHover")||(e.hovertemplate||l.coerceHoverinfo(t,e,n),"parcats"!==e.type&&o.getComponentMethod("fx","supplyDefaults")(t,e,c,n)),d&&d.selectPoints&&u("selectedpoints"),p.supplyTransformDefaults(t,e,n)),e},p.hasMakesDataTransform=_,p.supplyTransformDefaults=function(t,e,r){if(e._length||_(t)){var n=r._globalTransforms||[],i=r._transformModules||[];if(Array.isArray(t.transforms)||0!==n.length)for(var o=t.transforms||[],a=n.concat(o),s=e.transforms=[],g=0;g<a.length;g++){var c,u=a[g],h=u.type,d=I[h],A=!(u._module&&u._module===d),f=d&&"function"==typeof d.transform;d||l.warn("Unrecognized transform type "+h+"."),d&&d.supplyDefaults&&(A||f)?((c=d.supplyDefaults(u,e,r,t)).type=h,c._module=d,l.pushUnique(i,d)):c=l.extendFlat({},u),s.push(c)}}},p.supplyLayoutGlobalDefaults=function(t,e,r){function n(r,n){return l.coerce(t,e,p.layoutAttributes,r,n)}var i=t.template;l.isPlainObject(i)&&(e.template=i,e._template=i.layout,e._dataTemplate=i.data);var a=l.coerceFont(n,"font");n("title.text",e._dfltTitle.plot),l.coerceFont(n,"title.font",{family:a.family,size:Math.round(1.4*a.size),color:a.color}),n("title.xref"),n("title.yref"),n("title.x"),n("title.y"),n("title.xanchor"),n("title.yanchor"),n("title.pad.t"),n("title.pad.r"),n("title.pad.b"),n("title.pad.l"),n("uniformtext.mode")&&n("uniformtext.minsize"),n("autosize",!(t.width&&t.height)),n("width"),n("height"),n("margin.l"),n("margin.r"),n("margin.t"),n("margin.b"),n("margin.pad"),n("margin.autoexpand"),t.width&&t.height&&p.sanitizeMargins(e),o.getComponentMethod("grid","sizeDefaults")(t,e),n("paper_bgcolor"),n("separators",r.decimal+r.thousands),n("hidesources"),n("colorway"),n("datarevision");var s=n("uirevision");n("editrevision",s),n("selectionrevision",s),n("modebar.orientation"),n("modebar.bgcolor",g.addOpacity(e.paper_bgcolor,.5));var c=g.contrast(g.rgb(e.modebar.bgcolor));n("modebar.color",g.addOpacity(c,.3)),n("modebar.activecolor",g.addOpacity(c,.7)),n("modebar.uirevision",s),n("meta"),l.isPlainObject(t.transition)&&(n("transition.duration"),n("transition.easing"),n("transition.ordering")),o.getComponentMethod("calendars","handleDefaults")(t,e,"calendar"),o.getComponentMethod("fx","supplyLayoutGlobalDefaults")(t,e,n)},p.plotAutoSize=function(t,e,r){var n,o,a=t._context||{},s=a.frameMargins,g=l.isPlotDiv(t);if(g&&t.emit("plotly_autosize"),a.fillFrame)n=window.innerWidth,o=window.innerHeight,document.body.style.overflow="hidden";else{var c=g?window.getComputedStyle(t):{};if(n=parseFloat(c.width)||parseFloat(c.maxWidth)||r.width,o=parseFloat(c.height)||parseFloat(c.maxHeight)||r.height,i(s)&&s>0){var u=1-2*s;n=Math.round(u*n),o=Math.round(u*o)}}var h=p.layoutAttributes.width.min,d=p.layoutAttributes.height.min;n<h&&(n=h),o<d&&(o=d);var A=!e.width&&Math.abs(r.width-n)>1,f=!e.height&&Math.abs(r.height-o)>1;(f||A)&&(A&&(r.width=n),f&&(r.height=o)),t._initialAutoSize||(t._initialAutoSize={width:n,height:o}),p.sanitizeMargins(r)},p.supplyLayoutModuleDefaults=function(t,e,r,n){var i,a,s,g=o.componentsRegistry,c=e._basePlotModules,u=o.subplotsRegistry.cartesian;for(i in g)(s=g[i]).includeBasePlot&&s.includeBasePlot(t,e);for(var h in c.length||c.push(u),e._has("cartesian")&&(o.getComponentMethod("grid","contentDefaults")(t,e),u.finalizeSubplots(t,e)),e._subplots)e._subplots[h].sort(l.subplotSort);for(a=0;a<c.length;a++)(s=c[a]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,r);var d=e._modules;for(a=0;a<d.length;a++)(s=d[a]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,r);var A=e._transformModules;for(a=0;a<A.length;a++)(s=A[a]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,r,n);for(i in g)(s=g[i]).supplyLayoutDefaults&&s.supplyLayoutDefaults(t,e,r)},p.purge=function(t){var e=t._fullLayout||{};void 0!==e._glcontainer&&(e._glcontainer.selectAll(".gl-canvas").remove(),e._glcontainer.remove(),e._glcanvas=null),e._modeBar&&e._modeBar.destroy(),t._transitionData&&(t._transitionData._interruptCallbacks&&(t._transitionData._interruptCallbacks.length=0),t._transitionData._animationRaf&&window.cancelAnimationFrame(t._transitionData._animationRaf)),l.clearThrottle(),l.clearResponsive(t),delete t.data,delete t.layout,delete t._fullData,delete t._fullLayout,delete t.calcdata,delete t.framework,delete t.empty,delete t.fid,delete t.undoqueue,delete t.undonum,delete t.autoplay,delete t.changed,delete t._promises,delete t._redrawTimer,delete t._hmlumcount,delete t._hmpixcount,delete t._transitionData,delete t._transitioning,delete t._initialAutoSize,delete t._transitioningWithDuration,delete t._dragging,delete t._dragged,delete t._dragdata,delete t._hoverdata,delete t._snapshotInProgress,delete t._editing,delete t._mouseDownTime,delete t._legendMouseDownTime,t.removeAllListeners&&t.removeAllListeners()},p.style=function(t){var e,r=t._fullLayout._visibleModules,n=[];for(e=0;e<r.length;e++){var i=r[e];i.style&&l.pushUnique(n,i.style)}for(e=0;e<n.length;e++)n[e](t)},p.sanitizeMargins=function(t){if(t&&t.margin){var e,r=t.width,n=t.height,i=t.margin,o=r-(i.l+i.r),a=n-(i.t+i.b);o<0&&(e=(r-1)/(i.l+i.r),i.l=Math.floor(e*i.l),i.r=Math.floor(e*i.r)),a<0&&(e=(n-1)/(i.t+i.b),i.t=Math.floor(e*i.t),i.b=Math.floor(e*i.b))}},p.clearAutoMarginIds=function(t){t._fullLayout._pushmarginIds={}},p.allowAutoMargin=function(t,e){t._fullLayout._pushmarginIds[e]=1},p.autoMargin=function(t,e,r){var n=t._fullLayout,i=n._pushmargin,o=n._pushmarginIds;if(!1!==n.margin.autoexpand){if(r){var a=r.pad;if(void 0===a){var s=n.margin;a=Math.min(12,s.l,s.r,s.t,s.b)}r.l+r.r>.5*n.width&&(l.log("Margin push",e,"is too big in x, dropping"),r.l=r.r=0),r.b+r.t>.5*n.height&&(l.log("Margin push",e,"is too big in y, dropping"),r.b=r.t=0);var g=void 0!==r.xl?r.xl:r.x,c=void 0!==r.xr?r.xr:r.x,u=void 0!==r.yt?r.yt:r.y,h=void 0!==r.yb?r.yb:r.y;i[e]={l:{val:g,size:r.l+a},r:{val:c,size:r.r+a},b:{val:h,size:r.b+a},t:{val:u,size:r.t+a}},o[e]=1}else delete i[e],delete o[e];if(!n._replotting)return p.doAutoMargin(t)}},p.doAutoMargin=function(t){var e=t._fullLayout;e._size||(e._size={}),k(e);var r=e._size,n=e.margin,a=l.extendFlat({},r),s=n.l,g=n.r,c=n.t,u=n.b,h=e.width,d=e.height,A=e._pushmargin,f=e._pushmarginIds;if(!1!==e.margin.autoexpand){for(var C in A)f[C]||delete A[C];for(var I in A.base={l:{val:0,size:s},r:{val:1,size:g},t:{val:1,size:c},b:{val:0,size:u}},A){var v=A[I].l||{},m=A[I].b||{},y=v.val,b=v.size,x=m.val,_=m.size;for(var w in A){if(i(b)&&A[w].r){var T=A[w].r.val,M=A[w].r.size;if(T>y){var E=(b*T+(M-h)*y)/(T-y),O=(M*(1-y)+(b-h)*(1-T))/(T-y);E>=0&&O>=0&&h-(E+O)>0&&E+O>s+g&&(s=E,g=O)}}if(i(_)&&A[w].t){var S=A[w].t.val,R=A[w].t.size;if(S>x){var D=(_*S+(R-d)*x)/(S-x),L=(R*(1-x)+(_-d)*(1-S))/(S-x);D>=0&&L>=0&&d-(L+D)>0&&D+L>u+c&&(u=D,c=L)}}}}}if(r.l=Math.round(s),r.r=Math.round(g),r.t=Math.round(c),r.b=Math.round(u),r.p=Math.round(n.pad),r.w=Math.round(h)-r.l-r.r,r.h=Math.round(d)-r.t-r.b,!e._replotting&&p.didMarginChange(a,r)){"_redrawFromAutoMarginCount"in e?e._redrawFromAutoMarginCount++:e._redrawFromAutoMarginCount=1;var P=3*(1+Object.keys(f).length);if(e._redrawFromAutoMarginCount<P)return o.call("plot",t);l.warn("Too many auto-margin redraws.")}};var T=["l","r","t","b","p","w","h"];function M(t,e,r){var n=!1;var i=[p.previousPromises,function(){if(t._transitionData)return t._transitioning=!1,function(t){var e=Promise.resolve();if(!t)return e;for(;t.length;)e=e.then(t.shift());return e}(t._transitionData._interruptCallbacks)},r.prepareFn,p.rehover,function(){return t.emit("plotly_transitioning",[]),new Promise(function(i){t._transitioning=!0,e.duration>0&&(t._transitioningWithDuration=!0),t._transitionData._interruptCallbacks.push(function(){n=!0}),r.redraw&&t._transitionData._interruptCallbacks.push(function(){return o.call("redraw",t)}),t._transitionData._interruptCallbacks.push(function(){t.emit("plotly_transitioninterrupted",[])});var a=0,s=0;function l(){return a++,function(){var e;n||++s!==a||(e=i,t._transitionData&&(function(t){if(t)for(;t.length;)t.shift()}(t._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(r.redraw)return o.call("redraw",t)}).then(function(){t._transitioning=!1,t._transitioningWithDuration=!1,t.emit("plotly_transitioned",[])}).then(e)))}}r.runFn(l),setTimeout(l())})}],a=l.syncOrAsync(i,t);return a&&a.then||(a=Promise.resolve()),a.then(function(){return t})}p.didMarginChange=function(t,e){for(var r=0;r<T.length;r++){var n=T[r],o=t[n],a=e[n];if(!i(o)||Math.abs(a-o)>1)return!0}return!1},p.graphJson=function(t,e,r,n,i,o){(i&&e&&!t._fullData||i&&!e&&!t._fullLayout)&&p.supplyDefaults(t);var a=i?t._fullData:t.data,s=i?t._fullLayout:t.layout,g=(t._transitionData||{})._frames;function c(t,e){if("function"==typeof t)return e?"_function_":null;if(l.isPlainObject(t)){var n,i={};return Object.keys(t).sort().forEach(function(o){if(-1===["_","["].indexOf(o.charAt(0)))if("function"!=typeof t[o]){if("keepdata"===r){if("src"===o.substr(o.length-3))return}else if("keepstream"===r){if("string"==typeof(n=t[o+"src"])&&n.indexOf(":")>0&&!l.isPlainObject(t.stream))return}else if("keepall"!==r&&"string"==typeof(n=t[o+"src"])&&n.indexOf(":")>0)return;i[o]=c(t[o],e)}else e&&(i[o]="_function")}),i}return Array.isArray(t)?t.map(function(t){return c(t,e)}):l.isTypedArray(t)?l.simpleMap(t,l.identity):l.isJSDate(t)?l.ms2DateTimeLocal(+t):t}var u={data:(a||[]).map(function(t){var r=c(t);return e&&delete r.fit,r})};return e||(u.layout=c(s)),t.framework&&t.framework.isPolar&&(u=t.framework.getConfig()),g&&(u.frames=c(g)),o&&(u.config=c(t._context,!0)),"object"===n?u:JSON.stringify(u)},p.modifyFrames=function(t,e){var r,n,i,o=t._transitionData._frames,a=t._transitionData._frameHash;for(r=0;r<e.length;r++)switch((n=e[r]).type){case"replace":i=n.value;var s=(o[n.index]||{}).name,l=i.name;o[n.index]=a[l]=i,l!==s&&(delete a[s],a[l]=i);break;case"insert":a[(i=n.value).name]=i,o.splice(n.index,0,i);break;case"delete":delete a[(i=o[n.index]).name],o.splice(n.index,1)}return Promise.resolve()},p.computeFrame=function(t,e){var r,n,i,o,a=t._transitionData._frameHash;if(!e)throw new Error("computeFrame must be given a string frame name");var s=a[e.toString()];if(!s)return!1;for(var l=[s],g=[s.name];s.baseframe&&(s=a[s.baseframe.toString()])&&-1===g.indexOf(s.name);)l.push(s),g.push(s.name);for(var c={};s=l.pop();)if(s.layout&&(c.layout=p.extendLayout(c.layout,s.layout)),s.data){if(c.data||(c.data=[]),!(n=s.traces))for(n=[],r=0;r<s.data.length;r++)n[r]=r;for(c.traces||(c.traces=[]),r=0;r<s.data.length;r++)void 0!==(i=n[r])&&null!==i&&(-1===(o=c.traces.indexOf(i))&&(o=c.data.length,c.traces[o]=i),c.data[o]=p.extendTrace(c.data[o],s.data[r]))}return c},p.recomputeFrameHash=function(t){for(var e=t._transitionData._frameHash={},r=t._transitionData._frames,n=0;n<r.length;n++){var i=r[n];i&&i.name&&(e[i.name]=i)}},p.extendObjectWithContainers=function(t,e,r){var n,i,o,a,s,g,c,u=l.extendDeepNoArrays({},e||{}),h=l.expandObjectPaths(u),d={};if(r&&r.length)for(o=0;o<r.length;o++)void 0===(i=(n=l.nestedProperty(h,r[o])).get())?l.nestedProperty(d,r[o]).set(null):(n.set(null),l.nestedProperty(d,r[o]).set(i));if(t=l.extendDeepNoArrays(t||{},h),r&&r.length)for(o=0;o<r.length;o++)if(g=l.nestedProperty(d,r[o]).get()){for(c=(s=l.nestedProperty(t,r[o])).get(),Array.isArray(c)||(c=[],s.set(c)),a=0;a<g.length;a++){var A=g[a];c[a]=null===A?null:p.extendObjectWithContainers(c[a],A)}s.set(c)}return t},p.dataArrayContainers=["transforms","dimensions"],p.layoutArrayContainers=o.layoutArrayContainers,p.extendTrace=function(t,e){return p.extendObjectWithContainers(t,e,p.dataArrayContainers)},p.extendLayout=function(t,e){return p.extendObjectWithContainers(t,e,p.layoutArrayContainers)},p.transition=function(t,e,r,n,i,o){var a={redraw:i.redraw},s={},g=[];return a.prepareFn=function(){for(var i=Array.isArray(e)?e.length:0,o=n.slice(0,i),a=0;a<o.length;a++){var c=o[a],u=t._fullData[c]._module;if(u){if(u.animatable){var h=u.basePlotModule.name;s[h]||(s[h]=[]),s[h].push(c)}t.data[o[a]]=p.extendTrace(t.data[o[a]],e[a])}}var d=l.expandObjectPaths(l.extendDeepNoArrays({},r)),A=/^[xy]axis[0-9]*$/;for(var f in d)A.test(f)&&delete d[f].range;p.extendLayout(t.layout,d),delete t.calcdata,p.supplyDefaults(t),p.doCalcdata(t);var C=l.expandObjectPaths(r);if(C){var I=t._fullLayout._plots;for(var v in I){var m=I[v],y=m.xaxis,b=m.yaxis,x=y.range.slice(),_=b.range.slice(),w=null,k=null,T=null,M=null;Array.isArray(C[y._name+".range"])?w=C[y._name+".range"].slice():Array.isArray((C[y._name]||{}).range)&&(w=C[y._name].range.slice()),Array.isArray(C[b._name+".range"])?k=C[b._name+".range"].slice():Array.isArray((C[b._name]||{}).range)&&(k=C[b._name].range.slice()),x&&w&&(y.r2l(x[0])!==y.r2l(w[0])||y.r2l(x[1])!==y.r2l(w[1]))&&(T={xr0:x,xr1:w}),_&&k&&(b.r2l(_[0])!==b.r2l(k[0])||b.r2l(_[1])!==b.r2l(k[1]))&&(M={yr0:_,yr1:k}),(T||M)&&g.push(l.extendFlat({plotinfo:m},T,M))}}return Promise.resolve()},a.runFn=function(e){var n,i,a=t._fullLayout._basePlotModules,c=g.length;if(r)for(i=0;i<a.length;i++)a[i].transitionAxes&&a[i].transitionAxes(t,g,o,e);for(var u in c?((n=l.extendFlat({},o)).duration=0,delete s.cartesian):n=o,s){var h=s[u];t._fullData[h[0]]._module.basePlotModule.plot(t,h,n,e)}},M(t,o,a)},p.transitionFromReact=function(t,e,r,n){var i=t._fullLayout,o=i.transition,a={},s=[];return a.prepareFn=function(){var t=i._plots;for(var o in a.redraw=!1,"some"===e.anim&&(a.redraw=!0),"some"===r.anim&&(a.redraw=!0),t){var g=t[o],c=g.xaxis,u=g.yaxis,h=n[c._name].range.slice(),d=n[u._name].range.slice(),A=c.range.slice(),f=u.range.slice();c.setScale(),u.setScale();var C=null,p=null;c.r2l(h[0])===c.r2l(A[0])&&c.r2l(h[1])===c.r2l(A[1])||(C={xr0:h,xr1:A}),u.r2l(d[0])===u.r2l(f[0])&&u.r2l(d[1])===u.r2l(f[1])||(p={yr0:d,yr1:f}),(C||p)&&s.push(l.extendFlat({plotinfo:g},C,p))}return Promise.resolve()},a.runFn=function(r){for(var n,i,a,g=t._fullData,c=t._fullLayout._basePlotModules,u=[],h=0;h<g.length;h++)u.push(h);function d(){for(var e=0;e<c.length;e++)c[e].transitionAxes&&c[e].transitionAxes(t,s,n,r)}function A(){for(var e=0;e<c.length;e++)c[e].plot(t,a,i,r)}s.length&&e.anim?"traces first"===o.ordering?(n=l.extendFlat({},o,{duration:0}),a=u,i=o,setTimeout(d,o.duration),A()):(n=o,a=null,i=l.extendFlat({},o,{duration:0}),setTimeout(A,n.duration),d()):s.length?(n=o,d()):e.anim&&(a=u,i=o,A())},M(t,o,a)},p.doCalcdata=function(t,e){var r,n,i,s,g=u.list(t),h=t._fullData,d=t._fullLayout,A=new Array(h.length),f=(t.calcdata||[]).slice();for(t.calcdata=A,d._numBoxes=0,d._numViolins=0,d._violinScaleGroupStats={},t._hmpixcount=0,t._hmlumcount=0,d._piecolormap={},d._sunburstcolormap={},d._treemapcolormap={},d._funnelareacolormap={},i=0;i<h.length;i++)Array.isArray(e)&&-1===e.indexOf(i)&&(A[i]=f[i]);for(i=0;i<h.length;i++)(r=h[i])._arrayAttrs=a.findArrayAttributes(r),r._extremes={};var C=d._subplots.polar||[];for(i=0;i<C.length;i++)g.push(d[C[i]].radialaxis,d[C[i]].angularaxis);for(var p in d._colorAxes){var v=d[p];!1!==v.cauto&&(delete v.cmin,delete v.cmax)}var m=!1;function y(e){if(r=h[e],n=r._module,!0===r.visible&&r.transforms){if(n&&n.calc){var i=n.calc(t,r);i[0]&&i[0].t&&i[0].t._scene&&delete i[0].t._scene.dirty}for(s=0;s<r.transforms.length;s++){var o=r.transforms[s];(n=I[o.type])&&n.calcTransform&&(r._hasCalcTransform=!0,m=!0,n.calcTransform(t,r,o))}}}function b(e,i){if(r=h[e],!!(n=r._module).isContainer===i){var o=[];if(!0===r.visible&&0!==r._length){delete r._indexToPoints;var a=r.transforms||[];for(s=a.length-1;s>=0;s--)if(a[s].enabled){r._indexToPoints=a[s]._indexToPoints;break}n&&n.calc&&(o=n.calc(t,r))}Array.isArray(o)&&o[0]||(o=[{x:c,y:c}]),o[0].t||(o[0].t={}),o[0].trace=r,A[e]=o}}for(O(g,h,d),i=0;i<h.length;i++)b(i,!0);for(i=0;i<h.length;i++)y(i);for(m&&O(g,h,d),i=0;i<h.length;i++)b(i,!0);for(i=0;i<h.length;i++)b(i,!1);S(t);var x=function(t,e){var r,n,i,a,s,g=[];function c(t,r,n){var i=r._id.charAt(0);if("histogram2dcontour"===t){var o=r._counterAxes[0],a=u.getFromId(e,o),s="x"===i||"x"===o&&"category"===a.type,l="y"===i||"y"===o&&"category"===a.type;return function(t,e){return 0===t||0===e?-1:s&&t===n[e].length-1?-1:l&&e===n.length-1?-1:("y"===i?e:t)-1}}return function(t,e){return"y"===i?e:t}}var h={min:function(t){return l.aggNums(Math.min,null,t)},max:function(t){return l.aggNums(Math.max,null,t)},sum:function(t){return l.aggNums(function(t,e){return t+e},null,t)},total:function(t){return l.aggNums(function(t,e){return t+e},null,t)},mean:function(t){return l.mean(t)},median:function(t){return l.median(t)}};for(r=0;r<t.length;r++){var d=t[r];if("category"===d.type){var A=d.categoryorder.match(E);if(A){var f=A[1],C=A[2],p=[];for(n=0;n<d._categories.length;n++)p.push([d._categories[n],[]]);for(n=0;n<d._traceIndices.length;n++){var I=d._traceIndices[n],v=e._fullData[I],m=d._id.charAt(0);if(!0===v.visible){var y=v.type;o.traceIs(v,"histogram")&&(delete v._xautoBinFinished,delete v._yautoBinFinished);var b=e.calcdata[I];for(i=0;i<b.length;i++){var x,_,w,k=b[i];if("splom"===y){var T=v._axesDim[d._id];if("y"===m){var M=v._diag[T][0];M&&(d=e._fullLayout[u.id2name(M)])}var O=k.trace.dimensions[T].values;for(a=0;a<O.length;a++)for(x=O[a],_=d._categoriesMap[x],s=0;s<k.trace.dimensions.length;s++)if(s!==T){var S=k.trace.dimensions[s];p[_][1].push(S.values[a])}}else if("scattergl"===y){for(a=0;a<k.t.x.length;a++)"x"===m&&(x=k.t.x[a],_=x,w=k.t.y[a]),"y"===m&&(x=k.t.y[a],_=x,w=k.t.x[a]),p[_][1].push(w);k.t&&k.t._scene&&delete k.t._scene.dirty}else if(k.hasOwnProperty("z")){w=k.z;var R=c(v.type,d,w);for(a=0;a<w.length;a++)for(s=0;s<w[a].length;s++)(_=R(s,a))+1&&p[_][1].push(w[a][s])}else for("x"===m?(x=k.p+1?k.p:k.x,w=k.s||k.v||k.y):"y"===m&&(x=k.p+1?k.p:k.y,w=k.s||k.v||k.x),Array.isArray(w)||(w=[w]),a=0;a<w.length;a++)p[x][1].push(w[a])}}}d._categoriesValue=p;var D=[];for(n=0;n<p.length;n++)D.push([p[n][0],h[f](p[n][1])]);D.sort(function(t,e){return t[1]-e[1]}),d._categoriesAggregatedValue=D,d._initialCategories=D.map(function(t){return t[0]}),"descending"===C&&d._initialCategories.reverse(),g=g.concat(d.sortByInitialCategories())}}}return g}(g,t);if(x.length){for(d._numBoxes=0,d._numViolins=0,i=0;i<x.length;i++)b(x[i],!0);for(i=0;i<x.length;i++)b(x[i],!1);S(t)}o.getComponentMethod("fx","calc")(t),o.getComponentMethod("errorbars","calc")(t)};var E=/(total|sum|min|max|mean|median) (ascending|descending)/;function O(t,e,r){var n,i,o,a={};for(n=0;n<t.length;n++)o=(i=t[n])._id,i.clearCalc(),"multicategory"===i.type&&i.setupMultiCategory(e),a[i._id]=1;var s=r._axisMatchGroups||[];for(n=0;n<s.length;n++)for(o in s[n])a[o]||(i=r[u.id2name(o)]).clearCalc()}function S(t){var e,r,n,i=t._fullLayout,o=i._visibleModules,a={};for(r=0;r<o.length;r++){var s=o[r],g=s.crossTraceCalc;if(g){var c=s.basePlotModule.name;a[c]?l.pushUnique(a[c],g):a[c]=[g]}}for(n in a){var u=a[n],h=i._subplots[n];if(Array.isArray(h))for(e=0;e<h.length;e++){var d=h[e],A="cartesian"===n?i._plots[d]:i[d];for(r=0;r<u.length;r++)u[r](t,A,d)}else for(r=0;r<u.length;r++)u[r](t)}}p.rehover=function(t){t._fullLayout._rehover&&t._fullLayout._rehover()},p.redrag=function(t){t._fullLayout._redrag&&t._fullLayout._redrag()},p.generalUpdatePerTraceModule=function(t,e,r,n){var i,o=e.traceHash,a={};for(i=0;i<r.length;i++){var s=r[i],g=s[0].trace;g.visible&&(a[g.type]=a[g.type]||[],a[g.type].push(s))}for(var c in o)if(!a[c]){var u=o[c][0];u[0].trace.visible=!1,a[c]=[u]}for(var h in a){var d=a[h];d[0][0].trace._module.plot(t,e,l.filterVisible(d),n)}e.traceHash=a},p.plotBasePlot=function(t,e,r,n,i){var a=o.getModule(t),s=A(e.calcdata,a)[0];a.plot(e,s,n,i)},p.cleanBasePlot=function(t,e,r,n,i){var o=i._has&&i._has(t),a=r._has&&r._has(t);o&&!a&&i["_"+t+"layer"].selectAll("g.trace").remove()}},{"../components/color":304,"../constants/numerical":404,"../lib":426,"../plot_api/plot_schema":462,"../plot_api/plot_template":463,"../plots/get_data":501,"../registry":524,"./animation_attributes":468,"./attributes":470,"./cartesian/axis_ids":476,"./command":497,"./font_attributes":499,"./frame_attributes":500,"./layout_attributes":513,d3:74,"fast-isnumeric":145}],516:[function(t,e,r){"use strict";var n=t("../../../traces/scatter/attributes"),i=n.marker,o=t("../../../lib/extend").extendFlat;["Area traces are deprecated!","Please switch to the *barpolar* trace type."].join(" ");e.exports={r:o({},n.r,{}),t:o({},n.t,{}),marker:{color:o({},i.color,{}),size:o({},i.size,{}),symbol:o({},i.symbol,{}),opacity:o({},i.opacity,{}),editType:"calc"}}},{"../../../lib/extend":419,"../../../traces/scatter/attributes":587}],517:[function(t,e,r){"use strict";var n=t("../../cartesian/layout_attributes"),i=t("../../../lib/extend").extendFlat,o=t("../../../plot_api/edit_types").overrideAll,a=["Legacy polar charts are deprecated!","Please switch to *polar* subplots."].join(" "),s=i({},n.domain,{});function l(t,e){return i({},e,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number",description:a},visible:{valType:"boolean"}})}e.exports=o({radialaxis:l(0,{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:s,orientation:{valType:"number"}}),angularaxis:l(0,{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:s}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested")},{"../../../lib/extend":419,"../../../plot_api/edit_types":456,"../../cartesian/layout_attributes":485}],518:[function(t,e,r){"use strict";(e.exports=t("./micropolar")).manager=t("./micropolar_manager")},{"./micropolar":519,"./micropolar_manager":520}],519:[function(t,e,r){var n=t("d3"),i=t("../../../lib").extendDeepAll,o=t("../../../constants/alignment").MID_SHIFT,a=e.exports={version:"0.2.2"};a.Axis=function(){var t,e,r,s,l={data:[],layout:{}},g={},c={},u=n.dispatch("hover"),h={};return h.render=function(g){return function(g){e=g||e;var u=l.data,h=l.layout;("string"==typeof e||e.nodeName)&&(e=n.select(e)),e.datum(u).each(function(e,l){var g=e.slice();c={data:a.util.cloneJson(g),layout:a.util.cloneJson(h)};var u=0;g.forEach(function(t,e){t.color||(t.color=h.defaultColorRange[u],u=(u+1)%h.defaultColorRange.length),t.strokeColor||(t.strokeColor="LinePlot"===t.geometry?t.color:n.rgb(t.color).darker().toString()),c.data[e].color=t.color,c.data[e].strokeColor=t.strokeColor,c.data[e].strokeDash=t.strokeDash,c.data[e].strokeSize=t.strokeSize});var d=g.filter(function(t,e){var r=t.visible;return void 0===r||!0===r}),A=!1,f=d.map(function(t,e){return A=A||void 0!==t.groupId,t});if(A){var C=[],p=n.nest().key(function(t,e){return void 0!==t.groupId?t.groupId:"unstacked"}).entries(f).map(function(t,e){if("unstacked"===t.key)return t.values;var r=t.values[0].r.map(function(t,e){return 0});return t.values.forEach(function(t,e,n){t.yStack=[r],C.push(r),r=a.util.sumArrays(t.r,r)}),t.values});d=n.merge(p)}d.forEach(function(t,e){t.t=Array.isArray(t.t[0])?t.t:[t.t],t.r=Array.isArray(t.r[0])?t.r:[t.r]});var I=Math.min(h.width-h.margin.left-h.margin.right,h.height-h.margin.top-h.margin.bottom)/2;I=Math.max(10,I);var v,m=[h.margin.left+I,h.margin.top+I];v=A?[0,n.max(a.util.sumArrays(a.util.arrayLast(d).r[0],a.util.arrayLast(C)))]:n.extent(a.util.flattenArray(d.map(function(t,e){return t.r}))),h.radialAxis.domain!=a.DATAEXTENT&&(v[0]=0),r=n.scale.linear().domain(h.radialAxis.domain!=a.DATAEXTENT&&h.radialAxis.domain?h.radialAxis.domain:v).range([0,I]),c.layout.radialAxis.domain=r.domain();var y,b=a.util.flattenArray(d.map(function(t,e){return t.t})),x="string"==typeof b[0];x&&(b=a.util.deduplicate(b),y=b.slice(),b=n.range(b.length),d=d.map(function(t,e){var r=t;return t.t=[b],A&&(r.yStack=t.yStack),r}));var _=d.filter(function(t,e){return"LinePlot"===t.geometry||"DotPlot"===t.geometry}).length===d.length,w=null===h.needsEndSpacing?x||!_:h.needsEndSpacing,k=h.angularAxis.domain&&h.angularAxis.domain!=a.DATAEXTENT&&!x&&h.angularAxis.domain[0]>=0?h.angularAxis.domain:n.extent(b),T=Math.abs(b[1]-b[0]);_&&!x&&(T=0);var M=k.slice();w&&x&&(M[1]+=T);var E=h.angularAxis.ticksCount||4;E>8&&(E=E/(E/8)+E%8),h.angularAxis.ticksStep&&(E=(M[1]-M[0])/E);var O=h.angularAxis.ticksStep||(M[1]-M[0])/(E*(h.minorTicks+1));y&&(O=Math.max(Math.round(O),1)),M[2]||(M[2]=O);var S=n.range.apply(this,M);if(S=S.map(function(t,e){return parseFloat(t.toPrecision(12))}),s=n.scale.linear().domain(M.slice(0,2)).range("clockwise"===h.direction?[0,360]:[360,0]),c.layout.angularAxis.domain=s.domain(),c.layout.angularAxis.endPadding=w?T:0,void 0===(t=n.select(this).select("svg.chart-root"))||t.empty()){var R=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>","application/xml"),D=this.appendChild(this.ownerDocument.importNode(R.documentElement,!0));t=n.select(D)}t.select(".guides-group").style({"pointer-events":"none"}),t.select(".angular.axis-group").style({"pointer-events":"none"}),t.select(".radial.axis-group").style({"pointer-events":"none"});var L,P=t.select(".chart-group"),N={fill:"none",stroke:h.tickColor},z={"font-size":h.font.size,"font-family":h.font.family,fill:h.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(t,e){return" "+t+" 0 "+h.font.outlineColor}).join(",")};if(h.showLegend){L=t.select(".legend-group").attr({transform:"translate("+[I,h.margin.top]+")"}).style({display:"block"});var F=d.map(function(t,e){var r=a.util.cloneJson(t);return r.symbol="DotPlot"===t.geometry?t.dotType||"circle":"LinePlot"!=t.geometry?"square":"line",r.visibleInLegend=void 0===t.visibleInLegend||t.visibleInLegend,r.color="LinePlot"===t.geometry?t.strokeColor:t.color,r});a.Legend().config({data:d.map(function(t,e){return t.name||"Element"+e}),legendConfig:i({},a.Legend.defaultConfig().legendConfig,{container:L,elements:F,reverseOrder:h.legend.reverseOrder})})();var B=L.node().getBBox();I=Math.min(h.width-B.width-h.margin.left-h.margin.right,h.height-h.margin.top-h.margin.bottom)/2,I=Math.max(10,I),m=[h.margin.left+I,h.margin.top+I],r.range([0,I]),c.layout.radialAxis.domain=r.domain(),L.attr("transform","translate("+[m[0]+I,m[1]-I]+")")}else L=t.select(".legend-group").style({display:"none"});t.attr({width:h.width,height:h.height}).style({opacity:h.opacity}),P.attr("transform","translate("+m+")").style({cursor:"crosshair"});var j=[(h.width-(h.margin.left+h.margin.right+2*I+(B?B.width:0)))/2,(h.height-(h.margin.top+h.margin.bottom+2*I))/2];if(j[0]=Math.max(0,j[0]),j[1]=Math.max(0,j[1]),t.select(".outer-group").attr("transform","translate("+j+")"),h.title&&h.title.text){var V=t.select("g.title-group text").style(z).text(h.title.text),G=V.node().getBBox();V.attr({x:m[0]-G.width/2,y:m[1]-I-20})}var U=t.select(".radial.axis-group");if(h.radialAxis.gridLinesVisible){var Z=U.selectAll("circle.grid-circle").data(r.ticks(5));Z.enter().append("circle").attr({class:"grid-circle"}).style(N),Z.attr("r",r),Z.exit().remove()}U.select("circle.outside-circle").attr({r:I}).style(N);var H=t.select("circle.background-circle").attr({r:I}).style({fill:h.backgroundColor,stroke:h.stroke});function W(t,e){return s(t)%360+h.orientation}if(h.radialAxis.visible){var Y=n.svg.axis().scale(r).ticks(5).tickSize(5);U.call(Y).attr({transform:"rotate("+h.radialAxis.orientation+")"}),U.selectAll(".domain").style(N),U.selectAll("g>text").text(function(t,e){return this.textContent+h.radialAxis.ticksSuffix}).style(z).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(t,e){return"horizontal"===h.radialAxis.tickOrientation?"rotate("+-h.radialAxis.orientation+") translate("+[0,z["font-size"]]+")":"translate("+[0,z["font-size"]]+")"}}),U.selectAll("g>line").style({stroke:"black"})}var X=t.select(".angular.axis-group").selectAll("g.angular-tick").data(S),q=X.enter().append("g").classed("angular-tick",!0);X.attr({transform:function(t,e){return"rotate("+W(t)+")"}}).style({display:h.angularAxis.visible?"block":"none"}),X.exit().remove(),q.append("line").classed("grid-line",!0).classed("major",function(t,e){return e%(h.minorTicks+1)==0}).classed("minor",function(t,e){return!(e%(h.minorTicks+1)==0)}).style(N),q.selectAll(".minor").style({stroke:h.minorTickColor}),X.select("line.grid-line").attr({x1:h.tickLength?I-h.tickLength:0,x2:I}).style({display:h.angularAxis.gridLinesVisible?"block":"none"}),q.append("text").classed("axis-text",!0).style(z);var Q=X.select("text.axis-text").attr({x:I+h.labelOffset,dy:o+"em",transform:function(t,e){var r=W(t),n=I+h.labelOffset,i=h.angularAxis.tickOrientation;return"horizontal"==i?"rotate("+-r+" "+n+" 0)":"radial"==i?r<270&&r>90?"rotate(180 "+n+" 0)":null:"rotate("+(r<=180&&r>0?-90:90)+" "+n+" 0)"}}).style({"text-anchor":"middle",display:h.angularAxis.labelsVisible?"block":"none"}).text(function(t,e){return e%(h.minorTicks+1)!=0?"":y?y[t]+h.angularAxis.ticksSuffix:t+h.angularAxis.ticksSuffix}).style(z);h.angularAxis.rewriteTicks&&Q.text(function(t,e){return e%(h.minorTicks+1)!=0?"":h.angularAxis.rewriteTicks(this.textContent,e)});var K=n.max(P.selectAll(".angular-tick text")[0].map(function(t,e){return t.getCTM().e+t.getBBox().width}));L.attr({transform:"translate("+[I+K,h.margin.top]+")"});var J=t.select("g.geometry-group").selectAll("g").size()>0,$=t.select("g.geometry-group").selectAll("g.geometry").data(d);if($.enter().append("g").attr({class:function(t,e){return"geometry geometry"+e}}),$.exit().remove(),d[0]||J){var tt=[];d.forEach(function(t,e){var n={};n.radialScale=r,n.angularScale=s,n.container=$.filter(function(t,r){return r==e}),n.geometry=t.geometry,n.orientation=h.orientation,n.direction=h.direction,n.index=e,tt.push({data:t,geometryConfig:n})});var et=[];n.nest().key(function(t,e){return void 0!==t.data.groupId||"unstacked"}).entries(tt).forEach(function(t,e){"unstacked"===t.key?et=et.concat(t.values.map(function(t,e){return[t]})):et.push(t.values)}),et.forEach(function(t,e){var r;r=Array.isArray(t)?t[0].geometryConfig.geometry:t.geometryConfig.geometry;var n=t.map(function(t,e){return i(a[r].defaultConfig(),t)});a[r]().config(n)()})}var rt,nt,it=t.select(".guides-group"),ot=t.select(".tooltips-group"),at=a.tooltipPanel().config({container:ot,fontSize:8})(),st=a.tooltipPanel().config({container:ot,fontSize:8})(),lt=a.tooltipPanel().config({container:ot,hasTick:!0})();if(!x){var gt=it.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});P.on("mousemove.angular-guide",function(t,e){var r=a.util.getMousePos(H).angle;gt.attr({x2:-I,transform:"rotate("+r+")"}).style({opacity:.5});var n=(r+180+360-h.orientation)%360;rt=s.invert(n);var i=a.util.convertToCartesian(I+12,r+180);at.text(a.util.round(rt)).move([i[0]+m[0],i[1]+m[1]])}).on("mouseout.angular-guide",function(t,e){it.select("line").style({opacity:0})})}var ct=it.select("circle").style({stroke:"grey",fill:"none"});P.on("mousemove.radial-guide",function(t,e){var n=a.util.getMousePos(H).radius;ct.attr({r:n}).style({opacity:.5}),nt=r.invert(a.util.getMousePos(H).radius);var i=a.util.convertToCartesian(n,h.radialAxis.orientation);st.text(a.util.round(nt)).move([i[0]+m[0],i[1]+m[1]])}).on("mouseout.radial-guide",function(t,e){ct.style({opacity:0}),lt.hide(),at.hide(),st.hide()}),t.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(e,r){var i=n.select(this),o=this.style.fill,s="black",l=this.style.opacity||1;if(i.attr({"data-opacity":l}),o&&"none"!==o){i.attr({"data-fill":o}),s=n.hsl(o).darker().toString(),i.style({fill:s,opacity:1});var g={t:a.util.round(e[0]),r:a.util.round(e[1])};x&&(g.t=y[e[0]]);var c="t: "+g.t+", r: "+g.r,u=this.getBoundingClientRect(),h=t.node().getBoundingClientRect(),d=[u.left+u.width/2-j[0]-h.left,u.top+u.height/2-j[1]-h.top];lt.config({color:s}).text(c),lt.move(d)}else o=this.style.stroke||"black",i.attr({"data-stroke":o}),s=n.hsl(o).darker().toString(),i.style({stroke:s,opacity:1})}).on("mousemove.tooltip",function(t,e){if(0!=n.event.which)return!1;n.select(this).attr("data-fill")&&lt.show()}).on("mouseout.tooltip",function(t,e){lt.hide();var r=n.select(this),i=r.attr("data-fill");i?r.style({fill:i,opacity:r.attr("data-opacity")}):r.style({stroke:r.attr("data-stroke"),opacity:r.attr("data-opacity")})})})}(g),this},h.config=function(t){if(!arguments.length)return l;var e=a.util.cloneJson(t);return e.data.forEach(function(t,e){l.data[e]||(l.data[e]={}),i(l.data[e],a.Axis.defaultConfig().data[0]),i(l.data[e],t)}),i(l.layout,a.Axis.defaultConfig().layout),i(l.layout,e.layout),this},h.getLiveConfig=function(){return c},h.getinputConfig=function(){return g},h.radialScale=function(t){return r},h.angularScale=function(t){return s},h.svg=function(){return t},n.rebind(h,u,"on"),h},a.Axis.defaultConfig=function(t,e){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:n.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}},a.util={},a.DATAEXTENT="dataExtent",a.AREA="AreaChart",a.LINE="LinePlot",a.DOT="DotPlot",a.BAR="BarChart",a.util._override=function(t,e){for(var r in t)r in e&&(e[r]=t[r])},a.util._extend=function(t,e){for(var r in t)e[r]=t[r]},a.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},a.util.dataFromEquation2=function(t,e){var r=e||6;return n.range(0,360+r,r).map(function(e,r){var n=e*Math.PI/180;return[e,t(n)]})},a.util.dataFromEquation=function(t,e,r){var i=e||6,o=[],a=[];n.range(0,360+i,i).forEach(function(e,r){var n=e*Math.PI/180,i=t(n);o.push(e),a.push(i)});var s={t:o,r:a};return r&&(s.name=r),s},a.util.ensureArray=function(t,e){if(void 0===t)return null;var r=[].concat(t);return n.range(e).map(function(t,e){return r[e]||r[0]})},a.util.fillArrays=function(t,e,r){return e.forEach(function(e,n){t[e]=a.util.ensureArray(t[e],r)}),t},a.util.cloneJson=function(t){return JSON.parse(JSON.stringify(t))},a.util.validateKeys=function(t,e){"string"==typeof e&&(e=e.split("."));var r=e.shift();return t[r]&&(!e.length||objHasKeys(t[r],e))},a.util.sumArrays=function(t,e){return n.zip(t,e).map(function(t,e){return n.sum(t)})},a.util.arrayLast=function(t){return t[t.length-1]},a.util.arrayEqual=function(t,e){for(var r=Math.max(t.length,e.length,1);r-- >=0&&t[r]===e[r];);return-2===r},a.util.flattenArray=function(t){for(var e=[];!a.util.arrayEqual(e,t);)e=t,t=[].concat.apply([],t);return t},a.util.deduplicate=function(t){return t.filter(function(t,e,r){return r.indexOf(t)==e})},a.util.convertToCartesian=function(t,e){var r=e*Math.PI/180;return[t*Math.cos(r),t*Math.sin(r)]},a.util.round=function(t,e){var r=e||2,n=Math.pow(10,r);return Math.round(t*n)/n},a.util.getMousePos=function(t){var e=n.mouse(t.node()),r=e[0],i=e[1],o={};return o.x=r,o.y=i,o.pos=e,o.angle=180*(Math.atan2(i,r)+Math.PI)/Math.PI,o.radius=Math.sqrt(r*r+i*i),o},a.util.duplicatesCount=function(t){for(var e,r={},n={},i=0,o=t.length;i<o;i++)(e=t[i])in r?(r[e]++,n[e]=r[e]):r[e]=1;return n},a.util.duplicates=function(t){return Object.keys(a.util.duplicatesCount(t))},a.util.translator=function(t,e,r,n){if(n){var i=r.slice();r=e,e=i}var o=e.reduce(function(t,e){if(void 0!==t)return t[e]},t);void 0!==o&&(e.reduce(function(t,r,n){if(void 0!==t)return n===e.length-1&&delete t[r],t[r]},t),r.reduce(function(t,e,n){return void 0===t[e]&&(t[e]={}),n===r.length-1&&(t[e]=o),t[e]},t))},a.PolyChart=function(){var t=[a.PolyChart.defaultConfig()],e=n.dispatch("hover"),r={solid:"none",dash:[5,2],dot:[2,5]};function o(){var e=t[0].geometryConfig,i=e.container;"string"==typeof i&&(i=n.select(i)),i.datum(t).each(function(t,i){var o=!!t[0].data.yStack,a=t.map(function(t,e){return o?n.zip(t.data.t[0],t.data.r[0],t.data.yStack[0]):n.zip(t.data.t[0],t.data.r[0])}),s=e.angularScale,l=e.radialScale.domain()[0],g={bar:function(r,i,o){var a=t[o].data,l=e.radialScale(r[1])-e.radialScale(0),g=e.radialScale(r[2]||0),c=a.barWidth;n.select(this).attr({class:"mark bar",d:"M"+[[l+g,-c/2],[l+g,c/2],[g,c/2],[g,-c/2]].join("L")+"Z",transform:function(t,r){return"rotate("+(e.orientation+s(t[0]))+")"}})}};g.dot=function(r,i,o){var a=r[2]?[r[0],r[1]+r[2]]:r,s=n.svg.symbol().size(t[o].data.dotSize).type(t[o].data.dotType)(r,i);n.select(this).attr({class:"mark dot",d:s,transform:function(t,r){var n,i,o,s=(n=function(t,r){var n=e.radialScale(t[1]),i=(e.angularScale(t[0])+e.orientation)*Math.PI/180;return{r:n,t:i}}(a),i=n.r*Math.cos(n.t),o=n.r*Math.sin(n.t),{x:i,y:o});return"translate("+[s.x,s.y]+")"}})};var c=n.svg.line.radial().interpolate(t[0].data.lineInterpolation).radius(function(t){return e.radialScale(t[1])}).angle(function(t){return e.angularScale(t[0])*Math.PI/180});g.line=function(r,i,o){var s=r[2]?a[o].map(function(t,e){return[t[0],t[1]+t[2]]}):a[o];if(n.select(this).each(g.dot).style({opacity:function(e,r){return+t[o].data.dotVisible},fill:A.stroke(r,i,o)}).attr({class:"mark dot"}),!(i>0)){var l=n.select(this.parentNode).selectAll("path.line").data([0]);l.enter().insert("path"),l.attr({class:"line",d:c(s),transform:function(t,r){return"rotate("+(e.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(t,e){return A.fill(r,i,o)},"fill-opacity":0,stroke:function(t,e){return A.stroke(r,i,o)},"stroke-width":function(t,e){return A["stroke-width"](r,i,o)},"stroke-dasharray":function(t,e){return A["stroke-dasharray"](r,i,o)},opacity:function(t,e){return A.opacity(r,i,o)},display:function(t,e){return A.display(r,i,o)}})}};var u=e.angularScale.range(),h=Math.abs(u[1]-u[0])/a[0].length*Math.PI/180,d=n.svg.arc().startAngle(function(t){return-h/2}).endAngle(function(t){return h/2}).innerRadius(function(t){return e.radialScale(l+(t[2]||0))}).outerRadius(function(t){return e.radialScale(l+(t[2]||0))+e.radialScale(t[1])});g.arc=function(t,r,i){n.select(this).attr({class:"mark arc",d:d,transform:function(t,r){return"rotate("+(e.orientation+s(t[0])+90)+")"}})};var A={fill:function(e,r,n){return t[n].data.color},stroke:function(e,r,n){return t[n].data.strokeColor},"stroke-width":function(e,r,n){return t[n].data.strokeSize+"px"},"stroke-dasharray":function(e,n,i){return r[t[i].data.strokeDash]},opacity:function(e,r,n){return t[n].data.opacity},display:function(e,r,n){return void 0===t[n].data.visible||t[n].data.visible?"block":"none"}},f=n.select(this).selectAll("g.layer").data(a);f.enter().append("g").attr({class:"layer"});var C=f.selectAll("path.mark").data(function(t,e){return t});C.enter().append("path").attr({class:"mark"}),C.style(A).each(g[e.geometryType]),C.exit().remove(),f.exit().remove()})}return o.config=function(e){return arguments.length?(e.forEach(function(e,r){t[r]||(t[r]={}),i(t[r],a.PolyChart.defaultConfig()),i(t[r],e)}),this):t},o.getColorScale=function(){},n.rebind(o,e,"on"),o},a.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:n.scale.category20()}}},a.BarChart=function(){return a.PolyChart()},a.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}},a.AreaChart=function(){return a.PolyChart()},a.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}},a.DotPlot=function(){return a.PolyChart()},a.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}},a.LinePlot=function(){return a.PolyChart()},a.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}},a.Legend=function(){var t=a.Legend.defaultConfig(),e=n.dispatch("hover");function r(){var e=t.legendConfig,o=t.data.map(function(t,r){return[].concat(t).map(function(t,n){var o=i({},e.elements[r]);return o.name=t,o.color=[].concat(e.elements[r].color)[n],o})}),a=n.merge(o);a=a.filter(function(t,r){return e.elements[r]&&(e.elements[r].visibleInLegend||void 0===e.elements[r].visibleInLegend)}),e.reverseOrder&&(a=a.reverse());var s=e.container;("string"==typeof s||s.nodeName)&&(s=n.select(s));var l=a.map(function(t,e){return t.color}),g=e.fontSize,c=null==e.isContinuous?"number"==typeof a[0]:e.isContinuous,u=c?e.height:g*a.length,h=s.classed("legend-group",!0).selectAll("svg").data([0]),d=h.enter().append("svg").attr({width:300,height:u+g,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});d.append("g").classed("legend-axis",!0),d.append("g").classed("legend-marks",!0);var A=n.range(a.length),f=n.scale[c?"linear":"ordinal"]().domain(A).range(l),C=n.scale[c?"linear":"ordinal"]().domain(A)[c?"range":"rangePoints"]([0,u]);if(c){var p=h.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(l);p.enter().append("stop"),p.attr({offset:function(t,e){return e/(l.length-1)*100+"%"}}).style({"stop-color":function(t,e){return t}}),h.append("rect").classed("legend-mark",!0).attr({height:e.height,width:e.colorBandWidth,fill:"url(#grad1)"})}else{var I=h.select(".legend-marks").selectAll("path.legend-mark").data(a);I.enter().append("path").classed("legend-mark",!0),I.attr({transform:function(t,e){return"translate("+[g/2,C(e)+g/2]+")"},d:function(t,e){var r,i,o,a=t.symbol;return o=3*(i=g),"line"===(r=a)?"M"+[[-i/2,-i/12],[i/2,-i/12],[i/2,i/12],[-i/2,i/12]]+"Z":-1!=n.svg.symbolTypes.indexOf(r)?n.svg.symbol().type(r).size(o)():n.svg.symbol().type("square").size(o)()},fill:function(t,e){return f(e)}}),I.exit().remove()}var v=n.svg.axis().scale(C).orient("right"),m=h.select("g.legend-axis").attr({transform:"translate("+[c?e.colorBandWidth:g,g/2]+")"}).call(v);return m.selectAll(".domain").style({fill:"none",stroke:"none"}),m.selectAll("line").style({fill:"none",stroke:c?e.textColor:"none"}),m.selectAll("text").style({fill:e.textColor,"font-size":e.fontSize}).text(function(t,e){return a[e].name}),r}return r.config=function(e){return arguments.length?(i(t,e),this):t},n.rebind(r,e,"on"),r},a.Legend.defaultConfig=function(t,e){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}},a.tooltipPanel=function(){var t,e,r,o={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},s="tooltip-"+a.tooltipPanel.uid++,l=10,g=function(){var n=(t=o.container.selectAll("g."+s).data([0])).enter().append("g").classed(s,!0).style({"pointer-events":"none",display:"none"});return r=n.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),e=n.append("text").attr({dx:o.padding+l,dy:.3*+o.fontSize}),g};return g.text=function(i){var a=n.hsl(o.color).l,s=a>=.5?"#aaa":"white",c=a>=.5?"black":"white",u=i||"";e.style({fill:c,"font-size":o.fontSize+"px"}).text(u);var h=o.padding,d=e.node().getBBox(),A={fill:o.color,stroke:s,"stroke-width":"2px"},f=d.width+2*h+l,C=d.height+2*h;return r.attr({d:"M"+[[l,-C/2],[l,-C/4],[o.hasTick?0:l,0],[l,C/4],[l,C/2],[f,C/2],[f,-C/2]].join("L")+"Z"}).style(A),t.attr({transform:"translate("+[l,-C/2+2*h]+")"}),t.style({display:"block"}),g},g.move=function(e){if(t)return t.attr({transform:"translate("+[e[0],e[1]]+")"}).style({display:"block"}),g},g.hide=function(){if(t)return t.style({display:"none"}),g},g.show=function(){if(t)return t.style({display:"block"}),g},g.config=function(t){return i(o,t),g},g},a.tooltipPanel.uid=1,a.adapter={},a.adapter.plotly=function(){var t={convert:function(t,e){var r={};if(t.data&&(r.data=t.data.map(function(t,r){var n=i({},t);return[[n,["marker","color"],["color"]],[n,["marker","opacity"],["opacity"]],[n,["marker","line","color"],["strokeColor"]],[n,["marker","line","dash"],["strokeDash"]],[n,["marker","line","width"],["strokeSize"]],[n,["marker","symbol"],["dotType"]],[n,["marker","size"],["dotSize"]],[n,["marker","barWidth"],["barWidth"]],[n,["line","interpolation"],["lineInterpolation"]],[n,["showlegend"],["visibleInLegend"]]].forEach(function(t,r){a.util.translator.apply(null,t.concat(e))}),e||delete n.marker,e&&delete n.groupId,e?("LinePlot"===n.geometry?(n.type="scatter",!0===n.dotVisible?(delete n.dotVisible,n.mode="lines+markers"):n.mode="lines"):"DotPlot"===n.geometry?(n.type="scatter",n.mode="markers"):"AreaChart"===n.geometry?n.type="area":"BarChart"===n.geometry&&(n.type="bar"),delete n.geometry):("scatter"===n.type?"lines"===n.mode?n.geometry="LinePlot":"markers"===n.mode?n.geometry="DotPlot":"lines+markers"===n.mode&&(n.geometry="LinePlot",n.dotVisible=!0):"area"===n.type?n.geometry="AreaChart":"bar"===n.type&&(n.geometry="BarChart"),delete n.mode,delete n.type),n}),!e&&t.layout&&"stack"===t.layout.barmode)){var o=a.util.duplicates(r.data.map(function(t,e){return t.geometry}));r.data.forEach(function(t,e){var n=o.indexOf(t.geometry);-1!=n&&(r.data[e].groupId=n)})}if(t.layout){var s=i({},t.layout);if([[s,["plot_bgcolor"],["backgroundColor"]],[s,["showlegend"],["showLegend"]],[s,["radialaxis"],["radialAxis"]],[s,["angularaxis"],["angularAxis"]],[s.angularaxis,["showline"],["gridLinesVisible"]],[s.angularaxis,["showticklabels"],["labelsVisible"]],[s.angularaxis,["nticks"],["ticksCount"]],[s.angularaxis,["tickorientation"],["tickOrientation"]],[s.angularaxis,["ticksuffix"],["ticksSuffix"]],[s.angularaxis,["range"],["domain"]],[s.angularaxis,["endpadding"],["endPadding"]],[s.radialaxis,["showline"],["gridLinesVisible"]],[s.radialaxis,["tickorientation"],["tickOrientation"]],[s.radialaxis,["ticksuffix"],["ticksSuffix"]],[s.radialaxis,["range"],["domain"]],[s.angularAxis,["showline"],["gridLinesVisible"]],[s.angularAxis,["showticklabels"],["labelsVisible"]],[s.angularAxis,["nticks"],["ticksCount"]],[s.angularAxis,["tickorientation"],["tickOrientation"]],[s.angularAxis,["ticksuffix"],["ticksSuffix"]],[s.angularAxis,["range"],["domain"]],[s.angularAxis,["endpadding"],["endPadding"]],[s.radialAxis,["showline"],["gridLinesVisible"]],[s.radialAxis,["tickorientation"],["tickOrientation"]],[s.radialAxis,["ticksuffix"],["ticksSuffix"]],[s.radialAxis,["range"],["domain"]],[s.font,["outlinecolor"],["outlineColor"]],[s.legend,["traceorder"],["reverseOrder"]],[s,["labeloffset"],["labelOffset"]],[s,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(t,r){a.util.translator.apply(null,t.concat(e))}),e?(void 0!==s.tickLength&&(s.angularaxis.ticklen=s.tickLength,delete s.tickLength),s.tickColor&&(s.angularaxis.tickcolor=s.tickColor,delete s.tickColor)):(s.angularAxis&&void 0!==s.angularAxis.ticklen&&(s.tickLength=s.angularAxis.ticklen),s.angularAxis&&void 0!==s.angularAxis.tickcolor&&(s.tickColor=s.angularAxis.tickcolor)),s.legend&&"boolean"!=typeof s.legend.reverseOrder&&(s.legend.reverseOrder="normal"!=s.legend.reverseOrder),s.legend&&"boolean"==typeof s.legend.traceorder&&(s.legend.traceorder=s.legend.traceorder?"reversed":"normal",delete s.legend.reverseOrder),s.margin&&void 0!==s.margin.t){var l=["t","r","b","l","pad"],g=["top","right","bottom","left","pad"],c={};n.entries(s.margin).forEach(function(t,e){c[g[l.indexOf(t.key)]]=t.value}),s.margin=c}e&&(delete s.needsEndSpacing,delete s.minorTickColor,delete s.minorTicks,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksCount,delete s.angularaxis.ticksStep,delete s.angularaxis.rewriteTicks,delete s.angularaxis.nticks,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksCount,delete s.radialaxis.ticksStep,delete s.radialaxis.rewriteTicks,delete s.radialaxis.nticks),r.layout=s}return r}};return t}},{"../../../constants/alignment":399,"../../../lib":426,d3:74}],520:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../../lib"),o=t("../../../components/color"),a=t("./micropolar"),s=t("./undo_manager"),l=i.extendDeepAll,g=e.exports={};g.framework=function(t){var e,r,i,o,c,u=new s;function h(r,s){return s&&(c=s),n.select(n.select(c).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),e=e?l(e,r):r,i||(i=a.Axis()),o=a.adapter.plotly().convert(e),i.config(o).render(c),t.data=e.data,t.layout=e.layout,g.fillLayout(t),e}return h.isPolar=!0,h.svg=function(){return i.svg()},h.getConfig=function(){return e},h.getLiveConfig=function(){return a.adapter.plotly().convert(i.getLiveConfig(),!0)},h.getLiveScales=function(){return{t:i.angularScale(),r:i.radialScale()}},h.setUndoPoint=function(){var t,n,i=this,o=a.util.cloneJson(e);t=o,n=r,u.add({undo:function(){n&&i(n)},redo:function(){i(t)}}),r=a.util.cloneJson(o)},h.undo=function(){u.undo()},h.redo=function(){u.redo()},h},g.fillLayout=function(t){var e=n.select(t).selectAll(".plot-container"),r=e.selectAll(".svg-container"),i=t.framework&&t.framework.svg&&t.framework.svg(),a={width:800,height:600,paper_bgcolor:o.background,_container:e,_paperdiv:r,_paper:i};t._fullLayout=l(a,t.layout)}},{"../../../components/color":304,"../../../lib":426,"./micropolar":519,"./undo_manager":521,d3:74}],521:[function(t,e,r){"use strict";e.exports=function(){var t,e=[],r=-1,n=!1;function i(t,e){return t?(n=!0,t[e](),n=!1,this):this}return{add:function(t){return n?this:(e.splice(r+1,e.length-r),e.push(t),r=e.length-1,this)},setCallback:function(e){t=e},undo:function(){var n=e[r];return n?(i(n,"undo"),r-=1,t&&t(n.undo),this):this},redo:function(){var n=e[r+1];return n?(i(n,"redo"),r+=1,t&&t(n.redo),this):this},clear:function(){e=[],r=-1},hasUndo:function(){return-1!==r},hasRedo:function(){return r<e.length-1},getCommands:function(){return e},getPreviousCommand:function(){return e[r-1]},getIndex:function(){return r}}}},{}],522:[function(t,e,r){"use strict";var n=t("../lib"),i=t("../plot_api/plot_template"),o=t("./domain").defaults;e.exports=function(t,e,r,a){var s,l,g=a.type,c=a.attributes,u=a.handleDefaults,h=a.partition||"x",d=e._subplots[g],A=d.length,f=A&&d[0].replace(/\d+$/,"");function C(t,e){return n.coerce(s,l,c,t,e)}for(var p=0;p<A;p++){var I=d[p];s=t[I]?t[I]:t[I]={},l=i.newContainer(e,I,f),C("uirevision",e.uirevision);var v={};v[h]=[p/A,(p+1)/A],o(l,e,C,v),a.id=I,u(s,l,C,a)}}},{"../lib":426,"../plot_api/plot_template":463,"./domain":498}],523:[function(t,e,r){"use strict";['Variables are inserted using %{variable}, for example "y: %{y}".','Numbers are formatted using d3-format\'s syntax %{variable:d3-format}, for example "Price: %{y:$.2f}".',t("../constants/docs").FORMAT_LINK,"for details on the formatting syntax.",'Dates are formatted using d3-time-format\'s syntax %{variable|d3-time-format}, for example "Day: %{2019-01-01|%A}".',t("../constants/docs").DATE_FORMAT_LINK,"for details on the date formatting syntax."].join(" ");function n(t){var e=t.description?" "+t.description:"",r=t.keys||[];if(r.length>0){for(var n=[],i=0;i<r.length;i++)n[i]="`"+r[i]+"`";e+="Finally, the template string has access to ",e=1===r.length?"variable "+n[0]:"variables "+n.slice(0,-1).join(", ")+" and "+n.slice(-1)+"."}return e}r.hovertemplateAttrs=function(t,e){t=t||{};n(e=e||{});var r={valType:"string",dflt:"",editType:t.editType||"none"};return!1!==t.arrayOk&&(r.arrayOk=!0),r},r.texttemplateAttrs=function(t,e){t=t||{};n(e=e||{});var r={valType:"string",dflt:"",editType:t.editType||"calc"};return!1!==t.arrayOk&&(r.arrayOk=!0),r}},{"../constants/docs":400}],524:[function(t,e,r){"use strict";var n=t("./lib/loggers"),i=t("./lib/noop"),o=t("./lib/push_unique"),a=t("./lib/is_plain_object"),s=t("./lib/dom").addStyleRule,l=t("./lib/extend"),g=t("./plots/attributes"),c=t("./plots/layout_attributes"),u=l.extendFlat,h=l.extendDeepAll;function d(t){var e=t.name,i=t.categories,o=t.meta;if(r.modules[e])n.log("Type "+e+" already registered");else{r.subplotsRegistry[t.basePlotModule.name]||function(t){var e=t.name;if(r.subplotsRegistry[e])return void n.log("Plot type "+e+" already registered.");for(var i in p(t),r.subplotsRegistry[e]=t,r.componentsRegistry)m(i,t.name)}(t.basePlotModule);for(var a={},l=0;l<i.length;l++)a[i[l]]=!0,r.allCategories[i[l]]=!0;for(var g in r.modules[e]={_module:t,categories:a},o&&Object.keys(o).length&&(r.modules[e].meta=o),r.allTypes.push(e),r.componentsRegistry)I(g,e);t.layoutAttributes&&u(r.traceLayoutAttributes,t.layoutAttributes);var c=t.basePlotModule,h=c.name;if("mapbox"===h){var d=c.constants.styleRules;for(var A in d)s(".js-plotly-plot .plotly .mapboxgl-"+A,d[A])}"geo"!==h&&"mapbox"!==h||void 0===typeof window||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function A(t){if("string"!=typeof t.name)throw new Error("Component module *name* must be a string.");var e=t.name;for(var n in r.componentsRegistry[e]=t,t.layoutAttributes&&(t.layoutAttributes._isLinkedToArray&&o(r.layoutArrayContainers,e),p(t)),r.modules)I(e,n);for(var i in r.subplotsRegistry)m(e,i);for(var a in r.transformsRegistry)v(e,a);t.schema&&t.schema.layout&&h(c,t.schema.layout)}function f(t){if("string"!=typeof t.name)throw new Error("Transform module *name* must be a string.");var e="Transform module "+t.name,i="function"==typeof t.transform,o="function"==typeof t.calcTransform;if(!i&&!o)throw new Error(e+" is missing a *transform* or *calcTransform* method.");for(var s in i&&o&&n.log([e+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),a(t.attributes)||n.log(e+" registered without an *attributes* object."),"function"!=typeof t.supplyDefaults&&n.log(e+" registered without a *supplyDefaults* method."),r.transformsRegistry[t.name]=t,r.componentsRegistry)v(s,t.name)}function C(t){var e=t.name,n=e.split("-")[0],i=t.dictionary,o=t.format,a=i&&Object.keys(i).length,s=o&&Object.keys(o).length,l=r.localeRegistry,g=l[e];if(g||(l[e]=g={}),n!==e){var c=l[n];c||(l[n]=c={}),a&&c.dictionary===g.dictionary&&(c.dictionary=i),s&&c.format===g.format&&(c.format=o)}a&&(g.dictionary=i),s&&(g.format=o)}function p(t){if(t.layoutAttributes){var e=t.layoutAttributes._arrayAttrRegexps;if(e)for(var n=0;n<e.length;n++)o(r.layoutArrayRegexes,e[n])}}function I(t,e){var n=r.componentsRegistry[t].schema;if(n&&n.traces){var i=n.traces[e];i&&h(r.modules[e]._module.attributes,i)}}function v(t,e){var n=r.componentsRegistry[t].schema;if(n&&n.transforms){var i=n.transforms[e];i&&h(r.transformsRegistry[e].attributes,i)}}function m(t,e){var n=r.componentsRegistry[t].schema;if(n&&n.subplots){var i=r.subplotsRegistry[e],o=i.layoutAttributes,a="subplot"===i.attr?i.name:i.attr;Array.isArray(a)&&(a=a[0]);var s=n.subplots[a];o&&s&&h(o,s)}}function y(t){return"object"==typeof t&&(t=t.type),t}r.modules={},r.allCategories={},r.allTypes=[],r.subplotsRegistry={},r.transformsRegistry={},r.componentsRegistry={},r.layoutArrayContainers=[],r.layoutArrayRegexes=[],r.traceLayoutAttributes={},r.localeRegistry={},r.apiMethodRegistry={},r.collectableSubplotTypes=null,r.register=function(t){if(r.collectableSubplotTypes=null,!t)throw new Error("No argument passed to Plotly.register.");t&&!Array.isArray(t)&&(t=[t]);for(var e=0;e<t.length;e++){var n=t[e];if(!n)throw new Error("Invalid module was attempted to be registered!");switch(n.moduleType){case"trace":d(n);break;case"transform":f(n);break;case"component":A(n);break;case"locale":C(n);break;case"apiMethod":var i=n.name;r.apiMethodRegistry[i]=n.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},r.getModule=function(t){var e=r.modules[y(t)];return!!e&&e._module},r.traceIs=function(t,e){if("various"===(t=y(t)))return!1;var i=r.modules[t];return i||(t&&"area"!==t&&n.log("Unrecognized trace type "+t+"."),i=r.modules[g.type.dflt]),!!i.categories[e]},r.getTransformIndices=function(t,e){for(var r=[],n=t.transforms||[],i=0;i<n.length;i++)n[i].type===e&&r.push(i);return r},r.hasTransform=function(t,e){for(var r=t.transforms||[],n=0;n<r.length;n++)if(r[n].type===e)return!0;return!1},r.getComponentMethod=function(t,e){var n=r.componentsRegistry[t];return n&&n[e]||i},r.call=function(){var t=arguments[0],e=[].slice.call(arguments,1);return r.apiMethodRegistry[t].apply(null,e)}},{"./lib/dom":417,"./lib/extend":419,"./lib/is_plain_object":427,"./lib/loggers":430,"./lib/noop":435,"./lib/push_unique":440,"./plots/attributes":470,"./plots/layout_attributes":513}],525:[function(t,e,r){"use strict";var n=t("../registry"),i=t("../lib"),o=i.extendFlat,a=i.extendDeep;function s(t){var e;switch(t){case"themes__thumb":e={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":e={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:e={}}return e}e.exports=function(t,e){var r;t.framework&&t.framework.isPolar&&(t=t.framework.getConfig());var i,l=t.data,g=t.layout,c=a([],l),u=a({},g,s(e.tileClass)),h=t._context||{};if(e.width&&(u.width=e.width),e.height&&(u.height=e.height),"thumbnail"===e.tileClass||"themes__thumb"===e.tileClass){u.annotations=[];var d=Object.keys(u);for(r=0;r<d.length;r++)i=d[r],["xaxis","yaxis","zaxis"].indexOf(i.slice(0,5))>-1&&(u[d[r]].title={text:""});for(r=0;r<c.length;r++){var A=c[r];A.showscale=!1,A.marker&&(A.marker.showscale=!1),n.traceIs(A,"pie-like")&&(A.textposition="none")}}if(Array.isArray(e.annotations))for(r=0;r<e.annotations.length;r++)u.annotations.push(e.annotations[r]);var f=Object.keys(u).filter(function(t){return t.match(/^scene\d*$/)});if(f.length){var C={};for("thumbnail"===e.tileClass&&(C={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),r=0;r<f.length;r++){var p=u[f[r]];p.xaxis||(p.xaxis={}),p.yaxis||(p.yaxis={}),p.zaxis||(p.zaxis={}),o(p.xaxis,C),o(p.yaxis,C),o(p.zaxis,C),p._scene=null}}var I=document.createElement("div");e.tileClass&&(I.className=e.tileClass);var v={gd:I,td:I,layout:u,data:c,config:{staticPlot:void 0===e.staticPlot||e.staticPlot,plotGlPixelRatio:void 0===e.plotGlPixelRatio?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:h.mapboxAccessToken}};return"transparent"!==e.setBackground&&(v.config.setBackground=e.setBackground||"opaque"),v.gd.defaultLayout=s(e.tileClass),v}},{"../lib":426,"../registry":524}],526:[function(t,e,r){"use strict";var n=t("../lib"),i=t("../plot_api/to_image"),o=t("./filesaver"),a=t("./helpers");e.exports=function(t,e){var r;return n.isPlainObject(t)||(r=n.getGraphDiv(t)),(e=e||{}).format=e.format||"png",e.imageDataOnly=!0,new Promise(function(s,l){r&&r._snapshotInProgress&&l(new Error("Snapshotting already in progress.")),n.isIE()&&"svg"!==e.format&&l(new Error(a.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var g=i(t,e),c=e.filename||t.fn||"newplot";c+="."+e.format.replace("-","."),g.then(function(t){return r&&(r._snapshotInProgress=!1),o(t,c,e.format)}).then(function(t){s(t)}).catch(function(t){r&&(r._snapshotInProgress=!1),l(t)})})}},{"../lib":426,"../plot_api/to_image":466,"./filesaver":527,"./helpers":528}],527:[function(t,e,r){"use strict";var n=t("../lib"),i=t("./helpers");e.exports=function(t,e,r){var o=document.createElement("a"),a="download"in o;return new Promise(function(s,l){var g,c;if(n.isIE9orBelow()&&l(new Error("IE < 10 unsupported")),n.isSafari()){var u="svg"===r?",":";base64,";return i.octetStream(u+encodeURIComponent(t)),s(e)}return n.isIE()?(g=i.createBlob(t,"svg"),window.navigator.msSaveBlob(g,e),g=null,s(e)):a?(g=i.createBlob(t,r),c=i.createObjectURL(g),o.href=c,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o),i.revokeObjectURL(c),g=null,s(e)):void l(new Error("download error"))})}},{"../lib":426,"./helpers":528}],528:[function(t,e,r){"use strict";var n=t("../registry");r.getDelay=function(t){return t._has&&(t._has("gl3d")||t._has("gl2d")||t._has("mapbox"))?500:0},r.getRedrawFunc=function(t){return function(){var e=t._fullLayout||{};!(e._has&&e._has("polar"))&&t.data&&t.data[0]&&t.data[0].r||n.getComponentMethod("colorbar","draw")(t)}},r.encodeSVG=function(t){return"data:image/svg+xml,"+encodeURIComponent(t)},r.encodeJSON=function(t){return"data:application/json,"+encodeURIComponent(t)};var i=window.URL||window.webkitURL;r.createObjectURL=function(t){return i.createObjectURL(t)},r.revokeObjectURL=function(t){return i.revokeObjectURL(t)},r.createBlob=function(t,e){if("svg"===e)return new window.Blob([t],{type:"image/svg+xml;charset=utf-8"});if("full-json"===e)return new window.Blob([t],{type:"application/json;charset=utf-8"});var r=function(t){for(var e=t.length,r=new ArrayBuffer(e),n=new Uint8Array(r),i=0;i<e;i++)n[i]=t.charCodeAt(i);return r}(window.atob(t));return new window.Blob([r],{type:"image/"+e})},r.octetStream=function(t){document.location.href="data:application/octet-stream"+t},r.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,r.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":524}],529:[function(t,e,r){"use strict";var n=t("./helpers"),i={getDelay:n.getDelay,getRedrawFunc:n.getRedrawFunc,clone:t("./cloneplot"),toSVG:t("./tosvg"),svgToImg:t("./svgtoimg"),toImage:t("./toimage"),downloadImage:t("./download")};e.exports=i},{"./cloneplot":525,"./download":526,"./helpers":528,"./svgtoimg":530,"./toimage":531,"./tosvg":532}],530:[function(t,e,r){"use strict";var n=t("../lib"),i=t("events").EventEmitter,o=t("./helpers");e.exports=function(t){var e=t.emitter||new i,r=new Promise(function(i,a){var s=window.Image,l=t.svg,g=t.format||"png";if(n.isIE()&&"svg"!==g){var c=new Error(o.MSG_IE_BAD_FORMAT);return a(c),t.promise?r:e.emit("error",c)}var u,h,d=t.canvas,A=t.scale||1,f=A*(t.width||300),C=A*(t.height||150),p=d.getContext("2d"),I=new s;"svg"===g||n.isIE9orBelow()||n.isSafari()?h=o.encodeSVG(l):(u=o.createBlob(l,"svg"),h=o.createObjectURL(u)),d.width=f,d.height=C,I.onload=function(){var r;switch(u=null,o.revokeObjectURL(h),"svg"!==g&&p.drawImage(I,0,0,f,C),g){case"jpeg":r=d.toDataURL("image/jpeg");break;case"png":r=d.toDataURL("image/png");break;case"webp":r=d.toDataURL("image/webp");break;case"svg":r=h;break;default:var n="Image format is not jpeg, png, svg or webp.";if(a(new Error(n)),!t.promise)return e.emit("error",n)}i(r),t.promise||e.emit("success",r)},I.onerror=function(r){if(u=null,o.revokeObjectURL(h),a(r),!t.promise)return e.emit("error",r)},I.src=h});return t.promise?r:e}},{"../lib":426,"./helpers":528,events:140}],531:[function(t,e,r){"use strict";var n=t("events").EventEmitter,i=t("../registry"),o=t("../lib"),a=t("./helpers"),s=t("./cloneplot"),l=t("./tosvg"),g=t("./svgtoimg");e.exports=function(t,e){var r=new n,c=s(t,{format:"png"}),u=c.gd;u.style.position="absolute",u.style.left="-5000px",document.body.appendChild(u);var h=a.getRedrawFunc(u);return i.call("plot",u,c.data,c.layout,c.config).then(h).then(function(){var t=a.getDelay(u._fullLayout);setTimeout(function(){var t=l(u),n=document.createElement("canvas");n.id=o.randstr(),(r=g({format:e.format,width:u._fullLayout.width,height:u._fullLayout.height,canvas:n,emitter:r,svg:t})).clean=function(){u&&document.body.removeChild(u)}},t)}).catch(function(t){r.emit("error",t)}),r}},{"../lib":426,"../registry":524,"./cloneplot":525,"./helpers":528,"./svgtoimg":530,"./tosvg":532,events:140}],532:[function(t,e,r){"use strict";var n=t("d3"),i=t("../lib"),o=t("../components/drawing"),a=t("../components/color"),s=t("../constants/xmlns_namespaces"),l=/"/g,g=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");e.exports=function(t,e,r){var c,u=t._fullLayout,h=u._paper,d=u._toppaper,A=u.width,f=u.height;h.insert("rect",":first-child").call(o.setRect,0,0,A,f).call(a.fill,u.paper_bgcolor);var C=u._basePlotModules||[];for(c=0;c<C.length;c++){var p=C[c];p.toSVG&&p.toSVG(t)}if(d){var I=d.node().childNodes,v=Array.prototype.slice.call(I);for(c=0;c<v.length;c++){var m=v[c];m.childNodes.length&&h.node().appendChild(m)}}if(u._draggers&&u._draggers.remove(),h.node().style.background="",h.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var t=n.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){t.style({visibility:null,display:null});var e=this.style.fontFamily;e&&-1!==e.indexOf('"')&&t.style("font-family",e.replace(l,"TOBESTRIPPED"))}else t.remove()}),u._gradientUrlQueryParts){var y=[];for(var b in u._gradientUrlQueryParts)y.push(b);y.length&&h.selectAll(y.join(",")).each(function(){var t=n.select(this),e=this.style.fill;e&&-1!==e.indexOf("url(")&&t.style("fill",e.replace(l,"TOBESTRIPPED"));var r=this.style.stroke;r&&-1!==r.indexOf("url(")&&t.style("stroke",r.replace(l,"TOBESTRIPPED"))})}"pdf"!==e&&"eps"!==e||h.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),h.node().setAttributeNS(s.xmlns,"xmlns",s.svg),h.node().setAttributeNS(s.xmlns,"xmlns:xlink",s.xlink),"svg"===e&&r&&(h.attr("width",r*A),h.attr("height",r*f),h.attr("viewBox","0 0 "+A+" "+f));var x=(new window.XMLSerializer).serializeToString(h.node());return x=function(t){var e=n.select("body").append("div").style({display:"none"}).html(""),r=t.replace(/(&[^;]*;)/gi,function(t){return"&lt;"===t?"&#60;":"&rt;"===t?"&#62;":-1!==t.indexOf("<")||-1!==t.indexOf(">")?"":e.html(t).text()});return e.remove(),r}(x),x=(x=x.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(g,"'"),i.isIE()&&(x=(x=(x=x.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),x}},{"../components/color":304,"../components/drawing":325,"../constants/xmlns_namespaces":405,"../lib":426,d3:74}],533:[function(t,e,r){"use strict";var n=t("../../lib");e.exports=function(t,e){for(var r=0;r<t.length;r++)t[r].i=r;n.mergeArray(e.text,t,"tx"),n.mergeArray(e.hovertext,t,"htx");var i=e.marker;if(i){n.mergeArray(i.opacity,t,"mo",!0),n.mergeArray(i.color,t,"mc");var o=i.line;o&&(n.mergeArray(o.color,t,"mlc"),n.mergeArrayCastPositive(o.width,t,"mlw"))}}},{"../../lib":426}],534:[function(t,e,r){"use strict";var n=t("../scatter/attributes"),i=t("../../plots/template_attributes").hovertemplateAttrs,o=t("../../plots/template_attributes").texttemplateAttrs,a=t("../../components/colorscale/attributes"),s=t("../../plots/font_attributes"),l=t("./constants"),g=t("../../lib/extend").extendFlat,c=s({editType:"calc",arrayOk:!0,colorEditType:"style"}),u=g({line:g({width:g({},n.marker.line.width,{dflt:0}),editType:"calc"},a("marker.line")),editType:"calc"},a("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}});e.exports={x:n.x,x0:n.x0,dx:n.dx,y:n.y,y0:n.y0,dy:n.dy,text:n.text,texttemplate:o({editType:"plot"},{keys:l.eventDataKeys}),hovertext:n.hovertext,hovertemplate:i({},{keys:l.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:g({},c,{}),insidetextfont:g({},c,{}),outsidetextfont:g({},c,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:g({},n.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:u,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:n.selected.marker.opacity,color:n.selected.marker.color,editType:"style"},textfont:n.selected.textfont,editType:"style"},unselected:{marker:{opacity:n.unselected.marker.opacity,color:n.unselected.marker.color,editType:"style"},textfont:n.unselected.textfont,editType:"style"},r:n.r,t:n.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":311,"../../lib/extend":419,"../../plots/font_attributes":499,"../../plots/template_attributes":523,"../scatter/attributes":587,"./constants":536}],535:[function(t,e,r){"use strict";var n=t("../../plots/cartesian/axes"),i=t("../../components/colorscale/helpers").hasColorscale,o=t("../../components/colorscale/calc"),a=t("./arrays_to_calcdata"),s=t("../scatter/calc_selection");e.exports=function(t,e){var r,l,g=n.getFromId(t,e.xaxis||"x"),c=n.getFromId(t,e.yaxis||"y");"h"===e.orientation?(r=g.makeCalcdata(e,"x"),l=c.makeCalcdata(e,"y")):(r=c.makeCalcdata(e,"y"),l=g.makeCalcdata(e,"x"));for(var u=Math.min(l.length,r.length),h=new Array(u),d=0;d<u;d++)h[d]={p:l[d],s:r[d]},e.ids&&(h[d].id=String(e.ids[d]));return i(e,"marker")&&o(t,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),i(e,"marker.line")&&o(t,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}),a(h,e),s(h,e),h}},{"../../components/colorscale/calc":312,"../../components/colorscale/helpers":315,"../../plots/cartesian/axes":473,"../scatter/calc_selection":589,"./arrays_to_calcdata":533}],536:[function(t,e,r){"use strict";e.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],537:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../../lib").isArrayOrTypedArray,o=t("../../constants/numerical").BADNUM,a=t("../../registry"),s=t("../../plots/cartesian/axes"),l=t("../../plots/cartesian/axis_ids").getAxisGroup,g=t("./sieve.js");function c(t,e,r,a,c){if(a.length){var m,y,b,x;switch(function(t,e){var r,o;for(r=0;r<e.length;r++){var a,s=e[r],l=s[0].trace,g="funnel"===l.type?l._base:l.base,c="h"===l.orientation?l.xcalendar:l.ycalendar,u="category"===t.type||"multicategory"===t.type?function(){return null}:t.d2c;if(i(g)){for(o=0;o<Math.min(g.length,s.length);o++)a=u(g[o],0,c),n(a)?(s[o].b=+a,s[o].hasB=1):s[o].b=0;for(;o<s.length;o++)s[o].b=0}else{a=u(g,0,c);var h=n(a);for(a=h?a:0,o=0;o<s.length;o++)s[o].b=a,h&&(s[o].hasB=1)}}}(r,a),c.mode){case"overlay":u(e,r,a,c);break;case"group":for(m=[],y=[],b=0;b<a.length;b++)void 0===(x=a[b])[0].trace.offset?y.push(x):m.push(x);y.length&&function(t,e,r,n,i){var a=new g(n,{sepNegVal:!1,overlapNoMerge:!i.norm});(function(t,e,r,n){for(var i=t._fullLayout,o=r.positions,a=r.distinctPositions,s=r.minDiff,g=r.traces,c=g.length,u=o.length!==a.length,h=s*(1-n.gap),C=l(i,e._id)+g[0][0].trace.orientation,p=i._alignmentOpts[C]||{},I=0;I<c;I++){var v,m,y=g[I],b=y[0].trace,x=p[b.alignmentgroup]||{},_=Object.keys(x.offsetGroups||{}).length,w=(v=_?h/_:u?h/c:h)*(1-(n.groupgap||0));m=_?((2*b._offsetIndex+1-_)*v-w)/2:u?((2*I+1-c)*v-w)/2:-w/2;var k=y[0].t;k.barwidth=w,k.poffset=m,k.bargroupwidth=h,k.bardelta=s}r.binWidth=g[0][0].t.barwidth/100,d(r),A(e,r),f(e,r,u)})(t,e,a,i),function(t){for(var e=t.traces,r=0;r<e.length;r++){var n=e[r],i=n[0].trace;if(void 0===i.base)for(var a=new g([n],{sepNegVal:!0,overlapNoMerge:!0}),s=0;s<n.length;s++){var l=n[s];if(l.p!==o){var c=a.put(l.p,l.b+l.s);c&&(l.b=c)}}}}(a),i.norm?(p(a),I(r,a,i)):C(r,a)}(t,e,r,y,c),m.length&&u(e,r,m,c);break;case"stack":case"relative":for(m=[],y=[],b=0;b<a.length;b++)void 0===(x=a[b])[0].trace.base?y.push(x):m.push(x);y.length&&function(t,e,r,n,i){var a=new g(n,{sepNegVal:"relative"===i.mode,overlapNoMerge:!(i.norm||"stack"===i.mode||"relative"===i.mode)});h(e,a,i),function(t,e,r){var n,i,a,l,g,c,u=v(t),h=e.traces;for(l=0;l<h.length;l++)if(n=h[l],"funnel"===(i=n[0].trace).type)for(g=0;g<n.length;g++)(c=n[g]).s!==o&&e.put(c.p,-.5*c.s);for(l=0;l<h.length;l++){n=h[l],i=n[0].trace,a="funnel"===i.type;var d=[];for(g=0;g<n.length;g++)if((c=n[g]).s!==o){var A;A=a?c.s:c.s+c.b;var f=e.put(c.p,A),C=f+A;c.b=f,c[u]=C,r.norm||(d.push(C),c.hasB&&d.push(f))}r.norm||(i._extremes[t._id]=s.findExtremes(t,d,{tozero:!0,padded:!0}))}}(r,a,i);for(var l=0;l<n.length;l++)for(var c=n[l],u=0;u<c.length;u++){var d=c[u];if(d.s!==o){var A=d.b+d.s===a.get(d.p,d.s);A&&(d._outmost=!0)}}i.norm&&I(r,a,i)}(0,e,r,y,c),m.length&&u(e,r,m,c)}!function(t,e){var r,i,o,a=v(e),s={},l=1/0,g=-1/0;for(r=0;r<t.length;r++)for(o=t[r],i=0;i<o.length;i++){var c=o[i].p;n(c)&&(l=Math.min(l,c),g=Math.max(g,c))}var u=1e4/(g-l),h=s.round=function(t){return String(Math.round(u*(t-l)))};for(r=0;r<t.length;r++){(o=t[r])[0].t.extents=s;var d=o[0].t.poffset,A=Array.isArray(d);for(i=0;i<o.length;i++){var f=o[i],C=f[a]-f.w/2;if(n(C)){var p=f[a]+f.w/2,I=h(f.p);s[I]?s[I]=[Math.min(C,s[I][0]),Math.max(p,s[I][1])]:s[I]=[C,p]}f.p0=f.p+(A?d[i]:d),f.p1=f.p0+f.w,f.s0=f.b,f.s1=f.s0+f.s}}}(a,e)}}function u(t,e,r,n){for(var i=0;i<r.length;i++){var o=r[i],a=new g([o],{sepNegVal:!1,overlapNoMerge:!n.norm});h(t,a,n),n.norm?(p(a),I(e,a,n)):C(e,a)}}function h(t,e,r){for(var n=e.minDiff,i=e.traces,o=n*(1-r.gap),a=o*(1-(r.groupgap||0)),s=-a/2,l=0;l<i.length;l++){var g=i[l][0].t;g.barwidth=a,g.poffset=s,g.bargroupwidth=o,g.bardelta=n}e.binWidth=i[0][0].t.barwidth/100,d(e),A(t,e),f(t,e)}function d(t){var e,r,o=t.traces;for(e=0;e<o.length;e++){var a,s=o[e],l=s[0],g=l.trace,c=l.t,u=g._offset||g.offset,h=c.poffset;if(i(u)){for(a=Array.prototype.slice.call(u,0,s.length),r=0;r<a.length;r++)n(a[r])||(a[r]=h);for(r=a.length;r<s.length;r++)a.push(h);c.poffset=a}else void 0!==u&&(c.poffset=u);var d=g._width||g.width,A=c.barwidth;if(i(d)){var f=Array.prototype.slice.call(d,0,s.length);for(r=0;r<f.length;r++)n(f[r])||(f[r]=A);for(r=f.length;r<s.length;r++)f.push(A);if(c.barwidth=f,void 0===u){for(a=[],r=0;r<s.length;r++)a.push(h+(A-f[r])/2);c.poffset=a}}else void 0!==d&&(c.barwidth=d,void 0===u&&(c.poffset=h+(A-d)/2))}}function A(t,e){for(var r=e.traces,n=v(t),i=0;i<r.length;i++)for(var o=r[i],a=o[0].t,s=a.poffset,l=Array.isArray(s),g=a.barwidth,c=Array.isArray(g),u=0;u<o.length;u++){var h=o[u],d=h.w=c?g[u]:g;h[n]=h.p+(l?s[u]:s)+d/2}}function f(t,e,r){var n=e.traces,i=e.minDiff/2;s.minDtick(t,e.minDiff,e.distinctPositions[0],r);for(var o=0;o<n.length;o++){var a,l,g,c,u=n[o],h=u[0],d=h.trace,A=[];for(c=0;c<u.length;c++)l=(a=u[c]).p-i,g=a.p+i,A.push(l,g);if(d.width||d.offset){var f=h.t,C=f.poffset,p=f.barwidth,I=Array.isArray(C),v=Array.isArray(p);for(c=0;c<u.length;c++){a=u[c];var m=I?C[c]:C,y=v?p[c]:p;g=(l=a.p+m)+y,A.push(l,g)}}d._extremes[t._id]=s.findExtremes(t,A,{padded:!1})}}function C(t,e){for(var r=e.traces,n=v(t),i=0;i<r.length;i++){for(var o=r[i],a=o[0].trace,l=[],g=!0,c=0;c<o.length;c++){var u=o[c],h=u.b,d=h+u.s;u[n]=d,l.push(d),u.hasB&&l.push(h),u.hasB&&u.b>0&&u.s>0||(g=!1)}a._extremes[t._id]=s.findExtremes(t,l,{tozero:!g,padded:!0})}}function p(t){for(var e=t.traces,r=0;r<e.length;r++)for(var n=e[r],i=0;i<n.length;i++){var a=n[i];a.s!==o&&t.put(a.p,a.b+a.s)}}function I(t,e,r){var i=e.traces,a=v(t),l="fraction"===r.norm?1:100,g=l/1e9,c=t.l2c(t.c2l(0)),u="stack"===r.mode?l:c;function h(e){return n(t.c2l(e))&&(e<c-g||e>u+g||!n(c))}for(var d=0;d<i.length;d++){for(var A=i[d],f=A[0].trace,C=[],p=!0,I=!1,m=0;m<A.length;m++){var y=A[m];if(y.s!==o){var b=Math.abs(l/e.get(y.p,y.s));y.b*=b,y.s*=b;var x=y.b,_=x+y.s;y[a]=_,C.push(_),I=I||h(_),y.hasB&&(C.push(x),I=I||h(x)),y.hasB&&y.b>0&&y.s>0||(p=!1)}}f._extremes[t._id]=s.findExtremes(t,C,{tozero:!p,padded:I})}}function v(t){return t._id.charAt(0)}e.exports={crossTraceCalc:function(t,e){for(var r=e.xaxis,n=e.yaxis,i=t._fullLayout,o=t._fullData,s=t.calcdata,l=[],g=[],u=0;u<o.length;u++){var h=o[u];if(!0===h.visible&&a.traceIs(h,"bar")&&h.xaxis===r._id&&h.yaxis===n._id&&("h"===h.orientation?l.push(s[u]):g.push(s[u]),h._computePh))for(var d=t.calcdata[u],A=0;A<d.length;A++)"function"==typeof d[A].ph0&&(d[A].ph0=d[A].ph0()),"function"==typeof d[A].ph1&&(d[A].ph1=d[A].ph1())}var f={mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap};c(t,r,n,g,f),c(t,n,r,l,f)},setGroupPositions:c}},{"../../constants/numerical":404,"../../lib":426,"../../plots/cartesian/axes":473,"../../plots/cartesian/axis_ids":476,"../../registry":524,"./sieve.js":547,"fast-isnumeric":145}],538:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../components/color"),o=t("../../registry"),a=t("../scatter/xy_defaults"),s=t("./style_defaults"),l=t("../../plots/cartesian/axis_ids").getAxisGroup,g=t("./attributes"),c=n.coerceFont;function u(t,e,r,n){var i=e.orientation,o=e[{v:"x",h:"y"}[i]+"axis"],a=l(r,o)+i,s=r._alignmentOpts||{},g=n("alignmentgroup"),c=s[a];c||(c=s[a]={});var u=c[g];u?u.traces.push(e):u=c[g]={traces:[e],alignmentIndex:Object.keys(c).length,offsetGroups:{}};var h=n("offsetgroup"),d=u.offsetGroups,A=d[h];h&&(A||(A=d[h]={offsetIndex:Object.keys(d).length}),e._offsetIndex=A.offsetIndex)}function h(t,e,r,i,o,a){var s=!(!1===(a=a||{}).moduleHasSelected),l=!(!1===a.moduleHasUnselected),g=!(!1===a.moduleHasConstrain),u=!(!1===a.moduleHasCliponaxis),h=!(!1===a.moduleHasTextangle),d=!(!1===a.moduleHasInsideanchor),A=!!a.hasPathbar,f=Array.isArray(o)||"auto"===o,C=f||"inside"===o,p=f||"outside"===o;if(C||p){var I=c(i,"textfont",r.font),v=n.extendFlat({},I),m=!(t.textfont&&t.textfont.color);if(m&&delete v.color,c(i,"insidetextfont",v),A){var y=n.extendFlat({},I);m&&delete y.color,c(i,"pathbar.textfont",y)}p&&c(i,"outsidetextfont",I),s&&i("selected.textfont.color"),l&&i("unselected.textfont.color"),g&&i("constraintext"),u&&i("cliponaxis"),h&&i("textangle"),i("texttemplate")}C&&d&&i("insidetextanchor")}e.exports={supplyDefaults:function(t,e,r,l){function c(r,i){return n.coerce(t,e,g,r,i)}if(a(t,e,l,c)){c("orientation",e.x&&!e.y?"h":"v"),c("base"),c("offset"),c("width"),c("text"),c("hovertext"),c("hovertemplate");var u=c("textposition");h(t,0,l,c,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),s(t,e,c,r,l);var d=(e.marker.line||{}).color,A=o.getComponentMethod("errorbars","supplyDefaults");A(t,e,d||i.defaultLine,{axis:"y"}),A(t,e,d||i.defaultLine,{axis:"x",inherit:"y"}),n.coerceSelectionMarkerOpacity(e,c)}else e.visible=!1},crossTraceDefaults:function(t,e){var r;function i(t){return n.coerce(r._input,r,g,t)}if("group"===e.barmode)for(var o=0;o<t.length;o++)"bar"===(r=t[o]).type&&(r._input,u(0,r,e,i))},handleGroupingDefaults:u,handleText:h}},{"../../components/color":304,"../../lib":426,"../../plots/cartesian/axis_ids":476,"../../registry":524,"../scatter/xy_defaults":613,"./attributes":534,"./style_defaults":549}],539:[function(t,e,r){"use strict";e.exports=function(t,e,r){return t.x="xVal"in e?e.xVal:e.x,t.y="yVal"in e?e.yVal:e.y,e.xa&&(t.xaxis=e.xa),e.ya&&(t.yaxis=e.ya),"h"===r.orientation?(t.label=t.y,t.value=t.x):(t.label=t.x,t.value=t.y),t}},{}],540:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("tinycolor2"),o=t("../../lib").isArrayOrTypedArray;r.coerceString=function(t,e,r){if("string"==typeof e){if(e||!t.noBlank)return e}else if(("number"==typeof e||!0===e)&&!t.strict)return String(e);return void 0!==r?r:t.dflt},r.coerceNumber=function(t,e,r){if(n(e)){e=+e;var i=t.min,o=t.max;if(!(void 0!==i&&e<i||void 0!==o&&e>o))return e}return void 0!==r?r:t.dflt},r.coerceColor=function(t,e,r){return i(e).isValid()?e:void 0!==r?r:t.dflt},r.coerceEnumerated=function(t,e,r){return t.coerceNumber&&(e=+e),-1!==t.values.indexOf(e)?e:void 0!==r?r:t.dflt},r.getValue=function(t,e){var r;return Array.isArray(t)?e<t.length&&(r=t[e]):r=t,r},r.getLineWidth=function(t,e){return 0<e.mlw?e.mlw:o(t.marker.line.width)?0:t.marker.line.width}},{"../../lib":426,"fast-isnumeric":145,tinycolor2:693}],541:[function(t,e,r){"use strict";var n=t("../../components/fx"),i=t("../../registry"),o=t("../../components/color"),a=t("../../lib").fillText,s=t("./helpers").getLineWidth,l=t("../../plots/cartesian/axes").hoverLabelText,g=t("../../constants/numerical").BADNUM;function c(t,e,r,i){var o,s,c,u,h,d,A,f=t.cd,C=f[0].trace,p=f[0].t,I="closest"===i,v="waterfall"===C.type,m=t.maxHoverDistance;function y(t){return t[c]-t.w/2}function b(t){return t[c]+t.w/2}var x=I?y:function(t){return Math.min(y(t),t.p-p.bardelta/2)},_=I?b:function(t){return Math.max(b(t),t.p+p.bardelta/2)};function w(t,e){return n.inbox(t-o,e-o,m+Math.min(1,Math.abs(e-t)/A)-1)}function k(t){return w(x(t),_(t))}function T(t){var e=s,r=t.b,i=t[u];if(v){var o=Math.abs(t.rawS)||0;e>0?i+=o:e<0&&(i-=o)}return n.inbox(r-e,i-e,m+(i-e)/(i-r)-1)}"h"===C.orientation?(o=r,s=e,c="y",u="x",h=T,d=k):(o=e,s=r,c="x",u="y",d=T,h=k);var M=t[c+"a"],E=t[u+"a"];A=Math.abs(M.r2c(M.range[1])-M.r2c(M.range[0]));var O=n.getDistanceFunction(i,h,d,function(t){return(h(t)+d(t))/2});if(n.getClosest(f,O,t),!1!==t.index&&f[t.index].p!==g){I||(x=function(t){return Math.min(y(t),t.p-p.bargroupwidth/2)},_=function(t){return Math.max(b(t),t.p+p.bargroupwidth/2)});var S=f[t.index],R=C.base?S.b+S.s:S.s;t[u+"0"]=t[u+"1"]=E.c2p(S[u],!0),t[u+"LabelVal"]=R;var D=p.extents[p.extents.round(S.p)];return t[c+"0"]=M.c2p(I?x(S):D[0],!0),t[c+"1"]=M.c2p(I?_(S):D[1],!0),t[c+"LabelVal"]=S.p,t.labelLabel=l(M,t[c+"LabelVal"]),t.valueLabel=l(E,t[u+"LabelVal"]),t.spikeDistance=(T(S)+function(t){return w(y(t),b(t))}(S))/2-m,t[c+"Spike"]=M.c2p(S.p,!0),a(S,C,t),t.hovertemplate=C.hovertemplate,t}}function u(t,e){var r=e.mcc||t.marker.color,n=e.mlcc||t.marker.line.color,i=s(t,e);return o.opacity(r)?r:o.opacity(n)&&i?n:void 0}e.exports={hoverPoints:function(t,e,r,n){var o=c(t,e,r,n);if(o){var a=o.cd,s=a[0].trace,l=a[o.index];return o.color=u(s,l),i.getComponentMethod("errorbars","hoverInfo")(l,s,o),[o]}},hoverOnBars:c,getTraceColor:u}},{"../../components/color":304,"../../components/fx":343,"../../constants/numerical":404,"../../lib":426,"../../plots/cartesian/axes":473,"../../registry":524,"./helpers":540}],542:[function(t,e,r){"use strict";e.exports={attributes:t("./attributes"),layoutAttributes:t("./layout_attributes"),supplyDefaults:t("./defaults").supplyDefaults,crossTraceDefaults:t("./defaults").crossTraceDefaults,supplyLayoutDefaults:t("./layout_defaults"),calc:t("./calc"),crossTraceCalc:t("./cross_trace_calc").crossTraceCalc,colorbar:t("../scatter/marker_colorbar"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot").plot,style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover").hoverPoints,eventData:t("./event_data"),selectPoints:t("./select"),moduleType:"trace",name:"bar",basePlotModule:t("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":484,"../scatter/marker_colorbar":605,"./arrays_to_calcdata":533,"./attributes":534,"./calc":535,"./cross_trace_calc":537,"./defaults":538,"./event_data":539,"./hover":541,"./layout_attributes":543,"./layout_defaults":544,"./plot":545,"./select":546,"./style":548}],543:[function(t,e,r){"use strict";e.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],544:[function(t,e,r){"use strict";var n=t("../../registry"),i=t("../../plots/cartesian/axes"),o=t("../../lib"),a=t("./layout_attributes");e.exports=function(t,e,r){function s(r,n){return o.coerce(t,e,a,r,n)}for(var l=!1,g=!1,c=!1,u={},h=s("barmode"),d=0;d<r.length;d++){var A=r[d];if(n.traceIs(A,"bar")&&A.visible){if(l=!0,"group"===h){var f=A.xaxis+A.yaxis;u[f]&&(c=!0),u[f]=!0}if(A.visible&&"histogram"===A.type)"category"!==i.getFromId({_fullLayout:e},A["v"===A.orientation?"xaxis":"yaxis"]).type&&(g=!0)}}l?("overlay"!==h&&s("barnorm"),s("bargap",g&&!c?0:.2),s("bargroupgap")):delete e.barmode}},{"../../lib":426,"../../plots/cartesian/axes":473,"../../registry":524,"./layout_attributes":543}],545:[function(t,e,r){"use strict";var n=t("d3"),i=t("fast-isnumeric"),o=t("../../lib"),a=t("../../lib/svg_text_utils"),s=t("../../components/color"),l=t("../../components/drawing"),g=t("../../registry"),c=t("../../plots/cartesian/axes").tickText,u=t("./uniform_text"),h=u.recordMinTextSize,d=u.clearMinTextSize,A=t("./style"),f=t("./helpers"),C=t("./constants"),p=t("./attributes"),I=p.text,v=p.textposition,m=t("../../components/fx/helpers").appendArrayPointValue,y=C.TEXTPAD;function b(t){return t.id}function x(t){if(t.ids)return b}function _(t,e){return t<e?1:-1}function w(t,e,r,n){var i;return!e.uniformtext.mode&&k(r)?(n&&(i=n()),t.transition().duration(r.duration).ease(r.easing).each("end",function(){i&&i()}).each("interrupt",function(){i&&i()})):t}function k(t){return t&&t.duration>0}function T(t){return"auto"===t?0:t}function M(t,e){var r=Math.PI/180*e,n=Math.abs(Math.sin(r)),i=Math.abs(Math.cos(r));return{x:t.width*i+t.height*n,y:t.width*n+t.height*i}}function E(t,e,r,n,i,o){var a=!!o.isHorizontal,s=!!o.constrained,l=o.angle||0,g=o.anchor||"end",c="end"===g,u="start"===g,h=((o.leftToRight||0)+1)/2,d=1-h,A=i.width,f=i.height,C=Math.abs(e-t),p=Math.abs(n-r),I=C>2*y&&p>2*y?y:0;C-=2*I,p-=2*I;var v=T(l);"auto"!==l||A<=C&&f<=p||!(A>C||f>p)||(A>p||f>C)&&A<f==C<p||(v+=90);var m=M(i,v),b=1;s&&(b=Math.min(1,C/m.x,p/m.y));var x=i.left*d+i.right*h,w=(i.top+i.bottom)/2,k=(t+y)*d+(e-y)*h,E=(r+n)/2,O=0,S=0;if(u||c){var R=(a?m.x:m.y)/2,D=a?_(t,e):_(r,n);a?u?(k=t+D*I,O=-D*R):(k=e-D*I,O=D*R):u?(E=r+D*I,S=-D*R):(E=n-D*I,S=D*R)}return{textX:x,textY:w,targetX:k,targetY:E,anchorX:O,anchorY:S,scale:b,rotate:v}}e.exports={plot:function(t,e,r,u,C,p){var b=e.xaxis,O=e.yaxis,S=t._fullLayout;C||(C={mode:S.barmode,norm:S.barmode,gap:S.bargap,groupgap:S.bargroupgap},d("bar",S));var R=o.makeTraceGroups(u,r,"trace bars").each(function(r){var g=n.select(this),u=r[0].trace,d="waterfall"===u.type,R="funnel"===u.type,D="bar"===u.type||R,L=0;d&&u.connector.visible&&"between"===u.connector.mode&&(L=u.connector.line.width/2);var P="h"===u.orientation,N=k(C),z=o.ensureSingle(g,"g","points"),F=x(u),B=z.selectAll("g.point").data(o.identity,F);B.enter().append("g").classed("point",!0),B.exit().remove(),B.each(function(g,d){var x,k,R=n.select(this),z=function(t,e,r,n){var i=[],o=[],a=n?e:r,s=n?r:e;return i[0]=a.c2p(t.s0,!0),o[0]=s.c2p(t.p0,!0),i[1]=a.c2p(t.s1,!0),o[1]=s.c2p(t.p1,!0),n?[i,o]:[o,i]}(g,b,O,P),F=z[0][0],B=z[0][1],j=z[1][0],V=z[1][1],G=0==(P?B-F:V-j);if(G&&D&&f.getLineWidth(u,g)&&(G=!1),G||(G=!(i(F)&&i(B)&&i(j)&&i(V))),g.isBlank=G,G&&(P?B=F:V=j),L&&!G&&(P?B+=_(F-=_(F,B)*L,B)*L:V+=_(j-=_(j,V)*L,V)*L),"waterfall"===u.type){if(!G){var U=u[g.dir].marker;x=U.line.width,k=U.color}}else x=f.getLineWidth(u,g),k=g.mc||u.marker.color;function Z(t){var e=n.round(x/2%1,2);return 0===C.gap&&0===C.groupgap?n.round(Math.round(t)-e,2):t}if(!t._context.staticPlot){var H=s.opacity(k)<1||x>.01?Z:function(t,e,r){return r&&t===e?t:Math.abs(t-e)>=2?Z(t):t>e?Math.ceil(t):Math.floor(t)};B=H(B,F=H(F,B,P),P),V=H(V,j=H(j,V,!P),!P)}var W=w(o.ensureSingle(R,"path"),S,C,p);if(W.style("vector-effect","non-scaling-stroke").attr("d",isNaN((B-F)*(V-j))?"M0,0Z":"M"+F+","+j+"V"+V+"H"+B+"V"+j+"Z").call(l.setClipUrl,e.layerClipId,t),!S.uniformtext.mode&&N){var Y=l.makePointStyleFns(u);l.singlePointStyle(g,W,u,Y,t)}!function(t,e,r,n,i,s,g,u,d,C,p){var b,x=e.xaxis,k=e.yaxis,O=t._fullLayout;function S(e,r,n){var i=o.ensureSingle(e,"text").text(r).attr({class:"bartext bartext-"+b,"text-anchor":"middle","data-notex":1}).call(l.font,n).call(a.convertToTspans,t);return i}var R=n[0].trace,D="h"===R.orientation,L=function(t,e,r,n,i){var a,s=e[0].trace;return a=s.texttemplate?function(t,e,r,n,i){var a=e[0].trace,s=o.castOption(a,r,"texttemplate");if(!s)return"";var l,g,u,h,d="waterfall"===a.type,A="funnel"===a.type;function f(t){return c(h,+t,!0).text}"h"===a.orientation?(l="y",g=i,u="x",h=n):(l="x",g=n,u="y",h=i);var C,p=e[r],I={};I.label=p.p,I.labelLabel=I[l+"Label"]=(C=p.p,c(g,C,!0).text);var v=o.castOption(a,p.i,"text");(0===v||v)&&(I.text=v),I.value=p.s,I.valueLabel=I[u+"Label"]=f(p.s);var y={};m(y,a,p.i),d&&(I.delta=+p.rawS||p.s,I.deltaLabel=f(I.delta),I.final=p.v,I.finalLabel=f(I.final),I.initial=I.final-I.delta,I.initialLabel=f(I.initial)),A&&(I.value=p.s,I.valueLabel=f(I.value),I.percentInitial=p.begR,I.percentInitialLabel=o.formatPercent(p.begR),I.percentPrevious=p.difR,I.percentPreviousLabel=o.formatPercent(p.difR),I.percentTotal=p.sumR,I.percenTotalLabel=o.formatPercent(p.sumR));var b=o.castOption(a,p.i,"customdata");return b&&(I.customdata=b),o.texttemplateString(s,I,t._d3locale,y,I,a._meta||{})}(t,e,r,n,i):s.textinfo?function(t,e,r,n){var i=t[0].trace,a="h"===i.orientation,s="waterfall"===i.type,l="funnel"===i.type;function g(t){var e=a?r:n;return c(e,+t,!0).text}var u,h,d=i.textinfo,A=t[e],f=d.split("+"),C=[],p=function(t){return-1!==f.indexOf(t)};if(p("label")&&C.push((h=t[e].p,c(a?n:r,h,!0).text)),p("text")&&(0===(u=o.castOption(i,A.i,"text"))||u)&&C.push(u),s){var I=+A.rawS||A.s,v=A.v,m=v-I;p("initial")&&C.push(g(m)),p("delta")&&C.push(g(I)),p("final")&&C.push(g(v))}if(l){p("value")&&C.push(g(A.s));var y=0;p("percent initial")&&y++,p("percent previous")&&y++,p("percent total")&&y++;var b=y>1;p("percent initial")&&(u=o.formatPercent(A.begR),b&&(u+=" of initial"),C.push(u)),p("percent previous")&&(u=o.formatPercent(A.difR),b&&(u+=" of previous"),C.push(u)),p("percent total")&&(u=o.formatPercent(A.sumR),b&&(u+=" of total"),C.push(u))}return C.join("<br>")}(e,r,n,i):f.getValue(s.text,r),f.coerceString(I,a)}(O,n,i,x,k);b=function(t,e){var r=f.getValue(t.textposition,e);return f.coerceEnumerated(v,r)}(R,i);var P="stack"===C.mode||"relative"===C.mode,N=n[i],z=!P||N._outmost;if(L&&"none"!==b&&(!N.isBlank&&s!==g&&u!==d||"auto"!==b&&"inside"!==b)){var F=O.font,B=A.getBarColor(n[i],R),j=A.getInsideTextFont(R,i,F,B),V=A.getOutsideTextFont(R,i,F),G=r.datum();D?"log"===x.type&&G.s0<=0&&(s=x.range[0]<x.range[1]?0:x._length):"log"===k.type&&G.s0<=0&&(u=k.range[0]<k.range[1]?k._length:0);var U,Z,H,W,Y,X=Math.abs(g-s)-2*y,q=Math.abs(d-u)-2*y;if("outside"===b&&(z||N.hasB||(b="inside")),"auto"===b)if(z){b="inside",Y=o.ensureUniformFontSize(t,j),U=S(r,L,Y),Z=l.bBox(U.node()),H=Z.width,W=Z.height;var Q=H>0&&W>0,K=H<=X&&W<=q,J=H<=q&&W<=X,$=D?X>=H*(q/W):q>=W*(X/H);Q&&(K||J||$)?b="inside":(b="outside",U.remove(),U=null)}else b="inside";if(!U){Y=o.ensureUniformFontSize(t,"outside"===b?V:j);var tt=(U=S(r,L,Y)).attr("transform");if(U.attr("transform",""),Z=l.bBox(U.node()),H=Z.width,W=Z.height,U.attr("transform",tt),H<=0||W<=0)return void U.remove()}var et,rt,nt=R.textangle;"outside"===b?(rt="both"===R.constraintext||"outside"===R.constraintext,et=function(t,e,r,n,i,o){var a,s=!!o.isHorizontal,l=!!o.constrained,g=o.angle||0,c=i.width,u=i.height,h=Math.abs(e-t),d=Math.abs(n-r);a=s?d>2*y?y:0:h>2*y?y:0;var A=1;l&&(A=s?Math.min(1,d/u):Math.min(1,h/c));var f=T(g),C=M(i,f),p=(s?C.x:C.y)/2,I=(i.left+i.right)/2,v=(i.top+i.bottom)/2,m=(t+e)/2,b=(r+n)/2,x=0,w=0,k=s?_(e,t):_(r,n);return s?(m=e-k*a,x=k*p):(b=n+k*a,w=-k*p),{textX:I,textY:v,targetX:m,targetY:b,anchorX:x,anchorY:w,scale:A,rotate:f}}(s,g,u,d,Z,{isHorizontal:D,constrained:rt,angle:nt})):(rt="both"===R.constraintext||"inside"===R.constraintext,et=E(s,g,u,d,Z,{isHorizontal:D,constrained:rt,angle:nt,anchor:R.insidetextanchor})),et.fontSize=Y.size,h(R.type,et,O),N.transform=et,w(U,O,C,p).attr("transform",o.getTextTransform(et))}else r.select("text").remove()}(t,e,R,r,d,F,B,j,V,C,p),e.layerClipId&&l.hideOutsideRangePoint(g,R.select("text"),b,O,u.xcalendar,u.ycalendar)});var j=!1===u.cliponaxis;l.setClipUrl(g,j?null:e.layerClipId,t)});g.getComponentMethod("errorbars","plot")(t,R,e,C)},toMoveInsideBar:E}},{"../../components/color":304,"../../components/drawing":325,"../../components/fx/helpers":339,"../../lib":426,"../../lib/svg_text_utils":450,"../../plots/cartesian/axes":473,"../../registry":524,"./attributes":534,"./constants":536,"./helpers":540,"./style":548,"./uniform_text":550,d3:74,"fast-isnumeric":145}],546:[function(t,e,r){"use strict";function n(t,e,r,n,i){var o=e.c2p(n?t.s0:t.p0,!0),a=e.c2p(n?t.s1:t.p1,!0),s=r.c2p(n?t.p0:t.s0,!0),l=r.c2p(n?t.p1:t.s1,!0);return i?[(o+a)/2,(s+l)/2]:n?[a,(s+l)/2]:[(o+a)/2,l]}e.exports=function(t,e){var r,i=t.cd,o=t.xaxis,a=t.yaxis,s=i[0].trace,l="funnel"===s.type,g="h"===s.orientation,c=[];if(!1===e)for(r=0;r<i.length;r++)i[r].selected=0;else for(r=0;r<i.length;r++){var u=i[r],h="ct"in u?u.ct:n(u,o,a,g,l);e.contains(h,!1,r,t)?(c.push({pointNumber:r,x:o.c2d(u.x),y:a.c2d(u.y)}),u.selected=1):u.selected=0}return c}},{}],547:[function(t,e,r){"use strict";e.exports=o;var n=t("../../lib").distinctVals,i=t("../../constants/numerical").BADNUM;function o(t,e){this.traces=t,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var r=1/0,o=[],a=0;a<t.length;a++){for(var s=t[a],l=0;l<s.length;l++){var g=s[l];g.p!==i&&o.push(g.p)}s[0]&&s[0].width1&&(r=Math.min(s[0].width1,r))}this.positions=o;var c=n(o);this.distinctPositions=c.vals,1===c.vals.length&&r!==1/0?this.minDiff=r:this.minDiff=Math.min(c.minDiff,r),this.binWidth=this.minDiff,this.bins={}}o.prototype.put=function(t,e){var r=this.getLabel(t,e),n=this.bins[r]||0;return this.bins[r]=n+e,n},o.prototype.get=function(t,e){var r=this.getLabel(t,e);return this.bins[r]||0},o.prototype.getLabel=function(t,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?t:Math.round(t/this.binWidth))}},{"../../constants/numerical":404,"../../lib":426}],548:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../components/color"),o=t("../../components/drawing"),a=t("../../lib"),s=t("../../registry"),l=t("./uniform_text").resizeText,g=t("./attributes"),c=g.textfont,u=g.insidetextfont,h=g.outsidetextfont,d=t("./helpers");function A(t,e,r){o.pointStyle(t.selectAll("path"),e,r),f(t,e,r)}function f(t,e,r){t.selectAll("text").each(function(t){var i=n.select(this),s=a.ensureUniformFontSize(r,C(i,t,e,r));o.font(i,s)})}function C(t,e,r,n){var i=n._fullLayout.font,o=r.textfont;if(t.classed("bartext-inside")){var a=y(e,r);o=I(r,e.i,i,a)}else t.classed("bartext-outside")&&(o=v(r,e.i,i));return o}function p(t,e,r){return m(c,t.textfont,e,r)}function I(t,e,r,n){var o=p(t,e,r);return(void 0===t._input.textfont||void 0===t._input.textfont.color||Array.isArray(t.textfont.color)&&void 0===t.textfont.color[e])&&(o={color:i.contrast(n),family:o.family,size:o.size}),m(u,t.insidetextfont,e,o)}function v(t,e,r){var n=p(t,e,r);return m(h,t.outsidetextfont,e,n)}function m(t,e,r,n){e=e||{};var i=d.getValue(e.family,r),o=d.getValue(e.size,r),a=d.getValue(e.color,r);return{family:d.coerceString(t.family,i,n.family),size:d.coerceNumber(t.size,o,n.size),color:d.coerceColor(t.color,a,n.color)}}function y(t,e){return"waterfall"===e.type?e[t.dir].marker.color:t.mc||e.marker.color}e.exports={style:function(t){var e=n.select(t).selectAll("g.barlayer").selectAll("g.trace");l(t,e,"bar");var r=e.size(),i=t._fullLayout;e.style("opacity",function(t){return t[0].trace.opacity}).each(function(t){("stack"===i.barmode&&r>1||0===i.bargap&&0===i.bargroupgap&&!t[0].trace.marker.line.width)&&n.select(this).attr("shape-rendering","crispEdges")}),e.selectAll("g.points").each(function(e){A(n.select(this),e[0].trace,t)}),s.getComponentMethod("errorbars","style")(e)},styleTextPoints:f,styleOnSelect:function(t,e,r){var i=e[0].trace;i.selectedpoints?function(t,e,r){o.selectedPointStyle(t.selectAll("path"),e),function(t,e,r){t.each(function(t){var i,s=n.select(this);if(t.selected){i=a.ensureUniformFontSize(r,C(s,t,e,r));var l=e.selected.textfont&&e.selected.textfont.color;l&&(i.color=l),o.font(s,i)}else o.selectedTextStyle(s,e)})}(t.selectAll("text"),e,r)}(r,i,t):(A(r,i,t),s.getComponentMethod("errorbars","style")(r))},getInsideTextFont:I,getOutsideTextFont:v,getBarColor:y,resizeText:l}},{"../../components/color":304,"../../components/drawing":325,"../../lib":426,"../../registry":524,"./attributes":534,"./helpers":540,"./uniform_text":550,d3:74}],549:[function(t,e,r){"use strict";var n=t("../../components/color"),i=t("../../components/colorscale/helpers").hasColorscale,o=t("../../components/colorscale/defaults");e.exports=function(t,e,r,a,s){r("marker.color",a),i(t,"marker")&&o(t,e,s,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",n.defaultLine),i(t,"marker.line")&&o(t,e,s,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),r("selected.marker.color"),r("unselected.marker.color")}},{"../../components/color":304,"../../components/colorscale/defaults":314,"../../components/colorscale/helpers":315}],550:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../lib");function o(t){return"_"+t+"Text_minsize"}e.exports={recordMinTextSize:function(t,e,r){if(r.uniformtext.mode){var n=o(t),i=r.uniformtext.minsize,a=e.scale*e.fontSize;e.hide=a<i,r[n]=r[n]||1/0,e.hide||(r[n]=Math.min(r[n],Math.max(a,i)))}},clearMinTextSize:function(t,e){e[o(t)]=void 0},resizeText:function(t,e,r){var o=t._fullLayout,a=o["_"+r+"Text_minsize"];if(a){var s,l="hide"===o.uniformtext.mode;switch(r){case"funnelarea":case"pie":case"sunburst":s="g.slice";break;case"treemap":s="g.slice, g.pathbar";break;default:s="g.points > g.point"}e.selectAll(s).each(function(t){var e=t.transform;e&&(e.scale=l&&e.hide?0:a/e.fontSize,n.select(this).select("text").attr("transform",i.getTextTransform(e)))})}}}},{"../../lib":426,d3:74}],551:[function(t,e,r){"use strict";var n=t("../scatter/attributes"),i=t("../../plots/attributes"),o=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../components/colorscale/attributes"),s=(t("../../constants/docs").FORMAT_LINK,t("../../lib/extend").extendFlat);e.exports=s({z:{valType:"data_array",editType:"calc"},x:s({},n.x,{impliedEdits:{xtype:"array"}}),x0:s({},n.x0,{impliedEdits:{xtype:"scaled"}}),dx:s({},n.dx,{impliedEdits:{xtype:"scaled"}}),y:s({},n.y,{impliedEdits:{ytype:"array"}}),y0:s({},n.y0,{impliedEdits:{ytype:"scaled"}}),dy:s({},n.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"},hovertemplate:o(),showlegend:s({},i.showlegend,{dflt:!1})},{transforms:void 0},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":311,"../../constants/docs":400,"../../lib/extend":419,"../../plots/attributes":470,"../../plots/template_attributes":523,"../scatter/attributes":587}],552:[function(t,e,r){"use strict";var n=t("../../registry"),i=t("../../lib"),o=t("../../plots/cartesian/axes"),a=t("../histogram2d/calc"),s=t("../../components/colorscale/calc"),l=t("./convert_column_xyz"),g=t("./clean_2d_array"),c=t("./interp2d"),u=t("./find_empties"),h=t("./make_bound_array");e.exports=function(t,e){var r,d,A,f,C,p,I,v,m,y=o.getFromId(t,e.xaxis||"x"),b=o.getFromId(t,e.yaxis||"y"),x=n.traceIs(e,"contour"),_=n.traceIs(e,"histogram"),w=n.traceIs(e,"gl2d"),k=x?"best":e.zsmooth;if(y._minDtick=0,b._minDtick=0,_)r=(m=a(t,e)).x,d=m.x0,A=m.dx,f=m.y,C=m.y0,p=m.dy,I=m.z;else{var T=e.z;i.isArray1D(T)?(l(e,y,b,"x","y",["z"]),r=e._x,f=e._y,T=e._z):(r=e._x=e.x?y.makeCalcdata(e,"x"):[],f=e._y=e.y?b.makeCalcdata(e,"y"):[]),d=e.x0,A=e.dx,C=e.y0,p=e.dy,I=g(T,e,y,b),(x||e.connectgaps)&&(e._emptypoints=u(I),c(I,e._emptypoints))}function M(t){k=e._input.zsmooth=e.zsmooth=!1,i.warn('cannot use zsmooth: "fast": '+t)}if("fast"===k)if("log"===y.type||"log"===b.type)M("log axis found");else if(!_){if(r.length){var E=(r[r.length-1]-r[0])/(r.length-1),O=Math.abs(E/100);for(v=0;v<r.length-1;v++)if(Math.abs(r[v+1]-r[v]-E)>O){M("x scale is not linear");break}}if(f.length&&"fast"===k){var S=(f[f.length-1]-f[0])/(f.length-1),R=Math.abs(S/100);for(v=0;v<f.length-1;v++)if(Math.abs(f[v+1]-f[v]-S)>R){M("y scale is not linear");break}}}var D=i.maxRowLength(I),L="scaled"===e.xtype?"":r,P=h(e,L,d,A,D,y),N="scaled"===e.ytype?"":f,z=h(e,N,C,p,I.length,b);w||(e._extremes[y._id]=o.findExtremes(y,P),e._extremes[b._id]=o.findExtremes(b,z));var F={x:P,y:z,z:I,text:e._text||e.text,hovertext:e._hovertext||e.hovertext};if(L&&L.length===P.length-1&&(F.xCenter=L),N&&N.length===z.length-1&&(F.yCenter=N),_&&(F.xRanges=m.xRanges,F.yRanges=m.yRanges,F.pts=m.pts),x||s(t,e,{vals:I,cLetter:"z"}),x&&e.contours&&"heatmap"===e.contours.coloring){var B={type:"contour"===e.type?"heatmap":"histogram2d",xcalendar:e.xcalendar,ycalendar:e.ycalendar};F.xfill=h(B,L,d,A,D,y),F.yfill=h(B,N,C,p,I.length,b)}return[F]}},{"../../components/colorscale/calc":312,"../../lib":426,"../../plots/cartesian/axes":473,"../../registry":524,"../histogram2d/calc":571,"./clean_2d_array":553,"./convert_column_xyz":555,"./find_empties":557,"./interp2d":560,"./make_bound_array":561}],553:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../../lib"),o=t("../../constants/numerical").BADNUM;e.exports=function(t,e,r,a){var s,l,g,c,u,h;function d(t){if(n(t))return+t}if(e&&e.transpose){for(s=0,u=0;u<t.length;u++)s=Math.max(s,t[u].length);if(0===s)return!1;g=function(t){return t.length},c=function(t,e,r){return(t[r]||[])[e]}}else s=t.length,g=function(t,e){return t[e].length},c=function(t,e,r){return(t[e]||[])[r]};var A=function(t,e,r){return e===o||r===o?o:c(t,e,r)};function f(t){if(e&&"carpet"!==e.type&&"contourcarpet"!==e.type&&t&&"category"===t.type&&e["_"+t._id.charAt(0)].length){var r=t._id.charAt(0),n={},a=e["_"+r+"CategoryMap"]||e[r];for(u=0;u<a.length;u++)n[a[u]]=u;return function(e){var r=n[t._categories[e]];return r+1?r:o}}return i.identity}var C=f(r),p=f(a);a&&"category"===a.type&&(s=a._categories.length);var I=new Array(s);for(u=0;u<s;u++)for(l=r&&"category"===r.type?r._categories.length:g(t,u),I[u]=new Array(l),h=0;h<l;h++)I[u][h]=d(A(t,p(u),C(h)));return I}},{"../../constants/numerical":404,"../../lib":426,"fast-isnumeric":145}],554:[function(t,e,r){"use strict";e.exports={min:"zmin",max:"zmax"}},{}],555:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../constants/numerical").BADNUM;e.exports=function(t,e,r,o,a,s){var l,g,c,u,h=t._length,d=e.makeCalcdata(t,o),A=r.makeCalcdata(t,a),f=t.text,C=void 0!==f&&n.isArray1D(f),p=t.hovertext,I=void 0!==p&&n.isArray1D(p),v=n.distinctVals(d),m=v.vals,y=n.distinctVals(A),b=y.vals,x=[];for(l=0;l<s.length;l++)x[l]=n.init2dArray(b.length,m.length);C&&(c=n.init2dArray(b.length,m.length)),I&&(u=n.init2dArray(b.length,m.length));var _=n.init2dArray(b.length,m.length);for(l=0;l<h;l++)if(d[l]!==i&&A[l]!==i){var w=n.findBin(d[l]+v.minDiff/2,m),k=n.findBin(A[l]+y.minDiff/2,b);for(g=0;g<s.length;g++){var T=t[s[g]];x[g][k][w]=T[l],_[k][w]=l}C&&(c[k][w]=f[l]),I&&(u[k][w]=p[l])}for(t["_"+o]=m,t["_"+a]=b,g=0;g<s.length;g++)t["_"+s[g]]=x[g];C&&(t._text=c),I&&(t._hovertext=u),e&&"category"===e.type&&(t["_"+o+"CategoryMap"]=m.map(function(t){return e._categories[t]})),r&&"category"===r.type&&(t["_"+a+"CategoryMap"]=b.map(function(t){return r._categories[t]})),t._after2before=_}},{"../../constants/numerical":404,"../../lib":426}],556:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("./xyz_defaults"),o=t("./style_defaults"),a=t("../../components/colorscale/defaults"),s=t("./attributes");e.exports=function(t,e,r,l){function g(r,i){return n.coerce(t,e,s,r,i)}i(t,e,g,l)?(g("text"),g("hovertext"),g("hovertemplate"),o(t,e,g,l),g("hoverongaps"),g("connectgaps",n.isArray1D(e.z)&&!1!==e.zsmooth),a(t,e,l,g,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":314,"../../lib":426,"./attributes":551,"./style_defaults":564,"./xyz_defaults":565}],557:[function(t,e,r){"use strict";var n=t("../../lib").maxRowLength;e.exports=function(t){var e,r,i,o,a,s,l,g,c=[],u={},h=[],d=t[0],A=[],f=[0,0,0],C=n(t);for(r=0;r<t.length;r++)for(e=A,A=d,d=t[r+1]||[],i=0;i<C;i++)void 0===A[i]&&((s=(void 0!==A[i-1]?1:0)+(void 0!==A[i+1]?1:0)+(void 0!==e[i]?1:0)+(void 0!==d[i]?1:0))?(0===r&&s++,0===i&&s++,r===t.length-1&&s++,i===A.length-1&&s++,s<4&&(u[[r,i]]=[r,i,s]),c.push([r,i,s])):h.push([r,i]));for(;h.length;){for(l={},g=!1,a=h.length-1;a>=0;a--)(s=((u[[(r=(o=h[a])[0])-1,i=o[1]]]||f)[2]+(u[[r+1,i]]||f)[2]+(u[[r,i-1]]||f)[2]+(u[[r,i+1]]||f)[2])/20)&&(l[o]=[r,i,s],h.splice(a,1),g=!0);if(!g)throw"findEmpties iterated with no new neighbors";for(o in l)u[o]=l[o],c.push(l[o])}return c.sort(function(t,e){return e[2]-t[2]})}},{"../../lib":426}],558:[function(t,e,r){"use strict";var n=t("../../components/fx"),i=t("../../lib"),o=t("../../plots/cartesian/axes"),a=t("../../components/colorscale").extractOpts;e.exports=function(t,e,r,s,l,g){var c,u,h,d,A=t.cd[0],f=A.trace,C=t.xa,p=t.ya,I=A.x,v=A.y,m=A.z,y=A.xCenter,b=A.yCenter,x=A.zmask,_=f.zhoverformat,w=I,k=v;if(!1!==t.index){try{h=Math.round(t.index[1]),d=Math.round(t.index[0])}catch(e){return void i.error("Error hovering on heatmap, pointNumber must be [row,col], found:",t.index)}if(h<0||h>=m[0].length||d<0||d>m.length)return}else{if(n.inbox(e-I[0],e-I[I.length-1],0)>0||n.inbox(r-v[0],r-v[v.length-1],0)>0)return;if(g){var T;for(w=[2*I[0]-I[1]],T=1;T<I.length;T++)w.push((I[T]+I[T-1])/2);for(w.push([2*I[I.length-1]-I[I.length-2]]),k=[2*v[0]-v[1]],T=1;T<v.length;T++)k.push((v[T]+v[T-1])/2);k.push([2*v[v.length-1]-v[v.length-2]])}h=Math.max(0,Math.min(w.length-2,i.findBin(e,w))),d=Math.max(0,Math.min(k.length-2,i.findBin(r,k)))}var M=C.c2p(I[h]),E=C.c2p(I[h+1]),O=p.c2p(v[d]),S=p.c2p(v[d+1]);g?(E=M,c=I[h],S=O,u=v[d]):(c=y?y[h]:(I[h]+I[h+1])/2,u=b?b[d]:(v[d]+v[d+1])/2,C&&"category"===C.type&&(c=I[h]),p&&"category"===p.type&&(u=v[d]),f.zsmooth&&(M=E=C.c2p(c),O=S=p.c2p(u)));var R=m[d][h];if(x&&!x[d][h]&&(R=void 0),void 0!==R||f.hoverongaps){var D;Array.isArray(A.hovertext)&&Array.isArray(A.hovertext[d])?D=A.hovertext[d][h]:Array.isArray(A.text)&&Array.isArray(A.text[d])&&(D=A.text[d][h]);var L=a(f),P={type:"linear",range:[L.min,L.max],hoverformat:_,_separators:C._separators,_numFormat:C._numFormat},N=o.tickText(P,R,"hover").text;return[i.extendFlat(t,{index:f._after2before?f._after2before[d][h]:[d,h],distance:t.maxHoverDistance,spikeDistance:t.maxSpikeDistance,x0:M,x1:E,y0:O,y1:S,xLabelVal:c,yLabelVal:u,zLabelVal:R,zLabel:N,text:D})]}}},{"../../components/colorscale":316,"../../components/fx":343,"../../lib":426,"../../plots/cartesian/axes":473}],559:[function(t,e,r){"use strict";e.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),colorbar:t("./colorbar"),style:t("./style"),hoverPoints:t("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":484,"./attributes":551,"./calc":552,"./colorbar":554,"./defaults":556,"./hover":558,"./plot":562,"./style":563}],560:[function(t,e,r){"use strict";var n=t("../../lib"),i=[[-1,0],[1,0],[0,-1],[0,1]];function o(t){return.5-.25*Math.min(1,.5*t)}function a(t,e,r){var n,o,a,s,l,g,c,u,h,d,A,f,C,p=0;for(s=0;s<e.length;s++){for(o=(n=e[s])[0],a=n[1],A=t[o][a],d=0,h=0,l=0;l<4;l++)(c=t[o+(g=i[l])[0]])&&void 0!==(u=c[a+g[1]])&&(0===d?f=C=u:(f=Math.min(f,u),C=Math.max(C,u)),h++,d+=u);if(0===h)throw"iterateInterp2d order is wrong: no defined neighbors";t[o][a]=d/h,void 0===A?h<4&&(p=1):(t[o][a]=(1+r)*t[o][a]-r*A,C>f&&(p=Math.max(p,Math.abs(t[o][a]-A)/(C-f))))}return p}e.exports=function(t,e){var r,i=1;for(a(t,e),r=0;r<e.length&&!(e[r][2]<4);r++);for(e=e.slice(r),r=0;r<100&&i>.01;r++)i=a(t,e,o(i));return i>.01&&n.log("interp2d didn't converge quickly",i),t}},{"../../lib":426}],561:[function(t,e,r){"use strict";var n=t("../../registry"),i=t("../../lib").isArrayOrTypedArray;e.exports=function(t,e,r,o,a,s){var l,g,c,u=[],h=n.traceIs(t,"contour"),d=n.traceIs(t,"histogram"),A=n.traceIs(t,"gl2d");if(i(e)&&e.length>1&&!d&&"category"!==s.type){var f=e.length;if(!(f<=a))return h?e.slice(0,a):e.slice(0,a+1);if(h||A)u=e.slice(0,a);else if(1===a)u=[e[0]-.5,e[0]+.5];else{for(u=[1.5*e[0]-.5*e[1]],c=1;c<f;c++)u.push(.5*(e[c-1]+e[c]));u.push(1.5*e[f-1]-.5*e[f-2])}if(f<a){var C=u[u.length-1],p=C-u[u.length-2];for(c=f;c<a;c++)C+=p,u.push(C)}}else{var I=t[s._id.charAt(0)+"calendar"];if(d)l=s.r2c(r,0,I);else if(i(e)&&1===e.length)l=e[0];else if(void 0===r)l=0;else{l=("log"===s.type?s.d2c:s.r2c)(r,0,I)}for(g=o||1,c=h||A?0:-.5;c<a;c++)u.push(l+g*c)}return u}},{"../../lib":426,"../../registry":524}],562:[function(t,e,r){"use strict";var n=t("d3"),i=t("tinycolor2"),o=t("../../registry"),a=t("../../lib"),s=t("../../components/colorscale").makeColorScaleFuncFromTrace,l=t("../../constants/xmlns_namespaces");function g(t,e){var r=e.length-2,n=a.constrain(a.findBin(t,e),0,r),i=e[n],o=e[n+1],s=a.constrain(n+(t-i)/(o-i)-.5,0,r),l=Math.round(s),g=Math.abs(s-l);return s&&s!==r&&g?{bin0:l,frac:g,bin1:Math.round(l+g/(s-l))}:{bin0:l,bin1:l,frac:0}}function c(t,e){var r=e.length-1,n=a.constrain(a.findBin(t,e),0,r),i=e[n],o=(t-i)/(e[n+1]-i)||0;return o<=0?{bin0:n,bin1:n,frac:0}:o<.5?{bin0:n,bin1:n+1,frac:o}:{bin0:n+1,bin1:n,frac:1-o}}function u(t,e,r){t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=Math.round(255*r[3])}e.exports=function(t,e,r,h){var d=e.xaxis,A=e.yaxis;a.makeTraceGroups(h,r,"hm").each(function(e){var r,h,f,C,p,I,v=n.select(this),m=e[0],y=m.trace,b=m.z,x=m.x,_=m.y,w=m.xCenter,k=m.yCenter,T=o.traceIs(y,"contour"),M=T?"best":y.zsmooth,E=b.length,O=a.maxRowLength(b),S=!1,R=!1;for(I=0;void 0===r&&I<x.length-1;)r=d.c2p(x[I]),I++;for(I=x.length-1;void 0===h&&I>0;)h=d.c2p(x[I]),I--;for(h<r&&(f=h,h=r,r=f,S=!0),I=0;void 0===C&&I<_.length-1;)C=A.c2p(_[I]),I++;for(I=_.length-1;void 0===p&&I>0;)p=A.c2p(_[I]),I--;if(p<C&&(f=C,C=p,p=f,R=!0),T&&(w=x,k=_,x=m.xfill,_=m.yfill),"fast"!==M){var D="best"===M?0:.5;r=Math.max(-D*d._length,r),h=Math.min((1+D)*d._length,h),C=Math.max(-D*A._length,C),p=Math.min((1+D)*A._length,p)}var L=Math.round(h-r),P=Math.round(p-C);if(L<=0||P<=0){v.selectAll("image").data([]).exit().remove()}else{var N,z;"fast"===M?(N=O,z=E):(N=L,z=P);var F=document.createElement("canvas");F.width=N,F.height=z;var B,j,V=F.getContext("2d"),G=s(y,{noNumericCheck:!0,returnArray:!0});"fast"===M?(B=S?function(t){return O-1-t}:a.identity,j=R?function(t){return E-1-t}:a.identity):(B=function(t){return a.constrain(Math.round(d.c2p(x[t])-r),0,L)},j=function(t){return a.constrain(Math.round(A.c2p(_[t])-C),0,P)});var U,Z,H,W,Y,X=j(0),q=[X,X],Q=S?0:1,K=R?0:1,J=0,$=0,tt=0,et=0;if(M){var rt,nt=0;try{rt=new Uint8Array(L*P*4)}catch(t){rt=new Array(L*P*4)}if("best"===M){var it,ot,at,st=w||x,lt=k||_,gt=new Array(st.length),ct=new Array(lt.length),ut=new Array(L),ht=w?c:g,dt=k?c:g;for(I=0;I<st.length;I++)gt[I]=Math.round(d.c2p(st[I])-r);for(I=0;I<lt.length;I++)ct[I]=Math.round(A.c2p(lt[I])-C);for(I=0;I<L;I++)ut[I]=ht(I,gt);for(Z=0;Z<P;Z++)for(ot=b[(it=dt(Z,ct)).bin0],at=b[it.bin1],I=0;I<L;I++,nt+=4)u(rt,nt,Y=_t(ot,at,ut[I],it))}else for(Z=0;Z<E;Z++)for(W=b[Z],q=j(Z),I=0;I<L;I++)Y=xt(W[I],1),u(rt,nt=4*(q*L+B(I)),Y);var At=V.createImageData(L,P);try{At.data.set(rt)}catch(t){var ft=At.data,Ct=ft.length;for(Z=0;Z<Ct;Z++)ft[Z]=rt[Z]}V.putImageData(At,0,0)}else{var pt=y.xgap,It=y.ygap,vt=Math.floor(pt/2),mt=Math.floor(It/2);for(Z=0;Z<E;Z++)if(W=b[Z],q.reverse(),q[K]=j(Z+1),q[0]!==q[1]&&void 0!==q[0]&&void 0!==q[1])for(U=[H=B(0),H],I=0;I<O;I++)U.reverse(),U[Q]=B(I+1),U[0]!==U[1]&&void 0!==U[0]&&void 0!==U[1]&&(Y=xt(W[I],(U[1]-U[0])*(q[1]-q[0])),V.fillStyle="rgba("+Y.join(",")+")",V.fillRect(U[0]+vt,q[0]+mt,U[1]-U[0]-pt,q[1]-q[0]-It))}$=Math.round($/J),tt=Math.round(tt/J),et=Math.round(et/J);var yt=i("rgb("+$+","+tt+","+et+")");t._hmpixcount=(t._hmpixcount||0)+J,t._hmlumcount=(t._hmlumcount||0)+J*yt.getLuminance();var bt=v.selectAll("image").data(e);bt.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"}),bt.attr({height:P,width:L,x:r,y:C,"xlink:href":F.toDataURL("image/png")})}function xt(t,e){if(void 0!==t){var r=G(t);return r[0]=Math.round(r[0]),r[1]=Math.round(r[1]),r[2]=Math.round(r[2]),J+=e,$+=r[0]*e,tt+=r[1]*e,et+=r[2]*e,r}return[0,0,0,0]}function _t(t,e,r,n){var i=t[r.bin0];if(void 0===i)return xt(void 0,1);var o,a=t[r.bin1],s=e[r.bin0],l=e[r.bin1],g=a-i||0,c=s-i||0;return o=void 0===a?void 0===l?0:void 0===s?2*(l-i):2*(2*l-s-i)/3:void 0===l?void 0===s?0:2*(2*i-a-s)/3:void 0===s?2*(2*l-a-i)/3:l+i-a-s,xt(i+r.frac*g+n.frac*(c+r.frac*o))}})}},{"../../components/colorscale":316,"../../constants/xmlns_namespaces":405,"../../lib":426,"../../registry":524,d3:74,tinycolor2:693}],563:[function(t,e,r){"use strict";var n=t("d3");e.exports=function(t){n.select(t).selectAll(".hm image").style("opacity",function(t){return t.trace.opacity})}},{d3:74}],564:[function(t,e,r){"use strict";e.exports=function(t,e,r){!1===r("zsmooth")&&(r("xgap"),r("ygap")),r("zhoverformat")}},{}],565:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../../lib"),o=t("../../registry");function a(t,e){var r=e(t);return"scaled"===(r?e(t+"type","array"):"scaled")&&(e(t+"0"),e("d"+t)),r}e.exports=function(t,e,r,s,l,g){var c,u,h=r("z");if(l=l||"x",g=g||"y",void 0===h||!h.length)return 0;if(i.isArray1D(t.z)){c=r(l),u=r(g);var d=i.minRowLength(c),A=i.minRowLength(u);if(0===d||0===A)return 0;e._length=Math.min(d,A,h.length)}else{if(c=a(l,r),u=a(g,r),!function(t){for(var e,r=!0,o=!1,a=!1,s=0;s<t.length;s++){if(e=t[s],!i.isArrayOrTypedArray(e)){r=!1;break}e.length>0&&(o=!0);for(var l=0;l<e.length;l++)if(n(e[l])){a=!0;break}}return r&&o&&a}(h))return 0;r("transpose"),e._length=null}return o.getComponentMethod("calendars","handleTraceDefaults")(t,e,[l,g],s),!0}},{"../../lib":426,"../../registry":524,"fast-isnumeric":145}],566:[function(t,e,r){"use strict";e.exports=function(t,e){for(var r=t.length,n=0,i=0;i<r;i++)e[i]?(t[i]/=e[i],n+=t[i]):t[i]=null;return n}},{}],567:[function(t,e,r){"use strict";var n=t("fast-isnumeric");e.exports={count:function(t,e,r){return r[t]++,1},sum:function(t,e,r,i){var o=i[e];return n(o)?(o=Number(o),r[t]+=o,o):0},avg:function(t,e,r,i,o){var a=i[e];return n(a)&&(a=Number(a),r[t]+=a,o[t]++),0},min:function(t,e,r,i){var o=i[e];if(n(o)){if(o=Number(o),!n(r[t]))return r[t]=o,o;if(r[t]>o){var a=o-r[t];return r[t]=o,a}}return 0},max:function(t,e,r,i){var o=i[e];if(n(o)){if(o=Number(o),!n(r[t]))return r[t]=o,o;if(r[t]<o){var a=o-r[t];return r[t]=o,a}}return 0}}},{"fast-isnumeric":145}],568:[function(t,e,r){"use strict";var n=t("../../constants/numerical"),i=n.ONEAVGYEAR,o=n.ONEAVGMONTH,a=n.ONEDAY,s=n.ONEHOUR,l=n.ONEMIN,g=n.ONESEC,c=t("../../plots/cartesian/axes").tickIncrement;function u(t,e,r,n){if(t*e<=0)return 1/0;for(var i=Math.abs(e-t),o="date"===r.type,a=h(i,o),s=0;s<10;s++){var l=h(80*a,o);if(a===l)break;if(!d(l,t,e,o,r,n))break;a=l}return a}function h(t,e){return e&&t>g?t>a?t>1.1*i?i:t>1.1*o?o:a:t>s?s:t>l?l:g:Math.pow(10,Math.floor(Math.log(t)/Math.LN10))}function d(t,e,r,n,o,s){if(n&&t>a){var l=A(e,o,s),g=A(r,o,s),c=t===i?0:1;return l[c]!==g[c]}return Math.floor(r/t)-Math.floor(e/t)>.1}function A(t,e,r){var n=e.c2d(t,i,r).split("-");return""===n[0]&&(n.unshift(),n[0]="-"+n[0]),n}e.exports=function(t,e,r,n,o){var s,l,g=-1.1*e,h=-.1*e,d=t-h,A=r[0],f=r[1],C=Math.min(u(A+h,A+d,n,o),u(f+h,f+d,n,o)),p=Math.min(u(A+g,A+h,n,o),u(f+g,f+h,n,o));if(C>p&&p<Math.abs(f-A)/4e3?(s=C,l=!1):(s=Math.min(C,p),l=!0),"date"===n.type&&s>a){var I=s===i?1:6,v=s===i?"M12":"M1";return function(e,r){var a=n.c2d(e,i,o),s=a.indexOf("-",I);s>0&&(a=a.substr(0,s));var g=n.d2c(a,0,o);if(g<e){var u=c(g,v,!1,o);(g+u)/2<e+t&&(g=u)}return r&&l?c(g,v,!0,o):g}}return function(e,r){var n=s*Math.round(e/s);return n+s/10<e&&n+.9*s<e+t&&(n+=s),r&&l&&(n-=s),n}}},{"../../constants/numerical":404,"../../plots/cartesian/axes":473}],569:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../../lib"),o=t("../../registry"),a=t("../../plots/cartesian/axes"),s=t("../bar/arrays_to_calcdata"),l=t("./bin_functions"),g=t("./norm_functions"),c=t("./average"),u=t("./bin_label_vals");function h(t,e,r,s,l){var g,c,u,d,A,f,C,p=s+"bins",I=t._fullLayout,v=e["_"+s+"bingroup"],m=I._histogramBinOpts[v],y="overlay"===I.barmode,b=function(t){return r.r2c(t,0,d)},x=function(t){return r.c2r(t,0,d)},_="date"===r.type?function(t){return t||0===t?i.cleanDate(t,null,d):null}:function(t){return n(t)?Number(t):null};function w(t,e,r){e[t+"Found"]?(e[t]=_(e[t]),null===e[t]&&(e[t]=r[t])):(f[t]=e[t]=r[t],i.nestedProperty(c[0],p+"."+t).set(r[t]))}if(e["_"+s+"autoBinFinished"])delete e["_"+s+"autoBinFinished"];else{c=m.traces;var k=[],T=!0,M=!1,E=!1;for(g=0;g<c.length;g++)if((u=c[g]).visible){var O=m.dirs[g];A=u["_"+O+"pos0"]=r.makeCalcdata(u,O),k=i.concat(k,A),delete u["_"+s+"autoBinFinished"],!0===e.visible&&(T?T=!1:(delete u._autoBin,u["_"+s+"autoBinFinished"]=1),o.traceIs(u,"2dMap")&&(M=!0),"histogram2dcontour"===u.type&&(E=!0))}d=c[0][s+"calendar"];var S=a.autoBin(k,r,m.nbins,M,d,m.sizeFound&&m.size),R=c[0]._autoBin={};if(f=R[m.dirs[0]]={},E&&(m.size||(S.start=x(a.tickIncrement(b(S.start),S.size,!0,d))),void 0===m.end&&(S.end=x(a.tickIncrement(b(S.end),S.size,!1,d)))),y&&!o.traceIs(e,"2dMap")&&0===S._dataSpan&&"category"!==r.type&&"multicategory"!==r.type){if(l)return[S,A,!0];S=function(t,e,r,n,o){var a,s,l,g=t._fullLayout,c=function(t,e){for(var r=e.xaxis,n=e.yaxis,i=e.orientation,o=[],a=t._fullData,s=0;s<a.length;s++){var l=a[s];"histogram"===l.type&&!0===l.visible&&l.orientation===i&&l.xaxis===r&&l.yaxis===n&&o.push(l)}return o}(t,e),u=!1,d=1/0,A=[e];for(a=0;a<c.length;a++)if((s=c[a])===e)u=!0;else if(u){var f=h(t,s,r,n,!0),C=f[0],p=f[2];s["_"+n+"autoBinFinished"]=1,s["_"+n+"pos0"]=f[1],p?A.push(s):d=Math.min(d,C.size)}else l=g._histogramBinOpts[s["_"+n+"bingroup"]],d=Math.min(d,l.size||s[o].size);var I=new Array(A.length);for(a=0;a<A.length;a++)for(var v=A[a]["_"+n+"pos0"],m=0;m<v.length;m++)if(void 0!==v[m]){I[a]=v[m];break}isFinite(d)||(d=i.distinctVals(I).minDiff);for(a=0;a<A.length;a++){var y=(s=A[a])[n+"calendar"],b={start:r.c2r(I[a]-d/2,0,y),end:r.c2r(I[a]+d/2,0,y),size:d};s._input[o]=s[o]=b,(l=g._histogramBinOpts[s["_"+n+"bingroup"]])&&i.extendFlat(l,b)}return e[o]}(t,e,r,s,p)}(C=u.cumulative||{}).enabled&&"include"!==C.currentbin&&("decreasing"===C.direction?S.start=x(a.tickIncrement(b(S.start),S.size,!0,d)):S.end=x(a.tickIncrement(b(S.end),S.size,!1,d))),m.size=S.size,m.sizeFound||(f.size=S.size,i.nestedProperty(c[0],p+".size").set(S.size)),w("start",m,S),w("end",m,S)}A=e["_"+s+"pos0"],delete e["_"+s+"pos0"];var D=e._input[p]||{},L=i.extendFlat({},m),P=m.start,N=r.r2l(D.start),z=void 0!==N;if((m.startFound||z)&&N!==r.r2l(P)){var F=z?N:i.aggNums(Math.min,null,A),B={type:"category"===r.type||"multicategory"===r.type?"linear":r.type,r2l:r.r2l,dtick:m.size,tick0:P,calendar:d,range:[F,a.tickIncrement(F,m.size,!1,d)].map(r.l2r)},j=a.tickFirst(B);j>r.r2l(F)&&(j=a.tickIncrement(j,m.size,!0,d)),L.start=r.l2r(j),z||i.nestedProperty(e,p+".start").set(L.start)}var V=m.end,G=r.r2l(D.end),U=void 0!==G;if((m.endFound||U)&&G!==r.r2l(V)){var Z=U?G:i.aggNums(Math.max,null,A);L.end=r.l2r(Z),U||i.nestedProperty(e,p+".start").set(L.end)}var H="autobin"+s;return!1===e._input[H]&&(e._input[p]=i.extendFlat({},e[p]||{}),delete e._input[H],delete e[H]),[L,A]}e.exports={calc:function(t,e){var r,o,d,A,f=[],C=[],p=a.getFromId(t,"h"===e.orientation?e.yaxis:e.xaxis),I="h"===e.orientation?"y":"x",v={x:"y",y:"x"}[I],m=e[I+"calendar"],y=e.cumulative,b=h(t,e,p,I),x=b[0],_=b[1],w="string"==typeof x.size,k=[],T=w?k:x,M=[],E=[],O=[],S=0,R=e.histnorm,D=e.histfunc,L=-1!==R.indexOf("density");y.enabled&&L&&(R=R.replace(/ ?density$/,""),L=!1);var P,N="max"===D||"min"===D?null:0,z=l.count,F=g[R],B=!1,j=function(t){return p.r2c(t,0,m)};for(i.isArrayOrTypedArray(e[v])&&"count"!==D&&(P=e[v],B="avg"===D,z=l[D]),r=j(x.start),d=j(x.end)+(r-a.tickIncrement(r,x.size,!1,m))/1e6;r<d&&f.length<1e6&&(o=a.tickIncrement(r,x.size,!1,m),f.push((r+o)/2),C.push(N),O.push([]),k.push(r),L&&M.push(1/(o-r)),B&&E.push(0),!(o<=r));)r=o;k.push(r),w||"date"!==p.type||(T={start:j(T.start),end:j(T.end),size:T.size}),t._fullLayout._roundFnOpts||(t._fullLayout._roundFnOpts={});var V=e["_"+I+"bingroup"],G={leftGap:1/0,rightGap:1/0};V&&(t._fullLayout._roundFnOpts[V]||(t._fullLayout._roundFnOpts[V]=G),G=t._fullLayout._roundFnOpts[V]);var U,Z=C.length,H=!0,W=G.leftGap,Y=G.rightGap,X={};for(r=0;r<_.length;r++){var q=_[r];(A=i.findBin(q,T))>=0&&A<Z&&(S+=z(A,r,C,P,E),H&&O[A].length&&q!==_[O[A][0]]&&(H=!1),O[A].push(r),X[r]=A,W=Math.min(W,q-k[A]),Y=Math.min(Y,k[A+1]-q))}G.leftGap=W,G.rightGap=Y,H||(U=function(e,r){return function(){var n=t._fullLayout._roundFnOpts[V];return u(n.leftGap,n.rightGap,k,p,m)(e,r)}}),B&&(S=c(C,E)),F&&F(C,S,M),y.enabled&&function(t,e,r){var n,i,o;function a(e){o=t[e],t[e]/=2}function s(e){i=t[e],t[e]=o+i/2,o+=i}if("half"===r)if("increasing"===e)for(a(0),n=1;n<t.length;n++)s(n);else for(a(t.length-1),n=t.length-2;n>=0;n--)s(n);else if("increasing"===e){for(n=1;n<t.length;n++)t[n]+=t[n-1];"exclude"===r&&(t.unshift(0),t.pop())}else{for(n=t.length-2;n>=0;n--)t[n]+=t[n+1];"exclude"===r&&(t.push(0),t.shift())}}(C,y.direction,y.currentbin);var Q=Math.min(f.length,C.length),K=[],J=0,$=Q-1;for(r=0;r<Q;r++)if(C[r]){J=r;break}for(r=Q-1;r>=J;r--)if(C[r]){$=r;break}for(r=J;r<=$;r++)if(n(f[r])&&n(C[r])){var tt={p:f[r],s:C[r],b:0};y.enabled||(tt.pts=O[r],H?tt.ph0=tt.ph1=O[r].length?_[O[r][0]]:f[r]:(e._computePh=!0,tt.ph0=U(k[r]),tt.ph1=U(k[r+1],!0))),K.push(tt)}return 1===K.length&&(K[0].width1=a.tickIncrement(K[0].p,x.size,!1,m)-K[0].p),s(K,e),i.isArrayOrTypedArray(e.selectedpoints)&&i.tagSelected(K,e,X),K},calcAllAutoBins:h}},{"../../lib":426,"../../plots/cartesian/axes":473,"../../registry":524,"../bar/arrays_to_calcdata":533,"./average":566,"./bin_functions":567,"./bin_label_vals":568,"./norm_functions":570,"fast-isnumeric":145}],570:[function(t,e,r){"use strict";e.exports={percent:function(t,e){for(var r=t.length,n=100/e,i=0;i<r;i++)t[i]*=n},probability:function(t,e){for(var r=t.length,n=0;n<r;n++)t[n]/=e},density:function(t,e,r,n){var i=t.length;n=n||1;for(var o=0;o<i;o++)t[o]*=r[o]*n},"probability density":function(t,e,r,n){var i=t.length;n&&(e/=n);for(var o=0;o<i;o++)t[o]*=r[o]/e}}},{}],571:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../plots/cartesian/axes"),o=t("../histogram/bin_functions"),a=t("../histogram/norm_functions"),s=t("../histogram/average"),l=t("../histogram/bin_label_vals"),g=t("../histogram/calc").calcAllAutoBins;function c(t,e,r,n){var i,o=new Array(t);if(n)for(i=0;i<t;i++)o[i]=1/(e[i+1]-e[i]);else{var a=1/r;for(i=0;i<t;i++)o[i]=a}return o}function u(t,e){return{start:t(e.start),end:t(e.end),size:e.size}}function h(t,e,r,n,i,o){var a,s=t.length-1,g=new Array(s),c=l(r,n,t,i,o);for(a=0;a<s;a++){var u=(e||[])[a];g[a]=void 0===u?[c(t[a]),c(t[a+1],!0)]:[u,u]}return g}e.exports=function(t,e){var r,l,d,A,f=i.getFromId(t,e.xaxis),C=i.getFromId(t,e.yaxis),p=e.xcalendar,I=e.ycalendar,v=function(t){return f.r2c(t,0,p)},m=function(t){return C.r2c(t,0,I)},y=g(t,e,f,"x"),b=y[0],x=y[1],_=g(t,e,C,"y"),w=_[0],k=_[1],T=e._length;x.length>T&&x.splice(T,x.length-T),k.length>T&&k.splice(T,k.length-T);var M=[],E=[],O=[],S="string"==typeof b.size,R="string"==typeof w.size,D=[],L=[],P=S?D:b,N=R?L:w,z=0,F=[],B=[],j=e.histnorm,V=e.histfunc,G=-1!==j.indexOf("density"),U="max"===V||"min"===V?null:0,Z=o.count,H=a[j],W=!1,Y=[],X=[],q="z"in e?e.z:"marker"in e&&Array.isArray(e.marker.color)?e.marker.color:"";q&&"count"!==V&&(W="avg"===V,Z=o[V]);var Q=b.size,K=v(b.start),J=v(b.end)+(K-i.tickIncrement(K,Q,!1,p))/1e6;for(r=K;r<J;r=i.tickIncrement(r,Q,!1,p))E.push(U),D.push(r),W&&O.push(0);D.push(r);var $,tt=E.length,et=(r-K)/tt,rt=($=K+et/2,f.c2r($,0,p)),nt=w.size,it=m(w.start),ot=m(w.end)+(it-i.tickIncrement(it,nt,!1,I))/1e6;for(r=it;r<ot;r=i.tickIncrement(r,nt,!1,I)){M.push(E.slice()),L.push(r);var at=new Array(tt);for(l=0;l<tt;l++)at[l]=[];B.push(at),W&&F.push(O.slice())}L.push(r);var st=M.length,lt=(r-it)/st,gt=function(t){return C.c2r(t,0,I)}(it+lt/2);G&&(Y=c(E.length,P,et,S),X=c(M.length,N,lt,R)),S||"date"!==f.type||(P=u(v,P)),R||"date"!==C.type||(N=u(m,N));var ct=!0,ut=!0,ht=new Array(tt),dt=new Array(st),At=1/0,ft=1/0,Ct=1/0,pt=1/0;for(r=0;r<T;r++){var It=x[r],vt=k[r];d=n.findBin(It,P),A=n.findBin(vt,N),d>=0&&d<tt&&A>=0&&A<st&&(z+=Z(d,r,M[A],q,F[A]),B[A][d].push(r),ct&&(void 0===ht[d]?ht[d]=It:ht[d]!==It&&(ct=!1)),ut&&(void 0===dt[A]?dt[A]=vt:dt[A]!==vt&&(ut=!1)),At=Math.min(At,It-D[d]),ft=Math.min(ft,D[d+1]-It),Ct=Math.min(Ct,vt-L[A]),pt=Math.min(pt,L[A+1]-vt))}if(W)for(A=0;A<st;A++)z+=s(M[A],F[A]);if(H)for(A=0;A<st;A++)H(M[A],z,Y,X[A]);return{x:x,xRanges:h(D,ct&&ht,At,ft,f,p),x0:rt,dx:et,y:k,yRanges:h(L,ut&&dt,Ct,pt,C,I),y0:gt,dy:lt,z:M,pts:B}}},{"../../lib":426,"../../plots/cartesian/axes":473,"../histogram/average":566,"../histogram/bin_functions":567,"../histogram/bin_label_vals":568,"../histogram/calc":569,"../histogram/norm_functions":570}],572:[function(t,e,r){"use strict";var n=t("../../components/colorscale/attributes"),i=t("../../plots/cartesian/layout_attributes"),o=t("../../plots/font_attributes"),a=t("../../plots/domain").attributes,s=t("../../lib/extend").extendFlat,l=t("../../plot_api/plot_template").templatedArray;e.exports={domain:a({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:o({editType:"plot"}),tickfont:o({editType:"plot"}),rangefont:o({editType:"plot"}),dimensions:l("dimension",{label:{valType:"string",editType:"plot"},tickvals:s({},i.tickvals,{editType:"plot"}),ticktext:s({},i.ticktext,{editType:"plot"}),tickformat:s({},i.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:s({editType:"calc"},n("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":311,"../../lib/extend":419,"../../plot_api/plot_template":463,"../../plots/cartesian/layout_attributes":485,"../../plots/domain":498,"../../plots/font_attributes":499}],573:[function(t,e,r){"use strict";var n=t("./constants"),i=t("d3"),o=t("../../lib/gup").keyFun,a=t("../../lib/gup").repeat,s=t("../../lib").sorterAsc,l=n.bar.snapRatio;function g(t,e){return t*(1-l)+e*l}var c=n.bar.snapClose;function u(t,e){return t*(1-c)+e*c}function h(t,e,r,n){if(function(t,e){for(var r=0;r<e.length;r++)if(t>=e[r][0]&&t<=e[r][1])return!0;return!1}(r,n))return r;var i=t?-1:1,o=0,a=e.length-1;if(i<0){var s=o;o=a,a=s}for(var l=e[o],c=l,h=o;i*h<i*a;h+=i){var d=h+i,A=e[d];if(i*r<i*u(l,A))return g(l,c);if(i*r<i*A||d===a)return g(A,l);c=l,l=A}}function d(t){t.attr("x",-n.bar.captureWidth/2).attr("width",n.bar.captureWidth)}function A(t){t.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function f(t){if(!t.brush.filterSpecified)return"0,"+t.height;for(var e,r,n,i=C(t.brush.filter.getConsolidated(),t.height),o=[0],a=i.length?i[0][0]:null,s=0;s<i.length;s++)r=(e=i[s])[1]-e[0],o.push(a),o.push(r),(n=s+1)<i.length&&(a=i[n][0]-e[1]);return o.push(t.height),o}function C(t,e){return t.map(function(t){return t.map(function(t){return Math.max(0,t*e)}).sort(s)})}function p(){i.select(document.body).style("cursor",null)}function I(t){t.attr("stroke-dasharray",f)}function v(t,e){var r=i.select(t).selectAll(".highlight, .highlight-shadow");I(e?r.transition().duration(n.bar.snapDuration).each("end",e):r)}function m(t,e){var r,i=t.brush,o=NaN,a={};if(i.filterSpecified){var s=t.height,l=i.filter.getConsolidated(),g=C(l,s),c=NaN,u=NaN,h=NaN;for(r=0;r<=g.length;r++){var d=g[r];if(d&&d[0]<=e&&e<=d[1]){c=r;break}if(u=r?r-1:NaN,d&&d[0]>e){h=r;break}}if(o=c,isNaN(o)&&(o=isNaN(u)||isNaN(h)?isNaN(u)?h:u:e-g[u][1]<g[h][0]-e?u:h),!isNaN(o)){var A=g[o],f=function(t,e){var r=n.bar.handleHeight;if(!(e>t[1]+r||e<t[0]-r))return e>=.9*t[1]+.1*t[0]?"n":e<=.9*t[0]+.1*t[1]?"s":"ns"}(A,e);f&&(a.interval=l[o],a.intervalPix=A,a.region=f)}}if(t.ordinal&&!a.region){var p=t.unitTickvals,I=t.unitToPaddedPx.invert(e);for(r=0;r<p.length;r++){var v=[.25*p[Math.max(r-1,0)]+.75*p[r],.25*p[Math.min(r+1,p.length-1)]+.75*p[r]];if(I>=v[0]&&I<=v[1]){a.clickableOrdinalRange=v;break}}}return a}function y(t,e){i.event.sourceEvent.stopPropagation();var r=e.height-i.mouse(t)[1]-2*n.verticalPadding,o=e.brush.svgBrush;o.wasDragged=!0,o._dragging=!0,o.grabbingBar?o.newExtent=[r-o.grabPoint,r+o.barLength-o.grabPoint].map(e.unitToPaddedPx.invert):o.newExtent=[o.startExtent,e.unitToPaddedPx.invert(r)].sort(s),e.brush.filterSpecified=!0,o.extent=o.stayingIntervals.concat([o.newExtent]),o.brushCallback(e),v(t.parentNode)}function b(t,e){var r=m(e,e.height-i.mouse(t)[1]-2*n.verticalPadding),o="crosshair";r.clickableOrdinalRange?o="pointer":r.region&&(o=r.region+"-resize"),i.select(document.body).style("cursor",o)}function x(t){t.on("mousemove",function(t){i.event.preventDefault(),t.parent.inBrushDrag||b(this,t)}).on("mouseleave",function(t){t.parent.inBrushDrag||p()}).call(i.behavior.drag().on("dragstart",function(t){!function(t,e){i.event.sourceEvent.stopPropagation();var r=e.height-i.mouse(t)[1]-2*n.verticalPadding,o=e.unitToPaddedPx.invert(r),a=e.brush,s=m(e,r),l=s.interval,g=a.svgBrush;if(g.wasDragged=!1,g.grabbingBar="ns"===s.region,g.grabbingBar){var c=l.map(e.unitToPaddedPx);g.grabPoint=r-c[0]-n.verticalPadding,g.barLength=c[1]-c[0]}g.clickableOrdinalRange=s.clickableOrdinalRange,g.stayingIntervals=e.multiselect&&a.filterSpecified?a.filter.getConsolidated():[],l&&(g.stayingIntervals=g.stayingIntervals.filter(function(t){return t[0]!==l[0]&&t[1]!==l[1]})),g.startExtent=s.region?l["s"===s.region?1:0]:o,e.parent.inBrushDrag=!0,g.brushStartCallback()}(this,t)}).on("drag",function(t){y(this,t)}).on("dragend",function(t){!function(t,e){var r=e.brush,n=r.filter,o=r.svgBrush;o._dragging||(b(t,e),y(t,e),e.brush.svgBrush.wasDragged=!1),o._dragging=!1,i.event.sourceEvent.stopPropagation();var a=o.grabbingBar;if(o.grabbingBar=!1,o.grabLocation=void 0,e.parent.inBrushDrag=!1,p(),!o.wasDragged)return o.wasDragged=void 0,o.clickableOrdinalRange?r.filterSpecified&&e.multiselect?o.extent.push(o.clickableOrdinalRange):(o.extent=[o.clickableOrdinalRange],r.filterSpecified=!0):a?(o.extent=o.stayingIntervals,0===o.extent.length&&w(r)):w(r),o.brushCallback(e),v(t.parentNode),void o.brushEndCallback(r.filterSpecified?n.getConsolidated():[]);var s=function(){n.set(n.getConsolidated())};if(e.ordinal){var l=e.unitTickvals;l[l.length-1]<l[0]&&l.reverse(),o.newExtent=[h(0,l,o.newExtent[0],o.stayingIntervals),h(1,l,o.newExtent[1],o.stayingIntervals)];var g=o.newExtent[1]>o.newExtent[0];o.extent=o.stayingIntervals.concat(g?[o.newExtent]:[]),o.extent.length||w(r),o.brushCallback(e),g?v(t.parentNode,s):(s(),v(t.parentNode))}else s();o.brushEndCallback(r.filterSpecified?n.getConsolidated():[])}(this,t)}))}function _(t,e){return t[0]-e[0]}function w(t){t.filterSpecified=!1,t.svgBrush.extent=[[-1/0,1/0]]}function k(t){for(var e,r=t.slice(),n=[],i=r.shift();i;){for(e=i.slice();(i=r.shift())&&i[0]<=e[1];)e[1]=Math.max(e[1],i[1]);n.push(e)}return n}e.exports={makeBrush:function(t,e,r,n,i,o){var a,l=function(){var t,e,r=[];return{set:function(n){1===(r=n.map(function(t){return t.slice().sort(s)}).sort(_)).length&&r[0][0]===-1/0&&r[0][1]===1/0&&(r=[[0,-1]]),t=k(r),e=r.reduce(function(t,e){return[Math.min(t[0],e[0]),Math.max(t[1],e[1])]},[1/0,-1/0])},get:function(){return r.slice()},getConsolidated:function(){return t},getBounds:function(){return e}}}();return l.set(r),{filter:l,filterSpecified:e,svgBrush:{extent:[],brushStartCallback:n,brushCallback:(a=i,function(t){var e=t.brush,r=function(t){return t.svgBrush.extent.map(function(t){return t.slice()})}(e).slice();e.filter.set(r),a()}),brushEndCallback:o}}},ensureAxisBrush:function(t){var e=t.selectAll("."+n.cn.axisBrush).data(a,o);e.enter().append("g").classed(n.cn.axisBrush,!0),function(t){var e=t.selectAll(".background").data(a);e.enter().append("rect").classed("background",!0).call(d).call(A).style("pointer-events","auto").attr("transform","translate(0 "+n.verticalPadding+")"),e.call(x).attr("height",function(t){return t.height-n.verticalPadding});var r=t.selectAll(".highlight-shadow").data(a);r.enter().append("line").classed("highlight-shadow",!0).attr("x",-n.bar.width/2).attr("stroke-width",n.bar.width+n.bar.strokeWidth).attr("stroke",n.bar.strokeColor).attr("opacity",n.bar.strokeOpacity).attr("stroke-linecap","butt"),r.attr("y1",function(t){return t.height}).call(I);var i=t.selectAll(".highlight").data(a);i.enter().append("line").classed("highlight",!0).attr("x",-n.bar.width/2).attr("stroke-width",n.bar.width-n.bar.strokeWidth).attr("stroke",n.bar.fillColor).attr("opacity",n.bar.fillOpacity).attr("stroke-linecap","butt"),i.attr("y1",function(t){return t.height}).call(I)}(e)},cleanRanges:function(t,e){if(Array.isArray(t[0])?(t=t.map(function(t){return t.sort(s)}),t=e.multiselect?k(t.sort(_)):[t[0]]):t=[t.sort(s)],e.tickvals){var r=e.tickvals.slice().sort(s);if(!(t=t.map(function(t){var e=[h(0,r,t[0],[]),h(1,r,t[1],[])];if(e[1]>e[0])return e}).filter(function(t){return t})).length)return}return t.length>1?t:t[0]}}},{"../../lib":426,"../../lib/gup":424,"./constants":576,d3:74}],574:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../plots/get_data").getModuleCalcData,o=t("./plot"),a=t("../../constants/xmlns_namespaces");r.name="parcoords",r.plot=function(t){var e=i(t.calcdata,"parcoords")[0];e.length&&o(t,e)},r.clean=function(t,e,r,n){var i=n._has&&n._has("parcoords"),o=e._has&&e._has("parcoords");i&&!o&&(n._paperdiv.selectAll(".parcoords").remove(),n._glimages.selectAll("*").remove())},r.toSVG=function(t){var e=t._fullLayout._glimages,r=n.select(t).selectAll(".svg-container");r.filter(function(t,e){return e===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this.toDataURL("image/png");e.append("svg:image").attr({xmlns:a.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})}),window.setTimeout(function(){n.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":405,"../../plots/get_data":501,"./plot":583,d3:74}],575:[function(t,e,r){"use strict";var n=t("../../lib").isArrayOrTypedArray,i=t("../../components/colorscale"),o=t("../../lib/gup").wrap;e.exports=function(t,e){var r,a;return i.hasColorscale(e,"line")&&n(e.line.color)?(r=e.line.color,a=i.extractOpts(e.line).colorscale,i.calc(t,e,{vals:r,containerStr:"line",cLetter:"c"})):(r=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=.5;return e}(e._length),a=[[0,e.line.color],[1,e.line.color]]),o({lineColor:r,cscale:a})}},{"../../components/colorscale":316,"../../lib":426,"../../lib/gup":424}],576:[function(t,e,r){"use strict";e.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],577:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../components/colorscale/helpers").hasColorscale,o=t("../../components/colorscale/defaults"),a=t("../../plots/domain").defaults,s=t("../../plots/array_container_defaults"),l=t("../../plots/cartesian/axes"),g=t("./attributes"),c=t("./axisbrush"),u=t("./constants").maxDimensionCount,h=t("./merge_length");function d(t,e,r,i){function o(r,i){return n.coerce(t,e,g.dimensions,r,i)}var a=o("values"),s=o("visible");if(a&&a.length||(s=e.visible=!1),s){o("label"),o("tickvals"),o("ticktext"),o("tickformat");var u=o("range");e._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:u},l.setConvert(e._ax,i.layout),o("multiselect");var h=o("constraintrange");h&&(e.constraintrange=c.cleanRanges(h,e))}}e.exports=function(t,e,r,l){function c(r,i){return n.coerce(t,e,g,r,i)}var A=t.dimensions;Array.isArray(A)&&A.length>u&&(n.log("parcoords traces support up to "+u+" dimensions at the moment"),A.splice(u));var f=s(t,e,{name:"dimensions",layout:l,handleItemDefaults:d}),C=function(t,e,r,a,s){var l=s("line.color",r);if(i(t,"line")&&n.isArrayOrTypedArray(l)){if(l.length)return s("line.colorscale"),o(t,e,a,s,{prefix:"line.",cLetter:"c"}),l.length;e.line.color=r}return 1/0}(t,e,r,l,c);a(e,l,c),Array.isArray(f)&&f.length||(e.visible=!1),h(e,f,"values",C);var p={family:l.font.family,size:Math.round(l.font.size/1.2),color:l.font.color};n.coerceFont(c,"labelfont",p),n.coerceFont(c,"tickfont",p),n.coerceFont(c,"rangefont",p),c("labelangle"),c("labelside")}},{"../../components/colorscale/defaults":314,"../../components/colorscale/helpers":315,"../../lib":426,"../../plots/array_container_defaults":469,"../../plots/cartesian/axes":473,"../../plots/domain":498,"./attributes":572,"./axisbrush":573,"./constants":576,"./merge_length":581}],578:[function(t,e,r){"use strict";var n=t("../../lib").isTypedArray;r.convertTypedArray=function(t){return n(t)?Array.prototype.slice.call(t):t},r.isOrdinal=function(t){return!!t.tickvals},r.isVisible=function(t){return t.visible||!("visible"in t)}},{"../../lib":426}],579:[function(t,e,r){"use strict";e.exports={attributes:t("./attributes"),supplyDefaults:t("./defaults"),calc:t("./calc"),plot:t("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:t("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":572,"./base_plot":574,"./calc":575,"./defaults":577,"./plot":583}],580:[function(t,e,r){"use strict";var n=t("glslify"),i=n(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform sampler2D mask, palette;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(mask,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),o=n(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),a=t("./constants").maxDimensionCount,s=t("../../lib"),l=1e-6,g=2048,c=new Uint8Array(4),u=new Uint8Array(4),h={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function d(t,e,r,n,i){var o=t._gl;o.enable(o.SCISSOR_TEST),o.scissor(e,r,n,i),t.clear({color:[0,0,0,0],depth:1})}function A(t,e,r,n,i,o){var a=o.key;r.drawCompleted||(!function(t){t.read({x:0,y:0,width:1,height:1,data:c})}(t),r.drawCompleted=!0),function s(l){var g=Math.min(n,i-l*n);0===l&&(window.cancelAnimationFrame(r.currentRafs[a]),delete r.currentRafs[a],d(t,o.scissorX,o.scissorY,o.scissorWidth,o.viewBoxSize[1])),r.clearOnly||(o.count=2*g,o.offset=2*l*n,e(o),l*n+g<i&&(r.currentRafs[a]=window.requestAnimationFrame(function(){s(l+1)})),r.drawCompleted=!1)}(0)}function f(t,e){return(t>>>8*e)%256/255}function C(t,e,r){for(var n=new Array(8*e),i=0,o=0;o<e;o++)for(var a=0;a<2;a++)for(var s=0;s<4;s++){var l=4*t+s,g=r[64*o+l];63===l&&0===a&&(g*=-1),n[i++]=g}return n}function p(t){var e="0"+t;return e.substr(e.length-2)}function I(t){return t<a?"p"+p(t+1)+"_"+p(t+4):"colors"}function v(t,e,r,n,i,o,a,l,g,c,u,h,d){for(var A=[[],[]],f=0;f<64;f++)A[0][f]=f===i?1:0,A[1][f]=f===o?1:0;var C=t.lines.canvasOverdrag,p=t.domain,I=t.canvasWidth,v=t.canvasHeight,m=t.deselectedLines.color;return s.extendFlat({key:u,resolution:[I,v],viewBoxPos:[a+C,l],viewBoxSize:[g,c],i0:i,i1:o,dim0A:A[0].slice(0,16),dim0B:A[0].slice(16,32),dim0C:A[0].slice(32,48),dim0D:A[0].slice(48,64),dim1A:A[1].slice(0,16),dim1B:A[1].slice(16,32),dim1C:A[1].slice(32,48),dim1D:A[1].slice(48,64),drwLayer:h,contextColor:[m[0]/255,m[1]/255,m[2]/255,m[3]<1?m[3]:Math.max(1/255,Math.pow(1/t.lines.color.length,1/3))],scissorX:(n===e?0:a+C)+(t.pad.l-C)+t.layoutWidth*p.x[0],scissorWidth:(n===r?I-a+C:g+.5)+(n===e?a+C:0),scissorY:l+t.pad.b+t.layoutHeight*p.y[0],scissorHeight:c,viewportX:t.pad.l-C+t.layoutWidth*p.x[0],viewportY:t.pad.b+t.layoutHeight*p.y[0],viewportWidth:I,viewportHeight:v},d)}function m(t){var e=g-1,r=Math.max(0,Math.floor(t[0]*e),0),n=Math.min(e,Math.ceil(t[1]*e),e);return[Math.min(r,n),Math.max(r,n)]}e.exports=function(t,e){var r,n,c,p,y,b=e.context,x=e.pick,_=e.regl,w={currentRafs:{},drawCompleted:!0,clearOnly:!1},k=function(t){for(var e={},r=0;r<=a;r+=4)e[I(r)]=t.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return e}(_),T=_.texture(h),M=[];O(e);var E=_({profile:!1,blend:{enable:b,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!b,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:_.prop("scissorX"),y:_.prop("scissorY"),width:_.prop("scissorWidth"),height:_.prop("scissorHeight")}},viewport:{x:_.prop("viewportX"),y:_.prop("viewportY"),width:_.prop("viewportWidth"),height:_.prop("viewportHeight")},dither:!1,vert:i,frag:o,primitive:"lines",lineWidth:1,attributes:k,uniforms:{resolution:_.prop("resolution"),viewBoxPos:_.prop("viewBoxPos"),viewBoxSize:_.prop("viewBoxSize"),dim0A:_.prop("dim0A"),dim1A:_.prop("dim1A"),dim0B:_.prop("dim0B"),dim1B:_.prop("dim1B"),dim0C:_.prop("dim0C"),dim1C:_.prop("dim1C"),dim0D:_.prop("dim0D"),dim1D:_.prop("dim1D"),loA:_.prop("loA"),hiA:_.prop("hiA"),loB:_.prop("loB"),hiB:_.prop("hiB"),loC:_.prop("loC"),hiC:_.prop("hiC"),loD:_.prop("loD"),hiD:_.prop("hiD"),palette:T,contextColor:_.prop("contextColor"),mask:_.prop("maskTexture"),drwLayer:_.prop("drwLayer"),maskHeight:_.prop("maskHeight")},offset:_.prop("offset"),count:_.prop("count")});function O(t){r=t.model,n=t.viewModel,c=n.dimensions.slice(),p=c[0]?c[0].values.length:0;var e=r.lines,i=x?e.color.map(function(t,r){return r/e.color.length}):e.color,o=function(t,e,r){for(var n,i=new Array(t*(a+4)),o=0,s=0;s<t;s++){for(var g=0;g<a;g++)i[o++]=g<e.length?e[g].paddedUnitValues[s]:.5;i[o++]=f(s,2),i[o++]=f(s,1),i[o++]=f(s,0),i[o++]=(n=r[s],Math.max(l,Math.min(1-l,n)))}return i}(p,c,i);!function(t,e,r){for(var n=0;n<=a;n+=4)t[I(n)](C(n/4,e,r))}(k,p,o),b||x||(T=_.texture(s.extendFlat({data:function(t,e){for(var r=new Array(256),n=0;n<256;n++)r[n]=t(n/255).concat(e);return r}(r.unitToColor,255)},h)))}return{render:function(t,e,n){var i,o,a,s=t.length,l=1/0,u=-1/0;for(i=0;i<s;i++)t[i].dim0.canvasX<l&&(l=t[i].dim0.canvasX,o=i),t[i].dim1.canvasX>u&&(u=t[i].dim1.canvasX,a=i);0===s&&d(_,0,0,r.canvasWidth,r.canvasHeight);var h=function(t){var e,r,n,i=[[],[]];for(n=0;n<64;n++){var o=!t&&n<c.length?c[n].brush.filter.getBounds():[-1/0,1/0];i[0][n]=o[0],i[1][n]=o[1]}var a=8*g,s=new Array(a);for(e=0;e<a;e++)s[e]=255;if(!t)for(e=0;e<c.length;e++){var l=e%8,u=(e-l)/8,h=Math.pow(2,l),d=c[e].brush.filter.get();if(!(d.length<2)){var A=m(d[0])[1];for(r=1;r<d.length;r++){var f=m(d[r]);for(n=A+1;n<f[0];n++)s[8*n+u]&=~h;A=Math.max(A,f[1])}}}var C={shape:[8,g],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:s};return y?y(C):y=_.texture(C),{maskTexture:y,maskHeight:g,loA:i[0].slice(0,16),loB:i[0].slice(16,32),loC:i[0].slice(32,48),loD:i[0].slice(48,64),hiA:i[1].slice(0,16),hiB:i[1].slice(16,32),hiC:i[1].slice(32,48),hiD:i[1].slice(48,64)}}(b);for(i=0;i<s;i++){var f=t[i],C=f.dim0.crossfilterDimensionIndex,I=f.dim1.crossfilterDimensionIndex,k=f.canvasX,T=f.canvasY,O=k+f.panelSizeX;if(e||!M[C]||M[C][0]!==k||M[C][1]!==O){M[C]=[k,O];var S=v(r,o,a,i,C,I,k,T,f.panelSizeX,f.panelSizeY,f.dim0.crossfilterDimensionIndex,b?0:x?2:1,h);w.clearOnly=n;var R=e?r.lines.blockLineCount:p;A(_,E,w,R,p,S)}}},readPixel:function(t,e){return _.read({x:t,y:e,width:1,height:1,data:u}),u},readPixels:function(t,e,r,n){var i=new Uint8Array(4*r*n);return _.read({x:t,y:e,width:r,height:n,data:i}),i},destroy:function(){for(var e in t.style["pointer-events"]="none",T.destroy(),y&&y.destroy(),k)k[e].destroy()},update:O}}},{"../../lib":426,"./constants":576,glslify:228}],581:[function(t,e,r){"use strict";e.exports=function(t,e,r,n){var i,o;for(n||(n=1/0),i=0;i<e.length;i++)(o=e[i]).visible&&(n=Math.min(n,o[r].length));for(n===1/0&&(n=0),t._length=n,i=0;i<e.length;i++)(o=e[i]).visible&&(o._length=n);return n}},{}],582:[function(t,e,r){"use strict";var n=t("d3"),i=t("color-rgba"),o=t("../../plots/cartesian/axes"),a=t("../../lib"),s=t("../../lib/svg_text_utils"),l=t("../../components/drawing"),g=t("../../components/colorscale"),c=t("../../lib/gup"),u=c.keyFun,h=c.repeat,d=c.unwrap,A=t("./helpers"),f=t("./constants"),C=t("./axisbrush"),p=t("./lines");function I(t,e,r){return a.aggNums(t,null,e,r)}function v(t,e){return y(I(Math.min,t,e),I(Math.max,t,e))}function m(t){var e=t.range;return e?y(e[0],e[1]):v(t.values,t._length)}function y(t,e){return!isNaN(t)&&isFinite(t)||(t=0),!isNaN(e)&&isFinite(e)||(e=0),t===e&&(0===t?(t-=1,e+=1):(t*=.9,e*=1.1)),[t,e]}function b(t){return t.dimensions.some(function(t){return t.brush.filterSpecified})}function x(t,e,r){var o=d(e),s=o.trace,l=A.convertTypedArray(o.lineColor),c=s.line,u={color:i(f.deselectedLineColor)},h=g.extractOpts(c),C=h.reversescale?g.flipScale(o.cscale):o.cscale,p=s.domain,I=s.dimensions,v=t.width,y=s.labelangle,b=s.labelside,x=s.labelfont,_=s.tickfont,w=s.rangefont,k=a.extendDeepNoArrays({},c,{color:l.map(n.scale.linear().domain(m({values:l,range:[h.min,h.max],_length:s._length}))),blockLineCount:f.blockLineCount,canvasOverdrag:f.overdrag*f.canvasPixelRatio}),T=Math.floor(v*(p.x[1]-p.x[0])),M=Math.floor(t.height*(p.y[1]-p.y[0])),E=t.margin||{l:80,r:80,t:100,b:80},O=T,S=M;return{key:r,colCount:I.filter(A.isVisible).length,dimensions:I,tickDistance:f.tickDistance,unitToColor:function(t){var e=t.map(function(t){return t[0]}),r=t.map(function(t){var e=i(t[1]);return n.rgb("rgb("+e[0]+","+e[1]+","+e[2]+")")}),o="rgb".split("").map(function(t){return n.scale.linear().clamp(!0).domain(e).range(r.map((i=t,function(t){return t[i]})));var i});return function(t){return o.map(function(e){return e(t)})}}(C),lines:k,deselectedLines:u,labelAngle:y,labelSide:b,labelFont:x,tickFont:_,rangeFont:w,layoutWidth:v,layoutHeight:t.height,domain:p,translateX:p.x[0]*v,translateY:t.height-p.y[1]*t.height,pad:E,canvasWidth:O*f.canvasPixelRatio+2*k.canvasOverdrag,canvasHeight:S*f.canvasPixelRatio,width:O,height:S,canvasPixelRatio:f.canvasPixelRatio}}function _(t,e,r){var i=r.width,o=r.height,s=r.dimensions,l=r.canvasPixelRatio,g=function(t){return i*t/Math.max(1,r.colCount-1)},c=f.verticalPadding/o,u=function(t,e){return n.scale.linear().range([e,t-e])}(o,f.verticalPadding),h={key:r.key,xScale:g,model:r,inBrushDrag:!1},d={};return h.dimensions=s.filter(A.isVisible).map(function(i,s){var p=function(t,e){return n.scale.linear().domain(m(t)).range([e,1-e])}(i,c),I=d[i.label];d[i.label]=(I||0)+1;var v=i.label+(I?"__"+I:""),y=i.constraintrange,x=y&&y.length;x&&!Array.isArray(y[0])&&(y=[y]);var _=x?y.map(function(t){return t.map(p)}):[[-1/0,1/0]],w=i.values;w.length>i._length&&(w=w.slice(0,i._length));var k,T=i.tickvals;function M(t,e){return{val:t,text:k[e]}}function E(t,e){return t.val-e.val}if(Array.isArray(T)&&T.length){k=i.ticktext,Array.isArray(k)&&k.length?k.length>T.length?k=k.slice(0,T.length):T.length>k.length&&(T=T.slice(0,k.length)):k=T.map(n.format(i.tickformat));for(var O=1;O<T.length;O++)if(T[O]<T[O-1]){for(var S=T.map(M).sort(E),R=0;R<T.length;R++)T[R]=S[R].val,k[R]=S[R].text;break}}else T=void 0;return w=A.convertTypedArray(w),{key:v,label:i.label,tickFormat:i.tickformat,tickvals:T,ticktext:k,ordinal:A.isOrdinal(i),multiselect:i.multiselect,xIndex:s,crossfilterDimensionIndex:s,visibleIndex:i._index,height:o,values:w,paddedUnitValues:w.map(p),unitTickvals:T&&T.map(p),xScale:g,x:g(s),canvasX:g(s)*l,unitToPaddedPx:u,domainScale:function(t,e,r,i,o){var a,s,l=m(r);return i?n.scale.ordinal().domain(i.map((a=n.format(r.tickformat),s=o,s?function(t,e){var r=s[e];return null===r||void 0===r?a(t):r}:a))).range(i.map(function(r){var n=(r-l[0])/(l[1]-l[0]);return t-e+n*(2*e-t)})):n.scale.linear().domain(l).range([t-e,e])}(o,f.verticalPadding,i,T,k),ordinalScale:function(t){if(t.tickvals){var e=m(t);return n.scale.ordinal().domain(t.tickvals).range(t.tickvals.map(function(t){return(t-e[0])/(e[1]-e[0])}))}}(i),parent:h,model:r,brush:C.makeBrush(t,x,_,function(){t.linePickActive(!1)},function(){var e=h;e.focusLayer&&e.focusLayer.render(e.panels,!0);var r=b(e);!t.contextShown()&&r?(e.contextLayer&&e.contextLayer.render(e.panels,!0),t.contextShown(!0)):t.contextShown()&&!r&&(e.contextLayer&&e.contextLayer.render(e.panels,!0,!0),t.contextShown(!1))},function(r){if(h.focusLayer.render(h.panels,!0),h.pickLayer&&h.pickLayer.render(h.panels,!0),t.linePickActive(!0),e&&e.filterChanged){var n=p.invert,o=r.map(function(t){return t.map(n).sort(a.sorterAsc)}).sort(function(t,e){return t[0]-e[0]});e.filterChanged(h.key,i._index,o)}})}}),h}function w(t){t.classed(f.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default").style("user-select","none")}function k(t,e){var r="top"===e?1:-1,n=t*Math.PI/180;return{dir:r,dx:Math.sin(n),dy:Math.cos(n),degrees:t}}function T(t,e){for(var r=e.panels||(e.panels=[]),n=t.data(),i=0;i<n.length-1;i++){var o=r[i]||(r[i]={}),a=n[i],s=n[i+1];o.dim0=a,o.dim1=s,o.canvasX=a.canvasX,o.panelSizeX=s.canvasX-a.canvasX,o.panelSizeY=e.model.canvasHeight,o.y=0,o.canvasY=0}}function M(t,e){return o.tickText(t._ax,e,!1).text}function E(t,e){if(t.ordinal)return"";var r=t.domainScale.domain(),n=r[e?r.length-1:0];return M(t.model.dimensions[t.visibleIndex],n)}e.exports=function(t,e,r,i){var g=t._fullLayout,c=g._toppaper,I=g._glcontainer;!function(t){for(var e=0;e<t.length;e++)for(var r=0;r<t[e].length;r++)for(var n=t[e][r].trace,i=n.dimensions,a=0;a<i.length;a++){var s=i[a].values,l=i[a]._ax;l&&(l.range?l.range=y(l.range[0],l.range[1]):l.range=v(s,n._length),l.dtick||(l.dtick=.01*(Math.abs(l.range[1]-l.range[0])||1)),l.tickformat=i[a].tickformat,o.calcTicks(l),l.cleanRange())}}(e);var m,O,S=(m=!0,O=!1,{linePickActive:function(t){return arguments.length?m=!!t:m},contextShown:function(t){return arguments.length?O=!!t:O}}),R=e.filter(function(t){return d(t).trace.visible}).map(x.bind(0,r)).map(_.bind(0,S,i));I.each(function(t,e){return a.extendFlat(t,R[e])});var D=I.selectAll(".gl-canvas").each(function(t){t.viewModel=R[0],t.model=t.viewModel?t.viewModel.model:null}),L=null;D.filter(function(t){return t.pick}).style("pointer-events","auto").on("mousemove",function(t){if(S.linePickActive()&&t.lineLayer&&i&&i.hover){var e=n.event,r=this.width,o=this.height,a=n.mouse(this),s=a[0],l=a[1];if(s<0||l<0||s>=r||l>=o)return;var g=t.lineLayer.readPixel(s,o-1-l),c=0!==g[3],u=c?g[2]+256*(g[1]+256*g[0]):null,h={x:s,y:l,clientX:e.clientX,clientY:e.clientY,dataIndex:t.model.key,curveNumber:u};u!==L&&(c?i.hover(h):i.unhover&&i.unhover(h),L=u)}}),D.style("opacity",function(t){return t.pick?0:1}),c.style("background","rgba(255, 255, 255, 0)");var P=c.selectAll("."+f.cn.parcoords).data(R,u);P.exit().remove(),P.enter().append("g").classed(f.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),P.attr("transform",function(t){return"translate("+t.model.translateX+","+t.model.translateY+")"});var N=P.selectAll("."+f.cn.parcoordsControlView).data(h,u);N.enter().append("g").classed(f.cn.parcoordsControlView,!0),N.attr("transform",function(t){return"translate("+t.model.pad.l+","+t.model.pad.t+")"});var z=N.selectAll("."+f.cn.yAxis).data(function(t){return t.dimensions},u);z.enter().append("g").classed(f.cn.yAxis,!0),N.each(function(t){T(z,t)}),D.each(function(t){if(t.viewModel){!t.lineLayer||i?t.lineLayer=p(this,t):t.lineLayer.update(t),(t.key||0===t.key)&&(t.viewModel[t.key]=t.lineLayer);var e=!t.context||i;t.lineLayer.render(t.viewModel.panels,e)}}),z.attr("transform",function(t){return"translate("+t.xScale(t.xIndex)+", 0)"}),z.call(n.behavior.drag().origin(function(t){return t}).on("drag",function(t){var e=t.parent;S.linePickActive(!1),t.x=Math.max(-f.overdrag,Math.min(t.model.width+f.overdrag,n.event.x)),t.canvasX=t.x*t.model.canvasPixelRatio,z.sort(function(t,e){return t.x-e.x}).each(function(e,r){e.xIndex=r,e.x=t===e?e.x:e.xScale(e.xIndex),e.canvasX=e.x*e.model.canvasPixelRatio}),T(z,e),z.filter(function(e){return 0!==Math.abs(t.xIndex-e.xIndex)}).attr("transform",function(t){return"translate("+t.xScale(t.xIndex)+", 0)"}),n.select(this).attr("transform","translate("+t.x+", 0)"),z.each(function(r,n,i){i===t.parent.key&&(e.dimensions[n]=r)}),e.contextLayer&&e.contextLayer.render(e.panels,!1,!b(e)),e.focusLayer.render&&e.focusLayer.render(e.panels)}).on("dragend",function(t){var e=t.parent;t.x=t.xScale(t.xIndex),t.canvasX=t.x*t.model.canvasPixelRatio,T(z,e),n.select(this).attr("transform",function(t){return"translate("+t.x+", 0)"}),e.contextLayer&&e.contextLayer.render(e.panels,!1,!b(e)),e.focusLayer&&e.focusLayer.render(e.panels),e.pickLayer&&e.pickLayer.render(e.panels,!0),S.linePickActive(!0),i&&i.axesMoved&&i.axesMoved(e.key,e.dimensions.map(function(t){return t.crossfilterDimensionIndex}))})),z.exit().remove();var F=z.selectAll("."+f.cn.axisOverlays).data(h,u);F.enter().append("g").classed(f.cn.axisOverlays,!0),F.selectAll("."+f.cn.axis).remove();var B=F.selectAll("."+f.cn.axis).data(h,u);B.enter().append("g").classed(f.cn.axis,!0),B.each(function(t){var e=t.model.height/t.model.tickDistance,r=t.domainScale,i=r.domain();n.select(this).call(n.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(e,t.tickFormat).tickValues(t.ordinal?i:null).tickFormat(function(e){return A.isOrdinal(t)?e:M(t.model.dimensions[t.visibleIndex],e)}).scale(r)),l.font(B.selectAll("text"),t.model.tickFont)}),B.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),B.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default").style("user-select","none");var j=F.selectAll("."+f.cn.axisHeading).data(h,u);j.enter().append("g").classed(f.cn.axisHeading,!0);var V=j.selectAll("."+f.cn.axisTitle).data(h,u);V.enter().append("text").classed(f.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("user-select","none").style("pointer-events","auto"),V.text(function(t){return t.label}).each(function(e){var r=n.select(this);l.font(r,e.model.labelFont),s.convertToTspans(r,t)}).attr("transform",function(t){var e=k(t.model.labelAngle,t.model.labelSide),r=f.axisTitleOffset;return(e.dir>0?"":"translate(0,"+(2*r+t.model.height)+")")+"rotate("+e.degrees+")translate("+-r*e.dx+","+-r*e.dy+")"}).attr("text-anchor",function(t){var e=k(t.model.labelAngle,t.model.labelSide);return 2*Math.abs(e.dx)>Math.abs(e.dy)?e.dir*e.dx<0?"start":"end":"middle"});var G=F.selectAll("."+f.cn.axisExtent).data(h,u);G.enter().append("g").classed(f.cn.axisExtent,!0);var U=G.selectAll("."+f.cn.axisExtentTop).data(h,u);U.enter().append("g").classed(f.cn.axisExtentTop,!0),U.attr("transform","translate(0,"+-f.axisExtentOffset+")");var Z=U.selectAll("."+f.cn.axisExtentTopText).data(h,u);Z.enter().append("text").classed(f.cn.axisExtentTopText,!0).call(w),Z.text(function(t){return E(t,!0)}).each(function(t){l.font(n.select(this),t.model.rangeFont)});var H=G.selectAll("."+f.cn.axisExtentBottom).data(h,u);H.enter().append("g").classed(f.cn.axisExtentBottom,!0),H.attr("transform",function(t){return"translate(0,"+(t.model.height+f.axisExtentOffset)+")"});var W=H.selectAll("."+f.cn.axisExtentBottomText).data(h,u);W.enter().append("text").classed(f.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(w),W.text(function(t){return E(t,!1)}).each(function(t){l.font(n.select(this),t.model.rangeFont)}),C.ensureAxisBrush(F)}},{"../../components/colorscale":316,"../../components/drawing":325,"../../lib":426,"../../lib/gup":424,"../../lib/svg_text_utils":450,"../../plots/cartesian/axes":473,"./axisbrush":573,"./constants":576,"./helpers":578,"./lines":580,"color-rgba":57,d3:74}],583:[function(t,e,r){"use strict";var n=t("./parcoords"),i=t("../../lib/prepare_regl"),o=t("./helpers").isVisible;function a(t,e,r){var n=e.indexOf(r),i=t.indexOf(n);return-1===i&&(i+=e.length),i}e.exports=function(t,e){var r=t._fullLayout;if(i(t)){var s={},l={},g={},c={},u=r._size;e.forEach(function(e,r){var n=e[0].trace;g[r]=n.index;var i=c[r]=n._fullInput.index;s[r]=t.data[i].dimensions,l[r]=t.data[i].dimensions.slice()});n(t,e,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{filterChanged:function(e,n,i){var o=l[e][n],a=i.map(function(t){return t.slice()}),s="dimensions["+n+"].constraintrange",u=r._tracePreGUI[t._fullData[g[e]]._fullInput.uid];if(void 0===u[s]){var h=o.constraintrange;u[s]=h||null}var d=t._fullData[g[e]].dimensions[n];a.length?(1===a.length&&(a=a[0]),o.constraintrange=a,d.constraintrange=a.slice(),a=[a]):(delete o.constraintrange,delete d.constraintrange,a=null);var A={};A[s]=a,t.emit("plotly_restyle",[A,[c[e]]])},hover:function(e){t.emit("plotly_hover",e)},unhover:function(e){t.emit("plotly_unhover",e)},axesMoved:function(e,r){var n=function(t,e){return function(r,n){return a(t,e,r)-a(t,e,n)}}(r,l[e].filter(o));s[e].sort(n),l[e].filter(function(t){return!o(t)}).sort(function(t){return l[e].indexOf(t)}).forEach(function(t){s[e].splice(s[e].indexOf(t),1),s[e].splice(l[e].indexOf(t),0,t)}),t.emit("plotly_restyle",[{dimensions:[s[e]]},[c[e]]])}})}}},{"../../lib/prepare_regl":439,"./helpers":578,"./parcoords":582}],584:[function(t,e,r){"use strict";var n=t("../../lib");r.formatPiePercent=function(t,e){var r=(100*t).toPrecision(3);return-1!==r.lastIndexOf(".")&&(r=r.replace(/[.]?0+$/,"")),n.numSeparate(r,e)+"%"},r.formatPieValue=function(t,e){var r=t.toPrecision(10);return-1!==r.lastIndexOf(".")&&(r=r.replace(/[.]?0+$/,"")),n.numSeparate(r,e)},r.getFirstFilled=function(t,e){if(Array.isArray(t))for(var r=0;r<e.length;r++){var n=t[e[r]];if(n||0===n||""===n)return n}},r.castOption=function(t,e){return Array.isArray(t)?r.getFirstFilled(t,e):t||void 0}},{"../../lib":426}],585:[function(t,e,r){"use strict";var n=t("../../components/color"),i=t("./helpers").castOption;e.exports=function(t,e,r){var o=r.marker.line,a=i(o.color,e.pts)||n.defaultLine,s=i(o.width,e.pts)||0;t.style("stroke-width",s).call(n.fill,e.color).call(n.stroke,a)}},{"../../components/color":304,"./helpers":584}],586:[function(t,e,r){"use strict";var n=t("../../lib");e.exports=function(t,e){for(var r=0;r<t.length;r++)t[r].i=r;n.mergeArray(e.text,t,"tx"),n.mergeArray(e.texttemplate,t,"txt"),n.mergeArray(e.hovertext,t,"htx"),n.mergeArray(e.customdata,t,"data"),n.mergeArray(e.textposition,t,"tp"),e.textfont&&(n.mergeArrayCastPositive(e.textfont.size,t,"ts"),n.mergeArray(e.textfont.color,t,"tc"),n.mergeArray(e.textfont.family,t,"tf"));var i=e.marker;if(i){n.mergeArrayCastPositive(i.size,t,"ms"),n.mergeArrayCastPositive(i.opacity,t,"mo"),n.mergeArray(i.symbol,t,"mx"),n.mergeArray(i.color,t,"mc");var o=i.line;i.line&&(n.mergeArray(o.color,t,"mlc"),n.mergeArrayCastPositive(o.width,t,"mlw"));var a=i.gradient;a&&"none"!==a.type&&(n.mergeArray(a.type,t,"mgt"),n.mergeArray(a.color,t,"mgc"))}}},{"../../lib":426}],587:[function(t,e,r){"use strict";var n=t("../../plots/template_attributes").texttemplateAttrs,i=t("../../plots/template_attributes").hovertemplateAttrs,o=t("../../components/colorscale/attributes"),a=t("../../plots/font_attributes"),s=t("../../components/drawing/attributes").dash,l=t("../../components/drawing"),g=t("./constants"),c=t("../../lib/extend").extendFlat;e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:n({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:i({},{keys:g.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:c({},s,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:c({symbol:{valType:"enumerated",values:l.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:c({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},o("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},o("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:a({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}}},{"../../components/colorscale/attributes":311,"../../components/drawing":325,"../../components/drawing/attributes":324,"../../lib/extend":419,"../../plots/font_attributes":499,"../../plots/template_attributes":523,"./constants":591}],588:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("../../lib"),o=t("../../plots/cartesian/axes"),a=t("../../constants/numerical").BADNUM,s=t("./subtypes"),l=t("./colorscale_calc"),g=t("./arrays_to_calcdata"),c=t("./calc_selection");function u(t,e,r,n,i,a,l){var g=e._length,c=t._fullLayout,u=r._id,h=n._id,d=c._firstScatter[A(e)]===e.uid,C=(f(e,c,r,n)||{}).orientation,p=e.fill;r._minDtick=0,n._minDtick=0;var I={padded:!0},v={padded:!0};l&&(I.ppad=v.ppad=l);var m=g<2||i[0]!==i[g-1]||a[0]!==a[g-1];m&&("tozerox"===p||"tonextx"===p&&(d||"h"===C))?I.tozero=!0:(e.error_y||{}).visible||"tonexty"!==p&&"tozeroy"!==p&&(s.hasMarkers(e)||s.hasText(e))||(I.padded=!1,I.ppad=0),m&&("tozeroy"===p||"tonexty"===p&&(d||"v"===C))?v.tozero=!0:"tonextx"!==p&&"tozerox"!==p||(v.padded=!1),u&&(e._extremes[u]=o.findExtremes(r,i,I)),h&&(e._extremes[h]=o.findExtremes(n,a,v))}function h(t,e){if(s.hasMarkers(t)){var r,n=t.marker,a=1.6*(t.marker.sizeref||1);if(r="area"===t.marker.sizemode?function(t){return Math.max(Math.sqrt((t||0)/a),3)}:function(t){return Math.max((t||0)/a,3)},i.isArrayOrTypedArray(n.size)){var l={type:"linear"};o.setConvert(l);for(var g=l.makeCalcdata(t.marker,"size"),c=new Array(e),u=0;u<e;u++)c[u]=r(g[u]);return c}return r(n.size)}}function d(t,e){var r=A(e),n=t._firstScatter;n[r]||(n[r]=e.uid)}function A(t){var e=t.stackgroup;return t.xaxis+t.yaxis+t.type+(e?"-"+e:"")}function f(t,e,r,n){var i=t.stackgroup;if(i){var o=e._scatterStackOpts[r._id+n._id][i],a="v"===o.orientation?n:r;return"linear"===a.type||"log"===a.type?o:void 0}}e.exports={calc:function(t,e){var r,s,A,C,p,I,v=t._fullLayout,m=o.getFromId(t,e.xaxis||"x"),y=o.getFromId(t,e.yaxis||"y"),b=m.makeCalcdata(e,"x"),x=y.makeCalcdata(e,"y"),_=e._length,w=new Array(_),k=e.ids,T=f(e,v,m,y),M=!1;d(v,e);var E,O="x",S="y";for(T?(i.pushUnique(T.traceIndices,e._expandedIndex),(r="v"===T.orientation)?(S="s",E="x"):(O="s",E="y"),p="interpolate"===T.stackgaps):u(t,e,m,y,b,x,h(e,_)),s=0;s<_;s++){var R=w[s]={},D=n(b[s]),L=n(x[s]);D&&L?(R[O]=b[s],R[S]=x[s]):T&&(r?D:L)?(R[E]=r?b[s]:x[s],R.gap=!0,p?(R.s=a,M=!0):R.s=0):R[O]=R[S]=a,k&&(R.id=String(k[s]))}if(g(w,e),l(t,e),c(w,e),T){for(s=0;s<w.length;)w[s][E]===a?w.splice(s,1):s++;if(i.sort(w,function(t,e){return t[E]-e[E]||t.i-e.i}),M){for(s=0;s<w.length-1&&w[s].gap;)s++;for((I=w[s].s)||(I=w[s].s=0),A=0;A<s;A++)w[A].s=I;for(C=w.length-1;C>s&&w[C].gap;)C--;for(I=w[C].s,A=w.length-1;A>C;A--)w[A].s=I;for(;s<C;)if(w[++s].gap){for(A=s+1;w[A].gap;)A++;for(var P=w[s-1][E],N=w[s-1].s,z=(w[A].s-N)/(w[A][E]-P);s<A;)w[s].s=N+(w[s][E]-P)*z,s++}}}return w},calcMarkerSize:h,calcAxisExpansion:u,setFirstScatter:d,getStackOpts:f}},{"../../constants/numerical":404,"../../lib":426,"../../plots/cartesian/axes":473,"./arrays_to_calcdata":586,"./calc_selection":589,"./colorscale_calc":590,"./subtypes":611,"fast-isnumeric":145}],589:[function(t,e,r){"use strict";var n=t("../../lib");e.exports=function(t,e){n.isArrayOrTypedArray(e.selectedpoints)&&n.tagSelected(t,e)}},{"../../lib":426}],590:[function(t,e,r){"use strict";var n=t("../../components/colorscale/helpers").hasColorscale,i=t("../../components/colorscale/calc"),o=t("./subtypes");e.exports=function(t,e){o.hasLines(e)&&n(e,"line")&&i(t,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),o.hasMarkers(e)&&(n(e,"marker")&&i(t,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),n(e,"marker.line")&&i(t,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":312,"../../components/colorscale/helpers":315,"./subtypes":611}],591:[function(t,e,r){"use strict";e.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],592:[function(t,e,r){"use strict";var n=t("./calc");function i(t,e,r,n,i,o,a){i[n]=!0;var s={i:null,gap:!0,s:0};if(s[a]=r,t.splice(e,0,s),e&&r===t[e-1][a]){var l=t[e-1];s.s=l.s,s.i=l.i,s.gap=l.gap}else o&&(s.s=function(t,e,r,n){var i=t[e-1],o=t[e+1];return o?i?i.s+(o.s-i.s)*(r-i[n])/(o[n]-i[n]):o.s:i.s}(t,e,r,a));e||(t[0].t=t[1].t,t[0].trace=t[1].trace,delete t[1].t,delete t[1].trace)}e.exports=function(t,e){var r=e.xaxis,o=e.yaxis,a=r._id+o._id,s=t._fullLayout._scatterStackOpts[a];if(s){var l,g,c,u,h,d,A,f,C,p,I,v,m,y,b,x=t.calcdata;for(var _ in s){var w=(p=s[_]).traceIndices;if(w.length){for(I="interpolate"===p.stackgaps,v=p.groupnorm,"v"===p.orientation?(m="x",y="y"):(m="y",y="x"),b=new Array(w.length),l=0;l<b.length;l++)b[l]=!1;d=x[w[0]];var k=new Array(d.length);for(l=0;l<d.length;l++)k[l]=d[l][m];for(l=1;l<w.length;l++){for(h=x[w[l]],g=c=0;g<h.length;g++){for(A=h[g][m];A>k[c]&&c<k.length;c++)i(h,g,k[c],l,b,I,m),g++;if(A!==k[c]){for(u=0;u<l;u++)i(x[w[u]],c,A,u,b,I,m);k.splice(c,0,A)}c++}for(;c<k.length;c++)i(h,g,k[c],l,b,I,m),g++}var T=k.length;for(g=0;g<d.length;g++){for(f=d[g][y]=d[g].s,l=1;l<w.length;l++)(h=x[w[l]])[0].trace._rawLength=h[0].trace._length,h[0].trace._length=T,f+=h[g].s,h[g][y]=f;if(v)for(C=("fraction"===v?f:f/100)||1,l=0;l<w.length;l++){var M=x[w[l]][g];M[y]/=C,M.sNorm=M.s/C}}for(l=0;l<w.length;l++){var E=(h=x[w[l]])[0].trace,O=n.calcMarkerSize(E,E._rawLength),S=Array.isArray(O);if(O&&b[l]||S){var R=O;for(O=new Array(T),g=0;g<T;g++)O[g]=h[g].gap?0:S?R[h[g].i]:R}var D=new Array(T),L=new Array(T);for(g=0;g<T;g++)D[g]=h[g].x,L[g]=h[g].y;n.calcAxisExpansion(t,E,r,o,D,L,O),h[0].t.orientation=p.orientation}}}}}},{"./calc":588}],593:[function(t,e,r){"use strict";e.exports=function(t){for(var e=0;e<t.length;e++){var r=t[e];if("scatter"===r.type){var n=r.fill;if("none"!==n&&"toself"!==n&&(r.opacity=void 0,"tonexty"===n||"tonextx"===n))for(var i=e-1;i>=0;i--){var o=t[i];if("scatter"===o.type&&o.xaxis===r.xaxis&&o.yaxis===r.yaxis){o.opacity=void 0;break}}}}}},{}],594:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../registry"),o=t("./attributes"),a=t("./constants"),s=t("./subtypes"),l=t("./xy_defaults"),g=t("./stack_defaults"),c=t("./marker_defaults"),u=t("./line_defaults"),h=t("./line_shape_defaults"),d=t("./text_defaults"),A=t("./fillcolor_defaults");e.exports=function(t,e,r,f){function C(r,i){return n.coerce(t,e,o,r,i)}var p=l(t,e,f,C);if(p||(e.visible=!1),e.visible){var I=g(t,e,f,C),v=!I&&p<a.PTS_LINESONLY?"lines+markers":"lines";C("text"),C("hovertext"),C("mode",v),s.hasLines(e)&&(u(t,e,r,f,C),h(t,e,C),C("connectgaps"),C("line.simplify")),s.hasMarkers(e)&&c(t,e,r,f,C,{gradient:!0}),s.hasText(e)&&(C("texttemplate"),d(t,e,f,C));var m=[];(s.hasMarkers(e)||s.hasText(e))&&(C("cliponaxis"),C("marker.maxdisplayed"),m.push("points")),C("fill",I?I.fillDflt:"none"),"none"!==e.fill&&(A(t,e,r,C),s.hasLines(e)||h(t,e,C));var y=(e.line||{}).color,b=(e.marker||{}).color;"tonext"!==e.fill&&"toself"!==e.fill||m.push("fills"),C("hoveron",m.join("+")||"points"),"fills"!==e.hoveron&&C("hovertemplate");var x=i.getComponentMethod("errorbars","supplyDefaults");x(t,e,y||b||r,{axis:"y"}),x(t,e,y||b||r,{axis:"x",inherit:"y"}),n.coerceSelectionMarkerOpacity(e,C)}}},{"../../lib":426,"../../registry":524,"./attributes":587,"./constants":591,"./fillcolor_defaults":595,"./line_defaults":600,"./line_shape_defaults":602,"./marker_defaults":606,"./stack_defaults":609,"./subtypes":611,"./text_defaults":612,"./xy_defaults":613}],595:[function(t,e,r){"use strict";var n=t("../../components/color"),i=t("../../lib").isArrayOrTypedArray;e.exports=function(t,e,r,o){var a=!1;if(e.marker){var s=e.marker.color,l=(e.marker.line||{}).color;s&&!i(s)?a=s:l&&!i(l)&&(a=l)}o("fillcolor",n.addOpacity((e.line||{}).color||a||r,.5))}},{"../../components/color":304,"../../lib":426}],596:[function(t,e,r){"use strict";var n=t("../../plots/cartesian/axes");e.exports=function(t,e,r){var i={},o={_fullLayout:r},a=n.getFromTrace(o,e,"x"),s=n.getFromTrace(o,e,"y");return i.xLabel=n.tickText(a,t.x,!0).text,i.yLabel=n.tickText(s,t.y,!0).text,i}},{"../../plots/cartesian/axes":473}],597:[function(t,e,r){"use strict";var n=t("../../components/color"),i=t("./subtypes");e.exports=function(t,e){var r,o;if("lines"===t.mode)return(r=t.line.color)&&n.opacity(r)?r:t.fillcolor;if("none"===t.mode)return t.fill?t.fillcolor:"";var a=e.mcc||(t.marker||{}).color,s=e.mlcc||((t.marker||{}).line||{}).color;return(o=a&&n.opacity(a)?a:s&&n.opacity(s)&&(e.mlw||((t.marker||{}).line||{}).width)?s:"")?n.opacity(o)<.3?n.addOpacity(o,.3):o:(r=(t.line||{}).color)&&n.opacity(r)&&i.hasLines(t)&&t.line.width?r:t.fillcolor}},{"../../components/color":304,"./subtypes":611}],598:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../components/fx"),o=t("../../registry"),a=t("./get_trace_color"),s=t("../../components/color"),l=n.fillText;e.exports=function(t,e,r,g){var c=t.cd,u=c[0].trace,h=t.xa,d=t.ya,A=h.c2p(e),f=d.c2p(r),C=[A,f],p=u.hoveron||"",I=-1!==u.mode.indexOf("markers")?3:.5;if(-1!==p.indexOf("points")){var v=function(t){var e=Math.max(I,t.mrc||0),r=h.c2p(t.x)-A,n=d.c2p(t.y)-f;return Math.max(Math.sqrt(r*r+n*n)-e,1-I/e)},m=i.getDistanceFunction(g,function(t){var e=Math.max(3,t.mrc||0),r=1-1/e,n=Math.abs(h.c2p(t.x)-A);return n<e?r*n/e:n-e+r},function(t){var e=Math.max(3,t.mrc||0),r=1-1/e,n=Math.abs(d.c2p(t.y)-f);return n<e?r*n/e:n-e+r},v);if(i.getClosest(c,m,t),!1!==t.index){var y=c[t.index],b=h.c2p(y.x,!0),x=d.c2p(y.y,!0),_=y.mrc||1;t.index=y.i;var w=c[0].t.orientation,k=w&&(y.sNorm||y.s),T="h"===w?k:y.x,M="v"===w?k:y.y;return n.extendFlat(t,{color:a(u,y),x0:b-_,x1:b+_,xLabelVal:T,y0:x-_,y1:x+_,yLabelVal:M,spikeDistance:v(y),hovertemplate:u.hovertemplate}),l(y,u,t),o.getComponentMethod("errorbars","hoverInfo")(y,u,t),[t]}}if(-1!==p.indexOf("fills")&&u._polygons){var E,O,S,R,D,L,P,N,z,F=u._polygons,B=[],j=!1,V=1/0,G=-1/0,U=1/0,Z=-1/0;for(E=0;E<F.length;E++)(S=F[E]).contains(C)&&(j=!j,B.push(S),U=Math.min(U,S.ymin),Z=Math.max(Z,S.ymax));if(j){var H=((U=Math.max(U,0))+(Z=Math.min(Z,d._length)))/2;for(E=0;E<B.length;E++)for(R=B[E].pts,O=1;O<R.length;O++)(N=R[O-1][1])>H!=(z=R[O][1])>=H&&(L=R[O-1][0],P=R[O][0],z-N&&(D=L+(P-L)*(H-N)/(z-N),V=Math.min(V,D),G=Math.max(G,D)));V=Math.max(V,0),G=Math.min(G,h._length);var W=s.defaultLine;return s.opacity(u.fillcolor)?W=u.fillcolor:s.opacity((u.line||{}).color)&&(W=u.line.color),n.extendFlat(t,{distance:t.maxHoverDistance,x0:V,x1:G,y0:H,y1:H,color:W,hovertemplate:!1}),delete t.index,u.text&&!Array.isArray(u.text)?t.text=String(u.text):t.text=u.name,[t]}}}},{"../../components/color":304,"../../components/fx":343,"../../lib":426,"../../registry":524,"./get_trace_color":597}],599:[function(t,e,r){"use strict";var n=t("./subtypes");e.exports={hasLines:n.hasLines,hasMarkers:n.hasMarkers,hasText:n.hasText,isBubble:n.isBubble,attributes:t("./attributes"),supplyDefaults:t("./defaults"),crossTraceDefaults:t("./cross_trace_defaults"),calc:t("./calc").calc,crossTraceCalc:t("./cross_trace_calc"),arraysToCalcdata:t("./arrays_to_calcdata"),plot:t("./plot"),colorbar:t("./marker_colorbar"),formatLabels:t("./format_labels"),style:t("./style").style,styleOnSelect:t("./style").styleOnSelect,hoverPoints:t("./hover"),selectPoints:t("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:t("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":484,"./arrays_to_calcdata":586,"./attributes":587,"./calc":588,"./cross_trace_calc":592,"./cross_trace_defaults":593,"./defaults":594,"./format_labels":596,"./hover":598,"./marker_colorbar":605,"./plot":607,"./select":608,"./style":610,"./subtypes":611}],600:[function(t,e,r){"use strict";var n=t("../../lib").isArrayOrTypedArray,i=t("../../components/colorscale/helpers").hasColorscale,o=t("../../components/colorscale/defaults");e.exports=function(t,e,r,a,s,l){var g=(t.marker||{}).color;(s("line.color",r),i(t,"line"))?o(t,e,a,s,{prefix:"line.",cLetter:"c"}):s("line.color",!n(g)&&g||r);s("line.width"),(l||{}).noDash||s("line.dash")}},{"../../components/colorscale/defaults":314,"../../components/colorscale/helpers":315,"../../lib":426}],601:[function(t,e,r){"use strict";var n=t("../../constants/numerical"),i=n.BADNUM,o=n.LOG_CLIP,a=o+.5,s=o-.5,l=t("../../lib"),g=l.segmentsIntersect,c=l.constrain,u=t("./constants");e.exports=function(t,e){var r,n,o,h,d,A,f,C,p,I,v,m,y,b,x,_,w,k,T=e.xaxis,M=e.yaxis,E="log"===T.type,O="log"===M.type,S=T._length,R=M._length,D=e.connectGaps,L=e.baseTolerance,P=e.shape,N="linear"===P,z=e.fill&&"none"!==e.fill,F=[],B=u.minTolerance,j=t.length,V=new Array(j),G=0;function U(r){var n=t[r];if(!n)return!1;var o=e.linearized?T.l2p(n.x):T.c2p(n.x),l=e.linearized?M.l2p(n.y):M.c2p(n.y);if(o===i){if(E&&(o=T.c2p(n.x,!0)),o===i)return!1;O&&l===i&&(o*=Math.abs(T._m*R*(T._m>0?a:s)/(M._m*S*(M._m>0?a:s)))),o*=1e3}if(l===i){if(O&&(l=M.c2p(n.y,!0)),l===i)return!1;l*=1e3}return[o,l]}function Z(t,e,r,n){var i=r-t,o=n-e,a=.5-t,s=.5-e,l=i*i+o*o,g=i*a+o*s;if(g>0&&g<l){var c=a*o-s*i;if(c*c<l)return!0}}function H(t,e){var r=t[0]/S,n=t[1]/R,i=Math.max(0,-r,r-1,-n,n-1);return i&&void 0!==w&&Z(r,n,w,k)&&(i=0),i&&e&&Z(r,n,e[0]/S,e[1]/R)&&(i=0),(1+u.toleranceGrowth*i)*L}function W(t,e){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}var Y,X,q,Q,K,J,$,tt=u.maxScreensAway,et=-S*tt,rt=S*(1+tt),nt=-R*tt,it=R*(1+tt),ot=[[et,nt,rt,nt],[rt,nt,rt,it],[rt,it,et,it],[et,it,et,nt]];function at(t){if(t[0]<et||t[0]>rt||t[1]<nt||t[1]>it)return[c(t[0],et,rt),c(t[1],nt,it)]}function st(t,e){return t[0]===e[0]&&(t[0]===et||t[0]===rt)||(t[1]===e[1]&&(t[1]===nt||t[1]===it)||void 0)}function lt(t,e,r){return function(n,i){var o=at(n),a=at(i),s=[];if(o&&a&&st(o,a))return s;o&&s.push(o),a&&s.push(a);var g=2*l.constrain((n[t]+i[t])/2,e,r)-((o||n)[t]+(a||i)[t]);g&&((o&&a?g>0==o[t]>a[t]?o:a:o||a)[t]+=g);return s}}function gt(t){var e=t[0],r=t[1],n=e===V[G-1][0],i=r===V[G-1][1];if(!n||!i)if(G>1){var o=e===V[G-2][0],a=r===V[G-2][1];n&&(e===et||e===rt)&&o?a?G--:V[G-1]=t:i&&(r===nt||r===it)&&a?o?G--:V[G-1]=t:V[G++]=t}else V[G++]=t}function ct(t){V[G-1][0]!==t[0]&&V[G-1][1]!==t[1]&&gt([q,Q]),gt(t),K=null,q=Q=0}function ut(t){if(w=t[0]/S,k=t[1]/R,Y=t[0]<et?et:t[0]>rt?rt:0,X=t[1]<nt?nt:t[1]>it?it:0,Y||X){if(G)if(K){var e=$(K,t);e.length>1&&(ct(e[0]),V[G++]=e[1])}else J=$(V[G-1],t)[0],V[G++]=J;else V[G++]=[Y||t[0],X||t[1]];var r=V[G-1];Y&&X&&(r[0]!==Y||r[1]!==X)?(K&&(q!==Y&&Q!==X?gt(q&&Q?(n=K,o=(i=t)[0]-n[0],a=(i[1]-n[1])/o,(n[1]*i[0]-i[1]*n[0])/o>0?[a>0?et:rt,it]:[a>0?rt:et,nt]):[q||Y,Q||X]):q&&Q&&gt([q,Q])),gt([Y,X])):q-Y&&Q-X&&gt([Y||q,X||Q]),K=t,q=Y,Q=X}else K&&ct($(K,t)[0]),V[G++]=t;var n,i,o,a}for("linear"===P||"spline"===P?$=function(t,e){for(var r=[],n=0,i=0;i<4;i++){var o=ot[i],a=g(t[0],t[1],e[0],e[1],o[0],o[1],o[2],o[3]);a&&(!n||Math.abs(a.x-r[0][0])>1||Math.abs(a.y-r[0][1])>1)&&(a=[a.x,a.y],n&&W(a,t)<W(r[0],t)?r.unshift(a):r.push(a),n++)}return r}:"hv"===P||"vh"===P?$=function(t,e){var r=[],n=at(t),i=at(e);return n&&i&&st(n,i)?r:(n&&r.push(n),i&&r.push(i),r)}:"hvh"===P?$=lt(0,et,rt):"vhv"===P&&($=lt(1,nt,it)),r=0;r<j;r++)if(n=U(r)){for(G=0,K=null,ut(n),r++;r<j;r++){if(!(h=U(r))){if(D)continue;break}if(N&&e.simplify){var ht=U(r+1);if(I=W(h,n),z&&(0===G||G===j-1)||!(I<H(h,ht)*B)){for(C=[(h[0]-n[0])/I,(h[1]-n[1])/I],d=n,v=I,m=b=x=0,f=!1,o=h,r++;r<t.length;r++){if(A=ht,ht=U(r+1),!A){if(D)continue;break}if(_=(p=[A[0]-n[0],A[1]-n[1]])[0]*C[1]-p[1]*C[0],b=Math.min(b,_),(x=Math.max(x,_))-b>H(A,ht))break;o=A,(y=p[0]*C[0]+p[1]*C[1])>v?(v=y,h=A,f=!1):y<m&&(m=y,d=A,f=!0)}if(f?(ut(h),o!==d&&ut(d)):(d!==n&&ut(d),o!==h&&ut(h)),ut(o),r>=t.length||!A)break;ut(A),n=A}}else ut(h)}K&&gt([q||K[0],Q||K[1]]),F.push(V.slice(0,G))}return F}},{"../../constants/numerical":404,"../../lib":426,"./constants":591}],602:[function(t,e,r){"use strict";e.exports=function(t,e,r){"spline"===r("line.shape")&&r("line.smoothing")}},{}],603:[function(t,e,r){"use strict";var n={tonextx:1,tonexty:1,tonext:1};e.exports=function(t,e,r){var i,o,a,s,l,g={},c=!1,u=-1,h=0,d=-1;for(o=0;o<r.length;o++)(a=(i=r[o][0].trace).stackgroup||"")?a in g?l=g[a]:(l=g[a]=h,h++):i.fill in n&&d>=0?l=d:(l=d=h,h++),l<u&&(c=!0),i._groupIndex=u=l;var A=r.slice();c&&A.sort(function(t,e){var r=t[0].trace,n=e[0].trace;return r._groupIndex-n._groupIndex||r.index-n.index});var f={};for(o=0;o<A.length;o++)a=(i=A[o][0].trace).stackgroup||"",!0===i.visible?(i._nexttrace=null,i.fill in n&&(s=f[a],i._prevtrace=s||null,s&&(s._nexttrace=i)),i._ownfill=i.fill&&("tozero"===i.fill.substr(0,6)||"toself"===i.fill||"to"===i.fill.substr(0,2)&&!i._prevtrace),f[a]=i):i._prevtrace=i._nexttrace=i._ownfill=null;return A}},{}],604:[function(t,e,r){"use strict";var n=t("fast-isnumeric");e.exports=function(t){var e=t.marker,r=e.sizeref||1,i=e.sizemin||0,o="area"===e.sizemode?function(t){return Math.sqrt(t/r)}:function(t){return t/r};return function(t){var e=o(t/2);return n(e)&&e>0?Math.max(e,i):0}}},{"fast-isnumeric":145}],605:[function(t,e,r){"use strict";e.exports={container:"marker",min:"cmin",max:"cmax"}},{}],606:[function(t,e,r){"use strict";var n=t("../../components/color"),i=t("../../components/colorscale/helpers").hasColorscale,o=t("../../components/colorscale/defaults"),a=t("./subtypes");e.exports=function(t,e,r,s,l,g){var c=a.isBubble(t),u=(t.line||{}).color;(g=g||{},u&&(r=u),l("marker.symbol"),l("marker.opacity",c?.7:1),l("marker.size"),l("marker.color",r),i(t,"marker")&&o(t,e,s,l,{prefix:"marker.",cLetter:"c"}),g.noSelect||(l("selected.marker.color"),l("unselected.marker.color"),l("selected.marker.size"),l("unselected.marker.size")),g.noLine||(l("marker.line.color",u&&!Array.isArray(u)&&e.marker.color!==u?u:c?n.background:n.defaultLine),i(t,"marker.line")&&o(t,e,s,l,{prefix:"marker.line.",cLetter:"c"}),l("marker.line.width",c?1:0)),c&&(l("marker.sizeref"),l("marker.sizemin"),l("marker.sizemode")),g.gradient)&&("none"!==l("marker.gradient.type")&&l("marker.gradient.color"))}},{"../../components/color":304,"../../components/colorscale/defaults":314,"../../components/colorscale/helpers":315,"./subtypes":611}],607:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../registry"),o=t("../../lib"),a=o.ensureSingle,s=o.identity,l=t("../../components/drawing"),g=t("./subtypes"),c=t("./line_points"),u=t("./link_traces"),h=t("../../lib/polygon").tester;function d(t,e,r,u,d,A,f){var C;!function(t,e,r,i,a){var s=r.xaxis,l=r.yaxis,c=n.extent(o.simpleMap(s.range,s.r2c)),u=n.extent(o.simpleMap(l.range,l.r2c)),h=i[0].trace;if(!g.hasMarkers(h))return;var d=h.marker.maxdisplayed;if(0===d)return;var A=i.filter(function(t){return t.x>=c[0]&&t.x<=c[1]&&t.y>=u[0]&&t.y<=u[1]}),f=Math.ceil(A.length/d),C=0;a.forEach(function(t,r){var n=t[0].trace;g.hasMarkers(n)&&n.marker.maxdisplayed>0&&r<e&&C++});var p=Math.round(C*f/3+Math.floor(C/3)*f/7.1);i.forEach(function(t){delete t.vis}),A.forEach(function(t,e){0===Math.round((e+p)%f)&&(t.vis=!0)})}(0,e,r,u,d);var p=!!f&&f.duration>0;function I(t){return p?t.transition():t}var v=r.xaxis,m=r.yaxis,y=u[0].trace,b=y.line,x=n.select(A),_=a(x,"g","errorbars"),w=a(x,"g","lines"),k=a(x,"g","points"),T=a(x,"g","text");if(i.getComponentMethod("errorbars","plot")(t,_,r,f),!0===y.visible){var M,E;I(x).style("opacity",y.opacity);var O=y.fill.charAt(y.fill.length-1);"x"!==O&&"y"!==O&&(O=""),u[0][r.isRangePlot?"nodeRangePlot3":"node3"]=x;var S,R,D="",L=[],P=y._prevtrace;P&&(D=P._prevRevpath||"",E=P._nextFill,L=P._polygons);var N,z,F,B,j,V,G,U="",Z="",H=[],W=o.noop;if(M=y._ownFill,g.hasLines(y)||"none"!==y.fill){for(E&&E.datum(u),-1!==["hv","vh","hvh","vhv"].indexOf(b.shape)?(N=l.steps(b.shape),z=l.steps(b.shape.split("").reverse().join(""))):N=z="spline"===b.shape?function(t){var e=t[t.length-1];return t.length>1&&t[0][0]===e[0]&&t[0][1]===e[1]?l.smoothclosed(t.slice(1),b.smoothing):l.smoothopen(t,b.smoothing)}:function(t){return"M"+t.join("L")},F=function(t){return z(t.reverse())},H=c(u,{xaxis:v,yaxis:m,connectGaps:y.connectgaps,baseTolerance:Math.max(b.width||1,3)/4,shape:b.shape,simplify:b.simplify,fill:y.fill}),G=y._polygons=new Array(H.length),C=0;C<H.length;C++)y._polygons[C]=h(H[C]);H.length&&(B=H[0][0],V=(j=H[H.length-1])[j.length-1]),W=function(t){return function(e){if(S=N(e),R=F(e),U?O?(U+="L"+S.substr(1),Z=R+"L"+Z.substr(1)):(U+="Z"+S,Z=R+"Z"+Z):(U=S,Z=R),g.hasLines(y)&&e.length>1){var r=n.select(this);if(r.datum(u),t)I(r.style("opacity",0).attr("d",S).call(l.lineGroupStyle)).style("opacity",1);else{var i=I(r);i.attr("d",S),l.singleLineStyle(u,i)}}}}}var Y=w.selectAll(".js-line").data(H);I(Y.exit()).style("opacity",0).remove(),Y.each(W(!1)),Y.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(l.lineGroupStyle).each(W(!0)),l.setClipUrl(Y,r.layerClipId,t),H.length?(M?(M.datum(u),B&&V&&(O?("y"===O?B[1]=V[1]=m.c2p(0,!0):"x"===O&&(B[0]=V[0]=v.c2p(0,!0)),I(M).attr("d","M"+V+"L"+B+"L"+U.substr(1)).call(l.singleFillStyle)):I(M).attr("d",U+"Z").call(l.singleFillStyle))):E&&("tonext"===y.fill.substr(0,6)&&U&&D?("tonext"===y.fill?I(E).attr("d",U+"Z"+D+"Z").call(l.singleFillStyle):I(E).attr("d",U+"L"+D.substr(1)+"Z").call(l.singleFillStyle),y._polygons=y._polygons.concat(L)):(q(E),y._polygons=null)),y._prevRevpath=Z,y._prevPolygons=G):(M?q(M):E&&q(E),y._polygons=y._prevRevpath=y._prevPolygons=null),k.datum(u),T.datum(u),function(e,i,o){var a,c=o[0].trace,u=g.hasMarkers(c),h=g.hasText(c),d=tt(c),A=et,f=et;if(u||h){var C=s,y=c.stackgroup,b=y&&"infer zero"===t._fullLayout._scatterStackOpts[v._id+m._id][y].stackgaps;c.marker.maxdisplayed||c._needsCull?C=b?K:Q:y&&!b&&(C=J),u&&(A=C),h&&(f=C)}var x,_=(a=e.selectAll("path.point").data(A,d)).enter().append("path").classed("point",!0);p&&_.call(l.pointStyle,c,t).call(l.translatePoints,v,m).style("opacity",0).transition().style("opacity",1),a.order(),u&&(x=l.makePointStyleFns(c)),a.each(function(e){var i=n.select(this),o=I(i);l.translatePoint(e,o,v,m)?(l.singlePointStyle(e,o,c,x,t),r.layerClipId&&l.hideOutsideRangePoint(e,o,v,m,c.xcalendar,c.ycalendar),c.customdata&&i.classed("plotly-customdata",null!==e.data&&void 0!==e.data)):o.remove()}),p?a.exit().transition().style("opacity",0).remove():a.exit().remove(),(a=i.selectAll("g").data(f,d)).enter().append("g").classed("textpoint",!0).append("text"),a.order(),a.each(function(t){var e=n.select(this),i=I(e.select("text"));l.translatePoint(t,i,v,m)?r.layerClipId&&l.hideOutsideRangePoint(t,e,v,m,c.xcalendar,c.ycalendar):e.remove()}),a.selectAll("text").call(l.textPointStyle,c,t).each(function(t){var e=v.c2p(t.x),r=m.c2p(t.y);n.select(this).selectAll("tspan.line").each(function(){I(n.select(this)).attr({x:e,y:r})})}),a.exit().remove()}(k,T,u);var X=!1===y.cliponaxis?null:r.layerClipId;l.setClipUrl(k,X,t),l.setClipUrl(T,X,t)}function q(t){I(t).attr("d","M0,0Z")}function Q(t){return t.filter(function(t){return!t.gap&&t.vis})}function K(t){return t.filter(function(t){return t.vis})}function J(t){return t.filter(function(t){return!t.gap})}function $(t){return t.id}function tt(t){if(t.ids)return $}function et(){return!1}}e.exports=function(t,e,r,i,o,g){var c,h,A=!o,f=!!o&&o.duration>0,C=u(t,e,r);((c=i.selectAll("g.trace").data(C,function(t){return t[0].trace.uid})).enter().append("g").attr("class",function(t){return"trace scatter trace"+t[0].trace.uid}).style("stroke-miterlimit",2),c.order(),function(t,e,r){e.each(function(e){var i=a(n.select(this),"g","fills");l.setClipUrl(i,r.layerClipId,t);var o=e[0].trace,g=[];o._ownfill&&g.push("_ownFill"),o._nexttrace&&g.push("_nextFill");var c=i.selectAll("g").data(g,s);c.enter().append("g"),c.exit().each(function(t){o[t]=null}).remove(),c.order().each(function(t){o[t]=a(n.select(this),"path","js-fill")})})}(t,c,e),f)?(g&&(h=g()),n.transition().duration(o.duration).ease(o.easing).each("end",function(){h&&h()}).each("interrupt",function(){h&&h()}).each(function(){i.selectAll("g.trace").each(function(r,n){d(t,n,e,r,C,this,o)})})):c.each(function(r,n){d(t,n,e,r,C,this,o)});A&&c.exit().remove(),i.selectAll("path:not([d])").remove()}},{"../../components/drawing":325,"../../lib":426,"../../lib/polygon":438,"../../registry":524,"./line_points":601,"./link_traces":603,"./subtypes":611,d3:74}],608:[function(t,e,r){"use strict";var n=t("./subtypes");e.exports=function(t,e){var r,i,o,a,s=t.cd,l=t.xaxis,g=t.yaxis,c=[],u=s[0].trace;if(!n.hasMarkers(u)&&!n.hasText(u))return[];if(!1===e)for(r=0;r<s.length;r++)s[r].selected=0;else for(r=0;r<s.length;r++)i=s[r],o=l.c2p(i.x),a=g.c2p(i.y),null!==i.i&&e.contains([o,a],!1,r,t)?(c.push({pointNumber:i.i,x:l.c2d(i.x),y:g.c2d(i.y)}),i.selected=1):i.selected=0;return c}},{"./subtypes":611}],609:[function(t,e,r){"use strict";var n=["orientation","groupnorm","stackgaps"];e.exports=function(t,e,r,i){var o=r._scatterStackOpts,a=i("stackgroup");if(a){var s=e.xaxis+e.yaxis,l=o[s];l||(l=o[s]={});var g=l[a],c=!1;g?g.traces.push(e):(g=l[a]={traceIndices:[],traces:[e]},c=!0);for(var u={orientation:e.x&&!e.y?"h":"v"},h=0;h<n.length;h++){var d=n[h],A=d+"Found";if(!g[A]){var f=void 0!==t[d],C="orientation"===d;if((f||c)&&(g[d]=i(d,u[d]),C&&(g.fillDflt="h"===g[d]?"tonextx":"tonexty"),f&&(g[A]=!0,!c&&(delete g.traces[0][d],C))))for(var p=0;p<g.traces.length-1;p++){var I=g.traces[p];I._input.fill!==I.fill&&(I.fill=g.fillDflt)}}}return g}}},{}],610:[function(t,e,r){"use strict";var n=t("d3"),i=t("../../components/drawing"),o=t("../../registry");function a(t,e,r){i.pointStyle(t.selectAll("path.point"),e,r)}function s(t,e,r){i.textPointStyle(t.selectAll("text"),e,r)}e.exports={style:function(t){var e=n.select(t).selectAll("g.trace.scatter");e.style("opacity",function(t){return t[0].trace.opacity}),e.selectAll("g.points").each(function(e){a(n.select(this),e.trace||e[0].trace,t)}),e.selectAll("g.text").each(function(e){s(n.select(this),e.trace||e[0].trace,t)}),e.selectAll("g.trace path.js-line").call(i.lineGroupStyle),e.selectAll("g.trace path.js-fill").call(i.fillGroupStyle),o.getComponentMethod("errorbars","style")(e)},stylePoints:a,styleText:s,styleOnSelect:function(t,e,r){var n=e[0].trace;n.selectedpoints?(i.selectedPointStyle(r.selectAll("path.point"),n),i.selectedTextStyle(r.selectAll("text"),n)):(a(r,n,t),s(r,n,t))}}},{"../../components/drawing":325,"../../registry":524,d3:74}],611:[function(t,e,r){"use strict";var n=t("../../lib");e.exports={hasLines:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("lines")},hasMarkers:function(t){return t.visible&&(t.mode&&-1!==t.mode.indexOf("markers")||"splom"===t.type)},hasText:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("text")},isBubble:function(t){return n.isPlainObject(t.marker)&&n.isArrayOrTypedArray(t.marker.size)}}},{"../../lib":426}],612:[function(t,e,r){"use strict";var n=t("../../lib");e.exports=function(t,e,r,i,o){o=o||{},i("textposition"),n.coerceFont(i,"textfont",r.font),o.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))}},{"../../lib":426}],613:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../registry");e.exports=function(t,e,r,o){var a,s=o("x"),l=o("y");if(i.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],r),s){var g=n.minRowLength(s);l?a=Math.min(g,n.minRowLength(l)):(a=g,o("y0"),o("dy"))}else{if(!l)return 0;a=n.minRowLength(l),o("x0"),o("dx")}return e._length=a,a}},{"../../lib":426,"../../registry":524}],614:[function(t,e,r){"use strict";var n=t("../scatter/attributes"),i=t("../../components/colorscale/attributes"),o=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../../plots/template_attributes").texttemplateAttrs,s=t("../../plots/attributes"),l=t("../../constants/gl3d_dashes"),g=t("../../constants/gl3d_markers"),c=t("../../lib/extend").extendFlat,u=t("../../plot_api/edit_types").overrideAll,h=n.line,d=n.marker,A=d.line,f=c({width:h.width,dash:{valType:"enumerated",values:Object.keys(l),dflt:"solid"}},i("line"));var C=e.exports=u({x:n.x,y:n.y,z:{valType:"data_array"},text:c({},n.text,{}),texttemplate:a({},{}),hovertext:c({},n.hovertext,{}),hovertemplate:o(),mode:c({},n.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:n.connectgaps,line:f,marker:c({symbol:{valType:"enumerated",values:Object.keys(g),dflt:"circle",arrayOk:!0},size:c({},d.size,{dflt:8}),sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:c({},d.opacity,{arrayOk:!1}),colorbar:d.colorbar,line:c({width:c({},A.width,{arrayOk:!1})},i("marker.line"))},i("marker")),textposition:c({},n.textposition,{dflt:"top center"}),textfont:{color:n.textfont.color,size:n.textfont.size,family:c({},n.textfont.family,{arrayOk:!1})},hoverinfo:c({},s.hoverinfo)},"calc","nested");C.x.editType=C.y.editType=C.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":311,"../../constants/gl3d_dashes":401,"../../constants/gl3d_markers":402,"../../lib/extend":419,"../../plot_api/edit_types":456,"../../plots/attributes":470,"../../plots/template_attributes":523,"../scatter/attributes":587}],615:[function(t,e,r){"use strict";var n=t("../scatter/arrays_to_calcdata"),i=t("../scatter/colorscale_calc");e.exports=function(t,e){var r=[{x:!1,y:!1,trace:e,t:{}}];return n(r,e),i(t,e),r}},{"../scatter/arrays_to_calcdata":586,"../scatter/colorscale_calc":590}],616:[function(t,e,r){"use strict";var n=t("../../registry");function i(t,e,r,i){if(!e||!e.visible)return null;for(var o=n.getComponentMethod("errorbars","makeComputeError")(e),a=new Array(t.length),s=0;s<t.length;s++){var l=o(+t[s],s);if("log"===i.type){var g=i.c2l(t[s]),c=t[s]-l[0],u=t[s]+l[1];if(a[s]=[(i.c2l(c,!0)-g)*r,(i.c2l(u,!0)-g)*r],c>0){var h=i.c2l(c);i._lowerLogErrorBound||(i._lowerLogErrorBound=h),i._lowerErrorBound=Math.min(i._lowerLogErrorBound,h)}}else a[s]=[-l[0]*r,l[1]*r]}return a}e.exports=function(t,e,r){var n=[i(t.x,t.error_x,e[0],r.xaxis),i(t.y,t.error_y,e[1],r.yaxis),i(t.z,t.error_z,e[2],r.zaxis)],o=function(t){for(var e=0;e<t.length;e++)if(t[e])return t[e].length;return 0}(n);if(0===o)return null;for(var a=new Array(o),s=0;s<o;s++){for(var l=[[0,0,0],[0,0,0]],g=0;g<3;g++)if(n[g])for(var c=0;c<2;c++)l[c][g]=n[g][s][c];a[s]=l}return a}},{"../../registry":524}],617:[function(t,e,r){"use strict";var n=t("gl-line3d"),i=t("gl-scatter3d"),o=t("gl-error3d"),a=t("gl-mesh3d"),s=t("delaunay-triangulate"),l=t("../../lib"),g=t("../../lib/str2rgbarray"),c=t("../../lib/gl_format_color").formatColor,u=t("../scatter/make_bubble_size_func"),h=t("../../constants/gl3d_dashes"),d=t("../../constants/gl3d_markers"),A=t("../../plots/cartesian/axes"),f=t("../../components/fx/helpers").appendArrayPointValue,C=t("./calc_errors");function p(t,e){this.scene=t,this.uid=e,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var I=p.prototype;function v(t){return null===t||void 0===t?0:t.indexOf("left")>-1?-1:t.indexOf("right")>-1?1:0}function m(t){return null===t||void 0===t?0:t.indexOf("top")>-1?-1:t.indexOf("bottom")>-1?1:0}function y(t,e){return e(4*t)}function b(t){return d[t]}function x(t,e,r,n,i){var o=null;if(l.isArrayOrTypedArray(t)){o=[];for(var a=0;a<e;a++)void 0===t[a]?o[a]=n:o[a]=r(t[a],i)}else o=r(t,l.identity);return o}function _(t,e){var r,n,i,o,a,s,h=[],d=t.fullSceneLayout,p=t.dataScale,I=d.xaxis,_=d.yaxis,w=d.zaxis,k=e.marker,T=e.line,M=e.x||[],E=e.y||[],O=e.z||[],S=M.length,R=e.xcalendar,D=e.ycalendar,L=e.zcalendar;for(a=0;a<S;a++)r=I.d2l(M[a],0,R)*p[0],n=_.d2l(E[a],0,D)*p[1],i=w.d2l(O[a],0,L)*p[2],h[a]=[r,n,i];if(Array.isArray(e.text))s=e.text;else if(void 0!==e.text)for(s=new Array(S),a=0;a<S;a++)s[a]=e.text;function P(t,e){var r=d[t];return A.tickText(r,r.d2l(e),!0).text}var N=e.texttemplate;if(N){var z=t.fullLayout._d3locale,F=Array.isArray(N),B=F?Math.min(N.length,S):S,j=F?function(t){return N[t]}:function(){return N};for(s=new Array(B),a=0;a<B;a++){var V={x:M[a],y:E[a],z:O[a]},G={xLabel:P("xaxis",M[a]),yLabel:P("yaxis",E[a]),zLabel:P("zaxis",O[a])},U={};f(U,e,a);var Z=e._meta||{};s[a]=l.texttemplateString(j(a),G,z,U,V,Z)}}if(o={position:h,mode:e.mode,text:s},"line"in e&&(o.lineColor=c(T,1,S),o.lineWidth=T.width,o.lineDashes=T.dash),"marker"in e){var H=u(e);o.scatterColor=c(k,1,S),o.scatterSize=x(k.size,S,y,20,H),o.scatterMarker=x(k.symbol,S,b,"●"),o.scatterLineWidth=k.line.width,o.scatterLineColor=c(k.line,1,S),o.scatterAngle=0}"textposition"in e&&(o.textOffset=function(t){var e=[0,0];if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=[0,0],t[r]&&(e[r][0]=v(t[r]),e[r][1]=m(t[r]));else e[0]=v(t),e[1]=m(t);return e}(e.textposition),o.textColor=c(e.textfont,1,S),o.textSize=x(e.textfont.size,S,l.identity,12),o.textFont=e.textfont.family,o.textAngle=0);var W=["x","y","z"];for(o.project=[!1,!1,!1],o.projectScale=[1,1,1],o.projectOpacity=[1,1,1],a=0;a<3;++a){var Y=e.projection[W[a]];(o.project[a]=Y.show)&&(o.projectOpacity[a]=Y.opacity,o.projectScale[a]=Y.scale)}o.errorBounds=C(e,p,d);var X=function(t){for(var e=[0,0,0],r=[[0,0,0],[0,0,0],[0,0,0]],n=[1,1,1],i=0;i<3;i++){var o=t[i];o&&!1!==o.copy_zstyle&&!1!==t[2].visible&&(o=t[2]),o&&o.visible&&(e[i]=o.width/2,r[i]=g(o.color),n[i]=o.thickness)}return{capSize:e,color:r,lineWidth:n}}([e.error_x,e.error_y,e.error_z]);return o.errorColor=X.color,o.errorLineWidth=X.lineWidth,o.errorCapSize=X.capSize,o.delaunayAxis=e.surfaceaxis,o.delaunayColor=g(e.surfacecolor),o}function w(t){if(Array.isArray(t)){var e=t[0];return Array.isArray(e)&&(t=e),"rgb("+t.slice(0,3).map(function(t){return Math.round(255*t)})+")"}return null}I.handlePick=function(t){if(t.object&&(t.object===this.linePlot||t.object===this.delaunayMesh||t.object===this.textMarkers||t.object===this.scatterPlot)){var e=t.index=t.data.index;return t.object.highlight&&t.object.highlight(null),this.scatterPlot&&(t.object=this.scatterPlot,this.scatterPlot.highlight(t.data)),t.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[e]||0===this.textLabels[e])&&(t.textLabel=this.textLabels[e]):t.textLabel=this.textLabels),t.traceCoordinate=[this.data.x[e],this.data.y[e],this.data.z[e]],!0}},I.update=function(t){var e,r,l,g,c=this.scene.glplot.gl,u=h.solid;this.data=t;var d=_(this.scene,t);"mode"in d&&(this.mode=d.mode),"lineDashes"in d&&d.lineDashes in h&&(u=h[d.lineDashes]),this.color=w(d.scatterColor)||w(d.lineColor),this.dataPoints=d.position,e={gl:this.scene.glplot.gl,position:d.position,color:d.lineColor,lineWidth:d.lineWidth||1,dashes:u[0],dashScale:u[1],opacity:t.opacity,connectGaps:t.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(e):(this.linePlot=n(e),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var A=t.opacity;if(t.marker&&t.marker.opacity&&(A*=t.marker.opacity),r={gl:this.scene.glplot.gl,position:d.position,color:d.scatterColor,size:d.scatterSize,glyph:d.scatterMarker,opacity:A,orthographic:!0,lineWidth:d.scatterLineWidth,lineColor:d.scatterLineColor,project:d.project,projectScale:d.projectScale,projectOpacity:d.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(r):(this.scatterPlot=i(r),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),g={gl:this.scene.glplot.gl,position:d.position,glyph:d.text,color:d.textColor,size:d.textSize,angle:d.textAngle,alignment:d.textOffset,font:d.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:t.opacity},this.textLabels=t.hovertext||t.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(g):(this.textMarkers=i(g),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),l={gl:this.scene.glplot.gl,position:d.position,color:d.errorColor,error:d.errorBounds,lineWidth:d.errorLineWidth,capSize:d.errorCapSize,opacity:t.opacity},this.errorBars?d.errorBounds?this.errorBars.update(l):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):d.errorBounds&&(this.errorBars=o(l),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),d.delaunayAxis>=0){var f=function(t,e,r){var n,i=(r+1)%3,o=(r+2)%3,a=[],l=[];for(n=0;n<t.length;++n){var g=t[n];!isNaN(g[i])&&isFinite(g[i])&&!isNaN(g[o])&&isFinite(g[o])&&(a.push([g[i],g[o]]),l.push(n))}var c=s(a);for(n=0;n<c.length;++n)for(var u=c[n],h=0;h<u.length;++h)u[h]=l[u[h]];return{positions:t,cells:c,meshColor:e}}(d.position,d.delaunayColor,d.delaunayAxis);f.opacity=t.opacity,this.delaunayMesh?this.delaunayMesh.update(f):(f.gl=c,this.delaunayMesh=a(f),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},I.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},e.exports=function(t,e){var r=new p(t,e.uid);return r.update(e),r}},{"../../components/fx/helpers":339,"../../constants/gl3d_dashes":401,"../../constants/gl3d_markers":402,"../../lib":426,"../../lib/gl_format_color":423,"../../lib/str2rgbarray":449,"../../plots/cartesian/axes":473,"../scatter/make_bubble_size_func":604,"./calc_errors":616,"delaunay-triangulate":76,"gl-error3d":164,"gl-line3d":169,"gl-mesh3d":190,"gl-scatter3d":198}],618:[function(t,e,r){"use strict";var n=t("../../registry"),i=t("../../lib"),o=t("../scatter/subtypes"),a=t("../scatter/marker_defaults"),s=t("../scatter/line_defaults"),l=t("../scatter/text_defaults"),g=t("./attributes");e.exports=function(t,e,r,c){function u(r,n){return i.coerce(t,e,g,r,n)}if(function(t,e,r,i){var o=0,a=r("x"),s=r("y"),l=r("z");n.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y","z"],i),a&&s&&l&&(o=Math.min(a.length,s.length,l.length),e._length=e._xlength=e._ylength=e._zlength=o);return o}(t,e,u,c)){u("text"),u("hovertext"),u("hovertemplate"),u("mode"),o.hasLines(e)&&(u("connectgaps"),s(t,e,r,c,u)),o.hasMarkers(e)&&a(t,e,r,c,u,{noSelect:!0}),o.hasText(e)&&(u("texttemplate"),l(t,e,c,u,{noSelect:!0}));var h=(e.line||{}).color,d=(e.marker||{}).color;u("surfaceaxis")>=0&&u("surfacecolor",h||d);for(var A=["x","y","z"],f=0;f<3;++f){var C="projection."+A[f];u(C+".show")&&(u(C+".opacity"),u(C+".scale"))}var p=n.getComponentMethod("errorbars","supplyDefaults");p(t,e,h||d||r,{axis:"z"}),p(t,e,h||d||r,{axis:"y",inherit:"z"}),p(t,e,h||d||r,{axis:"x",inherit:"z"})}else e.visible=!1}},{"../../lib":426,"../../registry":524,"../scatter/line_defaults":600,"../scatter/marker_defaults":606,"../scatter/subtypes":611,"../scatter/text_defaults":612,"./attributes":614}],619:[function(t,e,r){"use strict";e.exports={plot:t("./convert"),attributes:t("./attributes"),markerSymbols:t("../../constants/gl3d_markers"),supplyDefaults:t("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:t("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:t("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":402,"../../plots/gl3d":502,"./attributes":614,"./calc":615,"./convert":617,"./defaults":618}],620:[function(t,e,r){"use strict";var n=t("../../plots/attributes"),i=t("../scatter/attributes"),o=t("../../components/colorscale/attributes"),a=t("../../lib/extend").extendFlat,s=t("../../plot_api/edit_types").overrideAll,l=t("./constants").DASHES,g=i.line,c=i.marker,u=c.line,h=e.exports=s({x:i.x,x0:i.x0,dx:i.dx,y:i.y,y0:i.y0,dy:i.dy,text:i.text,hovertext:i.hovertext,textposition:i.textposition,textfont:i.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:g.color,width:g.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:Object.keys(l),dflt:"solid"}},marker:a({},o("marker"),{symbol:c.symbol,size:c.size,sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,opacity:c.opacity,colorbar:c.colorbar,line:a({},o("marker.line"),{width:u.width})}),connectgaps:i.connectgaps,fill:a({},i.fill,{dflt:"none"}),fillcolor:i.fillcolor,selected:{marker:i.selected.marker,textfont:i.selected.textfont},unselected:{marker:i.unselected.marker,textfont:i.unselected.textfont},opacity:n.opacity},"calc","nested");h.x.editType=h.y.editType=h.x0.editType=h.y0.editType="calc+clearAxisTypes",h.hovertemplate=i.hovertemplate,h.texttemplate=i.texttemplate},{"../../components/colorscale/attributes":311,"../../lib/extend":419,"../../plot_api/edit_types":456,"../../plots/attributes":470,"../scatter/attributes":587,"./constants":621}],621:[function(t,e,r){"use strict";e.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],622:[function(t,e,r){"use strict";var n=t("fast-isnumeric"),i=t("svg-path-sdf"),o=t("color-normalize"),a=t("../../registry"),s=t("../../lib"),l=t("../../components/drawing"),g=t("../../plots/cartesian/axis_ids"),c=t("../../lib/gl_format_color").formatColor,u=t("../scatter/subtypes"),h=t("../scatter/make_bubble_size_func"),d=t("./helpers"),A=t("./constants"),f=t("../../constants/interactions").DESELECTDIM,C={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},p=t("../../components/fx/helpers").appendArrayPointValue;function I(t,e){var r,i=t._fullLayout,o=e._length,a=e.textfont,l=e.textposition,g=Array.isArray(l)?l:[l],c=a.color,u=a.size,h=a.family,d={},A=e.texttemplate;if(A){d.text=[];var f=i._d3locale,C=Array.isArray(A),I=C?Math.min(A.length,o):o,v=C?function(t){return A[t]}:function(){return A};for(r=0;r<I;r++){var m={i:r},y=e._module.formatLabels(m,e,i),b={};p(b,e,r);var x=e._meta||{};d.text.push(s.texttemplateString(v(r),y,f,b,m,x))}}else Array.isArray(e.text)&&e.text.length<o?d.text=e.text.slice():d.text=e.text;if(Array.isArray(d.text))for(r=d.text.length;r<o;r++)d.text[r]="";for(d.opacity=e.opacity,d.font={},d.align=[],d.baseline=[],r=0;r<g.length;r++){var _=g[r].split(/\s+/);switch(_[1]){case"left":d.align.push("right");break;case"right":d.align.push("left");break;default:d.align.push(_[1])}switch(_[0]){case"top":d.baseline.push("bottom");break;case"bottom":d.baseline.push("top");break;default:d.baseline.push(_[0])}}if(Array.isArray(c))for(d.color=new Array(o),r=0;r<o;r++)d.color[r]=c[r];else d.color=c;if(s.isArrayOrTypedArray(u)||Array.isArray(h))for(d.font=new Array(o),r=0;r<o;r++){var w=d.font[r]={};w.size=s.isTypedArray(u)?u[r]:Array.isArray(u)?n(u[r])?u[r]:0:u,w.family=Array.isArray(h)?h[r]:h}else d.font={size:u,family:h};return d}function v(t){var e,r,n=t._length,i=t.marker,a={},l=s.isArrayOrTypedArray(i.symbol),g=s.isArrayOrTypedArray(i.color),u=s.isArrayOrTypedArray(i.line.color),A=s.isArrayOrTypedArray(i.opacity),f=s.isArrayOrTypedArray(i.size),C=s.isArrayOrTypedArray(i.line.width);if(l||(r=d.isOpenSymbol(i.symbol)),l||g||u||A){a.colors=new Array(n),a.borderColors=new Array(n);var p=c(i,i.opacity,n),I=c(i.line,i.opacity,n);if(!Array.isArray(I[0])){var v=I;for(I=Array(n),e=0;e<n;e++)I[e]=v}if(!Array.isArray(p[0])){var m=p;for(p=Array(n),e=0;e<n;e++)p[e]=m}for(a.colors=p,a.borderColors=I,e=0;e<n;e++){if(l){var y=i.symbol[e];r=d.isOpenSymbol(y)}r&&(I[e]=p[e].slice(),p[e]=p[e].slice(),p[e][3]=0)}a.opacity=t.opacity}else r?(a.color=o(i.color,"uint8"),a.color[3]=0,a.borderColor=o(i.color,"uint8")):(a.color=o(i.color,"uint8"),a.borderColor=o(i.line.color,"uint8")),a.opacity=t.opacity*i.opacity;if(l)for(a.markers=new Array(n),e=0;e<n;e++)a.markers[e]=M(i.symbol[e]);else a.marker=M(i.symbol);var b,x=h(t);if(f||C){var _,w=a.sizes=new Array(n),k=a.borderSizes=new Array(n),T=0;if(f){for(e=0;e<n;e++)w[e]=x(i.size[e]),T+=w[e];_=T/n}else for(b=x(i.size),e=0;e<n;e++)w[e]=b;if(C)for(e=0;e<n;e++)k[e]=i.line.width[e]/2;else for(b=i.line.width/2,e=0;e<n;e++)k[e]=b;a.sizeAvg=_}else a.size=x(i&&i.size||10),a.borderSizes=x(i.line.width);return a}function m(t,e){var r=t.marker,n={};return e?(e.marker&&e.marker.symbol?n=v(s.extendFlat({},r,e.marker)):e.marker&&(e.marker.size&&(n.size=e.marker.size/2),e.marker.color&&(n.colors=e.marker.color),void 0!==e.marker.opacity&&(n.opacity=e.marker.opacity)),n):n}function y(t,e,r){var n={};if(!r)return n;if(r.textfont){var i={opacity:1,text:e.text,texttemplate:e.texttemplate,textposition:e.textposition,textfont:s.extendFlat({},e.textfont)};r.textfont&&s.extendFlat(i.textfont,r.textfont),n=I(t,i)}return n}function b(t,e){var r={capSize:2*e.width,lineWidth:e.thickness,color:e.color};return e.copy_ystyle&&(r=t.error_y),r}var x=A.SYMBOL_SDF_SIZE,_=A.SYMBOL_SIZE,w=A.SYMBOL_STROKE,k={},T=l.symbolFuncs[0](.05*_);function M(t){if("circle"===t)return null;var e,r,n=l.symbolNumber(t),o=l.symbolFuncs[n%100],a=!!l.symbolNoDot[n%100],s=!!l.symbolNoFill[n%100],g=d.isDotSymbol(t);return k[t]?k[t]:(e=g&&!a?o(1.1*_)+T:o(_),r=i(e,{w:x,h:x,viewBox:[-_,-_,_,_],stroke:s?w:-w}),k[t]=r,r||null)}e.exports={style:function(t,e){var r,n={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0};if(!0!==e.visible)return n;if(u.hasText(e)&&(n.text=I(t,e),n.textSel=y(t,e,e.selected),n.textUnsel=y(t,e,e.unselected)),u.hasMarkers(e)&&(n.marker=v(e),n.markerSel=m(e,e.selected),n.markerUnsel=m(e,e.unselected),!e.unselected&&s.isArrayOrTypedArray(e.marker.opacity))){var i=e.marker.opacity;for(n.markerUnsel.opacity=new Array(i.length),r=0;r<i.length;r++)n.markerUnsel.opacity[r]=f*i[r]}if(u.hasLines(e)){n.line={overlay:!0,thickness:e.line.width,color:e.line.color,opacity:e.opacity};var o=(A.DASHES[e.line.dash]||[1]).slice();for(r=0;r<o.length;++r)o[r]*=e.line.width;n.line.dashes=o}return e.error_x&&e.error_x.visible&&(n.errorX=b(e,e.error_x)),e.error_y&&e.error_y.visible&&(n.errorY=b(e,e.error_y)),e.fill&&"none"!==e.fill&&(n.fill={closed:!0,fill:e.fillcolor,thickness:0}),n},markerStyle:v,markerSelection:m,linePositions:function(t,e,r){var n,i,o=r.length,a=o/2;if(u.hasLines(e)&&a)if("hv"===e.line.shape){for(n=[],i=0;i<a-1;i++)isNaN(r[2*i])||isNaN(r[2*i+1])?n.push(NaN,NaN,NaN,NaN):(n.push(r[2*i],r[2*i+1]),isNaN(r[2*i+2])||isNaN(r[2*i+3])?n.push(NaN,NaN):n.push(r[2*i+2],r[2*i+1]));n.push(r[o-2],r[o-1])}else if("hvh"===e.line.shape){for(n=[],i=0;i<a-1;i++)if(isNaN(r[2*i])||isNaN(r[2*i+1])||isNaN(r[2*i+2])||isNaN(r[2*i+3]))isNaN(r[2*i])||isNaN(r[2*i+1])?n.push(NaN,NaN):n.push(r[2*i],r[2*i+1]),n.push(NaN,NaN);else{var s=(r[2*i]+r[2*i+2])/2;n.push(r[2*i],r[2*i+1],s,r[2*i+1],s,r[2*i+3])}n.push(r[o-2],r[o-1])}else if("vhv"===e.line.shape){for(n=[],i=0;i<a-1;i++)if(isNaN(r[2*i])||isNaN(r[2*i+1])||isNaN(r[2*i+2])||isNaN(r[2*i+3]))isNaN(r[2*i])||isNaN(r[2*i+1])?n.push(NaN,NaN):n.push(r[2*i],r[2*i+1]),n.push(NaN,NaN);else{var l=(r[2*i+1]+r[2*i+3])/2;n.push(r[2*i],r[2*i+1],r[2*i],l,r[2*i+2],l)}n.push(r[o-2],r[o-1])}else if("vh"===e.line.shape){for(n=[],i=0;i<a-1;i++)isNaN(r[2*i])||isNaN(r[2*i+1])?n.push(NaN,NaN,NaN,NaN):(n.push(r[2*i],r[2*i+1]),isNaN(r[2*i+2])||isNaN(r[2*i+3])?n.push(NaN,NaN):n.push(r[2*i],r[2*i+3]));n.push(r[o-2],r[o-1])}else n=r;var g=!1;for(i=0;i<n.length;i++)if(isNaN(n[i])){g=!0;break}var c=g||n.length>A.TOO_MANY_POINTS?"rect":u.hasMarkers(e)?"rect":"round";if(g&&e.connectgaps){var h=n[0],d=n[1];for(i=0;i<n.length;i+=2)isNaN(n[i])||isNaN(n[i+1])?(n[i]=h,n[i+1]=d):(h=n[i],d=n[i+1])}return{join:c,positions:n}},errorBarPositions:function(t,e,r,i,o){var s=a.getComponentMethod("errorbars","makeComputeError"),l=g.getFromId(t,e.xaxis),c=g.getFromId(t,e.yaxis),u=r.length/2,h={};function d(t,i){var o=i._id.charAt(0),a=e["error_"+o];if(a&&a.visible&&("linear"===i.type||"log"===i.type)){for(var l=s(a),g={x:0,y:1}[o],c={x:[0,1,2,3],y:[2,3,0,1]}[o],d=new Float64Array(4*u),A=1/0,f=-1/0,C=0,p=0;C<u;C++,p+=4){var I=t[C];if(n(I)){var v=r[2*C+g],m=l(I,C),y=m[0],b=m[1];if(n(y)&&n(b)){var x=I-y,_=I+b;d[p+c[0]]=v-i.c2l(x),d[p+c[1]]=i.c2l(_)-v,d[p+c[2]]=0,d[p+c[3]]=0,A=Math.min(A,I-y),f=Math.max(f,I+b)}}}h[o]={positions:r,errors:d,_bnds:[A,f]}}}return d(i,l),d(o,c),h},textPosition:function(t,e,r,n){var i,o=e._length,a={};if(u.hasMarkers(e)){var s=r.font,l=r.align,g=r.baseline;for(a.offset=new Array(o),i=0;i<o;i++){var c=n.sizes?n.sizes[i]:n.size,h=Array.isArray(s)?s[i].size:s.size,d=Array.isArray(l)?l.length>1?l[i]:l[0]:l,A=Array.isArray(g)?g.length>1?g[i]:g[0]:g,f=C[d],p=C[A],I=c?c/.8+1:0,v=-p*I-.5*p;a.offset[i]=[f*I/h,v/h]}}return a}}},{"../../components/drawing":325,"../../components/fx/helpers":339,"../../constants/interactions":403,"../../lib":426,"../../lib/gl_format_color":423,"../../plots/cartesian/axis_ids":476,"../../registry":524,"../scatter/make_bubble_size_func":604,"../scatter/subtypes":611,"./constants":621,"./helpers":623,"color-normalize":55,"fast-isnumeric":145,"svg-path-sdf":692}],623:[function(t,e,r){"use strict";var n=t("./constants");r.isOpenSymbol=function(t){return"string"==typeof t?n.OPEN_RE.test(t):t%200>100},r.isDotSymbol=function(t){return"string"==typeof t?n.DOT_RE.test(t):t>200}},{"./constants":621}],624:[function(t,e,r){"use strict";var n=t("../../registry"),i=t("../../lib"),o=t("../scatter/get_trace_color");function a(t,e,r,a){var s=t.xa,l=t.ya,g=t.distance,c=t.dxy,u=t.index,h={pointNumber:u,x:e[u],y:r[u]};h.tx=Array.isArray(a.text)?a.text[u]:a.text,h.htx=Array.isArray(a.hovertext)?a.hovertext[u]:a.hovertext,h.data=Array.isArray(a.customdata)?a.customdata[u]:a.customdata,h.tp=Array.isArray(a.textposition)?a.textposition[u]:a.textposition;var d=a.textfont;d&&(h.ts=i.isArrayOrTypedArray(d.size)?d.size[u]:d.size,h.tc=Array.isArray(d.color)?d.color[u]:d.color,h.tf=Array.isArray(d.family)?d.family[u]:d.family);var A=a.marker;A&&(h.ms=i.isArrayOrTypedArray(A.size)?A.size[u]:A.size,h.mo=i.isArrayOrTypedArray(A.opacity)?A.opacity[u]:A.opacity,h.mx=i.isArrayOrTypedArray(A.symbol)?A.symbol[u]:A.symbol,h.mc=i.isArrayOrTypedArray(A.color)?A.color[u]:A.color);var f=A&&A.line;f&&(h.mlc=Array.isArray(f.color)?f.color[u]:f.color,h.mlw=i.isArrayOrTypedArray(f.width)?f.width[u]:f.width);var C=A&&A.gradient;C&&"none"!==C.type&&(h.mgt=Array.isArray(C.type)?C.type[u]:C.type,h.mgc=Array.isArray(C.color)?C.color[u]:C.color);var p=s.c2p(h.x,!0),I=l.c2p(h.y,!0),v=h.mrc||1,m=a.hoverlabel;m&&(h.hbg=Array.isArray(m.bgcolor)?m.bgcolor[u]:m.bgcolor,h.hbc=Array.isArray(m.bordercolor)?m.bordercolor[u]:m.bordercolor,h.hts=i.isArrayOrTypedArray(m.font.size)?m.font.size[u]:m.font.size,h.htc=Array.isArray(m.font.color)?m.font.color[u]:m.font.color,h.htf=Array.isArray(m.font.family)?m.font.family[u]:m.font.family,h.hnl=i.isArrayOrTypedArray(m.namelength)?m.namelength[u]:m.namelength);var y=a.hoverinfo;y&&(h.hi=Array.isArray(y)?y[u]:y);var b=a.hovertemplate;b&&(h.ht=Array.isArray(b)?b[u]:b);var x={};x[t.index]=h;var _=i.extendFlat({},t,{color:o(a,h),x0:p-v,x1:p+v,xLabelVal:h.x,y0:I-v,y1:I+v,yLabelVal:h.y,cd:x,distance:g,spikeDistance:c,hovertemplate:h.ht});return h.htx?_.text=h.htx:h.tx?_.text=h.tx:a.text&&(_.text=a.text),i.fillText(h,a,_),n.getComponentMethod("errorbars","hoverInfo")(h,a,_),_}e.exports={hoverPoints:function(t,e,r,n){var i,o,s,l,g,c,u,h,d,A=t.cd,f=A[0].t,C=A[0].trace,p=t.xa,I=t.ya,v=f.x,m=f.y,y=p.c2p(e),b=I.c2p(r),x=t.distance;if(f.tree){var _=p.p2c(y-x),w=p.p2c(y+x),k=I.p2c(b-x),T=I.p2c(b+x);i="x"===n?f.tree.range(Math.min(_,w),Math.min(I._rl[0],I._rl[1]),Math.max(_,w),Math.max(I._rl[0],I._rl[1])):f.tree.range(Math.min(_,w),Math.min(k,T),Math.max(_,w),Math.max(k,T))}else i=f.ids;var M=x;if("x"===n)for(g=0;g<i.length;g++)s=v[i[g]],(c=Math.abs(p.c2p(s)-y))<M&&(M=c,u=I.c2p(m[i[g]])-b,d=Math.sqrt(c*c+u*u),o=i[g]);else for(g=i.length-1;g>-1;g--)s=v[i[g]],l=m[i[g]],c=p.c2p(s)-y,u=I.c2p(l)-b,(h=Math.sqrt(c*c+u*u))<M&&(M=d=h,o=i[g]);return t.index=o,t.distance=M,t.dxy=d,void 0===o?[t]:[a(t,v,m,C)]},calcHover:a}},{"../../lib":426,"../../registry":524,"../scatter/get_trace_color":597}],625:[function(t,e,r){"use strict";var n=t("../scatter/attributes"),i=t("../../components/colorscale/attributes"),o=t("../../plots/template_attributes").hovertemplateAttrs,a=t("../scattergl/attributes"),s=t("../../plots/cartesian/constants").idRegex,l=t("../../plot_api/plot_template").templatedArray,g=t("../../lib/extend").extendFlat,c=n.marker,u=c.line,h=g(i("marker.line",{editTypeOverride:"calc"}),{width:g({},u.width,{editType:"calc"}),editType:"calc"}),d=g(i("marker"),{symbol:c.symbol,size:g({},c.size,{editType:"markerSize"}),sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,opacity:c.opacity,colorbar:c.colorbar,line:h,editType:"calc"});function A(t){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:s[t],editType:"plot"}}}d.color.editType=d.cmin.editType=d.cmax.editType="style",e.exports={dimensions:l("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:g({},a.text,{}),hovertext:g({},a.hovertext,{}),hovertemplate:o(),marker:d,xaxes:A("x"),yaxes:A("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:a.selected.marker,editType:"calc"},unselected:{marker:a.unselected.marker,editType:"calc"},opacity:a.opacity}},{"../../components/colorscale/attributes":311,"../../lib/extend":419,"../../plot_api/plot_template":463,"../../plots/cartesian/constants":479,"../../plots/template_attributes":523,"../scatter/attributes":587,"../scattergl/attributes":620}],626:[function(t,e,r){"use strict";var n=t("regl-line2d"),i=t("../../registry"),o=t("../../lib/prepare_regl"),a=t("../../plots/get_data").getModuleCalcData,s=t("../../plots/cartesian"),l=t("../../plots/cartesian/axis_ids").getFromId,g=t("../../plots/cartesian/axes").shouldShowZeroLine,c="splom";function u(t,e,r){for(var n=r.matrixOptions.data.length,i=e._visibleDims,o=r.viewOpts.ranges=new Array(n),a=0;a<i.length;a++){var s=i[a],g=o[a]=new Array(4),c=l(t,e._diag[s][0]);c&&(g[0]=c.r2l(c.range[0]),g[2]=c.r2l(c.range[1]));var u=l(t,e._diag[s][1]);u&&(g[1]=u.r2l(u.range[0]),g[3]=u.r2l(u.range[1]))}r.selectBatch.length||r.unselectBatch.length?r.matrix.update({ranges:o},{ranges:o}):r.matrix.update({ranges:o})}function h(t){var e=t._fullLayout,r=e._glcanvas.data()[0].regl,i=e._splomGrid;i||(i=e._splomGrid=n(r)),i.update(function(t){var e,r=t._fullLayout,n=r._size,i=[0,0,r.width,r.height],o={};function a(t,e,r,n,a,s){var l=e[t+"color"],g=e[t+"width"],c=String(l+g);c in o?o[c].data.push(NaN,NaN,r,n,a,s):o[c]={data:[r,n,a,s],join:"rect",thickness:g,color:l,viewport:i,range:i,overlay:!1}}for(e in r._splomSubplots){var s,l,c=r._plots[e],u=c.xaxis,h=c.yaxis,d=u._gridVals,A=h._gridVals,f=n.b+h.domain[0]*n.h,C=-h._m,p=-C*h.r2l(h.range[0],h.calendar);if(u.showgrid)for(e=0;e<d.length;e++)s=u._offset+u.l2p(d[e].x),a("grid",u,s,f,s,f+h._length);if(h.showgrid)for(e=0;e<A.length;e++)l=f+p+C*A[e].x,a("grid",h,u._offset,l,u._offset+u._length,l);g(t,u,h)&&(s=u._offset+u.l2p(0),a("zeroline",u,s,f,s,f+h._length)),g(t,h,u)&&(l=f+p+0,a("zeroline",h,u._offset,l,u._offset+u._length,l))}var I=[];for(e in o)I.push(o[e]);return I}(t))}e.exports={name:c,attr:s.attr,attrRegex:s.attrRegex,layoutAttributes:s.layoutAttributes,supplyLayoutDefaults:s.supplyLayoutDefaults,drawFramework:s.drawFramework,plot:function(t){var e=t._fullLayout,r=i.getModule(c),n=a(t.calcdata,r)[0];o(t,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(e._hasOnlyLargeSploms&&h(t),r.plot(t,{},n))},drag:function(t){var e=t.calcdata,r=t._fullLayout;r._hasOnlyLargeSploms&&h(t);for(var n=0;n<e.length;n++){var i=e[n][0].trace,o=r._splomScenes[i.uid];"splom"===i.type&&o&&o.matrix&&u(t,i,o)}},updateGrid:h,clean:function(t,e,r,n){var i,o={};if(n._splomScenes){for(i=0;i<t.length;i++){var a=t[i];"splom"===a.type&&(o[a.uid]=1)}for(i=0;i<r.length;i++){var l=r[i];if(!o[l.uid]){var g=n._splomScenes[l.uid];g&&g.destroy&&g.destroy(),n._splomScenes[l.uid]=null,delete n._splomScenes[l.uid]}}}0===Object.keys(n._splomScenes||{}).length&&delete n._splomScenes,n._splomGrid&&!e._hasOnlyLargeSploms&&n._hasOnlyLargeSploms&&(n._splomGrid.destroy(),n._splomGrid=null,delete n._splomGrid),s.clean(t,e,r,n)},updateFx:s.updateFx,toSVG:s.toSVG}},{"../../lib/prepare_regl":439,"../../plots/cartesian":484,"../../plots/cartesian/axes":473,"../../plots/cartesian/axis_ids":476,"../../plots/get_data":501,"../../registry":524,"regl-line2d":658}],627:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../plots/cartesian/axis_ids"),o=t("../scatter/calc").calcMarkerSize,a=t("../scatter/calc").calcAxisExpansion,s=t("../scatter/colorscale_calc"),l=t("../scattergl/convert").markerSelection,g=t("../scattergl/convert").markerStyle,c=t("./scene_update"),u=t("../../constants/numerical").BADNUM,h=t("../scattergl/constants").TOO_MANY_POINTS;e.exports=function(t,e){var r,d,A,f,C,p,I=e.dimensions,v=e._length,m={},y=m.cdata=[],b=m.data=[],x=e._visibleDims=[];function _(t,r){for(var i=t.makeCalcdata({v:r.values,vcalendar:e.calendar},"v"),o=0;o<i.length;o++)i[o]=i[o]===u?NaN:i[o];y.push(i),b.push("log"===t.type?n.simpleMap(i,t.c2l):i)}for(r=0;r<I.length;r++)if((A=I[r]).visible){if(f=i.getFromId(t,e._diag[r][0]),C=i.getFromId(t,e._diag[r][1]),f&&C&&f.type!==C.type){n.log("Skipping splom dimension "+r+" with conflicting axis types");continue}f?(_(f,A),C&&"category"===C.type&&(C._categories=f._categories.slice())):_(C,A),x.push(r)}for(s(t,e),n.extendFlat(m,g(e)),p=y.length*v>h?2*(m.sizeAvg||Math.max(m.size,3)):o(e,v),d=0;d<x.length;d++)A=I[r=x[d]],f=i.getFromId(t,e._diag[r][0])||{},C=i.getFromId(t,e._diag[r][1])||{},a(t,e,f,C,y[d],y[d],p);var w=c(t,e);return w.matrix||(w.matrix=!0),w.matrixOptions=m,w.selectedOptions=l(e,e.selected),w.unselectedOptions=l(e,e.unselected),[{x:!1,y:!1,t:{},trace:e}]}},{"../../constants/numerical":404,"../../lib":426,"../../plots/cartesian/axis_ids":476,"../scatter/calc":588,"../scatter/colorscale_calc":590,"../scattergl/constants":621,"../scattergl/convert":622,"./scene_update":634}],628:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../../plots/array_container_defaults"),o=t("./attributes"),a=t("../scatter/subtypes"),s=t("../scatter/marker_defaults"),l=t("../parcoords/merge_length"),g=t("../scattergl/helpers").isOpenSymbol;function c(t,e){function r(r,i){return n.coerce(t,e,o.dimensions,r,i)}r("label");var i=r("values");i&&i.length?r("visible"):e.visible=!1,r("axis.type"),r("axis.matches")}e.exports=function(t,e,r,u){function h(r,i){return n.coerce(t,e,o,r,i)}var d=i(t,e,{name:"dimensions",handleItemDefaults:c}),A=h("diagonal.visible"),f=h("showupperhalf"),C=h("showlowerhalf");if(l(e,d,"values")&&(A||f||C)){h("text"),h("hovertext"),h("hovertemplate"),s(t,e,r,u,h);var p=g(e.marker.symbol),I=a.isBubble(e);h("marker.line.width",p||I?1:0),function(t,e,r,n){var i,o,a=e.dimensions,s=a.length,l=e.showupperhalf,g=e.showlowerhalf,c=e.diagonal.visible,u=new Array(s),h=new Array(s);for(i=0;i<s;i++){var d=i?i+1:"";u[i]="x"+d,h[i]="y"+d}var A=n("xaxes",u),f=n("yaxes",h),C=e._diag=new Array(s);e._xaxes={},e._yaxes={};var p=[],I=[];function v(t,n,i,o){if(t){var a=t.charAt(0),s=r._splomAxes[a];if(e["_"+a+"axes"][t]=1,o.push(t),!(t in s)){var l=s[t]={};i&&(l.label=i.label||"",i.visible&&i.axis&&(i.axis.type&&(l.type=i.axis.type),i.axis.matches&&(l.matches=n)))}}}var m=!c&&!g,y=!c&&!l;for(e._axesDim={},i=0;i<s;i++){var b=a[i],x=0===i,_=i===s-1,w=x&&m||_&&y?void 0:A[i],k=x&&y||_&&m?void 0:f[i];v(w,k,b,p),v(k,w,b,I),C[i]=[w,k],e._axesDim[w]=i,e._axesDim[k]=i}for(i=0;i<p.length;i++)for(o=0;o<I.length;o++){var T=p[i]+I[o];i>o&&l?r._splomSubplots[T]=1:i<o&&g?r._splomSubplots[T]=1:i!==o||!c&&g&&l||(r._splomSubplots[T]=1)}(!g||!c&&l&&g)&&(r._splomGridDflt.xside="bottom",r._splomGridDflt.yside="left")}(0,e,u,h),n.coerceSelectionMarkerOpacity(e,h)}else e.visible=!1}},{"../../lib":426,"../../plots/array_container_defaults":469,"../parcoords/merge_length":581,"../scatter/marker_defaults":606,"../scatter/subtypes":611,"../scattergl/helpers":623,"./attributes":625}],629:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../scatter/colorscale_calc"),o=t("../scattergl/convert").markerStyle;e.exports=function(t,e){var r=e.trace,a=t._fullLayout._splomScenes[r.uid];if(a){i(t,r),n.extendFlat(a.matrixOptions,o(r));var s=n.extendFlat({},a.matrixOptions,a.viewOpts);a.matrix.update(s,null)}}},{"../../lib":426,"../scatter/colorscale_calc":590,"../scattergl/convert":622}],630:[function(t,e,r){"use strict";r.getDimIndex=function(t,e){for(var r=e._id,n={x:0,y:1}[r.charAt(0)],i=t._visibleDims,o=0;o<i.length;o++){var a=i[o];if(t._diag[a][n]===r)return o}return!1}},{}],631:[function(t,e,r){"use strict";var n=t("./helpers"),i=t("../scattergl/hover").calcHover;e.exports={hoverPoints:function(t,e,r){var o=t.cd[0].trace,a=t.scene.matrixOptions.cdata,s=t.xa,l=t.ya,g=s.c2p(e),c=l.c2p(r),u=t.distance,h=n.getDimIndex(o,s),d=n.getDimIndex(o,l);if(!1===h||!1===d)return[t];for(var A,f,C=a[h],p=a[d],I=u,v=0;v<C.length;v++){var m=C[v],y=p[v],b=s.c2p(m)-g,x=l.c2p(y)-c,_=Math.sqrt(b*b+x*x);_<I&&(I=f=_,A=v)}return t.index=A,t.distance=I,t.dxy=f,void 0===A?[t]:[i(t,C,p,o)]}}},{"../scattergl/hover":624,"./helpers":630}],632:[function(t,e,r){"use strict";var n=t("../../registry"),i=t("../../components/grid");e.exports={moduleType:"trace",name:"splom",basePlotModule:t("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:t("./attributes"),supplyDefaults:t("./defaults"),colorbar:t("../scatter/marker_colorbar"),calc:t("./calc"),plot:t("./plot"),hoverPoints:t("./hover").hoverPoints,selectPoints:t("./select"),editStyle:t("./edit_style"),meta:{}},n.register(i)},{"../../components/grid":347,"../../registry":524,"../scatter/marker_colorbar":605,"./attributes":625,"./base_plot":626,"./calc":627,"./defaults":628,"./edit_style":629,"./hover":631,"./plot":633,"./select":635}],633:[function(t,e,r){"use strict";var n=t("regl-splom"),i=t("../../lib"),o=t("../../plots/cartesian/axis_ids");function a(t,e){var r,a,s,l,g,c=t._fullLayout,u=c._size,h=e.trace,d=e.t,A=c._splomScenes[h.uid],f=A.matrixOptions,C=f.cdata,p=c._glcanvas.data()[0].regl,I=c.dragmode;if(0!==C.length){f.lower=h.showupperhalf,f.upper=h.showlowerhalf,f.diagonal=h.diagonal.visible;var v=h._visibleDims,m=C.length,y=A.viewOpts={};for(y.ranges=new Array(m),y.domains=new Array(m),g=0;g<v.length;g++){s=v[g];var b=y.ranges[g]=new Array(4),x=y.domains[g]=new Array(4);(r=o.getFromId(t,h._diag[s][0]))&&(b[0]=r._rl[0],b[2]=r._rl[1],x[0]=r.domain[0],x[2]=r.domain[1]),(a=o.getFromId(t,h._diag[s][1]))&&(b[1]=a._rl[0],b[3]=a._rl[1],x[1]=a.domain[0],x[3]=a.domain[1])}y.viewport=[u.l,u.b,u.w+u.l,u.h+u.b],!0===A.matrix&&(A.matrix=n(p));var _=c.clickmode.indexOf("select")>-1,w=!0;if("lasso"===I||"select"===I||!!h.selectedpoints||_){var k=h._length;if(h.selectedpoints){A.selectBatch=h.selectedpoints;var T=h.selectedpoints,M={};for(s=0;s<T.length;s++)M[T[s]]=!0;var E=[];for(s=0;s<k;s++)M[s]||E.push(s);A.unselectBatch=E}var O=d.xpx=new Array(m),S=d.ypx=new Array(m);for(g=0;g<v.length;g++){if(s=v[g],r=o.getFromId(t,h._diag[s][0]))for(O[g]=new Array(k),l=0;l<k;l++)O[g][l]=r.c2p(C[g][l]);if(a=o.getFromId(t,h._diag[s][1]))for(S[g]=new Array(k),l=0;l<k;l++)S[g][l]=a.c2p(C[g][l])}if(A.selectBatch.length||A.unselectBatch.length){var R=i.extendFlat({},f,A.unselectedOptions,y),D=i.extendFlat({},f,A.selectedOptions,y);A.matrix.update(R,D),w=!1}}else d.xpx=d.ypx=null;if(w){var L=i.extendFlat({},f,y);A.matrix.update(L,null)}}}e.exports=function(t,e,r){if(r.length)for(var n=0;n<r.length;n++)a(t,r[n][0])}},{"../../lib":426,"../../plots/cartesian/axis_ids":476,"regl-splom":660}],634:[function(t,e,r){"use strict";var n=t("../../lib");e.exports=function(t,e){var r=t._fullLayout,i=e.uid,o=r._splomScenes;o||(o=r._splomScenes={});var a={dirty:!0,selectBatch:[],unselectBatch:[]},s=o[e.uid];return s||((s=o[i]=n.extendFlat({},a,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){s.matrix&&s.matrix.draw&&(s.selectBatch.length||s.unselectBatch.length?s.matrix.draw(s.unselectBatch,s.selectBatch):s.matrix.draw()),s.dirty=!1},s.destroy=function(){s.matrix&&s.matrix.destroy&&s.matrix.destroy(),s.matrixOptions=null,s.selectBatch=null,s.unselectBatch=null,s=null}),s.dirty||n.extendFlat(s,a),s}},{"../../lib":426}],635:[function(t,e,r){"use strict";var n=t("../../lib"),i=t("../scatter/subtypes"),o=t("./helpers");e.exports=function(t,e){var r=t.cd,a=r[0].trace,s=r[0].t,l=t.scene,g=l.matrixOptions.cdata,c=t.xaxis,u=t.yaxis,h=[];if(!l)return h;var d=!i.hasMarkers(a)&&!i.hasText(a);if(!0!==a.visible||d)return h;var A=o.getDimIndex(a,c),f=o.getDimIndex(a,u);if(!1===A||!1===f)return h;var C=s.xpx[A],p=s.ypx[f],I=g[A],v=g[f],m=[],y=[];if(!1!==e&&!e.degenerate)for(var b=0;b<I.length;b++)e.contains([C[b],p[b]],null,b,t)?(m.push(b),h.push({pointNumber:b,x:I[b],y:v[b]})):y.push(b);var x=l.matrixOptions;return m.length||y.length?l.selectBatch.length||l.unselectBatch.length||l.matrix.update(l.unselectedOptions,n.extendFlat({},x,l.selectedOptions,l.viewOpts)):l.matrix.update(x,null),l.selectBatch=m,l.unselectBatch=y,h}},{"../../lib":426,"../scatter/subtypes":611,"./helpers":630}],636:[function(t,e,r){"use strict";r.version="1.53.0"},{}],637:[function(t,e,r){"use strict";e.exports=t("./quad")},{"./quad":639}],638:[function(t,e,r){"use strict";e.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}},{}],639:[function(t,e,r){"use strict";var n=t("binary-search-bounds"),i=t("clamp"),o=t("parse-rect"),a=t("array-bounds"),s=t("pick-by-alias"),l=t("defined"),g=t("flatten-vertex-data"),c=t("is-obj"),u=t("dtype"),h=t("math-log2"),d=1073741824;function A(t,e){for(var r=e[0],n=e[1],o=1/(e[2]-r),a=1/(e[3]-n),s=new Array(t.length),l=0,g=t.length/2;l<g;l++)s[2*l]=i((t[2*l]-r)*o,0,1),s[2*l+1]=i((t[2*l+1]-n)*a,0,1);return s}e.exports=function(t,e){e||(e={}),t=g(t,"float64"),e=s(e,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var r=l(e.maxDepth,255),i=l(e.bounds,a(t,2));i[0]===i[2]&&i[2]++,i[1]===i[3]&&i[3]++;var f,C=A(t,i),p=t.length>>>1;e.dtype||(e.dtype="array"),"string"==typeof e.dtype?f=new(u(e.dtype))(p):e.dtype&&(f=e.dtype,Array.isArray(f)&&(f.length=p));for(var I=0;I<p;++I)f[I]=I;var v=[],m=[],y=[],b=[];!function t(e,n,i,o,a,s){if(!o.length)return null;var l=v[a]||(v[a]=[]);var g=y[a]||(y[a]=[]);var c=m[a]||(m[a]=[]);var u=l.length;a++;if(a>r||s>d){for(var h=0;h<o.length;h++)l.push(o[h]),g.push(s),c.push(null,null,null,null);return u}l.push(o[0]);g.push(s);if(o.length<=1)return c.push(null,null,null,null),u;var A=.5*i;var f=e+A,p=n+A;var I=[],b=[],x=[],_=[];for(var w=1,k=o.length;w<k;w++){var T=o[w],M=C[2*T],E=C[2*T+1];M<f?E<p?I.push(T):b.push(T):E<p?x.push(T):_.push(T)}s<<=2;c.push(t(e,n,A,I,a,s),t(e,p,A,b,a,s+1),t(f,n,A,x,a,s+2),t(f,p,A,_,a,s+3));return u}(0,0,1,f,0,1);for(var x=0,_=0;_<v.length;_++){var w=v[_];if(f.set)f.set(w,x);else for(var k=0,T=w.length;k<T;k++)f[k+x]=w[k];var M=x+v[_].length;b[_]=[x,M],x=M}return f.range=function(){var e,r=[],a=arguments.length;for(;a--;)r[a]=arguments[a];if(c(r[r.length-1])){var g=r.pop();r.length||null==g.x&&null==g.l&&null==g.left||(r=[g],e={}),e=s(g,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else e={};r.length||(r=i);var u=o.apply(void 0,r),d=[Math.min(u.x,u.x+u.width),Math.min(u.y,u.y+u.height),Math.max(u.x,u.x+u.width),Math.max(u.y,u.y+u.height)],f=d[0],C=d[1],p=d[2],I=d[3],x=A([f,C,p,I],i),_=x[0],w=x[1],k=x[2],T=x[3],M=l(e.level,v.length);if(null!=e.d){var O;"number"==typeof e.d?O=[e.d,e.d]:e.d.length&&(O=e.d),M=Math.min(Math.max(Math.ceil(-h(Math.abs(O[0])/(i[2]-i[0]))),Math.ceil(-h(Math.abs(O[1])/(i[3]-i[1])))),M)}if(M=Math.min(M,v.length),e.lod)return function(t,e,r,i,o){for(var a=[],s=0;s<o;s++){var l=y[s],g=b[s][0],c=E(t,e,s),u=E(r,i,s),h=n.ge(l,c),d=n.gt(l,u,h,l.length-1);a[s]=[h+g,d+g]}return a}(_,w,k,T,M);var S=[];return function e(r,n,i,o,a,s){if(null!==a&&null!==s){var l=r+i,g=n+i;if(!(_>l||w>g||k<r||T<n||o>=M||a===s)){var c=v[o];void 0===s&&(s=c.length);for(var u=a;u<s;u++){var h=c[u],d=t[2*h],A=t[2*h+1];d>=f&&d<=p&&A>=C&&A<=I&&S.push(h)}var y=m[o],b=y[4*a+0],x=y[4*a+1],E=y[4*a+2],O=y[4*a+3],R=function(t,e){for(var r=null,n=0;null===r;)if(r=t[4*e+n],++n>t.length)return null;return r}(y,a+1),D=.5*i,L=o+1;e(r,n,D,L,b,x||E||O||R),e(r,n+D,D,L,x,E||O||R),e(r+D,n,D,L,E,O||R),e(r+D,n+D,D,L,O,R)}}}(0,0,1,0,0,1),S},f;function E(t,e,r){for(var n=1,i=.5,o=.5,a=.5,s=0;s<r;s++)n<<=2,n+=t<i?e<o?0:1:e<o?2:3,a*=.5,i+=t<i?-a:a,o+=e<o?-a:a;return n}}},{"array-bounds":6,"binary-search-bounds":32,clamp:50,defined:75,dtype:79,"flatten-vertex-data":149,"is-obj":638,"math-log2":250,"parse-rect":270,"pick-by-alias":276}],640:[function(t,e,r){arguments[4][148][0].apply(r,arguments)},{dup:148}],641:[function(t,e,r){e.exports=function(t){for(var e=t.length,r=[],o=[],s=0;s<e;++s)for(var c=t[s],u=c.length,h=u-1,d=0;d<u;h=d++){var A=c[h],f=c[d];A[0]===f[0]?o.push([A,f]):r.push([A,f])}if(0===r.length)return 0===o.length?g:(C=l(o),function(t){return C(t[0],t[1])?0:1});var C;var p=i(r),I=function(t,e){return function(r){var i=a.le(e,r[0]);if(i<0)return 1;var o=t[i];if(!o){if(!(i>0&&e[i]===r[0]))return 1;o=t[i-1]}for(var s=1;o;){var l=o.key,g=n(r,l[0],l[1]);if(l[0][0]<l[1][0])if(g<0)o=o.left;else{if(!(g>0))return 0;s=-1,o=o.right}else if(g>0)o=o.left;else{if(!(g<0))return 0;s=1,o=o.right}}return s}}(p.slabs,p.coordinates);return 0===o.length?I:function(t,e){return function(r){return t(r[0],r[1])?0:e(r)}}(l(o),I)};var n=t("robust-orientation")[3],i=t("slab-decomposition"),o=t("interval-tree-1d"),a=t("binary-search-bounds");function s(){return!0}function l(t){for(var e={},r=0;r<t.length;++r){var n=t[r],i=n[0][0],a=n[0][1],l=n[1][1],g=[Math.min(a,l),Math.max(a,l)];i in e?e[i].push(g):e[i]=[g]}var c={},u=Object.keys(e);for(r=0;r<u.length;++r){var h=e[u[r]];c[u[r]]=o(h)}return function(t){return function(e,r){var n=t[e];return!!n&&!!n.queryPoint(r,s)}}(c)}function g(t){return 1}},{"binary-search-bounds":640,"interval-tree-1d":233,"robust-orientation":669,"slab-decomposition":685}],642:[function(t,e,r){var n,i=t("./lib/build-log"),o=t("./lib/epsilon"),a=t("./lib/intersecter"),s=t("./lib/segment-chainer"),l=t("./lib/segment-selector"),g=t("./lib/geojson"),c=!1,u=o();function h(t,e,r){var i=n.segments(t),o=n.segments(e),a=r(n.combine(i,o));return n.polygon(a)}n={buildLog:function(t){return!0===t?c=i():!1===t&&(c=!1),!1!==c&&c.list},epsilon:function(t){return u.epsilon(t)},segments:function(t){var e=a(!0,u,c);return t.regions.forEach(e.addRegion),{segments:e.calculate(t.inverted),inverted:t.inverted}},combine:function(t,e){return{combined:a(!1,u,c).calculate(t.segments,t.inverted,e.segments,e.inverted),inverted1:t.inverted,inverted2:e.inverted}},selectUnion:function(t){return{segments:l.union(t.combined,c),inverted:t.inverted1||t.inverted2}},selectIntersect:function(t){return{segments:l.intersect(t.combined,c),inverted:t.inverted1&&t.inverted2}},selectDifference:function(t){return{segments:l.difference(t.combined,c),inverted:t.inverted1&&!t.inverted2}},selectDifferenceRev:function(t){return{segments:l.differenceRev(t.combined,c),inverted:!t.inverted1&&t.inverted2}},selectXor:function(t){return{segments:l.xor(t.combined,c),inverted:t.inverted1!==t.inverted2}},polygon:function(t){return{regions:s(t.segments,u,c),inverted:t.inverted}},polygonFromGeoJSON:function(t){return g.toPolygon(n,t)},polygonToGeoJSON:function(t){return g.fromPolygon(n,u,t)},union:function(t,e){return h(t,e,n.selectUnion)},intersect:function(t,e){return h(t,e,n.selectIntersect)},difference:function(t,e){return h(t,e,n.selectDifference)},differenceRev:function(t,e){return h(t,e,n.selectDifferenceRev)},xor:function(t,e){return h(t,e,n.selectXor)}},"object"==typeof window&&(window.PolyBool=n),e.exports=n},{"./lib/build-log":643,"./lib/epsilon":644,"./lib/geojson":645,"./lib/intersecter":646,"./lib/segment-chainer":648,"./lib/segment-selector":649}],643:[function(t,e,r){e.exports=function(){var t,e=0,r=!1;function n(e,r){return t.list.push({type:e,data:r?JSON.parse(JSON.stringify(r)):void 0}),t}return t={list:[],segmentId:function(){return e++},checkIntersection:function(t,e){return n("check",{seg1:t,seg2:e})},segmentChop:function(t,e){return n("div_seg",{seg:t,pt:e}),n("chop",{seg:t,pt:e})},statusRemove:function(t){return n("pop_seg",{seg:t})},segmentUpdate:function(t){return n("seg_update",{seg:t})},segmentNew:function(t,e){return n("new_seg",{seg:t,primary:e})},segmentRemove:function(t){return n("rem_seg",{seg:t})},tempStatus:function(t,e,r){return n("temp_status",{seg:t,above:e,below:r})},rewind:function(t){return n("rewind",{seg:t})},status:function(t,e,r){return n("status",{seg:t,above:e,below:r})},vert:function(e){return e===r?t:(r=e,n("vert",{x:e}))},log:function(t){return"string"!=typeof t&&(t=JSON.stringify(t,!1,"  ")),n("log",{txt:t})},reset:function(){return n("reset")},selected:function(t){return n("selected",{segs:t})},chainStart:function(t){return n("chain_start",{seg:t})},chainRemoveHead:function(t,e){return n("chain_rem_head",{index:t,pt:e})},chainRemoveTail:function(t,e){return n("chain_rem_tail",{index:t,pt:e})},chainNew:function(t,e){return n("chain_new",{pt1:t,pt2:e})},chainMatch:function(t){return n("chain_match",{index:t})},chainClose:function(t){return n("chain_close",{index:t})},chainAddHead:function(t,e){return n("chain_add_head",{index:t,pt:e})},chainAddTail:function(t,e){return n("chain_add_tail",{index:t,pt:e})},chainConnect:function(t,e){return n("chain_con",{index1:t,index2:e})},chainReverse:function(t){return n("chain_rev",{index:t})},chainJoin:function(t,e){return n("chain_join",{index1:t,index2:e})},done:function(){return n("done")}}}},{}],644:[function(t,e,r){e.exports=function(t){"number"!=typeof t&&(t=1e-10);var e={epsilon:function(e){return"number"==typeof e&&(t=e),t},pointAboveOrOnLine:function(e,r,n){var i=r[0],o=r[1],a=n[0],s=n[1],l=e[0];return(a-i)*(e[1]-o)-(s-o)*(l-i)>=-t},pointBetween:function(e,r,n){var i=e[1]-r[1],o=n[0]-r[0],a=e[0]-r[0],s=n[1]-r[1],l=a*o+i*s;return!(l<t||l-(o*o+s*s)>-t)},pointsSameX:function(e,r){return Math.abs(e[0]-r[0])<t},pointsSameY:function(e,r){return Math.abs(e[1]-r[1])<t},pointsSame:function(t,r){return e.pointsSameX(t,r)&&e.pointsSameY(t,r)},pointsCompare:function(t,r){return e.pointsSameX(t,r)?e.pointsSameY(t,r)?0:t[1]<r[1]?-1:1:t[0]<r[0]?-1:1},pointsCollinear:function(e,r,n){var i=e[0]-r[0],o=e[1]-r[1],a=r[0]-n[0],s=r[1]-n[1];return Math.abs(i*s-a*o)<t},linesIntersect:function(e,r,n,i){var o=r[0]-e[0],a=r[1]-e[1],s=i[0]-n[0],l=i[1]-n[1],g=o*l-a*s;if(Math.abs(g)<t)return!1;var c=e[0]-n[0],u=e[1]-n[1],h=(s*u-l*c)/g,d=(o*u-a*c)/g,A={alongA:0,alongB:0,pt:[e[0]+h*o,e[1]+h*a]};return A.alongA=h<=-t?-2:h<t?-1:h-1<=-t?0:h-1<t?1:2,A.alongB=d<=-t?-2:d<t?-1:d-1<=-t?0:d-1<t?1:2,A},pointInsideRegion:function(e,r){for(var n=e[0],i=e[1],o=r[r.length-1][0],a=r[r.length-1][1],s=!1,l=0;l<r.length;l++){var g=r[l][0],c=r[l][1];c-i>t!=a-i>t&&(o-g)*(i-c)/(a-c)+g-n>t&&(s=!s),o=g,a=c}return s}};return e}},{}],645:[function(t,e,r){var n={toPolygon:function(t,e){function r(e){if(e.length<=0)return t.segments({inverted:!1,regions:[]});function r(e){var r=e.slice(0,e.length-1);return t.segments({inverted:!1,regions:[r]})}for(var n=r(e[0]),i=1;i<e.length;i++)n=t.selectDifference(t.combine(n,r(e[i])));return n}if("Polygon"===e.type)return t.polygon(r(e.coordinates));if("MultiPolygon"===e.type){for(var n=t.segments({inverted:!1,regions:[]}),i=0;i<e.coordinates.length;i++)n=t.selectUnion(t.combine(n,r(e.coordinates[i])));return t.polygon(n)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,e,r){function n(t,r){return e.pointInsideRegion([.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])],r)}function i(t){return{region:t,children:[]}}r=t.polygon(t.segments(r));var o=i(null);function a(t,e){for(var r=0;r<t.children.length;r++){if(n(e,(s=t.children[r]).region))return void a(s,e)}var o=i(e);for(r=0;r<t.children.length;r++){var s;n((s=t.children[r]).region,e)&&(o.children.push(s),t.children.splice(r,1),r--)}t.children.push(o)}for(var s=0;s<r.regions.length;s++){var l=r.regions[s];l.length<3||a(o,l)}function g(t,e){for(var r=0,n=t[t.length-1][0],i=t[t.length-1][1],o=[],a=0;a<t.length;a++){var s=t[a][0],l=t[a][1];o.push([s,l]),r+=l*n-s*i,n=s,i=l}return r<0!==e&&o.reverse(),o.push([o[0][0],o[0][1]]),o}var c=[];function u(t){var e=[g(t.region,!1)];c.push(e);for(var r=0;r<t.children.length;r++)e.push(h(t.children[r]))}function h(t){for(var e=0;e<t.children.length;e++)u(t.children[e]);return g(t.region,!0)}for(s=0;s<o.children.length;s++)u(o.children[s]);return c.length<=0?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}};e.exports=n},{}],646:[function(t,e,r){var n=t("./linked-list");e.exports=function(t,e,r){function i(t,e,n){return{id:r?r.segmentId():-1,start:t,end:e,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var o=n.create();function a(t,r){o.insertBefore(t,function(n){return function(t,r,n,i,o,a){var s=e.pointsCompare(r,o);return 0!==s?s:e.pointsSame(n,a)?0:t!==i?t?1:-1:e.pointAboveOrOnLine(n,i?o:a,i?a:o)?1:-1}(t.isStart,t.pt,r,n.isStart,n.pt,n.other.pt)<0})}function s(t,e){var r=function(t,e){var r=n.node({isStart:!0,pt:t.start,seg:t,primary:e,other:null,status:null});return a(r,t.end),r}(t,e);return function(t,e,r){var i=n.node({isStart:!1,pt:e.end,seg:e,primary:r,other:t,status:null});t.other=i,a(i,t.pt)}(r,t,e),r}function l(t,e){var n=i(e,t.seg.end,t.seg);return function(t,e){r&&r.segmentChop(t.seg,e),t.other.remove(),t.seg.end=e,t.other.pt=e,a(t.other,t.pt)}(t,e),s(n,t.primary)}function g(i,a){var s=n.create();function g(t){return s.findTransition(function(r){var n,i,o,a,s,l;return n=t,i=r.ev,o=n.seg.start,a=n.seg.end,s=i.seg.start,l=i.seg.end,(e.pointsCollinear(o,s,l)?e.pointsCollinear(a,s,l)?1:e.pointAboveOrOnLine(a,s,l)?1:-1:e.pointAboveOrOnLine(o,s,l)?1:-1)>0})}function c(t,n){var i=t.seg,o=n.seg,a=i.start,s=i.end,g=o.start,c=o.end;r&&r.checkIntersection(i,o);var u=e.linesIntersect(a,s,g,c);if(!1===u){if(!e.pointsCollinear(a,s,g))return!1;if(e.pointsSame(a,c)||e.pointsSame(s,g))return!1;var h=e.pointsSame(a,g),d=e.pointsSame(s,c);if(h&&d)return n;var A=!h&&e.pointBetween(a,g,c),f=!d&&e.pointBetween(s,g,c);if(h)return f?l(n,s):l(t,c),n;A&&(d||(f?l(n,s):l(t,c)),l(n,a))}else 0===u.alongA&&(-1===u.alongB?l(t,g):0===u.alongB?l(t,u.pt):1===u.alongB&&l(t,c)),0===u.alongB&&(-1===u.alongA?l(n,a):0===u.alongA?l(n,u.pt):1===u.alongA&&l(n,s));return!1}for(var u=[];!o.isEmpty();){var h=o.getHead();if(r&&r.vert(h.pt[0]),h.isStart){r&&r.segmentNew(h.seg,h.primary);var d=g(h),A=d.before?d.before.ev:null,f=d.after?d.after.ev:null;function C(){if(A){var t=c(h,A);if(t)return t}return!!f&&c(h,f)}r&&r.tempStatus(h.seg,!!A&&A.seg,!!f&&f.seg);var p,I,v=C();if(v)t?(I=null===h.seg.myFill.below||h.seg.myFill.above!==h.seg.myFill.below)&&(v.seg.myFill.above=!v.seg.myFill.above):v.seg.otherFill=h.seg.myFill,r&&r.segmentUpdate(v.seg),h.other.remove(),h.remove();if(o.getHead()!==h){r&&r.rewind(h.seg);continue}t?(I=null===h.seg.myFill.below||h.seg.myFill.above!==h.seg.myFill.below,h.seg.myFill.below=f?f.seg.myFill.above:i,h.seg.myFill.above=I?!h.seg.myFill.below:h.seg.myFill.below):null===h.seg.otherFill&&(p=f?h.primary===f.primary?f.seg.otherFill.above:f.seg.myFill.above:h.primary?a:i,h.seg.otherFill={above:p,below:p}),r&&r.status(h.seg,!!A&&A.seg,!!f&&f.seg),h.other.status=d.insert(n.node({ev:h}))}else{var m=h.status;if(null===m)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(s.exists(m.prev)&&s.exists(m.next)&&c(m.prev.ev,m.next.ev),r&&r.statusRemove(m.ev.seg),m.remove(),!h.primary){var y=h.seg.myFill;h.seg.myFill=h.seg.otherFill,h.seg.otherFill=y}u.push(h.seg)}o.getHead().remove()}return r&&r.done(),u}return t?{addRegion:function(t){for(var n,i,o,a=t[t.length-1],l=0;l<t.length;l++){n=a,a=t[l];var g=e.pointsCompare(n,a);0!==g&&s((i=g<0?n:a,o=g<0?a:n,{id:r?r.segmentId():-1,start:i,end:o,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(t){return g(t,!1)}}:{calculate:function(t,e,r,n){return t.forEach(function(t){s(i(t.start,t.end,t),!0)}),r.forEach(function(t){s(i(t.start,t.end,t),!1)}),g(e,n)}}}},{"./linked-list":647}],647:[function(t,e,r){e.exports={create:function(){var t={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==t.root},isEmpty:function(){return null===t.root.next},getHead:function(){return t.root.next},insertBefore:function(e,r){for(var n=t.root,i=t.root.next;null!==i;){if(r(i))return e.prev=i.prev,e.next=i,i.prev.next=e,void(i.prev=e);n=i,i=i.next}n.next=e,e.prev=n,e.next=null},findTransition:function(e){for(var r=t.root,n=t.root.next;null!==n&&!e(n);)r=n,n=n.next;return{before:r===t.root?null:r,after:n,insert:function(t){return t.prev=r,t.next=n,r.next=t,null!==n&&(n.prev=t),t}}}};return t},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}}},{}],648:[function(t,e,r){e.exports=function(t,e,r){var n=[],i=[];return t.forEach(function(t){var o=t.start,a=t.end;if(e.pointsSame(o,a))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{r&&r.chainStart(t);for(var s={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},g=s,c=0;c<n.length;c++){var u=(C=n[c])[0],h=(C[1],C[C.length-1]);if(C[C.length-2],e.pointsSame(u,o)){if(_(c,!0,!0))break}else if(e.pointsSame(u,a)){if(_(c,!0,!1))break}else if(e.pointsSame(h,o)){if(_(c,!1,!0))break}else if(e.pointsSame(h,a)&&_(c,!1,!1))break}if(g===s)return n.push([o,a]),void(r&&r.chainNew(o,a));if(g===l){r&&r.chainMatch(s.index);var d=s.index,A=s.matches_pt1?a:o,f=s.matches_head,C=n[d],p=f?C[0]:C[C.length-1],I=f?C[1]:C[C.length-2],v=f?C[C.length-1]:C[0],m=f?C[C.length-2]:C[1];return e.pointsCollinear(I,p,A)&&(f?(r&&r.chainRemoveHead(s.index,A),C.shift()):(r&&r.chainRemoveTail(s.index,A),C.pop()),p=I),e.pointsSame(v,A)?(n.splice(d,1),e.pointsCollinear(m,v,p)&&(f?(r&&r.chainRemoveTail(s.index,p),C.pop()):(r&&r.chainRemoveHead(s.index,p),C.shift())),r&&r.chainClose(s.index),void i.push(C)):void(f?(r&&r.chainAddHead(s.index,A),C.unshift(A)):(r&&r.chainAddTail(s.index,A),C.push(A)))}var y=s.index,b=l.index;r&&r.chainConnect(y,b);var x=n[y].length<n[b].length;s.matches_head?l.matches_head?x?(w(y),k(y,b)):(w(b),k(b,y)):k(b,y):l.matches_head?k(y,b):x?(w(y),k(b,y)):(w(b),k(y,b))}function _(t,e,r){return g.index=t,g.matches_head=e,g.matches_pt1=r,g===s?(g=l,!1):(g=null,!0)}function w(t){r&&r.chainReverse(t),n[t].reverse()}function k(t,i){var o=n[t],a=n[i],s=o[o.length-1],l=o[o.length-2],g=a[0],c=a[1];e.pointsCollinear(l,s,g)&&(r&&r.chainRemoveTail(t,s),o.pop(),s=l),e.pointsCollinear(s,g,c)&&(r&&r.chainRemoveHead(i,g),a.shift()),r&&r.chainJoin(t,i),n[t]=o.concat(a),n.splice(i,1)}}),i}},{}],649:[function(t,e,r){function n(t,e,r){var n=[];return t.forEach(function(t){var i=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==e[i]&&n.push({id:r?r.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===e[i],below:2===e[i]},otherFill:null})}),r&&r.selected(n),n}var i={union:function(t,e){return n(t,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],e)},intersect:function(t,e){return n(t,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],e)},difference:function(t,e){return n(t,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],e)},differenceRev:function(t,e){return n(t,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],e)},xor:function(t,e){return n(t,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],e)}};e.exports=i},{}],650:[function(t,e,r){"use strict";var n=new Float64Array(4),i=new Float64Array(4),o=new Float64Array(4);e.exports=function(t,e,r,a,s){n.length<a.length&&(n=new Float64Array(a.length),i=new Float64Array(a.length),o=new Float64Array(a.length));for(var l=0;l<a.length;++l)n[l]=t[l]-a[l],i[l]=e[l]-t[l],o[l]=r[l]-t[l];var g=0,c=0,u=0,h=0,d=0,A=0;for(l=0;l<a.length;++l){var f=i[l],C=o[l],p=n[l];g+=f*f,c+=f*C,u+=C*C,h+=p*f,d+=p*C,A+=p*p}var I,v,m,y,b,x=Math.abs(g*u-c*c),_=c*d-u*h,w=c*h-g*d;if(_+w<=x)if(_<0)w<0&&h<0?(w=0,-h>=g?(_=1,I=g+2*h+A):I=h*(_=-h/g)+A):(_=0,d>=0?(w=0,I=A):-d>=u?(w=1,I=u+2*d+A):I=d*(w=-d/u)+A);else if(w<0)w=0,h>=0?(_=0,I=A):-h>=g?(_=1,I=g+2*h+A):I=h*(_=-h/g)+A;else{var k=1/x;I=(_*=k)*(g*_+c*(w*=k)+2*h)+w*(c*_+u*w+2*d)+A}else _<0?(m=u+d)>(v=c+h)?(y=m-v)>=(b=g-2*c+u)?(_=1,w=0,I=g+2*h+A):I=(_=y/b)*(g*_+c*(w=1-_)+2*h)+w*(c*_+u*w+2*d)+A:(_=0,m<=0?(w=1,I=u+2*d+A):d>=0?(w=0,I=A):I=d*(w=-d/u)+A):w<0?(m=g+h)>(v=c+d)?(y=m-v)>=(b=g-2*c+u)?(w=1,_=0,I=u+2*d+A):I=(_=1-(w=y/b))*(g*_+c*w+2*h)+w*(c*_+u*w+2*d)+A:(w=0,m<=0?(_=1,I=g+2*h+A):h>=0?(_=0,I=A):I=h*(_=-h/g)+A):(y=u+d-c-h)<=0?(_=0,w=1,I=u+2*d+A):y>=(b=g-2*c+u)?(_=1,w=0,I=g+2*h+A):I=(_=y/b)*(g*_+c*(w=1-_)+2*h)+w*(c*_+u*w+2*d)+A;var T=1-_-w;for(l=0;l<a.length;++l)s[l]=T*t[l]+_*e[l]+w*r[l];return I<0?0:I}},{}],651:[function(t,e,r){var n,i,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(t){n=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var g,c=[],u=!1,h=-1;function d(){u&&g&&(u=!1,g.length?c=g.concat(c):h=-1,c.length&&A())}function A(){if(!u){var t=l(d);u=!0;for(var e=c.length;e;){for(g=c,c=[];++h<e;)g&&g[h].run();h=-1,e=c.length}g=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function C(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new f(t,e)),1!==c.length||u||l(A)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=C,o.addListener=C,o.once=C,o.off=C,o.removeListener=C,o.removeAllListeners=C,o.emit=C,o.prependListener=C,o.prependOnceListener=C,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],652:[function(t,e,r){e.exports=t("gl-quat/slerp")},{"gl-quat/slerp":194}],653:[function(t,e,r){(function(r){for(var n=t("performance-now"),i="undefined"==typeof window?r:window,o=["moz","webkit"],a="AnimationFrame",s=i["request"+a],l=i["cancel"+a]||i["cancelRequest"+a],g=0;!s&&g<o.length;g++)s=i[o[g]+"Request"+a],l=i[o[g]+"Cancel"+a]||i[o[g]+"CancelRequest"+a];if(!s||!l){var c=0,u=0,h=[];s=function(t){if(0===h.length){var e=n(),r=Math.max(0,1e3/60-(e-c));c=r+e,setTimeout(function(){var t=h.slice(0);h.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(c)}catch(t){setTimeout(function(){throw t},0)}},Math.round(r))}return h.push({handle:++u,callback:t,cancelled:!1}),u},l=function(t){for(var e=0;e<h.length;e++)h[e].handle===t&&(h[e].cancelled=!0)}}e.exports=function(t){return s.call(i,t)},e.exports.cancel=function(){l.apply(i,arguments)},e.exports.polyfill=function(t){t||(t=i),t.requestAnimationFrame=s,t.cancelAnimationFrame=l}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":273}],654:[function(t,e,r){"use strict";var n=t("big-rat/add");e.exports=function(t,e){for(var r=t.length,i=new Array(r),o=0;o<r;++o)i[o]=n(t[o],e[o]);return i}},{"big-rat/add":16}],655:[function(t,e,r){"use strict";e.exports=function(t){for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=n(t[r]);return e};var n=t("big-rat")},{"big-rat":19}],656:[function(t,e,r){"use strict";var n=t("big-rat"),i=t("big-rat/mul");e.exports=function(t,e){for(var r=n(e),o=t.length,a=new Array(o),s=0;s<o;++s)a[s]=i(t[s],r);return a}},{"big-rat":19,"big-rat/mul":28}],657:[function(t,e,r){"use strict";var n=t("big-rat/sub");e.exports=function(t,e){for(var r=t.length,i=new Array(r),o=0;o<r;++o)i[o]=n(t[o],e[o]);return i}},{"big-rat/sub":30}],658:[function(t,e,r){"use strict";var n=t("color-normalize"),i=t("array-bounds"),o=t("object-assign"),a=t("glslify"),s=t("pick-by-alias"),l=t("flatten-vertex-data"),g=t("earcut"),c=t("array-normalize"),u=t("to-float32"),h=u.float32,d=u.fract32,A=t("es6-weak-map"),f=t("parse-rect");function C(t,e){if(!(this instanceof C))return new C(t,e);if("function"==typeof t?(e||(e={}),e.regl=t):e=t,e.length&&(e.positions=e),!(t=e.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=t._gl,this.regl=t,this.passes=[],this.shaders=C.shaders.has(t)?C.shaders.get(t):C.shaders.set(t,C.createShaders(t)).get(t),this.update(e)}e.exports=C,C.dashMult=2,C.maxPatternLength=256,C.precisionThreshold=3e6,C.maxPoints=1e4,C.maxLines=2048,C.shaders=new A,C.createShaders=function(t){var e,r=t.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),n={primitive:"triangle strip",instances:t.prop("count"),count:4,offset:0,uniforms:{miterMode:function(t,e){return"round"===e.join?2:1},miterLimit:t.prop("miterLimit"),scale:t.prop("scale"),scaleFract:t.prop("scaleFract"),translateFract:t.prop("translateFract"),translate:t.prop("translate"),thickness:t.prop("thickness"),dashPattern:t.prop("dashTexture"),opacity:t.prop("opacity"),pixelRatio:t.context("pixelRatio"),id:t.prop("id"),dashSize:t.prop("dashLength"),viewport:function(t,e){return[e.viewport.x,e.viewport.y,t.viewportWidth,t.viewportHeight]},depth:t.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(t,e){return!e.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:t.prop("viewport")},viewport:t.prop("viewport")},i=t(o({vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:r,divisor:0,stride:8,offset:0},lineTop:{buffer:r,divisor:0,stride:8,offset:4},aCoord:{buffer:t.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:t.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:t.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:t.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:t.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},n));try{e=t(o({cull:{enable:!0,face:"back"},vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:a(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:r,divisor:0,stride:8,offset:0},lineTop:{buffer:r,divisor:0,stride:8,offset:4},aColor:{buffer:t.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:t.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:t.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:t.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:t.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:t.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},n))}catch(t){e=i}return{fill:t({primitive:"triangle",elements:function(t,e){return e.triangles},offset:0,vert:a(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:a(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:t.prop("scale"),color:t.prop("fill"),scaleFract:t.prop("scaleFract"),translateFract:t.prop("translateFract"),translate:t.prop("translate"),opacity:t.prop("opacity"),pixelRatio:t.context("pixelRatio"),id:t.prop("id"),viewport:function(t,e){return[e.viewport.x,e.viewport.y,t.viewportWidth,t.viewportHeight]}},attributes:{position:{buffer:t.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:t.prop("positionFractBuffer"),stride:8,offset:8}},blend:n.blend,depth:{enable:!1},scissor:n.scissor,stencil:n.stencil,viewport:n.viewport}),rect:i,miter:e}},C.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},C.prototype.render=function(){for(var t,e=[],r=arguments.length;r--;)e[r]=arguments[r];e.length&&(t=this).update.apply(t,e),this.draw()},C.prototype.draw=function(){for(var t=this,e=[],r=arguments.length;r--;)e[r]=arguments[r];return(e.length?e:this.passes).forEach(function(e,r){var n;if(e&&Array.isArray(e))return(n=t).draw.apply(n,e);"number"==typeof e&&(e=t.passes[e]),e&&e.count>1&&e.opacity&&(t.regl._refresh(),e.fill&&e.triangles&&e.triangles.length>2&&t.shaders.fill(e),e.thickness&&(e.scale[0]*e.viewport.width>C.precisionThreshold||e.scale[1]*e.viewport.height>C.precisionThreshold?t.shaders.rect(e):"rect"===e.join||!e.join&&(e.thickness<=2||e.count>=C.maxPoints)?t.shaders.rect(e):t.shaders.miter(e)))}),this},C.prototype.update=function(t){var e=this;if(t){null!=t.length?"number"==typeof t[0]&&(t=[{positions:t}]):Array.isArray(t)||(t=[t]);var r=this.regl,a=this.gl;if(t.forEach(function(t,u){var A=e.passes[u];if(void 0!==t)if(null!==t){if("number"==typeof t[0]&&(t={positions:t}),t=s(t,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"}),A||(e.passes[u]=A={id:u,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:r.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:r.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:r.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:r.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},t=o({},C.defaults,t)),null!=t.thickness&&(A.thickness=parseFloat(t.thickness)),null!=t.opacity&&(A.opacity=parseFloat(t.opacity)),null!=t.miterLimit&&(A.miterLimit=parseFloat(t.miterLimit)),null!=t.overlay&&(A.overlay=!!t.overlay,u<C.maxLines&&(A.depth=2*(C.maxLines-1-u%C.maxLines)/C.maxLines-1)),null!=t.join&&(A.join=t.join),null!=t.hole&&(A.hole=t.hole),null!=t.fill&&(A.fill=t.fill?n(t.fill,"uint8"):null),null!=t.viewport&&(A.viewport=f(t.viewport)),A.viewport||(A.viewport=f([a.drawingBufferWidth,a.drawingBufferHeight])),null!=t.close&&(A.close=t.close),null===t.positions&&(t.positions=[]),t.positions){var p,I;if(t.positions.x&&t.positions.y){var v=t.positions.x,m=t.positions.y;I=A.count=Math.max(v.length,m.length),p=new Float64Array(2*I);for(var y=0;y<I;y++)p[2*y]=v[y],p[2*y+1]=m[y]}else p=l(t.positions,"float64"),I=A.count=Math.floor(p.length/2);var b=A.bounds=i(p,2);if(A.fill){for(var x=[],_={},w=0,k=0,T=0,M=A.count;k<M;k++){var E=p[2*k],O=p[2*k+1];isNaN(E)||isNaN(O)||null==E||null==O?(E=p[2*w],O=p[2*w+1],_[k]=w):w=k,x[T++]=E,x[T++]=O}for(var S=g(x,A.hole||[]),R=0,D=S.length;R<D;R++)null!=_[S[R]]&&(S[R]=_[S[R]]);A.triangles=S}var L=new Float64Array(p);c(L,2,b);var P=new Float64Array(2*I+6);A.close?p[0]===p[2*I-2]&&p[1]===p[2*I-1]?(P[0]=L[2*I-4],P[1]=L[2*I-3]):(P[0]=L[2*I-2],P[1]=L[2*I-1]):(P[0]=L[0],P[1]=L[1]),P.set(L,2),A.close?p[0]===p[2*I-2]&&p[1]===p[2*I-1]?(P[2*I+2]=L[2],P[2*I+3]=L[3],A.count-=1):(P[2*I+2]=L[0],P[2*I+3]=L[1],P[2*I+4]=L[2],P[2*I+5]=L[3]):(P[2*I+2]=L[2*I-2],P[2*I+3]=L[2*I-1],P[2*I+4]=L[2*I-2],P[2*I+5]=L[2*I-1]),A.positionBuffer(h(P)),A.positionFractBuffer(d(P))}if(t.range?A.range=t.range:A.range||(A.range=A.bounds),(t.range||t.positions)&&A.count){var N=A.bounds,z=N[2]-N[0],F=N[3]-N[1],B=A.range[2]-A.range[0],j=A.range[3]-A.range[1];A.scale=[z/B,F/j],A.translate=[-A.range[0]/B+N[0]/B||0,-A.range[1]/j+N[1]/j||0],A.scaleFract=d(A.scale),A.translateFract=d(A.translate)}if(t.dashes){var V,G=0;if(!t.dashes||t.dashes.length<2)G=1,V=new Uint8Array([255,255,255,255,255,255,255,255]);else{G=0;for(var U=0;U<t.dashes.length;++U)G+=t.dashes[U];V=new Uint8Array(G*C.dashMult);for(var Z=0,H=255,W=0;W<2;W++)for(var Y=0;Y<t.dashes.length;++Y){for(var X=0,q=t.dashes[Y]*C.dashMult*.5;X<q;++X)V[Z++]=H;H^=255}}A.dashLength=G,A.dashTexture({channels:1,data:V,width:V.length,height:1,mag:"linear",min:"linear"},0,0)}if(t.color){var Q=A.count,K=t.color;K||(K="transparent");var J=new Uint8Array(4*Q+4);if(Array.isArray(K)&&"number"!=typeof K[0]){for(var $=0;$<Q;$++){var tt=n(K[$],"uint8");J.set(tt,4*$)}J.set(n(K[0],"uint8"),4*Q)}else for(var et=n(K,"uint8"),rt=0;rt<Q+1;rt++)J.set(et,4*rt);A.colorBuffer({usage:"dynamic",type:"uint8",data:J})}}else e.passes[u]=null}),t.length<this.passes.length){for(var u=t.length;u<this.passes.length;u++){var A=this.passes[u];A&&(A.colorBuffer.destroy(),A.positionBuffer.destroy(),A.dashTexture.destroy())}this.passes.length=t.length}for(var p=[],I=0;I<this.passes.length;I++)null!==this.passes[I]&&p.push(this.passes[I]);return this.passes=p,this}},C.prototype.destroy=function(){return this.passes.forEach(function(t){t.colorBuffer.destroy(),t.positionBuffer.destroy(),t.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":6,"array-normalize":7,"color-normalize":55,earcut:81,"es6-weak-map":136,"flatten-vertex-data":149,glslify:228,"object-assign":266,"parse-rect":270,"pick-by-alias":276,"to-float32":694}],659:[function(t,e,r){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||o(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s=t("color-normalize"),l=t("array-bounds"),g=t("color-id"),c=t("point-cluster"),u=t("object-assign"),h=t("glslify"),d=t("pick-by-alias"),A=t("update-diff"),f=t("flatten-vertex-data"),C=t("is-iexplorer"),p=t("to-float32"),I=t("parse-rect"),v=m;function m(t,e){var r=this;if(!(this instanceof m))return new m(t,e);"function"==typeof t?(e||(e={}),e.regl=t):(e=t,t=null),e&&e.length&&(e.positions=e);var n,i=(t=e.regl)._gl,o=[];this.tooManyColors=C,n=t.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),u(this,{regl:t,gl:i,groups:[],markerCache:[null],markerTextures:[null],palette:o,paletteIds:{},paletteTexture:n,maxColors:255,maxSize:100,canvas:i.canvas}),this.update(e);var a={uniforms:{pixelRatio:t.context("pixelRatio"),palette:n,paletteSize:function(t,e){return[r.tooManyColors?0:255,n.height]},scale:t.prop("scale"),scaleFract:t.prop("scaleFract"),translate:t.prop("translate"),translateFract:t.prop("translateFract"),opacity:t.prop("opacity"),marker:t.prop("markerTexture")},attributes:{x:function(t,e){return e.xAttr||{buffer:e.positionBuffer,stride:8,offset:0}},y:function(t,e){return e.yAttr||{buffer:e.positionBuffer,stride:8,offset:4}},xFract:function(t,e){return e.xAttr?{constant:[0,0]}:{buffer:e.positionFractBuffer,stride:8,offset:0}},yFract:function(t,e){return e.yAttr?{constant:[0,0]}:{buffer:e.positionFractBuffer,stride:8,offset:4}},size:function(t,e){return e.size.length?{buffer:e.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*e.size/r.maxSize)]}},borderSize:function(t,e){return e.borderSize.length?{buffer:e.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*e.borderSize/r.maxSize)]}},colorId:function(t,e){return e.color.length?{buffer:e.colorBuffer,stride:r.tooManyColors?8:4,offset:0}:{constant:r.tooManyColors?o.slice(4*e.color,4*e.color+4):[e.color]}},borderColorId:function(t,e){return e.borderColor.length?{buffer:e.colorBuffer,stride:r.tooManyColors?8:4,offset:r.tooManyColors?4:2}:{constant:r.tooManyColors?o.slice(4*e.borderColor,4*e.borderColor+4):[e.borderColor]}},isActive:function(t,e){return!0===e.activation?{constant:[1]}:e.activation?e.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:t.prop("viewport")},viewport:t.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:t.prop("elements"),count:t.prop("count"),offset:t.prop("offset"),primitive:"points"},s=u({},a);s.frag=h(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float pixelRatio, opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(marker, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),s.vert=h(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform sampler2D palette;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pixelRatio;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=t(s);var l=u({},a);l.frag=h(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),l.vert=h(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),C&&(l.frag=l.frag.replace("smoothstep","smoothStep"),s.frag=s.frag.replace("smoothstep","smoothStep")),this.drawCircle=t(l)}m.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},m.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},m.prototype.draw=function(){for(var t=this,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=this.groups;if(1===r.length&&Array.isArray(r[0])&&(null===r[0][0]||Array.isArray(r[0][0]))&&(r=r[0]),this.regl._refresh(),r.length)for(var o=0;o<r.length;o++)this.drawItem(o,r[o]);else i.forEach(function(e,r){t.drawItem(r)});return this},m.prototype.drawItem=function(t,e){var r=this.groups,n=r[t];if("number"==typeof e&&(t=e,n=r[e],e=null),n&&n.count&&n.opacity){n.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,n,e));for(var o=[],a=1;a<n.activation.length;a++)n.activation[a]&&(!0===n.activation[a]||n.activation[a].data.length)&&o.push.apply(o,i(this.getMarkerDrawOptions(a,n,e)));o.length&&this.drawMarker(o)}},m.prototype.getMarkerDrawOptions=function(t,e,r){var i=e.range,o=e.tree,a=e.viewport,s=e.activation,l=e.selectionBuffer,g=e.count;this.regl;if(!o)return r?[u({},e,{markerTexture:this.markerTextures[t],activation:s[t],count:r.length,elements:r,offset:0})]:[u({},e,{markerTexture:this.markerTextures[t],activation:s[t],offset:0})];var c=[],h=o.range(i,{lod:!0,px:[(i[2]-i[0])/a.width,(i[3]-i[1])/a.height]});if(r){for(var d=s[t].data,A=new Uint8Array(g),f=0;f<r.length;f++){var C=r[f];A[C]=d?d[C]:1}l.subdata(A)}for(var p=h.length;p--;){var I=n(h[p],2),v=I[0],m=I[1];c.push(u({},e,{markerTexture:this.markerTextures[t],activation:r?l:s[t],offset:v,count:m-v}))}return c},m.prototype.update=function(){for(var t=this,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(r.length){1===r.length&&Array.isArray(r[0])&&(r=r[0]);var i=this.groups,o=this.gl,a=this.regl,s=this.maxSize,g=this.maxColors,h=this.palette;this.groups=i=r.map(function(e,r){var n=i[r];if(void 0===e)return n;null===e?e={positions:null}:"function"==typeof e?e={ondraw:e}:"number"==typeof e[0]&&(e={positions:e}),null===(e=d(e,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(e.positions=[]),null!=e.tooManyColors&&(t.tooManyColors=e.tooManyColors),n||(i[r]=n={id:r,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:a.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:a.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:a.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:a.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:a.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},e=u({},m.defaults,e)),!e.positions||"marker"in e||(e.marker=n.marker,delete n.marker),!e.marker||"positions"in e||(e.positions=n.positions,delete n.positions);var C=0,v=0;if(A(n,e,[{snap:!0,size:function(t,e){return null==t&&(t=m.defaults.size),C+=t&&t.length?1:0,t},borderSize:function(t,e){return null==t&&(t=m.defaults.borderSize),C+=t&&t.length?1:0,t},opacity:parseFloat,color:function(e,r){return null==e&&(e=m.defaults.color),e=t.updateColor(e),v++,e},borderColor:function(e,r){return null==e&&(e=m.defaults.borderColor),e=t.updateColor(e),v++,e},bounds:function(t,e,r){return"range"in r||(r.range=null),t},positions:function(t,e,r){var n=e.snap,i=e.positionBuffer,o=e.positionFractBuffer,s=e.selectionBuffer;if(t.x||t.y)return t.x.length?e.xAttr={buffer:a.buffer(t.x),offset:0,stride:4,count:t.x.length}:e.xAttr={buffer:t.x.buffer,offset:4*t.x.offset||0,stride:4*(t.x.stride||1),count:t.x.count},t.y.length?e.yAttr={buffer:a.buffer(t.y),offset:0,stride:4,count:t.y.length}:e.yAttr={buffer:t.y.buffer,offset:4*t.y.offset||0,stride:4*(t.y.stride||1),count:t.y.count},e.count=Math.max(e.xAttr.count,e.yAttr.count),t;t=f(t,"float64");var g=e.count=Math.floor(t.length/2),u=e.bounds=g?l(t,2):null;if(r.range||e.range||(delete e.range,r.range=u),r.marker||e.marker||(delete e.marker,r.marker=null),n&&(!0===n||g>n)?e.tree=c(t,{bounds:u}):n&&n.length&&(e.tree=n),e.tree){var h={primitive:"points",usage:"static",data:e.tree,type:"uint32"};e.elements?e.elements(h):e.elements=a.elements(h)}return i({data:p.float(t),usage:"dynamic"}),o({data:p.fract(t),usage:"dynamic"}),s({data:new Uint8Array(g),type:"uint8",usage:"stream"}),t}},{marker:function(e,r,n){var i=r.activation;if(i.forEach(function(t){return t&&t.destroy&&t.destroy()}),i.length=0,e&&"number"!=typeof e[0]){for(var o=[],s=0,l=Math.min(e.length,r.count);s<l;s++){var g=t.addMarker(e[s]);o[g]||(o[g]=new Uint8Array(r.count)),o[g][s]=1}for(var c=0;c<o.length;c++)if(o[c]){var u={data:o[c],type:"uint8",usage:"static"};i[c]?i[c](u):i[c]=a.buffer(u),i[c].data=o[c]}}else{i[t.addMarker(e)]=!0}return e},range:function(t,e,r){var n=e.bounds;if(n)return t||(t=n),e.scale=[1/(t[2]-t[0]),1/(t[3]-t[1])],e.translate=[-t[0],-t[1]],e.scaleFract=p.fract(e.scale),e.translateFract=p.fract(e.translate),t},viewport:function(t){return I(t||[o.drawingBufferWidth,o.drawingBufferHeight])}}]),C){var y=n,b=y.count,x=y.size,_=y.borderSize,w=y.sizeBuffer,k=new Uint8Array(2*b);if(x.length||_.length)for(var T=0;T<b;T++)k[2*T]=Math.round(255*(null==x[T]?x:x[T])/s),k[2*T+1]=Math.round(255*(null==_[T]?_:_[T])/s);w({data:k,usage:"dynamic"})}if(v){var M,E=n,O=E.count,S=E.color,R=E.borderColor,D=E.colorBuffer;if(t.tooManyColors){if(S.length||R.length){M=new Uint8Array(8*O);for(var L=0;L<O;L++){var P=S[L];M[8*L]=h[4*P],M[8*L+1]=h[4*P+1],M[8*L+2]=h[4*P+2],M[8*L+3]=h[4*P+3];var N=R[L];M[8*L+4]=h[4*N],M[8*L+5]=h[4*N+1],M[8*L+6]=h[4*N+2],M[8*L+7]=h[4*N+3]}}}else if(S.length||R.length){M=new Uint8Array(4*O+2);for(var z=0;z<O;z++)null!=S[z]&&(M[4*z]=S[z]%g,M[4*z+1]=Math.floor(S[z]/g)),null!=R[z]&&(M[4*z+2]=R[z]%g,M[4*z+3]=Math.floor(R[z]/g))}D({data:M||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return n})}},m.prototype.addMarker=function(t){var e,r=this.markerTextures,n=this.regl,i=this.markerCache,o=null==t?0:i.indexOf(t);if(o>=0)return o;if(t instanceof Uint8Array||t instanceof Uint8ClampedArray)e=t;else{e=new Uint8Array(t.length);for(var a=0,s=t.length;a<s;a++)e[a]=255*t[a]}var l=Math.floor(Math.sqrt(e.length));return o=r.length,i.push(t),r.push(n.texture({channels:1,data:e,radius:l,mag:"linear",min:"linear"})),o},m.prototype.updateColor=function(t){var e=this.paletteIds,r=this.palette,n=this.maxColors;Array.isArray(t)||(t=[t]);var i=[];if("number"==typeof t[0]){var o=[];if(Array.isArray(t))for(var a=0;a<t.length;a+=4)o.push(t.slice(a,a+4));else for(var l=0;l<t.length;l+=4)o.push(t.subarray(l,l+4));t=o}for(var c=0;c<t.length;c++){var u=t[c];u=s(u,"uint8");var h=g(u,!1);if(null==e[h]){var d=r.length;e[h]=Math.floor(d/4),r[d]=u[0],r[d+1]=u[1],r[d+2]=u[2],r[d+3]=u[3]}i[c]=e[h]}return!this.tooManyColors&&r.length>4*n&&(this.tooManyColors=!0),this.updatePalette(r),1===i.length?i[0]:i},m.prototype.updatePalette=function(t){if(!this.tooManyColors){var e=this.maxColors,r=this.paletteTexture,n=Math.ceil(.25*t.length/e);if(n>1)for(var i=.25*(t=t.slice()).length%e;i<n*e;i++)t.push(0,0,0,0);r.height<n&&r.resize(e,n),r.subimage({width:Math.min(.25*t.length,e),height:n,data:t},0,0)}},m.prototype.destroy=function(){return this.groups.forEach(function(t){t.sizeBuffer.destroy(),t.positionBuffer.destroy(),t.positionFractBuffer.destroy(),t.colorBuffer.destroy(),t.activation.forEach(function(t){return t&&t.destroy&&t.destroy()}),t.selectionBuffer.destroy(),t.elements&&t.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(t){return t&&t.destroy&&t.destroy()}),this};var y=t("object-assign");e.exports=function(t,e){var r=new v(t,e),n=r.render.bind(r);return y(n,{render:n,update:r.update.bind(r),draw:r.draw.bind(r),destroy:r.destroy.bind(r),regl:r.regl,gl:r.gl,canvas:r.gl.canvas,groups:r.groups,markers:r.markerCache,palette:r.palette}),n}},{"array-bounds":6,"color-id":53,"color-normalize":55,"flatten-vertex-data":149,glslify:228,"is-iexplorer":239,"object-assign":266,"parse-rect":270,"pick-by-alias":276,"point-cluster":637,"to-float32":694,"update-diff":714}],660:[function(t,e,r){"use strict";var n=t("regl-scatter2d"),i=t("pick-by-alias"),o=t("array-bounds"),a=t("raf"),s=t("array-range"),l=t("parse-rect"),g=t("flatten-vertex-data");function c(t,e){if(!(this instanceof c))return new c(t,e);this.traces=[],this.passes={},this.regl=t,this.scatter=n(t),this.canvas=this.scatter.canvas}function u(t,e,r){return(null!=t.id?t.id:t)<<16|(255&e)<<8|255&r}function h(t,e,r){var n,i,o,a,s=t[e],l=t[r];return s.length>2?(s[0],s[2],n=s[1],i=s[3]):s.length?(n=s[0],i=s[1]):(s.x,n=s.y,s.x+s.width,i=s.y+s.height),l.length>2?(o=l[0],a=l[2],l[1],l[3]):l.length?(o=l[0],a=l[1]):(o=l.x,l.y,a=l.x+l.width,l.y+l.height),[o,n,a,i]}function d(t){if("number"==typeof t)return[t,t,t,t];if(2===t.length)return[t[0],t[1],t[0],t[1]];var e=l(t);return[e.x,e.y,e.x+e.width,e.y+e.height]}e.exports=c,c.prototype.render=function(){for(var t,e=this,r=[],n=arguments.length;n--;)r[n]=arguments[n];return r.length&&(t=this).update.apply(t,r),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=a(function(){e.draw(),e.dirty=!0,e.planned=null})):(this.draw(),this.dirty=!0,a(function(){e.dirty=!1})),this)},c.prototype.update=function(){for(var t,e=[],r=arguments.length;r--;)e[r]=arguments[r];if(e.length){for(var n=0;n<e.length;n++)this.updateItem(n,e[n]);this.traces=this.traces.filter(Boolean);for(var i=[],o=0,a=0;a<this.traces.length;a++){for(var s=this.traces[a],l=this.traces[a].passes,g=0;g<l.length;g++)i.push(this.passes[l[g]]);s.passOffset=o,o+=s.passes.length}return(t=this.scatter).update.apply(t,i),this}},c.prototype.updateItem=function(t,e){var r=this.regl;if(null===e)return this.traces[t]=null,this;if(!e)return this;var n,a=i(e,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),s=this.traces[t]||(this.traces[t]={id:t,buffer:r.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:l([r._gl.drawingBufferWidth,r._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=a.color&&(s.color=a.color),null!=a.size&&(s.size=a.size),null!=a.marker&&(s.marker=a.marker),null!=a.borderColor&&(s.borderColor=a.borderColor),null!=a.borderSize&&(s.borderSize=a.borderSize),null!=a.opacity&&(s.opacity=a.opacity),a.viewport&&(s.viewport=l(a.viewport)),null!=a.diagonal&&(s.diagonal=a.diagonal),null!=a.upper&&(s.upper=a.upper),null!=a.lower&&(s.lower=a.lower),a.data){s.buffer(g(a.data)),s.columns=a.data.length,s.count=a.data[0].length,s.bounds=[];for(var c=0;c<s.columns;c++)s.bounds[c]=o(a.data[c],1)}a.range&&(s.range=a.range,n=s.range&&"number"!=typeof s.range[0]),a.domain&&(s.domain=a.domain);var A=!1;null!=a.padding&&(Array.isArray(a.padding)&&a.padding.length===s.columns&&"number"==typeof a.padding[a.padding.length-1]?(s.padding=a.padding.map(d),A=!0):s.padding=d(a.padding));var f=s.columns,C=s.count,p=s.viewport.width,I=s.viewport.height,v=s.viewport.x,m=s.viewport.y,y=p/f,b=I/f;s.passes=[];for(var x=0;x<f;x++)for(var _=0;_<f;_++)if((s.diagonal||_!==x)&&(s.upper||!(x>_))&&(s.lower||!(x<_))){var w=u(s.id,x,_),k=this.passes[w]||(this.passes[w]={});if(a.data&&(a.transpose?k.positions={x:{buffer:s.buffer,offset:_,count:C,stride:f},y:{buffer:s.buffer,offset:x,count:C,stride:f}}:k.positions={x:{buffer:s.buffer,offset:_*C,count:C},y:{buffer:s.buffer,offset:x*C,count:C}},k.bounds=h(s.bounds,x,_)),a.domain||a.viewport||a.data){var T=A?h(s.padding,x,_):s.padding;if(s.domain){var M=h(s.domain,x,_),E=M[0],O=M[1],S=M[2],R=M[3];k.viewport=[v+E*p+T[0],m+O*I+T[1],v+S*p-T[2],m+R*I-T[3]]}else k.viewport=[v+_*y+y*T[0],m+x*b+b*T[1],v+(_+1)*y-y*T[2],m+(x+1)*b-b*T[3]]}a.color&&(k.color=s.color),a.size&&(k.size=s.size),a.marker&&(k.marker=s.marker),a.borderSize&&(k.borderSize=s.borderSize),a.borderColor&&(k.borderColor=s.borderColor),a.opacity&&(k.opacity=s.opacity),a.range&&(k.range=n?h(s.range,x,_):s.range||k.bounds),s.passes.push(w)}return this},c.prototype.draw=function(){for(var t,e=[],r=arguments.length;r--;)e[r]=arguments[r];if(e.length){for(var n=[],i=0;i<e.length;i++)if("number"==typeof e[i]){var o=this.traces[e[i]],a=o.passes,l=o.passOffset;n.push.apply(n,s(l,l+a.length))}else if(e[i].length){var g=e[i],c=this.traces[i],u=c.passes,h=c.passOffset;u=u.map(function(t,e){n[h+e]=g})}(t=this.scatter).draw.apply(t,n)}else this.scatter.draw();return this},c.prototype.destroy=function(){return this.traces.forEach(function(t){t.buffer&&t.buffer.destroy&&t.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":6,"array-range":8,"flatten-vertex-data":149,"parse-rect":270,"pick-by-alias":276,raf:653,"regl-scatter2d":659}],661:[function(t,e,r){var n,i;n=this,i=function(){function t(t,e){this.id=G++,this.type=t,this.data=e}function e(t){return"["+function t(e){if(0===e.length)return[];var r=e.charAt(0),n=e.charAt(e.length-1);if(1<e.length&&r===n&&('"'===r||"'"===r))return['"'+e.substr(1,e.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e))return t(e.substr(0,r.index)).concat(t(r[1])).concat(t(e.substr(r.index+r[0].length)));if(1===(r=e.split(".")).length)return['"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(e=[],n=0;n<r.length;++n)e=e.concat(t(r[n]));return e}(t).join("][")+"]"}function r(t){return"string"==typeof t?t.split():t}function n(t){return"string"==typeof t?document.querySelector(t):t}function i(t){var e,i,o,a,s=t||{};t={};var l=[],g=[],c="undefined"==typeof window?1:window.devicePixelRatio,u=!1,h=function(t){},d=function(){};if("string"==typeof s?e=document.querySelector(s):"object"==typeof s&&("string"==typeof s.nodeName&&"function"==typeof s.appendChild&&"function"==typeof s.getBoundingClientRect?e=s:"function"==typeof s.drawArrays||"function"==typeof s.drawElements?o=(a=s).canvas:("gl"in s?a=s.gl:"canvas"in s?o=n(s.canvas):"container"in s&&(i=n(s.container)),"attributes"in s&&(t=s.attributes),"extensions"in s&&(l=r(s.extensions)),"optionalExtensions"in s&&(g=r(s.optionalExtensions)),"onDone"in s&&(h=s.onDone),"profile"in s&&(u=!!s.profile),"pixelRatio"in s&&(c=+s.pixelRatio))),e&&("canvas"===e.nodeName.toLowerCase()?o=e:i=e),!a){if(!o){if(!(e=function(t,e,r){function n(){var e=window.innerWidth,n=window.innerHeight;t!==document.body&&(e=(n=t.getBoundingClientRect()).right-n.left,n=n.bottom-n.top),i.width=r*e,i.height=r*n,V(i.style,{width:e+"px",height:n+"px"})}var i=document.createElement("canvas");return V(i.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(i),t===document.body&&(i.style.position="absolute",V(t.style,{margin:0,padding:0})),window.addEventListener("resize",n,!1),n(),{canvas:i,onDestroy:function(){window.removeEventListener("resize",n),t.removeChild(i)}}}(i||document.body,0,c)))return null;o=e.canvas,d=e.onDestroy}t.premultipliedAlpha=t.premultipliedAlpha||!1,a=function(t,e){function r(r){try{return t.getContext(r,e)}catch(t){return null}}return r("webgl")||r("experimental-webgl")||r("webgl-experimental")}(o,t)}return a?{gl:a,canvas:o,container:i,extensions:l,optionalExtensions:g,pixelRatio:c,profile:u,onDone:h,onDestroy:d}:(d(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function o(t,e){for(var r=Array(t),n=0;n<t;++n)r[n]=e(n);return r}function a(t){var e,r;return e=(65535<t)<<4,e|=r=(255<(t>>>=e))<<3,(e|=r=(15<(t>>>=r))<<2)|(r=(3<(t>>>=r))<<1)|t>>>r>>1}function s(){function t(t){t:{for(var e=16;268435456>=e;e*=16)if(t<=e){t=e;break t}t=0}return 0<(e=r[a(t)>>2]).length?e.pop():new ArrayBuffer(t)}function e(t){r[a(t.byteLength)>>2].push(t)}var r=o(8,function(){return[]});return{alloc:t,free:e,allocType:function(e,r){var n=null;switch(e){case 5120:n=new Int8Array(t(r),0,r);break;case 5121:n=new Uint8Array(t(r),0,r);break;case 5122:n=new Int16Array(t(2*r),0,r);break;case 5123:n=new Uint16Array(t(2*r),0,r);break;case 5124:n=new Int32Array(t(4*r),0,r);break;case 5125:n=new Uint32Array(t(4*r),0,r);break;case 5126:n=new Float32Array(t(4*r),0,r);break;default:return null}return n.length!==r?n.subarray(0,r):n},freeType:function(t){e(t.buffer)}}}function l(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||X(t.data))}function g(t,e,r,n,i,o){for(var a=0;a<e;++a)for(var s=t[a],l=0;l<r;++l)for(var g=s[l],c=0;c<n;++c)i[o++]=g[c]}function c(t){return 0|K[Object.prototype.toString.call(t)]}function u(t,e){for(var r=0;r<e.length;++r)t[r]=e[r]}function h(t,e,r,n,i,o,a){for(var s=0,l=0;l<r;++l)for(var g=0;g<n;++g)t[s++]=e[i*l+o*g+a]}function d(t,e,r,n){function i(e){this.id=g++,this.buffer=t.createBuffer(),this.type=e,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,r.profile&&(this.stats={size:0})}function o(e,r,n){e.byteLength=r.byteLength,t.bufferData(e.type,r,n)}function a(t,e,r,n,i,a){if(t.usage=r,Array.isArray(e)){if(t.dtype=n||5126,0<e.length)if(Array.isArray(e[0])){i=et(e);for(var s=n=1;s<i.length;++s)n*=i[s];t.dimension=n,o(t,e=tt(e,i,t.dtype),r),a?t.persistentData=e:W.freeType(e)}else"number"==typeof e[0]?(t.dimension=i,u(i=W.allocType(t.dtype,e.length),e),o(t,i,r),a?t.persistentData=i:W.freeType(i)):X(e[0])&&(t.dimension=e[0].length,t.dtype=n||c(e[0])||5126,o(t,e=tt(e,[e.length,e[0].length],t.dtype),r),a?t.persistentData=e:W.freeType(e))}else if(X(e))t.dtype=n||c(e),t.dimension=i,o(t,e,r),a&&(t.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if(l(e)){i=e.shape;var g=e.stride,d=(s=e.offset,0),A=0,f=0,C=0;1===i.length?(d=i[0],A=1,f=g[0],C=0):2===i.length&&(d=i[0],A=i[1],f=g[0],C=g[1]),t.dtype=n||c(e.data)||5126,t.dimension=A,h(i=W.allocType(t.dtype,d*A),e.data,d,A,f,C,s),o(t,i,r),a?t.persistentData=i:W.freeType(i)}else e instanceof ArrayBuffer&&(t.dtype=5121,t.dimension=i,o(t,e,r),a&&(t.persistentData=new Uint8Array(new Uint8Array(e))))}function s(r){e.bufferCount--,n(r),t.deleteBuffer(r.buffer),r.buffer=null,delete d[r.id]}var g=0,d={};i.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},i.prototype.destroy=function(){s(this)};var A=[];return r.profile&&(e.getTotalBufferSize=function(){var t=0;return Object.keys(d).forEach(function(e){t+=d[e].stats.size}),t}),{create:function(n,o,g,A){function f(e){var n=35044,i=null,o=0,s=0,g=1;return Array.isArray(e)||X(e)||l(e)||e instanceof ArrayBuffer?i=e:"number"==typeof e?o=0|e:e&&("data"in e&&(i=e.data),"usage"in e&&(n=$[e.usage]),"type"in e&&(s=J[e.type]),"dimension"in e&&(g=0|e.dimension),"length"in e&&(o=0|e.length)),C.bind(),i?a(C,i,n,s,g,A):(o&&t.bufferData(C.type,o,n),C.dtype=s||5121,C.usage=n,C.dimension=g,C.byteLength=o),r.profile&&(C.stats.size=C.byteLength*rt[C.dtype]),f}e.bufferCount++;var C=new i(o);return d[C.id]=C,g||f(n),f._reglType="buffer",f._buffer=C,f.subdata=function(e,r){var n,i=0|(r||0);if(C.bind(),X(e)||e instanceof ArrayBuffer)t.bufferSubData(C.type,i,e);else if(Array.isArray(e)){if(0<e.length)if("number"==typeof e[0]){var o=W.allocType(C.dtype,e.length);u(o,e),t.bufferSubData(C.type,i,o),W.freeType(o)}else(Array.isArray(e[0])||X(e[0]))&&(n=et(e),o=tt(e,n,C.dtype),t.bufferSubData(C.type,i,o),W.freeType(o))}else if(l(e)){n=e.shape;var a=e.stride,s=o=0,g=0,d=0;1===n.length?(o=n[0],s=1,g=a[0],d=0):2===n.length&&(o=n[0],s=n[1],g=a[0],d=a[1]),n=Array.isArray(e.data)?C.dtype:c(e.data),h(n=W.allocType(n,o*s),e.data,o,s,g,d,e.offset),t.bufferSubData(C.type,i,n),W.freeType(n)}return f},r.profile&&(f.stats=C.stats),f.destroy=function(){s(C)},f},createStream:function(t,e){var r=A.pop();return r||(r=new i(t)),r.bind(),a(r,e,35040,0,1,!1),r},destroyStream:function(t){A.push(t)},clear:function(){q(d).forEach(s),A.forEach(s)},getBuffer:function(t){return t&&t._buffer instanceof i?t._buffer:null},restore:function(){q(d).forEach(function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})},_initBuffer:a}}function A(t,e,r,n){function i(t){this.id=g++,s[this.id]=this,this.buffer=t,this.primType=4,this.type=this.vertCount=0}function o(n,i,o,a,s,g,c){var u;if(n.buffer.bind(),i?((u=c)||X(i)&&(!l(i)||X(i.data))||(u=e.oes_element_index_uint?5125:5123),r._initBuffer(n.buffer,i,o,u,3)):(t.bufferData(34963,g,o),n.buffer.dtype=u||5121,n.buffer.usage=o,n.buffer.dimension=3,n.buffer.byteLength=g),u=c,!c){switch(n.buffer.dtype){case 5121:case 5120:u=5121;break;case 5123:case 5122:u=5123;break;case 5125:case 5124:u=5125}n.buffer.dtype=u}n.type=u,0>(i=s)&&(i=n.buffer.byteLength,5123===u?i>>=1:5125===u&&(i>>=2)),n.vertCount=i,i=a,0>a&&(i=4,1===(a=n.buffer.dimension)&&(i=0),2===a&&(i=1),3===a&&(i=4)),n.primType=i}function a(t){n.elementsCount--,delete s[t.id],t.buffer.destroy(),t.buffer=null}var s={},g=0,c={uint8:5121,uint16:5123};e.oes_element_index_uint&&(c.uint32=5125),i.prototype.bind=function(){this.buffer.bind()};var u=[];return{create:function(t,e){function s(t){if(t)if("number"==typeof t)g(t),u.primType=4,u.vertCount=0|t,u.type=5121;else{var e=null,r=35044,n=-1,i=-1,a=0,h=0;Array.isArray(t)||X(t)||l(t)?e=t:("data"in t&&(e=t.data),"usage"in t&&(r=$[t.usage]),"primitive"in t&&(n=nt[t.primitive]),"count"in t&&(i=0|t.count),"type"in t&&(h=c[t.type]),"length"in t?a=0|t.length:(a=i,5123===h||5122===h?a*=2:5125!==h&&5124!==h||(a*=4))),o(u,e,r,n,i,a,h)}else g(),u.primType=4,u.vertCount=0,u.type=5121;return s}var g=r.create(null,34963,!0),u=new i(g._buffer);return n.elementsCount++,s(t),s._reglType="elements",s._elements=u,s.subdata=function(t,e){return g.subdata(t,e),s},s.destroy=function(){a(u)},s},createStream:function(t){var e=u.pop();return e||(e=new i(r.create(null,34963,!0,!1)._buffer)),o(e,t,35040,-1,-1,0,0),e},destroyStream:function(t){u.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof i?t._elements:null},clear:function(){q(s).forEach(a)}}}function f(t){for(var e=W.allocType(5123,t.length),r=0;r<t.length;++r)if(isNaN(t[r]))e[r]=65535;else if(1/0===t[r])e[r]=31744;else if(-1/0===t[r])e[r]=64512;else{it[0]=t[r];var n=(o=ot[0])>>>31<<15,i=(o<<1>>>24)-127,o=o>>13&1023;e[r]=-24>i?n:-14>i?n+(o+1024>>-14-i):15<i?n+31744:n+(i+15<<10)+o}return e}function C(t){return Array.isArray(t)||X(t)}function p(t){return"[object "+t+"]"}function I(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function v(t){return!(!Array.isArray(t)||0===t.length||!C(t[0]))}function m(t){return Object.prototype.toString.call(t)}function y(t){if(!t)return!1;var e=m(t);return 0<=ft.indexOf(e)||(I(t)||v(t)||l(t))}function b(t,e){36193===t.type?(t.data=f(e),W.freeType(e)):t.data=e}function x(t,e,r,n,i,o){if(t=void 0!==pt[t]?pt[t]:lt[t]*Ct[e],o&&(t*=6),i){for(n=0;1<=r;)n+=t*r*r,r/=2;return n}return t*r*n}function _(t,e,r,n,i,o,a){function s(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function g(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function c(t,e){if("object"==typeof e&&e){"premultiplyAlpha"in e&&(t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(t.flipY=e.flipY),"alignment"in e&&(t.unpackAlignment=e.alignment),"colorSpace"in e&&(t.colorSpace=G[e.colorSpace]),"type"in e&&(t.type=U[e.type]);var r=t.width,n=t.height,i=t.channels,o=!1;"shape"in e?(r=e.shape[0],n=e.shape[1],3===e.shape.length&&(i=e.shape[2],o=!0)):("radius"in e&&(r=n=e.radius),"width"in e&&(r=e.width),"height"in e&&(n=e.height),"channels"in e&&(i=e.channels,o=!0)),t.width=0|r,t.height=0|n,t.channels=0|i,r=!1,"format"in e&&(r=e.format,n=t.internalformat=Z[r],t.format=it[n],r in U&&!("type"in e)&&(t.type=U[r]),r in H&&(t.compressed=!0),r=!0),!o&&r?t.channels=lt[t.format]:o&&!r&&t.channels!==st[t.format]&&(t.format=t.internalformat=st[t.channels])}}function u(e){t.pixelStorei(37440,e.flipY),t.pixelStorei(37441,e.premultiplyAlpha),t.pixelStorei(37443,e.colorSpace),t.pixelStorei(3317,e.unpackAlignment)}function h(){s.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function d(t,e){var r=null;if(y(e)?r=e:e&&(c(t,e),"x"in e&&(t.xOffset=0|e.x),"y"in e&&(t.yOffset=0|e.y),y(e.data)&&(r=e.data)),e.copy){var n=i.viewportWidth,o=i.viewportHeight;t.width=t.width||n-t.xOffset,t.height=t.height||o-t.yOffset,t.needsCopy=!0}else if(r){if(X(r))t.channels=t.channels||4,t.data=r,"type"in e||5121!==t.type||(t.type=0|K[Object.prototype.toString.call(r)]);else if(I(r)){switch(t.channels=t.channels||4,o=(n=r).length,t.type){case 5121:case 5123:case 5125:case 5126:(o=W.allocType(t.type,o)).set(n),t.data=o;break;case 36193:t.data=f(n)}t.alignment=1,t.needsFree=!0}else if(l(r)){n=r.data,Array.isArray(n)||5121!==t.type||(t.type=0|K[Object.prototype.toString.call(n)]);o=r.shape;var a,s,g,u,h=r.stride;3===o.length?(g=o[2],u=h[2]):u=g=1,a=o[0],s=o[1],o=h[0],h=h[1],t.alignment=1,t.width=a,t.height=s,t.channels=g,t.format=t.internalformat=st[g],t.needsFree=!0,a=u,r=r.offset,g=t.width,u=t.height,s=t.channels;for(var d=W.allocType(36193===t.type?5126:t.type,g*u*s),A=0,p=0;p<u;++p)for(var x=0;x<g;++x)for(var _=0;_<s;++_)d[A++]=n[o*x+h*p+a*_+r];b(t,d)}else if(m(r)===gt||m(r)===ct||m(r)===ut)m(r)===gt||m(r)===ct?t.element=r:t.element=r.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(m(r)===ht)t.element=r,t.width=r.width,t.height=r.height,t.channels=4;else if(m(r)===dt)t.element=r,t.width=r.naturalWidth,t.height=r.naturalHeight,t.channels=4;else if(m(r)===At)t.element=r,t.width=r.videoWidth,t.height=r.videoHeight,t.channels=4;else if(v(r)){for(n=t.width||r[0].length,o=t.height||r.length,h=t.channels,h=C(r[0][0])?h||r[0][0].length:h||1,a=Q.shape(r),g=1,u=0;u<a.length;++u)g*=a[u];g=W.allocType(36193===t.type?5126:t.type,g),Q.flatten(r,a,"",g),b(t,g),t.alignment=1,t.width=n,t.height=o,t.channels=h,t.format=t.internalformat=st[h],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4}function A(e,r,i,o,a){var s=e.element,l=e.data,g=e.internalformat,c=e.format,h=e.type,d=e.width,A=e.height;u(e),s?t.texSubImage2D(r,a,i,o,c,h,s):e.compressed?t.compressedTexSubImage2D(r,a,i,o,g,d,A,l):e.needsCopy?(n(),t.copyTexSubImage2D(r,a,i,o,e.xOffset,e.yOffset,d,A)):t.texSubImage2D(r,a,i,o,d,A,c,h,l)}function p(){return ot.pop()||new h}function _(t){t.needsFree&&W.freeType(t.data),h.call(t),ot.push(t)}function w(t,e,r){var n=t.images[0]=p();t.mipmask=1,n.width=t.width=e,n.height=t.height=r,n.channels=t.channels=4}function k(t,e){var r=null;if(y(e))g(r=t.images[0]=p(),t),d(r,e),t.mipmask=1;else if(c(t,e),Array.isArray(e.mipmap))for(var n=e.mipmap,i=0;i<n.length;++i)g(r=t.images[i]=p(),t),r.width>>=i,r.height>>=i,d(r,n[i]),t.mipmask|=1<<i;else g(r=t.images[0]=p(),t),d(r,e),t.mipmask=1;g(t,t.images[0])}function T(e,r){for(var i=e.images,o=0;o<i.length&&i[o];++o){var a=i[o],s=r,l=o,g=a.element,c=a.data,h=a.internalformat,d=a.format,A=a.type,f=a.width,C=a.height;u(a),g?t.texImage2D(s,l,d,d,A,g):a.compressed?t.compressedTexImage2D(s,l,h,f,C,0,c):a.needsCopy?(n(),t.copyTexImage2D(s,l,d,a.xOffset,a.yOffset,f,C,0)):t.texImage2D(s,l,d,f,C,0,d,A,c||null)}}function M(){var t=ft.pop()||new function(){s.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)};s.call(t);for(var e=t.mipmask=0;16>e;++e)t.images[e]=null;return t}function E(t){for(var e=t.images,r=0;r<e.length;++r)e[r]&&_(e[r]),e[r]=null;ft.push(t)}function O(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function S(t,e){"min"in e&&(t.minFilter=j[e.min],0<=at.indexOf(t.minFilter)&&!("faces"in e)&&(t.genMipmaps=!0)),"mag"in e&&(t.magFilter=B[e.mag]);var r=t.wrapS,n=t.wrapT;if("wrap"in e){var i=e.wrap;"string"==typeof i?r=n=F[i]:Array.isArray(i)&&(r=F[i[0]],n=F[i[1]])}else"wrapS"in e&&(r=F[e.wrapS]),"wrapT"in e&&(n=F[e.wrapT]);if(t.wrapS=r,t.wrapT=n,"anisotropic"in e&&(t.anisotropic=e.anisotropic),"mipmap"in e){switch(r=!1,typeof e.mipmap){case"string":t.mipmapHint=z[e.mipmap],r=t.genMipmaps=!0;break;case"boolean":r=t.genMipmaps=e.mipmap;break;case"object":t.genMipmaps=!1,r=!0}!r||"min"in e||(t.minFilter=9984)}}function R(r,n){t.texParameteri(n,10241,r.minFilter),t.texParameteri(n,10240,r.magFilter),t.texParameteri(n,10242,r.wrapS),t.texParameteri(n,10243,r.wrapT),e.ext_texture_filter_anisotropic&&t.texParameteri(n,34046,r.anisotropic),r.genMipmaps&&(t.hint(33170,r.mipmapHint),t.generateMipmap(n))}function D(e){s.call(this),this.mipmask=0,this.internalformat=6408,this.id=Ct++,this.refCount=1,this.target=e,this.texture=t.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new O,a.profile&&(this.stats={size:0})}function L(e){t.activeTexture(33984),t.bindTexture(e.target,e.texture)}function P(){var e=vt[0];e?t.bindTexture(e.target,e.texture):t.bindTexture(3553,null)}function N(e){var r=e.texture,n=e.unit,i=e.target;0<=n&&(t.activeTexture(33984+n),t.bindTexture(i,null),vt[n]=null),t.deleteTexture(r),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete pt[e.id],o.textureCount--}var z={"don't care":4352,"dont care":4352,nice:4354,fast:4353},F={repeat:10497,clamp:33071,mirror:33648},B={nearest:9728,linear:9729},j=V({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},B),G={none:0,browser:37444},U={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Z={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},H={};e.ext_srgb&&(Z.srgb=35904,Z.srgba=35906),e.oes_texture_float&&(U.float32=U.float=5126),e.oes_texture_half_float&&(U.float16=U["half float"]=36193),e.webgl_depth_texture&&(V(Z,{depth:6402,"depth stencil":34041}),V(U,{uint16:5123,uint32:5125,"depth stencil":34042})),e.webgl_compressed_texture_s3tc&&V(H,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),e.webgl_compressed_texture_atc&&V(H,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),e.webgl_compressed_texture_pvrtc&&V(H,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),e.webgl_compressed_texture_etc1&&(H["rgb etc1"]=36196);var Y=Array.prototype.slice.call(t.getParameter(34467));Object.keys(H).forEach(function(t){var e=H[t];0<=Y.indexOf(e)&&(Z[t]=e)});var J=Object.keys(Z);r.textureFormats=J;var $=[];Object.keys(Z).forEach(function(t){$[Z[t]]=t});var tt=[];Object.keys(U).forEach(function(t){tt[U[t]]=t});var et=[];Object.keys(B).forEach(function(t){et[B[t]]=t});var rt=[];Object.keys(j).forEach(function(t){rt[j[t]]=t});var nt=[];Object.keys(F).forEach(function(t){nt[F[t]]=t});var it=J.reduce(function(t,r){var n=Z[r];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n||e.ext_srgb&&(35904===n||35906===n)?t[n]=n:32855===n||0<=r.indexOf("rgba")?t[n]=6408:t[n]=6407,t},{}),ot=[],ft=[],Ct=0,pt={},It=r.maxTextureUnits,vt=Array(It).map(function(){return null});return V(D.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(0>e){for(var r=0;r<It;++r){var n=vt[r];if(n){if(0<n.bindCount)continue;n.unit=-1}vt[r]=this,e=r;break}a.profile&&o.maxTextureUnits<e+1&&(o.maxTextureUnits=e+1),this.unit=e,t.activeTexture(33984+e),t.bindTexture(this.target,this.texture)}return e},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&N(this)}}),a.profile&&(o.getTotalTextureSize=function(){var t=0;return Object.keys(pt).forEach(function(e){t+=pt[e].stats.size}),t}),{create2D:function(e,r){function n(t,e){var r=i.texInfo;O.call(r);var o=M();return"number"==typeof t?w(o,0|t,"number"==typeof e?0|e:0|t):t?(S(r,t),k(o,t)):w(o,1,1),r.genMipmaps&&(o.mipmask=(o.width<<1)-1),i.mipmask=o.mipmask,g(i,o),i.internalformat=o.internalformat,n.width=o.width,n.height=o.height,L(i),T(o,3553),R(r,3553),P(),E(o),a.profile&&(i.stats.size=x(i.internalformat,i.type,o.width,o.height,r.genMipmaps,!1)),n.format=$[i.internalformat],n.type=tt[i.type],n.mag=et[r.magFilter],n.min=rt[r.minFilter],n.wrapS=nt[r.wrapS],n.wrapT=nt[r.wrapT],n}var i=new D(3553);return pt[i.id]=i,o.textureCount++,n(e,r),n.subimage=function(t,e,r,o){e|=0,r|=0,o|=0;var a=p();return g(a,i),a.width=0,a.height=0,d(a,t),a.width=a.width||(i.width>>o)-e,a.height=a.height||(i.height>>o)-r,L(i),A(a,3553,e,r,o),P(),_(a),n},n.resize=function(e,r){var o=0|e,s=0|r||o;if(o===i.width&&s===i.height)return n;n.width=i.width=o,n.height=i.height=s,L(i);for(var l=0;i.mipmask>>l;++l){var g=o>>l,c=s>>l;if(!g||!c)break;t.texImage2D(3553,l,i.format,g,c,0,i.format,i.type,null)}return P(),a.profile&&(i.stats.size=x(i.internalformat,i.type,o,s,!1,!1)),n},n._reglType="texture2d",n._texture=i,a.profile&&(n.stats=i.stats),n.destroy=function(){i.decRef()},n},createCube:function(e,r,n,i,s,l){function u(t,e,r,n,i,o){var s,l=h.texInfo;for(O.call(l),s=0;6>s;++s)f[s]=M();if("number"!=typeof t&&t){if("object"==typeof t)if(e)k(f[0],t),k(f[1],e),k(f[2],r),k(f[3],n),k(f[4],i),k(f[5],o);else if(S(l,t),c(h,t),"faces"in t)for(t=t.faces,s=0;6>s;++s)g(f[s],h),k(f[s],t[s]);else for(s=0;6>s;++s)k(f[s],t)}else for(t=0|t||1,s=0;6>s;++s)w(f[s],t,t);for(g(h,f[0]),h.mipmask=l.genMipmaps?(f[0].width<<1)-1:f[0].mipmask,h.internalformat=f[0].internalformat,u.width=f[0].width,u.height=f[0].height,L(h),s=0;6>s;++s)T(f[s],34069+s);for(R(l,34067),P(),a.profile&&(h.stats.size=x(h.internalformat,h.type,u.width,u.height,l.genMipmaps,!0)),u.format=$[h.internalformat],u.type=tt[h.type],u.mag=et[l.magFilter],u.min=rt[l.minFilter],u.wrapS=nt[l.wrapS],u.wrapT=nt[l.wrapT],s=0;6>s;++s)E(f[s]);return u}var h=new D(34067);pt[h.id]=h,o.cubeCount++;var f=Array(6);return u(e,r,n,i,s,l),u.subimage=function(t,e,r,n,i){r|=0,n|=0,i|=0;var o=p();return g(o,h),o.width=0,o.height=0,d(o,e),o.width=o.width||(h.width>>i)-r,o.height=o.height||(h.height>>i)-n,L(h),A(o,34069+t,r,n,i),P(),_(o),u},u.resize=function(e){if((e|=0)!==h.width){u.width=h.width=e,u.height=h.height=e,L(h);for(var r=0;6>r;++r)for(var n=0;h.mipmask>>n;++n)t.texImage2D(34069+r,n,h.format,e>>n,e>>n,0,h.format,h.type,null);return P(),a.profile&&(h.stats.size=x(h.internalformat,h.type,u.width,u.height,!1,!0)),u}},u._reglType="textureCube",u._texture=h,a.profile&&(u.stats=h.stats),u.destroy=function(){h.decRef()},u},clear:function(){for(var e=0;e<It;++e)t.activeTexture(33984+e),t.bindTexture(3553,null),vt[e]=null;q(pt).forEach(N),o.cubeCount=0,o.textureCount=0},getTexture:function(t){return null},restore:function(){for(var e=0;e<It;++e){var r=vt[e];r&&(r.bindCount=0,r.unit=-1,vt[e]=null)}q(pt).forEach(function(e){e.texture=t.createTexture(),t.bindTexture(e.target,e.texture);for(var r=0;32>r;++r)if(0!=(e.mipmask&1<<r))if(3553===e.target)t.texImage2D(3553,r,e.internalformat,e.width>>r,e.height>>r,0,e.internalformat,e.type,null);else for(var n=0;6>n;++n)t.texImage2D(34069+n,r,e.internalformat,e.width>>r,e.height>>r,0,e.internalformat,e.type,null);R(e.texInfo,e.target)})}}}function w(t,e,r,n,i,o){function a(t,e,r){this.target=t,this.texture=e,this.renderbuffer=r;var n=t=0;e?(t=e.width,n=e.height):r&&(t=r.width,n=r.height),this.width=t,this.height=n}function s(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function l(t,e,r){t&&(t.texture?t.texture._texture.refCount+=1:t.renderbuffer._renderbuffer.refCount+=1)}function g(e,r){r&&(r.texture?t.framebufferTexture2D(36160,e,r.target,r.texture._texture.texture,0):t.framebufferRenderbuffer(36160,e,36161,r.renderbuffer._renderbuffer.renderbuffer))}function c(t){var e=3553,r=null,n=null,i=t;return"object"==typeof t&&(i=t.data,"target"in t&&(e=0|t.target)),"texture2d"===(t=i._reglType)?r=i:"textureCube"===t?r=i:"renderbuffer"===t&&(n=i,e=36161),new a(e,r,n)}function u(t,e,r,o,s){return r?((t=n.create2D({width:t,height:e,format:o,type:s}))._texture.refCount=0,new a(3553,t,null)):((t=i.create({width:t,height:e,format:o}))._renderbuffer.refCount=0,new a(36161,null,t))}function h(t){return t&&(t.texture||t.renderbuffer)}function d(t,e,r){t&&(t.texture?t.texture.resize(e,r):t.renderbuffer&&t.renderbuffer.resize(e,r),t.width=e,t.height=r)}function A(){this.id=x++,_[this.id]=this,this.framebuffer=t.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function f(t){t.colorAttachments.forEach(s),s(t.depthAttachment),s(t.stencilAttachment),s(t.depthStencilAttachment)}function C(e){t.deleteFramebuffer(e.framebuffer),e.framebuffer=null,o.framebufferCount--,delete _[e.id]}function p(e){var n;t.bindFramebuffer(36160,e.framebuffer);var i=e.colorAttachments;for(n=0;n<i.length;++n)g(36064+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(36160,36064+n,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0),t.framebufferTexture2D(36160,36096,3553,null,0),t.framebufferTexture2D(36160,36128,3553,null,0),g(36096,e.depthAttachment),g(36128,e.stencilAttachment),g(33306,e.depthStencilAttachment),t.checkFramebufferStatus(36160),t.isContextLost(),t.bindFramebuffer(36160,v.next?v.next.framebuffer:null),v.cur=v.next,t.getError()}function I(t,e){function r(t,e){var i,o=0,a=0,s=!0,g=!0;i=null;var d=!0,A="rgba",C="uint8",I=1,v=null,b=null,x=null,_=!1;"number"==typeof t?(o=0|t,a=0|e||o):t?("shape"in t?(o=(a=t.shape)[0],a=a[1]):("radius"in t&&(o=a=t.radius),"width"in t&&(o=t.width),"height"in t&&(a=t.height)),("color"in t||"colors"in t)&&(i=t.color||t.colors,Array.isArray(i)),i||("colorCount"in t&&(I=0|t.colorCount),"colorTexture"in t&&(d=!!t.colorTexture,A="rgba4"),"colorType"in t&&(C=t.colorType,!d)&&("half float"===C||"float16"===C?A="rgba16f":"float"!==C&&"float32"!==C||(A="rgba32f")),"colorFormat"in t&&(A=t.colorFormat,0<=m.indexOf(A)?d=!0:0<=y.indexOf(A)&&(d=!1))),("depthTexture"in t||"depthStencilTexture"in t)&&(_=!(!t.depthTexture&&!t.depthStencilTexture)),"depth"in t&&("boolean"==typeof t.depth?s=t.depth:(v=t.depth,g=!1)),"stencil"in t&&("boolean"==typeof t.stencil?g=t.stencil:(b=t.stencil,s=!1)),"depthStencil"in t&&("boolean"==typeof t.depthStencil?s=g=t.depthStencil:(x=t.depthStencil,g=s=!1))):o=a=1;var w=null,k=null,T=null,M=null;if(Array.isArray(i))w=i.map(c);else if(i)w=[c(i)];else for(w=Array(I),i=0;i<I;++i)w[i]=u(o,a,d,A,C);for(o=o||w[0].width,a=a||w[0].height,v?k=c(v):s&&!g&&(k=u(o,a,_,"depth","uint32")),b?T=c(b):g&&!s&&(T=u(o,a,!1,"stencil","uint8")),x?M=c(x):!v&&!b&&g&&s&&(M=u(o,a,_,"depth stencil","depth stencil")),s=null,i=0;i<w.length;++i)l(w[i]),w[i]&&w[i].texture&&(g=mt[w[i].texture._texture.format]*yt[w[i].texture._texture.type],null===s&&(s=g));return l(k),l(T),l(M),f(n),n.width=o,n.height=a,n.colorAttachments=w,n.depthAttachment=k,n.stencilAttachment=T,n.depthStencilAttachment=M,r.color=w.map(h),r.depth=h(k),r.stencil=h(T),r.depthStencil=h(M),r.width=n.width,r.height=n.height,p(n),r}var n=new A;return o.framebufferCount++,r(t,e),V(r,{resize:function(t,e){var i=Math.max(0|t,1),o=Math.max(0|e||i,1);if(i===n.width&&o===n.height)return r;for(var a=n.colorAttachments,s=0;s<a.length;++s)d(a[s],i,o);return d(n.depthAttachment,i,o),d(n.stencilAttachment,i,o),d(n.depthStencilAttachment,i,o),n.width=r.width=i,n.height=r.height=o,p(n),r},_reglType:"framebuffer",_framebuffer:n,destroy:function(){C(n),f(n)},use:function(t){v.setFBO({framebuffer:r},t)}})}var v={cur:null,next:null,dirty:!1,setFBO:null},m=["rgba"],y=["rgba4","rgb565","rgb5 a1"];e.ext_srgb&&y.push("srgba"),e.ext_color_buffer_half_float&&y.push("rgba16f","rgb16f"),e.webgl_color_buffer_float&&y.push("rgba32f");var b=["uint8"];e.oes_texture_half_float&&b.push("half float","float16"),e.oes_texture_float&&b.push("float","float32");var x=0,_={};return V(v,{getFramebuffer:function(t){return"function"==typeof t&&"framebuffer"===t._reglType&&(t=t._framebuffer)instanceof A?t:null},create:I,createCube:function(t){function e(t){var i,o={color:null},a=0,s=null;i="rgba";var l="uint8",g=1;if("number"==typeof t?a=0|t:t?("shape"in t?a=t.shape[0]:("radius"in t&&(a=0|t.radius),"width"in t?a=0|t.width:"height"in t&&(a=0|t.height)),("color"in t||"colors"in t)&&(s=t.color||t.colors,Array.isArray(s)),s||("colorCount"in t&&(g=0|t.colorCount),"colorType"in t&&(l=t.colorType),"colorFormat"in t&&(i=t.colorFormat)),"depth"in t&&(o.depth=t.depth),"stencil"in t&&(o.stencil=t.stencil),"depthStencil"in t&&(o.depthStencil=t.depthStencil)):a=1,s)if(Array.isArray(s))for(t=[],i=0;i<s.length;++i)t[i]=s[i];else t=[s];else for(t=Array(g),s={radius:a,format:i,type:l},i=0;i<g;++i)t[i]=n.createCube(s);for(o.color=Array(t.length),i=0;i<t.length;++i)g=t[i],a=a||g.width,o.color[i]={target:34069,data:t[i]};for(i=0;6>i;++i){for(g=0;g<t.length;++g)o.color[g].target=34069+i;0<i&&(o.depth=r[0].depth,o.stencil=r[0].stencil,o.depthStencil=r[0].depthStencil),r[i]?r[i](o):r[i]=I(o)}return V(e,{width:a,height:a,color:t})}var r=Array(6);return e(t),V(e,{faces:r,resize:function(t){var n=0|t;if(n===e.width)return e;var i=e.color;for(t=0;t<i.length;++t)i[t].resize(n);for(t=0;6>t;++t)r[t].resize(n);return e.width=e.height=n,e},_reglType:"framebufferCube",destroy:function(){r.forEach(function(t){t.destroy()})}})},clear:function(){q(_).forEach(C)},restore:function(){v.cur=null,v.next=null,v.dirty=!0,q(_).forEach(function(e){e.framebuffer=t.createFramebuffer(),p(e)})}})}function k(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function T(t,e,r,n,i){function o(){this.id=++g,this.attributes=[];var t=e.oes_vertex_array_object;this.vao=t?t.createVertexArrayOES():null,c[this.id]=this,this.buffers=[]}var a=r.maxAttributes,s=Array(a);for(r=0;r<a;++r)s[r]=new k;var g=0,c={},u={Record:k,scope:{},state:s,currentVAO:null,targetVAO:null,restore:e.oes_vertex_array_object?function(){e.oes_vertex_array_object&&q(c).forEach(function(t){t.refresh()})}:function(){},createVAO:function(t){function e(t){for(var n=0;n<r.buffers.length;++n)r.buffers[n].destroy();r.buffers.length=0,(n=r.attributes).length=t.length;for(var o=0;o<t.length;++o){var a=t[o],s=n[o]=new k;Array.isArray(a)||X(a)||l(a)?(a=i.create(a,34962,!1,!0),s.buffer=i.getBuffer(a),s.size=0|s.buffer.dimension,s.normalized=!1,s.type=s.buffer.dtype,s.offset=0,s.stride=0,s.divisor=0,s.state=1,r.buffers.push(a)):i.getBuffer(a)?(s.buffer=i.getBuffer(a),s.size=0|s.buffer.dimension,s.normalized=!1,s.type=s.buffer.dtype,s.offset=0,s.stride=0,s.divisor=0,s.state=1):i.getBuffer(a.buffer)?(s.buffer=i.getBuffer(a.buffer),s.size=0|(+a.size||s.buffer.dimension),s.normalized=!!a.normalized||!1,s.type="type"in a?J[a.type]:s.buffer.dtype,s.offset=0|(a.offset||0),s.stride=0|(a.stride||0),s.divisor=0|(a.divisor||0),s.state=1):"x"in a&&(s.x=+a.x||0,s.y=+a.y||0,s.z=+a.z||0,s.w=+a.w||0,s.state=2)}return r.refresh(),e}var r=new o;return n.vaoCount+=1,e.destroy=function(){r.destroy()},e._vao=r,e._reglType="vao",e(t)},getVAO:function(t){return"function"==typeof t&&t._vao?t._vao:null},destroyBuffer:function(e){for(var r=0;r<s.length;++r){var n=s[r];n.buffer===e&&(t.disableVertexAttribArray(r),n.buffer=null)}},setVAO:e.oes_vertex_array_object?function(t){if(t!==u.currentVAO){var r=e.oes_vertex_array_object;t?r.bindVertexArrayOES(t.vao):r.bindVertexArrayOES(null),u.currentVAO=t}}:function(r){if(r!==u.currentVAO){if(r)r.bindAttrs();else for(var n=e.angle_instanced_arrays,i=0;i<s.length;++i){var o=s[i];o.buffer?(t.enableVertexAttribArray(i),t.vertexAttribPointer(i,o.size,o.type,o.normalized,o.stride,o.offfset),n&&n.vertexAttribDivisorANGLE(i,o.divisor)):(t.disableVertexAttribArray(i),t.vertexAttrib4f(i,o.x,o.y,o.z,o.w))}u.currentVAO=r}},clear:e.oes_vertex_array_object?function(t){q(c).forEach(function(t){t.destroy()})}:function(){}};return o.prototype.bindAttrs=function(){for(var r=e.angle_instanced_arrays,n=this.attributes,i=0;i<n.length;++i){var o=n[i];o.buffer?(t.enableVertexAttribArray(i),t.bindBuffer(34962,o.buffer.buffer),t.vertexAttribPointer(i,o.size,o.type,o.normalized,o.stride,o.offset),r&&r.vertexAttribDivisorANGLE(i,o.divisor)):(t.disableVertexAttribArray(i),t.vertexAttrib4f(i,o.x,o.y,o.z,o.w))}for(r=n.length;r<a;++r)t.disableVertexAttribArray(r)},o.prototype.refresh=function(){var t=e.oes_vertex_array_object;t&&(t.bindVertexArrayOES(this.vao),this.bindAttrs(),u.currentVAO=this)},o.prototype.destroy=function(){if(this.vao){var t=e.oes_vertex_array_object;this===u.currentVAO&&(u.currentVAO=null,t.bindVertexArrayOES(null)),t.deleteVertexArrayOES(this.vao),this.vao=null}c[this.id]&&(delete c[this.id],--n.vaoCount)},u}function M(t,e,r,n){function i(t,e,r,n){this.name=t,this.id=e,this.location=r,this.info=n}function o(t,e){for(var r=0;r<t.length;++r)if(t[r].id===e.id)return void(t[r].location=e.location);t.push(e)}function a(r,n,i){if(!(a=(i=35632===r?g:c)[n])){var o=e.str(n),a=t.createShader(r);t.shaderSource(a,o),t.compileShader(a),i[n]=a}return a}function s(t,e){this.id=d++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],n.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function l(r,s,l){var g;g=a(35632,r.fragId);var c=a(35633,r.vertId);if(s=r.program=t.createProgram(),t.attachShader(s,g),t.attachShader(s,c),l)for(g=0;g<l.length;++g)c=l[g],t.bindAttribLocation(s,c[0],c[1]);t.linkProgram(s),c=t.getProgramParameter(s,35718),n.profile&&(r.stats.uniformsCount=c);var u=r.uniforms;for(l=0;l<c;++l)if(g=t.getActiveUniform(s,l))if(1<g.size)for(var h=0;h<g.size;++h){var d=g.name.replace("[0]","["+h+"]");o(u,new i(d,e.id(d),t.getUniformLocation(s,d),g))}else o(u,new i(g.name,e.id(g.name),t.getUniformLocation(s,g.name),g));for(c=t.getProgramParameter(s,35721),n.profile&&(r.stats.attributesCount=c),r=r.attributes,l=0;l<c;++l)(g=t.getActiveAttrib(s,l))&&o(r,new i(g.name,e.id(g.name),t.getAttribLocation(s,g.name),g))}var g={},c={},u={},h=[],d=0;return n.profile&&(r.getMaxUniformsCount=function(){var t=0;return h.forEach(function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)}),t},r.getMaxAttributesCount=function(){var t=0;return h.forEach(function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)}),t}),{clear:function(){var e=t.deleteShader.bind(t);q(g).forEach(e),g={},q(c).forEach(e),c={},h.forEach(function(e){t.deleteProgram(e.program)}),h.length=0,u={},r.shaderCount=0},program:function(t,e,n,i){var o=u[e];o||(o=u[e]={});var a=o[t];return a&&!i?a:(e=new s(e,t),r.shaderCount++,l(e,n,i),a||(o[t]=e),h.push(e),e)},restore:function(){g={},c={};for(var t=0;t<h.length;++t)l(h[t],null,h[t].attributes.map(function(t){return[t.location,t.name]}))},shader:a,frag:-1,vert:-1}}function E(t,e,r,n,i,o,a){function s(i){var o;o=null===e.next?5121:e.next.colorAttachments[0].texture._texture.type;var a=0,s=0,l=n.framebufferWidth,g=n.framebufferHeight,c=null;return X(i)?c=i:i&&(a=0|i.x,s=0|i.y,l=0|(i.width||n.framebufferWidth-a),g=0|(i.height||n.framebufferHeight-s),c=i.data||null),r(),i=l*g*4,c||(5121===o?c=new Uint8Array(i):5126===o&&(c=c||new Float32Array(i))),t.pixelStorei(3333,4),t.readPixels(a,s,l,g,6408,o,c),c}return function(t){return t&&"framebuffer"in t?function(t){var r;return e.setFBO({framebuffer:t.framebuffer},function(){r=s(t)}),r}(t):s(t)}}function O(t){return Array.prototype.slice.call(t)}function S(t){return O(t).join("")}function R(){function t(){var t=[],e=[];return V(function(){t.push.apply(t,O(arguments))},{def:function(){var n="v"+r++;return e.push(n),0<arguments.length&&(t.push(n,"="),t.push.apply(t,O(arguments)),t.push(";")),n},toString:function(){return S([0<e.length?"var "+e.join(",")+";":"",S(t)])}})}function e(){function e(t,e){n(t,e,"=",r.def(t,e),";")}var r=t(),n=t(),i=r.toString,o=n.toString;return V(function(){r.apply(r,O(arguments))},{def:r.def,entry:r,exit:n,save:e,set:function(t,n,i){e(t,n),r(t,n,"=",i,";")},toString:function(){return i()+o()}})}var r=0,n=[],i=[],o=t(),a={};return{global:o,link:function(t){for(var e=0;e<i.length;++e)if(i[e]===t)return n[e];return e="g"+r++,n.push(e),i.push(t),e},block:t,proc:function(t,r){function n(){var t="a"+i.length;return i.push(t),t}var i=[];r=r||0;for(var o=0;o<r;++o)n();var s=(o=e()).toString;return a[t]=V(o,{arg:n,toString:function(){return S(["function(",i.join(),"){",s(),"}"])}})},scope:e,cond:function(){var t=S(arguments),r=e(),n=e(),i=r.toString,o=n.toString;return V(r,{then:function(){return r.apply(r,O(arguments)),this},else:function(){return n.apply(n,O(arguments)),this},toString:function(){var e=o();return e&&(e="else{"+e+"}"),S(["if(",t,"){",i(),"}",e])}})},compile:function(){var t=['"use strict";',o,"return {"];Object.keys(a).forEach(function(e){t.push('"',e,'":',a[e].toString(),",")}),t.push("}");var e=S(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(e)).apply(null,i)}}}function D(t){return Array.isArray(t)||X(t)||l(t)}function L(t){return t.sort(function(t,e){return"viewport"===t?-1:"viewport"===e?1:t<e?-1:1})}function P(t,e,r,n){this.thisDep=t,this.contextDep=e,this.propDep=r,this.append=n}function N(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function z(t){return new P(!1,!1,!1,t)}function F(t,e){var r=t.type;return 0===r?new P(!0,1<=(r=t.data.length),2<=r,e):4===r?new P((r=t.data).thisDep,r.contextDep,r.propDep,e):new P(3===r,2===r,1===r,e)}function B(t,e,r,n,i,a,s,l,g,c,u,h,d,A,f){function p(t){return t.replace(".","_")}function I(t,e,r){var n=p(t);rt.push(t),et[n]=tt[n]=!!r,it[n]=e}function v(t,e,r){var n=p(t);rt.push(t),Array.isArray(r)?(tt[n]=r.slice(),et[n]=r.slice()):tt[n]=et[n]=r,ot[n]=e}function m(){var t=R(),r=t.link,n=t.global;t.id=lt++,t.batchId="0";var i=r(at),o=t.shared={props:"a0"};Object.keys(at).forEach(function(t){o[t]=n.def(i,".",t)});var a=t.next={},s=t.current={};Object.keys(ot).forEach(function(t){Array.isArray(tt[t])&&(a[t]=n.def(o.next,".",t),s[t]=n.def(o.current,".",t))});var l=t.constants={};Object.keys(st).forEach(function(t){l[t]=n.def(JSON.stringify(st[t]))}),t.invoke=function(e,n){switch(n.type){case 0:var i=["this",o.context,o.props,t.batchId];return e.def(r(n.data),".call(",i.slice(0,Math.max(n.data.length+1,4)),")");case 1:return e.def(o.props,n.data);case 2:return e.def(o.context,n.data);case 3:return e.def("this",n.data);case 4:return n.data.append(t,e),n.data.ref}},t.attribCache={};var g={};return t.scopeAttrib=function(t){if((t=e.id(t))in g)return g[t];var n=c.scope[t];return n||(n=c.scope[t]=new q),g[t]=r(n)},t}function y(t,e){var r=t.static,n=t.dynamic;if("framebuffer"in r){var i=r.framebuffer;return i?(i=l.getFramebuffer(i),z(function(t,e){var r=t.link(i),n=t.shared;return e.set(n.framebuffer,".next",r),n=n.context,e.set(n,".framebufferWidth",r+".width"),e.set(n,".framebufferHeight",r+".height"),r})):z(function(t,e){var r=t.shared;return e.set(r.framebuffer,".next","null"),r=r.context,e.set(r,".framebufferWidth",r+".drawingBufferWidth"),e.set(r,".framebufferHeight",r+".drawingBufferHeight"),"null"})}if("framebuffer"in n){var o=n.framebuffer;return F(o,function(t,e){var r=t.invoke(e,o),n=t.shared,i=n.framebuffer;r=e.def(i,".getFramebuffer(",r,")");return e.set(i,".next",r),n=n.context,e.set(n,".framebufferWidth",r+"?"+r+".width:"+n+".drawingBufferWidth"),e.set(n,".framebufferHeight",r+"?"+r+".height:"+n+".drawingBufferHeight"),r})}return null}function b(t,r,n){function i(t){if(t in o){var r=e.id(o[t]);return(t=z(function(){return r})).id=r,t}if(t in a){var n=a[t];return F(n,function(t,e){var r=t.invoke(e,n);return e.def(t.shared.strings,".id(",r,")")})}return null}var o=t.static,a=t.dynamic,s=i("frag"),l=i("vert"),g=null;return N(s)&&N(l)?(g=u.program(l.id,s.id,null,n),t=z(function(t,e){return t.link(g)})):t=new P(s&&s.thisDep||l&&l.thisDep,s&&s.contextDep||l&&l.contextDep,s&&s.propDep||l&&l.propDep,function(t,e){var r,n,i=t.shared.shader;return r=s?s.append(t,e):e.def(i,".","frag"),n=l?l.append(t,e):e.def(i,".","vert"),e.def(i+".program("+n+","+r+")")}),{frag:s,vert:l,progVar:t,program:g}}function x(t,e){function r(t,e){if(t in n){var r=0|n[t];return z(function(t,n){return e&&(t.OFFSET=r),r})}if(t in i){var a=i[t];return F(a,function(t,r){var n=t.invoke(r,a);return e&&(t.OFFSET=n),n})}return e&&o?z(function(t,e){return t.OFFSET="0",0}):null}var n=t.static,i=t.dynamic,o=function(){if("elements"in n){var t=n.elements;D(t)?t=a.getElements(a.create(t,!0)):t&&(t=a.getElements(t));var e=z(function(e,r){if(t){var n=e.link(t);return e.ELEMENTS=n}return e.ELEMENTS=null});return e.value=t,e}if("elements"in i){var r=i.elements;return F(r,function(t,e){var n=(i=t.shared).isBufferArgs,i=i.elements,o=t.invoke(e,r),a=e.def("null");n=e.def(n,"(",o,")"),o=t.cond(n).then(a,"=",i,".createStream(",o,");").else(a,"=",i,".getElements(",o,");");return e.entry(o),e.exit(t.cond(n).then(i,".destroyStream(",a,");")),t.ELEMENTS=a})}return null}(),s=r("offset",!0);return{elements:o,primitive:function(){if("primitive"in n){var t=n.primitive;return z(function(e,r){return nt[t]})}if("primitive"in i){var e=i.primitive;return F(e,function(t,r){var n=t.constants.primTypes,i=t.invoke(r,e);return r.def(n,"[",i,"]")})}return o?N(o)?o.value?z(function(t,e){return e.def(t.ELEMENTS,".primType")}):z(function(){return 4}):new P(o.thisDep,o.contextDep,o.propDep,function(t,e){var r=t.ELEMENTS;return e.def(r,"?",r,".primType:",4)}):null}(),count:function(){if("count"in n){var t=0|n.count;return z(function(){return t})}if("count"in i){var e=i.count;return F(e,function(t,r){return t.invoke(r,e)})}return o?N(o)?o?s?new P(s.thisDep,s.contextDep,s.propDep,function(t,e){return e.def(t.ELEMENTS,".vertCount-",t.OFFSET)}):z(function(t,e){return e.def(t.ELEMENTS,".vertCount")}):z(function(){return-1}):new P(o.thisDep||s.thisDep,o.contextDep||s.contextDep,o.propDep||s.propDep,function(t,e){var r=t.ELEMENTS;return t.OFFSET?e.def(r,"?",r,".vertCount-",t.OFFSET,":-1"):e.def(r,"?",r,".vertCount:-1")}):null}(),instances:r("instances",!1),offset:s}}function _(t,r){var n=t.static,o=t.dynamic,a={};return Object.keys(n).forEach(function(t){var r=n[t],o=e.id(t),s=new q;if(D(r))s.state=1,s.buffer=i.getBuffer(i.create(r,34962,!1,!0)),s.type=0;else if(g=i.getBuffer(r))s.state=1,s.buffer=g,s.type=0;else if("constant"in r){var l=r.constant;s.buffer="null",s.state=2,"number"==typeof l?s.x=l:bt.forEach(function(t,e){e<l.length&&(s[t]=l[e])})}else{var g=D(r.buffer)?i.getBuffer(i.create(r.buffer,34962,!1,!0)):i.getBuffer(r.buffer),c=0|r.offset,u=0|r.stride,h=0|r.size,d=!!r.normalized,A=0;"type"in r&&(A=J[r.type]),r=0|r.divisor,s.buffer=g,s.state=1,s.size=h,s.normalized=d,s.type=A||g.dtype,s.offset=c,s.stride=u,s.divisor=r}a[t]=z(function(t,e){var r=t.attribCache;if(o in r)return r[o];var n={isStream:!1};return Object.keys(s).forEach(function(t){n[t]=s[t]}),s.buffer&&(n.buffer=t.link(s.buffer),n.type=n.type||n.buffer+".dtype"),r[o]=n})}),Object.keys(o).forEach(function(t){var e=o[t];a[t]=F(e,function(t,r){function n(t){r(l[t],"=",i,".",t,"|0;")}var i=t.invoke(r,e),o=t.shared,a=t.constants,s=o.isBufferArgs,l=(o=o.buffer,{isStream:r.def(!1)}),g=new q;g.state=1,Object.keys(g).forEach(function(t){l[t]=r.def(""+g[t])});var c=l.buffer,u=l.type;return r("if(",s,"(",i,")){",l.isStream,"=true;",c,"=",o,".createStream(",34962,",",i,");",u,"=",c,".dtype;","}else{",c,"=",o,".getBuffer(",i,");","if(",c,"){",u,"=",c,".dtype;",'}else if("constant" in ',i,"){",l.state,"=",2,";","if(typeof "+i+'.constant === "number"){',l[bt[0]],"=",i,".constant;",bt.slice(1).map(function(t){return l[t]}).join("="),"=0;","}else{",bt.map(function(t,e){return l[t]+"="+i+".constant.length>"+e+"?"+i+".constant["+e+"]:0;"}).join(""),"}}else{","if(",s,"(",i,".buffer)){",c,"=",o,".createStream(",34962,",",i,".buffer);","}else{",c,"=",o,".getBuffer(",i,".buffer);","}",u,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",c,".dtype;",l.normalized,"=!!",i,".normalized;"),n("size"),n("offset"),n("stride"),n("divisor"),r("}}"),r.exit("if(",l.isStream,"){",o,".destroyStream(",c,");","}"),l})}),a}function w(t,e,n,i,a){function s(t){var e=g[t];e&&(h[t]=e)}var l=function(t,e){if("string"==typeof(r=t.static).frag&&"string"==typeof r.vert){if(0<Object.keys(e.dynamic).length)return null;var r=e.static,n=Object.keys(r);if(0<n.length&&"number"==typeof r[n[0]]){for(var i=[],o=0;o<n.length;++o)i.push([0|r[n[o]],n[o]]);return i}}return null}(t,e),g=function(t,e,r){function n(t){if(t in i){var r=i[t];t=!0;var n,a,s=0|r.x,l=0|r.y;return"width"in r?n=0|r.width:t=!1,"height"in r?a=0|r.height:t=!1,new P(!t&&e&&e.thisDep,!t&&e&&e.contextDep,!t&&e&&e.propDep,function(t,e){var i=t.shared.context,o=n;"width"in r||(o=e.def(i,".","framebufferWidth","-",s));var g=a;return"height"in r||(g=e.def(i,".","framebufferHeight","-",l)),[s,l,o,g]})}if(t in o){var g=o[t];return t=F(g,function(t,e){var r=t.invoke(e,g),n=t.shared.context,i=e.def(r,".x|0"),o=e.def(r,".y|0");return[i,o,e.def('"width" in ',r,"?",r,".width|0:","(",n,".","framebufferWidth","-",i,")"),r=e.def('"height" in ',r,"?",r,".height|0:","(",n,".","framebufferHeight","-",o,")")]}),e&&(t.thisDep=t.thisDep||e.thisDep,t.contextDep=t.contextDep||e.contextDep,t.propDep=t.propDep||e.propDep),t}return e?new P(e.thisDep,e.contextDep,e.propDep,function(t,e){var r=t.shared.context;return[0,0,e.def(r,".","framebufferWidth"),e.def(r,".","framebufferHeight")]}):null}var i=t.static,o=t.dynamic;if(t=n("viewport")){var a=t;t=new P(t.thisDep,t.contextDep,t.propDep,function(t,e){var r=a.append(t,e),n=t.shared.context;return e.set(n,".viewportWidth",r[2]),e.set(n,".viewportHeight",r[3]),r})}return{viewport:t,scissor_box:n("scissor.box")}}(t,A=y(t)),u=x(t),h=function(t,e){var r=t.static,n=t.dynamic,i={};return rt.forEach(function(t){function e(e,o){if(t in r){var s=e(r[t]);i[a]=z(function(){return s})}else if(t in n){var l=n[t];i[a]=F(l,function(t,e){return o(t,e,t.invoke(e,l))})}}var a=p(t);switch(t){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return e(function(t){return t},function(t,e,r){return r});case"depth.func":return e(function(t){return wt[t]},function(t,e,r){return e.def(t.constants.compareFuncs,"[",r,"]")});case"depth.range":return e(function(t){return t},function(t,e,r){return[e.def("+",r,"[0]"),e=e.def("+",r,"[1]")]});case"blend.func":return e(function(t){return[_t["srcRGB"in t?t.srcRGB:t.src],_t["dstRGB"in t?t.dstRGB:t.dst],_t["srcAlpha"in t?t.srcAlpha:t.src],_t["dstAlpha"in t?t.dstAlpha:t.dst]]},function(t,e,r){function n(t,n){return e.def('"',t,n,'" in ',r,"?",r,".",t,n,":",r,".",t)}t=t.constants.blendFuncs;var i=n("src","RGB"),o=n("dst","RGB"),a=(i=e.def(t,"[",i,"]"),e.def(t,"[",n("src","Alpha"),"]"));return[i,o=e.def(t,"[",o,"]"),a,t=e.def(t,"[",n("dst","Alpha"),"]")]});case"blend.equation":return e(function(t){return"string"==typeof t?[Q[t],Q[t]]:"object"==typeof t?[Q[t.rgb],Q[t.alpha]]:void 0},function(t,e,r){var n=t.constants.blendEquations,i=e.def(),o=e.def();return(t=t.cond("typeof ",r,'==="string"')).then(i,"=",o,"=",n,"[",r,"];"),t.else(i,"=",n,"[",r,".rgb];",o,"=",n,"[",r,".alpha];"),e(t),[i,o]});case"blend.color":return e(function(t){return o(4,function(e){return+t[e]})},function(t,e,r){return o(4,function(t){return e.def("+",r,"[",t,"]")})});case"stencil.mask":return e(function(t){return 0|t},function(t,e,r){return e.def(r,"|0")});case"stencil.func":return e(function(t){return[wt[t.cmp||"keep"],t.ref||0,"mask"in t?t.mask:-1]},function(t,e,r){return[t=e.def('"cmp" in ',r,"?",t.constants.compareFuncs,"[",r,".cmp]",":",7680),e.def(r,".ref|0"),e=e.def('"mask" in ',r,"?",r,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return e(function(e){return["stencil.opBack"===t?1029:1028,kt[e.fail||"keep"],kt[e.zfail||"keep"],kt[e.zpass||"keep"]]},function(e,r,n){function i(t){return r.def('"',t,'" in ',n,"?",o,"[",n,".",t,"]:",7680)}var o=e.constants.stencilOps;return["stencil.opBack"===t?1029:1028,i("fail"),i("zfail"),i("zpass")]});case"polygonOffset.offset":return e(function(t){return[0|t.factor,0|t.units]},function(t,e,r){return[e.def(r,".factor|0"),e=e.def(r,".units|0")]});case"cull.face":return e(function(t){var e=0;return"front"===t?e=1028:"back"===t&&(e=1029),e},function(t,e,r){return e.def(r,'==="front"?',1028,":",1029)});case"lineWidth":return e(function(t){return t},function(t,e,r){return r});case"frontFace":return e(function(t){return Tt[t]},function(t,e,r){return e.def(r+'==="cw"?2304:2305')});case"colorMask":return e(function(t){return t.map(function(t){return!!t})},function(t,e,r){return o(4,function(t){return"!!"+r+"["+t+"]"})});case"sample.coverage":return e(function(t){return["value"in t?t.value:1,!!t.invert]},function(t,e,r){return[e.def('"value" in ',r,"?+",r,".value:1"),e=e.def("!!",r,".invert")]})}}),i}(t),d=b(t,0,l);s("viewport"),s(p("scissor.box"));var A,f=0<Object.keys(h).length;if((A={framebuffer:A,draw:u,shader:d,state:h,dirty:f,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(t){var e,r=t.static;if(t=t.dynamic,"profile"in r){var n=!!r.profile;(e=z(function(t,e){return n})).enable=n}else if("profile"in t){var i=t.profile;e=F(i,function(t,e){return t.invoke(e,i)})}return e}(t),A.uniforms=function(t,e){var r=t.static,n=t.dynamic,i={};return Object.keys(r).forEach(function(t){var e,n=r[t];if("number"==typeof n||"boolean"==typeof n)e=z(function(){return n});else if("function"==typeof n){var a=n._reglType;"texture2d"===a||"textureCube"===a?e=z(function(t){return t.link(n)}):"framebuffer"!==a&&"framebufferCube"!==a||(e=z(function(t){return t.link(n.color[0])}))}else C(n)&&(e=z(function(t){return t.global.def("[",o(n.length,function(t){return n[t]}),"]")}));e.value=n,i[t]=e}),Object.keys(n).forEach(function(t){var e=n[t];i[t]=F(e,function(t,r){return t.invoke(r,e)})}),i}(n),A.drawVAO=A.scopeVAO=function(t,e){var r=t.static,n=t.dynamic;if("vao"in r){var i=r.vao;return null!==i&&null===c.getVAO(i)&&(i=c.createVAO(i)),z(function(t){return t.link(c.getVAO(i))})}if("vao"in n){var o=n.vao;return F(o,function(t,e){var r=t.invoke(e,o);return e.def(t.shared.vao+".getVAO("+r+")")})}return null}(t),!A.drawVAO&&d.program&&!l&&r.angle_instanced_arrays){var I=!0;if(t=d.program.attributes.map(function(t){return t=e.static[t],I=I&&!!t,t}),I&&0<t.length){var v=c.getVAO(c.createVAO(t));A.drawVAO=new P(null,null,null,function(t,e){return t.link(v)}),A.useVAO=!0}}return l?A.useVAO=!0:A.attributes=_(e),A.context=function(t){var e=t.static,r=t.dynamic,n={};return Object.keys(e).forEach(function(t){var r=e[t];n[t]=z(function(t,e){return"number"==typeof r||"boolean"==typeof r?""+r:t.link(r)})}),Object.keys(r).forEach(function(t){var e=r[t];n[t]=F(e,function(t,r){return t.invoke(r,e)})}),n}(i),A}function k(t,e,r){var n=t.shared.context,i=t.scope();Object.keys(r).forEach(function(o){e.save(n,"."+o),i(n,".",o,"=",r[o].append(t,e),";")}),e(i)}function T(t,e,r,n){var i,o=(s=t.shared).gl,a=s.framebuffer;$&&(i=e.def(s.extensions,".webgl_draw_buffers"));var s=(l=t.constants).drawBuffer,l=l.backBuffer;t=r?r.append(t,e):e.def(a,".next"),n||e("if(",t,"!==",a,".cur){"),e("if(",t,"){",o,".bindFramebuffer(",36160,",",t,".framebuffer);"),$&&e(i,".drawBuffersWEBGL(",s,"[",t,".colorAttachments.length]);"),e("}else{",o,".bindFramebuffer(",36160,",null);"),$&&e(i,".drawBuffersWEBGL(",l,");"),e("}",a,".cur=",t,";"),n||e("}")}function M(t,e,r){var n=t.shared,i=n.gl,a=t.current,s=t.next,l=n.current,g=n.next,c=t.cond(l,".dirty");rt.forEach(function(e){var n,u;if(!((e=p(e))in r.state))if(e in s){n=s[e],u=a[e];var h=o(tt[e].length,function(t){return c.def(n,"[",t,"]")});c(t.cond(h.map(function(t,e){return t+"!=="+u+"["+e+"]"}).join("||")).then(i,".",ot[e],"(",h,");",h.map(function(t,e){return u+"["+e+"]="+t}).join(";"),";"))}else n=c.def(g,".",e),h=t.cond(n,"!==",l,".",e),c(h),e in it?h(t.cond(n).then(i,".enable(",it[e],");").else(i,".disable(",it[e],");"),l,".",e,"=",n,";"):h(i,".",ot[e],"(",n,");",l,".",e,"=",n,";")}),0===Object.keys(r.state).length&&c(l,".dirty=false;"),e(c)}function E(t,e,r,n){var i=t.shared,o=t.current,a=i.current,s=i.gl;L(Object.keys(r)).forEach(function(i){var l=r[i];if(!n||n(l)){var g=l.append(t,e);if(it[i]){var c=it[i];N(l)?e(s,g?".enable(":".disable(",c,");"):e(t.cond(g).then(s,".enable(",c,");").else(s,".disable(",c,");")),e(a,".",i,"=",g,";")}else if(C(g)){var u=o[i];e(s,".",ot[i],"(",g,");",g.map(function(t,e){return u+"["+e+"]="+t}).join(";"),";")}else e(s,".",ot[i],"(",g,");",a,".",i,"=",g,";")}})}function O(t,e){K&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function S(t,e,r,n,i){function o(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function a(t){t(g=e.def(),"=",o(),";"),"string"==typeof i?t(h,".count+=",i,";"):t(h,".count++;"),A&&(n?t(c=e.def(),"=",f,".getNumPendingQueries();"):t(f,".beginQuery(",h,");"))}function s(t){t(h,".cpuTime+=",o(),"-",g,";"),A&&(n?t(f,".pushScopeStats(",c,",",f,".getNumPendingQueries(),",h,");"):t(f,".endQuery();"))}function l(t){var r=e.def(d,".profile");e(d,".profile=",t,";"),e.exit(d,".profile=",r,";")}var g,c,u=t.shared,h=t.stats,d=u.current,f=u.timer;if(r=r.profile){if(N(r))return void(r.enable?(a(e),s(e.exit),l("true")):l("false"));l(r=r.append(t,e))}else r=e.def(d,".profile");a(u=t.block()),e("if(",r,"){",u,"}"),s(t=t.block()),e.exit("if(",r,"){",t,"}")}function B(t,e,r,n,i){function o(r,n,i){function o(){e("if(!",c,".buffer){",l,".enableVertexAttribArray(",g,");}");var r,o=i.type;r=i.size?e.def(i.size,"||",n):n,e("if(",c,".type!==",o,"||",c,".size!==",r,"||",d.map(function(t){return c+"."+t+"!=="+i[t]}).join("||"),"){",l,".bindBuffer(",34962,",",u,".buffer);",l,".vertexAttribPointer(",[g,r,o,i.normalized,i.stride,i.offset],");",c,".type=",o,";",c,".size=",r,";",d.map(function(t){return c+"."+t+"="+i[t]+";"}).join(""),"}"),K&&(o=i.divisor,e("if(",c,".divisor!==",o,"){",t.instancing,".vertexAttribDivisorANGLE(",[g,o],");",c,".divisor=",o,";}"))}function s(){e("if(",c,".buffer){",l,".disableVertexAttribArray(",g,");",c,".buffer=null;","}if(",bt.map(function(t,e){return c+"."+t+"!=="+h[e]}).join("||"),"){",l,".vertexAttrib4f(",g,",",h,");",bt.map(function(t,e){return c+"."+t+"="+h[e]+";"}).join(""),"}")}var l=a.gl,g=e.def(r,".location"),c=e.def(a.attributes,"[",g,"]");r=i.state;var u=i.buffer,h=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];1===r?o():2===r?s():(e("if(",r,"===",1,"){"),o(),e("}else{"),s(),e("}"))}var a=t.shared;n.forEach(function(n){var a,s=n.name,l=r.attributes[s];if(l){if(!i(l))return;a=l.append(t,e)}else{if(!i(Mt))return;var g=t.scopeAttrib(s);a={},Object.keys(new q).forEach(function(t){a[t]=e.def(g,".",t)})}o(t.link(n),function(t){switch(t){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(n.info.type),a)})}function j(t,r,n,i,a){for(var s,l=t.shared,g=l.gl,c=0;c<i.length;++c){var u,h=(f=i[c]).name,d=f.info.type,A=n.uniforms[h],f=t.link(f)+".location";if(A){if(!a(A))continue;if(N(A)){if(h=A.value,35678===d||35680===d)r(g,".uniform1i(",f,",",(d=t.link(h._texture||h.color[0]._texture))+".bind());"),r.exit(d,".unbind();");else if(35674===d||35675===d||35676===d)h=t.global.def("new Float32Array(["+Array.prototype.slice.call(h)+"])"),A=2,35675===d?A=3:35676===d&&(A=4),r(g,".uniformMatrix",A,"fv(",f,",false,",h,");");else{switch(d){case 5126:s="1f";break;case 35664:s="2f";break;case 35665:s="3f";break;case 35666:s="4f";break;case 35670:case 5124:s="1i";break;case 35671:case 35667:s="2i";break;case 35672:case 35668:s="3i";break;case 35673:s="4i";break;case 35669:s="4i"}r(g,".uniform",s,"(",f,",",C(h)?Array.prototype.slice.call(h):h,");")}continue}u=A.append(t,r)}else{if(!a(Mt))continue;u=r.def(l.uniforms,"[",e.id(h),"]")}switch(35678===d?r("if(",u,"&&",u,'._reglType==="framebuffer"){',u,"=",u,".color[0];","}"):35680===d&&r("if(",u,"&&",u,'._reglType==="framebufferCube"){',u,"=",u,".color[0];","}"),h=1,d){case 35678:case 35680:r(g,".uniform1i(",f,",",d=r.def(u,"._texture"),".bind());"),r.exit(d,".unbind();");continue;case 5124:case 35670:s="1i";break;case 35667:case 35671:s="2i",h=2;break;case 35668:case 35672:s="3i",h=3;break;case 35669:case 35673:s="4i",h=4;break;case 5126:s="1f";break;case 35664:s="2f",h=2;break;case 35665:s="3f",h=3;break;case 35666:s="4f",h=4;break;case 35674:s="Matrix2fv";break;case 35675:s="Matrix3fv";break;case 35676:s="Matrix4fv"}if(r(g,".uniform",s,"(",f,","),"M"===s.charAt(0)){f=Math.pow(d-35674+2,2);var p=t.global.def("new Float32Array(",f,")");r("false,(Array.isArray(",u,")||",u," instanceof Float32Array)?",u,":(",o(f,function(t){return p+"["+t+"]="+u+"["+t+"]"}),",",p,")")}else r(1<h?o(h,function(t){return u+"["+t+"]"}):u);r(");")}}function V(t,e,r,n){function i(i){var o=h[i];return o?o.contextDep&&n.contextDynamic||o.propDep?o.append(t,r):o.append(t,e):e.def(u,".",i)}function o(){function t(){r(l,".drawElementsInstancedANGLE(",[A,C,p,f+"<<(("+p+"-5121)>>1)",s],");")}function e(){r(l,".drawArraysInstancedANGLE(",[A,f,C,s],");")}d?I?t():(r("if(",d,"){"),t(),r("}else{"),e(),r("}")):e()}function a(){function t(){r(c+".drawElements("+[A,C,p,f+"<<(("+p+"-5121)>>1)"]+");")}function e(){r(c+".drawArrays("+[A,f,C]+");")}d?I?t():(r("if(",d,"){"),t(),r("}else{"),e(),r("}")):e()}var s,l,g=t.shared,c=g.gl,u=g.draw,h=n.draw,d=function(){var i=h.elements,o=e;return i?((i.contextDep&&n.contextDynamic||i.propDep)&&(o=r),i=i.append(t,o)):i=o.def(u,".","elements"),i&&o("if("+i+")"+c+".bindBuffer(34963,"+i+".buffer.buffer);"),i}(),A=i("primitive"),f=i("offset"),C=function(){var i=h.count,o=e;return i?((i.contextDep&&n.contextDynamic||i.propDep)&&(o=r),i=i.append(t,o)):i=o.def(u,".","count"),i}();if("number"==typeof C){if(0===C)return}else r("if(",C,"){"),r.exit("}");K&&(s=i("instances"),l=t.instancing);var p=d+".type",I=h.elements&&N(h.elements);K&&("number"!=typeof s||0<=s)?"string"==typeof s?(r("if(",s,">0){"),o(),r("}else if(",s,"<0){"),a(),r("}")):o():a()}function G(t,e,r,n,i){return i=(e=m()).proc("body",i),K&&(e.instancing=i.def(e.shared.extensions,".angle_instanced_arrays")),t(e,i,r,n),e.compile().body}function Z(t,e,r,n){O(t,e),r.useVAO?r.drawVAO?e(t.shared.vao,".setVAO(",r.drawVAO.append(t,e),");"):e(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(e(t.shared.vao,".setVAO(null);"),B(t,e,r,n.attributes,function(){return!0})),j(t,e,r,n.uniforms,function(){return!0}),V(t,e,e,r)}function H(t,e,r,n){function i(){return!0}t.batchId="a1",O(t,e),B(t,e,r,n.attributes,i),j(t,e,r,n.uniforms,i),V(t,e,e,r)}function W(t,e,r,n){function i(t){return t.contextDep&&a||t.propDep}function o(t){return!i(t)}O(t,e);var a=r.contextDep,s=e.def(),l=e.def();t.shared.props=l,t.batchId=s;var g=t.scope(),c=t.scope();e(g.entry,"for(",s,"=0;",s,"<","a1",";++",s,"){",l,"=","a0","[",s,"];",c,"}",g.exit),r.needsContext&&k(t,c,r.context),r.needsFramebuffer&&T(t,c,r.framebuffer),E(t,c,r.state,i),r.profile&&i(r.profile)&&S(t,c,r,!1,!0),n?(r.useVAO?r.drawVAO?i(r.drawVAO)?c(t.shared.vao,".setVAO(",r.drawVAO.append(t,c),");"):g(t.shared.vao,".setVAO(",r.drawVAO.append(t,g),");"):g(t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"):(g(t.shared.vao,".setVAO(null);"),B(t,g,r,n.attributes,o),B(t,c,r,n.attributes,i)),j(t,g,r,n.uniforms,o),j(t,c,r,n.uniforms,i),V(t,g,c,r)):(e=t.global.def("{}"),n=r.shader.progVar.append(t,c),l=c.def(n,".id"),g=c.def(e,"[",l,"]"),c(t.shared.gl,".useProgram(",n,".program);","if(!",g,"){",g,"=",e,"[",l,"]=",t.link(function(e){return G(H,t,r,e,2)}),"(",n,");}",g,".call(this,a0[",s,"],",s,");"))}function Y(t,r){function n(e){var n=r.shader[e];n&&i.set(o.shader,"."+e,n.append(t,i))}var i=t.proc("scope",3);t.batchId="a2";var o=t.shared,a=o.current;k(t,i,r.context),r.framebuffer&&r.framebuffer.append(t,i),L(Object.keys(r.state)).forEach(function(e){var n=r.state[e].append(t,i);C(n)?n.forEach(function(r,n){i.set(t.next[e],"["+n+"]",r)}):i.set(o.next,"."+e,n)}),S(t,i,r,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(e){var n=r.draw[e];n&&i.set(o.draw,"."+e,""+n.append(t,i))}),Object.keys(r.uniforms).forEach(function(n){i.set(o.uniforms,"["+e.id(n)+"]",r.uniforms[n].append(t,i))}),Object.keys(r.attributes).forEach(function(e){var n=r.attributes[e].append(t,i),o=t.scopeAttrib(e);Object.keys(new q).forEach(function(t){i.set(o,"."+t,n[t])})}),r.scopeVAO&&i.set(o.vao,".targetVAO",r.scopeVAO.append(t,i)),n("vert"),n("frag"),0<Object.keys(r.state).length&&(i(a,".dirty=true;"),i.exit(a,".dirty=true;")),i("a1(",t.shared.context,",a0,",t.batchId,");")}function X(t,e,r){var n=e.static[r];if(n&&function(t){if("object"==typeof t&&!C(t)){for(var e=Object.keys(t),r=0;r<e.length;++r)if(U.isDynamic(t[e[r]]))return!0;return!1}}(n)){var i=t.global,o=Object.keys(n),a=!1,s=!1,l=!1,g=t.global.def("{}");o.forEach(function(e){var r=n[e];if(U.isDynamic(r))"function"==typeof r&&(r=n[e]=U.unbox(r)),e=F(r,null),a=a||e.thisDep,l=l||e.propDep,s=s||e.contextDep;else{switch(i(g,".",e,"="),typeof r){case"number":i(r);break;case"string":i('"',r,'"');break;case"object":Array.isArray(r)&&i("[",r.join(),"]");break;default:i(t.link(r))}i(";")}}),e.dynamic[r]=new U.DynamicVariable(4,{thisDep:a,contextDep:s,propDep:l,ref:g,append:function(t,e){o.forEach(function(r){var i=n[r];U.isDynamic(i)&&(i=t.invoke(e,i),e(g,".",r,"=",i,";"))})}}),delete e.static[r]}}var q=c.Record,Q={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(Q.min=32775,Q.max=32776);var K=r.angle_instanced_arrays,$=r.webgl_draw_buffers,tt={dirty:!0,profile:f.profile},et={},rt=[],it={},ot={};I("dither",3024),I("blend.enable",3042),v("blend.color","blendColor",[0,0,0,0]),v("blend.equation","blendEquationSeparate",[32774,32774]),v("blend.func","blendFuncSeparate",[1,0,1,0]),I("depth.enable",2929,!0),v("depth.func","depthFunc",513),v("depth.range","depthRange",[0,1]),v("depth.mask","depthMask",!0),v("colorMask","colorMask",[!0,!0,!0,!0]),I("cull.enable",2884),v("cull.face","cullFace",1029),v("frontFace","frontFace",2305),v("lineWidth","lineWidth",1),I("polygonOffset.enable",32823),v("polygonOffset.offset","polygonOffset",[0,0]),I("sample.alpha",32926),I("sample.enable",32928),v("sample.coverage","sampleCoverage",[1,!1]),I("stencil.enable",2960),v("stencil.mask","stencilMask",-1),v("stencil.func","stencilFunc",[519,0,-1]),v("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),v("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),I("scissor.enable",3089),v("scissor.box","scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),v("viewport","viewport",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var at={gl:t,context:d,strings:e,next:et,current:tt,draw:h,elements:a,buffer:i,shader:u,attributes:c.state,vao:c,uniforms:g,framebuffer:l,extensions:r,timer:A,isBufferArgs:D},st={primTypes:nt,compareFuncs:wt,blendFuncs:_t,blendEquations:Q,stencilOps:kt,glTypes:J,orientationType:Tt};$&&(st.backBuffer=[1029],st.drawBuffer=o(n.maxDrawbuffers,function(t){return 0===t?[0]:o(t,function(t){return 36064+t})}));var lt=0;return{next:et,current:tt,procs:function(){var t=m(),e=t.proc("poll"),i=t.proc("refresh"),a=t.block();e(a),i(a);var s,l=t.shared,g=l.gl,c=l.next,u=l.current;a(u,".dirty=false;"),T(t,e),T(t,i,null,!0),K&&(s=t.link(K)),r.oes_vertex_array_object&&i(t.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var h=0;h<n.maxAttributes;++h){var d=i.def(l.attributes,"[",h,"]"),A=t.cond(d,".buffer");A.then(g,".enableVertexAttribArray(",h,");",g,".bindBuffer(",34962,",",d,".buffer.buffer);",g,".vertexAttribPointer(",h,",",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(g,".disableVertexAttribArray(",h,");",g,".vertexAttrib4f(",h,",",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;"),i(A),K&&i(s,".vertexAttribDivisorANGLE(",h,",",d,".divisor);")}return i(t.shared.vao,".currentVAO=null;",t.shared.vao,".setVAO(",t.shared.vao,".targetVAO);"),Object.keys(it).forEach(function(r){var n=it[r],o=a.def(c,".",r),s=t.block();s("if(",o,"){",g,".enable(",n,")}else{",g,".disable(",n,")}",u,".",r,"=",o,";"),i(s),e("if(",o,"!==",u,".",r,"){",s,"}")}),Object.keys(ot).forEach(function(r){var n,s,l=ot[r],h=tt[r],d=t.block();d(g,".",l,"("),C(h)?(l=h.length,n=t.global.def(c,".",r),s=t.global.def(u,".",r),d(o(l,function(t){return n+"["+t+"]"}),");",o(l,function(t){return s+"["+t+"]="+n+"["+t+"];"}).join("")),e("if(",o(l,function(t){return n+"["+t+"]!=="+s+"["+t+"]"}).join("||"),"){",d,"}")):(n=a.def(c,".",r),s=a.def(u,".",r),d(n,");",u,".",r,"=",n,";"),e("if(",n,"!==",s,"){",d,"}")),i(d)}),t.compile()}(),compile:function(t,e,r,n,i){var o=m();return o.stats=o.link(i),Object.keys(e.static).forEach(function(t){X(o,e,t)}),xt.forEach(function(e){X(o,t,e)}),r=w(t,e,r,n),function(t,e){var r=t.proc("draw",1);O(t,r),k(t,r,e.context),T(t,r,e.framebuffer),M(t,r,e),E(t,r,e.state),S(t,r,e,!1,!0);var n=e.shader.progVar.append(t,r);if(r(t.shared.gl,".useProgram(",n,".program);"),e.shader.program)Z(t,r,e,e.shader.program);else{r(t.shared.vao,".setVAO(null);");var i=t.global.def("{}"),o=r.def(n,".id"),a=r.def(i,"[",o,"]");r(t.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",t.link(function(r){return G(Z,t,e,r,1)}),"(",n,");",a,".call(this,a0);"))}0<Object.keys(e.state).length&&r(t.shared.current,".dirty=true;")}(o,r),Y(o,r),function(t,e){function r(t){return t.contextDep&&i||t.propDep}var n=t.proc("batch",2);t.batchId="0",O(t,n);var i=!1,o=!0;Object.keys(e.context).forEach(function(t){i=i||e.context[t].propDep}),i||(k(t,n,e.context),o=!1);var a=!1;if((s=e.framebuffer)?(s.propDep?i=a=!0:s.contextDep&&i&&(a=!0),a||T(t,n,s)):T(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(i=!0),M(t,n,e),E(t,n,e.state,function(t){return!r(t)}),e.profile&&r(e.profile)||S(t,n,e,!1,"a1"),e.contextDep=i,e.needsContext=o,e.needsFramebuffer=a,(o=e.shader.progVar).contextDep&&i||o.propDep)W(t,n,e,null);else if(o=o.append(t,n),n(t.shared.gl,".useProgram(",o,".program);"),e.shader.program)W(t,n,e,e.shader.program);else{n(t.shared.vao,".setVAO(null);");var s=t.global.def("{}"),l=(a=n.def(o,".id"),n.def(s,"[",a,"]"));n(t.cond(l).then(l,".call(this,a0,a1);").else(l,"=",s,"[",a,"]=",t.link(function(r){return G(W,t,e,r,2)}),"(",o,");",l,".call(this,a0,a1);"))}0<Object.keys(e.state).length&&n(t.shared.current,".dirty=true;")}(o,r),o.compile()}}}function j(t,e){for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}var V=function(t,e){for(var r=Object.keys(e),n=0;n<r.length;++n)t[r[n]]=e[r[n]];return t},G=0,U={DynamicVariable:t,define:function(r,n){return new t(r,e(n+""))},isDynamic:function(e){return"function"==typeof e&&!e._reglType||e instanceof t},unbox:function(e,r){return"function"==typeof e?new t(0,e):e},accessor:e},Z={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},H="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},W=s();W.zero=s();var Y=function(t,e){var r=1;e.ext_texture_filter_anisotropic&&(r=t.getParameter(34047));var n=1,i=1;e.webgl_draw_buffers&&(n=t.getParameter(34852),i=t.getParameter(36063));var o=!!e.oes_texture_float;if(o){o=t.createTexture(),t.bindTexture(3553,o),t.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var a=t.createFramebuffer();if(t.bindFramebuffer(36160,a),t.framebufferTexture2D(36160,36064,3553,o,0),t.bindTexture(3553,null),36053!==t.checkFramebufferStatus(36160))o=!1;else{t.viewport(0,0,1,1),t.clearColor(1,0,0,1),t.clear(16384);var s=W.allocType(5126,4);t.readPixels(0,0,1,1,6408,5126,s),t.getError()?o=!1:(t.deleteFramebuffer(a),t.deleteTexture(o),o=1===s[0]),W.freeType(s)}}return s=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(s=t.createTexture(),a=W.allocType(5121,36),t.activeTexture(33984),t.bindTexture(34067,s),t.texImage2D(34069,0,6408,3,3,0,6408,5121,a),W.freeType(a),t.bindTexture(34067,null),t.deleteTexture(s),s=!t.getError()),{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter(function(t){return!!e[t]}),maxAnisotropic:r,maxDrawbuffers:n,maxColorAttachments:i,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938),readFloat:o,npotTextureCube:s}},X=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},q=function(t){return Object.keys(t).map(function(e){return t[e]})},Q={shape:function(t){for(var e=[];t.length;t=t[0])e.push(t.length);return e},flatten:function(t,e,r,n){var i=1;if(e.length)for(var o=0;o<e.length;++o)i*=e[o];else i=0;switch(r=n||W.allocType(r,i),e.length){case 0:break;case 1:for(n=e[0],e=0;e<n;++e)r[e]=t[e];break;case 2:for(n=e[0],e=e[1],o=i=0;o<n;++o)for(var a=t[o],s=0;s<e;++s)r[i++]=a[s];break;case 3:g(t,e[0],e[1],e[2],r,0);break;default:!function t(e,r,n,i,o){for(var a=1,s=n+1;s<r.length;++s)a*=r[s];var l=r[n];if(4==r.length-n){var c=r[n+1],u=r[n+2];for(r=r[n+3],s=0;s<l;++s)g(e[s],c,u,r,i,o),o+=a}else for(s=0;s<l;++s)t(e[s],r,n+1,i,o),o+=a}(t,e,0,r,0)}return r}},K={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},J={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},$={dynamic:35048,stream:35040,static:35044},tt=Q.flatten,et=Q.shape,rt=[];rt[5120]=1,rt[5122]=2,rt[5124]=4,rt[5121]=1,rt[5123]=2,rt[5125]=4,rt[5126]=4;var nt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},it=new Float32Array(1),ot=new Uint32Array(it.buffer),at=[9984,9986,9985,9987],st=[0,6409,6410,6407,6408],lt={};lt[6409]=lt[6406]=lt[6402]=1,lt[34041]=lt[6410]=2,lt[6407]=lt[35904]=3,lt[6408]=lt[35906]=4;var gt=p("HTMLCanvasElement"),ct=p("OffscreenCanvas"),ut=p("CanvasRenderingContext2D"),ht=p("ImageBitmap"),dt=p("HTMLImageElement"),At=p("HTMLVideoElement"),ft=Object.keys(K).concat([gt,ct,ut,ht,dt,At]),Ct=[];Ct[5121]=1,Ct[5126]=4,Ct[36193]=2,Ct[5123]=2,Ct[5125]=4;var pt=[];pt[32854]=2,pt[32855]=2,pt[36194]=2,pt[34041]=4,pt[33776]=.5,pt[33777]=.5,pt[33778]=1,pt[33779]=1,pt[35986]=.5,pt[35987]=1,pt[34798]=1,pt[35840]=.5,pt[35841]=.25,pt[35842]=.5,pt[35843]=.25,pt[36196]=.5;var It=[];It[32854]=2,It[32855]=2,It[36194]=2,It[33189]=2,It[36168]=1,It[34041]=4,It[35907]=4,It[34836]=16,It[34842]=8,It[34843]=6;var vt=function(t,e,r,n,i){function o(t){this.id=g++,this.refCount=1,this.renderbuffer=t,this.format=32854,this.height=this.width=0,i.profile&&(this.stats={size:0})}function a(e){var r=e.renderbuffer;t.bindRenderbuffer(36161,null),t.deleteRenderbuffer(r),e.renderbuffer=null,e.refCount=0,delete c[e.id],n.renderbufferCount--}var s={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(s.srgba=35907),e.ext_color_buffer_half_float&&(s.rgba16f=34842,s.rgb16f=34843),e.webgl_color_buffer_float&&(s.rgba32f=34836);var l=[];Object.keys(s).forEach(function(t){l[s[t]]=t});var g=0,c={};return o.prototype.decRef=function(){0>=--this.refCount&&a(this)},i.profile&&(n.getTotalRenderbufferSize=function(){var t=0;return Object.keys(c).forEach(function(e){t+=c[e].stats.size}),t}),{create:function(e,r){function a(e,r){var n=0,o=0,c=32854;if("object"==typeof e&&e?("shape"in e?(n=0|(o=e.shape)[0],o=0|o[1]):("radius"in e&&(n=o=0|e.radius),"width"in e&&(n=0|e.width),"height"in e&&(o=0|e.height)),"format"in e&&(c=s[e.format])):"number"==typeof e?(n=0|e,o="number"==typeof r?0|r:n):e||(n=o=1),n!==g.width||o!==g.height||c!==g.format)return a.width=g.width=n,a.height=g.height=o,g.format=c,t.bindRenderbuffer(36161,g.renderbuffer),t.renderbufferStorage(36161,c,n,o),i.profile&&(g.stats.size=It[g.format]*g.width*g.height),a.format=l[g.format],a}var g=new o(t.createRenderbuffer());return c[g.id]=g,n.renderbufferCount++,a(e,r),a.resize=function(e,r){var n=0|e,o=0|r||n;return n===g.width&&o===g.height?a:(a.width=g.width=n,a.height=g.height=o,t.bindRenderbuffer(36161,g.renderbuffer),t.renderbufferStorage(36161,g.format,n,o),i.profile&&(g.stats.size=It[g.format]*g.width*g.height),a)},a._reglType="renderbuffer",a._renderbuffer=g,i.profile&&(a.stats=g.stats),a.destroy=function(){g.decRef()},a},clear:function(){q(c).forEach(a)},restore:function(){q(c).forEach(function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,e.renderbuffer),t.renderbufferStorage(36161,e.format,e.width,e.height)}),t.bindRenderbuffer(36161,null)}}},mt=[];mt[6408]=4,mt[6407]=3;var yt=[];yt[5121]=1,yt[5126]=4,yt[36193]=2;var bt=["x","y","z","w"],xt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),_t={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},wt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},kt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Tt={cw:2304,ccw:2305},Mt=new P(!1,!1,!1,function(){});return function(t){function e(){if(0===Q.length)b&&b.update(),tt=null;else{tt=Z.next(e),u();for(var t=Q.length-1;0<=t;--t){var r=Q[t];r&&r(S,null,0)}C.flush(),b&&b.update()}}function r(){!tt&&0<Q.length&&(tt=Z.next(e))}function n(){tt&&(Z.cancel(e),tt=null)}function o(t){t.preventDefault(),n(),K.forEach(function(t){t()})}function a(t){C.getError(),I.restore(),N.restore(),D.restore(),z.restore(),F.restore(),G.restore(),L.restore(),b&&b.restore(),W.procs.refresh(),r(),J.forEach(function(t){t()})}function s(t){function e(t){var e={},r={};return Object.keys(t).forEach(function(n){var i=t[n];U.isDynamic(i)?r[n]=U.unbox(i,n):e[n]=i}),{dynamic:r,static:e}}var r=e(t.context||{}),n=e(t.uniforms||{}),i=e(t.attributes||{}),o=e(function(t){function e(t){if(t in r){var e=r[t];delete r[t],Object.keys(e).forEach(function(n){r[t+"."+n]=e[n]})}}var r=V({},t);return delete r.uniforms,delete r.attributes,delete r.context,delete r.vao,"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op),e("blend"),e("depth"),e("cull"),e("stencil"),e("polygonOffset"),e("scissor"),e("sample"),"vao"in t&&(r.vao=t.vao),r}(t));t={gpuTime:0,cpuTime:0,count:0};var a=(r=W.compile(o,i,n,r,t)).draw,s=r.batch,l=r.scope,g=[];return V(function(t,e){var r;if("function"==typeof t)return l.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(r=0;r<t;++r)l.call(this,null,e,r);else{if(!Array.isArray(t))return l.call(this,t,e,0);for(r=0;r<t.length;++r)l.call(this,t[r],e,r)}else if("number"==typeof t){if(0<t)return s.call(this,function(t){for(;g.length<t;)g.push(null);return g}(0|t),0|t)}else{if(!Array.isArray(t))return a.call(this,t);if(t.length)return s.call(this,t,t.length)}},{stats:t})}function l(t,e){var r=0;W.procs.poll();var n=e.color;n&&(C.clearColor(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),r|=16384),"depth"in e&&(C.clearDepth(+e.depth),r|=256),"stencil"in e&&(C.clearStencil(0|e.stencil),r|=1024),C.clear(r)}function g(t){return Q.push(t),r(),{cancel:function(){var e=j(Q,t);Q[e]=function t(){var e=j(Q,t);Q[e]=Q[Q.length-1],--Q.length,0>=Q.length&&n()}}}}function c(){var t=X.viewport,e=X.scissor_box;t[0]=t[1]=e[0]=e[1]=0,S.viewportWidth=S.framebufferWidth=S.drawingBufferWidth=t[2]=e[2]=C.drawingBufferWidth,S.viewportHeight=S.framebufferHeight=S.drawingBufferHeight=t[3]=e[3]=C.drawingBufferHeight}function u(){S.tick+=1,S.time=f(),c(),W.procs.poll()}function h(){c(),W.procs.refresh(),b&&b.update()}function f(){return(H()-x)/1e3}if(!(t=i(t)))return null;var C=t.gl,p=C.getContextAttributes();C.isContextLost();var I=function(t,e){function r(e){var r;e=e.toLowerCase();try{r=n[e]=t.getExtension(e)}catch(t){}return!!r}for(var n={},i=0;i<e.extensions.length;++i){var o=e.extensions[i];if(!r(o))return e.onDestroy(),e.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach(function(t){if(n[t]&&!r(t))throw Error("(regl): error restoring extension "+t)})}}}(C,t);if(!I)return null;var v=function(){var t={"":0},e=[""];return{id:function(r){var n=t[r];return n||(n=t[r]=e.length,e.push(r),n)},str:function(t){return e[t]}}}(),m={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},y=I.extensions,b=function(t,e){function r(t,e,r){var n=o.pop()||new function(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null};n.startQueryIndex=t,n.endQueryIndex=e,n.sum=0,n.stats=r,a.push(n)}if(!e.ext_disjoint_timer_query)return null;var n=[],i=[],o=[],a=[],s=[],l=[];return{beginQuery:function(t){var o=n.pop()||e.ext_disjoint_timer_query.createQueryEXT();e.ext_disjoint_timer_query.beginQueryEXT(35007,o),i.push(o),r(i.length-1,i.length,t)},endQuery:function(){e.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:r,update:function(){var t,r;if(0!==(t=i.length)){l.length=Math.max(l.length,t+1),s.length=Math.max(s.length,t+1),s[0]=0;var g=l[0]=0;for(r=t=0;r<i.length;++r){var c=i[r];e.ext_disjoint_timer_query.getQueryObjectEXT(c,34919)?(g+=e.ext_disjoint_timer_query.getQueryObjectEXT(c,34918),n.push(c)):i[t++]=c,s[r+1]=g,l[r+1]=t}for(i.length=t,r=t=0;r<a.length;++r){var u=(g=a[r]).startQueryIndex;c=g.endQueryIndex,g.sum+=s[c]-s[u],u=l[u],(c=l[c])===u?(g.stats.gpuTime+=g.sum/1e6,o.push(g)):(g.startQueryIndex=u,g.endQueryIndex=c,a[t++]=g)}a.length=t}},getNumPendingQueries:function(){return i.length},clear:function(){n.push.apply(n,i);for(var t=0;t<n.length;t++)e.ext_disjoint_timer_query.deleteQueryEXT(n[t]);i.length=0,n.length=0},restore:function(){i.length=0,n.length=0}}}(0,y),x=H(),k=C.drawingBufferWidth,O=C.drawingBufferHeight,S={tick:0,time:0,viewportWidth:k,viewportHeight:O,framebufferWidth:k,framebufferHeight:O,drawingBufferWidth:k,drawingBufferHeight:O,pixelRatio:t.pixelRatio},R=Y(C,y),D=d(C,m,t,function(t){return L.destroyBuffer(t)}),L=T(C,y,R,m,D),P=A(C,y,D,m),N=M(C,v,m,t),z=_(C,y,R,function(){W.procs.poll()},S,m,t),F=vt(C,y,0,m,t),G=w(C,y,R,z,F,m),W=B(C,v,y,R,D,P,0,G,{},L,N,{elements:null,primitive:4,count:-1,offset:0,instances:-1},S,b,t),X=(v=E(C,G,W.procs.poll,S),W.next),q=C.canvas,Q=[],K=[],J=[],$=[t.onDestroy],tt=null;q&&(q.addEventListener("webglcontextlost",o,!1),q.addEventListener("webglcontextrestored",a,!1));var et=G.setFBO=s({framebuffer:U.define.call(null,1,"framebuffer")});return h(),p=V(s,{clear:function(t){if("framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var e=0;6>e;++e)et(V({framebuffer:t.framebuffer.faces[e]},t),l);else et(t,l);else l(0,t)},prop:U.define.bind(null,1),context:U.define.bind(null,2),this:U.define.bind(null,3),draw:s({}),buffer:function(t){return D.create(t,34962,!1,!1)},elements:function(t){return P.create(t,!1)},texture:z.create2D,cube:z.createCube,renderbuffer:F.create,framebuffer:G.create,framebufferCube:G.createCube,vao:L.createVAO,attributes:p,frame:g,on:function(t,e){var r;switch(t){case"frame":return g(e);case"lost":r=K;break;case"restore":r=J;break;case"destroy":r=$}return r.push(e),{cancel:function(){for(var t=0;t<r.length;++t)if(r[t]===e){r[t]=r[r.length-1],r.pop();break}}}},limits:R,hasExtension:function(t){return 0<=R.extensions.indexOf(t.toLowerCase())},read:v,destroy:function(){Q.length=0,n(),q&&(q.removeEventListener("webglcontextlost",o),q.removeEventListener("webglcontextrestored",a)),N.clear(),G.clear(),F.clear(),z.clear(),P.clear(),D.clear(),L.clear(),b&&b.clear(),$.forEach(function(t){t()})},_gl:C,_refresh:h,poll:function(){u(),b&&b.update()},now:f,stats:m}),t.onDone(null,p),p}},"object"==typeof r&&void 0!==e?e.exports=i():n.createREGL=i()},{}],662:[function(t,e,r){"use strict";var n,i="";e.exports=function(t,e){if("string"!=typeof t)throw new TypeError("expected a string");if(1===e)return t;if(2===e)return t+t;var r=t.length*e;if(n!==t||void 0===n)n=t,i="";else if(i.length>=r)return i.substr(0,r);for(;r>i.length&&e>1;)1&e&&(i+=t),e>>=1,t+=t;return i=(i+=t).substr(0,r)}},{}],663:[function(t,e,r){(function(t){e.exports=t.performance&&t.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],664:[function(t,e,r){"use strict";e.exports=function(t){for(var e=t.length,r=t[t.length-1],n=e,i=e-2;i>=0;--i){var o=r,a=t[i],s=(r=o+a)-o,l=a-s;l&&(t[--n]=r,r=l)}for(var g=0,i=n;i<e;++i){var o=t[i],a=r,s=(r=o+a)-o,l=a-s;l&&(t[g++]=l)}return t[g++]=r,t.length=g,t}},{}],665:[function(t,e,r){"use strict";var n=t("two-product"),i=t("robust-sum"),o=t("robust-scale"),a=t("robust-compress"),s=6;function l(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var i=r[n-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[n][o]);return r}function g(t){if(2===t.length)return["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("");for(var e=[],r=0;r<t.length;++r)e.push(["scale(",g(l(t,r)),",",(n=r,1&n?"-":""),t[0][r],")"].join(""));return function t(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var r=e.length>>1;return["sum(",t(e.slice(0,r)),",",t(e.slice(r)),")"].join("")}(e);var n}function c(t){return new Function("sum","scale","prod","compress",["function robustDeterminant",t,"(m){return compress(",g(function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m[",r,"][",n,"]"].join("")}return e}(t)),")};return robustDeterminant",t].join(""))(i,o,n,a)}var u=[function(){return[0]},function(t){return[t[0][0]]}];!function(){for(;u.length<s;)u.push(c(u.length));for(var t=[],r=["function robustDeterminant(m){switch(m.length){"],n=0;n<s;++n)t.push("det"+n),r.push("case ",n,":return det",n,"(m);");r.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),t.push("CACHE","gen",r.join(""));var i=Function.apply(void 0,t);for(e.exports=i.apply(void 0,u.concat([u,c])),n=0;n<u.length;++n)e.exports[n]=u[n]}()},{"robust-compress":664,"robust-scale":671,"robust-sum":674,"two-product":698}],666:[function(t,e,r){"use strict";var n=t("two-product"),i=t("robust-sum");e.exports=function(t,e){for(var r=n(t[0],e[0]),o=1;o<t.length;++o)r=i(r,n(t[o],e[o]));return r}},{"robust-sum":674,"two-product":698}],667:[function(t,e,r){"use strict";var n=t("two-product"),i=t("robust-sum"),o=t("robust-subtract"),a=t("robust-scale"),s=6;function l(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var i=r[n-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[n][o]);return r}function g(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",g(t.slice(0,e)),",",g(t.slice(e)),")"].join("")}function c(t,e){if("m"===t.charAt(0)){if("w"===e.charAt(0)){var r=t.split("[");return["w",e.substr(1),"m",r[0].substr(1)].join("")}return["prod(",t,",",e,")"].join("")}return c(e,t)}function u(t){if(2===t.length)return[["diff(",c(t[0][0],t[1][1]),",",c(t[1][0],t[0][1]),")"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",g(u(l(t,r))),",",(n=r,!0&n?"-":""),t[0][r],")"].join(""));return e;var n}function h(t,e){for(var r=[],n=0;n<e-2;++n)r.push(["prod(m",t,"[",n,"],m",t,"[",n,"])"].join(""));return g(r)}function d(t){for(var e=[],r=[],s=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m",n,"[",t-r-2,"]"].join("")}return e}(t),c=0;c<t;++c)s[0][c]="1",s[t-1][c]="w"+c;for(c=0;c<t;++c)0==(1&c)?e.push.apply(e,u(l(s,c))):r.push.apply(r,u(l(s,c)));var d=g(e),A=g(r),f="exactInSphere"+t,C=[];for(c=0;c<t;++c)C.push("m"+c);var p=["function ",f,"(",C.join(),"){"];for(c=0;c<t;++c){p.push("var w",c,"=",h(c,t),";");for(var I=0;I<t;++I)I!==c&&p.push("var w",c,"m",I,"=scale(w",c,",m",I,"[0]);")}return p.push("var p=",d,",n=",A,",d=diff(p,n);return d[d.length-1];}return ",f),new Function("sum","diff","prod","scale",p.join(""))(i,o,n,a)}var A=[function(){return 0},function(){return 0},function(){return 0}];!function(){for(;A.length<=s;)A.push(d(A.length));for(var t=[],r=["slow"],n=0;n<=s;++n)t.push("a"+n),r.push("o"+n);var i=["function testInSphere(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(n=2;n<=s;++n)i.push("case ",n,":return o",n,"(",t.slice(0,n).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),r.push(i.join(""));var o=Function.apply(void 0,r);for(e.exports=o.apply(void 0,[function(t){var e=A[t.length];return e||(e=A[t.length]=d(t.length)),e.apply(void 0,t)}].concat(A)),n=0;n<=s;++n)e.exports[n]=A[n]}()},{"robust-scale":671,"robust-subtract":673,"robust-sum":674,"two-product":698}],668:[function(t,e,r){"use strict";var n=t("robust-determinant"),i=6;function o(t){for(var e="robustLinearSolve"+t+"d",r=["function ",e,"(A,b){return ["],i=0;i<t;++i){r.push("det([");for(var o=0;o<t;++o){o>0&&r.push(","),r.push("[");for(var a=0;a<t;++a)a>0&&r.push(","),a===i?r.push("+b[",o,"]"):r.push("+A[",o,"][",a,"]");r.push("]")}r.push("]),")}r.push("det(A)]}return ",e);var s=new Function("det",r.join(""));return s(t<6?n[t]:n)}var a=[function(){return[0]},function(t,e){return[[e[0]],[t[0][0]]]}];!function(){for(;a.length<i;)a.push(o(a.length));for(var t=[],r=["function dispatchLinearSolve(A,b){switch(A.length){"],n=0;n<i;++n)t.push("s"+n),r.push("case ",n,":return s",n,"(A,b);");r.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),t.push("CACHE","g",r.join(""));var s=Function.apply(void 0,t);for(e.exports=s.apply(void 0,a.concat([a,o])),n=0;n<i;++n)e.exports[n]=a[n]}()},{"robust-determinant":665}],669:[function(t,e,r){"use strict";var n=t("two-product"),i=t("robust-sum"),o=t("robust-scale"),a=t("robust-subtract"),s=5;function l(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var i=r[n-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[n][o]);return r}function g(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",g(t.slice(0,e)),",",g(t.slice(e)),")"].join("")}function c(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",g(c(l(t,r))),",",(n=r,1&n?"-":""),t[0][r],")"].join(""));return e;var n}function u(t){for(var e=[],r=[],s=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m",n,"[",t-r-1,"]"].join("")}return e}(t),u=[],h=0;h<t;++h)0==(1&h)?e.push.apply(e,c(l(s,h))):r.push.apply(r,c(l(s,h))),u.push("m"+h);var d=g(e),A=g(r),f="orientation"+t+"Exact",C=["function ",f,"(",u.join(),"){var p=",d,",n=",A,",d=sub(p,n);return d[d.length-1];};return ",f].join("");return new Function("sum","prod","scale","sub",C)(i,n,o,a)}var h=u(3),d=u(4),A=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var n,i=(t[1]-r[1])*(e[0]-r[0]),o=(t[0]-r[0])*(e[1]-r[1]),a=i-o;if(i>0){if(o<=0)return a;n=i+o}else{if(!(i<0))return a;if(o>=0)return a;n=-(i+o)}var s=3.3306690738754716e-16*n;return a>=s||a<=-s?a:h(t,e,r)},function(t,e,r,n){var i=t[0]-n[0],o=e[0]-n[0],a=r[0]-n[0],s=t[1]-n[1],l=e[1]-n[1],g=r[1]-n[1],c=t[2]-n[2],u=e[2]-n[2],h=r[2]-n[2],A=o*g,f=a*l,C=a*s,p=i*g,I=i*l,v=o*s,m=c*(A-f)+u*(C-p)+h*(I-v),y=7.771561172376103e-16*((Math.abs(A)+Math.abs(f))*Math.abs(c)+(Math.abs(C)+Math.abs(p))*Math.abs(u)+(Math.abs(I)+Math.abs(v))*Math.abs(h));return m>y||-m>y?m:d(t,e,r,n)}];!function(){for(;A.length<=s;)A.push(u(A.length));for(var t=[],r=["slow"],n=0;n<=s;++n)t.push("a"+n),r.push("o"+n);var i=["function getOrientation(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(n=2;n<=s;++n)i.push("case ",n,":return o",n,"(",t.slice(0,n).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),r.push(i.join(""));var o=Function.apply(void 0,r);for(e.exports=o.apply(void 0,[function(t){var e=A[t.length];return e||(e=A[t.length]=u(t.length)),e.apply(void 0,t)}].concat(A)),n=0;n<=s;++n)e.exports[n]=A[n]}()},{"robust-scale":671,"robust-subtract":673,"robust-sum":674,"two-product":698}],670:[function(t,e,r){"use strict";var n=t("robust-sum"),i=t("robust-scale");e.exports=function(t,e){if(1===t.length)return i(e,t[0]);if(1===e.length)return i(t,e[0]);if(0===t.length||0===e.length)return[0];var r=[0];if(t.length<e.length)for(var o=0;o<t.length;++o)r=n(r,i(e,t[o]));else for(var o=0;o<e.length;++o)r=n(r,i(t,e[o]));return r}},{"robust-scale":671,"robust-sum":674}],671:[function(t,e,r){"use strict";var n=t("two-product"),i=t("two-sum");e.exports=function(t,e){var r=t.length;if(1===r){var o=n(t[0],e);return o[0]?o:[o[1]]}var a=new Array(2*r),s=[.1,.1],l=[.1,.1],g=0;n(t[0],e,s),s[0]&&(a[g++]=s[0]);for(var c=1;c<r;++c){n(t[c],e,l);var u=s[1];i(u,l[0],s),s[0]&&(a[g++]=s[0]);var h=l[1],d=s[1],A=h+d,f=A-h,C=d-f;s[1]=A,C&&(a[g++]=C)}s[1]&&(a[g++]=s[1]);0===g&&(a[g++]=0);return a.length=g,a}},{"two-product":698,"two-sum":699}],672:[function(t,e,r){"use strict";e.exports=function(t,e,r,i){var o=n(t,r,i),a=n(e,r,i);if(o>0&&a>0||o<0&&a<0)return!1;var s=n(r,t,e),l=n(i,t,e);if(s>0&&l>0||s<0&&l<0)return!1;if(0===o&&0===a&&0===s&&0===l)return function(t,e,r,n){for(var i=0;i<2;++i){var o=t[i],a=e[i],s=Math.min(o,a),l=Math.max(o,a),g=r[i],c=n[i],u=Math.min(g,c),h=Math.max(g,c);if(h<s||l<u)return!1}return!0}(t,e,r,i);return!0};var n=t("robust-orientation")[3]},{"robust-orientation":669}],673:[function(t,e,r){"use strict";e.exports=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);if(i)return[i,r];return[r]}(t[0],-e[0]);var i,o,a=new Array(r+n),s=0,l=0,g=0,c=Math.abs,u=t[l],h=c(u),d=-e[g],A=c(d);h<A?(o=u,(l+=1)<r&&(u=t[l],h=c(u))):(o=d,(g+=1)<n&&(d=-e[g],A=c(d)));l<r&&h<A||g>=n?(i=u,(l+=1)<r&&(u=t[l],h=c(u))):(i=d,(g+=1)<n&&(d=-e[g],A=c(d)));var f,C,p=i+o,I=p-i,v=o-I,m=v,y=p;for(;l<r&&g<n;)h<A?(i=u,(l+=1)<r&&(u=t[l],h=c(u))):(i=d,(g+=1)<n&&(d=-e[g],A=c(d))),(v=(o=m)-(I=(p=i+o)-i))&&(a[s++]=v),m=y-((f=y+p)-(C=f-y))+(p-C),y=f;for(;l<r;)(v=(o=m)-(I=(p=(i=u)+o)-i))&&(a[s++]=v),m=y-((f=y+p)-(C=f-y))+(p-C),y=f,(l+=1)<r&&(u=t[l]);for(;g<n;)(v=(o=m)-(I=(p=(i=d)+o)-i))&&(a[s++]=v),m=y-((f=y+p)-(C=f-y))+(p-C),y=f,(g+=1)<n&&(d=-e[g]);m&&(a[s++]=m);y&&(a[s++]=y);s||(a[s++]=0);return a.length=s,a}},{}],674:[function(t,e,r){"use strict";e.exports=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,i=t-(r-n)+(e-n);if(i)return[i,r];return[r]}(t[0],e[0]);var i,o,a=new Array(r+n),s=0,l=0,g=0,c=Math.abs,u=t[l],h=c(u),d=e[g],A=c(d);h<A?(o=u,(l+=1)<r&&(u=t[l],h=c(u))):(o=d,(g+=1)<n&&(d=e[g],A=c(d)));l<r&&h<A||g>=n?(i=u,(l+=1)<r&&(u=t[l],h=c(u))):(i=d,(g+=1)<n&&(d=e[g],A=c(d)));var f,C,p=i+o,I=p-i,v=o-I,m=v,y=p;for(;l<r&&g<n;)h<A?(i=u,(l+=1)<r&&(u=t[l],h=c(u))):(i=d,(g+=1)<n&&(d=e[g],A=c(d))),(v=(o=m)-(I=(p=i+o)-i))&&(a[s++]=v),m=y-((f=y+p)-(C=f-y))+(p-C),y=f;for(;l<r;)(v=(o=m)-(I=(p=(i=u)+o)-i))&&(a[s++]=v),m=y-((f=y+p)-(C=f-y))+(p-C),y=f,(l+=1)<r&&(u=t[l]);for(;g<n;)(v=(o=m)-(I=(p=(i=d)+o)-i))&&(a[s++]=v),m=y-((f=y+p)-(C=f-y))+(p-C),y=f,(g+=1)<n&&(d=e[g]);m&&(a[s++]=m);y&&(a[s++]=y);s||(a[s++]=0);return a.length=s,a}},{}],675:[function(t,e,r){"use strict";e.exports=function(t){return t<0?-1:t>0?1:0}},{}],676:[function(t,e,r){"use strict";e.exports=function(t,e,r,s){r=r||0,void 0===s&&(s=function(t){for(var e=t.length,r=0,n=0;n<e;++n)r=0|Math.max(r,t[n].length);return r-1}(t));if(0===t.length||s<1)return{cells:[],vertexIds:[],vertexWeights:[]};var l=function(t,e){for(var r=t.length,n=i.mallocUint8(r),o=0;o<r;++o)n[o]=t[o]<e|0;return n}(e,+r),g=function(t,e){for(var r=t.length,a=e*(e+1)/2*r|0,s=i.mallocUint32(2*a),l=0,g=0;g<r;++g)for(var c=t[g],e=c.length,u=0;u<e;++u)for(var h=0;h<u;++h){var d=c[h],A=c[u];s[l++]=0|Math.min(d,A),s[l++]=0|Math.max(d,A)}o(n(s,[l/2|0,2]));for(var f=2,g=2;g<l;g+=2)s[g-2]===s[g]&&s[g-1]===s[g+1]||(s[f++]=s[g],s[f++]=s[g+1]);return n(s,[f/2|0,2])}(t,s),c=function(t,e,r,o){for(var a=t.data,s=t.shape[0],l=i.mallocDouble(s),g=0,c=0;c<s;++c){var u=a[2*c],h=a[2*c+1];if(r[u]!==r[h]){var d=e[u],A=e[h];a[2*g]=u,a[2*g+1]=h,l[g++]=(A-o)/(A-d)}}return t.shape[0]=g,n(l,[g])}(g,e,l,+r),u=function(t,e){var r=i.mallocInt32(2*e),n=t.shape[0],o=t.data;r[0]=0;for(var a=0,s=0;s<n;++s){var l=o[2*s];if(l!==a){for(r[2*a+1]=s;++a<l;)r[2*a]=s,r[2*a+1]=s;r[2*a]=s}}r[2*a+1]=n;for(;++a<e;)r[2*a]=r[2*a+1]=n;return r}(g,0|e.length),h=a(s)(t,g.data,u,l),d=function(t){for(var e=0|t.shape[0],r=t.data,n=new Array(e),i=0;i<e;++i)n[i]=[r[2*i],r[2*i+1]];return n}(g),A=[].slice.call(c.data,0,c.shape[0]);return i.free(l),i.free(g.data),i.free(c.data),i.free(u),{cells:h,vertexIds:d,vertexWeights:A}};var n=t("ndarray"),i=t("typedarray-pool"),o=t("ndarray-sort"),a=t("./lib/codegen")},{"./lib/codegen":677,ndarray:262,"ndarray-sort":261,"typedarray-pool":711}],677:[function(t,e,r){"use strict";e.exports=function(t){var e=o[t];e||(e=o[t]=function(t){var e=0,r=new Array(t+1);r[0]=[[]];for(var o=1;o<=t;++o)for(var a=r[o]=i(o),s=0;s<a.length;++s)e=Math.max(e,a[o].length);var l=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",t,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"];function g(t){if(!(t.length<=0)){l.push("R.push(");for(var e=0;e<t.length;++e){var r=t[e];e>0&&l.push(","),l.push("[");for(var n=0;n<r.length;++n){var i=r[n];n>0&&l.push(","),l.push("B(C,E,c[",i[0],"],c[",i[1],"])")}l.push("]")}l.push(");")}}for(var o=t+1;o>1;--o){o<t+1&&l.push("else "),l.push("if(l===",o,"){");for(var c=[],s=0;s<o;++s)c.push("(S[c["+s+"]]<<"+s+")");l.push("var M=",c.join("+"),";if(M===0||M===",(1<<o)-1,"){continue}switch(M){");for(var a=r[o-1],s=0;s<a.length;++s)l.push("case ",s,":"),g(a[s]),l.push("break;");l.push("}}")}return l.push("}return R;};return getContour",t,"d"),new Function("pool",l.join(""))(n)}(t));return e};var n=t("typedarray-pool"),i=t("marching-simplex-table"),o={}},{"marching-simplex-table":245,"typedarray-pool":711}],678:[function(t,e,r){"use strict";"use restrict";var n=t("bit-twiddle"),i=t("union-find");function o(t,e){var r=t.length,n=t.length-e.length,i=Math.min;if(n)return n;switch(r){case 0:return 0;case 1:return t[0]-e[0];case 2:return(s=t[0]+t[1]-e[0]-e[1])||i(t[0],t[1])-i(e[0],e[1]);case 3:var o=t[0]+t[1],a=e[0]+e[1];if(s=o+t[2]-(a+e[2]))return s;var s,l=i(t[0],t[1]),g=i(e[0],e[1]);return(s=i(l,t[2])-i(g,e[2]))||i(l+t[2],o)-i(g+e[2],a);default:var c=t.slice(0);c.sort();var u=e.slice(0);u.sort();for(var h=0;h<r;++h)if(n=c[h]-u[h])return n;return 0}}function a(t,e){return o(t[0],e[0])}function s(t,e){if(e){for(var r=t.length,n=new Array(r),i=0;i<r;++i)n[i]=[t[i],e[i]];n.sort(a);for(i=0;i<r;++i)t[i]=n[i][0],e[i]=n[i][1];return t}return t.sort(o),t}function l(t){if(0===t.length)return[];for(var e=1,r=t.length,n=1;n<r;++n){var i=t[n];if(o(i,t[n-1])){if(n===e){e++;continue}t[e++]=i}}return t.length=e,t}function g(t,e){for(var r=0,n=t.length-1,i=-1;r<=n;){var a=r+n>>1,s=o(t[a],e);s<=0?(0===s&&(i=a),r=a+1):s>0&&(n=a-1)}return i}function c(t,e){for(var r=new Array(t.length),i=0,a=r.length;i<a;++i)r[i]=[];for(var s=[],l=(i=0,e.length);i<l;++i)for(var c=e[i],u=c.length,h=1,d=1<<u;h<d;++h){s.length=n.popCount(h);for(var A=0,f=0;f<u;++f)h&1<<f&&(s[A++]=c[f]);var C=g(t,s);if(!(C<0))for(;r[C++].push(i),!(C>=t.length||0!==o(t[C],s)););}return r}function u(t,e){if(e<0)return[];for(var r=[],i=(1<<e+1)-1,o=0;o<t.length;++o)for(var a=t[o],l=i;l<1<<a.length;l=n.nextCombination(l)){for(var g=new Array(e+1),c=0,u=0;u<a.length;++u)l&1<<u&&(g[c++]=a[u]);r.push(g)}return s(r)}r.dimension=function(t){for(var e=0,r=Math.max,n=0,i=t.length;n<i;++n)e=r(e,t[n].length);return e-1},r.countVertices=function(t){for(var e=-1,r=Math.max,n=0,i=t.length;n<i;++n)for(var o=t[n],a=0,s=o.length;a<s;++a)e=r(e,o[a]);return e+1},r.cloneCells=function(t){for(var e=new Array(t.length),r=0,n=t.length;r<n;++r)e[r]=t[r].slice(0);return e},r.compareCells=o,r.normalize=s,r.unique=l,r.findCell=g,r.incidence=c,r.dual=function(t,e){if(!e)return c(l(u(t,0)),t);for(var r=new Array(e),n=0;n<e;++n)r[n]=[];n=0;for(var i=t.length;n<i;++n)for(var o=t[n],a=0,s=o.length;a<s;++a)r[o[a]].push(n);return r},r.explode=function(t){for(var e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],o=0|i.length,a=1,l=1<<o;a<l;++a){for(var g=[],c=0;c<o;++c)a>>>c&1&&g.push(i[c]);e.push(g)}return s(e)},r.skeleton=u,r.boundary=function(t){for(var e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,a=i.length;o<a;++o){for(var l=new Array(i.length-1),g=0,c=0;g<a;++g)g!==o&&(l[c++]=i[g]);e.push(l)}return s(e)},r.connectedComponents=function(t,e){return e?function(t,e){for(var r=new i(e),n=0;n<t.length;++n)for(var o=t[n],a=0;a<o.length;++a)for(var s=a+1;s<o.length;++s)r.link(o[a],o[s]);var l=[],g=r.ranks;for(n=0;n<g.length;++n)g[n]=-1;for(n=0;n<t.length;++n){var c=r.find(t[n][0]);g[c]<0?(g[c]=l.length,l.push([t[n].slice(0)])):l[g[c]].push(t[n].slice(0))}return l}(t,e):function(t){for(var e=l(s(u(t,0))),r=new i(e.length),n=0;n<t.length;++n)for(var o=t[n],a=0;a<o.length;++a)for(var c=g(e,[o[a]]),h=a+1;h<o.length;++h)r.link(c,g(e,[o[h]]));var d=[],A=r.ranks;for(n=0;n<A.length;++n)A[n]=-1;for(n=0;n<t.length;++n){var f=r.find(g(e,[t[n][0]]));A[f]<0?(A[f]=d.length,d.push([t[n].slice(0)])):d[A[f]].push(t[n].slice(0))}return d}(t)}},{"bit-twiddle":33,"union-find":712}],679:[function(t,e,r){arguments[4][33][0].apply(r,arguments)},{dup:33}],680:[function(t,e,r){arguments[4][678][0].apply(r,arguments)},{"bit-twiddle":679,dup:678,"union-find":681}],681:[function(t,e,r){"use strict";"use restrict";function n(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}e.exports=n,n.prototype.length=function(){return this.roots.length},n.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},n.prototype.find=function(t){for(var e=this.roots;e[t]!==t;){var r=e[t];e[t]=e[r],t=r}return t},n.prototype.link=function(t,e){var r=this.find(t),n=this.find(e);if(r!==n){var i=this.ranks,o=this.roots,a=i[r],s=i[n];a<s?o[r]=n:s<a?o[n]=r:(o[n]=r,++i[r])}}},{}],682:[function(t,e,r){"use strict";e.exports=function(t,e,r){for(var o=e.length,a=t.length,s=new Array(o),l=new Array(o),g=new Array(o),c=new Array(o),u=0;u<o;++u)s[u]=l[u]=-1,g[u]=1/0,c[u]=!1;for(var u=0;u<a;++u){var h=t[u];if(2!==h.length)throw new Error("Input must be a graph");var d=h[1],A=h[0];-1!==l[A]?l[A]=-2:l[A]=d,-1!==s[d]?s[d]=-2:s[d]=A}function f(t){if(c[t])return 1/0;var r,i,o,a,g,u=s[t],h=l[t];return u<0||h<0?1/0:(r=e[t],i=e[u],o=e[h],a=Math.abs(n(r,i,o)),g=Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)),a/g)}function C(t,e){var r=_[t],n=_[e];_[t]=n,_[e]=r,w[r]=e,w[n]=t}function p(t){return g[_[t]]}function I(t){return 1&t?t-1>>1:(t>>1)-1}function v(t){for(var e=p(t);;){var r=e,n=2*t+1,i=2*(t+1),o=t;if(n<T){var a=p(n);a<r&&(o=n,r=a)}if(i<T){var s=p(i);s<r&&(o=i)}if(o===t)return t;C(t,o),t=o}}function m(t){for(var e=p(t);t>0;){var r=I(t);if(r>=0){var n=p(r);if(e<n){C(t,r),t=r;continue}}return t}}function y(){if(T>0){var t=_[0];return C(0,T-1),T-=1,v(0),t}return-1}function b(t,e){var r=_[t];return g[r]===e?t:(g[r]=-1/0,m(t),y(),g[r]=e,m((T+=1)-1))}function x(t){if(!c[t]){c[t]=!0;var e=s[t],r=l[t];s[r]>=0&&(s[r]=e),l[e]>=0&&(l[e]=r),w[e]>=0&&b(w[e],f(e)),w[r]>=0&&b(w[r],f(r))}}for(var _=[],w=new Array(o),u=0;u<o;++u){var k=g[u]=f(u);k<1/0?(w[u]=_.length,_.push(u)):w[u]=-1}for(var T=_.length,u=T>>1;u>=0;--u)v(u);for(;;){var M=y();if(M<0||g[M]>r)break;x(M)}for(var E=[],u=0;u<o;++u)c[u]||(w[u]=E.length,E.push(e[u].slice()));E.length;function O(t,e){if(t[e]<0)return e;var r=e,n=e;do{var i=t[n];if(!c[n]||i<0||i===n)break;if(i=t[n=i],!c[n]||i<0||i===n)break;n=i,r=t[r]}while(r!==n);for(var o=e;o!==n;o=t[o])t[o]=n;return n}var S=[];return t.forEach(function(t){var e=O(s,t[0]),r=O(l,t[1]);if(e>=0&&r>=0&&e!==r){var n=w[e],i=w[r];n!==i&&S.push([n,i])}}),i.unique(i.normalize(S)),{positions:E,edges:S}};var n=t("robust-orientation"),i=t("simplicial-complex")},{"robust-orientation":669,"simplicial-complex":680}],683:[function(t,e,r){"use strict";e.exports=function(t,e){var r,o,a,s;if(e[0][0]<e[1][0])r=e[0],o=e[1];else{if(!(e[0][0]>e[1][0]))return i(e,t);r=e[1],o=e[0]}if(t[0][0]<t[1][0])a=t[0],s=t[1];else{if(!(t[0][0]>t[1][0]))return-i(t,e);a=t[1],s=t[0]}var l=n(r,o,s),g=n(r,o,a);if(l<0){if(g<=0)return l}else if(l>0){if(g>=0)return l}else if(g)return g;if(l=n(s,a,o),g=n(s,a,r),l<0){if(g<=0)return l}else if(l>0){if(g>=0)return l}else if(g)return g;return o[0]-s[0]};var n=t("robust-orientation");function i(t,e){var r,i,o,a;if(e[0][0]<e[1][0])r=e[0],i=e[1];else{if(!(e[0][0]>e[1][0])){var s=Math.min(t[0][1],t[1][1]),l=Math.max(t[0][1],t[1][1]),g=Math.min(e[0][1],e[1][1]),c=Math.max(e[0][1],e[1][1]);return l<g?l-g:s>c?s-c:l-c}r=e[1],i=e[0]}t[0][1]<t[1][1]?(o=t[0],a=t[1]):(o=t[1],a=t[0]);var u=n(i,r,o);return u||((u=n(i,r,a))||a-i)}},{"robust-orientation":669}],684:[function(t,e,r){arguments[4][148][0].apply(r,arguments)},{dup:148}],685:[function(t,e,r){"use strict";e.exports=function(t){for(var e=t.length,r=2*e,n=new Array(r),o=0;o<e;++o){var l=t[o],g=l[0][0]<l[1][0];n[2*o]=new u(l[0][0],l,g,o),n[2*o+1]=new u(l[1][0],l,!g,o)}n.sort(function(t,e){var r=t.x-e.x;return r||((r=t.create-e.create)||Math.min(t.segment[0][1],t.segment[1][1])-Math.min(e.segment[0][1],e.segment[1][1]))});for(var h=i(a),d=[],A=[],f=[],o=0;o<r;){for(var C=n[o].x,p=[];o<r;){var I=n[o];if(I.x!==C)break;o+=1,I.segment[0][0]===I.x&&I.segment[1][0]===I.x?I.create&&(I.segment[0][1]<I.segment[1][1]?(p.push(new c(I.segment[0][1],I.index,!0,!0)),p.push(new c(I.segment[1][1],I.index,!1,!1))):(p.push(new c(I.segment[1][1],I.index,!0,!1)),p.push(new c(I.segment[0][1],I.index,!1,!0)))):h=I.create?h.insert(I.segment,I.index):h.remove(I.segment)}d.push(h.root),A.push(C),f.push(p)}return new s(d,A,f)};var n=t("binary-search-bounds"),i=t("functional-red-black-tree"),o=t("robust-orientation"),a=t("./lib/order-segments");function s(t,e,r){this.slabs=t,this.coordinates=e,this.horizontal=r}function l(t,e){return t.y-e}function g(t,e){for(var r=null;t;){var n,i,a=t.key;a[0][0]<a[1][0]?(n=a[0],i=a[1]):(n=a[1],i=a[0]);var s=o(n,i,e);if(s<0)t=t.left;else if(s>0)if(e[0]!==a[1][0])r=t,t=t.right;else{if(l=g(t.right,e))return l;t=t.left}else{if(e[0]!==a[1][0])return t;var l;if(l=g(t.right,e))return l;t=t.left}}return r}function c(t,e,r,n){this.y=t,this.index=e,this.start=r,this.closed=n}function u(t,e,r,n){this.x=t,this.segment=e,this.create=r,this.index=n}s.prototype.castUp=function(t){var e=n.le(this.coordinates,t[0]);if(e<0)return-1;this.slabs[e];var r=g(this.slabs[e],t),i=-1;if(r&&(i=r.value),this.coordinates[e]===t[0]){var s=null;if(r&&(s=r.key),e>0){var c=g(this.slabs[e-1],t);c&&(s?a(c.key,s)>0&&(s=c.key,i=c.value):(i=c.value,s=c.key))}var u=this.horizontal[e];if(u.length>0){var h=n.ge(u,t[1],l);if(h<u.length){var d=u[h];if(t[1]===d.y){if(d.closed)return d.index;for(;h<u.length-1&&u[h+1].y===t[1];)if((d=u[h+=1]).closed)return d.index;if(d.y===t[1]&&!d.start){if((h+=1)>=u.length)return i;d=u[h]}}if(d.start)if(s){var A=o(s[0],s[1],[t[0],d.y]);s[0][0]>s[1][0]&&(A=-A),A>0&&(i=d.index)}else i=d.index;else d.y!==t[1]&&(i=d.index)}}}return i}},{"./lib/order-segments":683,"binary-search-bounds":684,"functional-red-black-tree":150,"robust-orientation":669}],686:[function(t,e,r){"use strict";var n=t("robust-dot-product"),i=t("robust-sum");function o(t,e){var r=i(n(t,e),[e[e.length-1]]);return r[r.length-1]}function a(t,e,r,n){var i=-e/(n-e);i<0?i=0:i>1&&(i=1);for(var o=1-i,a=t.length,s=new Array(a),l=0;l<a;++l)s[l]=i*t[l]+o*r[l];return s}e.exports=function(t,e){for(var r=[],n=[],i=o(t[t.length-1],e),s=t[t.length-1],l=t[0],g=0;g<t.length;++g,s=l){var c=o(l=t[g],e);if(i<0&&c>0||i>0&&c<0){var u=a(s,c,l,i);r.push(u),n.push(u.slice())}c<0?n.push(l.slice()):c>0?r.push(l.slice()):(r.push(l.slice()),n.push(l.slice())),i=c}return{positive:r,negative:n}},e.exports.positive=function(t,e){for(var r=[],n=o(t[t.length-1],e),i=t[t.length-1],s=t[0],l=0;l<t.length;++l,i=s){var g=o(s=t[l],e);(n<0&&g>0||n>0&&g<0)&&r.push(a(i,g,s,n)),g>=0&&r.push(s.slice()),n=g}return r},e.exports.negative=function(t,e){for(var r=[],n=o(t[t.length-1],e),i=t[t.length-1],s=t[0],l=0;l<t.length;++l,i=s){var g=o(s=t[l],e);(n<0&&g>0||n>0&&g<0)&&r.push(a(i,g,s,n)),g<=0&&r.push(s.slice()),n=g}return r}},{"robust-dot-product":666,"robust-sum":674}],687:[function(t,e,r){!function(){"use strict";var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(r){return function(r,n){var i,o,a,s,l,g,c,u,h,d=1,A=r.length,f="";for(o=0;o<A;o++)if("string"==typeof r[o])f+=r[o];else if("object"==typeof r[o]){if((s=r[o]).keys)for(i=n[d],a=0;a<s.keys.length;a++){if(void 0==i)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[a],s.keys[a-1]));i=i[s.keys[a]]}else i=s.param_no?n[s.param_no]:n[d++];if(t.not_type.test(s.type)&&t.not_primitive.test(s.type)&&i instanceof Function&&(i=i()),t.numeric_arg.test(s.type)&&"number"!=typeof i&&isNaN(i))throw new TypeError(e("[sprintf] expecting number but found %T",i));switch(t.number.test(s.type)&&(u=i>=0),s.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,s.width?parseInt(s.width):0);break;case"e":i=s.precision?parseFloat(i).toExponential(s.precision):parseFloat(i).toExponential();break;case"f":i=s.precision?parseFloat(i).toFixed(s.precision):parseFloat(i);break;case"g":i=s.precision?String(Number(i.toPrecision(s.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=s.precision?i.substring(0,s.precision):i;break;case"t":i=String(!!i),i=s.precision?i.substring(0,s.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=s.precision?i.substring(0,s.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=s.precision?i.substring(0,s.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}t.json.test(s.type)?f+=i:(!t.number.test(s.type)||u&&!s.sign?h="":(h=u?"+":"-",i=i.toString().replace(t.sign,"")),g=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",c=s.width-(h+i).length,l=s.width&&c>0?g.repeat(c):"",f+=s.align?h+i+l:"0"===g?h+l+i:l+h+i)}return f}(function(e){if(i[e])return i[e];var r,n=e,o=[],a=0;for(;n;){if(null!==(r=t.text.exec(n)))o.push(r[0]);else if(null!==(r=t.modulo.exec(n)))o.push("%");else{if(null===(r=t.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){a|=1;var s=[],l=r[2],g=[];if(null===(g=t.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(g[1]);""!==(l=l.substring(g[0].length));)if(null!==(g=t.key_access.exec(l)))s.push(g[1]);else{if(null===(g=t.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(g[1])}r[2]=s}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o.push({placeholder:r[0],param_no:r[1],keys:r[2],sign:r[3],pad_char:r[4],align:r[5],width:r[6],precision:r[7],type:r[8]})}n=n.substring(r[0].length)}return i[e]=o}(r),arguments)}function n(t,r){return e.apply(null,[t].concat(r||[]))}var i=Object.create(null);void 0!==r&&(r.sprintf=e,r.vsprintf=n),"undefined"!=typeof window&&(window.sprintf=e,window.vsprintf=n)}()},{}],688:[function(t,e,r){"use strict";e.exports=function(t,e){if(t.dimension<=0)return{positions:[],cells:[]};if(1===t.dimension)return function(t,e){for(var r=o(t,e),n=r.length,i=new Array(n),a=new Array(n),s=0;s<n;++s)i[s]=[r[s]],a[s]=[s];return{positions:i,cells:a}}(t,e);var r=t.order.join()+"-"+t.dtype,s=a[r],e=+e||0;s||(s=a[r]=function(t,e){var r=t.length,o=["'use strict';"],a="surfaceNets"+t.join("_")+"d"+e;o.push("var contour=genContour({","order:[",t.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===e&&o.push("getters:[0],");for(var s=[],l=[],g=0;g<r;++g)s.push("d"+g),l.push("d"+g);for(var g=0;g<1<<r;++g)s.push("v"+g),l.push("v"+g);for(var g=0;g<1<<r;++g)s.push("p"+g),l.push("p"+g);s.push("a","b","c"),l.push("a","c"),o.push("vertex:function vertexFunc(",s.join(),"){");for(var c=[],g=0;g<1<<r;++g)c.push("(p"+g+"<<"+g+")");o.push("var m=(",c.join("+"),")|0;if(m===0||m===",(1<<(1<<r))-1,"){return}");var u=[],h=[];1<<(1<<r)<=128?(o.push("switch(m){"),h=o):o.push("switch(m>>>7){");for(var g=0;g<1<<(1<<r);++g){if(1<<(1<<r)>128&&g%128==0){u.length>0&&h.push("}}");var d="vExtra"+u.length;o.push("case ",g>>>7,":",d,"(m&0x7f,",l.join(),");break;"),h=["function ",d,"(m,",l.join(),"){switch(m){"],u.push(h)}h.push("case ",127&g,":");for(var A=new Array(r),f=new Array(r),C=new Array(r),p=new Array(r),I=0,v=0;v<r;++v)A[v]=[],f[v]=[],C[v]=0,p[v]=0;for(var v=0;v<1<<r;++v)for(var m=0;m<r;++m){var y=v^1<<m;if(!(y>v)&&!(g&1<<y)!=!(g&1<<v)){var b=1;g&1<<y?f[m].push("v"+y+"-v"+v):(f[m].push("v"+v+"-v"+y),b=-b),b<0?(A[m].push("-v"+v+"-v"+y),C[m]+=2):(A[m].push("v"+v+"+v"+y),C[m]-=2),I+=1;for(var x=0;x<r;++x)x!==m&&(y&1<<x?p[x]+=1:p[x]-=1)}}for(var _=[],m=0;m<r;++m)if(0===A[m].length)_.push("d"+m+"-0.5");else{var w="";C[m]<0?w=C[m]+"*c":C[m]>0&&(w="+"+C[m]+"*c");var k=A[m].length/I*.5,T=.5+p[m]/I*.5;_.push("d"+m+"-"+T+"-"+k+"*("+A[m].join("+")+w+")/("+f[m].join("+")+")")}h.push("a.push([",_.join(),"]);","break;")}o.push("}},"),u.length>0&&h.push("}}");for(var M=[],g=0;g<1<<r-1;++g)M.push("v"+g);M.push("c0","c1","p0","p1","a","b","c"),o.push("cell:function cellFunc(",M.join(),"){");var E=i(r-1);o.push("if(p0){b.push(",E.map(function(t){return"["+t.map(function(t){return"v"+t})+"]"}).join(),")}else{b.push(",E.map(function(t){var e=t.slice();return e.reverse(),"["+e.map(function(t){return"v"+t})+"]"}).join(),")}}});function ",a,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",a,";");for(var g=0;g<u.length;++g)o.push(u[g].join(""));return new Function("genContour",o.join(""))(n)}(t.order,t.dtype));return s(t,e)};var n=t("ndarray-extract-contour"),i=t("triangulate-hypercube"),o=t("zero-crossings");var a={}},{"ndarray-extract-contour":258,"triangulate-hypercube":696,"zero-crossings":723}],689:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=2*Math.PI,o=function(t,e,r,n,i,o,a){var s=t.x,l=t.y;return{x:n*(s*=e)-i*(l*=r)+o,y:i*s+n*l+a}},a=function(t,e){var r=1.5707963267948966===e?.551915024494:-1.5707963267948966===e?-.551915024494:4/3*Math.tan(e/4),n=Math.cos(t),i=Math.sin(t),o=Math.cos(t+e),a=Math.sin(t+e);return[{x:n-i*r,y:i+n*r},{x:o+a*r,y:a-o*r},{x:o,y:a}]},s=function(t,e,r,n){var i=t*r+e*n;return i>1&&(i=1),i<-1&&(i=-1),(t*n-e*r<0?-1:1)*Math.acos(i)};r.default=function(t){var e=t.px,r=t.py,l=t.cx,g=t.cy,c=t.rx,u=t.ry,h=t.xAxisRotation,d=void 0===h?0:h,A=t.largeArcFlag,f=void 0===A?0:A,C=t.sweepFlag,p=void 0===C?0:C,I=[];if(0===c||0===u)return[];var v=Math.sin(d*i/360),m=Math.cos(d*i/360),y=m*(e-l)/2+v*(r-g)/2,b=-v*(e-l)/2+m*(r-g)/2;if(0===y&&0===b)return[];c=Math.abs(c),u=Math.abs(u);var x=Math.pow(y,2)/Math.pow(c,2)+Math.pow(b,2)/Math.pow(u,2);x>1&&(c*=Math.sqrt(x),u*=Math.sqrt(x));var _=function(t,e,r,n,o,a,l,g,c,u,h,d){var A=Math.pow(o,2),f=Math.pow(a,2),C=Math.pow(h,2),p=Math.pow(d,2),I=A*f-A*p-f*C;I<0&&(I=0),I/=A*p+f*C;var v=(I=Math.sqrt(I)*(l===g?-1:1))*o/a*d,m=I*-a/o*h,y=u*v-c*m+(t+r)/2,b=c*v+u*m+(e+n)/2,x=(h-v)/o,_=(d-m)/a,w=(-h-v)/o,k=(-d-m)/a,T=s(1,0,x,_),M=s(x,_,w,k);return 0===g&&M>0&&(M-=i),1===g&&M<0&&(M+=i),[y,b,T,M]}(e,r,l,g,c,u,f,p,v,m,y,b),w=n(_,4),k=w[0],T=w[1],M=w[2],E=w[3],O=Math.abs(E)/(i/4);Math.abs(1-O)<1e-7&&(O=1);var S=Math.max(Math.ceil(O),1);E/=S;for(var R=0;R<S;R++)I.push(a(M,E)),M+=E;return I.map(function(t){var e=o(t[0],c,u,m,v,k,T),r=e.x,n=e.y,i=o(t[1],c,u,m,v,k,T),a=i.x,s=i.y,l=o(t[2],c,u,m,v,k,T);return{x1:r,y1:n,x2:a,y2:s,x:l.x,y:l.y}})},e.exports=r.default},{}],690:[function(t,e,r){"use strict";var n=t("parse-svg-path"),i=t("abs-svg-path"),o=t("normalize-svg-path"),a=t("is-svg-path"),s=t("assert");e.exports=function(t){Array.isArray(t)&&1===t.length&&"string"==typeof t[0]&&(t=t[0]);"string"==typeof t&&(s(a(t),"String is not an SVG path."),t=n(t));if(s(Array.isArray(t),"Argument should be a string or an array of path segments."),t=i(t),!(t=o(t)).length)return[0,0,0,0];for(var e=[1/0,1/0,-1/0,-1/0],r=0,l=t.length;r<l;r++)for(var g=t[r].slice(1),c=0;c<g.length;c+=2)g[c+0]<e[0]&&(e[0]=g[c+0]),g[c+1]<e[1]&&(e[1]=g[c+1]),g[c+0]>e[2]&&(e[2]=g[c+0]),g[c+1]>e[3]&&(e[3]=g[c+1]);return e}},{"abs-svg-path":3,assert:9,"is-svg-path":243,"normalize-svg-path":691,"parse-svg-path":271}],691:[function(t,e,r){"use strict";e.exports=function(t){for(var e,r=[],a=0,s=0,l=0,g=0,c=null,u=null,h=0,d=0,A=0,f=t.length;A<f;A++){var C=t[A],p=C[0];switch(p){case"M":l=C[1],g=C[2];break;case"A":var I=n({px:h,py:d,cx:C[6],cy:C[7],rx:C[1],ry:C[2],xAxisRotation:C[3],largeArcFlag:C[4],sweepFlag:C[5]});if(!I.length)continue;for(var v,m=0;m<I.length;m++)v=I[m],C=["C",v.x1,v.y1,v.x2,v.y2,v.x,v.y],m<I.length-1&&r.push(C);break;case"S":var y=h,b=d;"C"!=e&&"S"!=e||(y+=y-a,b+=b-s),C=["C",y,b,C[1],C[2],C[3],C[4]];break;case"T":"Q"==e||"T"==e?(c=2*h-c,u=2*d-u):(c=h,u=d),C=o(h,d,c,u,C[1],C[2]);break;case"Q":c=C[1],u=C[2],C=o(h,d,C[1],C[2],C[3],C[4]);break;case"L":C=i(h,d,C[1],C[2]);break;case"H":C=i(h,d,C[1],d);break;case"V":C=i(h,d,h,C[1]);break;case"Z":C=i(h,d,l,g)}e=p,h=C[C.length-2],d=C[C.length-1],C.length>4?(a=C[C.length-4],s=C[C.length-3]):(a=h,s=d),r.push(C)}return r};var n=t("svg-arc-to-cubic-bezier");function i(t,e,r,n){return["C",t,e,r,n,r,n]}function o(t,e,r,n,i,o){return["C",t/3+2/3*r,e/3+2/3*n,i/3+2/3*r,o/3+2/3*n,i,o]}},{"svg-arc-to-cubic-bezier":689}],692:[function(t,e,r){"use strict";var n,i=t("svg-path-bounds"),o=t("parse-svg-path"),a=t("draw-svg-path"),s=t("is-svg-path"),l=t("bitmap-sdf"),g=document.createElement("canvas"),c=g.getContext("2d");e.exports=function(t,e){if(!s(t))throw Error("Argument should be valid svg path string");e||(e={});var r,u;e.shape?(r=e.shape[0],u=e.shape[1]):(r=g.width=e.w||e.width||200,u=g.height=e.h||e.height||200);var h=Math.min(r,u),d=e.stroke||0,A=e.viewbox||e.viewBox||i(t),f=[r/(A[2]-A[0]),u/(A[3]-A[1])],C=Math.min(f[0]||0,f[1]||0)/2;c.fillStyle="black",c.fillRect(0,0,r,u),c.fillStyle="white",d&&("number"!=typeof d&&(d=1),c.strokeStyle=d>0?"white":"black",c.lineWidth=Math.abs(d));if(c.translate(.5*r,.5*u),c.scale(C,C),function(){if(null!=n)return n;var t=document.createElement("canvas").getContext("2d");if(t.canvas.width=t.canvas.height=1,!window.Path2D)return n=!1;var e=new Path2D("M0,0h1v1h-1v-1Z");t.fillStyle="black",t.fill(e);var r=t.getImageData(0,0,1,1);return n=r&&r.data&&255===r.data[3]}()){var p=new Path2D(t);c.fill(p),d&&c.stroke(p)}else{var I=o(t);a(c,I),c.fill(),d&&c.stroke()}return c.setTransform(1,0,0,1,0,0),l(c,{cutoff:null!=e.cutoff?e.cutoff:.5,radius:null!=e.radius?e.radius:.5*h})}},{"bitmap-sdf":34,"draw-svg-path":78,"is-svg-path":243,"parse-svg-path":271,"svg-path-bounds":690}],693:[function(t,e,r){!function(t){var r=/^\s+/,n=/\s+$/,i=0,o=t.round,a=t.min,s=t.max,l=t.random;function g(e,l){if(e=e||"",l=l||{},e instanceof g)return e;if(!(this instanceof g))return new g(e,l);var c=function(e){var i={r:0,g:0,b:0},o=1,l=null,g=null,c=null,u=!1,h=!1;"string"==typeof e&&(e=function(t){t=t.replace(r,"").replace(n,"").toLowerCase();var e,i=!1;if(T[t])t=T[t],i=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=j.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=j.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=j.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=j.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=j.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=j.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=j.hex8.exec(t))return{r:R(e[1]),g:R(e[2]),b:R(e[3]),a:N(e[4]),format:i?"name":"hex8"};if(e=j.hex6.exec(t))return{r:R(e[1]),g:R(e[2]),b:R(e[3]),format:i?"name":"hex"};if(e=j.hex4.exec(t))return{r:R(e[1]+""+e[1]),g:R(e[2]+""+e[2]),b:R(e[3]+""+e[3]),a:N(e[4]+""+e[4]),format:i?"name":"hex8"};if(e=j.hex3.exec(t))return{r:R(e[1]+""+e[1]),g:R(e[2]+""+e[2]),b:R(e[3]+""+e[3]),format:i?"name":"hex"};return!1}(e));"object"==typeof e&&(V(e.r)&&V(e.g)&&V(e.b)?(d=e.r,A=e.g,f=e.b,i={r:255*O(d,255),g:255*O(A,255),b:255*O(f,255)},u=!0,h="%"===String(e.r).substr(-1)?"prgb":"rgb"):V(e.h)&&V(e.s)&&V(e.v)?(l=L(e.s),g=L(e.v),i=function(e,r,n){e=6*O(e,360),r=O(r,100),n=O(n,100);var i=t.floor(e),o=e-i,a=n*(1-r),s=n*(1-o*r),l=n*(1-(1-o)*r),g=i%6;return{r:255*[n,s,a,a,l,n][g],g:255*[l,n,n,s,a,a][g],b:255*[a,a,l,n,n,s][g]}}(e.h,l,g),u=!0,h="hsv"):V(e.h)&&V(e.s)&&V(e.l)&&(l=L(e.s),c=L(e.l),i=function(t,e,r){var n,i,o;function a(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}if(t=O(t,360),e=O(e,100),r=O(r,100),0===e)n=i=o=r;else{var s=r<.5?r*(1+e):r+e-r*e,l=2*r-s;n=a(l,s,t+1/3),i=a(l,s,t),o=a(l,s,t-1/3)}return{r:255*n,g:255*i,b:255*o}}(e.h,l,c),u=!0,h="hsl"),e.hasOwnProperty("a")&&(o=e.a));var d,A,f;return o=E(o),{ok:u,format:e.format||h,r:a(255,s(i.r,0)),g:a(255,s(i.g,0)),b:a(255,s(i.b,0)),a:o}}(e);this._originalInput=e,this._r=c.r,this._g=c.g,this._b=c.b,this._a=c.a,this._roundA=o(100*this._a)/100,this._format=l.format||c.format,this._gradientType=l.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=c.ok,this._tc_id=i++}function c(t,e,r){t=O(t,255),e=O(e,255),r=O(r,255);var n,i,o=s(t,e,r),l=a(t,e,r),g=(o+l)/2;if(o==l)n=i=0;else{var c=o-l;switch(i=g>.5?c/(2-o-l):c/(o+l),o){case t:n=(e-r)/c+(e<r?6:0);break;case e:n=(r-t)/c+2;break;case r:n=(t-e)/c+4}n/=6}return{h:n,s:i,l:g}}function u(t,e,r){t=O(t,255),e=O(e,255),r=O(r,255);var n,i,o=s(t,e,r),l=a(t,e,r),g=o,c=o-l;if(i=0===o?0:c/o,o==l)n=0;else{switch(o){case t:n=(e-r)/c+(e<r?6:0);break;case e:n=(r-t)/c+2;break;case r:n=(t-e)/c+4}n/=6}return{h:n,s:i,v:g}}function h(t,e,r,n){var i=[D(o(t).toString(16)),D(o(e).toString(16)),D(o(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function d(t,e,r,n){return[D(P(n)),D(o(t).toString(16)),D(o(e).toString(16)),D(o(r).toString(16))].join("")}function A(t,e){e=0===e?0:e||10;var r=g(t).toHsl();return r.s-=e/100,r.s=S(r.s),g(r)}function f(t,e){e=0===e?0:e||10;var r=g(t).toHsl();return r.s+=e/100,r.s=S(r.s),g(r)}function C(t){return g(t).desaturate(100)}function p(t,e){e=0===e?0:e||10;var r=g(t).toHsl();return r.l+=e/100,r.l=S(r.l),g(r)}function I(t,e){e=0===e?0:e||10;var r=g(t).toRgb();return r.r=s(0,a(255,r.r-o(-e/100*255))),r.g=s(0,a(255,r.g-o(-e/100*255))),r.b=s(0,a(255,r.b-o(-e/100*255))),g(r)}function v(t,e){e=0===e?0:e||10;var r=g(t).toHsl();return r.l-=e/100,r.l=S(r.l),g(r)}function m(t,e){var r=g(t).toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,g(r)}function y(t){var e=g(t).toHsl();return e.h=(e.h+180)%360,g(e)}function b(t){var e=g(t).toHsl(),r=e.h;return[g(t),g({h:(r+120)%360,s:e.s,l:e.l}),g({h:(r+240)%360,s:e.s,l:e.l})]}function x(t){var e=g(t).toHsl(),r=e.h;return[g(t),g({h:(r+90)%360,s:e.s,l:e.l}),g({h:(r+180)%360,s:e.s,l:e.l}),g({h:(r+270)%360,s:e.s,l:e.l})]}function _(t){var e=g(t).toHsl(),r=e.h;return[g(t),g({h:(r+72)%360,s:e.s,l:e.l}),g({h:(r+216)%360,s:e.s,l:e.l})]}function w(t,e,r){e=e||6,r=r||30;var n=g(t).toHsl(),i=360/r,o=[g(t)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,o.push(g(n));return o}function k(t,e){e=e||6;for(var r=g(t).toHsv(),n=r.h,i=r.s,o=r.v,a=[],s=1/e;e--;)a.push(g({h:n,s:i,v:o})),o=(o+s)%1;return a}g.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var e,r,n,i=this.toRgb();return e=i.r/255,r=i.g/255,n=i.b/255,.2126*(e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:t.pow((r+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=E(t),this._roundA=o(100*this._a)/100,this},toHsv:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=u(this._r,this._g,this._b),e=o(360*t.h),r=o(100*t.s),n=o(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+n+"%)":"hsva("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=c(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=c(this._r,this._g,this._b),e=o(360*t.h),r=o(100*t.s),n=o(100*t.l);return 1==this._a?"hsl("+e+", "+r+"%, "+n+"%)":"hsla("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return h(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,r,n,i){var a=[D(o(t).toString(16)),D(o(e).toString(16)),D(o(r).toString(16)),D(P(n))];if(i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(100*O(this._r,255))+"%",g:o(100*O(this._g,255))+"%",b:o(100*O(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+o(100*O(this._r,255))+"%, "+o(100*O(this._g,255))+"%, "+o(100*O(this._b,255))+"%)":"rgba("+o(100*O(this._r,255))+"%, "+o(100*O(this._g,255))+"%, "+o(100*O(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(M[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+d(this._r,this._g,this._b,this._a),r=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var i=g(t);r="#"+d(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex4"===t&&(r=this.toHex8String(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),"hsv"===t&&(r=this.toHsvString()),r||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return g(this.toString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(p,arguments)},brighten:function(){return this._applyModification(I,arguments)},darken:function(){return this._applyModification(v,arguments)},desaturate:function(){return this._applyModification(A,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(C,arguments)},spin:function(){return this._applyModification(m,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(w,arguments)},complement:function(){return this._applyCombination(y,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(_,arguments)},triad:function(){return this._applyCombination(b,arguments)},tetrad:function(){return this._applyCombination(x,arguments)}},g.fromRatio=function(t,e){if("object"==typeof t){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]="a"===n?t[n]:L(t[n]));t=r}return g(t,e)},g.equals=function(t,e){return!(!t||!e)&&g(t).toRgbString()==g(e).toRgbString()},g.random=function(){return g.fromRatio({r:l(),g:l(),b:l()})},g.mix=function(t,e,r){r=0===r?0:r||50;var n=g(t).toRgb(),i=g(e).toRgb(),o=r/100;return g({r:(i.r-n.r)*o+n.r,g:(i.g-n.g)*o+n.g,b:(i.b-n.b)*o+n.b,a:(i.a-n.a)*o+n.a})},g.readability=function(e,r){var n=g(e),i=g(r);return(t.max(n.getLuminance(),i.getLuminance())+.05)/(t.min(n.getLuminance(),i.getLuminance())+.05)},g.isReadable=function(t,e,r){var n,i,o=g.readability(t,e);switch(i=!1,(n=function(t){var e,r;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==r&&"large"!==r&&(r="small");return{level:e,size:r}}(r)).level+n.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},g.mostReadable=function(t,e,r){var n,i,o,a,s=null,l=0;i=(r=r||{}).includeFallbackColors,o=r.level,a=r.size;for(var c=0;c<e.length;c++)(n=g.readability(t,e[c]))>l&&(l=n,s=g(e[c]));return g.isReadable(t,s,{level:o,size:a})||!i?s:(r.includeFallbackColors=!1,g.mostReadable(t,["#fff","#000"],r))};var T=g.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},M=g.hexNames=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}(T);function E(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function O(e,r){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(e)&&(e="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(e);return e=a(r,s(0,parseFloat(e))),n&&(e=parseInt(e*r,10)/100),t.abs(e-r)<1e-6?1:e%r/parseFloat(r)}function S(t){return a(1,s(0,t))}function R(t){return parseInt(t,16)}function D(t){return 1==t.length?"0"+t:""+t}function L(t){return t<=1&&(t=100*t+"%"),t}function P(e){return t.round(255*parseFloat(e)).toString(16)}function N(t){return R(t)/255}var z,F,B,j=(F="[\\s|\\(]+("+(z="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",B="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",{CSS_UNIT:new RegExp(z),rgb:new RegExp("rgb"+F),rgba:new RegExp("rgba"+B),hsl:new RegExp("hsl"+F),hsla:new RegExp("hsla"+B),hsv:new RegExp("hsv"+F),hsva:new RegExp("hsva"+B),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function V(t){return!!j.CSS_UNIT.exec(t)}void 0!==e&&e.exports?e.exports=g:window.tinycolor=g}(Math)},{}],694:[function(t,e,r){"use strict";e.exports=i,e.exports.float32=e.exports.float=i,e.exports.fract32=e.exports.fract=function(t){if(t.length){for(var e=i(t),r=0,n=e.length;r<n;r++)e[r]=t[r]-e[r];return e}return i(t-i(t))};var n=new Float32Array(1);function i(t){if(t.length){if(t instanceof Float32Array)return t;var e=new Float32Array(t);return e.set(t),e}return n[0]=t,n[0]}},{}],695:[function(t,e,r){"use strict";var n=t("parse-unit");e.exports=s;var i=a("in",document.body);function o(t,e){var r=n(getComputedStyle(t).getPropertyValue(e));return r[0]*s(r[1],t)}function a(t,e){var r=document.createElement("div");r.style.height="128"+t,e.appendChild(r);var n=o(r,"height")/128;return e.removeChild(r),n}function s(t,e){if(!t)return null;switch(e=e||document.body,t=(t+""||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),t){case"%":return e.clientHeight/100;case"ch":case"ex":return a(t,e);case"em":return o(e,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return i;case"cm":return i/2.54;case"mm":return i/25.4;case"pt":return i/72;case"pc":return i/6;case"px":return 1}var r=n(t);if(!isNaN(r[0])&&r[1]){var l=s(r[1],e);return"number"==typeof l?r[0]*l:null}return null}},{"parse-unit":272}],696:[function(t,e,r){"use strict";e.exports=function(t){if(t<0)return[];if(0===t)return[[0]];for(var e=0|Math.round(o(t+1)),r=[],a=0;a<e;++a){for(var s=n.unrank(t,a),l=[0],g=0,c=0;c<s.length;++c)g+=1<<s[c],l.push(g);i(s)<1&&(l[0]=g,l[t]=0),r.push(l)}return r};var n=t("permutation-rank"),i=t("permutation-parity"),o=t("gamma")},{gamma:151,"permutation-parity":274,"permutation-rank":275}],697:[function(t,e,r){"use strict";e.exports=function(t){var e=(t=t||{}).center||[0,0,0],r=t.up||[0,1,0],n=t.right||u(r),i=t.radius||1,o=t.theta||0,c=t.phi||0;if(e=[].slice.call(e,0,3),r=[].slice.call(r,0,3),s(r,r),n=[].slice.call(n,0,3),s(n,n),"eye"in t){var d=t.eye,A=[d[0]-e[0],d[1]-e[1],d[2]-e[2]];a(n,A,r),g(n[0],n[1],n[2])<1e-6?n=u(r):s(n,n),i=g(A[0],A[1],A[2]);var f=l(r,A)/i,C=l(n,A)/i;c=Math.acos(f),o=Math.acos(C)}return i=Math.log(i),new h(t.zoomMin,t.zoomMax,e,r,n,i,o,c)};var n=t("filtered-vector"),i=t("gl-mat4/invert"),o=t("gl-mat4/rotate"),a=t("gl-vec3/cross"),s=t("gl-vec3/normalize"),l=t("gl-vec3/dot");function g(t,e,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2))}function c(t){return Math.min(1,Math.max(-1,t))}function u(t){var e=Math.abs(t[0]),r=Math.abs(t[1]),n=Math.abs(t[2]),i=[0,0,0];e>Math.max(r,n)?i[2]=1:r>Math.max(e,n)?i[0]=1:i[1]=1;for(var o=0,a=0,l=0;l<3;++l)o+=t[l]*t[l],a+=i[l]*t[l];for(l=0;l<3;++l)i[l]-=a/o*t[l];return s(i,i),i}function h(t,e,r,i,o,a,s,l){this.center=n(r),this.up=n(i),this.right=n(o),this.radius=n([a]),this.angle=n([s,l]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(t,e),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var g=0;g<16;++g)this.computedMatrix[g]=.5;this.recalcMatrix(0)}var d=h.prototype;d.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=e>0?Math.log(e):1/0,e=Math.max(e,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},d.getDistanceLimits=function(t){var e=this.radius.bounds[0];return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},d.recalcMatrix=function(t){this.center.curve(t),this.up.curve(t),this.right.curve(t),this.radius.curve(t),this.angle.curve(t);for(var e=this.computedUp,r=this.computedRight,n=0,i=0,o=0;o<3;++o)i+=e[o]*r[o],n+=e[o]*e[o];var l=Math.sqrt(n),c=0;for(o=0;o<3;++o)r[o]-=e[o]*i/n,c+=r[o]*r[o],e[o]/=l;var u=Math.sqrt(c);for(o=0;o<3;++o)r[o]/=u;var h=this.computedToward;a(h,e,r),s(h,h);var d=Math.exp(this.computedRadius[0]),A=this.computedAngle[0],f=this.computedAngle[1],C=Math.cos(A),p=Math.sin(A),I=Math.cos(f),v=Math.sin(f),m=this.computedCenter,y=C*I,b=p*I,x=v,_=-C*v,w=-p*v,k=I,T=this.computedEye,M=this.computedMatrix;for(o=0;o<3;++o){var E=y*r[o]+b*h[o]+x*e[o];M[4*o+1]=_*r[o]+w*h[o]+k*e[o],M[4*o+2]=E,M[4*o+3]=0}var O=M[1],S=M[5],R=M[9],D=M[2],L=M[6],P=M[10],N=S*P-R*L,z=R*D-O*P,F=O*L-S*D,B=g(N,z,F);N/=B,z/=B,F/=B,M[0]=N,M[4]=z,M[8]=F;for(o=0;o<3;++o)T[o]=m[o]+M[2+4*o]*d;for(o=0;o<3;++o){c=0;for(var j=0;j<3;++j)c+=M[o+4*j]*T[j];M[12+o]=-c}M[15]=1},d.getMatrix=function(t,e){this.recalcMatrix(t);var r=this.computedMatrix;if(e){for(var n=0;n<16;++n)e[n]=r[n];return e}return r};var A=[0,0,0];d.rotate=function(t,e,r,n){if(this.angle.move(t,e,r),n){this.recalcMatrix(t);var i=this.computedMatrix;A[0]=i[2],A[1]=i[6],A[2]=i[10];for(var a=this.computedUp,s=this.computedRight,l=this.computedToward,g=0;g<3;++g)i[4*g]=a[g],i[4*g+1]=s[g],i[4*g+2]=l[g];o(i,i,n,A);for(g=0;g<3;++g)a[g]=i[4*g],s[g]=i[4*g+1];this.up.set(t,a[0],a[1],a[2]),this.right.set(t,s[0],s[1],s[2])}},d.pan=function(t,e,r,n){e=e||0,r=r||0,n=n||0,this.recalcMatrix(t);var i=this.computedMatrix,o=(Math.exp(this.computedRadius[0]),i[1]),a=i[5],s=i[9],l=g(o,a,s);o/=l,a/=l,s/=l;var c=i[0],u=i[4],h=i[8],d=c*o+u*a+h*s,A=g(c-=o*d,u-=a*d,h-=s*d),f=(c/=A)*e+o*r,C=(u/=A)*e+a*r,p=(h/=A)*e+s*r;this.center.move(t,f,C,p);var I=Math.exp(this.computedRadius[0]);I=Math.max(1e-4,I+n),this.radius.set(t,Math.log(I))},d.translate=function(t,e,r,n){this.center.move(t,e||0,r||0,n||0)},d.setMatrix=function(t,e,r,n){var o=1;"number"==typeof r&&(o=0|r),(o<0||o>3)&&(o=1);var a=(o+2)%3;e||(this.recalcMatrix(t),e=this.computedMatrix);var s=e[o],l=e[o+4],u=e[o+8];if(n){var h=Math.abs(s),d=Math.abs(l),A=Math.abs(u),f=Math.max(h,d,A);h===f?(s=s<0?-1:1,l=u=0):A===f?(u=u<0?-1:1,s=l=0):(l=l<0?-1:1,s=u=0)}else{var C=g(s,l,u);s/=C,l/=C,u/=C}var p,I,v=e[a],m=e[a+4],y=e[a+8],b=v*s+m*l+y*u,x=g(v-=s*b,m-=l*b,y-=u*b),_=l*(y/=x)-u*(m/=x),w=u*(v/=x)-s*y,k=s*m-l*v,T=g(_,w,k);if(_/=T,w/=T,k/=T,this.center.jump(t,Z,H,W),this.radius.idle(t),this.up.jump(t,s,l,u),this.right.jump(t,v,m,y),2===o){var M=e[1],E=e[5],O=e[9],S=M*v+E*m+O*y,R=M*_+E*w+O*k;p=N<0?-Math.PI/2:Math.PI/2,I=Math.atan2(R,S)}else{var D=e[2],L=e[6],P=e[10],N=D*s+L*l+P*u,z=D*v+L*m+P*y,F=D*_+L*w+P*k;p=Math.asin(c(N)),I=Math.atan2(F,z)}this.angle.jump(t,I,p),this.recalcMatrix(t);var B=e[2],j=e[6],V=e[10],G=this.computedMatrix;i(G,e);var U=G[15],Z=G[12]/U,H=G[13]/U,W=G[14]/U,Y=Math.exp(this.computedRadius[0]);this.center.jump(t,Z-B*Y,H-j*Y,W-V*Y)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(t){this.center.idle(t),this.up.idle(t),this.right.idle(t),this.radius.idle(t),this.angle.idle(t)},d.flush=function(t){this.center.flush(t),this.up.flush(t),this.right.flush(t),this.radius.flush(t),this.angle.flush(t)},d.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},d.lookAt=function(t,e,r,n){this.recalcMatrix(t),e=e||this.computedEye,r=r||this.computedCenter;var i=(n=n||this.computedUp)[0],o=n[1],a=n[2],s=g(i,o,a);if(!(s<1e-6)){i/=s,o/=s,a/=s;var l=e[0]-r[0],u=e[1]-r[1],h=e[2]-r[2],d=g(l,u,h);if(!(d<1e-6)){l/=d,u/=d,h/=d;var A=this.computedRight,f=A[0],C=A[1],p=A[2],I=i*f+o*C+a*p,v=g(f-=I*i,C-=I*o,p-=I*a);if(!(v<.01&&(v=g(f=o*h-a*u,C=a*l-i*h,p=i*u-o*l))<1e-6)){f/=v,C/=v,p/=v,this.up.set(t,i,o,a),this.right.set(t,f,C,p),this.center.set(t,r[0],r[1],r[2]),this.radius.set(t,Math.log(d));var m=o*p-a*C,y=a*f-i*p,b=i*C-o*f,x=g(m,y,b),_=i*l+o*u+a*h,w=f*l+C*u+p*h,k=(m/=x)*l+(y/=x)*u+(b/=x)*h,T=Math.asin(c(_)),M=Math.atan2(k,w),E=this.angle._state,O=E[E.length-1],S=E[E.length-2];O%=2*Math.PI;var R=Math.abs(O+2*Math.PI-M),D=Math.abs(O-M),L=Math.abs(O-2*Math.PI-M);R<D&&(O+=2*Math.PI),L<D&&(O-=2*Math.PI),this.angle.jump(this.angle.lastT(),O,S),this.angle.set(t,M,T)}}}}},{"filtered-vector":147,"gl-mat4/invert":176,"gl-mat4/rotate":181,"gl-vec3/cross":214,"gl-vec3/dot":215,"gl-vec3/normalize":218}],698:[function(t,e,r){"use strict";e.exports=function(t,e,r){var i=t*e,o=n*t,a=o-(o-t),s=t-a,l=n*e,g=l-(l-e),c=e-g,u=s*c-(i-a*g-s*g-a*c);if(r)return r[0]=u,r[1]=i,r;return[u,i]};var n=+(Math.pow(2,27)+1)},{}],699:[function(t,e,r){"use strict";e.exports=function(t,e,r){var n=t+e,i=n-t,o=e-i,a=t-(n-i);if(r)return r[0]=a+o,r[1]=n,r;return[a+o,n]}},{}],700:[function(t,e,r){"use strict";var n=t("../prototype/is");e.exports=function(t){if("function"!=typeof t)return!1;if(!hasOwnProperty.call(t,"length"))return!1;try{if("number"!=typeof t.length)return!1;if("function"!=typeof t.call)return!1;if("function"!=typeof t.apply)return!1}catch(t){return!1}return!n(t)}},{"../prototype/is":707}],701:[function(t,e,r){"use strict";var n=t("../value/is"),i=t("../object/is"),o=t("../string/coerce"),a=t("./to-short-string"),s=function(t,e){return t.replace("%v",a(e))};e.exports=function(t,e,r){if(!i(r))throw new TypeError(s(e,t));if(!n(t)){if("default"in r)return r.default;if(r.isOptional)return null}var a=o(r.errorMessage);throw n(a)||(a=e),new TypeError(s(a,t))}},{"../object/is":704,"../string/coerce":708,"../value/is":710,"./to-short-string":703}],702:[function(t,e,r){"use strict";e.exports=function(t){try{return t.toString()}catch(e){try{return String(t)}catch(t){return null}}}},{}],703:[function(t,e,r){"use strict";var n=t("./safe-to-string"),i=/[\n\r\u2028\u2029]/g;e.exports=function(t){var e=n(t);return null===e?"<Non-coercible to string value>":(e.length>100&&(e=e.slice(0,99)+"…"),e=e.replace(i,function(t){switch(t){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":702}],704:[function(t,e,r){"use strict";var n=t("../value/is"),i={object:!0,function:!0,undefined:!0};e.exports=function(t){return!!n(t)&&hasOwnProperty.call(i,typeof t)}},{"../value/is":710}],705:[function(t,e,r){"use strict";var n=t("../lib/resolve-exception"),i=t("./is");e.exports=function(t){return i(t)?t:n(t,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":701,"./is":706}],706:[function(t,e,r){"use strict";var n=t("../function/is"),i=/^\s*class[\s{/}]/,o=Function.prototype.toString;e.exports=function(t){return!!n(t)&&!i.test(o.call(t))}},{"../function/is":700}],707:[function(t,e,r){"use strict";var n=t("../object/is");e.exports=function(t){if(!n(t))return!1;try{return!!t.constructor&&t.constructor.prototype===t}catch(t){return!1}}},{"../object/is":704}],708:[function(t,e,r){"use strict";var n=t("../value/is"),i=t("../object/is"),o=Object.prototype.toString;e.exports=function(t){if(!n(t))return null;if(i(t)){var e=t.toString;if("function"!=typeof e)return null;if(e===o)return null}try{return""+t}catch(t){return null}}},{"../object/is":704,"../value/is":710}],709:[function(t,e,r){"use strict";var n=t("../lib/resolve-exception"),i=t("./is");e.exports=function(t){return i(t)?t:n(t,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":701,"./is":710}],710:[function(t,e,r){"use strict";e.exports=function(t){return void 0!==t&&null!==t}},{}],711:[function(t,e,r){(function(e){"use strict";var n=t("bit-twiddle"),i=t("dup"),o=t("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var a="undefined"!=typeof Uint8ClampedArray,s="undefined"!=typeof BigUint64Array,l="undefined"!=typeof BigInt64Array,g=e.__TYPEDARRAY_POOL;g.UINT8C||(g.UINT8C=i([32,0])),g.BIGUINT64||(g.BIGUINT64=i([32,0])),g.BIGINT64||(g.BIGINT64=i([32,0])),g.BUFFER||(g.BUFFER=i([32,0]));var c=g.DATA,u=g.BUFFER;function h(t){if(t){var e=t.length||t.byteLength,r=n.log2(e);c[r].push(t)}}function d(t){t=n.nextPow2(t);var e=n.log2(t),r=c[e];return r.length>0?r.pop():new ArrayBuffer(t)}function A(t){return new Uint8Array(d(t),0,t)}function f(t){return new Uint16Array(d(2*t),0,t)}function C(t){return new Uint32Array(d(4*t),0,t)}function p(t){return new Int8Array(d(t),0,t)}function I(t){return new Int16Array(d(2*t),0,t)}function v(t){return new Int32Array(d(4*t),0,t)}function m(t){return new Float32Array(d(4*t),0,t)}function y(t){return new Float64Array(d(8*t),0,t)}function b(t){return a?new Uint8ClampedArray(d(t),0,t):A(t)}function x(t){return s?new BigUint64Array(d(8*t),0,t):null}function _(t){return l?new BigInt64Array(d(8*t),0,t):null}function w(t){return new DataView(d(t),0,t)}function k(t){t=n.nextPow2(t);var e=n.log2(t),r=u[e];return r.length>0?r.pop():new o(t)}r.free=function(t){if(o.isBuffer(t))u[n.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var e=t.length||t.byteLength,r=0|n.log2(e);c[r].push(t)}},r.freeUint8=r.freeUint16=r.freeUint32=r.freeBigUint64=r.freeInt8=r.freeInt16=r.freeInt32=r.freeBigInt64=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=function(t){h(t.buffer)},r.freeArrayBuffer=h,r.freeBuffer=function(t){u[n.log2(t.length)].push(t)},r.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return d(t);switch(e){case"uint8":return A(t);case"uint16":return f(t);case"uint32":return C(t);case"int8":return p(t);case"int16":return I(t);case"int32":return v(t);case"float":case"float32":return m(t);case"double":case"float64":return y(t);case"uint8_clamped":return b(t);case"bigint64":return _(t);case"biguint64":return x(t);case"buffer":return k(t);case"data":case"dataview":return w(t);default:return null}return null},r.mallocArrayBuffer=d,r.mallocUint8=A,r.mallocUint16=f,r.mallocUint32=C,r.mallocInt8=p,r.mallocInt16=I,r.mallocInt32=v,r.mallocFloat32=r.mallocFloat=m,r.mallocFloat64=r.mallocDouble=y,r.mallocUint8Clamped=b,r.mallocBigUint64=x,r.mallocBigInt64=_,r.mallocDataView=w,r.mallocBuffer=k,r.clearCache=function(){for(var t=0;t<32;++t)g.UINT8[t].length=0,g.UINT16[t].length=0,g.UINT32[t].length=0,g.INT8[t].length=0,g.INT16[t].length=0,g.INT32[t].length=0,g.FLOAT[t].length=0,g.DOUBLE[t].length=0,g.BIGUINT64[t].length=0,g.BIGINT64[t].length=0,g.UINT8C[t].length=0,c[t].length=0,u[t].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":33,buffer:44,dup:80}],712:[function(t,e,r){"use strict";"use restrict";function n(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}e.exports=n;var i=n.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},i.find=function(t){for(var e=t,r=this.roots;r[t]!==t;)t=r[t];for(;r[e]!==t;){var n=r[e];r[e]=t,e=n}return t},i.link=function(t,e){var r=this.find(t),n=this.find(e);if(r!==n){var i=this.ranks,o=this.roots,a=i[r],s=i[n];a<s?o[r]=n:s<a?o[n]=r:(o[n]=r,++i[r])}}},{}],713:[function(t,e,r){"use strict";e.exports=function(t,e,r){return 0===t.length?t:e?(r||t.sort(e),function(t,e){for(var r=1,n=t.length,i=t[0],o=t[0],a=1;a<n;++a)if(o=i,e(i=t[a],o)){if(a===r){r++;continue}t[r++]=i}return t.length=r,t}(t,e)):(r||t.sort(),function(t){for(var e=1,r=t.length,n=t[0],i=t[0],o=1;o<r;++o,i=n)if(i=n,(n=t[o])!==i){if(o===e){e++;continue}t[e++]=n}return t.length=e,t}(t))}},{}],714:[function(t,e,r){"use strict";e.exports=function(t,e,r){Array.isArray(r)||(r=[].slice.call(arguments,2));for(var n=0,i=r.length;n<i;n++){var o=r[n];for(var a in o)if((void 0===e[a]||Array.isArray(e[a])||t[a]!==e[a])&&a in e){var s;if(!0===o[a])s=e[a];else{if(!1===o[a])continue;if("function"==typeof o[a]&&void 0===(s=o[a](e[a],t,e)))continue}t[a]=s}}return t}},{}],715:[function(t,e,r){"use strict";e.exports=function(t,e){"object"==typeof e&&null!==e||(e={});return n(t,e.canvas||i,e.context||o,e)};var n=t("./lib/vtext"),i=null,o=null;"undefined"!=typeof document&&((i=document.createElement("canvas")).width=8192,i.height=1024,o=i.getContext("2d"))},{"./lib/vtext":716}],716:[function(t,e,r){e.exports=function(t,e,r,n){var o=64,a=1.25,s={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};n&&(n.size&&n.size>0&&(o=n.size),n.lineSpacing&&n.lineSpacing>0&&(a=n.lineSpacing),n.styletags&&n.styletags.breaklines&&(s.breaklines=!!n.styletags.breaklines),n.styletags&&n.styletags.bolds&&(s.bolds=!!n.styletags.bolds),n.styletags&&n.styletags.italics&&(s.italics=!!n.styletags.italics),n.styletags&&n.styletags.subscripts&&(s.subscripts=!!n.styletags.subscripts),n.styletags&&n.styletags.superscripts&&(s.superscripts=!!n.styletags.superscripts));return r.font=[n.fontStyle,n.fontVariant,n.fontWeight,o+"px",n.font].filter(function(t){return t}).join(" "),r.textAlign="start",r.textBaseline="alphabetic",r.direction="ltr",b(function(t,e,r,n,o,a){r=r.replace(/\n/g,""),r=!0===a.breaklines?r.replace(/\<br\>/g,"\n"):r.replace(/\<br\>/g," ");var s="",l=[];for(x=0;x<r.length;++x)l[x]=s;!0===a.bolds&&(l=v(g,c,r,l)),!0===a.italics&&(l=v(u,h,r,l)),!0===a.superscripts&&(l=v(d,f,r,l)),!0===a.subscripts&&(l=v(C,I,r,l));var m=[],y="";for(x=0;x<r.length;++x)null!==l[x]&&(y+=r[x],m.push(l[x]));var b,x,_,w,k,T=y.split("\n"),M=T.length,E=Math.round(o*n),O=n,S=2*n,R=0,D=M*E+S;t.height<D&&(t.height=D),e.fillStyle="#000",e.fillRect(0,0,t.width,t.height),e.fillStyle="#fff";var L=0,P="";function N(){if(""!==P){var t=e.measureText(P).width;e.fillText(P,O+_,S+w),_+=t}}function z(){return Math.round(k)+"px "}function F(t,r){var n=""+e.font;if(!0===a.subscripts){var i=t.indexOf(p),o=r.indexOf(p),s=i>-1?parseInt(t[1+i]):0,l=o>-1?parseInt(r[1+o]):0;s!==l&&(n=n.replace(z(),"?px "),k*=Math.pow(.75,l-s),n=n.replace("?px ",z())),w+=.25*E*(l-s)}if(!0===a.superscripts){var g=t.indexOf(A),u=r.indexOf(A),d=g>-1?parseInt(t[1+g]):0,f=u>-1?parseInt(r[1+u]):0;d!==f&&(n=n.replace(z(),"?px "),k*=Math.pow(.75,f-d),n=n.replace("?px ",z())),w-=.25*E*(f-d)}if(!0===a.bolds){var C=t.indexOf(c)>-1,I=r.indexOf(c)>-1;!C&&I&&(n=v?n.replace("italic ","italic bold "):"bold "+n),C&&!I&&(n=n.replace("bold ",""))}if(!0===a.italics){var v=t.indexOf(h)>-1,m=r.indexOf(h)>-1;!v&&m&&(n="italic "+n),v&&!m&&(n=n.replace("italic ",""))}e.font=n}for(b=0;b<M;++b){var B=T[b]+"\n";for(_=0,w=b*E,k=n,P="",x=0;x<B.length;++x){var j=x+L<m.length?m[x+L]:m[m.length-1];s===j?P+=B[x]:(N(),P=B[x],void 0!==j&&(F(s,j),s=j))}N(),L+=B.length;var V=0|Math.round(_+2*O);R<V&&(R=V)}var G=R,U=S+E*M;return i(e.getImageData(0,0,G,U).data,[U,G,4]).pick(-1,-1,0).transpose(1,0)}(e,r,t,o,a,s),n,o)},e.exports.processPixels=b;var n=t("surface-nets"),i=t("ndarray"),o=t("simplify-planar-graph"),a=t("clean-pslg"),s=t("cdt2d"),l=t("planar-graph-to-polyline"),g="b",c="b|",u="i",h="i|",d="sup",A="+",f="+1",C="sub",p="-",I="-1";function v(t,e,r,n){for(var i="<"+t+">",o="</"+t+">",a=i.length,s=o.length,l=e[0]===A||e[0]===p,g=0,c=-s;g>-1&&-1!==(g=r.indexOf(i,g))&&-1!==(c=r.indexOf(o,g+a))&&!(c<=g);){for(var u=g;u<c+s;++u)if(u<g+a||u>=c)n[u]=null,r=r.substr(0,u)+" "+r.substr(u+1);else if(null!==n[u]){var h=n[u].indexOf(e[0]);-1===h?n[u]+=e:l&&(n[u]=n[u].substr(0,h+1)+(1+parseInt(n[u][h+1]))+n[u].substr(h+2))}var d=g+a,f=r.substr(d,c-d).indexOf(i);g=-1!==f?f:c+s}return n}function m(t,e){var r=n(t,128);return e?o(r.cells,r.positions,.25):{edges:r.cells,positions:r.positions}}function y(t,e,r,n){var i=m(t,n),o=function(t,e,r){for(var n=e.textAlign||"start",i=e.textBaseline||"alphabetic",o=[1<<30,1<<30],a=[0,0],s=t.length,l=0;l<s;++l)for(var g=t[l],c=0;c<2;++c)o[c]=0|Math.min(o[c],g[c]),a[c]=0|Math.max(a[c],g[c]);var u=0;switch(n){case"center":u=-.5*(o[0]+a[0]);break;case"right":case"end":u=-a[0];break;case"left":case"start":u=-o[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+n+"'")}var h=0;switch(i){case"hanging":case"top":h=-o[1];break;case"middle":h=-.5*(o[1]+a[1]);break;case"alphabetic":case"ideographic":h=-3*r;break;case"bottom":h=-a[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+i+"'")}var d=1/r;return"lineHeight"in e?d*=+e.lineHeight:"width"in e?d=e.width/(a[0]-o[0]):"height"in e&&(d=e.height/(a[1]-o[1])),t.map(function(t){return[d*(t[0]+u),d*(t[1]+h)]})}(i.positions,e,r),g=i.edges,c="ccw"===e.orientation;if(a(o,g),e.polygons||e.polygon||e.polyline){for(var u=l(g,o),h=new Array(u.length),d=0;d<u.length;++d){for(var A=u[d],f=new Array(A.length),C=0;C<A.length;++C){for(var p=A[C],I=new Array(p.length),v=0;v<p.length;++v)I[v]=o[p[v]].slice();c&&I.reverse(),f[C]=I}h[d]=f}return h}return e.triangles||e.triangulate||e.triangle?{cells:s(o,g,{delaunay:!1,exterior:!1,interior:!0}),positions:o}:{edges:g,positions:o}}function b(t,e,r){try{return y(t,e,r,!0)}catch(t){}try{return y(t,e,r,!1)}catch(t){}return e.polygons||e.polyline||e.polygon?[]:e.triangles||e.triangulate||e.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:45,"clean-pslg":51,ndarray:262,"planar-graph-to-polyline":279,"simplify-planar-graph":682,"surface-nets":688}],717:[function(t,e,r){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=C);var t=!1;if("function"==typeof WeakMap){var r=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var n=new r,i=Object.freeze({});if(n.set(i,1),1===n.get(i))return void(e.exports=WeakMap);t=!0}}Object.prototype.hasOwnProperty;var o=Object.getOwnPropertyNames,a=Object.defineProperty,s=Object.isExtensible,l="weakmap:",g=l+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var c=new ArrayBuffer(25),u=new Uint8Array(c);crypto.getRandomValues(u),g=l+"rand:"+Array.prototype.map.call(u,function(t){return(t%36).toString(36)}).join("")+"___"}if(a(Object,"getOwnPropertyNames",{value:function(t){return o(t).filter(p)}}),"getPropertyNames"in Object){var h=Object.getPropertyNames;a(Object,"getPropertyNames",{value:function(t){return h(t).filter(p)}})}!function(){var t=Object.freeze;a(Object,"freeze",{value:function(e){return I(e),t(e)}});var e=Object.seal;a(Object,"seal",{value:function(t){return I(t),e(t)}});var r=Object.preventExtensions;a(Object,"preventExtensions",{value:function(t){return I(t),r(t)}})}();var d=!1,A=0,f=function(){this instanceof f||m();var t=[],e=[],r=A++;return Object.create(f.prototype,{get___:{value:v(function(n,i){var o,a=I(n);return a?r in a?a[r]:i:(o=t.indexOf(n))>=0?e[o]:i})},has___:{value:v(function(e){var n=I(e);return n?r in n:t.indexOf(e)>=0})},set___:{value:v(function(n,i){var o,a=I(n);return a?a[r]=i:(o=t.indexOf(n))>=0?e[o]=i:(o=t.length,e[o]=i,t[o]=n),this})},delete___:{value:v(function(n){var i,o,a=I(n);return a?r in a&&delete a[r]:!((i=t.indexOf(n))<0||(o=t.length-1,t[i]=void 0,e[i]=e[o],t[i]=t[o],t.length=o,e.length=o,0))})}})};f.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.get___(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.set___(t,e)},writable:!0,configurable:!0},delete:{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),"function"==typeof r?function(){function n(){this instanceof f||m();var e,n=new r,i=void 0,o=!1;return e=t?function(t,e){return n.set(t,e),n.has(t)||(i||(i=new f),i.set(t,e)),this}:function(t,e){if(o)try{n.set(t,e)}catch(r){i||(i=new f),i.set___(t,e)}else n.set(t,e);return this},Object.create(f.prototype,{get___:{value:v(function(t,e){return i?n.has(t)?n.get(t):i.get___(t,e):n.get(t,e)})},has___:{value:v(function(t){return n.has(t)||!!i&&i.has___(t)})},set___:{value:v(e)},delete___:{value:v(function(t){var e=!!n.delete(t);return i&&i.delete___(t)||e})},permitHostObjects___:{value:v(function(t){if(t!==C)throw new Error("bogus call to permitHostObjects___");o=!0})}})}t&&"undefined"!=typeof Proxy&&(Proxy=void 0),n.prototype=f.prototype,e.exports=n,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),e.exports=f)}function C(t){t.permitHostObjects___&&t.permitHostObjects___(C)}function p(t){return!(t.substr(0,l.length)==l&&"___"===t.substr(t.length-3))}function I(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[g];if(e&&e.key===t)return e;if(s(t)){e={key:t};try{return a(t,g,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch(t){return}}}function v(t){return t.prototype=null,Object.freeze(t)}function m(){d||"undefined"==typeof console||(d=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],718:[function(t,e,r){var n=t("./hidden-store.js");e.exports=function(){var t={};return function(e){if(("object"!=typeof e||null===e)&&"function"!=typeof e)throw new Error("Weakmap-shim: Key must be object");var r=e.valueOf(t);return r&&r.identity===t?r:n(e,t)}}},{"./hidden-store.js":719}],719:[function(t,e,r){e.exports=function(t,e){var r={identity:e},n=t.valueOf;return Object.defineProperty(t,"valueOf",{value:function(t){return t!==e?n.apply(this,arguments):r},writable:!0}),r}},{}],720:[function(t,e,r){var n=t("./create-store.js");e.exports=function(){var t=n();return{get:function(e,r){var n=t(e);return n.hasOwnProperty("value")?n.value:r},set:function(e,r){return t(e).value=r,this},has:function(e){return"value"in t(e)},delete:function(e){return delete t(e).value}}}},{"./create-store.js":718}],721:[function(t,e,r){var n=t("get-canvas-context");e.exports=function(t){return n("webgl",t)}},{"get-canvas-context":152}],722:[function(t,e,r){e.exports=t("cwise-compiler")({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"})},{"cwise-compiler":68}],723:[function(t,e,r){"use strict";e.exports=function(t,e){var r=[];return e=+e||0,n(t.hi(t.shape[0]-1),r,e),r};var n=t("./lib/zc-core")},{"./lib/zc-core":722}],724:[function(t,e,r){var n=t("plotly.js/lib/core");n.register([t("plotly.js/lib/bar"),t("plotly.js/lib/heatmap"),t("plotly.js/lib/parcoords"),t("plotly.js/lib/scatter"),t("plotly.js/lib/scatter3d"),t("plotly.js/lib/splom")]),e.exports=n},{"plotly.js/lib/bar":281,"plotly.js/lib/core":282,"plotly.js/lib/heatmap":283,"plotly.js/lib/parcoords":284,"plotly.js/lib/scatter":285,"plotly.js/lib/scatter3d":286,"plotly.js/lib/splom":287}],725:[function(t,e,r){const n=t("file-saver"),i=t("./plotly-custom.js"),o=t("./vn.js");function a(t,e){return t.map(t=>t[e])}console.log(o),e.exports=class{constructor(){this.outputs=document.getElementById("outputs"),this.divPlot=document.createElement("div"),this.divPlot.style.width="100%",this.divPlot.style.maxWidth="600px",this.outputs.appendChild(this.divPlot),this.divImp=document.createElement("div"),this.divImp.style.width="100%",this.divImp.style.maxWidth="600px",this.divImp.style.marginTop="30px",this.outputs.appendChild(this.divImp),this.divPair=document.createElement("div"),this.divPair.style.width="100%",this.divPair.style.maxWidth="600px",this.divPair.style.marginTop="30px",this.outputs.appendChild(this.divPair),this.divCoord=document.createElement("div"),this.divCoord.style.width="100%",this.divCoord.style.maxWidth="600px",this.divCoord.style.marginTop="30px",this.outputs.appendChild(this.divCoord),this.divCorr=document.createElement("div"),this.divCorr.style.width="100%",this.divCorr.style.maxWidth="600px",this.divCorr.style.marginTop="30px",this.outputs.appendChild(this.divCorr),this.divMap=document.createElement("div"),this.divMap.style.width="100%",this.divMap.style.maxWidth="600px",this.divMap.style.marginTop="30px",this.outputs.appendChild(this.divMap),this.divNet=document.createElement("div"),this.divNet.style.width="100%",this.divNet.style.maxWidth="600px",this.divNet.style.marginTop="30px",this.outputs.appendChild(this.divNet)}render(t){console.log("[Render] Starting...");const{Y:e,X:r,params:s,nDims:l,featuresFiltered:g,recordsFiltered:c,target:u,g:h,colorscale:d,impMatrix:A,corr:f,imp:C}=t;[this.divPlot,this.divImp,this.divPair,this.divCoord,this.divCorr,this.divMap,this.divNet].forEach(t=>{t.innerHTML=""});const p=r.map((t,e)=>{let r=h&&h.length?"→ <b>"+h[e]+"</b>":"";return g.length<7&&t.map((t,e)=>{r+="<br><b>"+g[e]+"</b>: "+t.toFixed(3)}),r});if(e)if(2===l){const t=[{x:a(e,0),y:a(e,1),mode:"markers",marker:{size:6,opacity:.7,color:u,colorscale:d},text:p,type:"scatter"}],r={title:s.method+"(2D)",hovermode:"closest",height:600,margin:{l:0,r:0,b:0,t:30}};i.newPlot(this.divPlot,t,r,{responsive:!0}),this.divPlot.on("plotly_selected",function(t){if(t&&t.points&&Array.isArray(t.points)){const e=t.points.map(t=>t.pointIndex),r=c.filter((t,r)=>e.includes(r)),i=Object.keys(r[0]).filter(t=>t.length),o=r.map(t=>i.map(e=>t[e]));let a=i.join(",")+"\n";o.forEach(t=>{a+=t.join(",")+"\n"});const s=new Blob([a],{type:"text/plain;charset=utf-8"});n.saveAs(s,"selection.csv")}})}else{const t=[{x:a(e,0),y:a(e,1),z:a(e,2),mode:"markers",marker:{size:2,opacity:.7,color:u,colorscale:d},text:h&&h.length?h.map(t=>"<b>"+t+"</b>"):null,type:"scatter3d"}],r={title:s.method+"(3D)",hovermode:"closest",height:600,margin:{l:0,r:0,b:0,t:30}};i.newPlot(this.divPlot,t,r,{responsive:!0})}if(g&&g.length<=5||C){const t=g.map((t,e)=>({imp:C[e]||1,label:t,values:a(r,e)})).sort((t,e)=>t.imp-e.imp).slice(-5).map(t=>({label:t.label,values:t.values})),e=[{type:"parcoords",line:{showscale:!0,color:u,colorscale:d},dimensions:t}],n={title:"Parallel Coordinates"+(t.length<g.length?" (Top "+t.length+" features)":""),height:420,margin:{l:50,r:5,b:5,t:120}};i.newPlot(this.divCoord,e,n);const o=()=>({showline:!1,zeroline:!1,ticklen:4}),s=[{type:"splom",dimensions:t,text:h&&h.length?h.map(t=>"<b>"+t+"</b>"):null,marker:{color:u,colorscale:d,opacity:.7,size:4}}],l={title:"Pair plot"+(t.length<g.length?" (Top "+t.length+" features)":""),hovermode:"closest",height:600,margin:{l:50,r:0,b:50,t:30},xaxis:o(),yaxis:o(),xaxis2:o(),xaxis3:o(),xaxis4:o(),yaxis2:o(),yaxis3:o(),yaxis4:o()};i.newPlot(this.divPair,s,l,{responsive:!0})}else this.divPair.innerHTML="";const I=[[0,"#2f2fb7"],[.5,"#dddddd"],[1,"#d90368"]];if(A){console.log("[Vis] Rendering imp matrix:",A);const t=[{z:A,x:g,y:g,type:"heatmap",colorscale:I,hoverongaps:!1}],e={title:"Cross-variable importance",height:600,margin:{l:50,r:0,b:100,t:30},xaxis:{ticks:"",tickangle:-45,side:"bottom"},yaxis:{ticks:"",autorange:"reversed"}};i.newPlot(this.divMap,t,e);const r=Math.max(...[].concat(...A)),n=Array(A.length).fill(0);A.forEach((t,e)=>{t.forEach((t,e)=>{n[e]+=t/(r>0?r:1)})}),console.log("MI",n);const a=new o.DataSet(g.map((t,e)=>({id:e,label:t,value:10*n[e],group:n[e]/(r>0?r:1)>.2?"active":"passive"}))),s=[];A.forEach((t,e)=>{t.forEach((t,n)=>{const i=t/(r>0?r:1);t>.2*r&&s.push({from:n,to:e,value:i,color:{color:"#7F92CF",opacity:i}})})}),console.log(s);var v={nodes:a,edges:new o.DataSet(s)};this.divNet.style.width="600px",this.divNet.style.height="600px";const l=new o.Network(this.divNet,v,{nodes:{shape:"dot",scaling:{customScalingFunction:function(t,e,r,n){return n/r},min:3,max:25}},groups:{active:{shape:"dot",color:"#3030B7"},passive:{shape:"dot",color:"#5E78CB"}}});console.log("[Vis] Network created:",typeof l)}if(f){let t=[{z:f,x:g,y:g,type:"heatmap",colorscale:I,hoverongaps:!1}],e={title:"Correlation (All variables)",height:600,margin:{l:50,r:0,b:100,t:30},xaxis:{ticks:"",tickangle:-45,side:"bottom"},yaxis:{ticks:"",autorange:"reversed"}};i.newPlot(this.divCorr,t,e)}if(C){const t=Math.max.apply(null,C),e=C.map((e,r)=>({imp:e/(t||1),name:g[r]})).sort((t,e)=>t.imp-e.imp),r=e.map((t,r)=>r<e.length-5?"#BBB":"#3030B7"),n=[{x:e.map(t=>t.name),y:e.map(t=>t.imp),type:"bar",marker:{color:r,opacity:.8}}],o={title:"Feature Importance (RF)",showlegend:!1,height:400,margin:{l:50,r:0,b:80,t:30},xaxis:{tickangle:-45},yaxis:{zeroline:!1,gridwidth:1},bargap:.05};i.newPlot(this.divImp,n,o)}}}},{"./plotly-custom.js":724,"./vn.js":726,"file-saver":146}],726:[function(t,e,r){(function(t){var n;n=this,function(e){var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function n(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}var i=function(t){return t&&t.Math==Math&&t},o=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof r&&r)||function(){return this}()||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},s=!a(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),l={}.propertyIsEnumerable,g=Object.getOwnPropertyDescriptor,c={f:g&&!l.call({1:2},1)?function(t){var e=g(this,t);return!!e&&e.enumerable}:l},u=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},h={}.toString,d=function(t){return h.call(t).slice(8,-1)},A="".split,f=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==d(t)?A.call(t,""):Object(t)}:Object,C=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},p=function(t){return f(C(t))},I=function(t){return"object"==typeof t?null!==t:"function"==typeof t},v=function(t,e){if(!I(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!I(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!I(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!I(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},m={}.hasOwnProperty,y=function(t,e){return m.call(t,e)},b=o.document,x=I(b)&&I(b.createElement),_=function(t){return x?b.createElement(t):{}},w=!s&&!a(function(){return 7!=Object.defineProperty(_("div"),"a",{get:function(){return 7}}).a}),k=Object.getOwnPropertyDescriptor,T={f:s?k:function(t,e){if(t=p(t),e=v(e,!0),w)try{return k(t,e)}catch(t){}if(y(t,e))return u(!c.f.call(t,e),t[e])}},M=/#|\.prototype\./,E=function(t,e){var r=S[O(t)];return r==D||r!=R&&("function"==typeof e?a(e):!!e)},O=E.normalize=function(t){return String(t).replace(M,".").toLowerCase()},S=E.data={},R=E.NATIVE="N",D=E.POLYFILL="P",L=E,P={},N=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},z=function(t,e,r){if(N(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}},F=function(t){if(!I(t))throw TypeError(String(t)+" is not an object");return t},B=Object.defineProperty,j={f:s?B:function(t,e,r){if(F(t),e=v(e,!0),F(r),w)try{return B(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},V=s?function(t,e,r){return j.f(t,e,u(1,r))}:function(t,e,r){return t[e]=r,t},G=T.f,U=function(t){var e=function(e,r,n){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,r)}return new t(e,r,n)}return t.apply(this,arguments)};return e.prototype=t.prototype,e},Z=function(t,e){var r,n,i,a,s,l,g,c,u=t.target,h=t.global,d=t.stat,A=t.proto,f=h?o:d?o[u]:(o[u]||{}).prototype,C=h?P:P[u]||(P[u]={}),p=C.prototype;for(i in e)r=!L(h?i:u+(d?".":"#")+i,t.forced)&&f&&y(f,i),s=C[i],r&&(l=t.noTargetGet?(c=G(f,i))&&c.value:f[i]),a=r&&l?l:e[i],r&&typeof s==typeof a||(g=t.bind&&r?z(a,o):t.wrap&&r?U(a):A&&"function"==typeof a?z(Function.call,a):a,(t.sham||a&&a.sham||s&&s.sham)&&V(g,"sham",!0),C[i]=g,A&&(y(P,n=u+"Prototype")||V(P,n,{}),P[n][i]=a,t.real&&p&&!p[i]&&V(p,i,a)))},H=[].slice,W={},Y=Function.bind||function(t){var e=N(this),r=H.call(arguments,1),n=function(){var i=r.concat(H.call(arguments));return this instanceof n?function(t,e,r){if(!(e in W)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";W[e]=Function("C,a","return new C("+n.join(",")+")")}return W[e](t,r)}(e,i.length,i):e.apply(t,i)};return I(e.prototype)&&(n.prototype=e.prototype),n};Z({target:"Function",proto:!0},{bind:Y});var X=function(t){return P[t+"Prototype"]},q=X("Function").bind,Q=Function.prototype,K=function(t){var e=t.bind;return t===Q||t instanceof Function&&e===Q.bind?q:e},J=Math.ceil,$=Math.floor,tt=function(t){return isNaN(t=+t)?0:(t>0?$:J)(t)},et=Math.min,rt=function(t){return t>0?et(tt(t),9007199254740991):0},nt=Math.max,it=Math.min,ot=function(t,e){var r=tt(t);return r<0?nt(r+e,0):it(r,e)},at=function(t){return function(e,r,n){var i,o=p(e),a=rt(o.length),s=ot(n,a);if(t&&r!=r){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===r)return t||s||0;return!t&&-1}},st={includes:at(!0),indexOf:at(!1)},lt={},gt=st.indexOf,ct=function(t,e){var r,n=p(t),i=0,o=[];for(r in n)!y(lt,r)&&y(n,r)&&o.push(r);for(;e.length>i;)y(n,r=e[i++])&&(~gt(o,r)||o.push(r));return o},ut=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ht=Object.keys||function(t){return ct(t,ut)},dt={f:Object.getOwnPropertySymbols},At=function(t){return Object(C(t))},ft=Object.assign,Ct=Object.defineProperty,pt=!ft||a(function(){if(s&&1!==ft({b:1},ft(Ct({},"a",{enumerable:!0,get:function(){Ct(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=ft({},t)[r]||ht(ft({},e)).join("")!=n})?function(t,e){for(var r=At(t),n=arguments.length,i=1,o=dt.f,a=c.f;n>i;)for(var l,g=f(arguments[i++]),u=o?ht(g).concat(o(g)):ht(g),h=u.length,d=0;h>d;)l=u[d++],s&&!a.call(g,l)||(r[l]=g[l]);return r}:ft;Z({target:"Object",stat:!0,forced:Object.assign!==pt},{assign:pt});var It=P.Object.assign;function vt(t,e,r,n){t.beginPath(),t.arc(e,r,n,0,2*Math.PI,!1),t.closePath()}function mt(t,e,r,n,i,o){var a=Math.PI/180;n-2*o<0&&(o=n/2),i-2*o<0&&(o=i/2),t.beginPath(),t.moveTo(e+o,r),t.lineTo(e+n-o,r),t.arc(e+n-o,r+o,o,270*a,360*a,!1),t.lineTo(e+n,r+i-o),t.arc(e+n-o,r+i-o,o,0,90*a,!1),t.lineTo(e+o,r+i),t.arc(e+o,r+i-o,o,90*a,180*a,!1),t.lineTo(e,r+o),t.arc(e+o,r+o,o,180*a,270*a,!1),t.closePath()}function yt(t,e,r,n,i){var o=.5522848,a=n/2*o,s=i/2*o,l=e+n,g=r+i,c=e+n/2,u=r+i/2;t.beginPath(),t.moveTo(e,u),t.bezierCurveTo(e,u-s,c-a,r,c,r),t.bezierCurveTo(c+a,r,l,u-s,l,u),t.bezierCurveTo(l,u+s,c+a,g,c,g),t.bezierCurveTo(c-a,g,e,u+s,e,u),t.closePath()}function bt(t,e,r,n,i){var o=i*(1/3),a=.5522848,s=n/2*a,l=o/2*a,g=e+n,c=r+o,u=e+n/2,h=r+o/2,d=r+(i-o/2),A=r+i;t.beginPath(),t.moveTo(g,h),t.bezierCurveTo(g,h+l,u+s,c,u,c),t.bezierCurveTo(u-s,c,e,h+l,e,h),t.bezierCurveTo(e,h-l,u-s,r,u,r),t.bezierCurveTo(u+s,r,g,h-l,g,h),t.lineTo(g,d),t.bezierCurveTo(g,d+l,u+s,A,u,A),t.bezierCurveTo(u-s,A,e,d+l,e,d),t.lineTo(e,h)}function xt(t,e,r,n,i,o){t.beginPath(),t.moveTo(e,r);for(var a=o.length,s=n-e,l=i-r,g=l/s,c=Math.sqrt(s*s+l*l),u=0,h=!0,d=0,A=+o[0];c>=.1;)(A=+o[u++%a])>c&&(A=c),d=Math.sqrt(A*A/(1+g*g)),e+=d=s<0?-d:d,r+=g*d,!0===h?t.lineTo(e,r):t.moveTo(e,r),c-=A,h=!h}var _t={circle:vt,dashedLine:xt,database:bt,diamond:function(t,e,r,n){t.beginPath(),t.lineTo(e,r+n),t.lineTo(e+n,r),t.lineTo(e,r-n),t.lineTo(e-n,r),t.closePath()},ellipse:yt,ellipse_vis:yt,hexagon:function(t,e,r,n){t.beginPath();var i=2*Math.PI/6;t.moveTo(e+n,r);for(var o=1;o<6;o++)t.lineTo(e+n*Math.cos(i*o),r+n*Math.sin(i*o));t.closePath()},roundRect:mt,square:function(t,e,r,n){t.beginPath(),t.rect(e-n,r-n,2*n,2*n),t.closePath()},star:function(t,e,r,n){t.beginPath(),r+=.1*(n*=.82);for(var i=0;i<10;i++){var o=i%2==0?1.3*n:.5*n;t.lineTo(e+o*Math.sin(2*i*Math.PI/10),r-o*Math.cos(2*i*Math.PI/10))}t.closePath()},triangle:function(t,e,r,n){t.beginPath(),r+=.275*(n*=1.15);var i=2*n,o=i/2,a=Math.sqrt(3)/6*i,s=Math.sqrt(i*i-o*o);t.moveTo(e,r-(s-a)),t.lineTo(e+o,r+a),t.lineTo(e-o,r+a),t.lineTo(e,r-(s-a)),t.closePath()},triangleDown:function(t,e,r,n){t.beginPath(),r-=.275*(n*=1.15);var i=2*n,o=i/2,a=Math.sqrt(3)/6*i,s=Math.sqrt(i*i-o*o);t.moveTo(e,r+(s-a)),t.lineTo(e+o,r-a),t.lineTo(e-o,r-a),t.lineTo(e,r+(s-a)),t.closePath()}},wt=n(function(t){function e(t){if(t)return function(t){for(var r in e.prototype)t[r]=e.prototype[r];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<n.length;i++)if((r=n[i])===e||r.fn===e){n.splice(i,1);break}return 0===n.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(r){n=0;for(var i=(r=r.slice(0)).length;n<i;++n)r[n].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}});Z({target:"Object",stat:!0,forced:!s,sham:!s},{defineProperty:j.f});var kt=n(function(t){var e=P.Object,r=t.exports=function(t,r,n){return e.defineProperty(t,r,n)};e.defineProperty.sham&&(r.sham=!0)}),Tt=kt,Mt=s?Object.defineProperties:function(t,e){F(t);for(var r,n=ht(e),i=n.length,o=0;i>o;)j.f(t,r=n[o++],e[r]);return t};Z({target:"Object",stat:!0,forced:!s,sham:!s},{defineProperties:Mt});var Et=n(function(t){var e=P.Object,r=t.exports=function(t,r){return e.defineProperties(t,r)};e.defineProperties.sham&&(r.sham=!0)}),Ot=function(t){return"function"==typeof t?t:void 0},St=function(t,e){return arguments.length<2?Ot(P[t])||Ot(o[t]):P[t]&&P[t][e]||o[t]&&o[t][e]},Rt=ut.concat("length","prototype"),Dt={f:Object.getOwnPropertyNames||function(t){return ct(t,Rt)}},Lt=St("Reflect","ownKeys")||function(t){var e=Dt.f(F(t)),r=dt.f;return r?e.concat(r(t)):e},Pt=function(t,e,r){var n=v(e);n in t?j.f(t,n,u(0,r)):t[n]=r};Z({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(t){for(var e,r,n=p(t),i=T.f,o=Lt(n),a={},s=0;o.length>s;)void 0!==(r=i(n,e=o[s++]))&&Pt(a,e,r);return a}});var Nt=P.Object.getOwnPropertyDescriptors,zt=T.f,Ft=a(function(){zt(1)});Z({target:"Object",stat:!0,forced:!s||Ft,sham:!s},{getOwnPropertyDescriptor:function(t,e){return zt(p(t),e)}});var Bt,jt=n(function(t){var e=P.Object,r=t.exports=function(t,r){return e.getOwnPropertyDescriptor(t,r)};e.getOwnPropertyDescriptor.sham&&(r.sham=!0)}),Vt=jt,Gt=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())}),Ut=Gt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Zt=Array.isArray||function(t){return"Array"==d(t)},Ht=St("document","documentElement"),Wt="__core-js_shared__",Yt=o[Wt]||function(t,e){try{V(o,t,e)}catch(r){o[t]=e}return e}(Wt,{}),Xt=n(function(t){(t.exports=function(t,e){return Yt[t]||(Yt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.7.0",mode:"pure",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})}),qt=0,Qt=Math.random(),Kt=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++qt+Qt).toString(36)},Jt=Xt("keys"),$t=function(t){return Jt[t]||(Jt[t]=Kt(t))},te=$t("IE_PROTO"),ee=function(){},re=function(t){return"<script>"+t+"<\/script>"},ne=function(){try{Bt=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;ne=Bt?function(t){t.write(re("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Bt):((e=_("iframe")).style.display="none",Ht.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(re("document.F=Object")),t.close(),t.F);for(var r=ut.length;r--;)delete ne.prototype[ut[r]];return ne()};lt[te]=!0;var ie=Object.create||function(t,e){var r;return null!==t?(ee.prototype=F(t),r=new ee,ee.prototype=null,r[te]=t):r=ne(),void 0===e?r:Mt(r,e)},oe=Dt.f,ae={}.toString,se="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],le={f:function(t){return se&&"[object Window]"==ae.call(t)?function(t){try{return oe(t)}catch(t){return se.slice()}}(t):oe(p(t))}},ge=function(t,e,r,n){n&&n.enumerable?t[e]=r:V(t,e,r)},ce=Xt("wks"),ue=o.Symbol,he=Ut?ue:ue&&ue.withoutSetter||Kt,de=function(t){return y(ce,t)||(Gt&&y(ue,t)?ce[t]=ue[t]:ce[t]=he("Symbol."+t)),ce[t]},Ae={f:de},fe=j.f,Ce=function(t){var e=P.Symbol||(P.Symbol={});y(e,t)||fe(e,t,{value:Ae.f(t)})},pe={};pe[de("toStringTag")]="z";var Ie="[object z]"===String(pe),ve=de("toStringTag"),me="Arguments"==d(function(){return arguments}()),ye=Ie?d:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),ve))?r:me?d(e):"Object"==(n=d(e))&&"function"==typeof e.callee?"Arguments":n},be=Ie?{}.toString:function(){return"[object "+ye(this)+"]"},xe=j.f,_e=de("toStringTag"),we=function(t,e,r,n){if(t){var i=r?t:t.prototype;y(i,_e)||xe(i,_e,{configurable:!0,value:e}),n&&!Ie&&V(i,"toString",be)}},ke=Function.toString;"function"!=typeof Yt.inspectSource&&(Yt.inspectSource=function(t){return ke.call(t)});var Te,Me,Ee,Oe=Yt.inspectSource,Se=o.WeakMap,Re="function"==typeof Se&&/native code/.test(Oe(Se)),De=o.WeakMap;if(Re){var Le=Yt.state||(Yt.state=new De),Pe=Le.get,Ne=Le.has,ze=Le.set;Te=function(t,e){return e.facade=t,ze.call(Le,t,e),e},Me=function(t){return Pe.call(Le,t)||{}},Ee=function(t){return Ne.call(Le,t)}}else{var Fe=$t("state");lt[Fe]=!0,Te=function(t,e){return e.facade=t,V(t,Fe,e),e},Me=function(t){return y(t,Fe)?t[Fe]:{}},Ee=function(t){return y(t,Fe)}}var Be={set:Te,get:Me,has:Ee,enforce:function(t){return Ee(t)?Me(t):Te(t,{})},getterFor:function(t){return function(e){var r;if(!I(e)||(r=Me(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}},je=de("species"),Ve=function(t,e){var r;return Zt(t)&&("function"!=typeof(r=t.constructor)||r!==Array&&!Zt(r.prototype)?I(r)&&null===(r=r[je])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)},Ge=[].push,Ue=function(t){var e=1==t,r=2==t,n=3==t,i=4==t,o=6==t,a=5==t||o;return function(s,l,g,c){for(var u,h,d=At(s),A=f(d),C=z(l,g,3),p=rt(A.length),I=0,v=c||Ve,m=e?v(s,p):r?v(s,0):void 0;p>I;I++)if((a||I in A)&&(h=C(u=A[I],I,d),t))if(e)m[I]=h;else if(h)switch(t){case 3:return!0;case 5:return u;case 6:return I;case 2:Ge.call(m,u)}else if(i)return!1;return o?-1:n||i?i:m}},Ze={forEach:Ue(0),map:Ue(1),filter:Ue(2),some:Ue(3),every:Ue(4),find:Ue(5),findIndex:Ue(6)},He=Ze.forEach,We=$t("hidden"),Ye="Symbol",Xe=de("toPrimitive"),qe=Be.set,Qe=Be.getterFor(Ye),Ke=Object.prototype,Je=o.Symbol,$e=St("JSON","stringify"),tr=T.f,er=j.f,rr=le.f,nr=c.f,ir=Xt("symbols"),or=Xt("op-symbols"),ar=Xt("string-to-symbol-registry"),sr=Xt("symbol-to-string-registry"),lr=Xt("wks"),gr=o.QObject,cr=!gr||!gr.prototype||!gr.prototype.findChild,ur=s&&a(function(){return 7!=ie(er({},"a",{get:function(){return er(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=tr(Ke,e);n&&delete Ke[e],er(t,e,r),n&&t!==Ke&&er(Ke,e,n)}:er,hr=function(t,e){var r=ir[t]=ie(Je.prototype);return qe(r,{type:Ye,tag:t,description:e}),s||(r.description=e),r},dr=Ut?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Je},Ar=function(t,e,r){t===Ke&&Ar(or,e,r),F(t);var n=v(e,!0);return F(r),y(ir,n)?(r.enumerable?(y(t,We)&&t[We][n]&&(t[We][n]=!1),r=ie(r,{enumerable:u(0,!1)})):(y(t,We)||er(t,We,u(1,{})),t[We][n]=!0),ur(t,n,r)):er(t,n,r)},fr=function(t,e){F(t);var r=p(e),n=ht(r).concat(vr(r));return He(n,function(e){s&&!Cr.call(r,e)||Ar(t,e,r[e])}),t},Cr=function(t){var e=v(t,!0),r=nr.call(this,e);return!(this===Ke&&y(ir,e)&&!y(or,e))&&(!(r||!y(this,e)||!y(ir,e)||y(this,We)&&this[We][e])||r)},pr=function(t,e){var r=p(t),n=v(e,!0);if(r!==Ke||!y(ir,n)||y(or,n)){var i=tr(r,n);return!i||!y(ir,n)||y(r,We)&&r[We][n]||(i.enumerable=!0),i}},Ir=function(t){var e=rr(p(t)),r=[];return He(e,function(t){y(ir,t)||y(lt,t)||r.push(t)}),r},vr=function(t){var e=t===Ke,r=rr(e?or:p(t)),n=[];return He(r,function(t){!y(ir,t)||e&&!y(Ke,t)||n.push(ir[t])}),n};if(Gt||(ge((Je=function(){if(this instanceof Je)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=Kt(t),r=function(t){this===Ke&&r.call(or,t),y(this,We)&&y(this[We],e)&&(this[We][e]=!1),ur(this,e,u(1,t))};return s&&cr&&ur(Ke,e,{configurable:!0,set:r}),hr(e,t)}).prototype,"toString",function(){return Qe(this).tag}),ge(Je,"withoutSetter",function(t){return hr(Kt(t),t)}),c.f=Cr,j.f=Ar,T.f=pr,Dt.f=le.f=Ir,dt.f=vr,Ae.f=function(t){return hr(de(t),t)},s&&er(Je.prototype,"description",{configurable:!0,get:function(){return Qe(this).description}})),Z({global:!0,wrap:!0,forced:!Gt,sham:!Gt},{Symbol:Je}),He(ht(lr),function(t){Ce(t)}),Z({target:Ye,stat:!0,forced:!Gt},{for:function(t){var e=String(t);if(y(ar,e))return ar[e];var r=Je(e);return ar[e]=r,sr[r]=e,r},keyFor:function(t){if(!dr(t))throw TypeError(t+" is not a symbol");if(y(sr,t))return sr[t]},useSetter:function(){cr=!0},useSimple:function(){cr=!1}}),Z({target:"Object",stat:!0,forced:!Gt,sham:!s},{create:function(t,e){return void 0===e?ie(t):fr(ie(t),e)},defineProperty:Ar,defineProperties:fr,getOwnPropertyDescriptor:pr}),Z({target:"Object",stat:!0,forced:!Gt},{getOwnPropertyNames:Ir,getOwnPropertySymbols:vr}),Z({target:"Object",stat:!0,forced:a(function(){dt.f(1)})},{getOwnPropertySymbols:function(t){return dt.f(At(t))}}),$e){var mr=!Gt||a(function(){var t=Je();return"[null]"!=$e([t])||"{}"!=$e({a:t})||"{}"!=$e(Object(t))});Z({target:"JSON",stat:!0,forced:mr},{stringify:function(t,e,r){for(var n,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(n=e,(I(e)||void 0!==t)&&!dr(t))return Zt(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!dr(e))return e}),i[1]=e,$e.apply(null,i)}})}Je.prototype[Xe]||V(Je.prototype,Xe,Je.prototype.valueOf),we(Je,Ye),lt[We]=!0;var yr,br,xr,_r=P.Object.getOwnPropertySymbols,wr={},kr=!a(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Tr=$t("IE_PROTO"),Mr=Object.prototype,Er=kr?Object.getPrototypeOf:function(t){return t=At(t),y(t,Tr)?t[Tr]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Mr:null},Or=(de("iterator"),!1);[].keys&&("next"in(xr=[].keys())?(br=Er(Er(xr)))!==Object.prototype&&(yr=br):Or=!0),null==yr&&(yr={});var Sr={IteratorPrototype:yr,BUGGY_SAFARI_ITERATORS:Or},Rr=Sr.IteratorPrototype,Dr=function(){return this},Lr=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return F(r),function(t){if(!I(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(n),e?t.call(r,n):r.__proto__=n,r}}():void 0),Pr=Sr.IteratorPrototype,Nr=Sr.BUGGY_SAFARI_ITERATORS,zr=de("iterator"),Fr="values",Br="entries",jr=function(){return this},Vr=function(t,e,r,n,i,o,a){!function(t,e,r){var n=e+" Iterator";t.prototype=ie(Rr,{next:u(1,r)}),we(t,n,!1,!0),wr[n]=Dr}(r,e,n);var s,l,g,c=function(t){if(t===i&&C)return C;if(!Nr&&t in A)return A[t];switch(t){case"keys":case Fr:case Br:return function(){return new r(this,t)}}return function(){return new r(this)}},h=e+" Iterator",d=!1,A=t.prototype,f=A[zr]||A["@@iterator"]||i&&A[i],C=!Nr&&f||c(i),p="Array"==e&&A.entries||f;if(p&&(s=Er(p.call(new t)),Pr!==Object.prototype&&s.next&&(we(s,h,!0,!0),wr[h]=jr)),i==Fr&&f&&f.name!==Fr&&(d=!0,C=function(){return f.call(this)}),a&&A[zr]!==C&&V(A,zr,C),wr[e]=C,i)if(l={values:c(Fr),keys:o?C:c("keys"),entries:c(Br)},a)for(g in l)(Nr||d||!(g in A))&&ge(A,g,l[g]);else Z({target:e,proto:!0,forced:Nr||d},l);return l},Gr="Array Iterator",Ur=Be.set,Zr=Be.getterFor(Gr);Vr(Array,"Array",function(t,e){Ur(this,{type:Gr,target:p(t),index:0,kind:e})},function(){var t=Zr(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}},"values"),wr.Arguments=wr.Array;var Hr=de("toStringTag");for(var Wr in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Yr=o[Wr],Xr=Yr&&Yr.prototype;Xr&&ye(Xr)!==Hr&&V(Xr,Hr,Wr),wr[Wr]=wr.Array}var qr=function(t){return function(e,r){var n,i,o=String(C(e)),a=tt(r),s=o.length;return a<0||a>=s?t?"":void 0:(n=o.charCodeAt(a))<55296||n>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):n:t?o.slice(a,a+2):i-56320+(n-55296<<10)+65536}},Qr=(qr(!1),qr(!0)),Kr="String Iterator",Jr=Be.set,$r=Be.getterFor(Kr);Vr(String,"String",function(t){Jr(this,{type:Kr,string:String(t),index:0})},function(){var t,e=$r(this),r=e.string,n=e.index;return n>=r.length?{value:void 0,done:!0}:(t=Qr(r,n),e.index+=t.length,{value:t,done:!1})});var tn=de("iterator"),en=function(t){if(null!=t)return t[tn]||t["@@iterator"]||wr[ye(t)]},rn=function(t){var e=en(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return F(e.call(t))},nn=en,on=function(t){var e=t.return;if(void 0!==e)return F(e.call(t)).value},an=function(t,e,r,n){try{return n?e(F(r)[0],r[1]):e(r)}catch(e){throw on(t),e}},sn=de("iterator"),ln=Array.prototype,gn=function(t){return void 0!==t&&(wr.Array===t||ln[sn]===t)},cn=de("iterator"),un=!1;try{var hn=0,dn={next:function(){return{done:!!hn++}},return:function(){un=!0}};dn[cn]=function(){return this},Array.from(dn,function(){throw 2})}catch(e){}var An=!function(t,e){if(!un)return!1;var r=!1;try{var n={};n[cn]=function(){return{next:function(){return{done:r=!0}}}},function(t){Array.from(t)}(n)}catch(t){}return r}();Z({target:"Array",stat:!0,forced:An},{from:function(t){var e,r,n,i,o,a,s=At(t),l="function"==typeof this?this:Array,g=arguments.length,c=g>1?arguments[1]:void 0,u=void 0!==c,h=en(s),d=0;if(u&&(c=z(c,g>2?arguments[2]:void 0,2)),null==h||l==Array&&gn(h))for(r=new l(e=rt(s.length));e>d;d++)a=u?c(s[d],d):s[d],Pt(r,d,a);else for(o=(i=h.call(s)).next,r=new l;!(n=o.call(i)).done;d++)a=u?an(i,c,[n.value,d],!0):n.value,Pt(r,d,a);return r.length=d,r}});var fn=P.Array.from,Cn=fn;Z({target:"Object",stat:!0,sham:!s},{create:ie});var pn,In=P.Object,vn=function(t,e){return In.create(t,e)},mn=vn,yn=kt,bn=function(t,e,r){return e in t?yn(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},xn="\t\n\v\f\r                　\u2028\u2029\ufeff",_n="["+xn+"]",wn=RegExp("^"+_n+_n+"*"),kn=RegExp(_n+_n+"*$"),Tn=function(t){return function(e){var r=String(C(e));return 1&t&&(r=r.replace(wn,"")),2&t&&(r=r.replace(kn,"")),r}},Mn={start:Tn(1),end:Tn(2),trim:Tn(3)},En=Mn.trim;Z({target:"String",proto:!0,forced:(pn="trim",a(function(){return!!xn[pn]()||"​᠎"!="​᠎"[pn]()||xn[pn].name!==pn}))},{trim:function(){return En(this)}}),X("String").trim;var On=function(t,e){var r=[][t];return!!r&&a(function(){r.call(null,e||function(){throw 1},1)})},Sn=Object.defineProperty,Rn={},Dn=function(t){throw t},Ln=function(t,e){if(y(Rn,t))return Rn[t];e||(e={});var r=[][t],n=!!y(e,"ACCESSORS")&&e.ACCESSORS,i=y(e,0)?e[0]:Dn,o=y(e,1)?e[1]:void 0;return Rn[t]=!!r&&!a(function(){if(n&&!s)return!0;var t={length:-1};n?Sn(t,1,{enumerable:!0,get:Dn}):t[1]=1,r.call(t,i,o)})},Pn=Ze.forEach,Nn=On("forEach"),zn=Ln("forEach"),Fn=Nn&&zn?[].forEach:function(t){return Pn(this,t,arguments.length>1?arguments[1]:void 0)};Z({target:"Array",proto:!0,forced:[].forEach!=Fn},{forEach:Fn});var Bn=X("Array").forEach,jn=Array.prototype,Vn={DOMTokenList:!0,NodeList:!0},Gn=function(t){var e=t.forEach;return t===jn||t instanceof Array&&e===jn.forEach||Vn.hasOwnProperty(ye(t))?Bn:e},Un=Mn.trim,Zn=o.parseInt,Hn=/^[+-]?0[Xx]/,Wn=8!==Zn(xn+"08")||22!==Zn(xn+"0x16")?function(t,e){var r=Un(String(t));return Zn(r,e>>>0||(Hn.test(r)?16:10))}:Zn;Z({global:!0,forced:parseInt!=Wn},{parseInt:Wn});var Yn=P.parseInt,Xn=c.f,qn=function(t){return function(e){for(var r,n=p(e),i=ht(n),o=i.length,a=0,l=[];o>a;)r=i[a++],s&&!Xn.call(n,r)||l.push(t?[r,n[r]]:n[r]);return l}},Qn=(qn(!0),qn(!1));Z({target:"Object",stat:!0},{values:function(t){return Qn(t)}}),P.Object.values;var Kn,Jn,$n=St("navigator","userAgent")||"",ti=o.process,ei=ti&&ti.versions,ri=ei&&ei.v8;ri?Jn=(Kn=ri.split("."))[0]+Kn[1]:$n&&(!(Kn=$n.match(/Edge\/(\d+)/))||Kn[1]>=74)&&(Kn=$n.match(/Chrome\/(\d+)/))&&(Jn=Kn[1]);var ni=Jn&&+Jn,ii=de("species"),oi=function(t){return ni>=51||!a(function(){var e=[];return(e.constructor={})[ii]=function(){return{foo:1}},1!==e[t](Boolean).foo})},ai=Ze.filter,si=oi("filter"),li=Ln("filter");Z({target:"Array",proto:!0,forced:!si||!li},{filter:function(t){return ai(this,t,arguments.length>1?arguments[1]:void 0)}});var gi=X("Array").filter,ci=Array.prototype,ui=function(t){var e=t.filter;return t===ci||t instanceof Array&&e===ci.filter?gi:e},hi=a(function(){Er(1)});Z({target:"Object",stat:!0,forced:hi,sham:!kr},{getPrototypeOf:function(t){return Er(At(t))}});var di=P.Object.getPrototypeOf,Ai=di,fi=st.indexOf,Ci=[].indexOf,pi=!!Ci&&1/[1].indexOf(1,-0)<0,Ii=On("indexOf"),vi=Ln("indexOf",{ACCESSORS:!0,1:0});Z({target:"Array",proto:!0,forced:pi||!Ii||!vi},{indexOf:function(t){return pi?Ci.apply(this,arguments)||0:fi(this,t,arguments.length>1?arguments[1]:void 0)}});var mi=X("Array").indexOf,yi=Array.prototype,bi=function(t){var e=t.indexOf;return t===yi||t instanceof Array&&e===yi.indexOf?mi:e};Z({target:"Array",stat:!0},{isArray:Zt});var xi=P.Array.isArray,_i=xi,wi=de("iterator"),ki=function(t){var e=Object(t);return void 0!==e[wi]||"@@iterator"in e||wr.hasOwnProperty(ye(e))},Ti=de("isConcatSpreadable"),Mi=9007199254740991,Ei="Maximum allowed index exceeded",Oi=ni>=51||!a(function(){var t=[];return t[Ti]=!1,t.concat()[0]!==t}),Si=oi("concat"),Ri=function(t){if(!I(t))return!1;var e=t[Ti];return void 0!==e?!!e:Zt(t)};Z({target:"Array",proto:!0,forced:!Oi||!Si},{concat:function(t){var e,r,n,i,o,a=At(this),s=Ve(a,0),l=0;for(e=-1,n=arguments.length;e<n;e++)if(Ri(o=-1===e?a:arguments[e])){if(l+(i=rt(o.length))>Mi)throw TypeError(Ei);for(r=0;r<i;r++,l++)r in o&&Pt(s,l,o[r])}else{if(l>=Mi)throw TypeError(Ei);Pt(s,l++,o)}return s.length=l,s}}),Ce("asyncIterator"),Ce("hasInstance"),Ce("isConcatSpreadable"),Ce("iterator"),Ce("match"),Ce("matchAll"),Ce("replace"),Ce("search"),Ce("species"),Ce("split"),Ce("toPrimitive"),Ce("toStringTag"),Ce("unscopables"),we(o.JSON,"JSON",!0);var Di=P.Symbol;Ce("asyncDispose"),Ce("dispose"),Ce("observable"),Ce("patternMatch"),Ce("replaceAll");var Li=Di,Pi=fn,Ni=oi("slice"),zi=Ln("slice",{ACCESSORS:!0,0:0,1:2}),Fi=de("species"),Bi=[].slice,ji=Math.max;Z({target:"Array",proto:!0,forced:!Ni||!zi},{slice:function(t,e){var r,n,i,o=p(this),a=rt(o.length),s=ot(t,a),l=ot(void 0===e?a:e,a);if(Zt(o)&&("function"!=typeof(r=o.constructor)||r!==Array&&!Zt(r.prototype)?I(r)&&null===(r=r[Fi])&&(r=void 0):r=void 0,r===Array||void 0===r))return Bi.call(o,s,l);for(n=new(void 0===r?Array:r)(ji(l-s,0)),i=0;s<l;s++,i++)s in o&&Pt(n,i,o[s]);return n.length=i,n}});var Vi=X("Array").slice,Gi=Array.prototype,Ui=function(t){var e=t.slice;return t===Gi||t instanceof Array&&e===Gi.slice?Vi:e},Zi=Ui,Hi=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n},Wi=function(t,e){var r;if(t){if("string"==typeof t)return Hi(t,e);var n=Zi(r=Object.prototype.toString.call(t)).call(r,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Pi(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hi(t,e):void 0}},Yi=function(t,e){return function(t){if(_i(t))return t}(t)||function(t,e){if(void 0!==Li&&ki(Object(t))){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=rn(t);!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(t,e)||Wi(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()};Z({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var Xi=P.Date.now,qi=a(function(){ht(1)});Z({target:"Object",stat:!0,forced:qi},{keys:function(t){return ht(At(t))}});var Qi=P.Object.keys,Ki=Ze.map,Ji=oi("map"),$i=Ln("map");Z({target:"Array",proto:!0,forced:!Ji||!$i},{map:function(t){return Ki(this,t,arguments.length>1?arguments[1]:void 0)}});var to=X("Array").map,eo=Array.prototype,ro=function(t){var e=t.map;return t===eo||t instanceof Array&&e===eo.map?to:e},no=xi,io=Ae.f("iterator"),oo=io,ao=n(function(t){function e(r){return t.exports=e="function"==typeof Li&&"symbol"==typeof oo?function(t){return typeof t}:function(t){return t&&"function"==typeof Li&&t.constructor===Li&&t!==Li.prototype?"symbol":typeof t},e(r)}t.exports=e});Z({target:"Reflect",stat:!0},{ownKeys:Lt});var so=P.Reflect.ownKeys,lo=Ui,go=function(t){return function(t){if(_i(t))return Hi(t)}(t)||function(t){if(void 0!==Li&&ki(Object(t)))return Pi(t)}(t)||Wi(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()},co=X("Array").concat,uo=Array.prototype,ho=function(t){var e=t.concat;return t===uo||t instanceof Array&&e===uo.concat?co:e},Ao=Di;function fo(t,e){var r;if(void 0===Ao||null==nn(t)){if(no(t)||(r=function(t,e){var r;if(t){if("string"==typeof t)return Co(t,e);var n=lo(r=Object.prototype.toString.call(t)).call(r,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Cn(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Co(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=rn(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Co(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var po=Ao("DELETE");function Io(){var t=vo.apply(void 0,arguments);return function t(e){for(var r=0,n=Qi(e);r<n.length;r++){var i=n[r];e[i]===po?delete e[i]:"object"===ao(e[i])&&null!==e[i]&&t(e[i])}}(t),t}function vo(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e.length<2)return e[0];var n;if(e.length>2)return vo.apply(void 0,ho(n=[Io(e[0],e[1])]).call(n,go(lo(e).call(e,2))));var i,o=e[0],a=e[1],s=fo(so(a));try{for(s.s();!(i=s.n()).done;){var l=i.value;Object.prototype.propertyIsEnumerable.call(a,l)&&(a[l]===po?delete o[l]:null===o[l]||null===a[l]||"object"!==ao(o[l])||"object"!==ao(a[l])||no(o[l])||no(a[l])?o[l]=mo(a[l]):o[l]=vo(o[l],a[l]))}}catch(t){s.e(t)}finally{s.f()}return o}function mo(t){return no(t)?ro(t).call(t,function(t){return mo(t)}):"object"===ao(t)&&null!==t?vo({},t):t}function yo(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){var e=function(){for(var t=function(){var t=4022871197;return function(e){for(var r=e.toString(),n=0;n<r.length;n++){var i=.02519603282416938*(t+=r.charCodeAt(n));i-=t=i>>>0,t=(i*=t)>>>0,t+=4294967296*(i-=t)}return 2.3283064365386963e-10*(t>>>0)}}(),e=t(" "),r=t(" "),n=t(" "),i=0;i<arguments.length;i++)(e-=t(i<0||arguments.length<=i?void 0:arguments[i]))<0&&(e+=1),(r-=t(i<0||arguments.length<=i?void 0:arguments[i]))<0&&(r+=1),(n-=t(i<0||arguments.length<=i?void 0:arguments[i]))<0&&(n+=1);return[e,r,n]}(t),r=Yi(e,3),n=r[0],i=r[1],o=r[2],a=1,s=function(){var t=2091639*n+2.3283064365386963e-10*a;return n=i,i=o,o=t-(a=0|t)};return s.uint32=function(){return 4294967296*s()},s.fract53=function(){return s()+1.1102230246251565e-16*(2097152*s()|0)},s.algorithm="Alea",s.seed=t,s.version="0.9",s}(e.length?e:[Xi()])}var bo=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,xo=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,_o=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,wo=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function ko(t){if(t)for(;!0===t.hasChildNodes();){var e=t.firstChild;e&&(ko(e),t.removeChild(e))}}function To(t){return t instanceof String||"string"==typeof t}function Mo(t){return"object"===ao(t)&&null!==t}function Eo(t,e,r,n){var i=!1;!0===n&&(i=null===e[r]&&void 0!==t[r]),i?delete t[r]:t[r]=e[r]}function Oo(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(no(r))throw new TypeError("Arrays are not supported by deepExtend");for(var i=0;i<t.length;i++){var o=t[i];if(Object.prototype.hasOwnProperty.call(r,o))if(r[o]&&r[o].constructor===Object)void 0===e[o]&&(e[o]={}),e[o].constructor===Object?Ro(e[o],r[o],!1,n):Eo(e,r,o,n);else{if(no(r[o]))throw new TypeError("Arrays are not supported by deepExtend");Eo(e,r,o,n)}}return e}function So(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(no(r))throw new TypeError("Arrays are not supported by deepExtend");for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i)&&-1===bi(t).call(t,i))if(r[i]&&r[i].constructor===Object)void 0===e[i]&&(e[i]={}),e[i].constructor===Object?Ro(e[i],r[i]):Eo(e,r,i,n);else if(no(r[i])){e[i]=[];for(var o=0;o<r[i].length;o++)e[i].push(r[i][o])}else Eo(e,r,i,n);return e}function Ro(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)||!0===r)if("object"===ao(e[i])&&null!==e[i]&&Ai(e[i])===Object.prototype)void 0===t[i]?t[i]=Ro({},e[i],r):"object"===ao(t[i])&&null!==t[i]&&Ai(t[i])===Object.prototype?Ro(t[i],e[i],r):Eo(t,e,i,n);else if(no(e[i])){var o;t[i]=lo(o=e[i]).call(o)}else Eo(t,e,i,n);return t}function Do(t,e){var r;return ho(r=[]).call(r,go(t),[e])}function Lo(t){return lo(t).call(t)}function Po(t,e){if(no(t))for(var r=t.length,n=0;n<r;n++)e(t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e(t[i],i,t)}function No(t){var e;switch(t.length){case 3:case 4:return(e=xo.exec(t))?{r:Yn(e[1]+e[1],16),g:Yn(e[2]+e[2],16),b:Yn(e[3]+e[3],16)}:null;case 6:case 7:return(e=bo.exec(t))?{r:Yn(e[1],16),g:Yn(e[2],16),b:Yn(e[3],16)}:null;default:return null}}function zo(t,e){if(-1!==bi(t).call(t,"rgba"))return t;if(-1!==bi(t).call(t,"rgb")){var r=t.substr(bi(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+r[0]+","+r[1]+","+r[2]+","+e+")"}var n=No(t);return null==n?t:"rgba("+n.r+","+n.g+","+n.b+","+e+")"}function Fo(t,e,r){var n;return"#"+lo(n=((1<<24)+(t<<16)+(e<<8)+r).toString(16)).call(n,1)}function Bo(t,e){if(To(t)){var r=t;if(Zo(r)){var n,i=ro(n=r.substr(4).substr(0,r.length-5).split(",")).call(n,function(t){return Yn(t)});r=Fo(i[0],i[1],i[2])}if(!0===Uo(r)){var o=function(t){var e=No(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return jo(e.r,e.g,e.b)}(r),a={h:o.h,s:.8*o.s,v:Math.min(1,1.02*o.v)},s={h:o.h,s:Math.min(1,1.25*o.s),v:.8*o.v},l=Go(s.h,s.s,s.v),g=Go(a.h,a.s,a.v);return{background:r,border:l,highlight:{background:g,border:l},hover:{background:g,border:l}}}return{background:r,border:r,highlight:{background:r,border:r},hover:{background:r,border:r}}}return e?{background:t.background||e.background,border:t.border||e.border,highlight:To(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||e.highlight.background,border:t.highlight&&t.highlight.border||e.highlight.border},hover:To(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||e.hover.border,background:t.hover&&t.hover.background||e.hover.background}}:{background:t.background||void 0,border:t.border||void 0,highlight:To(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:To(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function jo(t,e,r){t/=255,e/=255,r/=255;var n=Math.min(t,Math.min(e,r)),i=Math.max(t,Math.max(e,r));return n===i?{h:0,s:0,v:n}:{h:60*((t===n?3:r===n?1:5)-(t===n?e-r:r===n?t-e:r-t)/(i-n))/360,s:(i-n)/i,v:i}}function Vo(t,e,r){var n,i,o,a=Math.floor(6*t),s=6*t-a,l=r*(1-e),g=r*(1-s*e),c=r*(1-(1-s)*e);switch(a%6){case 0:n=r,i=c,o=l;break;case 1:n=g,i=r,o=l;break;case 2:n=l,i=r,o=c;break;case 3:n=l,i=g,o=r;break;case 4:n=c,i=l,o=r;break;case 5:n=r,i=l,o=g}return{r:Math.floor(255*n),g:Math.floor(255*i),b:Math.floor(255*o)}}function Go(t,e,r){var n=Vo(t,e,r);return Fo(n.r,n.g,n.b)}function Uo(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function Zo(t){return _o.test(t)}function Ho(t){if(null===t||"object"!==ao(t))return null;if(t instanceof Element)return t;var e=mn(t);for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&"object"==ao(t[r])&&(e[r]=Ho(t[r]));return e}function Wo(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=function(t){return null!=t},o=function(t){return null!==t&&"object"===ao(t)};if(!o(t))throw new Error("Parameter mergeTarget must be an object");if(!o(e))throw new Error("Parameter options must be an object");if(!i(r))throw new Error("Parameter option must have a value");if(!o(n))throw new Error("Parameter globalOptions must be an object");var a=e[r],s=o(n)&&!function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(n)?n[r]:void 0,l=s?s.enabled:void 0;if(void 0!==a){if("boolean"==typeof a)return o(t[r])||(t[r]={}),void(t[r].enabled=a);if(null===a&&!o(t[r])){if(!i(s))return;t[r]=mn(s)}if(o(a)){var g=!0;void 0!==a.enabled?g=a.enabled:void 0!==l&&(g=s.enabled),function(t,e,r){o(t[r])||(t[r]={});var n=e[r],i=t[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=n[a])}(t,e,r),t[r].enabled=g}}}var Yo={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function Xo(t,e){var r;no(e)||(e=[e]);var n,i=fo(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o){r=o[e[0]];for(var a=1;a<e.length;a++)r&&(r=r[e[a]]);if(void 0!==r)break}}}catch(t){i.e(t)}finally{i.f()}return r}var qo=oi("splice"),Qo=Ln("splice",{ACCESSORS:!0,0:0,1:2}),Ko=Math.max,Jo=Math.min;Z({target:"Array",proto:!0,forced:!qo||!Qo},{splice:function(t,e){var r,n,i,o,a,s,l=At(this),g=rt(l.length),c=ot(t,g),u=arguments.length;if(0===u?r=n=0:1===u?(r=0,n=g-c):(r=u-2,n=Jo(Ko(tt(e),0),g-c)),g+r-n>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(i=Ve(l,n),o=0;o<n;o++)(a=c+o)in l&&Pt(i,o,l[a]);if(i.length=n,r<n){for(o=c;o<g-n;o++)s=o+r,(a=o+n)in l?l[s]=l[a]:delete l[s];for(o=g;o>g-n+r;o--)delete l[o-1]}else if(r>n)for(o=g-n;o>c;o--)s=o+r-1,(a=o+n-1)in l?l[s]=l[a]:delete l[s];for(o=0;o<r;o++)l[o+c]=arguments[o+2];return l.length=g-n+r,i}});var $o=X("Array").splice,ta=Array.prototype,ea=function(t){var e=t.splice;return t===ta||t instanceof Array&&e===ta.splice?$o:e},ra=st.includes,na=Ln("indexOf",{ACCESSORS:!0,1:0});Z({target:"Array",proto:!0,forced:!na},{includes:function(t){return ra(this,t,arguments.length>1?arguments[1]:void 0)}});var ia=X("Array").includes,oa=de("match"),aa=de("match");Z({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[aa]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~String(C(this)).indexOf(function(t){if(function(t){var e;return I(t)&&(void 0!==(e=t[oa])?!!e:"RegExp"==d(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t}(t),arguments.length>1?arguments[1]:void 0)}});var sa=X("String").includes,la=Array.prototype,ga=String.prototype,ca=function(t){var e=t.includes;return t===la||t instanceof Array&&e===la.includes?ia:"string"==typeof t||t===ga||t instanceof String&&e===ga.includes?sa:e};function ua(t){return va=t,function(){var t={};if(ma=0,ya=va.charAt(0),Da(),"strict"===ba&&(t.strict=!0,Da()),"graph"!==ba&&"digraph"!==ba||(t.type=ba,Da()),xa===Ca&&(t.id=ba,Da()),"{"!=ba)throw Ba("Angle bracket { expected");if(Da(),La(t),"}"!=ba)throw Ba("Angle bracket } expected");if(Da(),""!==ba)throw Ba("End of file expected");return Da(),delete t.node,delete t.edge,delete t.graph,t}()}var ha={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},da=mn(ha);da.color="color.color",da.style="dashes";var Aa=0,fa=1,Ca=2,pa=3,Ia={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},va="",ma=0,ya="",ba="",xa=Aa;function _a(){ma++,ya=va.charAt(ma)}function wa(){return va.charAt(ma+1)}var ka=/[a-zA-Z_0-9.:#]/;function Ta(t){return ka.test(t)}function Ma(t,e){if(t||(t={}),e)for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function Ea(t,e,r){for(var n=e.split("."),i=t;n.length;){var o=n.shift();n.length?(i[o]||(i[o]={}),i=i[o]):i[o]=r}}function Oa(t,e){for(var r,n,i=null,o=[t],a=t;a.parent;)o.push(a.parent),a=a.parent;if(a.nodes)for(r=0,n=a.nodes.length;r<n;r++)if(e.id===a.nodes[r].id){i=a.nodes[r];break}for(i||(i={id:e.id},t.node&&(i.attr=Ma(i.attr,t.node))),r=o.length-1;r>=0;r--){var s,l=o[r];l.nodes||(l.nodes=[]),-1===bi(s=l.nodes).call(s,i)&&l.nodes.push(i)}e.attr&&(i.attr=Ma(i.attr,e.attr))}function Sa(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var r=Ma({},t.edge);e.attr=Ma(r,e.attr)}}function Ra(t,e,r,n,i){var o={from:e,to:r,type:n};return t.edge&&(o.attr=Ma({},t.edge)),o.attr=Ma(o.attr||{},i),null!=i&&i.hasOwnProperty("arrows")&&null!=i.arrows&&(o.arrows={to:{enabled:!0,type:i.arrows.type}},i.arrows=null),o}function Da(){for(xa=Aa,ba="";" "===ya||"\t"===ya||"\n"===ya||"\r"===ya;)_a();do{var t=!1;if("#"===ya){for(var e=ma-1;" "===va.charAt(e)||"\t"===va.charAt(e);)e--;if("\n"===va.charAt(e)||""===va.charAt(e)){for(;""!=ya&&"\n"!=ya;)_a();t=!0}}if("/"===ya&&"/"===wa()){for(;""!=ya&&"\n"!=ya;)_a();t=!0}if("/"===ya&&"*"===wa()){for(;""!=ya;){if("*"===ya&&"/"===wa()){_a(),_a();break}_a()}t=!0}for(;" "===ya||"\t"===ya||"\n"===ya||"\r"===ya;)_a()}while(t);if(""!==ya){var r=ya+wa();if(Ia[r])return xa=fa,ba=r,_a(),void _a();if(Ia[ya])return xa=fa,ba=ya,void _a();if(Ta(ya)||"-"===ya){for(ba+=ya,_a();Ta(ya);)ba+=ya,_a();return"false"===ba?ba=!1:"true"===ba?ba=!0:isNaN(Number(ba))||(ba=Number(ba)),void(xa=Ca)}if('"'===ya){for(_a();""!=ya&&('"'!=ya||'"'===ya&&'"'===wa());)'"'===ya?(ba+=ya,_a()):"\\"===ya&&"n"===wa()?(ba+="\n",_a()):ba+=ya,_a();if('"'!=ya)throw Ba('End of string " expected');return _a(),void(xa=Ca)}for(xa=pa;""!=ya;)ba+=ya,_a();throw new SyntaxError('Syntax error in part "'+ja(ba,30)+'"')}xa=fa}function La(t){for(;""!==ba&&"}"!=ba;)Pa(t),";"===ba&&Da()}function Pa(t){var e=Na(t);if(e)za(t,e);else if(!function(t){return"node"===ba?(Da(),t.node=Fa(),"node"):"edge"===ba?(Da(),t.edge=Fa(),"edge"):"graph"===ba?(Da(),t.graph=Fa(),"graph"):null}(t)){if(xa!=Ca)throw Ba("Identifier expected");var r=ba;if(Da(),"="===ba){if(Da(),xa!=Ca)throw Ba("Identifier expected");t[r]=ba,Da()}else!function(t,e){var r={id:e},n=Fa();n&&(r.attr=n),Oa(t,r),za(t,e)}(t,r)}}function Na(t){var e=null;if("subgraph"===ba&&((e={}).type="subgraph",Da(),xa===Ca&&(e.id=ba,Da())),"{"===ba){if(Da(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,La(e),"}"!=ba)throw Ba("Angle bracket } expected");Da(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function za(t,e){for(;"->"===ba||"--"===ba;){var r,n=ba;Da();var i=Na(t);if(i)r=i;else{if(xa!=Ca)throw Ba("Identifier or subgraph expected");Oa(t,{id:r=ba}),Da()}Sa(t,Ra(t,e,r,n,Fa())),e=r}}function Fa(){for(var t,e,r=null,n={dashed:!0,solid:!1,dotted:[1,5]},i={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},o=new Array,a=new Array;"["===ba;){for(Da(),r={};""!==ba&&"]"!=ba;){if(xa!=Ca)throw Ba("Attribute name expected");var s=ba;if(Da(),"="!=ba)throw Ba("Equal sign = expected");if(Da(),xa!=Ca)throw Ba("Attribute value expected");var l=ba;"style"===s&&(l=n[l]),"arrowhead"===s&&(s="arrows",l={to:{enabled:!0,type:i[l]}}),"arrowtail"===s&&(s="arrows",l={from:{enabled:!0,type:i[l]}}),o.push({attr:r,name:s,value:l}),a.push(s),Da(),","==ba&&Da()}if("]"!=ba)throw Ba("Bracket ] expected");Da()}if(ca(a).call(a,"dir")){var g={arrows:{}};for(t=0;t<o.length;t++)if("arrows"===o[t].name)if(null!=o[t].value.to)g.arrows.to=t;else{if(null==o[t].value.from)throw Ba("Invalid value of arrows");g.arrows.from=t}else"dir"===o[t].name&&(g.dir=t);var c,u,h=o[g.dir].value;if(!ca(a).call(a,"arrows"))if("both"===h)o.push({attr:o[g.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),g.arrows.to=o.length-1,o.push({attr:o[g.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),g.arrows.from=o.length-1;else if("forward"===h)o.push({attr:o[g.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),g.arrows.to=o.length-1;else if("back"===h)o.push({attr:o[g.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),g.arrows.from=o.length-1;else{if("none"!==h)throw Ba('Invalid dir type "'+h+'"');o.push({attr:o[g.dir].attr,name:"arrows",value:""}),g.arrows.to=o.length-1}if("both"===h)g.arrows.to&&g.arrows.from?(u=o[g.arrows.to].value.to.type,c=o[g.arrows.from].value.from.type,o[g.arrows.to]={attr:o[g.arrows.to].attr,name:o[g.arrows.to].name,value:{to:{enabled:!0,type:u},from:{enabled:!0,type:c}}},ea(o).call(o,g.arrows.from,1)):g.arrows.to?(u=o[g.arrows.to].value.to.type,c="arrow",o[g.arrows.to]={attr:o[g.arrows.to].attr,name:o[g.arrows.to].name,value:{to:{enabled:!0,type:u},from:{enabled:!0,type:c}}}):g.arrows.from&&(u="arrow",c=o[g.arrows.from].value.from.type,o[g.arrows.from]={attr:o[g.arrows.from].attr,name:o[g.arrows.from].name,value:{to:{enabled:!0,type:u},from:{enabled:!0,type:c}}});else if("back"===h)g.arrows.to&&g.arrows.from?(u="",c=o[g.arrows.from].value.from.type,o[g.arrows.from]={attr:o[g.arrows.from].attr,name:o[g.arrows.from].name,value:{to:{enabled:!0,type:u},from:{enabled:!0,type:c}}}):g.arrows.to?(u="",c="arrow",g.arrows.from=g.arrows.to,o[g.arrows.from]={attr:o[g.arrows.from].attr,name:o[g.arrows.from].name,value:{to:{enabled:!0,type:u},from:{enabled:!0,type:c}}}):g.arrows.from&&(u="",c=o[g.arrows.from].value.from.type,o[g.arrows.to]={attr:o[g.arrows.from].attr,name:o[g.arrows.from].name,value:{to:{enabled:!0,type:u},from:{enabled:!0,type:c}}}),o[g.arrows.from]={attr:o[g.arrows.from].attr,name:o[g.arrows.from].name,value:{from:{enabled:!0,type:o[g.arrows.from].value.from.type}}};else if("none"===h){var d;o[d=g.arrows.to?g.arrows.to:g.arrows.from]={attr:o[d].attr,name:o[d].name,value:""}}else{if("forward"!==h)throw Ba('Invalid dir type "'+h+'"');g.arrows.to&&g.arrows.from||g.arrows.to?(u=o[g.arrows.to].value.to.type,c="",o[g.arrows.to]={attr:o[g.arrows.to].attr,name:o[g.arrows.to].name,value:{to:{enabled:!0,type:u},from:{enabled:!0,type:c}}}):g.arrows.from&&(u="arrow",c="",g.arrows.to=g.arrows.from,o[g.arrows.to]={attr:o[g.arrows.to].attr,name:o[g.arrows.to].name,value:{to:{enabled:!0,type:u},from:{enabled:!0,type:c}}}),o[g.arrows.to]={attr:o[g.arrows.to].attr,name:o[g.arrows.to].name,value:{to:{enabled:!0,type:o[g.arrows.to].value.to.type}}}}ea(o).call(o,g.dir,1)}if(ca(a).call(a,"penwidth")){var A=[];for(e=o.length,t=0;t<e;t++)"width"!==o[t].name&&("penwidth"===o[t].name&&(o[t].name="width"),A.push(o[t]));o=A}for(e=o.length,t=0;t<e;t++)Ea(o[t].attr,o[t].name,o[t].value);return r}function Ba(t){return new SyntaxError(t+', got "'+ja(ba,30)+'" (char '+ma+")")}function ja(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function Va(t,e,r){for(var n=e.split("."),i=n.pop(),o=t,a=0;a<n.length;a++){var s=n[a];s in o||(o[s]={}),o=o[s]}return o[i]=r,t}function Ga(t,e){var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=e[n];no(i)?Gn(i).call(i,function(e){Va(r,e,t[n])}):Va(r,"string"==typeof i?i:n,t[n])}return r}function Ua(t){var e,r=ua(t),n={nodes:[],edges:[],options:{}};if(r.nodes&&Gn(e=r.nodes).call(e,function(t){var e={id:t.id,label:String(t.label||t.id)};Ma(e,Ga(t.attr,ha)),e.image&&(e.shape="image"),n.nodes.push(e)}),r.edges){var i,o=function(t){var e={from:t.from,to:t.to};return Ma(e,Ga(t.attr,da)),null==e.arrows&&"->"===t.type&&(e.arrows="to"),e};Gn(i=r.edges).call(i,function(t){var e,r,i,a,s,l,g;e=t.from instanceof Object?t.from.nodes:{id:t.from},r=t.to instanceof Object?t.to.nodes:{id:t.to},t.from instanceof Object&&t.from.edges&&Gn(i=t.from.edges).call(i,function(t){var e=o(t);n.edges.push(e)}),s=r,l=function(e,r){var i=Ra(n,e.id,r.id,t.type,t.attr),a=o(i);n.edges.push(a)},no(a=e)?Gn(a).call(a,function(t){no(s)?Gn(s).call(s,function(e){l(t,e)}):l(t,s)}):no(s)?Gn(s).call(s,function(t){l(a,t)}):l(a,s),t.to instanceof Object&&t.to.edges&&Gn(g=t.to.edges).call(g,function(t){var e=o(t);n.edges.push(e)})})}return r.attr&&(n.options=r.attr),n}var Za=Object.freeze({__proto__:null,parseDOT:ua,DOTToGraph:Ua});function Ha(t,e){var r,n={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};null!=e&&(null!=e.fixed&&(n.nodes.fixed=e.fixed),null!=e.parseColor&&(n.nodes.parseColor=e.parseColor),null!=e.inheritColor&&(n.edges.inheritColor=e.inheritColor));var i=t.edges,o=ro(i).call(i,function(t){var e={from:t.source,id:t.id,to:t.target};return null!=t.attributes&&(e.attributes=t.attributes),null!=t.label&&(e.label=t.label),null!=t.attributes&&null!=t.attributes.title&&(e.title=t.attributes.title),"Directed"===t.type&&(e.arrows="to"),t.color&&!1===n.edges.inheritColor&&(e.color=t.color),e});return{nodes:ro(r=t.nodes).call(r,function(t){var e={id:t.id,fixed:n.nodes.fixed&&null!=t.x&&null!=t.y};return null!=t.attributes&&(e.attributes=t.attributes),null!=t.label&&(e.label=t.label),null!=t.size&&(e.size=t.size),null!=t.attributes&&null!=t.attributes.title&&(e.title=t.attributes.title),null!=t.title&&(e.title=t.title),null!=t.x&&(e.x=t.x),null!=t.y&&(e.y=t.y),null!=t.color&&(!0===n.nodes.parseColor?e.color=t.color:e.color={background:t.color,border:t.color,highlight:{background:t.color,border:t.color},hover:{background:t.color,border:t.color}}),e}),edges:o}}var Wa=Object.freeze({__proto__:null,parseGephi:Ha});function Ya(t,e){void 0===e&&(e={});var r=e.insertAt;if(t&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===r&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}function Xa(t){var e,r=t&&t.preventDefault||!1,n=t&&t.container||window,i={},o={keydown:{},keyup:{}},a={};for(e=97;e<=122;e++)a[String.fromCharCode(e)]={code:e-97+65,shift:!1};for(e=65;e<=90;e++)a[String.fromCharCode(e)]={code:e,shift:!0};for(e=0;e<=9;e++)a[""+e]={code:48+e,shift:!1};for(e=1;e<=12;e++)a["F"+e]={code:111+e,shift:!1};for(e=0;e<=9;e++)a["num"+e]={code:96+e,shift:!1};a["num*"]={code:106,shift:!1},a["num+"]={code:107,shift:!1},a["num-"]={code:109,shift:!1},a["num/"]={code:111,shift:!1},a["num."]={code:110,shift:!1},a.left={code:37,shift:!1},a.up={code:38,shift:!1},a.right={code:39,shift:!1},a.down={code:40,shift:!1},a.space={code:32,shift:!1},a.enter={code:13,shift:!1},a.shift={code:16,shift:void 0},a.esc={code:27,shift:!1},a.backspace={code:8,shift:!1},a.tab={code:9,shift:!1},a.ctrl={code:17,shift:!1},a.alt={code:18,shift:!1},a.delete={code:46,shift:!1},a.pageup={code:33,shift:!1},a.pagedown={code:34,shift:!1},a["="]={code:187,shift:!1},a["-"]={code:189,shift:!1},a["]"]={code:221,shift:!1},a["["]={code:219,shift:!1};var s=function(t){g(t,"keydown")},l=function(t){g(t,"keyup")},g=function(t,e){if(void 0!==o[e][t.keyCode]){for(var n=o[e][t.keyCode],i=0;i<n.length;i++)(void 0===n[i].shift||1==n[i].shift&&1==t.shiftKey||0==n[i].shift&&0==t.shiftKey)&&n[i].fn(t);1==r&&t.preventDefault()}};return i.bind=function(t,e,r){if(void 0===r&&(r="keydown"),void 0===a[t])throw new Error("unsupported key: "+t);void 0===o[r][a[t].code]&&(o[r][a[t].code]=[]),o[r][a[t].code].push({fn:e,shift:a[t].shift})},i.bindAll=function(t,e){for(var r in void 0===e&&(e="keydown"),a)a.hasOwnProperty(r)&&i.bind(r,t,e)},i.getKey=function(t){for(var e in a)if(a.hasOwnProperty(e)){if(1==t.shiftKey&&1==a[e].shift&&t.keyCode==a[e].code)return e;if(0==t.shiftKey&&0==a[e].shift&&t.keyCode==a[e].code)return e;if(t.keyCode==a[e].code&&"shift"==e)return e}return"unknown key, currently not supported"},i.unbind=function(t,e,r){if(void 0===r&&(r="keydown"),void 0===a[t])throw new Error("unsupported key: "+t);if(void 0!==e){var n=[],i=o[r][a[t].code];if(void 0!==i)for(var s=0;s<i.length;s++)i[s].fn==e&&i[s].shift==a[t].shift||n.push(o[r][a[t].code][s]);o[r][a[t].code]=n}else o[r][a[t].code]=[]},i.reset=function(){o={keydown:{},keyup:{}}},i.destroy=function(){o={keydown:{},keyup:{}},n.removeEventListener("keydown",s,!0),n.removeEventListener("keyup",l,!0)},n.addEventListener("keydown",s,!0),n.addEventListener("keyup",l,!0),i}function qa(){return(qa=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function Qa(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Ka(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}Ya(".vis-overlay{position:absolute;top:0;right:0;bottom:0;left:0;z-index:10}.vis-active{box-shadow:0 0 10px #86d5f8}");var Ja,$a="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}return e}:Object.assign,ts=["","webkit","Moz","MS","ms","o"],es="undefined"==typeof document?{style:{}}:document.createElement("div"),rs=Math.round,ns=Math.abs,is=Date.now;function os(t,e){for(var r,n,i=e[0].toUpperCase()+e.slice(1),o=0;o<ts.length;){if((n=(r=ts[o])?r+i:e)in t)return n;o++}}Ja="undefined"==typeof window?{}:window;var as=os(es.style,"touchAction"),ss=void 0!==as,ls="compute",gs="manipulation",cs="none",us="pan-x",hs="pan-y",ds=function(){if(!ss)return!1;var t={},e=Ja.CSS&&Ja.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){return t[r]=!e||Ja.CSS.supports("touch-action",r)}),t}(),As="ontouchstart"in Ja,fs=void 0!==os(Ja,"PointerEvent"),Cs=As&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ps="touch",Is="mouse",vs=16,ms=["x","y"],ys=["clientX","clientY"];function bs(t,e,r){var n;if(t)if(t.forEach)t.forEach(e,r);else if(void 0!==t.length)for(n=0;n<t.length;)e.call(r,t[n],n,t),n++;else for(n in t)t.hasOwnProperty(n)&&e.call(r,t[n],n,t)}function xs(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function _s(t,e){return t.indexOf(e)>-1}var ws=function(){function t(t,e){this.manager=t,this.set(e)}var e=t.prototype;return e.set=function(t){t===ls&&(t=this.compute()),ss&&this.manager.element.style&&ds[t]&&(this.manager.element.style[as]=t),this.actions=t.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var t=[];return bs(this.manager.recognizers,function(e){xs(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),function(t){if(_s(t,cs))return cs;var e=_s(t,us),r=_s(t,hs);return e&&r?cs:e||r?e?us:hs:_s(t,gs)?gs:"auto"}(t.join(" "))},e.preventDefaults=function(t){var e=t.srcEvent,r=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var n=this.actions,i=_s(n,cs)&&!ds.none,o=_s(n,hs)&&!ds["pan-y"],a=_s(n,us)&&!ds["pan-x"];if(i){var s=1===t.pointers.length,l=t.distance<2,g=t.deltaTime<250;if(s&&l&&g)return}if(!a||!o)return i||o&&6&r||a&&24&r?this.preventSrc(e):void 0}},e.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}();function ks(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function Ts(t){var e=t.length;if(1===e)return{x:rs(t[0].clientX),y:rs(t[0].clientY)};for(var r=0,n=0,i=0;i<e;)r+=t[i].clientX,n+=t[i].clientY,i++;return{x:rs(r/e),y:rs(n/e)}}function Ms(t){for(var e=[],r=0;r<t.pointers.length;)e[r]={clientX:rs(t.pointers[r].clientX),clientY:rs(t.pointers[r].clientY)},r++;return{timeStamp:is(),pointers:e,center:Ts(e),deltaX:t.deltaX,deltaY:t.deltaY}}function Es(t,e,r){r||(r=ms);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return Math.sqrt(n*n+i*i)}function Os(t,e,r){r||(r=ms);var n=e[r[0]]-t[r[0]],i=e[r[1]]-t[r[1]];return 180*Math.atan2(i,n)/Math.PI}function Ss(t,e){return t===e?1:ns(t)>=ns(e)?t<0?2:4:e<0?8:vs}function Rs(t,e,r){return{x:e/t||0,y:r/t||0}}function Ds(t,e,r){var n=r.pointers.length,i=r.changedPointers.length,o=1&e&&n-i==0,a=12&e&&n-i==0;r.isFirst=!!o,r.isFinal=!!a,o&&(t.session={}),r.eventType=e,function(t,e){var r=t.session,n=e.pointers,i=n.length;r.firstInput||(r.firstInput=Ms(e)),i>1&&!r.firstMultiple?r.firstMultiple=Ms(e):1===i&&(r.firstMultiple=!1);var o=r.firstInput,a=r.firstMultiple,s=a?a.center:o.center,l=e.center=Ts(n);e.timeStamp=is(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=Os(s,l),e.distance=Es(s,l),function(t,e){var r=e.center,n=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},n=t.offsetDelta={x:r.x,y:r.y}),e.deltaX=i.x+(r.x-n.x),e.deltaY=i.y+(r.y-n.y)}(r,e),e.offsetDirection=Ss(e.deltaX,e.deltaY);var g,c,u=Rs(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=u.x,e.overallVelocityY=u.y,e.overallVelocity=ns(u.x)>ns(u.y)?u.x:u.y,e.scale=a?(g=a.pointers,Es((c=n)[0],c[1],ys)/Es(g[0],g[1],ys)):1,e.rotation=a?function(t,e){return Os(e[1],e[0],ys)+Os(t[1],t[0],ys)}(a.pointers,n):0,e.maxPointers=r.prevInput?e.pointers.length>r.prevInput.maxPointers?e.pointers.length:r.prevInput.maxPointers:e.pointers.length,function(t,e){var r,n,i,o,a=t.lastInterval||e,s=e.timeStamp-a.timeStamp;if(8!==e.eventType&&(s>25||void 0===a.velocity)){var l=e.deltaX-a.deltaX,g=e.deltaY-a.deltaY,c=Rs(s,l,g);n=c.x,i=c.y,r=ns(c.x)>ns(c.y)?c.x:c.y,o=Ss(l,g),t.lastInterval=e}else r=a.velocity,n=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=r,e.velocityX=n,e.velocityY=i,e.direction=o}(r,e);var h,d=t.element,A=e.srcEvent;ks(h=A.composedPath?A.composedPath()[0]:A.path?A.path[0]:A.target,d)&&(d=h),e.target=d}(t,r),t.emit("hammer.input",r),t.recognize(r),t.session.prevInput=r}function Ls(t){return t.trim().split(/\s+/g)}function Ps(t,e,r){bs(Ls(e),function(e){t.addEventListener(e,r,!1)})}function Ns(t,e,r){bs(Ls(e),function(e){t.removeEventListener(e,r,!1)})}function zs(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Fs=function(){function t(t,e){var r=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){xs(t.options.enable,[t])&&r.handler(e)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&Ps(this.element,this.evEl,this.domHandler),this.evTarget&&Ps(this.target,this.evTarget,this.domHandler),this.evWin&&Ps(zs(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Ns(this.element,this.evEl,this.domHandler),this.evTarget&&Ns(this.target,this.evTarget,this.domHandler),this.evWin&&Ns(zs(this.element),this.evWin,this.domHandler)},t}();function Bs(t,e,r){if(t.indexOf&&!r)return t.indexOf(e);for(var n=0;n<t.length;){if(r&&t[n][r]==e||!r&&t[n]===e)return n;n++}return-1}var js={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},Vs={2:ps,3:"pen",4:Is,5:"kinect"},Gs="pointerdown",Us="pointermove pointerup pointercancel";Ja.MSPointerEvent&&!Ja.PointerEvent&&(Gs="MSPointerDown",Us="MSPointerMove MSPointerUp MSPointerCancel");var Zs=function(t){function e(){var r,n=e.prototype;return n.evEl=Gs,n.evWin=Us,(r=t.apply(this,arguments)||this).store=r.manager.session.pointerEvents=[],r}return Qa(e,t),e.prototype.handler=function(t){var e=this.store,r=!1,n=t.type.toLowerCase().replace("ms",""),i=js[n],o=Vs[t.pointerType]||t.pointerType,a=o===ps,s=Bs(e,t.pointerId,"pointerId");1&i&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):12&i&&(r=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),r&&e.splice(s,1))},e}(Fs);function Hs(t){return Array.prototype.slice.call(t,0)}function Ws(t,e,r){for(var n=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];Bs(i,a)<0&&n.push(t[o]),i[o]=a,o++}return r&&(n=e?n.sort(function(t,r){return t[e]>r[e]}):n.sort()),n}var Ys={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Xs="touchstart touchmove touchend touchcancel",qs=function(t){function e(){var r;return e.prototype.evTarget=Xs,(r=t.apply(this,arguments)||this).targetIds={},r}return Qa(e,t),e.prototype.handler=function(t){var e=Ys[t.type],r=function(t,e){var r,n,i=Hs(t.touches),o=this.targetIds;if(3&e&&1===i.length)return o[i[0].identifier]=!0,[i,i];var a=Hs(t.changedTouches),s=[],l=this.target;if(n=i.filter(function(t){return ks(t.target,l)}),1===e)for(r=0;r<n.length;)o[n[r].identifier]=!0,r++;for(r=0;r<a.length;)o[a[r].identifier]&&s.push(a[r]),12&e&&delete o[a[r].identifier],r++;return s.length?[Ws(n.concat(s),"identifier",!0),s]:void 0}.call(this,t,e);r&&this.callback(this.manager,e,{pointers:r[0],changedPointers:r[1],pointerType:ps,srcEvent:t})},e}(Fs);var Qs={mousedown:1,mousemove:2,mouseup:4},Ks="mousedown",Js="mousemove mouseup",$s=function(t){function e(){var r,n=e.prototype;return n.evEl=Ks,n.evWin=Js,(r=t.apply(this,arguments)||this).pressed=!1,r}return Qa(e,t),e.prototype.handler=function(t){var e=Qs[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Is,srcEvent:t}))},e}(Fs);function tl(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var r={x:e.clientX,y:e.clientY},n=this.lastTouches;this.lastTouches.push(r),setTimeout(function(){var t=n.indexOf(r);t>-1&&n.splice(t,1)},2500)}}var el=function(t){function e(e,r){var n;return(n=t.call(this,e,r)||this).handler=function(t,e,r){var i=r.pointerType===ps,o=r.pointerType===Is;if(!(o&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(i)(function(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,tl.call(this,e)):12&t&&tl.call(this,e)}).call(Ka(Ka(n)),e,r);else if(o&&function(t){for(var e=t.srcEvent.clientX,r=t.srcEvent.clientY,n=0;n<this.lastTouches.length;n++){var i=this.lastTouches[n],o=Math.abs(e-i.x),a=Math.abs(r-i.y);if(o<=25&&a<=25)return!0}return!1}.call(Ka(Ka(n)),r))return;n.callback(t,e,r)}},n.touch=new qs(n.manager,n.handler),n.mouse=new $s(n.manager,n.handler),n.primaryTouch=null,n.lastTouches=[],n}return Qa(e,t),e.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}(Fs);function rl(t,e,r){return!!Array.isArray(t)&&(bs(t,r[e],r),!0)}var nl=1;function il(t,e){var r=e.manager;return r?r.get(t):t}function ol(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}var al=function(){function t(t){void 0===t&&(t={}),this.options=qa({enable:!0},t),this.id=nl++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(t){return $a(this.options,t),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(t){if(rl(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=il(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},e.dropRecognizeWith=function(t){return rl(t,"dropRecognizeWith",this)||(t=il(t,this),delete this.simultaneous[t.id]),this},e.requireFailure=function(t){if(rl(t,"requireFailure",this))return this;var e=this.requireFail;return-1===Bs(e,t=il(t,this))&&(e.push(t),t.requireFailure(this)),this},e.dropRequireFailure=function(t){if(rl(t,"dropRequireFailure",this))return this;t=il(t,this);var e=Bs(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},e.emit=function(t){var e=this,r=this.state;function n(r){e.manager.emit(r,t)}r<8&&n(e.options.event+ol(r)),n(e.options.event),t.additionalEvent&&n(t.additionalEvent),r>=8&&n(e.options.event+ol(r))},e.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=32},e.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},e.recognize=function(t){var e=$a({},t);if(!xs(this.options.enable,[this,e]))return this.reset(),void(this.state=32);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},e.process=function(t){},e.getTouchAction=function(){},e.reset=function(){},t}(),sl=function(t){function e(e){var r;return void 0===e&&(e={}),(r=t.call(this,qa({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},e))||this).pTime=!1,r.pCenter=!1,r._timer=null,r._input=null,r.count=0,r}Qa(e,t);var r=e.prototype;return r.getTouchAction=function(){return[gs]},r.process=function(t){var e=this,r=this.options,n=t.pointers.length===r.pointers,i=t.distance<r.threshold,o=t.deltaTime<r.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(i&&o&&n){if(4!==t.eventType)return this.failTimeout();var a=!this.pTime||t.timeStamp-this.pTime<r.interval,s=!this.pCenter||Es(this.pCenter,t.center)<r.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t,0==this.count%r.taps)return this.hasRequireFailures()?(this._timer=setTimeout(function(){e.state=8,e.tryEmit()},r.interval),2):8}return 32},r.failTimeout=function(){var t=this;return this._timer=setTimeout(function(){t.state=32},this.options.interval),32},r.reset=function(){clearTimeout(this._timer)},r.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(al),ll=function(t){function e(e){return void 0===e&&(e={}),t.call(this,qa({pointers:1},e))||this}Qa(e,t);var r=e.prototype;return r.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},r.process=function(t){var e=this.state,r=t.eventType,n=6&e,i=this.attrTest(t);return n&&(8&r||!i)?16|e:n||i?4&r?8|e:2&e?4|e:2:32},e}(al);function gl(t){return t===vs?"down":8===t?"up":2===t?"left":4===t?"right":""}var cl=function(t){function e(e){var r;return void 0===e&&(e={}),(r=t.call(this,qa({event:"pan",threshold:10,pointers:1,direction:30},e))||this).pX=null,r.pY=null,r}Qa(e,t);var r=e.prototype;return r.getTouchAction=function(){var t=this.options.direction,e=[];return 6&t&&e.push(hs),24&t&&e.push(us),e},r.directionTest=function(t){var e=this.options,r=!0,n=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(6&e.direction?(i=0===o?1:o<0?2:4,r=o!==this.pX,n=Math.abs(t.deltaX)):(i=0===a?1:a<0?8:vs,r=a!==this.pY,n=Math.abs(t.deltaY))),t.direction=i,r&&n>e.threshold&&i&e.direction},r.attrTest=function(t){return ll.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},r.emit=function(e){this.pX=e.deltaX,this.pY=e.deltaY;var r=gl(e.direction);r&&(e.additionalEvent=this.options.event+r),t.prototype.emit.call(this,e)},e}(ll),ul=function(t){function e(e){return void 0===e&&(e={}),t.call(this,qa({event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},e))||this}Qa(e,t);var r=e.prototype;return r.getTouchAction=function(){return cl.prototype.getTouchAction.call(this)},r.attrTest=function(e){var r,n=this.options.direction;return 30&n?r=e.overallVelocity:6&n?r=e.overallVelocityX:24&n&&(r=e.overallVelocityY),t.prototype.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&ns(r)>this.options.velocity&&4&e.eventType},r.emit=function(t){var e=gl(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},e}(ll),hl=function(t){function e(e){return void 0===e&&(e={}),t.call(this,qa({event:"pinch",threshold:0,pointers:2},e))||this}Qa(e,t);var r=e.prototype;return r.getTouchAction=function(){return[cs]},r.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},r.emit=function(e){if(1!==e.scale){var r=e.scale<1?"in":"out";e.additionalEvent=this.options.event+r}t.prototype.emit.call(this,e)},e}(ll),dl=function(t){function e(e){return void 0===e&&(e={}),t.call(this,qa({event:"rotate",threshold:0,pointers:2},e))||this}Qa(e,t);var r=e.prototype;return r.getTouchAction=function(){return[cs]},r.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)},e}(ll),Al=function(t){function e(e){var r;return void 0===e&&(e={}),(r=t.call(this,qa({event:"press",pointers:1,time:251,threshold:9},e))||this)._timer=null,r._input=null,r}Qa(e,t);var r=e.prototype;return r.getTouchAction=function(){return["auto"]},r.process=function(t){var e=this,r=this.options,n=t.pointers.length===r.pointers,i=t.distance<r.threshold,o=t.deltaTime>r.time;if(this._input=t,!i||!n||12&t.eventType&&!o)this.reset();else if(1&t.eventType)this.reset(),this._timer=setTimeout(function(){e.state=8,e.tryEmit()},r.time);else if(4&t.eventType)return 8;return 32},r.reset=function(){clearTimeout(this._timer)},r.emit=function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=is(),this.manager.emit(this.options.event,this._input)))},e}(al),fl={domEvents:!1,touchAction:ls,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Cl=[[dl,{enable:!1}],[hl,{enable:!1},["rotate"]],[ul,{direction:6}],[cl,{direction:6},["swipe"]],[sl],[sl,{event:"doubletap",taps:2},["tap"]],[Al]];function pl(t,e){var r,n=t.element;n.style&&(bs(t.options.cssProps,function(i,o){r=os(n.style,o),e?(t.oldCssProps[r]=n.style[r],n.style[r]=i):n.style[r]=t.oldCssProps[r]||""}),e||(t.oldCssProps={}))}var Il=function(){function t(t,e){var r,n=this;this.options=$a({},fl,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((r=this).options.inputClass||(fs?Zs:Cs?qs:As?el:$s))(r,Ds),this.touchAction=new ws(this,this.options.touchAction),pl(this,!0),bs(this.options.recognizers,function(t){var e=n.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}var e=t.prototype;return e.set=function(t){return $a(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},e.stop=function(t){this.session.stopped=t?2:1},e.recognize=function(t){var e=this.session;if(!e.stopped){var r;this.touchAction.preventDefaults(t);var n=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(e.curRecognizer=null,i=null);for(var o=0;o<n.length;)r=n[o],2===e.stopped||i&&r!==i&&!r.canRecognizeWith(i)?r.reset():r.recognize(t),!i&&14&r.state&&(e.curRecognizer=r,i=r),o++}},e.get=function(t){if(t instanceof al)return t;for(var e=this.recognizers,r=0;r<e.length;r++)if(e[r].options.event===t)return e[r];return null},e.add=function(t){if(rl(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},e.remove=function(t){if(rl(t,"remove",this))return this;var e=this.get(t);if(t){var r=this.recognizers,n=Bs(r,e);-1!==n&&(r.splice(n,1),this.touchAction.update())}return this},e.on=function(t,e){if(void 0===t||void 0===e)return this;var r=this.handlers;return bs(Ls(t),function(t){r[t]=r[t]||[],r[t].push(e)}),this},e.off=function(t,e){if(void 0===t)return this;var r=this.handlers;return bs(Ls(t),function(t){e?r[t]&&r[t].splice(Bs(r[t],e),1):delete r[t]}),this},e.emit=function(t,e){this.options.domEvents&&function(t,e){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.gesture=e,e.target.dispatchEvent(r)}(t,e);var r=this.handlers[t]&&this.handlers[t].slice();if(r&&r.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var n=0;n<r.length;)r[n](e),n++}},e.destroy=function(){this.element&&pl(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),vl={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ml="touchstart",yl="touchstart touchmove touchend touchcancel",bl=function(t){function e(){var r,n=e.prototype;return n.evTarget=ml,n.evWin=yl,(r=t.apply(this,arguments)||this).started=!1,r}return Qa(e,t),e.prototype.handler=function(t){var e=vl[t.type];if(1===e&&(this.started=!0),this.started){var r=function(t,e){var r=Hs(t.touches),n=Hs(t.changedTouches);return 12&e&&(r=Ws(r.concat(n),"identifier",!0)),[r,n]}.call(this,t,e);12&e&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:r[0],changedPointers:r[1],pointerType:ps,srcEvent:t})}},e}(Fs);function xl(t,e,r){var n="DEPRECATED METHOD: "+e+"\n"+r+" AT \n";return function(){var e=new Error("get-stack-trace"),r=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=window.console&&(window.console.warn||window.console.log);return i&&i.call(window.console,n,r),t.apply(this,arguments)}}var _l=xl(function(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;)(!r||r&&void 0===t[n[i]])&&(t[n[i]]=e[n[i]]),i++;return t},"extend","Use `assign`."),wl=xl(function(t,e){return _l(t,e,!0)},"merge","Use `assign`.");function kl(t,e,r){var n,i=e.prototype;(n=t.prototype=Object.create(i)).constructor=t,n._super=i,r&&$a(n,r)}function Tl(t,e){return function(){return t.apply(e,arguments)}}var Ml=function(){var t=function(t,e){return void 0===e&&(e={}),new Il(t,qa({recognizers:Cl.concat()},e))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=30,t.DIRECTION_DOWN=vs,t.DIRECTION_LEFT=2,t.DIRECTION_RIGHT=4,t.DIRECTION_UP=8,t.DIRECTION_HORIZONTAL=6,t.DIRECTION_VERTICAL=24,t.DIRECTION_NONE=1,t.DIRECTION_DOWN=vs,t.INPUT_START=1,t.INPUT_MOVE=2,t.INPUT_END=4,t.INPUT_CANCEL=8,t.STATE_POSSIBLE=1,t.STATE_BEGAN=2,t.STATE_CHANGED=4,t.STATE_ENDED=8,t.STATE_RECOGNIZED=8,t.STATE_CANCELLED=16,t.STATE_FAILED=32,t.Manager=Il,t.Input=Fs,t.TouchAction=ws,t.TouchInput=qs,t.MouseInput=$s,t.PointerEventInput=Zs,t.TouchMouseInput=el,t.SingleTouchInput=bl,t.Recognizer=al,t.AttrRecognizer=ll,t.Tap=sl,t.Pan=cl,t.Swipe=ul,t.Pinch=hl,t.Rotate=dl,t.Press=Al,t.on=Ps,t.off=Ns,t.each=bs,t.merge=wl,t.extend=_l,t.bindFn=Tl,t.assign=$a,t.inherit=kl,t.bindFn=Tl,t.prefixed=os,t.toArray=Hs,t.inArray=Bs,t.uniqueArray=Ws,t.splitStr=Ls,t.boolOrFn=xs,t.hasParent=ks,t.addEventListeners=Ps,t.removeEventListeners=Ns,t.defaults=$a({},fl,{preset:Cl}),t}(),El="undefined"!=typeof window?window.Hammer||Ml:function(){return{on:t=function(){},off:t,destroy:t,emit:t,get:function(){return{set:t}}};var t};function Ol(t){var e,r,n=this;this.active=!1,this.dom={container:t},this.dom.overlay=document.createElement("div"),this.dom.overlay.className="vis-overlay",this.dom.container.appendChild(this.dom.overlay),this.hammer=El(this.dom.overlay),this.hammer.on("tap",K(e=this._onTapOverlay).call(e,this));var i=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Gn(i).call(i,function(t){n.hammer.on(t,function(t){t.srcEvent.stopPropagation()})}),document&&document.body&&(this.onClick=function(e){(function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1})(e.target,t)||n.deactivate()},document.body.addEventListener("click",this.onClick)),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=Xa(),this.escListener=K(r=this.deactivate).call(r,this)}wt(Ol.prototype),Ol.current=null,Ol.prototype.destroy=function(){this.deactivate(),this.dom.overlay.parentNode.removeChild(this.dom.overlay),this.onClick&&document.body.removeEventListener("click",this.onClick),void 0!==this.keycharm&&this.keycharm.destroy(),this.keycharm=null,this.hammer.destroy(),this.hammer=null},Ol.prototype.activate=function(){var t,e,r,n,i;Ol.current&&Ol.current.deactivate(),Ol.current=this,this.active=!0,this.dom.overlay.style.display="none",e=this.dom.container,r="vis-active",n=e.className.split(" "),i=r.split(" "),n=ho(n).call(n,ui(i).call(i,function(t){return bi(n).call(n,t)<0})),e.className=n.join(" "),this.emit("change"),this.emit("activate"),K(t=this.keycharm).call(t,"esc",this.escListener)},Ol.prototype.deactivate=function(){var t,e,r,n;this.active=!1,this.dom.overlay.style.display="block",e="vis-active",r=(t=this.dom.container).className.split(" "),n=e.split(" "),r=ui(r).call(r,function(t){return bi(n).call(n,t)<0}),t.className=r.join(" "),this.keycharm.unbind("esc",this.escListener),this.emit("change"),this.emit("deactivate")},Ol.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};var Sl=Object.freeze({__proto__:null,en:{addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},de:{addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufügen",addNode:"Knoten hinzufügen",back:"Zurück",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",del:"Lösche Auswahl",deleteClusterError:"Cluster können nicht gelöscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster können nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},es:{addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",addEdge:"Añadir arista",addNode:"Añadir nodo",back:"Atrás",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar selección",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},it:{addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},nl:{addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},pt:{addDescription:"Clique em um espaço em branco para adicionar um novo nó",addEdge:"Adicionar aresta",addNode:"Adicionar nó",back:"Voltar",createEdgeError:"Não foi possível linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters não puderam ser removidos.",edgeDescription:"Clique em um nó e arraste a aresta até outro nó para conectá-los",edit:"Editar",editClusterError:"Clusters não puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um nó para conectá-los",editNode:"Editar nó"},ru:{addDescription:"Кликните в свободное место, чтобы добавить новый узел.",addEdge:"Добавить ребро",addNode:"Добавить узел",back:"Назад",createEdgeError:"Невозможно соединить ребра в кластер.",del:"Удалить выбранное",deleteClusterError:"Кластеры не могут быть удалены",edgeDescription:"Кликните на узел и протяните ребро к другому узлу, чтобы соединить их.",edit:"Редактировать",editClusterError:"Кластеры недоступны для редактирования.",editEdge:"Редактировать ребро",editEdgeDescription:"Кликните на контрольные точки и перетащите их в узел, чтобы подключиться к нему.",editNode:"Редактировать узел"},cn:{addDescription:"单击空白处放置新节点。",addEdge:"添加连接线",addNode:"添加节点",back:"返回",createEdgeError:"无法将连接线连接到群集。",del:"删除选定",deleteClusterError:"无法删除群集。",edgeDescription:"单击某个节点并将该连接线拖动到另一个节点以连接它们。",edit:"编辑",editClusterError:"无法编辑群集。",editEdge:"编辑连接线",editEdgeDescription:"单击控制节点并将它们拖到节点上连接。",editNode:"编辑节点"},uk:{addDescription:"Kлікніть на вільне місце, щоб додати новий вузол.",addEdge:"Додати край",addNode:"Додати вузол",back:"Назад",createEdgeError:"Не можливо об'єднати краї в групу.",del:"Видалити обране",deleteClusterError:"Групи не можуть бути видалені.",edgeDescription:"Клікніть на вузол і перетягніть край до іншого вузла, щоб їх з'єднати.",edit:"Редагувати",editClusterError:"Групи недоступні для редагування.",editEdge:"Редагувати край",editEdgeDescription:"Клікніть на контрольні точки і перетягніть їх у вузол, щоб підключитися до нього.",editNode:"Редагувати вузол"},fr:{addDescription:"Cliquez dans un endroit vide pour placer un nœud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nœud",back:"Retour",createEdgeError:"Impossible de créer un lien vers un cluster.",del:"Effacer la sélection",deleteClusterError:"Les clusters ne peuvent pas être effacés.",edgeDescription:"Cliquez sur un nœud et glissez le lien vers un autre nœud pour les connecter.",edit:"Éditer",editClusterError:"Les clusters ne peuvent pas être édités.",editEdge:"Éditer le lien",editEdgeDescription:"Cliquez sur les points de contrôle et glissez-les pour connecter un nœud.",editNode:"Éditer le nœud"},cs:{addDescription:"Kluknutím do prázdného prostoru můžete přidat nový vrchol.",addEdge:"Přidat hranu",addNode:"Přidat vrchol",back:"Zpět",createEdgeError:"Nelze připojit hranu ke shluku.",del:"Smazat výběr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Přetažením z jednoho vrcholu do druhého můžete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Přetažením kontrolního vrcholu hrany ji můžete připojit k jinému vrcholu.",editNode:"Upravit vrchol"}}),Rl=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function Dl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),yn(t,n.key,n)}}var Ll=function(t,e,r){return e&&Dl(t.prototype,e),r&&Dl(t,r),t},Pl=function(){function t(){Rl(this,t),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return Ll(t,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var t=this.image.width,e=this.image.height;this.width=t,this.height=e;var r=Math.floor(e/2),n=Math.floor(e/4),i=Math.floor(e/8),o=Math.floor(e/16),a=Math.floor(t/2),s=Math.floor(t/4),l=Math.floor(t/8),g=Math.floor(t/16);this.canvas.width=3*s,this.canvas.height=r,this.coordinates=[[0,0,a,r],[a,0,s,n],[a,n,l,i],[5*l,n,g,o]],this._fillMipMap()}}},{key:"initialized",value:function(){return void 0!==this.coordinates}},{key:"_fillMipMap",value:function(){var t=this.canvas.getContext("2d"),e=this.coordinates[0];t.drawImage(this.image,e[0],e[1],e[2],e[3]);for(var r=1;r<this.NUM_ITERATIONS;r++){var n=this.coordinates[r-1],i=this.coordinates[r];t.drawImage(this.canvas,n[0],n[1],n[2],n[3],i[0],i[1],i[2],i[3])}}},{key:"drawImageAtPosition",value:function(t,e,r,n,i,o){if(this.initialized())if(e>2){e*=.5;for(var a=0;e>2&&a<this.NUM_ITERATIONS;)e*=.5,a+=1;a>=this.NUM_ITERATIONS&&(a=this.NUM_ITERATIONS-1);var s=this.coordinates[a];t.drawImage(this.canvas,s[0],s[1],s[2],s[3],r,n,i,o)}else t.drawImage(this.image,r,n,i,o)}}]),t}(),Nl=function(){function t(e){Rl(this,t),this.images={},this.imageBroken={},this.callback=e}return Ll(t,[{key:"_tryloadBrokenUrl",value:function(t,e,r){void 0!==t&&void 0!==r&&(void 0!==e?(r.image.onerror=function(){console.error("Could not load brokenImage:",e)},r.image.src=e):console.warn("No broken url image defined"))}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,e){var r=this,n=this.images[t];if(n)return n;var i=new Pl;return this.images[t]=i,i.image.onload=function(){r._fixImageCoordinates(i.image),i.init(),r._redrawWithImage(i)},i.image.onerror=function(){console.error("Could not load image:",t),r._tryloadBrokenUrl(t,e,i)},i.image.src=t,i}},{key:"_fixImageCoordinates",value:function(t){0===t.width&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}]),t}(),zl=!a(function(){return Object.isExtensible(Object.preventExtensions({}))}),Fl=n(function(t){var e=j.f,r=Kt("meta"),n=0,i=Object.isExtensible||function(){return!0},o=function(t){e(t,r,{value:{objectID:"O"+ ++n,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!I(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!y(t,r)){if(!i(t))return"F";if(!e)return"E";o(t)}return t[r].objectID},getWeakData:function(t,e){if(!y(t,r)){if(!i(t))return!0;if(!e)return!1;o(t)}return t[r].weakData},onFreeze:function(t){return zl&&a.REQUIRED&&i(t)&&!y(t,r)&&o(t),t}};lt[r]=!0}),Bl=function(t,e){this.stopped=t,this.result=e},jl=function(t,e,r){var n,i,o,a,s,l,g,c=r&&r.that,u=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_ITERATOR),d=!(!r||!r.INTERRUPTED),A=z(e,c,1+u+d),f=function(t){return n&&on(n),new Bl(!0,t)},C=function(t){return u?(F(t),d?A(t[0],t[1],f):A(t[0],t[1])):d?A(t,f):A(t)};if(h)n=t;else{if("function"!=typeof(i=en(t)))throw TypeError("Target is not iterable");if(gn(i)){for(o=0,a=rt(t.length);a>o;o++)if((s=C(t[o]))&&s instanceof Bl)return s;return new Bl(!1)}n=i.call(t)}for(l=n.next;!(g=l.call(n)).done;){try{s=C(g.value)}catch(t){throw on(n),t}if("object"==typeof s&&s&&s instanceof Bl)return s}return new Bl(!1)},Vl=function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation");return t},Gl=j.f,Ul=Ze.forEach,Zl=Be.set,Hl=Be.getterFor,Wl=function(t,e,r){var n,i=-1!==t.indexOf("Map"),l=-1!==t.indexOf("Weak"),g=i?"set":"add",c=o[t],u=c&&c.prototype,h={};if(s&&"function"==typeof c&&(l||u.forEach&&!a(function(){(new c).entries().next()}))){n=e(function(e,r){Zl(Vl(e,n,t),{type:t,collection:new c}),null!=r&&jl(r,e[g],{that:e,AS_ENTRIES:i})});var d=Hl(t);Ul(["add","clear","delete","forEach","get","has","set","keys","values","entries"],function(t){var e="add"==t||"set"==t;!(t in u)||l&&"clear"==t||V(n.prototype,t,function(r,n){var i=d(this).collection;if(!e&&l&&!I(r))return"get"==t&&void 0;var o=i[t](0===r?0:r,n);return e?this:o})}),l||Gl(n.prototype,"size",{configurable:!0,get:function(){return d(this).collection.size}})}else n=r.getConstructor(e,t,i,g),Fl.REQUIRED=!0;return we(n,t,!1,!0),h[t]=n,Z({global:!0,forced:!0},h),l||r.setStrong(n,t,i),n},Yl=function(t,e,r){for(var n in e)r&&r.unsafe&&t[n]?t[n]=e[n]:ge(t,n,e[n],r);return t},Xl=de("species"),ql=j.f,Ql=Fl.fastKey,Kl=Be.set,Jl=Be.getterFor,$l={getConstructor:function(t,e,r,n){var i=t(function(t,o){Vl(t,i,e),Kl(t,{type:e,index:ie(null),first:void 0,last:void 0,size:0}),s||(t.size=0),null!=o&&jl(o,t[n],{that:t,AS_ENTRIES:r})}),o=Jl(e),a=function(t,e,r){var n,i,a=o(t),g=l(t,e);return g?g.value=r:(a.last=g={index:i=Ql(e,!0),key:e,value:r,previous:n=a.last,next:void 0,removed:!1},a.first||(a.first=g),n&&(n.next=g),s?a.size++:t.size++,"F"!==i&&(a.index[i]=g)),t},l=function(t,e){var r,n=o(t),i=Ql(e);if("F"!==i)return n.index[i];for(r=n.first;r;r=r.next)if(r.key==e)return r};return Yl(i.prototype,{clear:function(){for(var t=o(this),e=t.index,r=t.first;r;)r.removed=!0,r.previous&&(r.previous=r.previous.next=void 0),delete e[r.index],r=r.next;t.first=t.last=void 0,s?t.size=0:this.size=0},delete:function(t){var e=this,r=o(e),n=l(e,t);if(n){var i=n.next,a=n.previous;delete r.index[n.index],n.removed=!0,a&&(a.next=i),i&&(i.previous=a),r.first==n&&(r.first=i),r.last==n&&(r.last=a),s?r.size--:e.size--}return!!n},forEach:function(t){for(var e,r=o(this),n=z(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:r.first;)for(n(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!l(this,t)}}),Yl(i.prototype,r?{get:function(t){var e=l(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),s&&ql(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(t,e,r){var n=e+" Iterator",i=Jl(e),o=Jl(n);Vr(t,e,function(t,e){Kl(this,{type:n,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,r=t.last;r&&r.removed;)r=r.previous;return t.target&&(t.last=r=r?r.next:t.state.first)?"keys"==e?{value:r.key,done:!1}:"values"==e?{value:r.value,done:!1}:{value:[r.key,r.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})},r?"entries":"values",!r,!0),function(t){var e=St(t),r=j.f;s&&e&&!e[Xl]&&r(e,Xl,{configurable:!0,get:function(){return this}})}(e)}},tg=(Wl("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},$l),P.Map),eg=function(){function t(){Rl(this,t),this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},It(this.options,this.defaultOptions)}return Ll(t,[{key:"setOptions",value:function(t){var e=["useDefaultGroups"];if(void 0!==t)for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&-1===bi(e).call(e,r)){var n=t[r];this.add(r,n)}}},{key:"clear",value:function(){this._groups=new tg,this._groupNames=[]}},{key:"get",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._groups.get(t);if(void 0===r&&e)if(!1===this.options.useDefaultGroups&&this._groupNames.length>0){var n=this._groupIndex%this._groupNames.length;++this._groupIndex,(r={}).color=this._groups.get(this._groupNames[n]),this._groups.set(t,r)}else{var i=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,(r={}).color=this._defaultGroups[i],this._groups.set(t,r)}return r}},{key:"add",value:function(t,e){return this._groups.has(t)||this._groupNames.push(t),this._groups.set(t,e),e}}]),t}(),rg=[].slice,ng=/MSIE .\./.test($n),ig=function(t){return function(e,r){var n=arguments.length>2,i=n?rg.call(arguments,2):void 0;return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,r)}};Z({global:!0,bind:!0,forced:ng},{setTimeout:ig(o.setTimeout),setInterval:ig(o.setInterval)});var og=P.setTimeout,ag=Ze.some,sg=On("some"),lg=Ln("some");Z({target:"Array",proto:!0,forced:!sg||!lg},{some:function(t){return ag(this,t,arguments.length>1?arguments[1]:void 0)}});var gg=X("Array").some,cg=Array.prototype,ug=function(t){var e=t.some;return t===cg||t instanceof Array&&e===cg.some?gg:e},hg=o.isFinite,dg=Number.isFinite||function(t){return"number"==typeof t&&hg(t)};Z({target:"Number",stat:!0},{isFinite:dg});var Ag=P.Number.isFinite;Z({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});var fg=P.Number.isNaN,Cg=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},pg=St("Reflect","construct"),Ig=a(function(){function t(){}return!(pg(function(){},[],t)instanceof t)}),vg=!a(function(){pg(function(){})}),mg=Ig||vg;Z({target:"Reflect",stat:!0,forced:mg,sham:mg},{construct:function(t,e){N(t),F(e);var r=arguments.length<3?t:N(arguments[2]);if(vg&&!Ig)return pg(t,e,r);if(t==r){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(Y.apply(t,n))}var i=r.prototype,o=ie(I(i)?i:Object.prototype),a=Function.apply.call(t,o,e);return I(a)?a:o}});var yg=P.Reflect.construct,bg=X("Array").entries,xg=Array.prototype,_g={DOMTokenList:!0,NodeList:!0},wg=St("JSON","stringify"),kg=/[\uD800-\uDFFF]/g,Tg=/^[\uD800-\uDBFF]$/,Mg=/^[\uDC00-\uDFFF]$/,Eg=function(t,e,r){var n=r.charAt(e-1),i=r.charAt(e+1);return Tg.test(t)&&!Mg.test(i)||Mg.test(t)&&!Tg.test(n)?"\\u"+t.charCodeAt(0).toString(16):t},Og=a(function(){return'"\\udf06\\ud834"'!==wg("\udf06\ud834")||'"\\udead"'!==wg("\udead")});wg&&Z({target:"JSON",stat:!0,forced:Og},{stringify:function(t,e,r){var n=wg.apply(null,arguments);return"string"==typeof n?n.replace(kg,Eg):n}}),P.JSON||(P.JSON={stringify:JSON.stringify});var Sg=function(t,e,r){return P.JSON.stringify.apply(null,arguments)},Rg=X("Array").values,Dg=Array.prototype,Lg={DOMTokenList:!0,NodeList:!0},Pg=function(t){var e=t.values;return t===Dg||t instanceof Array&&e===Dg.values||Lg.hasOwnProperty(ye(t))?Rg:e},Ng=X("Array").keys,zg=Array.prototype,Fg={DOMTokenList:!0,NodeList:!0},Bg=function(t){var e=t.keys;return t===zg||t instanceof Array&&e===zg.keys||Fg.hasOwnProperty(ye(t))?Ng:e},jg=vn;Z({target:"Object",stat:!0},{setPrototypeOf:Lr});var Vg=P.Object.setPrototypeOf,Gg=n(function(t){function e(r,n){return t.exports=e=Vg||function(t,e){return t.__proto__=e,t},e(r,n)}t.exports=e}),Ug=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=jg(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gg(t,e)},Zg=function(t,e){return!e||"object"!==ao(e)&&"function"!=typeof e?Cg(t):e},Hg=di,Wg=n(function(t){function e(r){return t.exports=e=Vg?Hg:function(t){return t.__proto__||Hg(t)},e(r)}t.exports=e}),Yg=[],Xg=Yg.sort,qg=a(function(){Yg.sort(void 0)}),Qg=a(function(){Yg.sort(null)}),Kg=On("sort");Z({target:"Array",proto:!0,forced:qg||!Qg||!Kg},{sort:function(t){return void 0===t?Xg.call(At(this)):Xg.call(At(this),N(t))}});var Jg=X("Array").sort,$g=Array.prototype,tc=function(t){var e=t.sort;return t===$g||t instanceof Array&&e===$g.sort?Jg:e},ec=(Wl("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},$l),P.Set),rc=n(function(t){var e=function(t){var e,r=Object.prototype,n=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function g(t,e,r,n){var i=e&&e.prototype instanceof C?e:C,o=Object.create(i.prototype),a=new M(n||[]);return o._invoke=function(t,e,r){var n=u;return function(i,o){if(n===d)throw new Error("Generator is already running");if(n===A){if("throw"===i)throw o;return O()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===f)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===u)throw n=A,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=d;var l=c(t,e,r);if("normal"===l.type){if(n=r.done?A:h,l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n=A,r.method="throw",r.arg=l.arg)}}}(t,r,a),o}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=g;var u="suspendedStart",h="suspendedYield",d="executing",A="completed",f={};function C(){}function p(){}function I(){}var v={};v[o]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(E([])));y&&y!==r&&n.call(y,o)&&(v=y);var b=I.prototype=C.prototype=Object.create(v);function x(t){["next","throw","return"].forEach(function(e){l(t,e,function(t){return this._invoke(e,t)})})}function _(t,e){function r(i,o,a,s){var l=c(t[i],t,o);if("throw"!==l.type){var g=l.arg,u=g.value;return u&&"object"==typeof u&&n.call(u,"__await")?e.resolve(u.__await).then(function(t){r("next",t,a,s)},function(t){r("throw",t,a,s)}):e.resolve(u).then(function(t){g.value=t,a(g)},function(t){return r("throw",t,a,s)})}s(l.arg)}var i;this._invoke=function(t,n){function o(){return new e(function(e,i){r(t,n,e,i)})}return i=i?i.then(o,o):o()}}function w(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var i=c(n,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,f;var o=i.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function E(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}return{next:O}}function O(){return{value:e,done:!0}}return p.prototype=b.constructor=I,I.constructor=p,p.displayName=l(I,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,I):(t.__proto__=I,l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(_.prototype),_.prototype[a]=function(){return this},t.AsyncIterator=_,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new _(g(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(b),l(b,s,"Generator"),b[o]=function(){return this},b.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return s.type="throw",s.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),g=n.call(a,"finallyLoc");if(l&&g){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!g)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:E(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),f}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}),nc=io,ic=function(t,e,r,n,i,o,a,s){for(var l,g=i,c=0,u=!!a&&z(a,s,3);c<n;){if(c in r){if(l=u?u(r[c],c,e):r[c],o>0&&Zt(l))g=ic(t,e,l,rt(l.length),g,o-1)-1;else{if(g>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[g]=l}g++}c++}return g},oc=ic;Z({target:"Array",proto:!0},{flatMap:function(t){var e,r=At(this),n=rt(r.length);return N(t),(e=Ve(r,0)).length=oc(e,r,r,n,0,1,t,arguments.length>1?arguments[1]:void 0),e}});var ac=X("Array").flatMap,sc=Array.prototype,lc=function(t){return function(e,r,n,i){N(r);var o=At(e),a=f(o),s=rt(o.length),l=t?s-1:0,g=t?-1:1;if(n<2)for(;;){if(l in a){i=a[l],l+=g;break}if(l+=g,t?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;t?l>=0:s>l;l+=g)l in a&&(i=r(i,a[l],l,o));return i}},gc={left:lc(!1),right:lc(!0)},cc="process"==d(o.process),uc=gc.left,hc=On("reduce"),dc=Ln("reduce",{1:0});Z({target:"Array",proto:!0,forced:!hc||!dc||!cc&&ni>79&&ni<83},{reduce:function(t){return uc(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Ac=X("Array").reduce,fc=Array.prototype,Cc=function(t){var e=t.reduce;return t===fc||t instanceof Array&&e===fc.reduce?Ac:e},pc="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Ic=new Uint8Array(16);var vc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var mc=[],yc=0;yc<256;++yc)mc.push((yc+256).toString(16).substr(1));function bc(t,e,r){var n=(t=t||{}).random||(t.rng||function(){if(!pc)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pc(Ic)})();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,e){r=r||0;for(var i=0;i<16;++i)e[r+i]=n[i];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(mc[t[e+0]]+mc[t[e+1]]+mc[t[e+2]]+mc[t[e+3]]+"-"+mc[t[e+4]]+mc[t[e+5]]+"-"+mc[t[e+6]]+mc[t[e+7]]+"-"+mc[t[e+8]]+mc[t[e+9]]+"-"+mc[t[e+10]]+mc[t[e+11]]+mc[t[e+12]]+mc[t[e+13]]+mc[t[e+14]]+mc[t[e+15]]).toLowerCase();if(!function(t){return"string"==typeof t&&vc.test(t)}(r))throw TypeError("Stringified UUID is invalid");return r}(n)}function xc(t,e){var r=Qi(t);if(_r){var n=_r(t);e&&(n=ui(n).call(n,function(e){return Vt(t,e).enumerable})),r.push.apply(r,n)}return r}function _c(t){for(var e=1;e<arguments.length;e++){var r,n=null!=arguments[e]?arguments[e]:{};if(e%2)Gn(r=xc(Object(n),!0)).call(r,function(e){bn(t,e,n[e])});else if(Nt)Et(t,Nt(n));else{var i;Gn(i=xc(Object(n))).call(i,function(e){Tt(t,e,Vt(n,e))})}}return t}function wc(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}function kc(t,e){var r;if(void 0===Ao||null==nn(t)){if(no(t)||(r=function(t,e){var r;if(t){if("string"==typeof t)return Tc(t,e);var n=lo(r=Object.prototype.toString.call(t)).call(r,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Cn(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Tc(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=rn(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Tc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Mc=function(){function t(e,r,n){var i,o,a;Rl(this,t),this._source=e,this._transformers=r,this._target=n,this._listeners={add:K(i=this._add).call(i,this),remove:K(o=this._remove).call(o,this),update:K(a=this._update).call(a,this)}}return Ll(t,[{key:"all",value:function(){return this._target.update(this._transformItems(this._source.get())),this}},{key:"start",value:function(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}},{key:"stop",value:function(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}},{key:"_transformItems",value:function(t){var e;return Cc(e=this._transformers).call(e,function(t,e){return e(t)},t)}},{key:"_add",value:function(t,e){null!=e&&this._target.add(this._transformItems(this._source.get(e.items)))}},{key:"_update",value:function(t,e){null!=e&&this._target.update(this._transformItems(this._source.get(e.items)))}},{key:"_remove",value:function(t,e){null!=e&&this._target.remove(this._transformItems(e.oldData))}}]),t}(),Ec=function(){function t(e){Rl(this,t),this._source=e,this._transformers=[]}return Ll(t,[{key:"filter",value:function(t){return this._transformers.push(function(e){return ui(e).call(e,t)}),this}},{key:"map",value:function(t){return this._transformers.push(function(e){return ro(e).call(e,t)}),this}},{key:"flatMap",value:function(t){return this._transformers.push(function(e){return function(t){var e=t.flatMap;return t===sc||t instanceof Array&&e===sc.flatMap?ac:e}(e).call(e,t)}),this}},{key:"to",value:function(t){return new Mc(this._source,this._transformers,t)}}]),t}();function Oc(t){return"string"==typeof t||"number"==typeof t}var Sc=function(){function t(e){Rl(this,t),this._queue=[],this._timeout=null,this._extended=null,this.delay=null,this.max=1/0,this.setOptions(e)}return Ll(t,[{key:"setOptions",value:function(t){t&&void 0!==t.delay&&(this.delay=t.delay),t&&void 0!==t.max&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,e=this._extended.methods,r=0;r<e.length;r++){var n=e[r];n.original?t[n.name]=n.original:delete t[n.name]}this._extended=null}}},{key:"replace",value:function(t,e){var r=this,n=t[e];if(!n)throw new Error("Method "+e+" undefined");t[e]=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];r.queue({args:e,fn:n,context:this})}}},{key:"queue",value:function(t){"function"==typeof t?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&"number"==typeof this.delay&&(this._timeout=og(function(){t.flush()},this.delay))}},{key:"flush",value:function(){var t,e;Gn(t=ea(e=this._queue).call(e,0)).call(t,function(t){t.fn.apply(t.context||t.fn,t.args||[])})}}],[{key:"extend",value:function(e,r){var n=new t(r);if(void 0!==e.flush)throw new Error("Target object already has a property flush");e.flush=function(){n.flush()};var i=[{name:"flush",original:void 0}];if(r&&r.replace)for(var o=0;o<r.replace.length;o++){var a=r.replace[o];i.push({name:a,original:e[a]}),n.replace(e,a)}return n._extended={object:e,methods:i},n}}]),t}(),Rc=function(){function t(){Rl(this,t),this._subscribers={"*":[],add:[],remove:[],update:[]},this.subscribe=t.prototype.on,this.unsubscribe=t.prototype.off}return Ll(t,[{key:"_trigger",value:function(t,e,r){var n,i;if("*"===t)throw new Error("Cannot trigger event *");Gn(n=ho(i=[]).call(i,go(this._subscribers[t]),go(this._subscribers["*"]))).call(n,function(n){n(t,e,null!=r?r:null)})}},{key:"on",value:function(t,e){"function"==typeof e&&this._subscribers[t].push(e)}},{key:"off",value:function(t,e){var r;this._subscribers[t]=ui(r=this._subscribers[t]).call(r,function(t){return t!==e})}}]),t}(),Dc=function(){function t(e){Rl(this,t),this._pairs=e}return Ll(t,[{key:nc,value:rc.mark(function t(){var e,r,n,i,o;return rc.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=kc(this._pairs),t.prev=1,e.s();case 3:if((r=e.n()).done){t.next=9;break}return n=Yi(r.value,2),i=n[0],o=n[1],t.next=7,[i,o];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}},t,this,[[1,11,14,17]])})},{key:"entries",value:rc.mark(function t(){var e,r,n,i,o;return rc.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=kc(this._pairs),t.prev=1,e.s();case 3:if((r=e.n()).done){t.next=9;break}return n=Yi(r.value,2),i=n[0],o=n[1],t.next=7,[i,o];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}},t,this,[[1,11,14,17]])})},{key:"keys",value:rc.mark(function t(){var e,r,n,i;return rc.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=kc(this._pairs),t.prev=1,e.s();case 3:if((r=e.n()).done){t.next=9;break}return n=Yi(r.value,1),i=n[0],t.next=7,i;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}},t,this,[[1,11,14,17]])})},{key:"values",value:rc.mark(function t(){var e,r,n,i;return rc.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=kc(this._pairs),t.prev=1,e.s();case 3:if((r=e.n()).done){t.next=9;break}return n=Yi(r.value,2),i=n[1],t.next=7,i;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}},t,this,[[1,11,14,17]])})},{key:"toIdArray",value:function(){var t;return ro(t=go(this._pairs)).call(t,function(t){return t[0]})}},{key:"toItemArray",value:function(){var t;return ro(t=go(this._pairs)).call(t,function(t){return t[1]})}},{key:"toEntryArray",value:function(){return go(this._pairs)}},{key:"toObjectMap",value:function(){var t,e=mn(null),r=kc(this._pairs);try{for(r.s();!(t=r.n()).done;){var n=Yi(t.value,2),i=n[0],o=n[1];e[i]=o}}catch(t){r.e(t)}finally{r.f()}return e}},{key:"toMap",value:function(){return new tg(this._pairs)}},{key:"toIdSet",value:function(){return new ec(this.toIdArray())}},{key:"toItemSet",value:function(){return new ec(this.toItemArray())}},{key:"cache",value:function(){return new t(go(this._pairs))}},{key:"distinct",value:function(t){var e,r=new ec,n=kc(this._pairs);try{for(n.s();!(e=n.n()).done;){var i=Yi(e.value,2),o=i[0],a=i[1];r.add(t(a,o))}}catch(t){n.e(t)}finally{n.f()}return r}},{key:"filter",value:function(e){var r=this._pairs;return new t(bn({},nc,rc.mark(function t(){var n,i,o,a,s;return rc.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=kc(r),t.prev=1,n.s();case 3:if((i=n.n()).done){t.next=10;break}if(o=Yi(i.value,2),a=o[0],s=o[1],!e(s,a)){t.next=8;break}return t.next=8,[a,s];case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),n.e(t.t0);case 15:return t.prev=15,n.f(),t.finish(15);case 18:case"end":return t.stop()}},t,null,[[1,12,15,18]])})))}},{key:"forEach",value:function(t){var e,r=kc(this._pairs);try{for(r.s();!(e=r.n()).done;){var n=Yi(e.value,2),i=n[0];t(n[1],i)}}catch(t){r.e(t)}finally{r.f()}}},{key:"map",value:function(e){var r=this._pairs;return new t(bn({},nc,rc.mark(function t(){var n,i,o,a,s;return rc.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=kc(r),t.prev=1,n.s();case 3:if((i=n.n()).done){t.next=9;break}return o=Yi(i.value,2),a=o[0],s=o[1],t.next=7,[a,e(s,a)];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),n.e(t.t0);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}},t,null,[[1,11,14,17]])})))}},{key:"max",value:function(t){var e=rn(this._pairs),r=e.next();if(r.done)return null;for(var n=r.value[1],i=t(r.value[1],r.value[0]);!(r=e.next()).done;){var o=Yi(r.value,2),a=o[0],s=o[1],l=t(s,a);l>i&&(i=l,n=s)}return n}},{key:"min",value:function(t){var e=rn(this._pairs),r=e.next();if(r.done)return null;for(var n=r.value[1],i=t(r.value[1],r.value[0]);!(r=e.next()).done;){var o=Yi(r.value,2),a=o[0],s=o[1],l=t(s,a);l<i&&(i=l,n=s)}return n}},{key:"reduce",value:function(t,e){var r,n=kc(this._pairs);try{for(n.s();!(r=n.n()).done;){var i=Yi(r.value,2),o=i[0];e=t(e,i[1],o)}}catch(t){n.e(t)}finally{n.f()}return e}},{key:"sort",value:function(e){var r=this;return new t(bn({},nc,function(){var t;return rn(tc(t=go(r._pairs)).call(t,function(t,r){var n=Yi(t,2),i=n[0],o=n[1],a=Yi(r,2),s=a[0],l=a[1];return e(o,l,i,s)}))}))}}]),t}(),Lc=function(t){Ug(r,Rc);var e=wc(r);function r(t,n){var i;return Rl(this,r),(i=e.call(this))._queue=null,t&&!no(t)&&(n=t,t=[]),i._options=n||{},i._data=new tg,i.length=0,i._idProp=i._options.fieldId||"id",t&&t.length&&i.add(t),i.setOptions(n),i}return Ll(r,[{key:"setOptions",value:function(t){t&&void 0!==t.queue&&(!1===t.queue?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=Sc.extend(this,{replace:["add","update","remove"]})),t.queue&&"object"===ao(t.queue)&&this._queue.setOptions(t.queue)))}},{key:"add",value:function(t,e){var r,n=this,i=[];if(no(t)){var o=ro(t).call(t,function(t){return t[n._idProp]});if(ug(o).call(o,function(t){return n._data.has(t)}))throw new Error("A duplicate id was found in the parameter array.");for(var a=0,s=t.length;a<s;a++)r=this._addItem(t[a]),i.push(r)}else{if(!t||"object"!==ao(t))throw new Error("Unknown dataType");r=this._addItem(t),i.push(r)}return i.length&&this._trigger("add",{items:i},e),i}},{key:"update",value:function(t,e){var r=this,n=[],i=[],o=[],a=[],s=this._idProp,l=function(t){var e=t[s];if(null!=e&&r._data.has(e)){var l=t,g=It({},r._data.get(e)),c=r._updateItem(l);i.push(c),a.push(l),o.push(g)}else{var u=r._addItem(t);n.push(u)}};if(no(t))for(var g=0,c=t.length;g<c;g++)t[g]&&"object"===ao(t[g])?l(t[g]):console.warn("Ignoring input item, which is not an object at index "+g);else{if(!t||"object"!==ao(t))throw new Error("Unknown dataType");l(t)}if(n.length&&this._trigger("add",{items:n},e),i.length){var u={items:i,oldData:o,data:a};this._trigger("update",u,e)}return ho(n).call(n,i)}},{key:"updateOnly",value:function(t,e){var r,n=this;no(t)||(t=[t]);var i=ro(r=ro(t).call(t,function(t){var e=n._data.get(t[n._idProp]);if(null==e)throw new Error("Updating non-existent items is not allowed.");return{oldData:e,update:t}})).call(r,function(t){var e=t.oldData,r=t.update,i=e[n._idProp],o=function(t){for(var e,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Io.apply(void 0,ho(e=[{},t]).call(e,n))}(e,r);return n._data.set(i,o),{id:i,oldData:e,updatedData:o}});if(i.length){var o={items:ro(i).call(i,function(t){return t.id}),oldData:ro(i).call(i,function(t){return t.oldData}),data:ro(i).call(i,function(t){return t.updatedData})};return this._trigger("update",o,e),o.items}return[]}},{key:"get",value:function(t,e){var r=void 0,n=void 0,i=void 0;Oc(t)?(r=t,i=e):no(t)?(n=t,i=e):i=t;var o,a=i&&"Object"===i.returnType?"Object":"Array",s=i&&ui(i),l=[],g=void 0,c=void 0,u=void 0;if(null!=r)(g=this._data.get(r))&&s&&!s(g)&&(g=void 0);else if(null!=n)for(var h=0,d=n.length;h<d;h++)null==(g=this._data.get(n[h]))||s&&!s(g)||l.push(g);else for(var A,f=0,C=(c=go(Bg(A=this._data).call(A))).length;f<C;f++)u=c[f],null==(g=this._data.get(u))||s&&!s(g)||l.push(g);if(i&&i.order&&null==r&&this._sort(l,i.order),i&&i.fields){var p=i.fields;if(null!=r&&null!=g)g=this._filterFields(g,p);else for(var I=0,v=l.length;I<v;I++)l[I]=this._filterFields(l[I],p)}if("Object"==a){for(var m={},y=0,b=l.length;y<b;y++){var x=l[y];m[x[this._idProp]]=x}return m}return null!=r?null!==(o=g)&&void 0!==o?o:null:l}},{key:"getIds",value:function(t){var e=this._data,r=t&&ui(t),n=t&&t.order,i=go(Bg(e).call(e)),o=[];if(r)if(n){for(var a=[],s=0,l=i.length;s<l;s++){var g=i[s],c=this._data.get(g);null!=c&&r(c)&&a.push(c)}this._sort(a,n);for(var u=0,h=a.length;u<h;u++)o.push(a[u][this._idProp])}else for(var d=0,A=i.length;d<A;d++){var f=i[d],C=this._data.get(f);null!=C&&r(C)&&o.push(C[this._idProp])}else if(n){for(var p=[],I=0,v=i.length;I<v;I++){var m=i[I];p.push(e.get(m))}this._sort(p,n);for(var y=0,b=p.length;y<b;y++)o.push(p[y][this._idProp])}else for(var x=0,_=i.length;x<_;x++){var w=i[x],k=e.get(w);null!=k&&o.push(k[this._idProp])}return o}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(t,e){var r=e&&ui(e),n=this._data,i=go(Bg(n).call(n));if(e&&e.order)for(var o=this.get(e),a=0,s=o.length;a<s;a++){var l=o[a];t(l,l[this._idProp])}else for(var g=0,c=i.length;g<c;g++){var u=i[g],h=this._data.get(u);null==h||r&&!r(h)||t(h,u)}}},{key:"map",value:function(t,e){for(var r=e&&ui(e),n=[],i=this._data,o=go(Bg(i).call(i)),a=0,s=o.length;a<s;a++){var l=o[a],g=this._data.get(l);null==g||r&&!r(g)||n.push(t(g,l))}return e&&e.order&&this._sort(n,e.order),n}},{key:"_filterFields",value:function(t,e){var r;return t?Cc(r=no(e)?e:Qi(e)).call(r,function(e,r){return e[r]=t[r],e},{}):t}},{key:"_sort",value:function(t,e){if("string"==typeof e){var r=e;tc(t).call(t,function(t,e){var n=t[r],i=e[r];return n>i?1:n<i?-1:0})}else{if("function"!=typeof e)throw new TypeError("Order must be a function or a string");tc(t).call(t,e)}}},{key:"remove",value:function(t,e){for(var r=[],n=[],i=no(t)?t:[t],o=0,a=i.length;o<a;o++){var s=this._remove(i[o]);if(s){var l=s[this._idProp];null!=l&&(r.push(l),n.push(s))}}return r.length&&this._trigger("remove",{items:r,oldData:n},e),r}},{key:"_remove",value:function(t){var e;if(Oc(t)?e=t:t&&"object"===ao(t)&&(e=t[this._idProp]),null!=e&&this._data.has(e)){var r=this._data.get(e)||null;return this._data.delete(e),--this.length,r}return null}},{key:"clear",value:function(t){for(var e,r=go(Bg(e=this._data).call(e)),n=[],i=0,o=r.length;i<o;i++)n.push(this._data.get(r[i]));return this._data.clear(),this.length=0,this._trigger("remove",{items:r,oldData:n},t),r}},{key:"max",value:function(t){var e,r,n=null,i=null,o=kc(Pg(e=this._data).call(e));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a[t];"number"==typeof s&&(null==i||s>i)&&(n=a,i=s)}}catch(t){o.e(t)}finally{o.f()}return n||null}},{key:"min",value:function(t){var e,r,n=null,i=null,o=kc(Pg(e=this._data).call(e));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=a[t];"number"==typeof s&&(null==i||s<i)&&(n=a,i=s)}}catch(t){o.e(t)}finally{o.f()}return n||null}},{key:"distinct",value:function(t){for(var e=this._data,r=go(Bg(e).call(e)),n=[],i=0,o=0,a=r.length;o<a;o++){for(var s=r[o],l=e.get(s)[t],g=!1,c=0;c<i;c++)if(n[c]==l){g=!0;break}g||void 0===l||(n[i]=l,i++)}return n}},{key:"_addItem",value:function(t){var e=function(t,e){return null==t[e]&&(t[e]=bc()),t}(t,this._idProp),r=e[this._idProp];if(this._data.has(r))throw new Error("Cannot add item: item with id "+r+" already exists");return this._data.set(r,e),++this.length,r}},{key:"_updateItem",value:function(t){var e=t[this._idProp];if(null==e)throw new Error("Cannot update item: item has no id (item: "+Sg(t)+")");var r=this._data.get(e);if(!r)throw new Error("Cannot update item: no item with id "+e+" found");return this._data.set(e,_c(_c({},r),t)),e}},{key:"stream",value:function(t){if(t){var e=this._data;return new Dc(bn({},nc,rc.mark(function r(){var n,i,o,a;return rc.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=kc(t),r.prev=1,n.s();case 3:if((i=n.n()).done){r.next=11;break}if(o=i.value,null==(a=e.get(o))){r.next=9;break}return r.next=9,[o,a];case 9:r.next=3;break;case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(1),n.e(r.t0);case 16:return r.prev=16,n.f(),r.finish(16);case 19:case"end":return r.stop()}},r,null,[[1,13,16,19]])})))}var r;return new Dc(bn({},nc,K(r=function(t){var e=t.entries;return t===xg||t instanceof Array&&e===xg.entries||_g.hasOwnProperty(ye(t))?bg:e}(this._data)).call(r,this._data)))}},{key:"idProp",get:function(){return this._idProp}}]),r}(),Pc=function(t){Ug(r,Rc);var e=wc(r);function r(t,n){var i,o;return Rl(this,r),(o=e.call(this)).length=0,o._ids=new ec,o._options=n||{},o._listener=K(i=o._onEvent).call(i,Cg(o)),o.setData(t),o}return Ll(r,[{key:"setData",value:function(t){if(this._data){this._data.off&&this._data.off("*",this._listener);var e=this._data.getIds({filter:ui(this._options)}),r=this._data.get(e);this._ids.clear(),this.length=0,this._trigger("remove",{items:e,oldData:r})}if(null!=t){this._data=t;for(var n=this._data.getIds({filter:ui(this._options)}),i=0,o=n.length;i<o;i++){var a=n[i];this._ids.add(a)}this.length=n.length,this._trigger("add",{items:n})}else this._data=new Lc;this._data.on&&this._data.on("*",this._listener)}},{key:"refresh",value:function(){for(var t=this._data.getIds({filter:ui(this._options)}),e=go(this._ids),r={},n=[],i=[],o=[],a=0,s=t.length;a<s;a++){var l=t[a];r[l]=!0,this._ids.has(l)||(n.push(l),this._ids.add(l))}for(var g=0,c=e.length;g<c;g++){var u=e[g],h=this._data.get(u);null==h?console.error("If you see this, report it please."):r[u]||(i.push(u),o.push(h),this._ids.delete(u))}this.length+=n.length-i.length,n.length&&this._trigger("add",{items:n}),i.length&&this._trigger("remove",{items:i,oldData:o})}},{key:"get",value:function(t,e){if(null==this._data)return null;var r,n=null;Oc(t)||no(t)?(n=t,r=e):r=t;var i=It({},this._options,r),o=ui(this._options),a=r&&ui(r);return o&&a&&(i.filter=function(t){return o(t)&&a(t)}),null==n?this._data.get(i):this._data.get(n,i)}},{key:"getIds",value:function(t){if(this._data.length){var e,r=ui(this._options),n=null!=t?ui(t):null;return e=n?r?function(t){return r(t)&&n(t)}:n:r,this._data.getIds({filter:e,order:t&&t.order})}return[]}},{key:"forEach",value:function(t,e){if(this._data){var r,n,i=ui(this._options),o=e&&ui(e);n=o?i?function(t){return i(t)&&o(t)}:o:i,Gn(r=this._data).call(r,t,{filter:n,order:e&&e.order})}}},{key:"map",value:function(t,e){if(this._data){var r,n,i=ui(this._options),o=e&&ui(e);return n=o?i?function(t){return i(t)&&o(t)}:o:i,ro(r=this._data).call(r,t,{filter:n,order:e&&e.order})}return[]}},{key:"getDataSet",value:function(){return this._data.getDataSet()}},{key:"stream",value:function(t){var e;return this._data.stream(t||bn({},nc,K(e=Bg(this._ids)).call(e,this._ids)))}},{key:"dispose",value:function(){var t;null!==(t=this._data)&&void 0!==t&&t.off&&this._data.off("*",this._listener);var e,n="This data view has already been disposed of.",i={get:function(){throw new Error(n)},set:function(){throw new Error(n)},configurable:!1},o=kc(so(r.prototype));try{for(o.s();!(e=o.n()).done;){var a=e.value;Tt(this,a,i)}}catch(t){o.e(t)}finally{o.f()}}},{key:"_onEvent",value:function(t,e,r){if(e&&e.items&&this._data){var n=e.items,i=[],o=[],a=[],s=[],l=[],g=[];switch(t){case"add":for(var c=0,u=n.length;c<u;c++){var h=n[c];this.get(h)&&(this._ids.add(h),i.push(h))}break;case"update":for(var d=0,A=n.length;d<A;d++){var f=n[d];this.get(f)?this._ids.has(f)?(o.push(f),l.push(e.data[d]),s.push(e.oldData[d])):(this._ids.add(f),i.push(f)):this._ids.has(f)&&(this._ids.delete(f),a.push(f),g.push(e.oldData[d]))}break;case"remove":for(var C=0,p=n.length;C<p;C++){var I=n[C];this._ids.has(I)&&(this._ids.delete(I),a.push(I),g.push(e.oldData[C]))}}this.length+=i.length-a.length,i.length&&this._trigger("add",{items:i},r),o.length&&this._trigger("update",{items:o,oldData:s,data:l},r),a.length&&this._trigger("remove",{items:a,oldData:g},r)}}},{key:"idProp",get:function(){return this.getDataSet().idProp}}]),r}();function Nc(t,e){return"object"===ao(e)&&null!==e&&t===e.idProp&&"function"==typeof e.add&&"function"==typeof e.clear&&"function"==typeof e.distinct&&"function"==typeof Gn(e)&&"function"==typeof e.get&&"function"==typeof e.getDataSet&&"function"==typeof e.getIds&&"number"==typeof e.length&&"function"==typeof ro(e)&&"function"==typeof e.max&&"function"==typeof e.min&&"function"==typeof e.off&&"function"==typeof e.on&&"function"==typeof e.remove&&"function"==typeof e.setOptions&&"function"==typeof e.stream&&"function"==typeof e.update&&"function"==typeof e.updateOnly}function zc(t,e){return"object"===ao(e)&&null!==e&&t===e.idProp&&"function"==typeof Gn(e)&&"function"==typeof e.get&&"function"==typeof e.getDataSet&&"function"==typeof e.getIds&&"number"==typeof e.length&&"function"==typeof ro(e)&&"function"==typeof e.off&&"function"==typeof e.on&&"function"==typeof e.stream&&Nc(t,e.getDataSet())}var Fc=Object.freeze({__proto__:null,DELETE:po,DataSet:Lc,DataStream:Dc,DataView:Pc,Queue:Sc,createNewDataPipeFrom:function(t){return new Ec(t)},isDataSetLike:Nc,isDataViewLike:zc}),Bc=le.f,jc=a(function(){return!Object.getOwnPropertyNames(1)});Z({target:"Object",stat:!0,forced:jc},{getOwnPropertyNames:Bc});var Vc=P.Object,Gc=Mn.trim,Uc=o.parseFloat,Zc=1/Uc(xn+"-0")!=-1/0?function(t){var e=Gc(String(t)),r=Uc(e);return 0===r&&"-"==e.charAt(0)?-0:r}:Uc;Z({global:!0,forced:parseFloat!=Zc},{parseFloat:Zc});var Hc=P.parseFloat;function Wc(t,e){var r=["node","edge","label"],n=!0,i=Xo(e,"chosen");if("boolean"==typeof i)n=i;else if("object"===ao(i)){if(-1===bi(r).call(r,t))throw new Error("choosify: subOption '"+t+"' should be one of '"+r.join("', '")+"'");var o=Xo(e,["chosen",t]);"boolean"!=typeof o&&"function"!=typeof o||(n=o)}return n}function Yc(t,e,r){if(t.width<=0||t.height<=0)return!1;if(void 0!==r){var n={x:e.x-r.x,y:e.y-r.y};if(0!==r.angle){var i=-r.angle;e={x:Math.cos(i)*n.x-Math.sin(i)*n.y,y:Math.sin(i)*n.x+Math.cos(i)*n.y}}else e=n}var o=t.x+t.width,a=t.y+t.width;return t.left<e.x&&o>e.x&&t.top<e.y&&a>e.y}function Xc(t){return"string"==typeof t&&""!==t}function qc(t,e,r,n){var i=n.x,o=n.y;if("function"==typeof n.distanceToBorder){var a=n.distanceToBorder(t,e),s=Math.sin(e)*a,l=Math.cos(e)*a;l===a?(i+=a,o=n.y):s===a?(i=n.x,o-=a):(i+=l,o-=s)}else n.shape.width>n.shape.height?(i=n.x+.5*n.shape.width,o=n.y-r):(i=n.x+r,o=n.y-.5*n.shape.height);return{x:i,y:o}}var Qc=function(){function t(e){Rl(this,t),this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}return Ll(t,[{key:"_add",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";void 0===this.lines[t]&&(this.lines[t]={width:0,height:0,blocks:[]});var n=e;void 0!==e&&""!==e||(n=" ");var i=this.measureText(n,r),o=It({},Pg(i));o.text=e,o.width=i.width,o.mod=r,void 0!==e&&""!==e||(o.width=0),this.lines[t].blocks.push(o),this.lines[t].width+=o.width}},{key:"curWidth",value:function(){var t=this.lines[this.current];return void 0===t?0:t.width}},{key:"append",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e)}},{key:"newLine",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e),this.current++}},{key:"determineLineHeights",value:function(){for(var t=0;t<this.lines.length;t++){var e=this.lines[t],r=0;if(void 0!==e.blocks)for(var n=0;n<e.blocks.length;n++){var i=e.blocks[n];r<i.height&&(r=i.height)}e.height=r}}},{key:"determineLabelSize",value:function(){for(var t=0,e=0,r=0;r<this.lines.length;r++){var n=this.lines[r];n.width>t&&(t=n.width),e+=n.height}this.width=t,this.height=e}},{key:"removeEmptyBlocks",value:function(){for(var t=[],e=0;e<this.lines.length;e++){var r=this.lines[e];if(0!==r.blocks.length&&(e!==this.lines.length-1||0!==r.width)){var n={};It(n,r),n.blocks=[];for(var i=void 0,o=[],a=0;a<r.blocks.length;a++){var s=r.blocks[a];0!==s.width?o.push(s):void 0===i&&(i=s)}0===o.length&&void 0!==i&&o.push(i),n.blocks=o,t.push(n)}}return t}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}]),t}(),Kc={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/},Jc=function(){function t(e){Rl(this,t),this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}return Ll(t,[{key:"mod",value:function(){return 0===this.modStack.length?"normal":this.modStack[0]}},{key:"modName",value:function(){return 0===this.modStack.length?"normal":"mono"===this.modStack[0]?"mono":this.bold&&this.ital?"boldital":this.bold?"bold":this.ital?"ital":void 0}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(t){" "===t&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1)," "!=t&&(this.buffer+=t)}},{key:"parseWS",value:function(t){return!!/[ \t]/.test(t)&&(this.mono?this.add(t):this.spacing=!0,!0)}},{key:"setTag",value:function(t){this.emitBlock(),this[t]=!0,this.modStack.unshift(t)}},{key:"unsetTag",value:function(t){this.emitBlock(),this[t]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(t,e){return!(this.mono||this[t]||!this.match(e)||(this.setTag(t),0))}},{key:"match",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.prepareRegExp(t),n=Yi(r,2),i=n[0],o=n[1],a=i.test(this.text.substr(this.position,o));return a&&e&&(this.position+=o-1),a}},{key:"parseEndTag",value:function(t,e,r){var n=this.mod()===t;return!(!(n="mono"===t?n&&this.mono:n&&!this.mono)||!this.match(e)||(void 0!==r?(this.position===this.text.length-1||this.match(r,!1))&&this.unsetTag(t):this.unsetTag(t),0))}},{key:"replace",value:function(t,e){return!!this.match(t)&&(this.add(e),this.position+=length-1,!0)}},{key:"prepareRegExp",value:function(t){var e,r;if(t instanceof RegExp)r=t,e=1;else{var n=Kc[t];r=void 0!==n?n:new RegExp(t),e=t.length}return[r,e]}}]),t}(),$c=function(){function t(e,r,n,i){var o=this;Rl(this,t),this.ctx=e,this.parent=r,this.selected=n,this.hover=i,this.lines=new Qc(function(t,r){if(void 0===t)return 0;var a=o.parent.getFormattingValues(e,n,i,r),s=0;return""!==t&&(s=o.ctx.measureText(t).width),{width:s,values:a}})}return Ll(t,[{key:"process",value:function(t){if(!Xc(t))return this.lines.finalize();var e=this.parent.fontOptions;t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n");var r=String(t).split("\n"),n=r.length;if(e.multi)for(var i=0;i<n;i++){var o=this.splitBlocks(r[i],e.multi);if(void 0!==o)if(0!==o.length){if(e.maxWdt>0)for(var a=0;a<o.length;a++){var s=o[a].mod,l=o[a].text;this.splitStringIntoLines(l,s,!0)}else for(var g=0;g<o.length;g++){var c=o[g].mod,u=o[g].text;this.lines.append(u,c)}this.lines.newLine()}else this.lines.newLine("")}else if(e.maxWdt>0)for(var h=0;h<n;h++)this.splitStringIntoLines(r[h]);else for(var d=0;d<n;d++)this.lines.newLine(r[d]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(t){var e="none";return"markdown"===t||"md"===t?e="markdown":!0!==t&&"html"!==t||(e="html"),e}},{key:"splitHtmlBlocks",value:function(t){for(var e=new Jc(t),r=function(t){return!!/&/.test(t)&&(e.replace(e.text,"&lt;","<")||e.replace(e.text,"&amp;","&")||e.add("&"),!0)};e.position<e.text.length;){var n=e.text.charAt(e.position);e.parseWS(n)||/</.test(n)&&(e.parseStartTag("bold","<b>")||e.parseStartTag("ital","<i>")||e.parseStartTag("mono","<code>")||e.parseEndTag("bold","</b>")||e.parseEndTag("ital","</i>")||e.parseEndTag("mono","</code>"))||r(n)||e.add(n),e.position++}return e.emitBlock(),e.blocks}},{key:"splitMarkdownBlocks",value:function(t){for(var e=this,r=new Jc(t),n=!0,i=function(t){return!!/\\/.test(t)&&(r.position<e.text.length+1&&(r.position++,t=e.text.charAt(r.position),/ \t/.test(t)?r.spacing=!0:(r.add(t),n=!1)),!0)};r.position<r.text.length;){var o=r.text.charAt(r.position);r.parseWS(o)||i(o)||(n||r.spacing)&&(r.parseStartTag("bold","*")||r.parseStartTag("ital","_")||r.parseStartTag("mono","`"))||r.parseEndTag("bold","*","afterBold")||r.parseEndTag("ital","_","afterItal")||r.parseEndTag("mono","`","afterMono")||(r.add(o),n=!1),r.position++}return r.emitBlock(),r.blocks}},{key:"splitBlocks",value:function(t,e){var r=this.decodeMarkupSystem(e);return"none"===r?[{text:t,mod:"normal"}]:"markdown"===r?this.splitMarkdownBlocks(t):"html"===r?this.splitHtmlBlocks(t):void 0}},{key:"overMaxWidth",value:function(t){var e=this.ctx.measureText(t).width;return this.lines.curWidth()+e>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(t){for(var e="",r=0;r<t.length;){var n=e+(""===e?"":" ")+t[r];if(this.overMaxWidth(n))break;e=n,r++}return r}},{key:"getLongestFitWord",value:function(t){for(var e=0;e<t.length&&!this.overMaxWidth(lo(t).call(t,0,e));)e++;return e}},{key:"splitStringIntoLines",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.parent.getFormattingValues(this.ctx,this.selected,this.hover,e);for(var n=(t=(t=t.replace(/^( +)/g,"$1\r")).replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r")).split("\r");n.length>0;){var i=this.getLongestFit(n);if(0===i){var o=n[0],a=this.getLongestFitWord(o);this.lines.newLine(lo(o).call(o,0,a),e),n[0]=lo(o).call(o,a)}else{var s=i;" "===n[i-1]?i--:" "===n[s]&&s++;var l=lo(n).call(n,0,i).join("");i==n.length&&r?this.lines.append(l,e):this.lines.newLine(l,e),n=lo(n).call(n,s)}}}}]),t}(),tu=["bold","ital","boldital","mono"],eu=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Rl(this,t),this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(r),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=n}return Ll(t,[{key:"setOptions",value:function(t){if(this.elementOptions=t,this.initFontOptions(t.font),Xc(t.label)?this.labelDirty=!0:t.label=void 0,void 0!==t.font&&null!==t.font)if("string"==typeof t.font)this.baseSize=this.fontOptions.size;else if("object"===ao(t.font)){var e=t.font.size;void 0!==e&&(this.baseSize=e)}}},{key:"initFontOptions",value:function(e){var r=this;Po(tu,function(t){r.fontOptions[t]={}}),t.parseFontString(this.fontOptions,e)?this.fontOptions.vadjust=0:Po(e,function(t,e){null!=t&&"object"!==ao(t)&&(r.fontOptions[e]=t)})}},{key:"constrain",value:function(t){var e={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},r=Xo(t,"widthConstraint");if("number"==typeof r)e.maxWdt=Number(r),e.minWdt=Number(r);else if("object"===ao(r)){var n=Xo(t,["widthConstraint","maximum"]);"number"==typeof n&&(e.maxWdt=Number(n));var i=Xo(t,["widthConstraint","minimum"]);"number"==typeof i&&(e.minWdt=Number(i))}var o=Xo(t,"heightConstraint");if("number"==typeof o)e.minHgt=Number(o);else if("object"===ao(o)){var a=Xo(t,["heightConstraint","minimum"]);"number"==typeof a&&(e.minHgt=Number(a));var s=Xo(t,["heightConstraint","valign"]);"string"==typeof s&&("top"!==s&&"bottom"!==s||(e.valign=s))}return e}},{key:"update",value:function(t,e){this.setOptions(t,!0),this.propagateFonts(e),Ro(this.fontOptions,this.constrain(e)),this.fontOptions.chooser=Wc("label",e)}},{key:"adjustSizes",value:function(t){var e=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=e,this.fontOptions.minWdt-=e);var r=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=r)}},{key:"addFontOptionsToPile",value:function(t,e){for(var r=0;r<e.length;++r)this.addFontToPile(t,e[r])}},{key:"addFontToPile",value:function(t,e){if(void 0!==e&&void 0!==e.font&&null!==e.font){var r=e.font;t.push(r)}}},{key:"getBasicOptions",value:function(e){for(var r={},n=0;n<e.length;++n){var i=e[n],o={};t.parseFontString(o,i)&&(i=o),Po(i,function(t,e){void 0!==t&&(Object.prototype.hasOwnProperty.call(r,e)||(-1!==bi(tu).call(tu,e)?r[e]={}:r[e]=t))})}return r}},{key:"getFontOption",value:function(e,r,n){for(var i,o=0;o<e.length;++o){var a=e[o];if(Object.prototype.hasOwnProperty.call(a,r)){if(null==(i=a[r]))continue;var s={};if(t.parseFontString(s,i)&&(i=s),Object.prototype.hasOwnProperty.call(i,n))return i[n]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,n))return this.fontOptions[n];throw new Error("Did not find value for multi-font for property: '"+n+"'")}},{key:"getFontOptions",value:function(t,e){for(var r={},n=["color","size","face","mod","vadjust"],i=0;i<n.length;++i){var o=n[i];r[o]=this.getFontOption(t,e,o)}return r}},{key:"propagateFonts",value:function(t){var e=this,r=[];this.addFontOptionsToPile(r,t),this.fontOptions=this.getBasicOptions(r);for(var n=function(t){var n=tu[t],i=e.fontOptions[n];Po(e.getFontOptions(r,n),function(t,e){i[e]=t}),i.size=Number(i.size),i.vadjust=Number(i.vadjust)},i=0;i<tu.length;++i)n(i)}},{key:"draw",value:function(t,e,r,n,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";if(void 0!==this.elementOptions.label){var a=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&a<this.elementOptions.scaling.label.drawThreshold-1||(a>=this.elementOptions.scaling.label.maxVisible&&(a=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(t,n,i,e,r,o),this._drawBackground(t),this._drawText(t,e,this.size.yLine,o,a))}}},{key:"_drawBackground",value:function(t){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){t.fillStyle=this.fontOptions.background;var e=this.getSize();t.fillRect(e.left,e.top,e.width,e.height)}}},{key:"_drawText",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle",i=arguments.length>4?arguments[4]:void 0,o=this._setAlignment(t,e,r,n),a=Yi(o,2);e=a[0],r=a[1],t.textAlign="left",e-=this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&("top"===this.fontOptions.valign&&(r-=(this.size.height-this.size.labelHeight)/2),"bottom"===this.fontOptions.valign&&(r+=(this.size.height-this.size.labelHeight)/2));for(var s=0;s<this.lineCount;s++){var l=this.lines[s];if(l&&l.blocks){var g=0;this.isEdgeLabel||"center"===this.fontOptions.align?g+=(this.size.width-l.width)/2:"right"===this.fontOptions.align&&(g+=this.size.width-l.width);for(var c=0;c<l.blocks.length;c++){var u=l.blocks[c];t.font=u.font;var h=this._getColor(u.color,i,u.strokeColor),d=Yi(h,2),A=d[0],f=d[1];u.strokeWidth>0&&(t.lineWidth=u.strokeWidth,t.strokeStyle=f,t.lineJoin="round"),t.fillStyle=A,u.strokeWidth>0&&t.strokeText(u.text,e+g,r+u.vadjust),t.fillText(u.text,e+g,r+u.vadjust),g+=u.width}r+=l.height}}}},{key:"_setAlignment",value:function(t,e,r,n){return this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&!1===this.pointToSelf?(e=0,r=0,"top"===this.fontOptions.align?(t.textBaseline="alphabetic",r-=4):"bottom"===this.fontOptions.align?(t.textBaseline="hanging",r+=4):t.textBaseline="middle"):t.textBaseline=n,[e,r]}},{key:"_getColor",value:function(t,e,r){var n=t||"#000000",i=r||"#ffffff";if(e<=this.elementOptions.scaling.label.drawThreshold){var o=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-e)));n=zo(n,o),i=zo(i,o)}return[n,i]}},{key:"getTextSize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._processLabel(t,e,r),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var t=this.size.left,e=this.size.top-1;if(this.isEdgeLabel){var r=.5*-this.size.width;switch(this.fontOptions.align){case"middle":t=r,e=.5*-this.size.height;break;case"top":t=r,e=-(this.size.height+2);break;case"bottom":t=r,e=2}}return{left:t,top:e,width:this.size.width,height:this.size.height}}},{key:"calculateLabelSize",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";this._processLabel(t,e,r),this.size.left=n-.5*this.size.width,this.size.top=i-.5*this.size.height,this.size.yLine=i+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===o&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(t,e,r,n){var i=function(t,e,r){return"normal"===e?"mod"===r?"":t[r]:void 0!==t[e][r]?t[e][r]:t[r]},o={color:i(this.fontOptions,n,"color"),size:i(this.fontOptions,n,"size"),face:i(this.fontOptions,n,"face"),mod:i(this.fontOptions,n,"mod"),vadjust:i(this.fontOptions,n,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(e||r)&&("normal"===n&&!0===this.fontOptions.chooser&&this.elementOptions.labelHighlightBold?o.mod="bold":"function"==typeof this.fontOptions.chooser&&this.fontOptions.chooser(o,this.elementOptions.id,e,r));var a="";return void 0!==o.mod&&""!==o.mod&&(a+=o.mod+" "),a+=o.size+"px "+o.face,t.font=a.replace(/"/g,""),o.font=t.font,o.height=o.size,o}},{key:"differentState",value:function(t,e){return t!==this.selectedState||e!==this.hoverState}},{key:"_processLabelText",value:function(t,e,r,n){return new $c(t,this,e,r).process(n)}},{key:"_processLabel",value:function(t,e,r){if(!1!==this.labelDirty||this.differentState(e,r)){var n=this._processLabelText(t,e,r,this.elementOptions.label);this.fontOptions.minWdt>0&&n.width<this.fontOptions.minWdt&&(n.width=this.fontOptions.minWdt),this.size.labelHeight=n.height,this.fontOptions.minHgt>0&&n.height<this.fontOptions.minHgt&&(n.height=this.fontOptions.minHgt),this.lines=n.lines,this.lineCount=n.lines.length,this.size.width=n.width,this.size.height=n.height,this.selectedState=e,this.hoverState=r,this.labelDirty=!1}}},{key:"visible",value:function(){return 0!==this.size.width&&0!==this.size.height&&void 0!==this.elementOptions.label&&!(this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(t,e){if(!e||"string"!=typeof e)return!1;var r=e.split(" ");return t.size=+r[0].replace("px",""),t.face=r[1],t.color=r[2],!0}}]),t}();Z({target:"Array",proto:!0},{fill:function(t){for(var e=At(this),r=rt(e.length),n=arguments.length,i=ot(n>1?arguments[1]:void 0,r),o=n>2?arguments[2]:void 0,a=void 0===o?r:ot(o,r);a>i;)e[i++]=t;return e}});var ru=X("Array").fill,nu=Array.prototype,iu=function(t){var e=t.fill;return t===nu||t instanceof Array&&e===nu.fill?ru:e},ou=function(){function t(e,r,n){Rl(this,t),this.body=r,this.labelModule=n,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return Ll(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"_setMargins",value:function(t){this.margin={},this.options.margin&&("object"==ao(this.options.margin)?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(t,e){var r=this.options.borderWidth;return t&&this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+r}},{key:"enableShadow",value:function(t,e){e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t,e){if(!1!==e.borderDashes)if(void 0!==t.setLineDash){var r=e.borderDashes;!0===r&&(r=[5,15]),t.setLineDash(r)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1}},{key:"disableBorderDashes",value:function(t,e){!1!==e.borderDashes&&(void 0!==t.setLineDash?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1))}},{key:"needsRefresh",value:function(t,e){return!0===this.refreshNeeded?(this.refreshNeeded=!1,!0):void 0===this.width||this.labelModule.differentState(t,e)}},{key:"initContextForDraw",value:function(t,e){var r=e.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,r),t.strokeStyle=e.borderColor,t.fillStyle=e.color}},{key:"performStroke",value:function(t,e){var r=e.borderWidth/this.body.view.scale;t.save(),r>0&&(this.enableBorderDashes(t,e),t.stroke(),this.disableBorderDashes(t,e)),t.restore()}},{key:"performFill",value:function(t,e){t.save(),t.fillStyle=e.color,this.enableShadow(t,e),iu(t).call(t),this.disableShadow(t,e),t.restore(),this.performStroke(t,e)}},{key:"_addBoundingBoxMargin",value:function(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}},{key:"_updateBoundingBox",value:function(t,e,r,n,i){void 0!==r&&this.resize(r,n,i),this.left=t-this.width/2,this.top=e-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(t,e,r,n,i){this._updateBoundingBox(t,e,r,n,i)}},{key:"getDimensionsFromLabel",value:function(t,e,r){this.textSize=this.labelModule.getTextSize(t,e,r);var n=this.textSize.width,i=this.textSize.height;return 0===n&&(n=14,i=14),{width:n,height:i}}}]),t}();var au=function(t){Ug(r,ou);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){var o;return Rl(this,r),(o=e.call(this,t,n,i))._setMargins(i),o}return Ll(r,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,r)){var n=this.getDimensionsFromLabel(t,e,r);this.width=n.width+this.margin.right+this.margin.left,this.height=n.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(t,e,r,n,i,o){this.resize(t,n,i),this.left=e-this.width/2,this.top=r-this.height/2,this.initContextForDraw(t,o),mt(t,this.left,this.top,this.width,this.height,o.borderRadius),this.performFill(t,o),this.updateBoundingBox(e,r,t,n,i),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,i)}},{key:"updateBoundingBox",value:function(t,e,r,n,i){this._updateBoundingBox(t,e,r,n,i);var o=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(o)}},{key:"distanceToBorder",value:function(t,e){t&&this.resize(t);var r=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+r}}]),r}();var su=function(t){Ug(r,ou);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){var o;return Rl(this,r),(o=e.call(this,t,n,i)).labelOffset=0,o.selected=!1,o}return Ll(r,[{key:"setOptions",value:function(t,e,r){this.options=t,void 0===e&&void 0===r||this.setImages(e,r)}},{key:"setImages",value:function(t,e){e&&this.selected?(this.imageObj=e,this.imageObjAlt=t):(this.imageObj=t,this.imageObjAlt=e)}},{key:"switchImages",value:function(t){var e=t&&!this.selected||!t&&this.selected;if(this.selected=t,void 0!==this.imageObjAlt&&e){var r=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=r}}},{key:"_getImagePadding",value:function(){var t={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){var e=this.options.imagePadding;"object"==ao(e)?(t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left):(t.top=e,t.right=e,t.bottom=e,t.left=e)}return t}},{key:"_resizeImage",value:function(){var t,e;if(!1===this.options.shapeProperties.useImageSize){var r=1,n=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?r=this.imageObj.width/this.imageObj.height:n=this.imageObj.height/this.imageObj.width),t=2*this.options.size*r,e=2*this.options.size*n}else{var i=this._getImagePadding();t=this.imageObj.width+i.left+i.right,e=this.imageObj.height+i.top+i.bottom}this.width=t,this.height=e,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(t,e,r,n){this.initContextForDraw(t,n),vt(t,e,r,n.size),this.performFill(t,n)}},{key:"_drawImageAtPosition",value:function(t,e){if(0!=this.imageObj.width){t.globalAlpha=void 0!==e.opacity?e.opacity:1,this.enableShadow(t,e);var r=1;!0===this.options.shapeProperties.interpolation&&(r=this.imageObj.width/this.width/this.body.view.scale);var n=this._getImagePadding(),i=this.left+n.left,o=this.top+n.top,a=this.width-n.left-n.right,s=this.height-n.top-n.bottom;this.imageObj.drawImageAtPosition(t,r,i,o,a,s),this.disableShadow(t,e)}}},{key:"_drawImageLabel",value:function(t,e,r,n,i){var o=0;if(void 0!==this.height){o=.5*this.height;var a=this.labelModule.getTextSize(t,n,i);a.lineCount>=1&&(o+=a.height/2)}var s=r+o;this.options.label&&(this.labelOffset=o),this.labelModule.draw(t,e,s,n,i,"hanging")}}]),r}();var lu=function(t){Ug(r,su);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){var o;return Rl(this,r),(o=e.call(this,t,n,i))._setMargins(i),o}return Ll(r,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,r)){var n=this.getDimensionsFromLabel(t,e,r),i=Math.max(n.width+this.margin.right+this.margin.left,n.height+this.margin.top+this.margin.bottom);this.options.size=i/2,this.width=i,this.height=i,this.radius=this.width/2}}},{key:"draw",value:function(t,e,r,n,i,o){this.resize(t,n,i),this.left=e-this.width/2,this.top=r-this.height/2,this._drawRawCircle(t,e,r,o),this.updateBoundingBox(e,r),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,r,n,i)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size}},{key:"distanceToBorder",value:function(t){return t&&this.resize(t),.5*this.width}}]),r}();var gu=function(t){Ug(r,su);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i,o,a){var s;return Rl(this,r),(s=e.call(this,t,n,i)).setImages(o,a),s}return Ll(r,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var n=2*this.options.size;return this.width=n,this.height=n,void(this.radius=.5*this.width)}this.needsRefresh(e,r)&&this._resizeImage()}},{key:"draw",value:function(t,e,r,n,i,o){this.switchImages(n),this.resize();var a=e,s=r;"top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=e,this.top=r,a+=this.width/2,s+=this.height/2):(this.left=e-this.width/2,this.top=r-this.height/2),this._drawRawCircle(t,a,s,o),t.save(),t.clip(),this._drawImageAtPosition(t,o),t.restore(),this._drawImageLabel(t,a,s,n,i),this.updateBoundingBox(e,r)}},{key:"updateBoundingBox",value:function(t,e){"top-left"===this.options.shapeProperties.coordinateOrigin?(this.boundingBox.top=e,this.boundingBox.left=t,this.boundingBox.right=t+2*this.options.size,this.boundingBox.bottom=e+2*this.options.size):(this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(t){return t&&this.resize(t),.5*this.width}}]),r}();var cu=function(t){Ug(r,ou);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){return Rl(this,r),e.call(this,t,n,i)}return Ll(r,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{size:this.options.size};if(this.needsRefresh(e,r)){var i,o;this.labelModule.getTextSize(t,e,r);var a=2*n.size;this.width=null!==(i=this.customSizeWidth)&&void 0!==i?i:a,this.height=null!==(o=this.customSizeHeight)&&void 0!==o?o:a,this.radius=.5*this.width}}},{key:"_drawShape",value:function(t,e,r,n,i,o,a,s){var l,g=this;return this.resize(t,o,a,s),this.left=n-this.width/2,this.top=i-this.height/2,this.initContextForDraw(t,s),(l=e,Object.prototype.hasOwnProperty.call(_t,l)?_t[l]:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];CanvasRenderingContext2D.prototype[l].call(t,r)})(t,n,i,s.size),this.performFill(t,s),void 0!==this.options.icon&&void 0!==this.options.icon.code&&(t.font=(o?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",t.fillText(this.options.icon.code,n,i)),{drawExternalLabel:function(){if(void 0!==g.options.label){g.labelModule.calculateLabelSize(t,o,a,n,i,"hanging");var e=i+.5*g.height+.5*g.labelModule.size.height;g.labelModule.draw(t,n,e,o,a,"hanging")}g.updateBoundingBox(n,i)}}}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),r}();function uu(t,e){var r=Qi(t);if(_r){var n=_r(t);e&&(n=ui(n).call(n,function(e){return Vt(t,e).enumerable})),r.push.apply(r,n)}return r}var hu=function(t){Ug(r,cu);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i,o){var a;return Rl(this,r),(a=e.call(this,t,n,i,o)).ctxRenderer=o,a}return Ll(r,[{key:"draw",value:function(t,e,r,n,i,o){this.resize(t,n,i,o),this.left=e-this.width/2,this.top=r-this.height/2,t.save();var a=this.ctxRenderer({ctx:t,id:this.options.id,x:e,y:r,state:{selected:n,hover:i},style:function(t){for(var e=1;e<arguments.length;e++){var r,n=null!=arguments[e]?arguments[e]:{};if(e%2)Gn(r=uu(Object(n),!0)).call(r,function(e){bn(t,e,n[e])});else if(Nt)Et(t,Nt(n));else{var i;Gn(i=uu(Object(n))).call(i,function(e){Tt(t,e,Vt(n,e))})}}return t}({},o),label:this.options.label});if(null!=a.drawNode&&a.drawNode(),t.restore(),a.drawExternalLabel){var s=a.drawExternalLabel;a.drawExternalLabel=function(){t.save(),s(),t.restore()}}return a.nodeDimensions&&(this.customSizeWidth=a.nodeDimensions.width,this.customSizeHeight=a.nodeDimensions.height),a}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),r}();var du=function(t){Ug(r,ou);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){var o;return Rl(this,r),(o=e.call(this,t,n,i))._setMargins(i),o}return Ll(r,[{key:"resize",value:function(t,e,r){if(this.needsRefresh(e,r)){var n=this.getDimensionsFromLabel(t,e,r).width+this.margin.right+this.margin.left;this.width=n,this.height=n,this.radius=this.width/2}}},{key:"draw",value:function(t,e,r,n,i,o){this.resize(t,n,i),this.left=e-this.width/2,this.top=r-this.height/2,this.initContextForDraw(t,o),bt(t,e-this.width/2,r-this.height/2,this.width,this.height),this.performFill(t,o),this.updateBoundingBox(e,r,t,n,i),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,i)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),r}();var Au=function(t){Ug(r,cu);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){return Rl(this,r),e.call(this,t,n,i)}return Ll(r,[{key:"draw",value:function(t,e,r,n,i,o){return this._drawShape(t,"diamond",4,e,r,n,i,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),r}();var fu=function(t){Ug(r,cu);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){return Rl(this,r),e.call(this,t,n,i)}return Ll(r,[{key:"draw",value:function(t,e,r,n,i,o){return this._drawShape(t,"circle",2,e,r,n,i,o)}},{key:"distanceToBorder",value:function(t){return t&&this.resize(t),this.options.size}}]),r}();var Cu=function(t){Ug(r,ou);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){return Rl(this,r),e.call(this,t,n,i)}return Ll(r,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,r)){var n=this.getDimensionsFromLabel(t,e,r);this.height=2*n.height,this.width=n.width+n.height,this.radius=.5*this.width}}},{key:"draw",value:function(t,e,r,n,i,o){this.resize(t,n,i),this.left=e-.5*this.width,this.top=r-.5*this.height,this.initContextForDraw(t,o),yt(t,this.left,this.top,this.width,this.height),this.performFill(t,o),this.updateBoundingBox(e,r,t,n,i),this.labelModule.draw(t,e,r,n,i)}},{key:"distanceToBorder",value:function(t,e){t&&this.resize(t);var r=.5*this.width,n=.5*this.height,i=Math.sin(e)*r,o=Math.cos(e)*n;return r*n/Math.sqrt(i*i+o*o)}}]),r}();var pu=function(t){Ug(r,ou);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){var o;return Rl(this,r),(o=e.call(this,t,n,i))._setMargins(i),o}return Ll(r,[{key:"resize",value:function(t,e,r){this.needsRefresh(e,r)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,r,n,i,o){var a=this;return this.resize(t,n,i),this.options.icon.size=this.options.icon.size||50,this.left=e-this.width/2,this.top=r-this.height/2,this._icon(t,e,r,n,i,o),{drawExternalLabel:function(){void 0!==a.options.label&&a.labelModule.draw(t,a.left+a.iconSize.width/2+a.margin.left,r+a.height/2+5,n),a.updateBoundingBox(e,r)}}}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-.5*this.options.icon.size,this.boundingBox.left=t-.5*this.options.icon.size,this.boundingBox.right=t+.5*this.options.icon.size,this.boundingBox.bottom=e+.5*this.options.icon.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}},{key:"_icon",value:function(t,e,r,n,i,o){var a=Number(this.options.icon.size);void 0!==this.options.icon.code?(t.font=[null!=this.options.icon.weight?this.options.icon.weight:n?"bold":"",(null!=this.options.icon.weight&&n?5:0)+a+"px",this.options.icon.face].join(" "),t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",this.enableShadow(t,o),t.fillText(this.options.icon.code,e,r),this.disableShadow(t,o)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),r}();var Iu=function(t){Ug(r,su);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i,o,a){var s;return Rl(this,r),(s=e.call(this,t,n,i)).setImages(o,a),s}return Ll(r,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var n=2*this.options.size;return this.width=n,void(this.height=n)}this.needsRefresh(e,r)&&this._resizeImage()}},{key:"draw",value:function(t,e,r,n,i,o){t.save(),this.switchImages(n),this.resize();var a=e,s=r;if("top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=e,this.top=r,a+=this.width/2,s+=this.height/2):(this.left=e-this.width/2,this.top=r-this.height/2),!0===this.options.shapeProperties.useBorderWithImage){var l=this.options.borderWidth,g=this.options.borderWidthSelected||2*this.options.borderWidth,c=(n?g:l)/this.body.view.scale;t.lineWidth=Math.min(this.width,c),t.beginPath();var u=n?this.options.color.highlight.border:i?this.options.color.hover.border:this.options.color.border,h=n?this.options.color.highlight.background:i?this.options.color.hover.background:this.options.color.background;void 0!==o.opacity&&(u=zo(u,o.opacity),h=zo(h,o.opacity)),t.strokeStyle=u,t.fillStyle=h,t.rect(this.left-.5*t.lineWidth,this.top-.5*t.lineWidth,this.width+t.lineWidth,this.height+t.lineWidth),iu(t).call(t),this.performStroke(t,o),t.closePath()}this._drawImageAtPosition(t,o),this._drawImageLabel(t,a,s,n,i),this.updateBoundingBox(e,r),t.restore()}},{key:"updateBoundingBox",value:function(t,e){this.resize(),"top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=t,this.top=e):(this.left=t-this.width/2,this.top=e-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),r}();var vu=function(t){Ug(r,cu);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){return Rl(this,r),e.call(this,t,n,i)}return Ll(r,[{key:"draw",value:function(t,e,r,n,i,o){return this._drawShape(t,"square",2,e,r,n,i,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),r}();var mu=function(t){Ug(r,cu);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){return Rl(this,r),e.call(this,t,n,i)}return Ll(r,[{key:"draw",value:function(t,e,r,n,i,o){return this._drawShape(t,"hexagon",4,e,r,n,i,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),r}();var yu=function(t){Ug(r,cu);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){return Rl(this,r),e.call(this,t,n,i)}return Ll(r,[{key:"draw",value:function(t,e,r,n,i,o){return this._drawShape(t,"star",4,e,r,n,i,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),r}();var bu=function(t){Ug(r,ou);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){var o;return Rl(this,r),(o=e.call(this,t,n,i))._setMargins(i),o}return Ll(r,[{key:"resize",value:function(t,e,r){this.needsRefresh(e,r)&&(this.textSize=this.labelModule.getTextSize(t,e,r),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,r,n,i,o){this.resize(t,n,i),this.left=e-this.width/2,this.top=r-this.height/2,this.enableShadow(t,o),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,n,i),this.disableShadow(t,o),this.updateBoundingBox(e,r,t,n,i)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),r}();var xu=function(t){Ug(r,cu);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){return Rl(this,r),e.call(this,t,n,i)}return Ll(r,[{key:"draw",value:function(t,e,r,n,i,o){return this._drawShape(t,"triangle",3,e,r,n,i,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),r}();var _u,wu=function(t){Ug(r,cu);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){return Rl(this,r),e.call(this,t,n,i)}return Ll(r,[{key:"draw",value:function(t,e,r,n,i,o){return this._drawShape(t,"triangleDown",3,e,r,n,i,o)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),r}(),ku=!1,Tu="background: #FFeeee; color: #dd0000",Mu=function(){function t(){Rl(this,t)}return Ll(t,null,[{key:"validate",value:function(e,r,n){ku=!1,_u=r;var i=r;return void 0!==n&&(i=r[n]),t.parse(e,i,[]),ku}},{key:"parse",value:function(e,r,n){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.check(i,e,r,n)}},{key:"check",value:function(e,r,n,i){if(void 0!==n[e]||void 0!==n.__any__){var o=e,a=!0;void 0===n[e]&&void 0!==n.__any__&&(o="__any__",a="object"===t.getType(r[e]));var s=n[o];a&&void 0!==s.__type__&&(s=s.__type__),t.checkFields(e,r,n,o,s,i)}else t.getSuggestion(e,n,i)}},{key:"checkFields",value:function(e,r,n,i,o,a){var s=function(r){console.error("%c"+r+t.printLocation(a,e),Tu)},l=t.getType(r[e]),g=o[l];void 0!==g?"array"===t.getType(g)&&-1===bi(g).call(g,r[e])?(s('Invalid option detected in "'+e+'". Allowed values are:'+t.print(g)+' not "'+r[e]+'". '),ku=!0):"object"===l&&"__any__"!==i&&(a=Do(a,e),t.parse(r[e],n[i],a)):void 0===o.any&&(s('Invalid type received for "'+e+'". Expected: '+t.print(Qi(o))+". Received ["+l+'] "'+r[e]+'"'),ku=!0)}},{key:"getType",value:function(t){var e=ao(t);return"object"===e?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":no(t)?"array":t instanceof Date?"date":void 0!==t.nodeType?"dom":!0===t._isAMomentObject?"moment":"object":"number"===e?"number":"boolean"===e?"boolean":"string"===e?"string":void 0===e?"undefined":e}},{key:"getSuggestion",value:function(e,r,n){var i,o=t.findInOptions(e,r,n,!1),a=t.findInOptions(e,_u,[],!0);i=void 0!==o.indexMatch?" in "+t.printLocation(o.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+o.indexMatch+'"?\n\n':a.distance<=4&&o.distance>a.distance?" in "+t.printLocation(o.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+t.printLocation(a.path,a.closestMatch,""):o.distance<=8?'. Did you mean "'+o.closestMatch+'"?'+t.printLocation(o.path,e):". Did you mean one of these: "+t.print(Qi(r))+t.printLocation(n,e),console.error('%cUnknown option detected: "'+e+'"'+i,Tu),ku=!0}},{key:"findInOptions",value:function(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=1e9,a="",s=[],l=e.toLowerCase(),g=void 0;for(var c in r){var u=void 0;if(void 0!==r[c].__type__&&!0===i){var h=t.findInOptions(e,r[c],Do(n,c));o>h.distance&&(a=h.closestMatch,s=h.path,o=h.distance,g=h.indexMatch)}else{var d;-1!==bi(d=c.toLowerCase()).call(d,l)&&(g=c),o>(u=t.levenshteinDistance(e,c))&&(a=c,s=Lo(n),o=u)}}return{closestMatch:a,path:s,distance:o,indexMatch:g}}},{key:"printLocation",value:function(t,e){for(var r="\n\n"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Problem value found at: \n")+"options = {\n",n=0;n<t.length;n++){for(var i=0;i<n+1;i++)r+="  ";r+=t[n]+": {\n"}for(var o=0;o<t.length+1;o++)r+="  ";r+=e+"\n";for(var a=0;a<t.length+1;a++){for(var s=0;s<t.length-a;s++)r+="  ";r+="}\n"}return r+"\n\n"}},{key:"print",value:function(t){return Sg(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;var r,n,i=[];for(r=0;r<=e.length;r++)i[r]=[r];for(n=0;n<=t.length;n++)i[0][n]=n;for(r=1;r<=e.length;r++)for(n=1;n<=t.length;n++)e.charAt(r-1)==t.charAt(n-1)?i[r][n]=i[r-1][n-1]:i[r][n]=Math.min(i[r-1][n-1]+1,Math.min(i[r][n-1]+1,i[r-1][n]+1));return i[e.length][t.length]}}]),t}();function Eu(t,e){var r=Qi(t);if(_r){var n=_r(t);e&&(n=ui(n).call(n,function(e){return Vt(t,e).enumerable})),r.push.apply(r,n)}return r}function Ou(t){for(var e=1;e<arguments.length;e++){var r,n=null!=arguments[e]?arguments[e]:{};if(e%2)Gn(r=Eu(Object(n),!0)).call(r,function(e){bn(t,e,n[e])});else if(Nt)Et(t,Nt(n));else{var i;Gn(i=Eu(Object(n))).call(i,function(e){Tt(t,e,Vt(n,e))})}}return t}var Su=function(){function t(e,r,n,i,o,a){Rl(this,t),this.options=Ho(o),this.globalOptions=o,this.defaultOptions=a,this.body=r,this.edges=[],this.id=void 0,this.imagelist=n,this.grouplist=i,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new eu(this.body,this.options,!1),this.setOptions(e)}return Ll(t,[{key:"attachEdge",value:function(t){var e;-1===bi(e=this.edges).call(e,t)&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var e,r,n=bi(e=this.edges).call(e,t);-1!=n&&ea(r=this.edges).call(r,n,1)}},{key:"setOptions",value:function(e){var r=this.options.shape;if(e){if(void 0!==e.color&&(this._localColor=e.color),void 0!==e.id&&(this.id=e.id),void 0===this.id)throw new Error("Node must have an id");t.checkMass(e,this.id),void 0!==e.x&&(null===e.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=Yn(e.x),this.predefinedPosition=!0)),void 0!==e.y&&(null===e.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=Yn(e.y),this.predefinedPosition=!0)),void 0!==e.size&&(this.baseSize=e.size),void 0!==e.value&&(e.value=Hc(e.value)),t.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);var n=[e,this.options,this.defaultOptions];return this.chooser=Wc("node",n),this._load_images(),this.updateLabelModule(e),void 0!==e.opacity&&t.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(r),void 0!==e.hidden||void 0!==e.physics}}},{key:"_load_images",value:function(){if(("circularImage"===this.options.shape||"image"===this.options.shape)&&void 0===this.options.image)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(void 0!==this.options.image){if(void 0===this.imagelist)throw new Error("Internal Error: No images provided");if("string"==typeof this.options.image)this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(void 0===this.options.image.unselected)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),void 0!==this.options.image.selected?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var t={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?!0===this.chooser?this.selected?(null!=this.options.borderWidthSelected?t.borderWidth=this.options.borderWidthSelected:t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):"function"==typeof this.chooser&&(this.chooser(t,this.options.id,this.selected,this.hover),!1===t.shadow&&(t.shadowColor===this.options.shadow.color&&t.shadowSize===this.options.shadow.size&&t.shadowX===this.options.shadow.x&&t.shadowY===this.options.shadow.y||(t.shadow=!0))):t.shadow=this.options.shadow.enabled,void 0!==this.options.opacity){var e=this.options.opacity;t.borderColor=zo(t.borderColor,e),t.color=zo(t.color,e),t.shadowColor=zo(t.shadowColor,e)}return t}},{key:"updateLabelModule",value:function(e){void 0!==this.options.label&&null!==this.options.label||(this.options.label=""),t.updateGroupOptions(this.options,Ou(Ou({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);var r=this.grouplist.get(this.options.group,!1),n=[e,this.options,r,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,n),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new au(this.options,this.body,this.labelModule);break;case"circle":this.shape=new lu(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new gu(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new hu(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new du(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new Au(this.options,this.body,this.labelModule);break;case"dot":this.shape=new fu(this.options,this.body,this.labelModule);break;case"ellipse":this.shape=new Cu(this.options,this.body,this.labelModule);break;case"icon":this.shape=new pu(this.options,this.body,this.labelModule);break;case"image":this.shape=new Iu(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new vu(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new mu(this.options,this.body,this.labelModule);break;case"star":this.shape=new yu(this.options,this.body,this.labelModule);break;case"text":this.shape=new bu(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new xu(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new wu(this.options,this.body,this.labelModule);break;default:this.shape=new Cu(this.options,this.body,this.labelModule)}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,e){return this.shape.distanceToBorder(t,e)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(t,e,r){if(void 0!==this.options.value){var n=this.options.scaling.customScalingFunction(t,e,r,this.options.value),i=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+n*o}this.options.size=this.options.scaling.min+n*i}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){var e=this.getFormattingValues();return this.shape.draw(t,this.x,this.y,this.selected,this.hover,e)||{}}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){var e=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,e)}},{key:"getItemsOnPoint",value:function(t){var e=[];return this.labelModule.visible()&&Yc(this.labelModule.getSize(),t)&&e.push({nodeId:this.id,labelId:0}),Yc(this.shape.boundingBox,t)&&e.push({nodeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"checkOpacity",value:function(t){return 0<=t&&t<=1}},{key:"checkCoordinateOrigin",value:function(t){return void 0===t||"center"===t||"top-left"===t}},{key:"updateGroupOptions",value:function(e,r,n){var i;if(void 0!==n){var o=e.group;if(void 0!==r&&void 0!==r.group&&o!==r.group)throw new Error("updateGroupOptions: group values in options don't match.");if("number"==typeof o||"string"==typeof o&&""!=o){var a=n.get(o);void 0!==a.opacity&&void 0===r.opacity&&(t.checkOpacity(a.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity),a.opacity=void 0));var s=ui(i=function(t){return Vc.getOwnPropertyNames(t)}(r)).call(i,function(t){return null!=r[t]});s.push("font"),So(s,e,a),e.color=Bo(e.color)}}}},{key:"parseOptions",value:function(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4?arguments[4]:void 0;if(So(["color","fixed","shadow"],e,r,n),t.checkMass(r),void 0!==e.opacity&&(t.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),void 0!==r.opacity&&(t.checkOpacity(r.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+r.opacity),r.opacity=void 0)),r.shapeProperties&&!t.checkCoordinateOrigin(r.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+r.shapeProperties.coordinateOrigin),Wo(e,r,"shadow",i),void 0!==r.color&&null!==r.color){var a=Bo(r.color);!function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var i in e)if(void 0!==r[i])if(null===r[i]||"object"!==ao(r[i]))Eo(e,r,i,n);else{var o=e[i],a=r[i];Mo(o)&&Mo(a)&&t(o,a,n)}}(e.color,a)}else!0===n&&null===r.color&&(e.color=Ho(i.color));void 0!==r.fixed&&null!==r.fixed&&("boolean"==typeof r.fixed?(e.fixed.x=r.fixed,e.fixed.y=r.fixed):(void 0!==r.fixed.x&&"boolean"==typeof r.fixed.x&&(e.fixed.x=r.fixed.x),void 0!==r.fixed.y&&"boolean"==typeof r.fixed.y&&(e.fixed.y=r.fixed.y))),!0===n&&null===r.font&&(e.font=Ho(i.font)),t.updateGroupOptions(e,r,o),void 0!==r.scaling&&Wo(e.scaling,r.scaling,"label",i.scaling)}},{key:"checkMass",value:function(t,e){if(void 0!==t.mass&&t.mass<=0){var r="";void 0!==e&&(r=" in node id: "+e),console.error("%cNegative or zero mass disallowed"+r+", setting mass to 1.",Tu),t.mass=1}}}]),t}();function Ru(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Du=function(){function t(e,r,n,i){var o,a=this;if(Rl(this,t),this.body=e,this.images=r,this.groups=n,this.layoutEngine=i,this.body.functions.createNode=K(o=this.create).call(o,this),this.nodesListeners={add:function(t,e){a.add(e.items)},update:function(t,e){a.update(e.items,e.data,e.oldData)},remove:function(t,e){a.remove(e.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,r,n){if(e===t)return.5;var i=1/(e-t);return Math.max(0,(n-t)*i)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=Ho(this.defaultOptions),this.bindEventListeners()}return Ll(t,[{key:"bindEventListeners",value:function(){var t,e,r=this;this.body.emitter.on("refreshNodes",K(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",K(e=this.refresh).call(e,this)),this.body.emitter.on("destroy",function(){Po(r.nodesListeners,function(t,e){r.body.data.nodes&&r.body.data.nodes.off(e,t)}),delete r.body.functions.createNode,delete r.nodesListeners.add,delete r.nodesListeners.update,delete r.nodesListeners.remove,delete r.nodesListeners})}},{key:"setOptions",value:function(t){if(void 0!==t){if(Su.parseOptions(this.options,t),void 0!==t.opacity&&(fg(t.opacity)||!Ag(t.opacity)||t.opacity<0||t.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity):this.options.opacity=t.opacity),void 0!==t.shape)for(var e in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&this.body.nodes[e].updateShape();if(void 0!==t.font||void 0!==t.widthConstraint||void 0!==t.heightConstraint)for(var r=0,n=Qi(this.body.nodes);r<n.length;r++){var i=n[r];this.body.nodes[i].updateLabelModule(),this.body.nodes[i].needsRefresh()}if(void 0!==t.size)for(var o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.body.nodes[o].needsRefresh();void 0===t.hidden&&void 0===t.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.body.data.nodes;if(zc("id",t))this.body.data.nodes=t;else if(no(t))this.body.data.nodes=new Lc,this.body.data.nodes.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new Lc}if(r&&Po(this.nodesListeners,function(t,e){r.off(e,t)}),this.body.nodes={},this.body.data.nodes){var n=this;Po(this.nodesListeners,function(t,e){n.body.data.nodes.on(e,t)});var i=this.body.data.nodes.getIds();this.add(i,!0)}!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],i=0;i<t.length;i++){e=t[i];var o=this.body.data.nodes.get(e),a=this.create(o);n.push(a),this.body.nodes[e]=a}this.layoutEngine.positionInitially(n),!1===r&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,e,r){for(var n=this.body.nodes,i=!1,o=0;o<t.length;o++){var a=t[o],s=n[a],l=e[o];void 0!==s?s.setOptions(l)&&(i=!0):(i=!0,s=this.create(l),n[a]=s)}i||void 0===r||(i=ug(e).call(e,function(t,e){var n=r[e];return n&&n.level!==t.level})),!0===i?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var e=this.body.nodes,r=0;r<t.length;r++)delete e[t[r]];this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t){return new(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Su)(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Po(this.body.nodes,function(r,n){var i=t.body.data.nodes.get(n);void 0!==i&&(!0===e&&r.setOptions({x:null,y:null}),r.setOptions({fixed:!1}),r.setOptions(i))})}},{key:"getPositions",value:function(t){var e={};if(void 0!==t){if(!0===no(t)){for(var r=0;r<t.length;r++)if(void 0!==this.body.nodes[t[r]]){var n=this.body.nodes[t[r]];e[t[r]]={x:Math.round(n.x),y:Math.round(n.y)}}}else if(void 0!==this.body.nodes[t]){var i=this.body.nodes[t];e[t]={x:Math.round(i.x),y:Math.round(i.y)}}}else for(var o=0;o<this.body.nodeIndices.length;o++){var a=this.body.nodes[this.body.nodeIndices[o]];e[this.body.nodeIndices[o]]={x:Math.round(a.x),y:Math.round(a.y)}}return e}},{key:"getPosition",value:function(t){if(null==t)throw new TypeError("No id was specified for getPosition method.");if(null==this.body.nodes[t])throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(t));return{x:Math.round(this.body.nodes[t].x),y:Math.round(this.body.nodes[t].y)}}},{key:"storePositions",value:function(){var t,e=[],r=this.body.data.nodes.getDataSet(),n=function(t,e){var r;if(void 0===Ao||null==nn(t)){if(no(t)||(r=function(t,e){var r;if(t){if("string"==typeof t)return Ru(t,e);var n=lo(r=Object.prototype.toString.call(t)).call(r,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Cn(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ru(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=rn(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(r.get());try{for(n.s();!(t=n.n()).done;){var i=t.value,o=i.id,a=this.body.nodes[o],s=Math.round(a.x),l=Math.round(a.y);i.x===s&&i.y===l||e.push({id:o,x:s,y:l})}}catch(t){n.e(t)}finally{n.f()}r.update(e)}},{key:"getBoundingBox",value:function(t){if(void 0!==this.body.nodes[t])return this.body.nodes[t].shape.boundingBox}},{key:"getConnectedNodes",value:function(t,e){var r=[];if(void 0!==this.body.nodes[t])for(var n=this.body.nodes[t],i={},o=0;o<n.edges.length;o++){var a=n.edges[o];"to"!==e&&a.toId==n.id?void 0===i[a.fromId]&&(r.push(a.fromId),i[a.fromId]=!0):"from"!==e&&a.fromId==n.id&&void 0===i[a.toId]&&(r.push(a.toId),i[a.toId]=!0)}return r}},{key:"getConnectedEdges",value:function(t){var e=[];if(void 0!==this.body.nodes[t])for(var r=this.body.nodes[t],n=0;n<r.edges.length;n++)e.push(r.edges[n].id);else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return e}},{key:"moveNode",value:function(t,e,r){var n=this;void 0!==this.body.nodes[t]?(this.body.nodes[t].x=Number(e),this.body.nodes[t].y=Number(r),og(function(){n.body.emitter.emit("startSimulation")},0)):console.error("Node id supplied to moveNode does not exist. Provided: ",t)}}]),t}(),Lu=jt;Z({target:"Reflect",stat:!0},{get:function t(e,r){var n,i,o=arguments.length<3?e:arguments[2];return F(e)===o?e[r]:(n=T.f(e,r))?y(n,"value")?n.value:void 0===n.get?void 0:n.get.call(o):I(i=Er(e))?t(i,r,o):void 0}});var Pu=P.Reflect.get,Nu=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wg(t)););return t},zu=n(function(t){function e(r,n,i){return"undefined"!=typeof Reflect&&Pu?t.exports=e=Pu:t.exports=e=function(t,e,r){var n=Nu(t,e);if(n){var i=Lu(n,e);return i.get?i.get.call(r):i.value}},e(r,n,i||r)}t.exports=e}),Fu=Math.hypot,Bu=Math.abs,ju=Math.sqrt,Vu=!!Fu&&Fu(1/0,NaN)!==1/0;Z({target:"Math",stat:!0,forced:Vu},{hypot:function(t,e){for(var r,n,i=0,o=0,a=arguments.length,s=0;o<a;)s<(r=Bu(arguments[o++]))?(i=i*(n=s/r)*n+1,s=r):i+=r>0?(n=r/s)*n:r;return s===1/0?1/0:s*ju(i)}});var Gu=P.Math.hypot;function Uu(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}var Zu=function(){function t(){Rl(this,t)}return Ll(t,null,[{key:"transform",value:function(t,e){no(t)||(t=[t]);for(var r=e.point.x,n=e.point.y,i=e.angle,o=e.length,a=0;a<t.length;++a){var s=t[a],l=s.x*Math.cos(i)-s.y*Math.sin(i),g=s.x*Math.sin(i)+s.y*Math.cos(i);s.x=r+o*l,s.y=n+o*g}}},{key:"drawPath",value:function(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var r=1;r<e.length;++r)t.lineTo(e[r].x,e[r].y);t.closePath()}}]),t}(),Hu=function(t){Ug(r,Zu);var e=Uu(r);function r(){return Rl(this,r),e.apply(this,arguments)}return Ll(r,null,[{key:"draw",value:function(t,e){if(e.image){t.save(),t.translate(e.point.x,e.point.y),t.rotate(Math.PI/2+e.angle);var r=null!=e.imageWidth?e.imageWidth:e.image.width,n=null!=e.imageHeight?e.imageHeight:e.image.height;e.image.drawImageAtPosition(t,1,-r/2,0,r,n),t.restore()}return!1}}]),r}(),Wu=function(t){Ug(r,Zu);var e=Uu(r);function r(){return Rl(this,r),e.apply(this,arguments)}return Ll(r,null,[{key:"draw",value:function(t,e){var r=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return Zu.transform(r,e),Zu.drawPath(t,r),!0}}]),r}(),Yu=function(){function t(){Rl(this,t)}return Ll(t,null,[{key:"draw",value:function(t,e){var r=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return Zu.transform(r,e),Zu.drawPath(t,r),!0}}]),t}(),Xu=function(){function t(){Rl(this,t)}return Ll(t,null,[{key:"draw",value:function(t,e){var r={x:-.4,y:0};Zu.transform(r,e),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var n=Math.PI,i=e.angle-n/2,o=e.angle+n/2;return t.beginPath(),t.arc(r.x,r.y,.4*e.length,i,o,!1),t.stroke(),!0}}]),t}(),qu=function(){function t(){Rl(this,t)}return Ll(t,null,[{key:"draw",value:function(t,e){var r={x:-.3,y:0};Zu.transform(r,e),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var n=Math.PI,i=e.angle+n/2,o=e.angle+3*n/2;return t.beginPath(),t.arc(r.x,r.y,.4*e.length,i,o,!1),t.stroke(),!0}}]),t}(),Qu=function(){function t(){Rl(this,t)}return Ll(t,null,[{key:"draw",value:function(t,e){var r=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return Zu.transform(r,e),Zu.drawPath(t,r),!0}}]),t}(),Ku=function(){function t(){Rl(this,t)}return Ll(t,null,[{key:"draw",value:function(t,e){var r=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return Zu.transform(r,e),Zu.drawPath(t,r),!0}}]),t}(),Ju=function(){function t(){Rl(this,t)}return Ll(t,null,[{key:"draw",value:function(t,e){var r={x:-.4,y:0};return Zu.transform(r,e),vt(t,r.x,r.y,.4*e.length),!0}}]),t}(),$u=function(){function t(){Rl(this,t)}return Ll(t,null,[{key:"draw",value:function(t,e){var r=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return Zu.transform(r,e),Zu.drawPath(t,r),!0}}]),t}(),th=function(){function t(){Rl(this,t)}return Ll(t,null,[{key:"draw",value:function(t,e){var r=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return Zu.transform(r,e),Zu.drawPath(t,r),!0}}]),t}(),eh=function(){function t(){Rl(this,t)}return Ll(t,null,[{key:"draw",value:function(t,e){var r=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return Zu.transform(r,e),Zu.drawPath(t,r),!0}}]),t}(),rh=function(){function t(){Rl(this,t)}return Ll(t,null,[{key:"draw",value:function(t,e){var r=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return Zu.transform(r,e),Zu.drawPath(t,r),!0}}]),t}(),nh=function(){function t(){Rl(this,t)}return Ll(t,null,[{key:"draw",value:function(t,e){var r;switch(e.type&&(r=e.type.toLowerCase()),r){case"image":return Hu.draw(t,e);case"circle":return Ju.draw(t,e);case"box":return th.draw(t,e);case"crow":return Yu.draw(t,e);case"curve":return Xu.draw(t,e);case"diamond":return eh.draw(t,e);case"inv_curve":return qu.draw(t,e);case"triangle":return Qu.draw(t,e);case"inv_triangle":return Ku.draw(t,e);case"bar":return $u.draw(t,e);case"vee":return rh.draw(t,e);case"arrow":default:return Wu.draw(t,e)}}}]),t}();function ih(t,e){var r=Qi(t);if(_r){var n=_r(t);e&&(n=ui(n).call(n,function(e){return Vt(t,e).enumerable})),r.push.apply(r,n)}return r}function oh(t){for(var e=1;e<arguments.length;e++){var r,n=null!=arguments[e]?arguments[e]:{};if(e%2)Gn(r=ih(Object(n),!0)).call(r,function(e){bn(t,e,n[e])});else if(Nt)Et(t,Nt(n));else{var i;Gn(i=ih(Object(n))).call(i,function(e){Tt(t,e,Vt(n,e))})}}return t}var ah=function(){function t(e,r,n){Rl(this,t),this._body=r,this._labelModule=n,this.color={},this.colorDirty=!0,this.hoverWidth=1.5,this.selectionWidth=2,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}return Ll(t,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getViaNode();t.strokeStyle=this.getColor(t,e),t.lineWidth=e.width,!1!==e.dashes?this._drawDashedLine(t,e,i):this._drawLine(t,e,i)}},{key:"_drawLine",value:function(t,e,r,n,i){if(this.from!=this.to)this._line(t,e,r,n,i);else{var o=this._getCircleData(t),a=Yi(o,3),s=a[0],l=a[1],g=a[2];this._circle(t,e,s,l,g)}}},{key:"_drawDashedLine",value:function(t,e,r,n,i){t.lineCap="round";var o=no(e.dashes)?e.dashes:[5,5];if(void 0!==t.setLineDash){if(t.save(),t.setLineDash(o),t.lineDashOffset=0,this.from!=this.to)this._line(t,e,r);else{var a=this._getCircleData(t),s=Yi(a,3),l=s[0],g=s[1],c=s[2];this._circle(t,e,l,g,c)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)xt(t,this.from.x,this.from.y,this.to.x,this.to.y,o);else{var u=this._getCircleData(t),h=Yi(u,3),d=h[0],A=h[1],f=h[2];this._circle(t,e,d,A,f)}this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}}},{key:"findBorderPosition",value:function(t,e,r){return this.from!=this.to?this._findBorderPosition(t,e,r):this._findBorderPositionCircle(t,e,r)}},{key:"findBorderPositions",value:function(t){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,t),to:this._findBorderPosition(this.to,t)};var e,r=lo(e=this._getCircleData(t)).call(e,0,2),n=Yi(r,2),i=n[0],o=n[1];return{from:this._findBorderPositionCircle(this.from,t,{x:i,y:o,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,t,{x:i,y:o,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(t){var e=this.options.selfReference.size;void 0!==t&&void 0===this.from.shape.width&&this.from.shape.resize(t);var r=qc(t,this.options.selfReference.angle,e,this.from);return[r.x,r.y,e]}},{key:"_pointOnCircle",value:function(t,e,r,n){var i=2*n*Math.PI;return{x:t+r*Math.cos(i),y:e-r*Math.sin(i)}}},{key:"_findBorderPositionCircle",value:function(t,e,r){var n,i=r.x,o=r.y,a=r.low,s=r.high,l=r.direction,g=this.options.selfReference.size,c=.5*(a+s),u=0;!0===this.options.arrowStrikethrough&&(-1===l?u=this.options.endPointOffset.from:1===l&&(u=this.options.endPointOffset.to));var h=0;do{c=.5*(a+s),n=this._pointOnCircle(i,o,g,c);var d=Math.atan2(t.y-n.y,t.x-n.x),A=t.distanceToBorder(e,d)+u-Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2));if(Math.abs(A)<.05)break;A>0?l>0?a=c:s=c:l>0?s=c:a=c,++h}while(a<=s&&h<10);return oh(oh({},n),{},{t:c})}},{key:"getLineWidth",value:function(t,e){return!0===t?Math.max(this.selectionWidth,.3/this._body.view.scale):!0===e?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(t,e){if(!1!==e.inheritsColor){if("both"===e.inheritsColor&&this.from.id!==this.to.id){var r=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),n=this.from.options.color.highlight.border,i=this.to.options.color.highlight.border;return!1===this.from.selected&&!1===this.to.selected?(n=zo(this.from.options.color.border,e.opacity),i=zo(this.to.options.color.border,e.opacity)):!0===this.from.selected&&!1===this.to.selected?i=this.to.options.color.border:!1===this.from.selected&&!0===this.to.selected&&(n=this.from.options.color.border),r.addColorStop(0,n),r.addColorStop(1,i),r}return"to"===e.inheritsColor?zo(this.to.options.color.border,e.opacity):zo(this.from.options.color.border,e.opacity)}return zo(e.color,e.opacity)}},{key:"_circle",value:function(t,e,r,n,i){this.enableShadow(t,e);var o=0,a=2*Math.PI;if(!this.options.selfReference.renderBehindTheNode){var s=this.options.selfReference.angle,l=this.options.selfReference.angle+Math.PI,g=this._findBorderPositionCircle(this.from,t,{x:r,y:n,low:s,high:l,direction:-1}),c=this._findBorderPositionCircle(this.from,t,{x:r,y:n,low:s,high:l,direction:1});o=Math.atan2(g.y-n,g.x-r),a=Math.atan2(c.y-n,c.x-r)}t.beginPath(),t.arc(r,n,i,o,a,!1),t.stroke(),this.disableShadow(t,e)}},{key:"getDistanceToEdge",value:function(t,e,r,n,i,o){if(this.from!=this.to)return this._getDistanceToEdge(t,e,r,n,i,o);var a=this._getCircleData(void 0),s=Yi(a,3),l=s[0],g=s[1],c=s[2],u=l-i,h=g-o;return Math.abs(Math.sqrt(u*u+h*h)-c)}},{key:"_getDistanceToLine",value:function(t,e,r,n,i,o){var a=r-t,s=n-e,l=((i-t)*a+(o-e)*s)/(a*a+s*s);l>1?l=1:l<0&&(l=0);var g=t+l*a-i,c=e+l*s-o;return Math.sqrt(g*g+c*c)}},{key:"getArrowData",value:function(t,e,r,n,i,o){var a,s,l,g,c,u,h,d=o.width;"from"===e?(l=this.from,g=this.to,c=o.fromArrowScale<0,u=Math.abs(o.fromArrowScale),h=o.fromArrowType):"to"===e?(l=this.to,g=this.from,c=o.toArrowScale<0,u=Math.abs(o.toArrowScale),h=o.toArrowType):(l=this.to,g=this.from,c=o.middleArrowScale<0,u=Math.abs(o.middleArrowScale),h=o.middleArrowType);var A=15*u+3*d;if(l!=g){var f=A/Gu(l.x-g.x,l.y-g.y);if("middle"!==e)if(!0===this.options.smooth.enabled){var C=this._findBorderPosition(l,t,{via:r}),p=this.getPoint(C.t+f*("from"===e?1:-1),r);a=Math.atan2(C.y-p.y,C.x-p.x),s=C}else a=Math.atan2(l.y-g.y,l.x-g.x),s=this._findBorderPosition(l,t);else{var I=(c?-f:f)/2,v=this.getPoint(.5+I,r),m=this.getPoint(.5-I,r);a=Math.atan2(v.y-m.y,v.x-m.x),s=this.getPoint(.5,r)}}else{var y=this._getCircleData(t),b=Yi(y,3),x=b[0],_=b[1],w=b[2];if("from"===e){var k=this.options.selfReference.angle,T=this.options.selfReference.angle+Math.PI,M=this._findBorderPositionCircle(this.from,t,{x:x,y:_,low:k,high:T,direction:-1});a=-2*M.t*Math.PI+1.5*Math.PI+.1*Math.PI,s=M}else if("to"===e){var E=this.options.selfReference.angle,O=this.options.selfReference.angle+Math.PI,S=this._findBorderPositionCircle(this.from,t,{x:x,y:_,low:E,high:O,direction:1});a=-2*S.t*Math.PI+1.5*Math.PI-1.1*Math.PI,s=S}else{var R=this.options.selfReference.angle/(2*Math.PI);s=this._pointOnCircle(x,_,w,R),a=-2*R*Math.PI+1.5*Math.PI+.1*Math.PI}}return{point:s,core:{x:s.x-.9*A*Math.cos(a),y:s.y-.9*A*Math.sin(a)},angle:a,length:A,type:h}}},{key:"drawArrowHead",value:function(t,e,r,n,i){t.strokeStyle=this.getColor(t,e),t.fillStyle=t.strokeStyle,t.lineWidth=e.width,nh.draw(t,i)&&(this.enableShadow(t,e),iu(t).call(t),this.disableShadow(t,e))}},{key:"enableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"drawBackground",value:function(t,e){if(!1!==e.background){var r={strokeStyle:t.strokeStyle,lineWidth:t.lineWidth,dashes:t.dashes};t.strokeStyle=e.backgroundColor,t.lineWidth=e.backgroundSize,this.setStrokeDashed(t,e.backgroundDashes),t.stroke(),t.strokeStyle=r.strokeStyle,t.lineWidth=r.lineWidth,t.dashes=r.dashes,this.setStrokeDashed(t,e.dashes)}}},{key:"setStrokeDashed",value:function(t,e){if(!1!==e)if(void 0!==t.setLineDash){var r=no(e)?e:[5,5];t.setLineDash(r)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else void 0!==t.setLineDash?t.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),t}();function sh(t,e){var r=Qi(t);if(_r){var n=_r(t);e&&(n=ui(n).call(n,function(e){return Vt(t,e).enumerable})),r.push.apply(r,n)}return r}function lh(t){for(var e=1;e<arguments.length;e++){var r,n=null!=arguments[e]?arguments[e]:{};if(e%2)Gn(r=sh(Object(n),!0)).call(r,function(e){bn(t,e,n[e])});else if(Nt)Et(t,Nt(n));else{var i;Gn(i=sh(Object(n))).call(i,function(e){Tt(t,e,Vt(n,e))})}}return t}var gh=function(t){Ug(r,ah);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){return Rl(this,r),e.call(this,t,n,i)}return Ll(r,[{key:"_findBorderPositionBezier",value:function(t,e){var r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._getViaCoordinates(),o=!1,a=1,s=0,l=this.to,g=this.options.endPointOffset?this.options.endPointOffset.to:0;t.id===this.from.id&&(l=this.from,o=!0,g=this.options.endPointOffset?this.options.endPointOffset.from:0),!1===this.options.arrowStrikethrough&&(g=0);var c=0;do{n=.5*(s+a),r=this.getPoint(n,i);var u=Math.atan2(l.y-r.y,l.x-r.x),h=l.distanceToBorder(e,u)+g-Math.sqrt(Math.pow(r.x-l.x,2)+Math.pow(r.y-l.y,2));if(Math.abs(h)<.2)break;h<0?!1===o?s=n:a=n:!1===o?a=n:s=n,++c}while(s<=a&&c<10);return lh(lh({},r),{},{t:n})}},{key:"_getDistanceToBezierEdge",value:function(t,e,r,n,i,o,a){var s,l,g,c,u,h=1e9,d=t,A=e;for(l=1;l<10;l++)g=.1*l,c=Math.pow(1-g,2)*t+2*g*(1-g)*a.x+Math.pow(g,2)*r,u=Math.pow(1-g,2)*e+2*g*(1-g)*a.y+Math.pow(g,2)*n,l>0&&(h=(s=this._getDistanceToLine(d,A,c,u,i,o))<h?s:h),d=c,A=u;return h}},{key:"_bezierCurve",value:function(t,e,r,n){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),null!=r&&null!=r.x?null!=n&&null!=n.x?t.bezierCurveTo(r.x,r.y,n.x,n.y,this.toPoint.x,this.toPoint.y):t.quadraticCurveTo(r.x,r.y,this.toPoint.x,this.toPoint.y):t.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(t,e),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),r}();var ch=function(t){Ug(r,gh);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){var o;return Rl(this,r),(o=e.call(this,t,n,i)).via=o.via,o._boundFunction=function(){o.positionBezierNode()},o._body.emitter.on("_repositionBezierNodes",o._boundFunction),o}return Ll(r,[{key:"setOptions",value:function(t){zu(Wg(r.prototype),"setOptions",this).call(this,t);var e=!1;this.options.physics!==t.physics&&(e=!0),this.options=t,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),!0===e&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],void 0===this.from||void 0===this.to||!1===this.options.physics||this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via&&(delete this._body.nodes[this.via.id],this.via=void 0,!0)}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var t="edgeId:"+this.id,e=this._body.functions.createNode({id:t,shape:"circle",physics:!0,hidden:!0});this._body.nodes[t]=e,this.via=e,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(t,e,r){this._bezierCurve(t,e,r)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.via;if(this.from===this.to){var r=this._getCircleData(),n=Yi(r,3),i=n[0],o=n[1],a=n[2],s=2*Math.PI*(1-t);return{x:i+a*Math.sin(s),y:o+a-a*(1-Math.cos(s))}}return{x:Math.pow(1-t,2)*this.fromPoint.x+2*t*(1-t)*e.x+Math.pow(t,2)*this.toPoint.x,y:Math.pow(1-t,2)*this.fromPoint.y+2*t*(1-t)*e.y+Math.pow(t,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e,this.via)}},{key:"_getDistanceToEdge",value:function(t,e,r,n,i,o){return this._getDistanceToBezierEdge(t,e,r,n,i,o,this.via)}}]),r}();var uh=function(t){Ug(r,gh);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){return Rl(this,r),e.call(this,t,n,i)}return Ll(r,[{key:"_line",value:function(t,e,r){this._bezierCurve(t,e,r)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var t,e,r=this.options.smooth.roundness,n=this.options.smooth.type,i=Math.abs(this.from.x-this.to.x),o=Math.abs(this.from.y-this.to.y);if("discrete"===n||"diagonalCross"===n){var a,s;a=s=i<=o?r*o:r*i,this.from.x>this.to.x&&(a=-a),this.from.y>=this.to.y&&(s=-s);var l=this.from.x+a,g=this.from.y+s;return"discrete"===n&&(i<=o?l=i<r*o?this.from.x:l:g=o<r*i?this.from.y:g),{x:l,y:g}}if("straightCross"===n){var c=(1-r)*i,u=(1-r)*o;return i<=o?(c=0,this.from.y<this.to.y&&(u=-u)):(this.from.x<this.to.x&&(c=-c),u=0),{x:this.to.x+c,y:this.to.y+u}}if("horizontal"===n){var h=(1-r)*i;return this.from.x<this.to.x&&(h=-h),{x:this.to.x+h,y:this.from.y}}if("vertical"===n){var d=(1-r)*o;return this.from.y<this.to.y&&(d=-d),{x:this.from.x,y:this.to.y+d}}if("curvedCW"===n){i=this.to.x-this.from.x,o=this.from.y-this.to.y;var A=Math.sqrt(i*i+o*o),f=Math.PI,C=(Math.atan2(o,i)+(.5*r+.5)*f)%(2*f);return{x:this.from.x+(.5*r+.5)*A*Math.sin(C),y:this.from.y+(.5*r+.5)*A*Math.cos(C)}}if("curvedCCW"===n){i=this.to.x-this.from.x,o=this.from.y-this.to.y;var p=Math.sqrt(i*i+o*o),I=Math.PI,v=(Math.atan2(o,i)+(.5*-r+.5)*I)%(2*I);return{x:this.from.x+(.5*r+.5)*p*Math.sin(v),y:this.from.y+(.5*r+.5)*p*Math.cos(v)}}t=e=i<=o?r*o:r*i,this.from.x>this.to.x&&(t=-t),this.from.y>=this.to.y&&(e=-e);var m=this.from.x+t,y=this.from.y+e;return i<=o?m=this.from.x<=this.to.x?this.to.x<m?this.to.x:m:this.to.x>m?this.to.x:m:y=this.from.y>=this.to.y?this.to.y>y?this.to.y:y:this.to.y<y?this.to.y:y,{x:m,y:y}}},{key:"_findBorderPosition",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._findBorderPositionBezier(t,e,r.via)}},{key:"_getDistanceToEdge",value:function(t,e,r,n,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(t,e,r,n,i,o,a)}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),r=t;return{x:Math.pow(1-r,2)*this.fromPoint.x+2*r*(1-r)*e.x+Math.pow(r,2)*this.toPoint.x,y:Math.pow(1-r,2)*this.fromPoint.y+2*r*(1-r)*e.y+Math.pow(r,2)*this.toPoint.y}}}]),r}();var hh=function(t){Ug(r,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){return Rl(this,r),e.call(this,t,n,i)}return Ll(r,[{key:"_line",value:function(t,e,r){var n=r[0],i=r[1];this._bezierCurve(t,e,n,i)}},{key:"_getViaCoordinates",value:function(){var t,e,r,n,i=this.from.x-this.to.x,o=this.from.y-this.to.y,a=this.options.smooth.roundness;return(Math.abs(i)>Math.abs(o)||!0===this.options.smooth.forceDirection||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(e=this.from.y,n=this.to.y,t=this.from.x-a*i,r=this.to.x+a*i):(e=this.from.y-a*o,n=this.to.y+a*o,t=this.from.x,r=this.to.x),[{x:t,y:e},{x:r,y:n}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e)}},{key:"_getDistanceToEdge",value:function(t,e,r,n,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates(),s=Yi(a,2),l=s[0],g=s[1];return this._getDistanceToBezierEdge2(t,e,r,n,i,o,l,g)}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),r=Yi(e,2),n=r[0],i=r[1],o=t,a=[Math.pow(1-o,3),3*o*Math.pow(1-o,2),3*Math.pow(o,2)*(1-o),Math.pow(o,3)];return{x:a[0]*this.fromPoint.x+a[1]*n.x+a[2]*i.x+a[3]*this.toPoint.x,y:a[0]*this.fromPoint.y+a[1]*n.y+a[2]*i.y+a[3]*this.toPoint.y}}}]),r}(function(t){Ug(r,gh);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){return Rl(this,r),e.call(this,t,n,i)}return Ll(r,[{key:"_getDistanceToBezierEdge2",value:function(t,e,r,n,i,o,a,s){for(var l=1e9,g=t,c=e,u=[0,0,0,0],h=1;h<10;h++){var d=.1*h;u[0]=Math.pow(1-d,3),u[1]=3*d*Math.pow(1-d,2),u[2]=3*Math.pow(d,2)*(1-d),u[3]=Math.pow(d,3);var A=u[0]*t+u[1]*a.x+u[2]*s.x+u[3]*r,f=u[0]*e+u[1]*a.y+u[2]*s.y+u[3]*n;if(h>0){var C=this._getDistanceToLine(g,c,A,f,i,o);l=C<l?C:l}g=A,c=f}return l}}]),r}());var dh=function(t){Ug(r,ah);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){return Rl(this,r),e.call(this,t,n,i)}return Ll(r,[{key:"_line",value:function(t,e){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),t.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(t){return{x:(1-t)*this.fromPoint.x+t*this.toPoint.x,y:(1-t)*this.fromPoint.y+t*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){var r=this.to,n=this.from;t.id===this.from.id&&(r=this.from,n=this.to);var i=Math.atan2(r.y-n.y,r.x-n.x),o=r.x-n.x,a=r.y-n.y,s=Math.sqrt(o*o+a*a),l=(s-t.distanceToBorder(e,i))/s;return{x:(1-l)*n.x+l*r.x,y:(1-l)*n.y+l*r.y,t:0}}},{key:"_getDistanceToEdge",value:function(t,e,r,n,i,o){return this._getDistanceToLine(t,e,r,n,i,o)}}]),r}(),Ah=function(){function t(e,r,n,i,o){if(Rl(this,t),void 0===r)throw new Error("No body provided");this.options=Ho(i),this.globalOptions=i,this.defaultOptions=o,this.body=r,this.imagelist=n,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new eu(this.body,this.options,!0),this.setOptions(e)}return Ll(t,[{key:"setOptions",value:function(e){if(e){var r=void 0!==e.physics&&this.options.physics!==e.physics||void 0!==e.hidden&&(this.options.hidden||!1)!==(e.hidden||!1)||void 0!==e.from&&this.options.from!==e.from||void 0!==e.to&&this.options.to!==e.to;t.parseOptions(this.options,e,!0,this.globalOptions),void 0!==e.id&&(this.id=e.id),void 0!==e.from&&(this.fromId=e.from),void 0!==e.to&&(this.toId=e.to),void 0!==e.title&&(this.title=e.title),void 0!==e.value&&(e.value=Hc(e.value));var n=[e,this.options,this.defaultOptions];return this.chooser=Wc("edge",n),this.updateLabelModule(e),r=this.updateEdgeType()||r,this._setInteractionWidths(),this.connect(),r}}},{key:"getFormattingValues",value:function(){var t=!0===this.options.arrows.to||!0===this.options.arrows.to.enabled,e=!0===this.options.arrows.from||!0===this.options.arrows.from.enabled,r=!0===this.options.arrows.middle||!0===this.options.arrows.middle.enabled,n=this.options.color.inherit,i={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:r,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:e,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:n?void 0:this.options.color.color,inheritsColor:n,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(!0===this.chooser){if(this.selected){var o=this.options.selectionWidth;"function"==typeof o?i.width=o(i.width):"number"==typeof o&&(i.width+=o),i.width=Math.max(i.width,.3/this.body.view.scale),i.color=this.options.color.highlight,i.shadow=this.options.shadow.enabled}else if(this.hover){var a=this.options.hoverWidth;"function"==typeof a?i.width=a(i.width):"number"==typeof a&&(i.width+=a),i.width=Math.max(i.width,.3/this.body.view.scale),i.color=this.options.color.hover,i.shadow=this.options.shadow.enabled}}else"function"==typeof this.chooser&&(this.chooser(i,this.options.id,this.selected,this.hover),void 0!==i.color&&(i.inheritsColor=!1),!1===i.shadow&&(i.shadowColor===this.options.shadow.color&&i.shadowSize===this.options.shadow.size&&i.shadowX===this.options.shadow.x&&i.shadowY===this.options.shadow.y||(i.shadow=!0)));else i.shadow=this.options.shadow.enabled,i.width=Math.max(i.width,.3/this.body.view.scale);return i}},{key:"updateLabelModule",value:function(t){var e=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,e),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=this.options.smooth,e=!1,r=!0;return void 0!==this.edgeType&&((this.edgeType instanceof ch&&!0===t.enabled&&"dynamic"===t.type||this.edgeType instanceof hh&&!0===t.enabled&&"cubicBezier"===t.type||this.edgeType instanceof uh&&!0===t.enabled&&"dynamic"!==t.type&&"cubicBezier"!==t.type||this.edgeType instanceof dh&&!1===t.type.enabled)&&(r=!1),!0===r&&(e=this.cleanup())),!0===r?!0===t.enabled?"dynamic"===t.type?(e=!0,this.edgeType=new ch(this.options,this.body,this.labelModule)):"cubicBezier"===t.type?this.edgeType=new hh(this.options,this.body,this.labelModule):this.edgeType=new uh(this.options,this.body,this.labelModule):this.edgeType=new dh(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),e}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,!0===this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,e,r){if(void 0!==this.options.value){var n=this.options.scaling.customScalingFunction(t,e,r,this.options.value),i=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var o=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+n*o}this.options.width=this.options.scaling.min+n*i}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"==typeof this.options.hoverWidth?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,"function"==typeof this.options.selectionWidth?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var e=this.getFormattingValues();if(!e.hidden){var r=this.edgeType.getViaNode();this.edgeType.drawLine(t,e,this.selected,this.hover,r),this.drawLabel(t,r)}}},{key:"drawArrows",value:function(t){var e=this.getFormattingValues();if(!e.hidden){var r=this.edgeType.getViaNode(),n={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,e.fromArrow&&(n.from=this.edgeType.getArrowData(t,"from",r,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.fromPoint=n.from.core),e.fromArrowSrc&&(n.from.image=this.imagelist.load(e.fromArrowSrc)),e.fromArrowImageWidth&&(n.from.imageWidth=e.fromArrowImageWidth),e.fromArrowImageHeight&&(n.from.imageHeight=e.fromArrowImageHeight)),e.toArrow&&(n.to=this.edgeType.getArrowData(t,"to",r,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.toPoint=n.to.core),e.toArrowSrc&&(n.to.image=this.imagelist.load(e.toArrowSrc)),e.toArrowImageWidth&&(n.to.imageWidth=e.toArrowImageWidth),e.toArrowImageHeight&&(n.to.imageHeight=e.toArrowImageHeight)),e.middleArrow&&(n.middle=this.edgeType.getArrowData(t,"middle",r,this.selected,this.hover,e),e.middleArrowSrc&&(n.middle.image=this.imagelist.load(e.middleArrowSrc)),e.middleArrowImageWidth&&(n.middle.imageWidth=e.middleArrowImageWidth),e.middleArrowImageHeight&&(n.middle.imageHeight=e.middleArrowImageHeight)),e.fromArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,n.from),e.middleArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,n.middle),e.toArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,n.to)}}},{key:"drawLabel",value:function(t,e){if(void 0!==this.options.label){var r,n=this.from,i=this.to;if(this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover),n.id!=i.id){this.labelModule.pointToSelf=!1,r=this.edgeType.getPoint(.5,e),t.save();var o=this._getRotation(t);0!=o.angle&&(t.translate(o.x,o.y),t.rotate(o.angle)),this.labelModule.draw(t,r.x,r.y,this.selected,this.hover),t.restore()}else{this.labelModule.pointToSelf=!0;var a=qc(t,this.options.selfReference.angle,this.options.selfReference.size,n);r=this._pointOnCircle(a.x,a.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(t,r.x,r.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(t){var e=[];if(this.labelModule.visible()){var r=this._getRotation();Yc(this.labelModule.getSize(),t,r)&&e.push({edgeId:this.id,labelId:0})}var n={left:t.x,top:t.y};return this.isOverlappingWith(n)&&e.push({edgeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){if(this.connected){var e=this.from.x,r=this.from.y,n=this.to.x,i=this.to.y,o=t.left,a=t.top;return this.edgeType.getDistanceToEdge(e,r,n,i,o,a)<10}return!1}},{key:"_getRotation",value:function(t){var e=this.edgeType.getViaNode(),r=this.edgeType.getPoint(.5,e);void 0!==t&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,r.x,r.y);var n={x:r.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible())return n;if("horizontal"===this.options.font.align)return n;var i=this.from.y-this.to.y,o=this.from.x-this.to.x,a=Math.atan2(i,o);return(a<-1&&o<0||a>0&&o<0)&&(a+=Math.PI),n.angle=a,n}},{key:"_pointOnCircle",value:function(t,e,r,n){return{x:t+r*Math.cos(n),y:e-r*Math.sin(n)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return void 0!==this.body.nodes[this.fromId]&&void 0!==this.body.nodes[this.toId]}}],[{key:"parseOptions",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Oo(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],t,e,r),void 0!==e.endPointOffset&&void 0!==e.endPointOffset.from&&(Ag(e.endPointOffset.from)?t.endPointOffset.from=e.endPointOffset.from:(t.endPointOffset.from=void 0!==n.endPointOffset.from?n.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),void 0!==e.endPointOffset&&void 0!==e.endPointOffset.to&&(Ag(e.endPointOffset.to)?t.endPointOffset.to=e.endPointOffset.to:(t.endPointOffset.to=void 0!==n.endPointOffset.to?n.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),Xc(e.label)?t.label=e.label:Xc(t.label)||(t.label=void 0),Wo(t,e,"smooth",n),Wo(t,e,"shadow",n),Wo(t,e,"background",n),void 0!==e.dashes&&null!==e.dashes?t.dashes=e.dashes:!0===r&&null===e.dashes&&(t.dashes=mn(n.dashes)),void 0!==e.scaling&&null!==e.scaling?(void 0!==e.scaling.min&&(t.scaling.min=e.scaling.min),void 0!==e.scaling.max&&(t.scaling.max=e.scaling.max),Wo(t.scaling,e.scaling,"label",n.scaling)):!0===r&&null===e.scaling&&(t.scaling=mn(n.scaling)),void 0!==e.arrows&&null!==e.arrows)if("string"==typeof e.arrows){var o=e.arrows.toLowerCase();t.arrows.to.enabled=-1!=bi(o).call(o,"to"),t.arrows.middle.enabled=-1!=bi(o).call(o,"middle"),t.arrows.from.enabled=-1!=bi(o).call(o,"from")}else{if("object"!==ao(e.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Sg(e.arrows));Wo(t.arrows,e.arrows,"to",n.arrows),Wo(t.arrows,e.arrows,"middle",n.arrows),Wo(t.arrows,e.arrows,"from",n.arrows)}else!0===r&&null===e.arrows&&(t.arrows=mn(n.arrows));if(void 0!==e.color&&null!==e.color){var a=To(e.color)?{color:e.color,highlight:e.color,hover:e.color,inherit:!1,opacity:1}:e.color,s=t.color;if(i)Ro(s,n.color,!1,r);else for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&delete s[l];if(To(s))s.color=s,s.highlight=s,s.hover=s,s.inherit=!1,void 0===a.opacity&&(s.opacity=1);else{var g=!1;void 0!==a.color&&(s.color=a.color,g=!0),void 0!==a.highlight&&(s.highlight=a.highlight,g=!0),void 0!==a.hover&&(s.hover=a.hover,g=!0),void 0!==a.inherit&&(s.inherit=a.inherit),void 0!==a.opacity&&(s.opacity=Math.min(1,Math.max(0,a.opacity))),!0===g?s.inherit=!1:void 0===s.inherit&&(s.inherit="from")}}else!0===r&&null===e.color&&(t.color=Ho(n.color));!0===r&&null===e.font&&(t.font=Ho(n.font)),Object.prototype.hasOwnProperty.call(e,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),t.selfReference.size=e.selfReferenceSize)}}]),t}(),fh=function(){function t(e,r,n){var i,o=this;Rl(this,t),this.body=e,this.images=r,this.groups=n,this.body.functions.createEdge=K(i=this.create).call(i,this),this.edgesListeners={add:function(t,e){o.add(e.items)},update:function(t,e){o.update(e.items)},remove:function(t,e){o.remove(e.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,r,n){if(e===t)return.5;var i=1/(e-t);return Math.max(0,(n-t)*i)}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Ro(this.options,this.defaultOptions),this.bindEventListeners()}return Ll(t,[{key:"bindEventListeners",value:function(){var t,e,r=this;this.body.emitter.on("_forceDisableDynamicCurves",function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"dynamic"===t&&(t="continuous");var n=!1;for(var i in r.body.edges)if(Object.prototype.hasOwnProperty.call(r.body.edges,i)){var o=r.body.edges[i],a=r.body.data.edges.get(i);if(null!=a){var s=a.smooth;void 0!==s&&!0===s.enabled&&"dynamic"===s.type&&(void 0===t?o.setOptions({smooth:!1}):o.setOptions({smooth:{type:t}}),n=!0)}}!0===e&&!0===n&&r.body.emitter.emit("_dataChanged")}),this.body.emitter.on("_dataUpdated",function(){r.reconnectEdges()}),this.body.emitter.on("refreshEdges",K(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",K(e=this.refresh).call(e,this)),this.body.emitter.on("destroy",function(){Po(r.edgesListeners,function(t,e){r.body.data.edges&&r.body.data.edges.off(e,t)}),delete r.body.functions.createEdge,delete r.edgesListeners.add,delete r.edgesListeners.update,delete r.edgesListeners.remove,delete r.edgesListeners})}},{key:"setOptions",value:function(t){if(void 0!==t){Ah.parseOptions(this.options,t,!0,this.defaultOptions,!0);var e=!1;if(void 0!==t.smooth)for(var r in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,r)&&(e=this.body.edges[r].updateEdgeType()||e);if(void 0!==t.font)for(var n in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,n)&&this.body.edges[n].updateLabelModule();void 0===t.hidden&&void 0===t.physics&&!0!==e||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.body.data.edges;if(zc("id",t))this.body.data.edges=t;else if(no(t))this.body.data.edges=new Lc,this.body.data.edges.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.edges=new Lc}if(n&&Po(this.edgesListeners,function(t,e){n.off(e,t)}),this.body.edges={},this.body.data.edges){Po(this.edgesListeners,function(t,r){e.body.data.edges.on(r,t)});var i=this.body.data.edges.getIds();this.add(i,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===r&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.body.edges,n=this.body.data.edges,i=0;i<t.length;i++){var o=t[i],a=r[o];a&&a.disconnect();var s=n.get(o,{showInternalIds:!0});r[o]=this.create(s)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var e=this.body.edges,r=this.body.data.edges,n=!1,i=0;i<t.length;i++){var o=t[i],a=r.get(o),s=e[o];void 0!==s?(s.disconnect(),n=s.setOptions(a)||n,s.connect()):(this.body.edges[o]=this.create(a),n=!0)}!0===n?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0!==t.length){var r=this.body.edges;Po(t,function(t){var e=r[t];void 0!==e&&e.remove()}),e&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var t=this;Po(this.body.edges,function(e,r){var n=t.body.data.edges.get(r);void 0!==n&&e.setOptions(n)})}},{key:"create",value:function(t){return new Ah(t,this.body,this.images,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var t,e=this.body.nodes,r=this.body.edges;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t].edges=[]);for(t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=r[t];n.from=null,n.to=null,n.connect()}}},{key:"getConnectedNodes",value:function(t){var e=[];if(void 0!==this.body.edges[t]){var r=this.body.edges[t];void 0!==r.fromId&&e.push(r.fromId),void 0!==r.toId&&e.push(r.toId)}return e}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var t=this,e=[];Po(this.body.edges,function(r,n){var i=t.body.nodes[r.toId],o=t.body.nodes[r.fromId];void 0!==i&&!0===i.isCluster||void 0!==o&&!0===o.isCluster||void 0!==i&&void 0!==o||e.push(n)}),this.remove(e,!1)}},{key:"_addMissingEdges",value:function(){var t=this.body.data.edges;if(null!=t){var e=this.body.edges,r=[];Gn(t).call(t,function(t,n){void 0===e[n]&&r.push(n)}),this.add(r,!0)}}}]),t}(),Ch=function(){function t(e,r,n){Rl(this,t),this.body=e,this.physicsBody=r,this.barnesHutTree,this.setOptions(n),this._rng=yo("BARNES HUT SOLVER")}return Ll(t,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&this.physicsBody.physicsNodeIndices.length>0){var t,e=this.body.nodes,r=this.physicsBody.physicsNodeIndices,n=r.length,i=this._formBarnesHutTree(e,r);this.barnesHutTree=i;for(var o=0;o<n;o++)(t=e[r[o]]).options.mass>0&&this._getForceContributions(i.root,t)}}},{key:"_getForceContributions",value:function(t,e){this._getForceContribution(t.children.NW,e),this._getForceContribution(t.children.NE,e),this._getForceContribution(t.children.SW,e),this._getForceContribution(t.children.SE,e)}},{key:"_getForceContribution",value:function(t,e){if(t.childrenCount>0){var r=t.centerOfMass.x-e.x,n=t.centerOfMass.y-e.y,i=Math.sqrt(r*r+n*n);i*t.calcSize>this.thetaInversed?this._calculateForces(i,r,n,e,t):4===t.childrenCount?this._getForceContributions(t,e):t.children.data.id!=e.id&&this._calculateForces(i,r,n,e,t)}}},{key:"_calculateForces",value:function(t,e,r,n,i){0===t&&(e=t=.1),this.overlapAvoidanceFactor<1&&n.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*n.shape.radius,t-n.shape.radius));var o=this.options.gravitationalConstant*i.mass*n.options.mass/Math.pow(t,3),a=e*o,s=r*o;this.physicsBody.forces[n.id].x+=a,this.physicsBody.forces[n.id].y+=s}},{key:"_formBarnesHutTree",value:function(t,e){for(var r,n=e.length,i=t[e[0]].x,o=t[e[0]].y,a=t[e[0]].x,s=t[e[0]].y,l=1;l<n;l++){var g=t[e[l]],c=g.x,u=g.y;g.options.mass>0&&(c<i&&(i=c),c>a&&(a=c),u<o&&(o=u),u>s&&(s=u))}var h=Math.abs(a-i)-Math.abs(s-o);h>0?(o-=.5*h,s+=.5*h):(i+=.5*h,a-=.5*h);var d=Math.max(1e-5,Math.abs(a-i)),A=.5*d,f=.5*(i+a),C=.5*(o+s),p={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:f-A,maxX:f+A,minY:C-A,maxY:C+A},size:d,calcSize:1/d,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(p.root);for(var I=0;I<n;I++)(r=t[e[I]]).options.mass>0&&this._placeInTree(p.root,r);return p}},{key:"_updateBranchMass",value:function(t,e){var r=t.centerOfMass,n=t.mass+e.options.mass,i=1/n;r.x=r.x*t.mass+e.x*e.options.mass,r.x*=i,r.y=r.y*t.mass+e.y*e.options.mass,r.y*=i,t.mass=n;var o=Math.max(Math.max(e.height,e.radius),e.width);t.maxWidth=t.maxWidth<o?o:t.maxWidth}},{key:"_placeInTree",value:function(t,e,r){1==r&&void 0!==r||this._updateBranchMass(t,e);var n,i=t.children.NW.range;n=i.maxX>e.x?i.maxY>e.y?"NW":"SW":i.maxY>e.y?"NE":"SE",this._placeInRegion(t,e,n)}},{key:"_placeInRegion",value:function(t,e,r){var n=t.children[r];switch(n.childrenCount){case 0:n.children.data=e,n.childrenCount=1,this._updateBranchMass(n,e);break;case 1:n.children.data.x===e.x&&n.children.data.y===e.y?(e.x+=this._rng(),e.y+=this._rng()):(this._splitBranch(n),this._placeInTree(n,e));break;case 4:this._placeInTree(n,e)}}},{key:"_splitBranch",value:function(t){var e=null;1===t.childrenCount&&(e=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),null!=e&&this._placeInTree(t,e)}},{key:"_insertRegion",value:function(t,e){var r,n,i,o,a=.5*t.size;switch(e){case"NW":r=t.range.minX,n=t.range.minX+a,i=t.range.minY,o=t.range.minY+a;break;case"NE":r=t.range.minX+a,n=t.range.maxX,i=t.range.minY,o=t.range.minY+a;break;case"SW":r=t.range.minX,n=t.range.minX+a,i=t.range.minY+a,o=t.range.maxY;break;case"SE":r=t.range.minX+a,n=t.range.maxX,i=t.range.minY+a,o=t.range.maxY}t.children[e]={centerOfMass:{x:0,y:0},mass:0,range:{minX:r,maxX:n,minY:i,maxY:o},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,e){void 0!==this.barnesHutTree&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,e))}},{key:"_drawBranch",value:function(t,e,r){void 0===r&&(r="#FF0000"),4===t.childrenCount&&(this._drawBranch(t.children.NW,e),this._drawBranch(t.children.NE,e),this._drawBranch(t.children.SE,e),this._drawBranch(t.children.SW,e)),e.strokeStyle=r,e.beginPath(),e.moveTo(t.range.minX,t.range.minY),e.lineTo(t.range.maxX,t.range.minY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.minY),e.lineTo(t.range.maxX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.maxY),e.lineTo(t.range.minX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.minX,t.range.maxY),e.lineTo(t.range.minX,t.range.minY),e.stroke()}}]),t}(),ph=function(){function t(e,r,n){Rl(this,t),this._rng=yo("REPULSION SOLVER"),this.body=e,this.physicsBody=r,this.setOptions(n)}return Ll(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,r,n,i,o,a,s,l=this.body.nodes,g=this.physicsBody.physicsNodeIndices,c=this.physicsBody.forces,u=this.options.nodeDistance,h=-2/3/u,d=0;d<g.length-1;d++){a=l[g[d]];for(var A=d+1;A<g.length;A++)t=(s=l[g[A]]).x-a.x,e=s.y-a.y,0===(r=Math.sqrt(t*t+e*e))&&(t=r=.1*this._rng()),r<2*u&&(o=r<.5*u?1:h*r+1.3333333333333333,n=t*(o/=r),i=e*o,c[a.id].x-=n,c[a.id].y-=i,c[s.id].x+=n,c[s.id].y+=i)}}}]),t}(),Ih=function(){function t(e,r,n){Rl(this,t),this.body=e,this.physicsBody=r,this.setOptions(n)}return Ll(t,[{key:"setOptions",value:function(t){this.options=t,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}},{key:"solve",value:function(){for(var t=this.body.nodes,e=this.physicsBody.physicsNodeIndices,r=this.physicsBody.forces,n=this.options.nodeDistance,i=0;i<e.length-1;i++)for(var o=t[e[i]],a=i+1;a<e.length;a++){var s=t[e[a]];if(o.level===s.level){var l=n+this.overlapAvoidanceFactor*((o.shape.radius||0)/2+(s.shape.radius||0)/2),g=s.x-o.x,c=s.y-o.y,u=Math.sqrt(g*g+c*c),h=void 0;h=u<l?-Math.pow(.05*u,2)+Math.pow(.05*l,2):0,0!==u&&(h/=u);var d=g*h,A=c*h;r[o.id].x-=d,r[o.id].y-=A,r[s.id].x+=d,r[s.id].y+=A}}}}]),t}(),vh=function(){function t(e,r,n){Rl(this,t),this.body=e,this.physicsBody=r,this.setOptions(n)}return Ll(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,r,n,i,o=this.physicsBody.physicsEdgeIndices,a=this.body.edges,s=0;s<o.length;s++)!0===(e=a[o[s]]).connected&&e.toId!==e.fromId&&void 0!==this.body.nodes[e.toId]&&void 0!==this.body.nodes[e.fromId]&&(void 0!==e.edgeType.via?(t=void 0===e.options.length?this.options.springLength:e.options.length,r=e.to,n=e.edgeType.via,i=e.from,this._calculateSpringForce(r,n,.5*t),this._calculateSpringForce(n,i,.5*t)):(t=void 0===e.options.length?1.5*this.options.springLength:e.options.length,this._calculateSpringForce(e.from,e.to,t)))}},{key:"_calculateSpringForce",value:function(t,e,r){var n=t.x-e.x,i=t.y-e.y,o=Math.max(Math.sqrt(n*n+i*i),.01),a=this.options.springConstant*(r-o)/o,s=n*a,l=i*a;void 0!==this.physicsBody.forces[t.id]&&(this.physicsBody.forces[t.id].x+=s,this.physicsBody.forces[t.id].y+=l),void 0!==this.physicsBody.forces[e.id]&&(this.physicsBody.forces[e.id].x-=s,this.physicsBody.forces[e.id].y-=l)}}]),t}(),mh=function(){function t(e,r,n){Rl(this,t),this.body=e,this.physicsBody=r,this.setOptions(n)}return Ll(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,r,n,i,o,a,s,l,g,c=this.body.edges,u=this.physicsBody.physicsEdgeIndices,h=this.physicsBody.physicsNodeIndices,d=this.physicsBody.forces,A=0;A<h.length;A++){var f=h[A];d[f].springFx=0,d[f].springFy=0}for(var C=0;C<u.length;C++)!0===(e=c[u[C]]).connected&&(t=void 0===e.options.length?this.options.springLength:e.options.length,r=e.from.x-e.to.x,n=e.from.y-e.to.y,s=0===(s=Math.sqrt(r*r+n*n))?.01:s,i=r*(a=this.options.springConstant*(t-s)/s),o=n*a,e.to.level!=e.from.level?(void 0!==d[e.toId]&&(d[e.toId].springFx-=i,d[e.toId].springFy-=o),void 0!==d[e.fromId]&&(d[e.fromId].springFx+=i,d[e.fromId].springFy+=o)):(void 0!==d[e.toId]&&(d[e.toId].x-=.5*i,d[e.toId].y-=.5*o),void 0!==d[e.fromId]&&(d[e.fromId].x+=.5*i,d[e.fromId].y+=.5*o)));a=1;for(var p=0;p<h.length;p++){var I=h[p];l=Math.min(a,Math.max(-a,d[I].springFx)),g=Math.min(a,Math.max(-a,d[I].springFy)),d[I].x+=l,d[I].y+=g}for(var v=0,m=0,y=0;y<h.length;y++){var b=h[y];v+=d[b].x,m+=d[b].y}for(var x=v/h.length,_=m/h.length,w=0;w<h.length;w++){var k=h[w];d[k].x-=x,d[k].y-=_}}}]),t}(),yh=function(){function t(e,r,n){Rl(this,t),this.body=e,this.physicsBody=r,this.setOptions(n)}return Ll(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,r,n,i=this.body.nodes,o=this.physicsBody.physicsNodeIndices,a=this.physicsBody.forces,s=0;s<o.length;s++)t=-(n=i[o[s]]).x,e=-n.y,r=Math.sqrt(t*t+e*e),this._calculateForces(r,t,e,a,n)}},{key:"_calculateForces",value:function(t,e,r,n,i){var o=0===t?0:this.options.centralGravity/t;n[i.id].x=e*o,n[i.id].y=r*o}}]),t}();var bh=function(t){Ug(r,Ch);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){var o;return Rl(this,r),(o=e.call(this,t,n,i))._rng=yo("FORCE ATLAS 2 BASED REPULSION SOLVER"),o}return Ll(r,[{key:"_calculateForces",value:function(t,e,r,n,i){0===t&&(e=t=.1*this._rng()),this.overlapAvoidanceFactor<1&&n.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*n.shape.radius,t-n.shape.radius));var o=n.edges.length+1,a=this.options.gravitationalConstant*i.mass*n.options.mass*o/Math.pow(t,2),s=e*a,l=r*a;this.physicsBody.forces[n.id].x+=s,this.physicsBody.forces[n.id].y+=l}}]),r}();var xh=function(t){Ug(r,yh);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i){return Rl(this,r),e.call(this,t,n,i)}return Ll(r,[{key:"_calculateForces",value:function(t,e,r,n,i){if(t>0){var o=i.edges.length+1,a=this.options.centralGravity*o*i.options.mass;n[i.id].x=e*a,n[i.id].y=r*a}}}]),r}(),_h=function(){function t(e){Rl(this,t),this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},It(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return Ll(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",function(){t.initPhysics()}),this.body.emitter.on("_layoutFailed",function(){t.layoutFailed=!0}),this.body.emitter.on("resetPhysics",function(){t.stopSimulation(),t.ready=!1}),this.body.emitter.on("disablePhysics",function(){t.physicsEnabled=!1,t.stopSimulation()}),this.body.emitter.on("restorePhysics",function(){t.setOptions(t.options),!0===t.ready&&t.startSimulation()}),this.body.emitter.on("startSimulation",function(){!0===t.ready&&t.startSimulation()}),this.body.emitter.on("stopSimulation",function(){t.stopSimulation()}),this.body.emitter.on("destroy",function(){t.stopSimulation(!1),t.body.emitter.off()}),this.body.emitter.on("_dataChanged",function(){t.updatePhysicsData()})}},{key:"setOptions",value:function(t){if(void 0!==t)if(!1===t)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(!0===t)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,So(["stabilization"],this.options,t),Wo(this.options,t,"stabilization"),void 0===t.enabled&&(this.options.enabled=!0),!1===this.options.enabled&&(this.physicsEnabled=!1,this.stopSimulation());var e=this.options.wind;e&&(("number"!=typeof e.x||fg(e.x))&&(e.x=0),("number"!=typeof e.y||fg(e.y))&&(e.y=0)),this.timestep=this.options.timestep}this.init()}},{key:"init",value:function(){var t;"forceAtlas2Based"===this.options.solver?(t=this.options.forceAtlas2Based,this.nodesSolver=new bh(this.body,this.physicsBody,t),this.edgesSolver=new vh(this.body,this.physicsBody,t),this.gravitySolver=new xh(this.body,this.physicsBody,t)):"repulsion"===this.options.solver?(t=this.options.repulsion,this.nodesSolver=new ph(this.body,this.physicsBody,t),this.edgesSolver=new vh(this.body,this.physicsBody,t),this.gravitySolver=new yh(this.body,this.physicsBody,t)):"hierarchicalRepulsion"===this.options.solver?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new Ih(this.body,this.physicsBody,t),this.edgesSolver=new mh(this.body,this.physicsBody,t),this.gravitySolver=new yh(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new Ch(this.body,this.physicsBody,t),this.edgesSolver=new vh(this.body,this.physicsBody,t),this.gravitySolver=new yh(this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?!0===this.options.stabilization.enabled?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){var t;!0===this.physicsEnabled&&!0===this.options.enabled?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=K(t=this.simulationStep).call(t,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.stabilized=!0,!0===t&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,!0===t&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=Xi();this.physicsTick(),(Xi()-t<.4*this.simulationInterval||!0===this.runDoubleSpeed)&&!1===this.stabilized&&(this.physicsTick(),this.runDoubleSpeed=!0),!0===this.stabilized&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||!0===this.startedStabilization)&&og(function(){t.body.emitter.emit("stabilized",{iterations:e}),t.startedStabilization=!1,t.stabilizationIterations=0},0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){!0===this._evaluateStepQuality()?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}},{key:"physicsTick",value:function(){this._startStabilizing(),!0!==this.stabilized&&(!0===this.adaptiveTimestep&&!0===this.adaptiveTimestepEnabled?(this.adaptiveCounter%this.adaptiveInterval==0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),!0===this.stabilized&&this.revert(),this.stabilizationIterations++)}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,e=this.body.edges;for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&!0===t[r].options.physics&&this.physicsBody.physicsNodeIndices.push(t[r].id);for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&!0===e[n].options.physics&&this.physicsBody.physicsEdgeIndices.push(e[n].id);for(var i=0;i<this.physicsBody.physicsNodeIndices.length;i++){var o=this.physicsBody.physicsNodeIndices[i];this.physicsBody.forces[o]={x:0,y:0},void 0===this.physicsBody.velocities[o]&&(this.physicsBody.velocities[o]={x:0,y:0})}for(var a in this.physicsBody.velocities)void 0===t[a]&&delete this.physicsBody.velocities[a]}},{key:"revert",value:function(){var t=Qi(this.previousStates),e=this.body.nodes,r=this.physicsBody.velocities;this.referenceState={};for(var n=0;n<t.length;n++){var i=t[n];void 0!==e[i]?!0===e[i].options.physics&&(this.referenceState[i]={positions:{x:e[i].x,y:e[i].y}},r[i].x=this.previousStates[i].vx,r[i].y=this.previousStates[i].vy,e[i].x=this.previousStates[i].x,e[i].y=this.previousStates[i].y):delete this.previousStates[i]}}},{key:"_evaluateStepQuality",value:function(){var t,e,r=this.body.nodes,n=this.referenceState;for(var i in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,i)&&void 0!==r[i]&&(t=r[i].x-n[i].positions.x,e=r[i].y-n[i].positions.y,Math.sqrt(Math.pow(t,2)+Math.pow(e,2))>.3))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,e=0,r=0,n=0;n<t.length;n++){var i=t[n],o=this._performStep(i);e=Math.max(e,o),r+=o}this.adaptiveTimestepEnabled=r/t.length<5,this.stabilized=e<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(t,e,r){t+=(e-this.modelOptions.damping*t)/r*this.timestep;var n=this.options.maxVelocity||1e9;return Math.abs(t)>n&&(t=t>0?n:-n),t}},{key:"_performStep",value:function(t){var e=this.body.nodes[t],r=this.physicsBody.forces[t];this.options.wind&&(r.x+=this.options.wind.x,r.y+=this.options.wind.y);var n=this.physicsBody.velocities[t];return this.previousStates[t]={x:e.x,y:e.y,vx:n.x,vy:n.y},!1===e.options.fixed.x?(n.x=this.calculateComponentVelocity(n.x,r.x,e.options.mass),e.x+=n.x*this.timestep):(r.x=0,n.x=0),!1===e.options.fixed.y?(n.y=this.calculateComponentVelocity(n.y,r.y,e.options.mass),e.y+=n.y*this.timestep):(r.y=0,n.y=0),Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&t[e].x&&t[e].y){var r=t[e].options.fixed;this.freezeCache[e]={x:r.x,y:r.y},r.x=!0,r.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&void 0!==this.freezeCache[e]&&(t[e].options.fixed.x=this.freezeCache[e].x,t[e].options.fixed.y=this.freezeCache[e].y);this.freezeCache={}}},{key:"stabilize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.stabilization.iterations;"number"!=typeof e&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),0!==this.physicsBody.physicsNodeIndices.length?(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,!0===this.options.stabilization.onlyDynamicEdges&&this._freezeNodes(),this.stabilizationIterations=0,og(function(){return t._stabilizationBatch()},0)):this.ready=!0}},{key:"_startStabilizing",value:function(){return!0!==this.startedStabilization&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var t=this,e=function(){return!1===t.stabilized&&t.stabilizationIterations<t.targetIterations},r=function(){t.body.emitter.emit("stabilizationProgress",{iterations:t.stabilizationIterations,total:t.targetIterations})};this._startStabilizing()&&r();for(var n,i=0;e()&&i<this.options.stabilization.updateInterval;)this.physicsTick(),i++;r(),e()?og(K(n=this._stabilizationBatch).call(n,this),0):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),!0===this.options.stabilization.fit&&this.body.emitter.emit("fit"),!0===this.options.stabilization.onlyDynamicEdges&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),!0===this.stabilized?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var e=0;e<this.physicsBody.physicsNodeIndices.length;e++){var r=this.physicsBody.physicsNodeIndices[e],n=this.body.nodes[r],i=this.physicsBody.forces[r],o=Math.sqrt(Math.pow(i.x,2)+Math.pow(i.x,2)),a=Math.min(Math.max(5,o),15),s=3*a,l=Go((180-180*Math.min(1,Math.max(0,.03*o)))/360,1,1),g={x:n.x+20*i.x,y:n.y+20*i.y};t.lineWidth=a,t.strokeStyle=l,t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(g.x,g.y),t.stroke();var c=Math.atan2(i.y,i.x);t.fillStyle=l,nh.draw(t,{type:"arrow",point:g,angle:c,length:s}),iu(t).call(t)}}}]),t}(),wh=[].reverse,kh=[1,2];Z({target:"Array",proto:!0,forced:String(kh)===String(kh.reverse())},{reverse:function(){return Zt(this)&&(this.length=this.length),wh.call(this)}});var Th=X("Array").reverse,Mh=Array.prototype,Eh=function(t){var e=t.reverse;return t===Mh||t instanceof Array&&e===Mh.reverse?Th:e},Oh=function(){function t(){Rl(this,t)}return Ll(t,null,[{key:"getRange",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=1e9,i=-1e9,o=1e9,a=-1e9;if(r.length>0)for(var s=0;s<r.length;s++)o>(e=t[r[s]]).shape.boundingBox.left&&(o=e.shape.boundingBox.left),a<e.shape.boundingBox.right&&(a=e.shape.boundingBox.right),n>e.shape.boundingBox.top&&(n=e.shape.boundingBox.top),i<e.shape.boundingBox.bottom&&(i=e.shape.boundingBox.bottom);return 1e9===o&&-1e9===a&&1e9===n&&-1e9===i&&(n=0,i=0,o=0,a=0),{minX:o,maxX:a,minY:n,maxY:i}}},{key:"getRangeCore",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=1e9,i=-1e9,o=1e9,a=-1e9;if(r.length>0)for(var s=0;s<r.length;s++)o>(e=t[r[s]]).x&&(o=e.x),a<e.x&&(a=e.x),n>e.y&&(n=e.y),i<e.y&&(i=e.y);return 1e9===o&&-1e9===a&&1e9===n&&-1e9===i&&(n=0,i=0,o=0,a=0),{minX:o,maxX:a,minY:n,maxY:i}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,e){var r={};return void 0===e||"node"===e?(Ro(r,t.options,!0),r.x=t.x,r.y=t.y,r.amountOfConnections=t.edges.length):Ro(r,t.options,!0),r}}]),t}();var Sh=function(t){Ug(r,Su);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}(r);function r(t,n,i,o,a,s){var l;return Rl(this,r),(l=e.call(this,t,n,i,o,a,s)).isCluster=!0,l.containedNodes={},l.containedEdges={},l}return Ll(r,[{key:"_openChildCluster",value:function(t){var e=this,r=this.body.nodes[t];if(void 0===this.containedNodes[t])throw new Error("node with id: "+t+" not in current cluster");if(!r.isCluster)throw new Error("node with id: "+t+" is not a cluster");delete this.containedNodes[t],Po(r.edges,function(t){delete e.containedEdges[t.id]}),Po(r.containedNodes,function(t,r){e.containedNodes[r]=t}),r.containedNodes={},Po(r.containedEdges,function(t,r){e.containedEdges[r]=t}),r.containedEdges={},Po(r.edges,function(t){Po(e.edges,function(r){var n,i,o=bi(n=r.clusteringEdgeReplacingIds).call(n,t.id);-1!==o&&(Po(t.clusteringEdgeReplacingIds,function(t){r.clusteringEdgeReplacingIds.push(t),e.body.edges[t].edgeReplacedById=r.id}),ea(i=r.clusteringEdgeReplacingIds).call(i,o,1))})}),r.edges=[]}}]),r}(),Rh=function(){function t(e){var r=this;Rl(this,t),this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},It(this.options,this.defaultOptions),this.body.emitter.on("_resetData",function(){r.clusteredNodes={},r.clusteredEdges={}})}return Ll(t,[{key:"clusterByHubsize",value:function(t,e){void 0===t?t=this._getHubSize():"object"===ao(t)&&(e=this._checkOptions(t),t=this._getHubSize());for(var r=[],n=0;n<this.body.nodeIndices.length;n++){var i=this.body.nodes[this.body.nodeIndices[n]];i.edges.length>=t&&r.push(i.id)}for(var o=0;o<r.length;o++)this.clusterByConnection(r[o],e,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===e.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);var n={},i={};Po(this.body.nodes,function(r,o){r.options&&!0===e.joinCondition(r.options)&&(n[o]=r,Po(r.edges,function(e){void 0===t.clusteredEdges[e.id]&&(i[e.id]=e)}))}),this._cluster(n,i,e,r)}},{key:"clusterByEdgeCount",value:function(t,e){var r=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=this._checkOptions(e);for(var i,o,a,s=[],l={},g=function(n){var g={},c={},u=r.body.nodeIndices[n],h=r.body.nodes[u];if(void 0===l[u]){a=0,o=[];for(var d=0;d<h.edges.length;d++)i=h.edges[d],void 0===r.clusteredEdges[i.id]&&(i.toId!==i.fromId&&a++,o.push(i));if(a===t){for(var A=function(t){if(void 0===e.joinCondition||null===e.joinCondition)return!0;var r=Oh.cloneOptions(t);return e.joinCondition(r)},f=!0,C=0;C<o.length;C++){i=o[C];var p=r._getConnectedId(i,u);if(!A(h)){f=!1;break}c[i.id]=i,g[u]=h,g[p]=r.body.nodes[p],l[u]=!0}if(Qi(g).length>0&&Qi(c).length>0&&!0===f){var I=function(){for(var t=0;t<s.length;++t)for(var e in g)if(void 0!==s[t].nodes[e])return s[t]}();if(void 0!==I){for(var v in g)void 0===I.nodes[v]&&(I.nodes[v]=g[v]);for(var m in c)void 0===I.edges[m]&&(I.edges[m]=c[m])}else s.push({nodes:g,edges:c})}}}},c=0;c<this.body.nodeIndices.length;c++)g(c);for(var u=0;u<s.length;u++)this._cluster(s[u].nodes,s[u].edges,e,!1);!0===n&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(1,t,e)}},{key:"clusterBridges",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(2,t,e)}},{key:"clusterByConnection",value:function(t,e){var r,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[t])throw new Error("The nodeId given to clusterByConnection does not exist!");var i=this.body.nodes[t];void 0===(e=this._checkOptions(e,i)).clusterNodeProperties.x&&(e.clusterNodeProperties.x=i.x),void 0===e.clusterNodeProperties.y&&(e.clusterNodeProperties.y=i.y),void 0===e.clusterNodeProperties.fixed&&(e.clusterNodeProperties.fixed={},e.clusterNodeProperties.fixed.x=i.options.fixed.x,e.clusterNodeProperties.fixed.y=i.options.fixed.y);var o={},a={},s=i.id,l=Oh.cloneOptions(i);o[s]=i;for(var g=0;g<i.edges.length;g++){var c=i.edges[g];if(void 0===this.clusteredEdges[c.id]){var u=this._getConnectedId(c,s);if(void 0===this.clusteredNodes[u])if(u!==s)if(void 0===e.joinCondition)a[c.id]=c,o[u]=this.body.nodes[u];else{var h=Oh.cloneOptions(this.body.nodes[u]);!0===e.joinCondition(l,h)&&(a[c.id]=c,o[u]=this.body.nodes[u])}else a[c.id]=c}}var d=ro(r=Qi(o)).call(r,function(t){return o[t].id});for(var A in o)if(Object.prototype.hasOwnProperty.call(o,A))for(var f=o[A],C=0;C<f.edges.length;C++){var p=f.edges[C];bi(d).call(d,this._getConnectedId(p,f.id))>-1&&(a[p.id]=p)}this._cluster(o,a,e,n)}},{key:"_createClusterEdges",value:function(t,e,r,n){for(var i,o,a,s,l,g,c=Qi(t),u=[],h=0;h<c.length;h++){a=t[o=c[h]];for(var d=0;d<a.edges.length;d++)i=a.edges[d],void 0===this.clusteredEdges[i.id]&&(i.toId==i.fromId?e[i.id]=i:i.toId==o?(s=r.id,g=l=i.fromId):(s=i.toId,l=r.id,g=s),void 0===t[g]&&u.push({edge:i,fromId:l,toId:s}))}for(var A=[],f=function(t){for(var e=0;e<A.length;e++){var r=A[e],n=t.fromId===r.fromId&&t.toId===r.toId,i=t.fromId===r.toId&&t.toId===r.fromId;if(n||i)return r}return null},C=0;C<u.length;C++){var p=u[C],I=p.edge,v=f(p);null===v?(v=this._createClusteredEdge(p.fromId,p.toId,I,n),A.push(v)):v.clusteringEdgeReplacingIds.push(I.id),this.body.edges[I.id].edgeReplacedById=v.id,this._backupEdgeOptions(I),I.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0===t.clusterEdgeProperties&&(t.clusterEdgeProperties={}),void 0===t.clusterNodeProperties&&(t.clusterNodeProperties={}),t}},{key:"_cluster",value:function(t,e,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=[];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&void 0!==this.clusteredNodes[o]&&i.push(o);for(var a=0;a<i.length;++a)delete t[i[a]];if(0!=Qi(t).length&&(1!=Qi(t).length||1==r.clusterNodeProperties.allowSingleNodeCluster)){var s=Ro({},r.clusterNodeProperties);if(void 0!==r.processProperties){var l=[];for(var g in t)if(Object.prototype.hasOwnProperty.call(t,g)){var c=Oh.cloneOptions(t[g]);l.push(c)}var u=[];for(var h in e)if(Object.prototype.hasOwnProperty.call(e,h)&&"clusterEdge:"!==h.substr(0,12)){var d=Oh.cloneOptions(e[h],"edge");u.push(d)}if(!(s=r.processProperties(s,l,u)))throw new Error("The processProperties function does not return properties!")}void 0===s.id&&(s.id="cluster:"+bc());var A=s.id;void 0===s.label&&(s.label="cluster");var f=void 0;void 0===s.x&&(f=this._getClusterPosition(t),s.x=f.x),void 0===s.y&&(void 0===f&&(f=this._getClusterPosition(t)),s.y=f.y),s.id=A;var C=this.body.functions.createNode(s,Sh);C.containedNodes=t,C.containedEdges=e,C.clusterEdgeProperties=r.clusterEdgeProperties,this.body.nodes[s.id]=C,this._clusterEdges(t,e,s,r.clusterEdgeProperties),s.id=void 0,!0===n&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){void 0===this.clusteredEdges[t.id]&&(this.clusteredEdges[t.id]={physics:t.options.physics})}},{key:"_restoreEdge",value:function(t){var e=this.clusteredEdges[t.id];void 0!==e&&(t.setOptions({physics:e.physics}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return void 0!==this.body.nodes[t]?!0===this.body.nodes[t].isCluster:(console.error("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(t){for(var e,r=Qi(t),n=t[r[0]].x,i=t[r[0]].x,o=t[r[0]].y,a=t[r[0]].y,s=1;s<r.length;s++)n=(e=t[r[s]]).x<n?e.x:n,i=e.x>i?e.x:i,o=e.y<o?e.y:o,a=e.y>a?e.y:a;return{x:.5*(n+i),y:.5*(o+a)}}},{key:"openCluster",value:function(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No clusterNodeId supplied to openCluster.");var n=this.body.nodes[t];if(void 0===n)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(!0!==n.isCluster||void 0===n.containedNodes||void 0===n.containedEdges)throw new Error("The node:"+t+" is not a valid cluster.");var i=this.findNode(t),o=bi(i).call(i,t)-1;if(o>=0){var a=i[o];return this.body.nodes[a]._openChildCluster(t),delete this.body.nodes[t],void(!0===r&&this.body.emitter.emit("_dataChanged"))}var s=n.containedNodes,l=n.containedEdges;if(void 0!==e&&void 0!==e.releaseFunction&&"function"==typeof e.releaseFunction){var g={},c={x:n.x,y:n.y};for(var u in s)if(Object.prototype.hasOwnProperty.call(s,u)){var h=this.body.nodes[u];g[u]={x:h.x,y:h.y}}var d=e.releaseFunction(c,g);for(var A in s)if(Object.prototype.hasOwnProperty.call(s,A)){var f=this.body.nodes[A];void 0!==d[A]&&(f.x=void 0===d[A].x?n.x:d[A].x,f.y=void 0===d[A].y?n.y:d[A].y)}}else Po(s,function(t){!1===t.options.fixed.x&&(t.x=n.x),!1===t.options.fixed.y&&(t.y=n.y)});for(var C in s)if(Object.prototype.hasOwnProperty.call(s,C)){var p=this.body.nodes[C];p.vx=n.vx,p.vy=n.vy,p.setOptions({physics:!0}),delete this.clusteredNodes[C]}for(var I=[],v=0;v<n.edges.length;v++)I.push(n.edges[v]);for(var m=0;m<I.length;m++){for(var y=I[m],b=this._getConnectedId(y,t),x=this.clusteredNodes[b],_=0;_<y.clusteringEdgeReplacingIds.length;_++){var w=y.clusteringEdgeReplacingIds[_],k=this.body.edges[w];if(void 0!==k)if(void 0!==x){var T=this.body.nodes[x.clusterId];T.containedEdges[k.id]=k,delete l[k.id];var M=k.fromId,E=k.toId;k.toId==b?E=x.clusterId:M=x.clusterId,this._createClusteredEdge(M,E,k,T.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(k)}y.remove()}for(var O in l)Object.prototype.hasOwnProperty.call(l,O)&&this._restoreEdge(l[O]);delete this.body.nodes[t],!0===r&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var e=[];if(!0===this.isCluster(t)){var r=this.body.nodes[t].containedNodes;for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.push(this.body.nodes[n].id)}return e}},{key:"findNode",value:function(t){for(var e,r=[],n=0;void 0!==this.clusteredNodes[t]&&n<100;){if(void 0===(e=this.body.nodes[t]))return[];r.push(e.id),t=this.clusteredNodes[t].clusterId,n++}return void 0===(e=this.body.nodes[t])?[]:(r.push(e.id),Eh(r).call(r),r)}},{key:"updateClusteredNode",value:function(t,e){if(void 0===t)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(void 0===e)throw new Error("No newOptions supplied to updateClusteredNode.");if(void 0===this.body.nodes[t])throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(e),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(t,e){if(void 0===t)throw new Error("No startEdgeId supplied to updateEdge.");if(void 0===e)throw new Error("No newOptions supplied to updateEdge.");if(void 0===this.body.edges[t])throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var r=this.getClusteredEdges(t),n=0;n<r.length;n++)this.body.edges[r[n]].setOptions(e);this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(t){for(var e=[],r=0;void 0!==t&&void 0!==this.body.edges[t]&&r<100;)e.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,r++;return Eh(e).call(e),e}},{key:"getBaseEdge",value:function(t){return this.getBaseEdges(t)[0]}},{key:"getBaseEdges",value:function(t){for(var e=[t],r=[],n=[],i=0;e.length>0&&i<100;){var o=e.pop();if(void 0!==o){var a=this.body.edges[o];if(void 0!==a){i++;var s=a.clusteringEdgeReplacingIds;if(void 0===s)n.push(o);else for(var l=0;l<s.length;++l){var g=s[l];-1===bi(e).call(e,s)&&-1===bi(r).call(r,s)&&e.push(g)}r.push(o)}}}return n}},{key:"_getConnectedId",value:function(t,e){return t.toId!=e?t.toId:(t.fromId,t.fromId)}},{key:"_getHubSize",value:function(){for(var t=0,e=0,r=0,n=0,i=0;i<this.body.nodeIndices.length;i++){var o=this.body.nodes[this.body.nodeIndices[i]];o.edges.length>n&&(n=o.edges.length),t+=o.edges.length,e+=Math.pow(o.edges.length,2),r+=1}t/=r;var a=(e/=r)-Math.pow(t,2),s=Math.sqrt(a),l=Math.floor(t+2*s);return l>n&&(l=n),l}},{key:"_createClusteredEdge",value:function(t,e,r,n,i){var o=Oh.cloneOptions(r,"edge");Ro(o,n),o.from=t,o.to=e,o.id="clusterEdge:"+bc(),void 0!==i&&Ro(o,i);var a=this.body.functions.createEdge(o);return a.clusteringEdgeReplacingIds=[r.id],a.connect(),this.body.edges[a.id]=a,a}},{key:"_clusterEdges",value:function(t,e,r,n){if(e instanceof Ah){var i=e,o={};o[i.id]=i,e=o}if(t instanceof Su){var a=t,s={};s[a.id]=a,t=s}if(null==r)throw new Error("_clusterEdges: parameter clusterNode required");for(var l in void 0===n&&(n=r.clusterEdgeProperties),this._createClusterEdges(t,e,r,n),e)if(Object.prototype.hasOwnProperty.call(e,l)&&void 0!==this.body.edges[l]){var g=this.body.edges[l];this._backupEdgeOptions(g),g.setOptions({physics:!1})}for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(this.clusteredNodes[c]={clusterId:r.id,node:this.body.nodes[c]},this.body.nodes[c].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(t){if(void 0!==t){var e=this.clusteredNodes[t];if(void 0!==e){var r=e.clusterId;if(void 0!==r)return this.body.nodes[r]}}}},{key:"_filter",value:function(t,e){var r=[];return Po(t,function(t){e(t)&&r.push(t)}),r}},{key:"_updateState",value:function(){var t,e=this,r=[],n={},i=function(t){Po(e.body.nodes,function(e){!0===e.isCluster&&t(e)})};for(t in this.clusteredNodes)Object.prototype.hasOwnProperty.call(this.clusteredNodes,t)&&void 0===this.body.nodes[t]&&r.push(t);i(function(t){for(var e=0;e<r.length;e++)delete t.containedNodes[r[e]]});for(var o=0;o<r.length;o++)delete this.clusteredNodes[r[o]];Po(this.clusteredEdges,function(t){var r=e.body.edges[t];void 0!==r&&r.endPointsValid()||(n[t]=t)}),i(function(t){Po(t.containedEdges,function(t,e){t.endPointsValid()||n[e]||(n[e]=e)})}),Po(this.body.edges,function(t,r){var i=!0,o=t.clusteringEdgeReplacingIds;if(void 0!==o){var a=0;Po(o,function(t){var r=e.body.edges[t];void 0!==r&&r.endPointsValid()&&(a+=1)}),i=a>0}t.endPointsValid()&&i||(n[r]=r)}),i(function(t){Po(n,function(r){delete t.containedEdges[r],Po(t.edges,function(i,o){i.id!==r?i.clusteringEdgeReplacingIds=e._filter(i.clusteringEdgeReplacingIds,function(t){return!n[t]}):t.edges[o]=null}),t.edges=e._filter(t.edges,function(t){return null!==t})})}),Po(n,function(t){delete e.clusteredEdges[t]}),Po(n,function(t){delete e.body.edges[t]}),Po(Qi(this.body.edges),function(t){var r=e.body.edges[t],n=e._isClusteredNode(r.fromId)||e._isClusteredNode(r.toId);if(n!==e._isClusteredEdge(r.id))if(n){var i=e._getClusterNodeForNode(r.fromId);void 0!==i&&e._clusterEdges(e.body.nodes[r.fromId],r,i);var o=e._getClusterNodeForNode(r.toId);void 0!==o&&e._clusterEdges(e.body.nodes[r.toId],r,o)}else delete e._clusterEdges[t],e._restoreEdge(r)});for(var a=!1,s=!0,l=function(){var t=[];i(function(e){var r=Qi(e.containedNodes).length,n=!0===e.options.allowSingleNodeCluster;(n&&r<1||!n&&r<2)&&t.push(e.id)});for(var r=0;r<t.length;++r)e.openCluster(t[r],{},!1);s=t.length>0,a=a||s};s;)l();a&&this._updateState()}},{key:"_isClusteredNode",value:function(t){return void 0!==this.clusteredNodes[t]}},{key:"_isClusteredEdge",value:function(t){return void 0!==this.clusteredEdges[t]}}]),t}();function Dh(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Lh=function(){function t(e,r){var n;Rl(this,t),void 0!==window&&(n=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),window.requestAnimationFrame=void 0===n?function(t){t()}:n,this.body=e,this.canvas=r,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},It(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return Ll(t,[{key:"bindEventListeners",value:function(){var t,e=this;this.body.emitter.on("dragStart",function(){e.dragging=!0}),this.body.emitter.on("dragEnd",function(){e.dragging=!1}),this.body.emitter.on("zoom",function(){e.zooming=!0,window.clearTimeout(e.zoomTimeoutId),e.zoomTimeoutId=window.setTimeout(function(){var t;e.zooming=!1,K(t=e._requestRedraw).call(t,e)()},250)}),this.body.emitter.on("_resizeNodes",function(){e._resizeNodes()}),this.body.emitter.on("_redraw",function(){!1===e.renderingActive&&e._redraw()}),this.body.emitter.on("_blockRedraw",function(){e.allowRedraw=!1}),this.body.emitter.on("_allowRedraw",function(){e.allowRedraw=!0,e.redrawRequested=!1}),this.body.emitter.on("_requestRedraw",K(t=this._requestRedraw).call(t,this)),this.body.emitter.on("_startRendering",function(){e.renderRequests+=1,e.renderingActive=!0,e._startRendering()}),this.body.emitter.on("_stopRendering",function(){e.renderRequests-=1,e.renderingActive=e.renderRequests>0,e.renderTimer=void 0}),this.body.emitter.on("destroy",function(){e.renderRequests=0,e.allowRedraw=!1,e.renderingActive=!1,!0===e.requiresTimeout?clearTimeout(e.renderTimer):window.cancelAnimationFrame(e.renderTimer),e.body.emitter.off()})}},{key:"setOptions",value:function(t){void 0!==t&&Oo(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,t)}},{key:"_requestNextFrame",value:function(t,e){if("undefined"!=typeof window){var r,n=window;return!0===this.requiresTimeout?r=n.setTimeout(t,e):n.requestAnimationFrame&&(r=n.requestAnimationFrame(t)),r}}},{key:"_startRendering",value:function(){var t;!0===this.renderingActive&&void 0===this.renderTimer&&(this.renderTimer=this._requestNextFrame(K(t=this._renderStep).call(t,this),this.simulationInterval))}},{key:"_renderStep",value:function(){!0===this.renderingActive&&(this.renderTimer=void 0,!0===this.requiresTimeout&&this._startRendering(),this._redraw(),!1===this.requiresTimeout&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;!0!==this.redrawRequested&&!1===this.renderingActive&&!0===this.allowRedraw&&(this.redrawRequested=!0,this._requestNextFrame(function(){t._redraw(!1)},0))}},{key:"_redraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.allowRedraw){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var e={drawExternalLabels:null};0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize(),this.canvas.setTransform();var r=this.canvas.getContext(),n=this.canvas.frame.canvas.clientWidth,i=this.canvas.frame.canvas.clientHeight;if(r.clearRect(0,0,n,i),0===this.canvas.frame.clientWidth)return;if(r.save(),r.translate(this.body.view.translation.x,this.body.view.translation.y),r.scale(this.body.view.scale,this.body.view.scale),r.beginPath(),this.body.emitter.emit("beforeDrawing",r),r.closePath(),!1===t&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawEdges(r),!1===this.dragging||!0===this.dragging&&!1===this.options.hideNodesOnDrag){var o=this._drawNodes(r,t).drawExternalLabels;e.drawExternalLabels=o}!1===t&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawArrows(r),null!=e.drawExternalLabels&&e.drawExternalLabels(),!1===t&&this._drawSelectionBox(r),r.beginPath(),this.body.emitter.emit("afterDrawing",r),r.closePath(),r.restore(),!0===t&&r.clearRect(0,0,n,i)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var e,r=this.body.nodes;for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&((e=r[n]).resize(t),e.updateBoundingBox(t,e.selected));t.restore()}},{key:"_drawNodes",value:function(t){for(var e,r,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.body.nodes,o=this.body.nodeIndices,a=[],s=[],l=this.canvas.DOMtoCanvas({x:-20,y:-20}),g=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+20,y:this.canvas.frame.canvas.clientHeight+20}),c={top:l.y,left:l.x,bottom:g.y,right:g.x},u=[],h=0;h<o.length;h++)if((e=i[o[h]]).hover)s.push(o[h]);else if(e.isSelected())a.push(o[h]);else if(!0===n){var d=e.draw(t);null!=d.drawExternalLabel&&u.push(d.drawExternalLabel)}else if(!0===e.isBoundingBoxOverlappingWith(c)){var A=e.draw(t);null!=A.drawExternalLabel&&u.push(A.drawExternalLabel)}else e.updateBoundingBox(t,e.selected);var f=a.length,C=s.length;for(r=0;r<f;r++){var p=(e=i[a[r]]).draw(t);null!=p.drawExternalLabel&&u.push(p.drawExternalLabel)}for(r=0;r<C;r++){var I=(e=i[s[r]]).draw(t);null!=I.drawExternalLabel&&u.push(I.drawExternalLabel)}return{drawExternalLabels:function(){var t,e=function(t,e){var r;if(void 0===Ao||null==nn(t)){if(no(t)||(r=function(t,e){var r;if(t){if("string"==typeof t)return Dh(t,e);var n=lo(r=Object.prototype.toString.call(t)).call(r,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Cn(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dh(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=rn(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(u);try{for(e.s();!(t=e.n()).done;)(0,t.value)()}catch(t){e.e(t)}finally{e.f()}}}}},{key:"_drawEdges",value:function(t){for(var e=this.body.edges,r=this.body.edgeIndices,n=0;n<r.length;n++){var i=e[r[n]];!0===i.connected&&i.draw(t)}}},{key:"_drawArrows",value:function(t){for(var e=this.body.edges,r=this.body.edgeIndices,n=0;n<r.length;n++){var i=e[r[n]];!0===i.connected&&i.drawArrows(t)}}},{key:"_determineBrowserMethod",value:function(){if("undefined"!=typeof window){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,(-1!=bi(t).call(t,"msie 9.0")||-1!=bi(t).call(t,"safari")&&bi(t).call(t,"chrome")<=-1)&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}},{key:"_drawSelectionBox",value:function(t){if(this.body.selectionBox.show){t.beginPath();var e=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,r=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;t.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,e,r),t.fillStyle="rgba(151, 194, 252, 0.2)",t.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,e,r),t.strokeStyle="rgba(151, 194, 252, 1)",t.stroke()}else t.closePath()}}]),t}(),Ph=P.setInterval;function Nh(t,e){e.inputHandler=function(t){t.isFirst&&e(t)},t.on("hammer.input",e.inputHandler)}function zh(t,e){return e.inputHandler=function(t){t.isFinal&&e(t)},t.on("hammer.input",e.inputHandler)}var Fh=function(){function t(e){Rl(this,t),this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},It(this.options,this.defaultOptions),this.bindEventListeners()}return Ll(t,[{key:"bindEventListeners",value:function(){var t,e=this;this.body.emitter.once("resize",function(t){0!==t.width&&(e.body.view.translation.x=.5*t.width),0!==t.height&&(e.body.view.translation.y=.5*t.height)}),this.body.emitter.on("setSize",K(t=this.setSize).call(t,this)),this.body.emitter.on("destroy",function(){e.hammerFrame.destroy(),e.hammer.destroy(),e._cleanUp()})}},{key:"setOptions",value:function(t){var e,r,n,i,o,a=this;if(void 0!==t&&Oo(["width","height","autoResize"],this.options,t),this._cleanUp(),!0===this.options.autoResize){var s;if(window.ResizeObserver){var l=new ResizeObserver(function(){!0===a.setSize()&&a.body.emitter.emit("_requestRedraw")}),g=this.frame;l.observe(g),this._cleanupCallbacks.push(function(){l.unobserve(g)})}else{var c=Ph(function(){!0===a.setSize()&&a.body.emitter.emit("_requestRedraw")},1e3);this._cleanupCallbacks.push(function(){clearInterval(c)})}var u=K(s=this._onResize).call(s,this);e=window,r="resize",n=u,e.addEventListener?(void 0===i&&(i=!1),"mousewheel"===r&&bi(o=navigator.userAgent).call(o,"Firefox")>=0&&(r="DOMMouseScroll"),e.addEventListener(r,n,i)):e.attachEvent("on"+r,n),this._cleanupCallbacks.push(function(){var t,e,r,n,i;t=window,e="resize",r=u,t.removeEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&bi(i=navigator.userAgent).call(i,"Firefox")>=0&&(e="DOMMouseScroll"),t.removeEventListener(e,r,n)):t.detachEvent("on"+e,r)})}}},{key:"_cleanUp",value:function(){var t,e,r;Gn(t=Eh(e=ea(r=this._cleanupCallbacks).call(r,0)).call(e)).call(t,function(t){try{t()}catch(t){console.error(t)}})}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pixelRatio;!0===this.initialized&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,e=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,r=this.cameraState.scale;1!=t&&1!=e?r=.5*this.cameraState.scale*(t+e):1!=t?r=this.cameraState.scale*t:1!=e&&(r=this.cameraState.scale*e),this.body.view.scale=r;var n=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),i={x:n.x-this.cameraState.position.x,y:n.y-this.cameraState.position.y};this.body.view.translation.x+=i.x*this.body.view.scale,this.body.view.translation.y+=i.y*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if("number"==typeof t)return t+"px";if("string"==typeof t){if(-1!==bi(t).call(t,"%")||-1!==bi(t).call(t,"px"))return t;if(-1===bi(t).call(t,"%"))return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=900,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var t=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new El(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:El.DIRECTION_ALL}),Nh(this.hammer,function(e){t.body.eventListeners.onTouch(e)}),this.hammer.on("tap",function(e){t.body.eventListeners.onTap(e)}),this.hammer.on("doubletap",function(e){t.body.eventListeners.onDoubleTap(e)}),this.hammer.on("press",function(e){t.body.eventListeners.onHold(e)}),this.hammer.on("panstart",function(e){t.body.eventListeners.onDragStart(e)}),this.hammer.on("panmove",function(e){t.body.eventListeners.onDrag(e)}),this.hammer.on("panend",function(e){t.body.eventListeners.onDragEnd(e)}),this.hammer.on("pinch",function(e){t.body.eventListeners.onPinch(e)}),this.frame.canvas.addEventListener("wheel",function(e){t.body.eventListeners.onMouseWheel(e)}),this.frame.canvas.addEventListener("mousemove",function(e){t.body.eventListeners.onMouseMove(e)}),this.frame.canvas.addEventListener("contextmenu",function(e){t.body.eventListeners.onContext(e)}),this.hammerFrame=new El(this.frame),zh(this.hammerFrame,function(e){t.body.eventListeners.onRelease(e)})}},{key:"setSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.width,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.height;t=this._prepareValue(t),e=this._prepareValue(e);var r=!1,n=this.frame.canvas.width,i=this.frame.canvas.height,o=this.pixelRatio;if(this._setPixelRatio(),t!=this.options.width||e!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=e)this._getCameraState(o),this.frame.style.width=t,this.frame.style.height=e,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=e,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},r=!0;else{var a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),s=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);this.frame.canvas.width===a&&this.frame.canvas.height===s||this._getCameraState(o),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,r=!0),this.frame.canvas.height!==s&&(this.frame.canvas.height=s,r=!0)}return!0===r&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(n/this.pixelRatio),oldHeight:Math.round(i/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,r}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");var e=1;return"undefined"!=typeof window&&(e=window.devicePixelRatio||1),e/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),t}();var Bh=function(){function t(e,r){var n,i,o=this;Rl(this,t),this.body=e,this.canvas=r,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",K(n=this.fit).call(n,this)),this.body.emitter.on("animationFinished",function(){o.body.emitter.emit("_stopRendering")}),this.body.emitter.on("unlockNode",K(i=this.releaseNode).call(i,this))}return Ll(t,[{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t}},{key:"fit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=function(t,e){var r=It({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},null!=t?t:{});if(!no(r.nodes))throw new TypeError("Nodes has to be an array of ids.");if(0===r.nodes.length&&(r.nodes=e),!("number"==typeof r.minZoomLevel&&r.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!("number"==typeof r.maxZoomLevel&&r.minZoomLevel<=r.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return r}(t,this.body.nodeIndices);var r,n,i=this.canvas.frame.canvas.clientWidth,o=this.canvas.frame.canvas.clientHeight;if(0===i||0===o)n=1,r=Oh.getRange(this.body.nodes,t.nodes);else if(!0===e){var a=0;for(var s in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,s)){!0===this.body.nodes[s].predefinedPosition&&(a+=1)}if(a>.5*this.body.nodeIndices.length)return void this.fit(t,!1);r=Oh.getRange(this.body.nodes,t.nodes),n=12.662/(this.body.nodeIndices.length+7.4147)+.0964822,n*=Math.min(i/600,o/600)}else{this.body.emitter.emit("_resizeNodes"),r=Oh.getRange(this.body.nodes,t.nodes);var l=i/(1.1*Math.abs(r.maxX-r.minX)),g=o/(1.1*Math.abs(r.maxY-r.minY));n=l<=g?l:g}n>t.maxZoomLevel?n=t.maxZoomLevel:n<t.minZoomLevel&&(n=t.minZoomLevel);var c={position:Oh.findCenter(r),scale:n,animation:t.animation};this.moveTo(c)}},{key:"focus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==this.body.nodes[t]){var r={x:this.body.nodes[t].x,y:this.body.nodes[t].y};e.position=r,e.lockedOnNode=t,this.moveTo(e)}else console.error("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){if(void 0!==t){if(null!=t.offset){if(null!=t.offset.x){if(t.offset.x=+t.offset.x,!Ag(t.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else t.offset.x=0;if(null!=t.offset.y){if(t.offset.y=+t.offset.y,!Ag(t.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else t.offset.x=0}else t.offset={x:0,y:0};if(null!=t.position){if(null!=t.position.x){if(t.position.x=+t.position.x,!Ag(t.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else t.position.x=0;if(null!=t.position.y){if(t.position.y=+t.position.y,!Ag(t.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else t.position.x=0}else t.position=this.getViewPosition();if(null!=t.scale){if(t.scale=+t.scale,!(t.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else t.scale=this.body.view.scale;void 0===t.animation&&(t.animation={duration:0}),!1===t.animation&&(t.animation={duration:0}),!0===t.animation&&(t.animation={}),void 0===t.animation.duration&&(t.animation.duration=1e3),void 0===t.animation.easingFunction&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t)}else t={}}},{key:"animateView",value:function(t){if(void 0!==t){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),!0===t.locked&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var e,r,n=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),i=n.x-t.position.x,o=n.y-t.position.y;this.targetTranslation={x:this.sourceTranslation.x+i*this.targetScale+t.offset.x,y:this.sourceTranslation.y+o*this.targetScale+t.offset.y},0===t.animation.duration?null!=this.lockedOnNodeId?(this.viewFunction=K(e=this._lockedRedraw).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=K(r=this._transitionRedraw).call(r,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var t=this.body.nodes[this.lockedOnNodeId].x,e=this.body.nodes[this.lockedOnNodeId].y,r=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n=r.x-t,i=r.y-e,o=this.body.view.translation,a={x:o.x+n*this.body.view.scale+this.lockedOnNodeOffset.x,y:o.y+i*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=a}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=!0===t?1:this.easingTime;var e,r=Yo[this.animationEasingFunction](this.easingTime);(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*r,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*r,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*r},this.easingTime>=1)&&(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,null!=this.lockedOnNodeId&&(this.viewFunction=K(e=this._lockedRedraw).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished"))}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),t}();Ya('div.vis-network div.vis-navigation div.vis-button{width:34px;height:34px;-moz-border-radius:17px;border-radius:17px;position:absolute;display:inline-block;background-position:2px 2px;background-repeat:no-repeat;cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}div.vis-network div.vis-navigation div.vis-button:hover{box-shadow:0 0 3px 3px rgba(56,207,21,.3)}div.vis-network div.vis-navigation div.vis-button:active{box-shadow:0 0 1px 3px rgba(56,207,21,.95)}div.vis-network div.vis-navigation div.vis-button.vis-up{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABphJREFUeNqcV2twU9cR/nbPlVTHxpKRbNnBLyEbPyJisLEcPwgwUMKQtjNJAzNJZkgNNJOmJaZAaDKlxaXDTIBAcJtOOzSYKSkdiimhAdIMjyT4bYgBYxA2BgcUQPLrCiGDR4qt2x+yXTASFt1/957d7zt3z3d39xDCMQWUfgAz/RI/T4pSTAJpAGL8rECAXX7QFQGq9wOHOxYO1oCgjAdJj1wtB095Giv9TFuZAIWHAziATMPhTAwiHgUkYPXFJu92lMP/2MTpB1AKUCVEgNAcleUo1M+2F8TO6crSTncb1QleAOj2OTSX3Ge1p+Va42m5JrnzbnsCE8Ov+EHgpa0LPLvCJjZ/whuIlN8wAcXG+e1LUn9hm238QU84p1Ld83nsXvuO7Lq+LzKYGAT6/dn58m/HJTYf4O3EShkT8Irpzab1Uz9sGevT5+tWn+j6NB4A5hp/5NSr43xjfd5rW5tT9e3OAhCBiCua5/WsDEls/hdvYklZSwDefmrT8eXmtzuDkb5YZ33p9ndylICAVjWxf39xw/5g5Luv/9H84ZWNcwNEypZT87rXjqyJB85UYDMJYN3U7UdLJ6/6JlgqV517teRqf9uTlug8e1zEk27HgD22o98WsTBh8fWxvjm6ApdONbGvse8LM5NUPOm1Cfabuz3nACAgxX0QEFTJAnjNvLJ+Sepb14KRHnN+Ev+1XJOhZs3Qu1mbG97J2NQgsXroa1dtxrGuf8cHi1mUtPTay0lv1DMJSCRVLtoX+FgGgDQNysBAcez89l9nbbsQSji7rlXkEhjPxb/QatHOcFu0M9zz419oFSRhj/3PuaHiyqasv1Con9NGxHAYUsoCxAqImbYSgCWmFbZQwdsur7N0eC4m6tT6/jUZ750Zeb82c+OZGLWh/2p/W+Kfrmy0hIp/aVKpTSIJEqu2QgFx2iE8CwDp0RbH7Ljng/4yXr+XT3QdyhYsodS0slGr0g2OrEUK7eCrKW82SqzCVz3/yfb6vRwM4xn9rN7JkRkOQRLmfJn2LBPxQjDBqp9lD7XbX7X8pKTP160zR2bdeiX5jYeU/nLSTztNkem3XL5eXbltRUkonBxdgZ2IIUmahUxERQSCVT+rK5hzQ89xQ6P8VaaK1f5VmRvqQ4G+lba+nlnlb5brMhvlk7FBiaPzuwQEmEQhg5BOxMjWTncHc2501cQLkjDTsMCWpyuRQxFP0xXIJfp5FyVW4Zy7KajC06ItbiIGg6ZITBxDxIgbrr1jTSM0fibGIHz8O9sKK0GAibEua9spANh4aY2VmcEg+DEkiBgR/L2hYFgGtcErkQQAMVJgBxyy9hboZzv32v+Kpr7qbEECTAIMAoaJa3qPTmNiiAAgJAjk6J5xhu6HDAIgQYGLmI29PocmMcI8MNYvT1ckfzD9H/ub5br4e4Me9WfOKqtyX6Ud2cwC449PRamifDm6Auc0rTXokci+Xo1EAgBckiDuYGLjpTvntcGIA+SFcp6uUAaAI879VhWrRteYAqn/edq758brXJ1327QMhgJcZjA3EBjNrgZjOG1PkAjyTGENMjZPq5ECQ0MDE9ERBqFZrk0OJ3i4x/7vyIjBxGERt3takgVJEAp9xq3f769WiPDNvSsJdT3HDOEASPelmoBRYT3Kzt5uMtwauJEgSOCpwrk1DIJCoNUMwj9v7MweP9XSQ8/hJPp496fZTAICvLqcyv2B7nRbrgCA03JN5h8ub7A8VqpB437xHvsOy3l3cyaB4L2uqxhti1WLMcSgZQCw7+bOooO3Pk4JBZIYYXISMV5sKH59UePM10GESRGpIf/bE92HU452HywSJIGIllctrhp6YAK5+fHds0lLtJFMXNwkV6fFqA29mROefqiMJj1h6um4a5vY/92dKGaBxIhU5zJTWW2cJmEgGOmeb3c8FxAfb9mdf2RzyGGv5MvU7QwuEySwKHFp/c/M71zA/2F7b1RajnYdLAqMukMVu2YcfmDYE2MD7H+7/Xlq6cRIJqm4zXM+qd3TGjVBir43KSLlXjiELe5TsX+3/yW/ST45PaAHbKmccWh12AP93JNZywj0kSABIobpiXRHjtZ6faout2tyZMadGLXBCxBcvl6NfaAz+tKdFmObpzWl2+tIIBACYy0t/yj34M7HvsKUK+CGassvicX7alYDwwq+vykIEqPVa+Q9gdYk5+V+UE7lj3+FGbuBM/X5JUT8QwIVSSSZiTgmoFR2MfiqYFFPfjpkyrfWPopwxP47AP1pK1g9/dqeAAAAAElFTkSuQmCC");bottom:50px;left:55px}div.vis-network div.vis-navigation div.vis-button.vis-down{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABpdJREFUeNqcV21QlNcVfp5zX9ikoAvLEsAIIgsoHwpqWAQUNKLNaNv8iZ1JMkNG6/Qj/dDUyCSTtCHpmEkwVk3TToZRMjXj5MOG2KidjIkxQYSAQUAtX6IgIN8su8KCoOzbH4sk4q5g77/33uee555z7rnneYmZDB2MKcJKlyYbqOsZVIgGEOgSHQoy4AKbFFjqAo5dWn/rNAh9OpO852oeJHYxtrmEu4WALhMbxG2ZE9uFAlImDRLY/t/y0b3Ig+u+iWOKsAlgIZSb0OIf15kWtKo1NXh1d5xxiSPEN2wUAHrGOg11jirjWVtJyFnb6YgrzoYwocClu0DI5guPDb43Y2LLp/Iaqf9JCGSErGvIifxd7aqQn/TOJCvFvZ8Hf9haEH+m/6sFQgHBv1Sts/15WmJLkeyl6FuFwFPzny1/ZdE7Nfg/xhv1uUmH2w6kggQp+yqze7d5JbZ8Im+KpucSwI6EN7/cYtlxZarBCts3ptfrtq9odjaGKihE+sV0vRC3u8RqWmmbij149W+Wd5p2rnET6bsqsntyb6+pO3KqkE8FvLxo74lNUX9s9uTJb8/9fG2L81KoogJFYfCm3b9usNq0MXxzw1RsUkDqQICPqf/b/q8sQi3j4WdmtV47OFgNAO6r+DEUFAtFAc9YtpXmRP6hxVsI24cvhyoqnFtrK6jM7isgBa3Dl0O94TeGb255MvzXpUIFjVrhxo/dzgoARBuwFQJkBK9reCnurxfvXX8CRW3yW1G749vT2Br7ysW0oNX1pKDTPG+rm1gHRbibAHLm/7522sKnQCZqFgCUaBCqaS/bEw9vqtWoQROf3dBBiT6KTACImZ3YueqhDdOWjDbFQ4IzIl4elNUX5begU1HD6lPRmULKeghhDcpqnUmZuD3+nkgTH6gZEE9ctlZSoGmG9UIynSCsQVndMyX+IZGiBoHMjHh2SreCglClaSBiSEG8cYnD24bv7CWms/3FocO3hnw13plTggAFb196NdlPM44tC0zrSg5ItXmyEz070UEKCMRqQgkkBQ9NvL2eSJ+revoJTORSpoT6do4/7/7UShBFHQexM+HdfyUHWO8iN/uaRzX3/QjUSLlnqM72F4cCRIY5u9Zf+Y+BAv4AvzpkQ7WAIBRujA/7Vg6cia9xlId6InafVEAAGnQMUCSkb6zTMPdBy8hU3JjrphIq+CrD+Mvxeyumrr+4IH9y7o2GF5eDghuuGx4L2zbWZ9Dc0RoQRbkkFNRdP2/0BH7EtLJLKCjr+zqh2l5u8haZ847vTBW24kRFQXKAtcsT5oqz3igQENIoECkjBJUDZSGewBlBj/ammjLrdX1c/t70ero34gMte9IByLLAjPrUwKweT5jawQshdIuGMiF5XEBU2koivBl9NeEfJeYHwuxtI81zPrn2z6ip60c6DkV1jLTOCTaE2HNjd5Z4s9MwWBOhqEHp/I9cWDtUrJNoHm4KO9P7hdnTBoMYXI8Gb6gVCg63FS53jg9O5tA57tSOdHywnCAygrJrfcTgUe5U2cvNHSPtYYoKCWlrTgsIneB2AfFR+4F4b6f9ZdTzF6P8Ytud407/dy/nL7k9X9i8J9l5y+Ef6RfbnjPvWa8N5suez+KFCgqyPY95Lnd3stv2AcBZ2+mFbze+lui1xc3dXCUUlPafXNx4/aKxcajWWNp/MklRw8/mPFntbd+h1oLE847KhQQxejVg36QQqD0MPTzHv42Ux+uGasJNBnPfwllJd71kkX7RQ3WDNf7dox3BLcNNs6vt34bbbvYHJhlTGp6O+JVHb0/2HJtX1PH+aqECqG/5YN1nlXcokGvvO6vCc4x+QskotxVHB/qa+xbOWuzw8NB3nuo+Ht0z2hHsuGU3GrWAoZfi3jrxgHpw3BPpobaCH7vbqOw6mHI836vYW3Eqcq9AtioqbJy7ufQ3lhfu8sR+s9+3vL8klACsQSu7AnxMY1MxH7YXJp7oPpLulrrj+9575Ni2aeVt1teWfEWfHQLCaspseHzOU7VWU+aM5G2NoyL4i+6j8XWDNQsmGsKu/cv+nTtjQb/mm7hfENyvqEAK5v8opjPJaL26KGBpd5TfguuBvuZRgBgY6zO0jlyZXXe9JqR+8MK8ntHOMHfHIkhu2b/0yIH7/oXJ0yFlxYnPUdRbvuILgO7+y+91l6Ka6M+cnCf4fMSypXvymHf/vzBTD3CuNGUFKT8lmK5Rs5ASqKiBlAGBXFaiSuni0fkp1pJ7Ed4e/xsAqLk46EWsG1EAAAAASUVORK5CYII=");bottom:10px;left:55px}div.vis-network div.vis-navigation div.vis-button.vis-left{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABt5JREFUeNqsl2lUlOcVx//3Pi9DZRsGBgYiS2RYBQKIjAhEJW4pNrXNMbZpWtTGNkttYmJMG5soSZckRk+0p+dYPYY0Gk0ihlhRj63GhVUgBhDD5oIOy8AAMwzD4lCYtx+GqCQKuNyP7/Pc+3u2+7/3JUzEZFBYLh62S7yIZDmVBEIBqOwsQ4DNdtBFASq2A4cuZAwVgCCPF5LGHM0Chz+E1XamzUyAzCMO7IhMI+5MDCK+HpCANd+U2rYgC/Y7BoflYgVA2RAOoNYtyjDTe45+hk96e5QywaJR+NsAwDhocK61VCjLTYWaclNB0OW+en8mhl22g8C/rn7U+uGEwdov+C0i+Q0mIFWzoD7zwVU1czQ/6pjIreR3HPX5VL9jalHXiQgmBoH+XLHAtH5csDaXtxDLLzIBv5jyfOmG2H9U4S7snbpX43KaPpgBIhDx1rPzOlbfPC5GQT/nd1mS1zABa6PfPf5y5F/rcJeWpp7fPkly6f7KXBRCoOSATFfXll19x74HDsvFCghsJAG8HrvlvytCXm7EPVqc5wyzp5NX15muE1omKXXyMnd9yy5r5Q3wPghvJzrLAlimXV38+7D1DbhPFq1M6O4b6rPVWKsCBfHi5EWWv9TkQBYAEPpLvERMC9N8FtRvjt9dPl6wwo5jPvuas7WV5jNqEjz8wA+CBsaan+w9x1hrrXJtuaZX97ooLfqPLCUEGRR+iOwAsF2X98Uc30W3fb02u41frVqeVmo6FUkkwCAwCWxJ2Ls/0TPFNBb8TNdp9WvnVz4OAKdmX2QOzcMsAAjziDGMBd3asCF6SXHyknJTfqQTK+zpvhnVKT5zawCgzFTgN94pJXvP7gxxjTAIkpB+MnSWRMQZYEDnPVt/K4ejbZ/77726Lb6h95tAAiPELaJ1bcTbRfGeM8xv1azWSeyEa0P9igk+Nr1+oNFfkpwzJCJKIQA679ntN08yDXYo3qh+LuUrc0E4EcNL4dP7VNDzpU8FP3vpekoQQ5CEw4bPdEfa9+sAgEZUmkmAAAS5hLQ9p11XGO+pM8V5JLUfMeQARDMlEMKIGFOVCZYb0C7Fz0oeXmIZ6nZzYoV9od/jVS+GbahUOnn9b7T6sEOviUGyA8bMDlUa0W79wBW/bZf+lrY98cDBUI8YCxGDgHCJiVVEDN8R7QWAE8Z/+1mGut2i3eP1r0S+XRztkdBzq6NbF7WpbF3UprKxjvfHxbrfttla/QBArVDbJJIAQCURMRg8ugrKIAKBSNxzHtN3VdmxY0iQYSZmTeegwTlgknYAAB7RZBh2Nm7urbeeC1r19ROT52kWn3shfH2Fu1AO3RxjY/0fdac7/hPPJMDE11GC+HpBJmIEuAS3Oa6w01lybMbMgvgCE6O255zy24DeCr/Bvckn9+u8ZjXYIYvjxoMJy8oeXZrT9GHIqMWTwA2oI6cFMeDIcAiSEOyibXsmZG0hAFzuq1OyY6xBAnMJgdPOmks08zU/bbsB9x18P37PqS/b8+o/a96ZcLm3PmBH46Z5x40HW1eFvl4Uq0w0MwiCBOb7/qTsd6GvVY537DXWas1Iw1AiNJnOgwJi+bXhAbE08OnvaXSIW0TvYw88eaF/uM/WNdju3m5r9TlhPBzVNNDoPGC/5tRma/GJ80xqjPPUjVuvP2narrMOWd1Jlv/E1fN782UiNPZf9C/qOKa+ndOz2j+cz046sn+6KrVOsODirpOxld0lUxmEBK/ktvGgFd2l6taBZn9BAtEz5xYIvAn4/8rFKkgstAyZ6Yf+S67ezlkiSU73XXRV6xqh93TyssR4JF75efBvymLdE03jgT/Wb5tutLWpGbTm7wHZxQQAT+yDuKLyHRIk4cnAZ4pfCF9/HvfR9uh3xBxtz00BANsVDylnac6wAICaHMiBmW5NRLy4trcq0MtZ3RnpHme5H9AvjYeCc1t3pzMJgOSVnyw4eHZUB9Kyu68iMFPpysSppab8UJVC3Rnp/pDlXqF7mnYsdKQbv7cr6fDGW/Zczbt6jgUtV6kIlFxuyg/tH+6zJXmlGe8G+mlzdsyB1j3pTAwZ9q3/Sspbc9tmDwD0H3UffXCFlyuTlFpnPRdYb612c5c8+idPCu6fCLDKUubzsf6fSaWm0wmO9hbvZU8fDR2zoZ97OuppAu0UJEDEmOISZohT6q7Gek5rD3GN6FEp1DaAYB7sdNYPXPao7anS1Fmrg402g7+jYhGIaOXOaQc+uONfmCwZXJIf8xKx2KRgxYgOS+CROuyoyQKCxIhkOr4T6JWgxGnvZ1HWnf/CfHcBXxcnpRHxYwRKkUjSErFKkAQiNjP4kmBRTHbKm5KkKxwL+K39fwDX1XGF8ct++QAAAABJRU5ErkJggg==");bottom:10px;left:15px}div.vis-network div.vis-navigation div.vis-button.vis-right{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABs1JREFUeNqsl3tQlOcVxp9z3m+XygK7C4sLxkW5o4CAkYssFSkRjabjJEOSJm1IbZx2krapiZdeprW0NVVJ0pqMM0kYJQlqkoZImGioE1ItiCAgIsFwE4Es99vCslwChf36xy5EW1A0Pn9+73fO772e93kJC5EMCszFd20SbyFZNpJAAACtjWUI8KAN1CRAJTbg9LXNU+dBkG+Xkm7Zmg4OWoUdNqZXmQCZHQFsz0yOcCYGEc8mJGDnl2UTh5AO2x2DA3OxDaAsCDvQ32VF11qP9aZYz6SeFeooi17pPQEAvZNdTnWWKnWFuVhfYT7v0zza4M3EsMk2EPgnNZusby8Y7P8x/5lI/gMTYNSnNKQt/0Xtev1DfQtZlaK+M54fmDJXXhg4G8zEINBfqlLMe28L9s/lQ8Tyr5iAJ32fK/tj+OFq3IUO1O+JyGk7GgsiEPFrlQ/07bixXdwEPckHWZJ3MgG7Qw9+/mLIS/W4SyXoNvQskpyHLg1e8CNQ3NI0laoje7Tg/8CBudgGgQwSwO/DD322ze/FFnxLRWhiBzUK94GLA2f9mSTjfU+7mjqyrVe+AX8I4aGgShbA0/47Sn4ZuLcR90ih6qih0anRiVprtUEQb43bYtlXmwNZAEDAj/ACMW1M8ExpeDXyWMVCEl4yF7vntR/zLeov8JJlWfZR+Y3N92+cx/reOmu1quNrk27EWW0xvWspJcigoNNkA4C3Yk59vH7xltvu3ktDxe7PX34ilQCQfeci1j2xfn94ZrGCneY8uxcHCnW/vbr9EQD4d2ITc8AprAOAQLewroVAAaB8oMiLiRHvmVy7znNTjWCFrXKoJOSHFQ+kvnF9f+jco07s91MFdwmSkHQuYB0T8WYwIcYj0bTQdRufGlFKJMFVaCb/GvZW6aGI4yeXOwd2mr/u05zsyDY+W5X64Nm+fO85NpuJiCFJTpslIoonADEeiT2zIzIXuh+o25PQNtbsNVMOBUn2g08MiSTHN3uZjNTEDr4dnX/6H+1H/XPasmKvW+sMGfW/MXzende4K3h/ibvSYxIAItyie/K7cgCitQxCIBFjpTrKMgM+WPfrhLbxFi9iMQtlYjAJSCSBSYBAIPBNI3p86TPXj8bk56R4PVylFE626uFLQc9efiTVPDmgBIAAtzALEYNBQRITa4kYix21FwBax655CVagPLk7806Pj1qo/7MraF/FQ14/aMhszYhvGqn3KTef89rklWrSKXUTkn3mtJK9Bzf3XJA0e/PcrdgxIwSCDPmbZMQgABJkDBKzvn+yy2npIv9xAPB1Ceo2jTZ7Gc8afipIgEhAkACDwcSQQZBIIGnx5it7gg+U3wgcnbZKR1r+FnW+v2DVtDwtXCXNSKz797oAwDzZ7ySRAIBBFsTXmBh1w1+oZ4J3h+wv9lUFdbMDOrO+5IAqWIGZthuV13nC77nKRx8r7PssyibLIkoT1/h65HsfzWyu5tF6NYNB4EYJzKUETqgcLNVv0D/cDQBrNAnm9+LOfTLfNB5u2hf5z+6TMexYji+tVdrM5leMbWOtSwQx/F1C2rcuebIqwSO568a4WmuN3mEYSiUi+pRl2l1pLvYBsKArUKVwnZRYgdHpMWVG4+/WXhwoDBXE7OmkHzJ6JNemLfv51bniGqzVPoIkyLbpfK7ZMFIkE6FlrMn7Ql+BbiHg+zXGbgLjylDpyosD58KZmKM0cfWHI9//aD5o1VCZrnO83VuQQOja5PMCfwK8n3K2ChIbLVOD9KB36le3A+u/s2Q81C2yRavQmQNdVnamLnmq4nHD9jpB0rwm77jpjTW9E906Bu18fWlWCQHAox9CtGoXTwmS8IThZyXPB+29inuoE6bMsDM9ufEAMNHqJuU8ljMtAKA2B7IhzaWNiLfWjVQb3J10/SGuEZZ7Af1X7+lluZ3HkpgEQPL291M+qbzJgXQcG60ypKlVTGwsMxcFaJW6/hDXVZZvCz3RlrmRiQHwy9nRn2bM6bnas4cLfH6s1RIorsJcFDA2PToR7Z7QezfQD9qzwvI6TyTZC47ttXeiT+2c1+wBgOndoTPLt7mrmCRjvfULQ4O1xsVVchu7b9GysYUAqy3lnsdNb0aXmQuj7PYWL2etuRl6S0OfXLjiGQIdEY6K5esc2BWhjvkqXLO6x08VPKxV6iYAwuBkv5NpvNmtbrhaX2+tWdY70eVNINhtLW0/sjrv6B0/YdJlcGlR2AvE4hUlKwHQ7BU5cz8LRx0HaPY7gXb53L/67+mUfudPmP/twOWS6AQi/j6B4iWS/IlYK+yGYJDB1wWLErLRKd/omOJbAWf03wEAyO9m+/TtS3AAAAAASUVORK5CYII=");bottom:10px;left:95px}div.vis-network div.vis-navigation div.vis-button.vis-zoomIn{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABiBJREFUeNqkV2tQlOcVfp7zvgvDRe66y8htXUBR1GoFI+BtFJvRtjPJBGeaH2a8DGmbttgSTWbSJEw6TWOsrbbpTIeJZGqaTipTa6LJZDTVUTYQdNAohoso6qLucnERN0Axcb/8+HaJUHDX9Pz6vnnPe57vXJ5zzkeEIwaYcwBL/VrW0TCKqZANINEvBhSk3w9eUmC9HzjcsfarOhBGKJN84GkVJHcetvqFu4SAIYELYlpm4LpQQMqoQQKVnzeO7EYV/A8NnHMAGwHWQJmAjtg895LkFa7FU1d258UvGLBGpI4AQM9dd2TrwNn4016n9bS3LqNzsD1VKPAbfhCyqflR31thAzv+La+QxotCoNi6pn1D1s9aVli/3xtOVk72fjT1XVf17E9uHZspFBD8zdk13pdCAjsOyG6KUSEEnrT/tPHluW+cw7eQ19q2z6/t2rsYJEjZ07S6d+ukwI5/yQ7RxnYC2DZnx8dbHNs6xxs85T2R9GprZcmVwYs2BYWsmBzP83m7nIVJS73jdfdd+7PjjUu/XWUCGTtPre7ZHjxTY3Kq8DoV8Ou5u49snPGrKxN58syZ9aVXBztsigoUBd+Xt2NbfZ8llaVvah+vOz9hcX+CJenWp7eOOYS6ePpTU1w39vk+AwCzFPdDQbFGFPCUY2v9hqxfXJ0shNeHLtsUFc6UequbVvdVkwLX0GXbZPpl6Zuu/ij9x/VCBU1dU7bfdFYAIDsSFRCgeOqa9hfy/nDhwfwTKOrRd0U95n0iqch9+cKS5JVtpMCdkllhAhugCHcRwAb7z1tCEp8CCXAWAJRoCFXIYnti+sYWTQ0tll0wQMk+hGUAkBOX714xbV1IyuhxHhIMC/iR5OV9M2JmuhU1Vh7PXiakrIUQhcnLXeHQxPT4GyAtFqgwgAPF5iIFWkeu1SSLCKAweXn3/ZR5rXV7SddQpy3YDoNems9qTI5hGCitm1MOAAx0aaFCerTd84zjBed3Egq9ADA/rqD7Q3ctQC4REDmkYHb8goGgsR2tz5V0DV+xUdQoqAQ81RybU4IgFWgACgpaLLCIBUo0bv63y/aXy6+WBHWz4/IHSIGAuVooiaRgWqD3AsDVoQ6bEgtOrfJUhwrf0WUtk+r8sL6wvHvk5ijVUiJSRrQZuURtfoGMuaCoRyfP/yMy0XykgAA0DPRTxNp31x2ZFuUYBgB7bK7HNdhpKz6WXq6oQCooKghMKhkgji77vBoA1jkXlAvVfRQjFMUcmxSkRWd6gpjeu32R2kxTvyhKh1DQeud8fFBh26zfOe0xuR4JgAbzywCoRSzfeDUKatJKUQK+CjKiHZ6nZ2xzBnU7B9vixTy7qCHSQEhJU3+DtdT6mAcAFiWUeP/xyPH3Jwrfo3XzysemRcEA8F5RY8h6aPE1WwMLQ4OQ/EBANHmdGWHlzZyxk3ayB0m771yGooYy+KE0l35x0iBxZehS6ie9R1PCMaDvCzWDXA4hZ283ptwcvp6qqDBnyao6AWEQrBQQ/7y+d3YoA+NBTAaElo973p8tVFCQyipW+c3pdNu7BwBOe+tm/eniK/kPFWowpMfvuKrzzw80zSKIkWsJe0bHYu163BNwMwDsv7G36ODNtzMnM5IWZfeQgscbisvLPl1aDhLTo7I8k+n/p+dw5pGeg0WKGiS31K6vvTdmA7nx9uDZ9A3xMUIpbvSezE6MSOmbNWXewHhD6dH23o7BlqQvvrwTK6KQFpXl2WyvcE6LTB2eCPSdrurvmcUnO/cVfPD6pMteyfGs3QKpUFQoS9tU/xPH8xe+Tdd693pN/pHug0Xmqntvz1uLDo9Z9v5nnrn+dvujrI1JMUJd3OY7n97ua46douOGpkdlDoUDeG7g1NS/u/5a0Og9scCsB+ysWXSoMuyFftWJvM0E31SBjmWPznHPjy+8NjdhYfeMmJl3EiNSRgCi/25fpGu4M671zjlrm685s2fEnUoQ5lrLLW8uPLj3oX9hqgxIw8n8X1LU7yMkItCHzREZrGQV6ONmy5TggHk247sL/1jFqof/hRn/AWfqC0pI+QHBIk3tICXRrFTpF8hlJaqefh6yFxQ6HwQYlK8HAKyt3WsWxl7fAAAAAElFTkSuQmCC");bottom:10px;right:15px}div.vis-network div.vis-navigation div.vis-button.vis-zoomOut{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABV5JREFUeNq0l2tQVVUYht/3W/vACMr16IFRQDiAgChpgiikMqY1WjnN9KsfGOXYTOVgkvbDUsZuXrK0qZmGUSvNspjI8TZOmo6AGBoZYly8YB6Qw80DBwQ6jJ3dj30OZZmiwvtv77XW96y91l7v9y1iMNLBuCI84tZkIXU9gwqxAILdokNBOtzgJQWWuYEDFxfcLAGh3y0k79iaD4mfjOVu4WYhoItngBiR6RkuFJAyEJBA3m/lri3Ih/uewXFFyAG4A8oAWkcm2meEzrFNH53Vkhg4xWnxCXcBQGu/3bfGeTbwjKPUcsZRElnfUxcuFLh1Nwh5vurx7s8GDbZ+L+tI/U0hkGGZX5c9/pXqOZYn2gazK8Vth0fvsRUknbx+bIJQQPCts/Mda+4KthbJFoqeKwSejX6pfO2kjytxH1pfuyqlsGH7dJAgZWvFo23L/9muboF+JxtE0/OEwMqJG46uSHinFvepTPO8lhGaX+fPHSdjCKaPy/b3v7az58h/wHFFyIHCRirgjUlbfsiJWXEFD6iUoOkdQaaQ6z9dP2YVahljF4+yXdvZ/evf4G+hQk2sEAUsti4vWxa35gKGSBMDp3T23OxxVXdXRijKovSFzrerC6ELAMT6IhcCZIyeX7c68YPzGGLlxq89PyM0q5YU2M1RuQAg0EERbiaA7Ohl1RgmPTM2p1qjBk1Mm6GDErsfswAgLiDZPmfMwrbhAqeHzm6P8Z9gV9SQdTx2lpCyAEKkhc62YZiVEjTdRgo0zXeBRnImAaSFzm7xdjjtOBGyvmZVZkNvfZjXDhU14+BToFEDKRAQpAJ0HRTjP6XHpYUKEX7RzS9bV5c+FJTmAICUgNSWQ/ZCgJwhIOJIQVLgFKcXvKHm9cyGvithFDUAFQqECho1CBUIggYapAJ1QEFBExNMYoISDU1/NIR9cvndTG/c2IBkp2fC8ZpQgknBGI/3AsDvvRfDlJhwem5zwYMs7VNlaUtbXE1h3mezj9mlGSsXrBkzkFsGKGoDmedBJLfLjxQQgAYdHRSxtPfbfceNsPYBQPTI+GZbT31YxrGIpYoKpIKigkAgFOggNBrbQBBCBaEM2L+iGGmTgnF+Uc1epqO/3VejAoAOUZSLQkFN17lAb4eVCe+VRvvHN4sH6t1feqAmMUGoPHvvhdLzTjzfKoj0sza/GLOy1Bu3vqc20Pgl5YIGkVOEZFZ0nLLMszzdDADTgjIdX6Uf3zfUx6m6u8riKRhOCcmDAqLCURo53Oe4rrsyUlGD0nlIqubdKNZJXOm9FH6y7Yh5uKBnO8vNTX2N4YoKE2fMLREQOsE8AfFN4/ak4QIfbd2XJFRQkLx85ruN7NTp2AoAZxwlCR9dWJc81NDdtoLkc86KBIJwXQ3aOpCPqwuhR2SPbCBlUc2NyogQX3N7wqgU51BAf2w9EFXUtCtLqADqS76ev6/ilgrk2q6esxHZgf5CySh3FMcG+5jbE0ZNdj4odHdDwWPGcZNNO1MPbrxtzdW4s+tI5HPBwQTTzziKY3v/7HGlhmS23g90T+OO5L1Nu7MMw3Fv/Tx1f97/FnsAYPui8/D4nBB/oZZR230uoq67auQoLaB37Iio3sEAK52nR39p+zS13HFiilHeYtOOabdC71jQzz2R+ALBbcrjWNF+cfaUwLSrk4KmtsT4T+gK9jG7AKKjv93X1lcfUNNVaantropqddnDCcIoa7lk29S92+/5CpOvQ04VJ79KUe/7iI/Hh40U6c3PyuPjhmWKN8G8Fvnw1A/zmX/vV5h/T+CXstRMUp4kOFOjZiUlWBkFQYdALitRZXRzf3RqWumdgF79NQDBOa2V/iYSHAAAAABJRU5ErkJggg==");bottom:10px;right:55px}div.vis-network div.vis-navigation div.vis-button.vis-zoomExtends{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABptJREFUeNqsl21QlNcVx///cx9hIipuAJHasgHlRdw0xay7yK7smg6sb2DSdtqZduLUNENmOk1tQuM4U7UzTvshSRlFZzoNCWSSSTJp+6VNkLCAeQHBoCCgqNBE0wUqL+KuwIiiZZ9+eHa3aAS3Sf8zO8/L3nt+95x7z7n3YWlpKUQEJAEgch9+Jola9xEC2ADBVgAOKqwCYAqKDgUJBIHPBWwFWQNdbyZFBwAC0GGIAHQSj3/8HHRdhzYbdDfwg4IjAsGvICgXAroYBiCEDkBBACBZoyST4gDwQqh7mQ4cEkhQD0EBIIggRMQAh2EiEvEYAGrdR3YSqIYCIEDaotVDeYnu/ryEjSOr43PHl8WmTBPA6PRQ7IWJrvhT/ubkU/7m1EvX+1KEUh7Ug+WkPEXgdUSkR+xrd0NJ4qjr8AEI9pGAI7mo78mHfnF+Y/K2K7iHUheuvJG6cOUNz/LvDwPobrpSl/Ruf2VOy9UPs4RSTSANwH4Y449EVdnt9ojHIeghCHYLgR+n/7zt4Np32tIWZU4hSpnjVk1t/caPfOO3/f++MNH5TVJcisoEoo4ksgbsXwYfdR1+kQplQuCFNS82Pp/9+158RTkTC0ce0OKutQeOp5PME0qcUBqyBmwGOC8vz4AWVOyE4CUqYO/Dh+p3pj//Bb6mHllqCyxd8ODVT69+uFKoOYTSnzFg7SJpzHFNQYWiQrUIsCN9V+uOh375zz179pSGI1FSUuK12+2+aGDt7e3muro6T/h57969lZdvDrT+ZbA6n0B1nfPVN7e0PjMjIgIIdkEAR1JR329yDvaE0+l/hQKA1Wr1bd682SsikUW7K+O3PesTNvaSAiXaLhGBvO86RFEoJ4Adac+eDxsgiZKSEm9NTY3n5MmT5mjBHR0d5vr6es+mTZu8SqnI+x+s+Ol5jRo0auX1jtepQaEAADKWWIbcy7ZGUmb79u1eu93uI+mtra31HLj5TGDs9rBJICCNn1GRCKGCUJAUuzzw6CfbTB6Px7t27VofAG/YXl6Ceyw9LmvIN3UxZUafKRACWyCELcHVP3vk4fDabDZf+2N/D9g+fsLEEFSooFGDogZNFkBRgSCsTcWm066jgRAU4et/F5u9nxRosmCLRmE+QdgSXCNzhW/s9rDJ63wVJx77V+V8YS6UNaW8BdOcqzx+3Ujt0F8Bcr1GMIMU5CzJHZ+rg6IGCYV2PimoyIK6lzIWrxkPTVGmRoqJFCyLTZmeq4MB5f3BVADnbpcQkzStUQMAk0YKBPfzxlhA95NQQe43QBotBECAFFyZHo6dz6CKCizAPFPivzUWqxm2AqIgnwkFvZNn4uczGK3Hah7wpet98UZ85R8aKScIcXYEWpMLkx8fvleHpNjlAWtTsakQa0pVKGcJQqMGUqCHBvfdjp/gTP6xwFzg85PdyaH2J4SUowKiw3889e4KBACnT582W5uKTV2uusAdUFlgzBcFQoFGDT35HwW+82mhqaenxwwA4WtYfRNnUkMZUqsJpEkn8cXU5yktYw2JjsTCMQDwer0ekt6GhgZPUVGRd3fu7qjqdU9Mj7mlpcVD0tvS0uKxWCyVANB5rS3x8s3BFEUFgTTLtuZndQHLBMSfB6pyZtfqMDQ3NzfqTcJisficTqc3BI+8bxh9L8corarM3fnDoIT+rACAU/7m7MOfHbCEwQDQ2Njo6erqinqTOHfuXNjjiI23+ystZ8c7smmkWgVJcN++fRARfLDhlacEUqVEQ1nm77xPrHjSh/+Djo3WmN/s/6OHEOgIPr2h63tVuq5Dud1ukETWoK3zorkzTiiONn/TKlNM4lj24m+Pf13o2wOVHqGA5MsAXjKPrDaqnMvlQnjTzhy0Nlw0d5oI5p3yN62amrk+ve5B5+hXgb47WGX52+V3NgoFOvQKAGUkkTqcbZy5XC7XHYf4zEFr3aXU7jih5uidPPOtvsmzixZr8VMrHjBHddLsHj+Z9Fb/n9a1+T/JDaXey0IpEzEKkHnU8Jj79++PeEwSSimQRGP+Gz8j5DVFBVKQtjBj6JGlNt/D8Y+OpMdlTphiEqcB4tqtsVjfjUtLLkx0J/dOnjWPTg+lEARIEHwaQJVQIYggACC/qxi6rn8ZHL4XETSsf0MU1HOk/CFGYgAwskUqY5eBitRxzn7/a0V1EEBwdqkN6jPI7y4xPmHmC5unbWdQRMqP2d86qANOksU6gvmArNQRNClqABnQgYuK0krI+wCOAyH3DK/vqOXhaf3PAO7mIRjDNV25AAAAAElFTkSuQmCC");bottom:50px;right:15px}');var jh=function(){function t(e,r){var n=this;Rl(this,t),this.body=e,this.canvas=r,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",function(){n.activated=!0,n.configureKeyboardBindings()}),this.body.emitter.on("deactivate",function(){n.activated=!1,n.configureKeyboardBindings()}),this.body.emitter.on("destroy",function(){void 0!==n.keycharm&&n.keycharm.destroy()}),this.options={}}return Ll(t,[{key:"setOptions",value:function(t){void 0!==t&&(this.options=t,this.create())}},{key:"create",value:function(){!0===this.options.navigationButtons?!1===this.iconsCreated&&this.loadNavigationElements():!0===this.iconsCreated&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],r=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var n=0;n<e.length;n++){this.navigationDOM[e[n]]=document.createElement("div"),this.navigationDOM[e[n]].className="vis-button vis-"+e[n],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[n]]);var i,o,a=new El(this.navigationDOM[e[n]]);Nh(a,"_fit"===r[n]?K(i=this._fit).call(i,this):K(o=this.bindToRedraw).call(o,this,r[n])),this.navigationHammers.push(a)}var s=new El(this.canvas.frame);zh(s,function(){t._stopMovement()}),this.navigationHammers.push(s),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){var e;void 0===this.boundFunctions[t]&&(this.boundFunctions[t]=K(e=this[t]).call(e,this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(t){void 0!==this.boundFunctions[t]&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){(new Date).valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var t=this.body.view.scale,e=this.body.view.scale*(1+this.options.keyboard.speed.zoom),r=this.body.view.translation,n=e/t,i=(1-n)*this.canvas.canvasViewCenter.x+r.x*n,o=(1-n)*this.canvas.canvasViewCenter.y+r.y*n;this.body.view.scale=e,this.body.view.translation={x:i,y:o},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var t=this.body.view.scale,e=this.body.view.scale/(1+this.options.keyboard.speed.zoom),r=this.body.view.translation,n=e/t,i=(1-n)*this.canvas.canvasViewCenter.x+r.x*n,o=(1-n)*this.canvas.canvasViewCenter.y+r.y*n;this.body.view.scale=e,this.body.view.translation={x:i,y:o},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var t,e,r,n,i,o,a,s,l,g,c,u,h,d,A,f,C,p,I,v,m,y,b,x,_=this;void 0!==this.keycharm&&this.keycharm.destroy(),!0===this.options.keyboard.enabled&&(!0===this.options.keyboard.bindToWindow?this.keycharm=Xa({container:window,preventDefault:!0}):this.keycharm=Xa({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),!0===this.activated&&(K(t=this.keycharm).call(t,"up",function(){_.bindToRedraw("_moveUp")},"keydown"),K(e=this.keycharm).call(e,"down",function(){_.bindToRedraw("_moveDown")},"keydown"),K(r=this.keycharm).call(r,"left",function(){_.bindToRedraw("_moveLeft")},"keydown"),K(n=this.keycharm).call(n,"right",function(){_.bindToRedraw("_moveRight")},"keydown"),K(i=this.keycharm).call(i,"=",function(){_.bindToRedraw("_zoomIn")},"keydown"),K(o=this.keycharm).call(o,"num+",function(){_.bindToRedraw("_zoomIn")},"keydown"),K(a=this.keycharm).call(a,"num-",function(){_.bindToRedraw("_zoomOut")},"keydown"),K(s=this.keycharm).call(s,"-",function(){_.bindToRedraw("_zoomOut")},"keydown"),K(l=this.keycharm).call(l,"[",function(){_.bindToRedraw("_zoomOut")},"keydown"),K(g=this.keycharm).call(g,"]",function(){_.bindToRedraw("_zoomIn")},"keydown"),K(c=this.keycharm).call(c,"pageup",function(){_.bindToRedraw("_zoomIn")},"keydown"),K(u=this.keycharm).call(u,"pagedown",function(){_.bindToRedraw("_zoomOut")},"keydown"),K(h=this.keycharm).call(h,"up",function(){_.unbindFromRedraw("_moveUp")},"keyup"),K(d=this.keycharm).call(d,"down",function(){_.unbindFromRedraw("_moveDown")},"keyup"),K(A=this.keycharm).call(A,"left",function(){_.unbindFromRedraw("_moveLeft")},"keyup"),K(f=this.keycharm).call(f,"right",function(){_.unbindFromRedraw("_moveRight")},"keyup"),K(C=this.keycharm).call(C,"=",function(){_.unbindFromRedraw("_zoomIn")},"keyup"),K(p=this.keycharm).call(p,"num+",function(){_.unbindFromRedraw("_zoomIn")},"keyup"),K(I=this.keycharm).call(I,"num-",function(){_.unbindFromRedraw("_zoomOut")},"keyup"),K(v=this.keycharm).call(v,"-",function(){_.unbindFromRedraw("_zoomOut")},"keyup"),K(m=this.keycharm).call(m,"[",function(){_.unbindFromRedraw("_zoomOut")},"keyup"),K(y=this.keycharm).call(y,"]",function(){_.unbindFromRedraw("_zoomIn")},"keyup"),K(b=this.keycharm).call(b,"pageup",function(){_.unbindFromRedraw("_zoomIn")},"keyup"),K(x=this.keycharm).call(x,"pagedown",function(){_.unbindFromRedraw("_zoomOut")},"keyup")))}}]),t}();Ya("div.vis-tooltip{position:absolute;visibility:hidden;padding:5px;white-space:nowrap;font-family:verdana;font-size:14px;color:#000;background-color:#f5f4ed;-moz-border-radius:3px;-webkit-border-radius:3px;border-radius:3px;border:1px solid #808074;box-shadow:3px 3px 10px rgba(0,0,0,.2);pointer-events:none;z-index:5}");var Vh=function(){function t(e,r){Rl(this,t),this.container=e,this.overflowMethod=r||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return Ll(t,[{key:"setPosition",value:function(t,e){this.x=Yn(t),this.y=Yn(e)}},{key:"setText",value:function(t){t instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(t)):this.frame.innerHTML=t}},{key:"show",value:function(t){if(void 0===t&&(t=!0),!0===t){var e=this.frame.clientHeight,r=this.frame.clientWidth,n=this.frame.parentNode.clientHeight,i=this.frame.parentNode.clientWidth,o=0,a=0;if("flip"==this.overflowMethod){var s=!1,l=!0;this.y-e<this.padding&&(l=!1),this.x+r>i-this.padding&&(s=!0),o=s?this.x-r:this.x,a=l?this.y-e:this.y}else(a=this.y-e)+e+this.padding>n&&(a=n-e-this.padding),a<this.padding&&(a=this.padding),(o=this.x)+r+this.padding>i&&(o=i-r-this.padding),o<this.padding&&(o=this.padding);this.frame.style.left=o+"px",this.frame.style.top=a+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),t}();function Gh(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Uh=function(){function t(e,r,n){var i,o,a,s,l,g,c,u,h,d,A,f,C;Rl(this,t),this.body=e,this.canvas=r,this.selectionHandler=n,this.navigationHandler=new jh(e,r),this.body.eventListeners.onTap=K(i=this.onTap).call(i,this),this.body.eventListeners.onTouch=K(o=this.onTouch).call(o,this),this.body.eventListeners.onDoubleTap=K(a=this.onDoubleTap).call(a,this),this.body.eventListeners.onHold=K(s=this.onHold).call(s,this),this.body.eventListeners.onDragStart=K(l=this.onDragStart).call(l,this),this.body.eventListeners.onDrag=K(g=this.onDrag).call(g,this),this.body.eventListeners.onDragEnd=K(c=this.onDragEnd).call(c,this),this.body.eventListeners.onMouseWheel=K(u=this.onMouseWheel).call(u,this),this.body.eventListeners.onPinch=K(h=this.onPinch).call(h,this),this.body.eventListeners.onMouseMove=K(d=this.onMouseMove).call(d,this),this.body.eventListeners.onRelease=K(A=this.onRelease).call(A,this),this.body.eventListeners.onContext=K(f=this.onContext).call(f,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=K(C=this.getPointer).call(C,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},It(this.options,this.defaultOptions),this.bindEventListeners()}return Ll(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer})}},{key:"setOptions",value:function(t){void 0!==t&&(So(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,t),Wo(this.options,t,"keyboard"),t.tooltip&&(It(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=Bo(t.tooltip.color)))),this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-(e=this.canvas.frame.canvas,e.getBoundingClientRect().left),y:t.y-function(t){return t.getBoundingClientRect().top}(this.canvas.frame.canvas)};var e}},{key:"onTouch",value:function(t){(new Date).valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(t){var e=this.getPointer(t.center),r=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(e,r),this.selectionHandler.commitAndEmit(e,t),this.selectionHandler.generateClickEvent("click",t,e)}},{key:"onDoubleTap",value:function(t){var e=this.getPointer(t.center);this.selectionHandler.generateClickEvent("doubleClick",t,e)}},{key:"onHold",value:function(t){var e=this.getPointer(t.center),r=this.selectionHandler.options.multiselect;this.checkSelectionChanges(e,r),this.selectionHandler.commitAndEmit(e,t),this.selectionHandler.generateClickEvent("click",t,e),this.selectionHandler.generateClickEvent("hold",t,e)}},{key:"onRelease",value:function(t){if((new Date).valueOf()-this.touchTime>10){var e=this.getPointer(t.center);this.selectionHandler.generateClickEvent("release",t,e),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(t){var e=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler.generateClickEvent("oncontext",t,e)}},{key:"checkSelectionChanges",value:function(t){!0===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t)}},{key:"_determineDifference",value:function(t,e){var r=function(t,e){for(var r=[],n=0;n<t.length;n++){var i=t[n];-1===bi(e).call(e,i)&&r.push(i)}return r};return{nodes:r(t.nodes,e.nodes),edges:r(t.edges,e.edges)}}},{key:"onDragStart",value:function(t){if(!this.drag.dragging){void 0===this.drag.pointer&&this.onTouch(t);var e=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=It({},this.body.view.translation),this.drag.nodeId=void 0,t.srcEvent.shiftKey){this.body.selectionBox.show=!0;var r=this.getPointer(t.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)}}if(void 0!==e&&!0===this.options.dragNodes){this.drag.nodeId=e.id,!1===e.isSelected()&&(this.selectionHandler.unselectAll(),this.selectionHandler.selectObject(e)),this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer);var n,i=function(t,e){var r;if(void 0===Ao||null==nn(t)){if(no(t)||(r=function(t,e){var r;if(t){if("string"==typeof t)return Gh(t,e);var n=lo(r=Object.prototype.toString.call(t)).call(r,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Cn(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gh(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=rn(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(this.selectionHandler.getSelectedNodes());try{for(i.s();!(n=i.n()).done;){var o=n.value,a={id:o.id,node:o,x:o.x,y:o.y,xFixed:o.options.fixed.x,yFixed:o.options.fixed.y};o.options.fixed.x=!0,o.options.fixed.y=!0,this.drag.selection.push(a)}}catch(t){i.e(t)}finally{i.f()}}else this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}}},{key:"onDrag",value:function(t){var e=this;if(!0!==this.drag.pinched){this.body.emitter.emit("unlockNode");var r=this.getPointer(t.center),n=this.drag.selection;if(n&&n.length&&!0===this.options.dragNodes){this.selectionHandler.generateClickEvent("dragging",t,r);var i=r.x-this.drag.pointer.x,o=r.y-this.drag.pointer.y;Gn(n).call(n,function(t){var r=t.node;!1===t.xFixed&&(r.x=e.canvas._XconvertDOMtoCanvas(e.canvas._XconvertCanvasToDOM(t.x)+i)),!1===t.yFixed&&(r.y=e.canvas._YconvertDOMtoCanvas(e.canvas._YconvertCanvasToDOM(t.y)+o))}),this.body.emitter.emit("startSimulation")}else{if(t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,r,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(t);this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(r.x),y:this.canvas._YconvertDOMtoCanvas(r.y)},this.body.emitter.emit("_requestRedraw")}if(!0===this.options.dragView&&!t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,r,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(t);var a=r.x-this.drag.pointer.x,s=r.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+a,y:this.drag.translation.y+s},this.body.emitter.emit("_requestRedraw")}}}}},{key:"onDragEnd",value:function(t){var e=this;if(this.drag.dragging=!1,this.body.selectionBox.show){var r;this.body.selectionBox.show=!1;var n=this.body.selectionBox.position,i={minX:Math.min(n.start.x,n.end.x),minY:Math.min(n.start.y,n.end.y),maxX:Math.max(n.start.x,n.end.x),maxY:Math.max(n.start.y,n.end.y)},o=ui(r=this.body.nodeIndices).call(r,function(t){var r=e.body.nodes[t];return r.x>=i.minX&&r.x<=i.maxX&&r.y>=i.minY&&r.y<=i.maxY});Gn(o).call(o,function(t){return e.selectionHandler.selectObject(e.body.nodes[t])});var a=this.getPointer(t.center);this.selectionHandler.commitAndEmit(a,t),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{var s=this.drag.selection;s&&s.length?(Gn(s).call(s,function(t){t.node.options.fixed.x=t.xFixed,t.node.options.fixed.y=t.yFixed}),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}},{key:"onPinch",value:function(t){var e=this.getPointer(t.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var r=this.pinch.scale*t.scale;this.zoom(r,e)}},{key:"zoom",value:function(t,e){if(!0===this.options.zoomView){var r=this.body.view.scale;t<1e-5&&(t=1e-5),t>10&&(t=10);var n=void 0;void 0!==this.drag&&!0===this.drag.dragging&&(n=this.canvas.DOMtoCanvas(this.drag.pointer));var i=this.body.view.translation,o=t/r,a=(1-o)*e.x+i.x*o,s=(1-o)*e.y+i.y*o;if(this.body.view.scale=t,this.body.view.translation={x:a,y:s},null!=n){var l=this.canvas.canvasToDOM(n);this.drag.pointer.x=l.x,this.drag.pointer.y=l.y}this.body.emitter.emit("_requestRedraw"),r<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:e}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:e})}}},{key:"onMouseWheel",value:function(t){if(!0===this.options.zoomView){if(0!==t.deltaY){var e=this.body.view.scale;e*=1+(t.deltaY<0?1:-1)*(.1*this.options.zoomSpeed);var r=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(e,r)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var e=this,r=this.getPointer({x:t.clientX,y:t.clientY}),n=!1;void 0!==this.popup&&(!1===this.popup.hidden&&this._checkHidePopup(r),!1===this.popup.hidden&&(n=!0,this.popup.setPosition(r.x+3,r.y-5),this.popup.show())),!1===this.options.keyboard.bindToWindow&&!0===this.options.keyboard.enabled&&this.canvas.frame.focus(),!1===n&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=og(function(){return e._checkShowPopup(r)},this.options.tooltipDelay))),!0===this.options.hover&&this.selectionHandler.hoverObject(t,r)}},{key:"_checkShowPopup",value:function(t){var e=this.canvas._XconvertDOMtoCanvas(t.x),r=this.canvas._YconvertDOMtoCanvas(t.y),n={left:e,top:r,right:e,bottom:r},i=void 0===this.popupObj?void 0:this.popupObj.id,o=!1,a="node";if(void 0===this.popupObj){for(var s,l=this.body.nodeIndices,g=this.body.nodes,c=[],u=0;u<l.length;u++)!0===(s=g[l[u]]).isOverlappingWith(n)&&(o=!0,void 0!==s.getTitle()&&c.push(l[u]));c.length>0&&(this.popupObj=g[c[c.length-1]],o=!0)}if(void 0===this.popupObj&&!1===o){for(var h,d=this.body.edgeIndices,A=this.body.edges,f=[],C=0;C<d.length;C++)!0===(h=A[d[C]]).isOverlappingWith(n)&&!0===h.connected&&void 0!==h.getTitle()&&f.push(d[C]);f.length>0&&(this.popupObj=A[f[f.length-1]],a="edge")}void 0!==this.popupObj?this.popupObj.id!==i&&(void 0===this.popup&&(this.popup=new Vh(this.canvas.frame)),this.popup.popupTargetType=a,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(t){var e=this.selectionHandler._pointerToPositionObject(t),r=!1;if("node"===this.popup.popupTargetType){if(void 0!==this.body.nodes[this.popup.popupTargetId]&&!0===(r=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(e))){var n=this.selectionHandler.getNodeAt(t);r=void 0!==n&&n.id===this.popup.popupTargetId}}else void 0===this.selectionHandler.getNodeAt(t)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(r=this.body.edges[this.popup.popupTargetId].isOverlappingWith(e));!1===r&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),t}(),Zh=Fl.getWeakData,Hh=Be.set,Wh=Be.getterFor,Yh=Ze.find,Xh=Ze.findIndex,qh=0,Qh=function(t){return t.frozen||(t.frozen=new Kh)},Kh=function(){this.entries=[]},Jh=function(t,e){return Yh(t.entries,function(t){return t[0]===e})};Kh.prototype={get:function(t){var e=Jh(this,t);if(e)return e[1]},has:function(t){return!!Jh(this,t)},set:function(t,e){var r=Jh(this,t);r?r[1]=e:this.entries.push([t,e])},delete:function(t){var e=Xh(this.entries,function(e){return e[0]===t});return~e&&this.entries.splice(e,1),!!~e}};var $h,td,ed,rd,nd,id={getConstructor:function(t,e,r,n){var i=t(function(t,o){Vl(t,i,e),Hh(t,{type:e,id:qh++,frozen:void 0}),null!=o&&jl(o,t[n],{that:t,AS_ENTRIES:r})}),o=Wh(e),a=function(t,e,r){var n=o(t),i=Zh(F(e),!0);return!0===i?Qh(n).set(e,r):i[n.id]=r,t};return Yl(i.prototype,{delete:function(t){var e=o(this);if(!I(t))return!1;var r=Zh(t);return!0===r?Qh(e).delete(t):r&&y(r,e.id)&&delete r[e.id]},has:function(t){var e=o(this);if(!I(t))return!1;var r=Zh(t);return!0===r?Qh(e).has(t):r&&y(r,e.id)}}),Yl(i.prototype,r?{get:function(t){var e=o(this);if(I(t)){var r=Zh(t);return!0===r?Qh(e).get(t):r?r[e.id]:void 0}},set:function(t,e){return a(this,t,e)}}:{add:function(t){return a(this,t,!0)}}),i}},od=(n(function(t){var e,r=Be.enforce,n=!o.ActiveXObject&&"ActiveXObject"in o,i=Object.isExtensible,a=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},s=t.exports=Wl("WeakMap",a,id);if(Re&&n){e=id.getConstructor(a,"WeakMap",!0),Fl.REQUIRED=!0;var l=s.prototype,g=l.delete,c=l.has,u=l.get,h=l.set;Yl(l,{delete:function(t){if(I(t)&&!i(t)){var n=r(this);return n.frozen||(n.frozen=new e),g.call(this,t)||n.frozen.delete(t)}return g.call(this,t)},has:function(t){if(I(t)&&!i(t)){var n=r(this);return n.frozen||(n.frozen=new e),c.call(this,t)||n.frozen.has(t)}return c.call(this,t)},get:function(t){if(I(t)&&!i(t)){var n=r(this);return n.frozen||(n.frozen=new e),c.call(this,t)?u.call(this,t):n.frozen.get(t)}return u.call(this,t)},set:function(t,n){if(I(t)&&!i(t)){var o=r(this);o.frozen||(o.frozen=new e),c.call(this,t)?h.call(this,t,n):o.frozen.set(t,n)}else h.call(this,t,n);return this}})}}),P.WeakMap);function ad(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function sd(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}function ld(t,e){var r;if(void 0===Ao||null==nn(t)){if(no(t)||(r=function(t,e){var r;if(t){if("string"==typeof t)return gd(t,e);var n=lo(r=Object.prototype.toString.call(t)).call(r,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Cn(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gd(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=rn(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function gd(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cd(t,e){var r,n=new ec,i=ld(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.has(o)||n.add(o)}}catch(t){i.e(t)}finally{i.f()}return n}var ud=function(){function t(){Rl(this,t),$h.set(this,new ec),td.set(this,new ec)}return Ll(t,[{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,i=e;n<i.length;n++){var o=i[n];ad(this,td).add(o)}}},{key:"delete",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,i=e;n<i.length;n++){var o=i[n];ad(this,td).delete(o)}}},{key:"clear",value:function(){ad(this,td).clear()}},{key:"getSelection",value:function(){return go(ad(this,td))}},{key:"getChanges",value:function(){return{added:go(cd(ad(this,$h),ad(this,td))),deleted:go(cd(ad(this,td),ad(this,$h))),previous:go(new ec(ad(this,$h))),current:go(new ec(ad(this,td)))}}},{key:"commit",value:function(){var t=this.getChanges();sd(this,$h,ad(this,td)),sd(this,td,new ec(ad(this,$h)));var e,r=ld(t.added);try{for(r.s();!(e=r.n()).done;)e.value.select()}catch(t){r.e(t)}finally{r.f()}var n,i=ld(t.deleted);try{for(i.s();!(n=i.n()).done;)n.value.unselect()}catch(t){i.e(t)}finally{i.f()}return t}},{key:"size",get:function(){return ad(this,td).size}}]),t}();$h=new od,td=new od;var hd=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};Rl(this,t),ed.set(this,new ud),rd.set(this,new ud),nd.set(this,void 0),sd(this,nd,e)}return Ll(t,[{key:"getNodes",value:function(){return ad(this,ed).getSelection()}},{key:"getEdges",value:function(){return ad(this,rd).getSelection()}},{key:"addNodes",value:function(){var t;(t=ad(this,ed)).add.apply(t,arguments)}},{key:"addEdges",value:function(){var t;(t=ad(this,rd)).add.apply(t,arguments)}},{key:"deleteNodes",value:function(t){ad(this,ed).delete(t)}},{key:"deleteEdges",value:function(t){ad(this,rd).delete(t)}},{key:"clear",value:function(){ad(this,ed).clear(),ad(this,rd).clear()}},{key:"commit",value:function(){for(var t,e,r={nodes:ad(this,ed).commit(),edges:ad(this,rd).commit()},n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(t=ad(this,nd)).call.apply(t,ho(e=[this,r]).call(e,i)),r}},{key:"sizeNodes",get:function(){return ad(this,ed).size}},{key:"sizeEdges",get:function(){return ad(this,rd).size}}]),t}();function dd(t,e){var r;if(void 0===Ao||null==nn(t)){if(no(t)||(r=function(t,e){var r;if(t){if("string"==typeof t)return Ad(t,e);var n=lo(r=Object.prototype.toString.call(t)).call(r,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Cn(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ad(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=rn(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Ad(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}ed=new od,rd=new od,nd=new od;var fd=function(){function t(e,r){var n=this;Rl(this,t),this.body=e,this.canvas=r,this._selectionAccumulator=new hd,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},It(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",function(){n.updateSelection()})}return Ll(t,[{key:"setOptions",value:function(t){void 0!==t&&Oo(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,t)}},{key:"selectOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var r=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),void 0!==r&&(e=this.selectObject(r)),this.body.emitter.emit("_requestRedraw")}return e}},{key:"selectAdditionalOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var r=this.getNodeAt(t)||this.getEdgeAt(t);void 0!==r&&(e=!0,!0===r.isSelected()?this.deselectObject(r):this.selectObject(r),this.body.emitter.emit("_requestRedraw"))}return e}},{key:"_initBaseEvent",value:function(t,e){var r={};return r.pointer={DOM:{x:e.x,y:e.y},canvas:this.canvas.DOMtoCanvas(e)},r.event=t,r}},{key:"generateClickEvent",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this._initBaseEvent(e,r);if(!0===i)o.nodes=[],o.edges=[];else{var a=this.getSelection();o.nodes=a.nodes,o.edges=a.edges}void 0!==n&&(o.previousSelection=n),"click"==t&&(o.items=this.getClickedItems(r)),void 0!==e.controlEdge&&(o.controlEdge=e.controlEdge),this.body.emitter.emit(t,o)}},{key:"selectObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.selectConnectedEdges;if(void 0!==t){var r;if(t instanceof Su)!0===e&&(r=this._selectionAccumulator).addEdges.apply(r,go(t.edges)),this._selectionAccumulator.addNodes(t);else this._selectionAccumulator.addEdges(t);return!0}return!1}},{key:"deselectObject",value:function(t){!0===t.isSelected()&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var e=[],r=this.body.nodes,n=0;n<this.body.nodeIndices.length;n++){var i=this.body.nodeIndices[n];r[i].isOverlappingWith(t)&&e.push(i)}return e}},{key:"_pointerToPositionObject",value:function(t){var e=this.canvas.DOMtoCanvas(t);return{left:e.x-1,top:e.y+1,right:e.x+1,bottom:e.y-1}}},{key:"getNodeAt",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this._pointerToPositionObject(t),n=this._getAllNodesOverlappingWith(r);return n.length>0?!0===e?this.body.nodes[n[n.length-1]]:n[n.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(t,e){for(var r=this.body.edges,n=0;n<this.body.edgeIndices.length;n++){var i=this.body.edgeIndices[n];r[i].isOverlappingWith(t)&&e.push(i)}}},{key:"_getAllEdgesOverlappingWith",value:function(t){var e=[];return this._getEdgesOverlappingWith(t,e),e}},{key:"getEdgeAt",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.canvas.DOMtoCanvas(t),n=10,i=null,o=this.body.edges,a=0;a<this.body.edgeIndices.length;a++){var s=this.body.edgeIndices[a],l=o[s];if(l.connected){var g=l.from.x,c=l.from.y,u=l.to.x,h=l.to.y,d=l.edgeType.getDistanceToEdge(g,c,u,h,r.x,r.y);d<n&&(i=s,n=d)}}return null!==i?!0===e?this.body.edges[i]:i:void 0}},{key:"_addToHover",value:function(t){t instanceof Su?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){var e;t instanceof Su?(this._selectionAccumulator.deleteNodes(t),(e=this._selectionAccumulator).deleteEdges.apply(e,go(t.edges))):this._selectionAccumulator.deleteEdges(t)}},{key:"unselectAll",value:function(){this._selectionAccumulator.clear(),this._selectionAccumulator.commit()}},{key:"getSelectedNodeCount",value:function(){return this._selectionAccumulator.sizeNodes}},{key:"getSelectedEdgeCount",value:function(){return this._selectionAccumulator.sizeEdges}},{key:"_hoverConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var r=t.edges[e];r.hover=!0,this._addToHover(r)}}},{key:"emitBlurEvent",value:function(t,e,r){var n=this._initBaseEvent(t,e);!0===r.hover&&(r.hover=!1,r instanceof Su?(n.node=r.id,this.body.emitter.emit("blurNode",n)):(n.edge=r.id,this.body.emitter.emit("blurEdge",n)))}},{key:"emitHoverEvent",value:function(t,e,r){var n=this._initBaseEvent(t,e),i=!1;return!1===r.hover&&(r.hover=!0,this._addToHover(r),i=!0,r instanceof Su?(n.node=r.id,this.body.emitter.emit("hoverNode",n)):(n.edge=r.id,this.body.emitter.emit("hoverEdge",n))),i}},{key:"hoverObject",value:function(t,e){var r=this.getNodeAt(e);void 0===r&&(r=this.getEdgeAt(e));var n=!1;for(var i in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,i)&&(void 0===r||r instanceof Su&&r.id!=i||r instanceof Ah)&&(this.emitBlurEvent(t,e,this.hoverObj.nodes[i]),delete this.hoverObj.nodes[i],n=!0);for(var o in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,o)&&(!0===n?(this.hoverObj.edges[o].hover=!1,delete this.hoverObj.edges[o]):(void 0===r||r instanceof Ah&&r.id!=o||r instanceof Su&&!r.hover)&&(this.emitBlurEvent(t,e,this.hoverObj.edges[o]),delete this.hoverObj.edges[o],n=!0));if(void 0!==r){var a=Qi(this.hoverObj.edges).length,s=Qi(this.hoverObj.nodes).length;(n||r instanceof Ah&&0===a&&0===s||r instanceof Su&&0===a&&0===s)&&(n=this.emitHoverEvent(t,e,r)),r instanceof Su&&!0===this.options.hoverConnectedEdges&&this._hoverConnectedEdges(r)}!0===n&&this.body.emitter.emit("_requestRedraw")}},{key:"commitAndEmit",value:function(t,e){var r=!1,n=this._selectionAccumulator.commit(),i={nodes:n.nodes.previous,edges:n.edges.previous};n.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",e,t,i),r=!0),n.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",e,t,i),r=!0),n.nodes.added.length>0&&(this.generateClickEvent("selectNode",e,t),r=!0),n.edges.added.length>0&&(this.generateClickEvent("selectEdge",e,t),r=!0),!0===r&&this.generateClickEvent("select",e,t)}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}},{key:"getSelectedNodes",value:function(){return this._selectionAccumulator.getNodes()}},{key:"getSelectedEdges",value:function(){return this._selectionAccumulator.getEdges()}},{key:"getSelectedNodeIds",value:function(){var t;return ro(t=this._selectionAccumulator.getNodes()).call(t,function(t){return t.id})}},{key:"getSelectedEdgeIds",value:function(){var t;return ro(t=this._selectionAccumulator.getEdges()).call(t,function(t){return t.id})}},{key:"setSelection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||!t.nodes&&!t.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((e.unselectAll||void 0===e.unselectAll)&&this.unselectAll(),t.nodes){var r,n=dd(t.nodes);try{for(n.s();!(r=n.n()).done;){var i=r.value,o=this.body.nodes[i];if(!o)throw new RangeError('Node with id "'+i+'" not found');this.selectObject(o,e.highlightEdges)}}catch(t){n.e(t)}finally{n.f()}}if(t.edges){var a,s=dd(t.edges);try{for(s.s();!(a=s.n()).done;){var l=a.value,g=this.body.edges[l];if(!g)throw new RangeError('Edge with id "'+l+'" not found');this.selectObject(g)}}catch(t){s.e(t)}finally{s.f()}}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}},{key:"selectNodes",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:e})}},{key:"selectEdges",value:function(t){if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,t.id)||this._selectionAccumulator.deleteNodes(t);for(var e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}},{key:"getClickedItems",value:function(t){for(var e=this.canvas.DOMtoCanvas(t),r=[],n=this.body.nodeIndices,i=this.body.nodes,o=n.length-1;o>=0;o--){var a=i[n[o]].getItemsOnPoint(e);r.push.apply(r,a)}for(var s=this.body.edgeIndices,l=this.body.edges,g=s.length-1;g>=0;g--){var c=l[s[g]].getItemsOnPoint(e);r.push.apply(r,c)}return r}}]),t}(),Cd=n(function(t,e){!function(t){t.__esModule=!0,t.sort=function(t,r,n,i){if(!Array.isArray(t))throw new TypeError("Can only sort arrays");r?"function"!=typeof r&&(i=n,n=r,r=a):r=a,n||(n=0),i||(i=t.length);var o=i-n;if(!(o<2)){var g=0;if(o<e)l(t,n,i,n+(g=s(t,n,i,r)),r);else{var c=new u(t,r),h=function(t){for(var r=0;t>=e;)r|=1&t,t>>=1;return t+r}(o);do{if((g=s(t,n,i,r))<h){var d=o;d>h&&(d=h),l(t,n,n+d,n+g,r),g=d}c.pushRun(n,g),c.mergeRuns(),o-=g,n+=g}while(0!==o);c.forceMergeRuns()}}};var e=32,r=7,n=256,i=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9];function o(t){return t<1e5?t<100?t<10?0:1:t<1e4?t<1e3?2:3:4:t<1e7?t<1e6?5:6:t<1e9?t<1e8?7:8:9}function a(t,e){if(t===e)return 0;if(~~t===t&&~~e===e){if(0===t||0===e)return t<e?-1:1;if(t<0||e<0){if(e>=0)return-1;if(t>=0)return 1;t=-t,e=-e}var r=o(t),n=o(e),a=0;return r<n?(t*=i[n-r-1],e/=10,a=-1):r>n&&(e*=i[r-n-1],t/=10,a=1),t===e?a:t<e?-1:1}var s=String(t),l=String(e);return s===l?0:s<l?-1:1}function s(t,e,r,n){var i=e+1;if(i===r)return 1;if(n(t[i++],t[e])<0){for(;i<r&&n(t[i],t[i-1])<0;)i++;!function(t,e,r){for(r--;e<r;){var n=t[e];t[e++]=t[r],t[r--]=n}}(t,e,i)}else for(;i<r&&n(t[i],t[i-1])>=0;)i++;return i-e}function l(t,e,r,n,i){for(n===e&&n++;n<r;n++){for(var o=t[n],a=e,s=n;a<s;){var l=a+s>>>1;i(o,t[l])<0?s=l:a=l+1}var g=n-a;switch(g){case 3:t[a+3]=t[a+2];case 2:t[a+2]=t[a+1];case 1:t[a+1]=t[a];break;default:for(;g>0;)t[a+g]=t[a+g-1],g--}t[a]=o}}function g(t,e,r,n,i,o){var a=0,s=0,l=1;if(o(t,e[r+i])>0){for(s=n-i;l<s&&o(t,e[r+i+l])>0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}else{for(s=i+1;l<s&&o(t,e[r+i-l])<=0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s);var g=a;a=i-l,l=i-g}for(a++;a<l;){var c=a+(l-a>>>1);o(t,e[r+c])>0?a=c+1:l=c}return l}function c(t,e,r,n,i,o){var a=0,s=0,l=1;if(o(t,e[r+i])<0){for(s=i+1;l<s&&o(t,e[r+i-l])<0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s);var g=a;a=i-l,l=i-g}else{for(s=n-i;l<s&&o(t,e[r+i+l])>=0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}for(a++;a<l;){var c=a+(l-a>>>1);o(t,e[r+c])<0?l=c:a=c+1}return l}var u=function(){function t(e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.array=null,this.compare=null,this.minGallop=r,this.length=0,this.tmpStorageLength=n,this.stackLength=0,this.runStart=null,this.runLength=null,this.stackSize=0,this.array=e,this.compare=i,this.length=e.length,this.length<2*n&&(this.tmpStorageLength=this.length>>>1),this.tmp=new Array(this.tmpStorageLength),this.stackLength=this.length<120?5:this.length<1542?10:this.length<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength)}return t.prototype.pushRun=function(t,e){this.runStart[this.stackSize]=t,this.runLength[this.stackSize]=e,this.stackSize+=1},t.prototype.mergeRuns=function(){for(;this.stackSize>1;){var t=this.stackSize-2;if(t>=1&&this.runLength[t-1]<=this.runLength[t]+this.runLength[t+1]||t>=2&&this.runLength[t-2]<=this.runLength[t]+this.runLength[t-1])this.runLength[t-1]<this.runLength[t+1]&&t--;else if(this.runLength[t]>this.runLength[t+1])break;this.mergeAt(t)}},t.prototype.forceMergeRuns=function(){for(;this.stackSize>1;){var t=this.stackSize-2;t>0&&this.runLength[t-1]<this.runLength[t+1]&&t--,this.mergeAt(t)}},t.prototype.mergeAt=function(t){var e=this.compare,r=this.array,n=this.runStart[t],i=this.runLength[t],o=this.runStart[t+1],a=this.runLength[t+1];this.runLength[t]=i+a,t===this.stackSize-3&&(this.runStart[t+1]=this.runStart[t+2],this.runLength[t+1]=this.runLength[t+2]),this.stackSize--;var s=c(r[o],r,n,i,0,e);n+=s,0!=(i-=s)&&0!==(a=g(r[n+i-1],r,o,a,a-1,e))&&(i<=a?this.mergeLow(n,i,o,a):this.mergeHigh(n,i,o,a))},t.prototype.mergeLow=function(t,e,n,i){var o=this.compare,a=this.array,s=this.tmp,l=0;for(l=0;l<e;l++)s[l]=a[t+l];var u=0,h=n,d=t;if(a[d++]=a[h++],0!=--i)if(1!==e){for(var A=this.minGallop;;){var f=0,C=0,p=!1;do{if(o(a[h],s[u])<0){if(a[d++]=a[h++],C++,f=0,0==--i){p=!0;break}}else if(a[d++]=s[u++],f++,C=0,1==--e){p=!0;break}}while((f|C)<A);if(p)break;do{if(0!==(f=c(a[h],s,u,e,0,o))){for(l=0;l<f;l++)a[d+l]=s[u+l];if(d+=f,u+=f,(e-=f)<=1){p=!0;break}}if(a[d++]=a[h++],0==--i){p=!0;break}if(0!==(C=g(s[u],a,h,i,0,o))){for(l=0;l<C;l++)a[d+l]=a[h+l];if(d+=C,h+=C,0==(i-=C)){p=!0;break}}if(a[d++]=s[u++],1==--e){p=!0;break}A--}while(f>=r||C>=r);if(p)break;A<0&&(A=0),A+=2}if(this.minGallop=A,A<1&&(this.minGallop=1),1===e){for(l=0;l<i;l++)a[d+l]=a[h+l];a[d+i]=s[u]}else{if(0===e)throw new Error("mergeLow preconditions were not respected");for(l=0;l<e;l++)a[d+l]=s[u+l]}}else{for(l=0;l<i;l++)a[d+l]=a[h+l];a[d+i]=s[u]}else for(l=0;l<e;l++)a[d+l]=s[u+l]},t.prototype.mergeHigh=function(t,e,n,i){var o=this.compare,a=this.array,s=this.tmp,l=0;for(l=0;l<i;l++)s[l]=a[n+l];var u=t+e-1,h=i-1,d=n+i-1,A=0,f=0;if(a[d--]=a[u--],0!=--e)if(1!==i){for(var C=this.minGallop;;){var p=0,I=0,v=!1;do{if(o(s[h],a[u])<0){if(a[d--]=a[u--],p++,I=0,0==--e){v=!0;break}}else if(a[d--]=s[h--],I++,p=0,1==--i){v=!0;break}}while((p|I)<C);if(v)break;do{if(0!=(p=e-c(s[h],a,t,e,e-1,o))){for(e-=p,f=1+(d-=p),A=1+(u-=p),l=p-1;l>=0;l--)a[f+l]=a[A+l];if(0===e){v=!0;break}}if(a[d--]=s[h--],1==--i){v=!0;break}if(0!=(I=i-g(a[u],s,0,i,i-1,o))){for(i-=I,f=1+(d-=I),A=1+(h-=I),l=0;l<I;l++)a[f+l]=s[A+l];if(i<=1){v=!0;break}}if(a[d--]=a[u--],0==--e){v=!0;break}C--}while(p>=r||I>=r);if(v)break;C<0&&(C=0),C+=2}if(this.minGallop=C,C<1&&(this.minGallop=1),1===i){for(f=1+(d-=e),A=1+(u-=e),l=e-1;l>=0;l--)a[f+l]=a[A+l];a[d]=s[h]}else{if(0===i)throw new Error("mergeHigh preconditions were not respected");for(A=d-(i-1),l=0;l<i;l++)a[A+l]=s[l]}}else{for(f=1+(d-=e),A=1+(u-=e),l=e-1;l>=0;l--)a[f+l]=a[A+l];a[d]=s[h]}else for(A=d-(i-1),l=0;l<i;l++)a[A+l]=s[l]},t}()}(e)});function pd(t){var e=function(){if("undefined"==typeof Reflect||!yg)return!1;if(yg.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(yg(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wg(t);if(e){var i=Wg(this).constructor;r=yg(n,arguments,i)}else r=n.apply(this,arguments);return Zg(this,r)}}var Id=function(){function t(){Rl(this,t)}return Ll(t,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(t){return this.fake_use(t),this.abstract()}},{key:"setPosition",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.fake_use(t,e,r),this.abstract()}},{key:"getTreeSize",value:function(t){return this.fake_use(t),this.abstract()}},{key:"sort",value:function(t){this.fake_use(t),this.abstract()}},{key:"fix",value:function(t,e){this.fake_use(t,e),this.abstract()}},{key:"shift",value:function(t,e){this.fake_use(t,e),this.abstract()}}]),t}(),vd=function(t){Ug(r,Id);var e=pd(r);function r(t){var n;return Rl(this,r),(n=e.call(this)).layout=t,n}return Ll(r,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(t){return t.x}},{key:"setPosition",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==r&&this.layout.hierarchical.addToOrdering(t,r),t.x=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_x,max:e.max_x}}},{key:"sort",value:function(t){Cd.sort(t,function(t,e){return t.x-e.x})}},{key:"fix",value:function(t,e){t.y=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.y=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].x+=e}}]),r}(),md=function(t){Ug(r,Id);var e=pd(r);function r(t){var n;return Rl(this,r),(n=e.call(this)).layout=t,n}return Ll(r,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(t){return t.y}},{key:"setPosition",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==r&&this.layout.hierarchical.addToOrdering(t,r),t.y=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_y,max:e.max_y}}},{key:"sort",value:function(t){Cd.sort(t,function(t,e){return t.y-e.y})}},{key:"fix",value:function(t,e){t.x=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.x=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].y+=e}}]),r}(),yd=Ze.every,bd=On("every"),xd=Ln("every");Z({target:"Array",proto:!0,forced:!bd||!xd},{every:function(t){return yd(this,t,arguments.length>1?arguments[1]:void 0)}});var _d=X("Array").every,wd=Array.prototype,kd=function(t){var e=t.every;return t===wd||t instanceof Array&&e===wd.every?_d:e};function Td(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Md(t,e,r,n){var i,o,a=mn(null),s=Cc(i=go(Pg(n).call(n))).call(i,function(t,e){return t+1+e.edges.length},0),l=r+"Id",g="to"===r?1:-1,c=function(t,e){var r;if(void 0===Ao||null==nn(t)){if(no(t)||(r=function(t,e){var r;if(t){if("string"==typeof t)return Td(t,e);var n=lo(r=Object.prototype.toString.call(t)).call(r,8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Cn(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Td(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=rn(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(n);try{var u=function(){var i=Yi(o.value,2),c=i[0],u=i[1];if(!n.has(c)||!t(u))return"continue";a[c]=0;for(var h=[u],d=0,A=void 0,f=function(){var t,i;if(!n.has(c))return"continue";var o=a[A.id]+g;if(Gn(t=ui(i=A.edges).call(i,function(t){return t.connected&&t.to!==t.from&&t[r]!==A&&n.has(t.toId)&&n.has(t.fromId)})).call(t,function(t){var n=t[l],i=a[n];(null==i||e(o,i))&&(a[n]=o,h.push(t[r]))}),d>s)return{v:{v:function(t,e){var r=new ec;return Gn(t).call(t,function(t){var e;Gn(e=t.edges).call(e,function(t){t.connected&&r.add(t)})}),Gn(r).call(r,function(t){var r=t.from.id,n=t.to.id;null==e[r]&&(e[r]=0),(null==e[n]||e[r]>=e[n])&&(e[n]=e[r]+1)}),e}(n,a)}};++d};A=h.pop();){var C=f();if("continue"!==C&&"object"===ao(C))return C.v}};for(c.s();!(o=c.n()).done;){var h=u();if("continue"!==h&&"object"===ao(h))return h.v}}catch(t){c.e(t)}finally{c.f()}return a}var Ed=function(){function t(){Rl(this,t),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return Ll(t,[{key:"addRelation",value:function(t,e){void 0===this.childrenReference[t]&&(this.childrenReference[t]=[]),this.childrenReference[t].push(e),void 0===this.parentReference[e]&&(this.parentReference[e]=[]),this.parentReference[e].push(t)}},{key:"checkIfTree",value:function(){for(var t in this.parentReference)if(this.parentReference[t].length>1)return void(this.isTree=!1);this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(t,e){void 0!==e&&void 0===this.trees[t.id]&&(this.trees[t.id]=e,this.treeIndex=Math.max(e,this.treeIndex))}},{key:"ensureLevel",value:function(t){void 0===this.levels[t]&&(this.levels[t]=0)}},{key:"getMaxLevel",value:function(t){var e=this,r={};return function t(n){if(void 0!==r[n])return r[n];var i=e.levels[n];if(e.childrenReference[n]){var o=e.childrenReference[n];if(o.length>0)for(var a=0;a<o.length;a++)i=Math.max(i,t(o[a]))}return r[n]=i,i}(t)}},{key:"levelDownstream",value:function(t,e){void 0===this.levels[e.id]&&(void 0===this.levels[t.id]&&(this.levels[t.id]=0),this.levels[e.id]=this.levels[t.id]+1)}},{key:"setMinLevelToZero",value:function(t){var e=1e9;for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&void 0!==this.levels[r]&&(e=Math.min(this.levels[r],e));for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&void 0!==this.levels[n]&&(this.levels[n]-=e)}},{key:"getTreeSize",value:function(t,e){var r=1e9,n=-1e9,i=1e9,o=-1e9;for(var a in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,a)&&this.trees[a]===e){var s=t[a];r=Math.min(s.x,r),n=Math.max(s.x,n),i=Math.min(s.y,i),o=Math.max(s.y,o)}return{min_x:r,max_x:n,min_y:i,max_y:o}}},{key:"hasSameParent",value:function(t,e){var r=this.parentReference[t.id],n=this.parentReference[e.id];if(void 0===r||void 0===n)return!1;for(var i=0;i<r.length;i++)for(var o=0;o<n.length;o++)if(r[i]==n[o])return!0;return!1}},{key:"inSameSubNetwork",value:function(t,e){return this.trees[t.id]===this.trees[e.id]}},{key:"getLevels",value:function(){return Qi(this.distributionOrdering)}},{key:"addToOrdering",value:function(t,e){void 0===this.distributionOrdering[e]&&(this.distributionOrdering[e]=[]);var r=!1,n=this.distributionOrdering[e];for(var i in n)if(n[i]===t){r=!0;break}r||(this.distributionOrdering[e].push(t),this.distributionIndex[t.id]=this.distributionOrdering[e].length-1)}}]),t}(),Od=function(){function t(e){Rl(this,t),this.body=e,this._resetRNG(Math.random()+":"+Xi()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},It(this.options,this.defaultOptions),this.bindEventListeners()}return Ll(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_dataLoaded",function(){t.layoutNetwork()}),this.body.emitter.on("_resetHierarchicalLayout",function(){t.setupHierarchicalLayout()}),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",function(){if(!0===t.options.hierarchical.enabled){var e=t.direction.curveType();t.body.emitter.emit("_forceDisableDynamicCurves",e,!1)}})}},{key:"setOptions",value:function(t,e){if(void 0!==t){var r=this.options.hierarchical,n=r.enabled;if(Oo(["randomSeed","improvedLayout","clusterThreshold"],this.options,t),Wo(this.options,t,"hierarchical"),void 0!==t.randomSeed&&this._resetRNG(t.randomSeed),!0===r.enabled)return!0===n&&this.body.emitter.emit("refresh",!0),"RL"===r.direction||"DU"===r.direction?r.levelSeparation>0&&(r.levelSeparation*=-1):r.levelSeparation<0&&(r.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(e);if(!0===n)return this.body.emitter.emit("refresh"),Ro(e,this.optionsBackup)}return e}},{key:"_resetRNG",value:function(t){this.initialRandomSeed=t,this._rng=yo(this.initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(!0===this.options.hierarchical.enabled){var e=this.optionsBackup.physics;void 0===t.physics||!0===t.physics?(t.physics={enabled:void 0===e.enabled||e.enabled,solver:"hierarchicalRepulsion"},e.enabled=void 0===e.enabled||e.enabled,e.solver=e.solver||"barnesHut"):"object"===ao(t.physics)?(e.enabled=void 0===t.physics.enabled||t.physics.enabled,e.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):!1!==t.physics&&(e.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var r=this.direction.curveType();if(void 0===t.edges)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(void 0===t.edges.smooth)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if("boolean"==typeof t.edges.smooth)this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:r};else{var n=t.edges.smooth;void 0!==n.type&&"dynamic"!==n.type&&(r=n.type),this.optionsBackup.edges={smooth:{enabled:void 0===n.enabled||n.enabled,type:void 0===n.type?"dynamic":n.type,roundness:void 0===n.roundness?.5:n.roundness,forceDirection:void 0!==n.forceDirection&&n.forceDirection}},t.edges.smooth={enabled:void 0===n.enabled||n.enabled,type:r,roundness:void 0===n.roundness?.5:n.roundness,forceDirection:void 0!==n.forceDirection&&n.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",r)}return t}},{key:"positionInitially",value:function(t){if(!0!==this.options.hierarchical.enabled){this._resetRNG(this.initialRandomSeed);for(var e=t.length+50,r=0;r<t.length;r++){var n=t[r],i=2*Math.PI*this._rng();void 0===n.x&&(n.x=e*Math.cos(i)),void 0===n.y&&(n.y=e*Math.sin(i))}}}},{key:"layoutNetwork",value:function(){if(!0!==this.options.hierarchical.enabled&&!0===this.options.improvedLayout){for(var t=this.body.nodeIndices,e=0,r=0;r<t.length;r++)!0===this.body.nodes[t[r]].predefinedPosition&&(e+=1);if(e<.5*t.length){var n=0,i=this.options.clusterThreshold,o={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(t.length>i){for(var a=t.length;t.length>i&&n<=10;){n+=1;var s=t.length;if(n%3==0?this.body.modules.clustering.clusterBridges(o):this.body.modules.clustering.clusterOutliers(o),s==t.length&&n%3!=0)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*a)})}n>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(t,this.body.edgeIndices,!0),this._shiftToCenter();for(var l=0;l<t.length;l++){var g=this.body.nodes[t[l]];!1===g.predefinedPosition&&(g.x+=70*(.5-this._rng()),g.y+=70*(.5-this._rng()))}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t=Oh.getRangeCore(this.body.nodes,this.body.nodeIndices),e=Oh.findCenter(t),r=0;r<this.body.nodeIndices.length;r++){var n=this.body.nodes[this.body.nodeIndices[r]];n.x-=e.x,n.y-=e.y}}},{key:"_declusterAll",value:function(){for(var t=!0;!0===t;){t=!1;for(var e=0;e<this.body.nodeIndices.length;e++)!0===this.body.nodes[this.body.nodeIndices[e]].isCluster&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[e],{},!1));!0===t&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(!0===this.options.hierarchical.enabled&&this.body.nodeIndices.length>0){var t,e,r=!1,n=!1;for(e in this.lastNodeOnLevel={},this.hierarchical=new Ed,this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&(void 0!==(t=this.body.nodes[e]).options.level?(r=!0,this.hierarchical.levels[e]=t.options.level):n=!0);if(!0===n&&!0===r)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(!0===n){var i=this.options.hierarchical.sortMethod;"hubsize"===i?this._determineLevelsByHubsize():"directed"===i?this._determineLevelsDirected():"custom"===i&&this._determineLevelsCustomCallback()}for(var o in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,o)&&this.hierarchical.ensureLevel(o);var a=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(a),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var t=this,e=!1,r={},n=function(e,r){var n=t.hierarchical.trees;for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&n[i]===e&&t.direction.shift(i,r)},i=function e(r,n){if(!n[r.id]&&(n[r.id]=!0,t.hierarchical.childrenReference[r.id])){var i=t.hierarchical.childrenReference[r.id];if(i.length>0)for(var o=0;o<i.length;o++)e(t.body.nodes[i[o]],n)}},o=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e9,n=1e9,i=1e9,o=1e9,a=-1e9;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var l=t.body.nodes[s],g=t.hierarchical.levels[l.id],c=t.direction.getPosition(l),u=t._getSpaceAroundNode(l,e),h=Yi(u,2),d=h[0],A=h[1];n=Math.min(d,n),i=Math.min(A,i),g<=r&&(o=Math.min(c,o),a=Math.max(c,a))}return[o,a,n,i]},a=function(e,r,n){for(var i=t.hierarchical,o=0;o<r.length;o++){var a=r[o],s=i.distributionOrdering[a];if(s.length>1)for(var l=0;l<s.length-1;l++){var g=s[l],c=s[l+1];i.hasSameParent(g,c)&&i.inSameSubNetwork(g,c)&&e(g,c,n)}}},s=function(r,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=t.direction.getPosition(r),l=t.direction.getPosition(n),g=Math.abs(l-s),c=t.options.hierarchical.nodeSpacing;if(g>c){var u={},h={};i(r,u),i(n,h);var d=function(e,r){var n=t.hierarchical.getMaxLevel(e.id),i=t.hierarchical.getMaxLevel(r.id);return Math.min(n,i)}(r,n),A=o(u,d),f=o(h,d),C=A[1],p=f[0],I=f[2];if(Math.abs(C-p)>c){var v=C-p+c;v<-I+c&&(v=-I+c),v<0&&(t._shiftBlock(n.id,v),e=!0,!0===a&&t._centerParent(n))}}},l=function(n,a){for(var s=a.id,l=a.edges,g=t.hierarchical.levels[a.id],c=t.options.hierarchical.levelSeparation*t.options.hierarchical.levelSeparation,u={},h=[],d=0;d<l.length;d++){var A=l[d];if(A.toId!=A.fromId){var f=A.toId==s?A.from:A.to;u[l[d].id]=f,t.hierarchical.levels[f.id]<g&&h.push(A)}}var C=function(e,r){for(var n=0,i=0;i<r.length;i++)if(void 0!==u[r[i].id]){var o=t.direction.getPosition(u[r[i].id])-e;n+=o/Math.sqrt(o*o+c)}return n},p=function(e,r){for(var n=0,i=0;i<r.length;i++)if(void 0!==u[r[i].id]){var o=t.direction.getPosition(u[r[i].id])-e;n-=c*Math.pow(o*o+c,-1.5)}return n},I=function(e,r){for(var n=t.direction.getPosition(a),i={},o=0;o<e;o++){var s=C(n,r),l=p(n,r);if(void 0!==i[n-=Math.max(-40,Math.min(40,Math.round(s/l)))])break;i[n]=o}return n},v=I(n,h);!function(n){var s=t.direction.getPosition(a);if(void 0===r[a.id]){var l={};i(a,l),r[a.id]=l}var g=o(r[a.id]),c=g[2],u=g[3],h=n-s,d=0;h>0?d=Math.min(h,u-t.options.hierarchical.nodeSpacing):h<0&&(d=-Math.min(-h,c-t.options.hierarchical.nodeSpacing)),0!=d&&(t._shiftBlock(a.id,d),e=!0)}(v),function(r){var n=t.direction.getPosition(a),i=t._getSpaceAroundNode(a),o=Yi(i,2),s=o[0],l=o[1],g=r-n,c=n;g>0?c=Math.min(n+(l-t.options.hierarchical.nodeSpacing),r):g<0&&(c=Math.max(n-(s-t.options.hierarchical.nodeSpacing),r)),c!==n&&(t.direction.setPosition(a,c),e=!0)}(v=I(n,l))};!0===this.options.hierarchical.blockShifting&&(function(r){var n=t.hierarchical.getLevels();n=Eh(n).call(n);for(var i=0;i<5&&(e=!1,a(s,n,!0),!0===e);i++);}(),function(){for(var e in t.body.nodes)Object.prototype.hasOwnProperty.call(t.body.nodes,e)&&t._centerParent(t.body.nodes[e])}()),!0===this.options.hierarchical.edgeMinimization&&function(r){var n=t.hierarchical.getLevels();n=Eh(n).call(n);for(var i=0;i<20;i++){e=!1;for(var o=0;o<n.length;o++)for(var a=n[o],s=t.hierarchical.distributionOrdering[a],g=0;g<s.length;g++)l(1e3,s[g]);if(!0!==e)break}}(),!0===this.options.hierarchical.parentCentralization&&function(){var e=t.hierarchical.getLevels();e=Eh(e).call(e);for(var r=0;r<e.length;r++)for(var n=e[r],i=t.hierarchical.distributionOrdering[n],o=0;o<i.length;o++)t._centerParent(i[o])}(),function(){for(var e=function(){for(var e=[],r=0;r<t.hierarchical.numTrees();r++)e.push(t.direction.getTreeSize(r));return e}(),r=0,i=0;i<e.length-1;i++)r+=e[i].max-e[i+1].min+t.options.hierarchical.treeSpacing,n(i+1,r)}()}},{key:"_getSpaceAroundNode",value:function(t,e){var r=!0;void 0===e&&(r=!1);var n=this.hierarchical.levels[t.id];if(void 0!==n){var i=this.hierarchical.distributionIndex[t.id],o=this.direction.getPosition(t),a=this.hierarchical.distributionOrdering[n],s=1e9,l=1e9;if(0!==i){var g=a[i-1];(!0===r&&void 0===e[g.id]||!1===r)&&(s=o-this.direction.getPosition(g))}if(i!=a.length-1){var c=a[i+1];if(!0===r&&void 0===e[c.id]||!1===r){var u=this.direction.getPosition(c);l=Math.min(l,u-o)}}return[s,l]}return[0,0]}},{key:"_centerParent",value:function(t){if(this.hierarchical.parentReference[t.id])for(var e=this.hierarchical.parentReference[t.id],r=0;r<e.length;r++){var n=e[r],i=this.body.nodes[n],o=this.hierarchical.childrenReference[n];if(void 0!==o){var a=this._getCenterPosition(o),s=this.direction.getPosition(i),l=this._getSpaceAroundNode(i),g=Yi(l,2),c=g[0],u=g[1],h=s-a;(h<0&&Math.abs(h)<u-this.options.hierarchical.nodeSpacing||h>0&&Math.abs(h)<c-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(i,a)}}}},{key:"_placeNodesByHierarchy",value:function(t){for(var e in this.positionedNodes={},t)if(Object.prototype.hasOwnProperty.call(t,e)){var r,n=Qi(t[e]);n=this._indexArrayToNodes(n),tc(r=this.direction).call(r,n);for(var i=0,o=0;o<n.length;o++){var a=n[o];if(void 0===this.positionedNodes[a.id]){var s=this.options.hierarchical.nodeSpacing,l=s*i;i>0&&(l=this.direction.getPosition(n[o-1])+s),this.direction.setPosition(a,l,e),this._validatePositionAndContinue(a,e,l),i++}}}}},{key:"_placeBranchNodes",value:function(t,e){var r,n=this.hierarchical.childrenReference[t];if(void 0!==n){for(var i=[],o=0;o<n.length;o++)i.push(this.body.nodes[n[o]]);tc(r=this.direction).call(r,i);for(var a=0;a<i.length;a++){var s=i[a],l=this.hierarchical.levels[s.id];if(!(l>e&&void 0===this.positionedNodes[s.id]))return;var g,c=this.options.hierarchical.nodeSpacing;g=0===a?this.direction.getPosition(this.body.nodes[t]):this.direction.getPosition(i[a-1])+c,this.direction.setPosition(s,g,l),this._validatePositionAndContinue(s,l,g)}var u=this._getCenterPosition(i);this.direction.setPosition(this.body.nodes[t],u,e)}}},{key:"_validatePositionAndContinue",value:function(t,e,r){if(this.hierarchical.isTree){if(void 0!==this.lastNodeOnLevel[e]){var n=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[e]]);if(r-n<this.options.hierarchical.nodeSpacing){var i=n+this.options.hierarchical.nodeSpacing-r,o=this._findCommonParent(this.lastNodeOnLevel[e],t.id);this._shiftBlock(o.withChild,i)}}this.lastNodeOnLevel[e]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,e)}}},{key:"_indexArrayToNodes",value:function(t){for(var e=[],r=0;r<t.length;r++)e.push(this.body.nodes[t[r]]);return e}},{key:"_getDistribution",value:function(){var t,e,r={};for(t in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,t)){e=this.body.nodes[t];var n=void 0===this.hierarchical.levels[t]?0:this.hierarchical.levels[t];this.direction.fix(e,n),void 0===r[n]&&(r[n]={}),r[n][t]=e}return r}},{key:"_getActiveEdges",value:function(t){var e=this,r=[];return Po(t.edges,function(t){var n;-1!==bi(n=e.body.edgeIndices).call(n,t.id)&&r.push(t)}),r}},{key:"_getHubSizes",value:function(){var t=this,e={};Po(this.body.nodeIndices,function(r){var n=t.body.nodes[r],i=t._getActiveEdges(n).length;e[i]=!0});var r=[];return Po(e,function(t){r.push(Number(t))}),tc(Cd).call(Cd,r,function(t,e){return e-t}),r}},{key:"_determineLevelsByHubsize",value:function(){for(var t=this,e=function(e,r){t.hierarchical.levelDownstream(e,r)},r=this._getHubSizes(),n=function(n){var i=r[n];if(0===i)return"break";Po(t.body.nodeIndices,function(r){var n=t.body.nodes[r];i===t._getActiveEdges(n).length&&t._crawlNetwork(e,r)})},i=0;i<r.length&&"break"!==n(i);++i);}},{key:"_determineLevelsCustomCallback",value:function(){var t=this;this._crawlNetwork(function(e,r,n){var i=t.hierarchical.levels[e.id];void 0===i&&(i=t.hierarchical.levels[e.id]=1e5);var o=(Oh.cloneOptions(e,"node"),Oh.cloneOptions(r,"node"),void Oh.cloneOptions(n,"edge"));t.hierarchical.levels[r.id]=i+o}),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var t,e=this,r=Cc(t=this.body.nodeIndices).call(t,function(t,r){return t.set(r,e.body.nodes[r]),t},new tg);"roots"===this.options.hierarchical.shakeTowards?this.hierarchical.levels=function(t){return Md(function(e){var r,n;return kd(r=ui(n=e.edges).call(n,function(e){return t.has(e.toId)})).call(r,function(t){return t.from===e})},function(t,e){return e<t},"to",t)}(r):this.hierarchical.levels=function(t){return Md(function(e){var r,n;return kd(r=ui(n=e.edges).call(n,function(e){return t.has(e.toId)})).call(r,function(t){return t.to===e})},function(t,e){return e>t},"from",t)}(r),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var t=this;this._crawlNetwork(function(e,r){t.hierarchical.levels[r.id]>t.hierarchical.levels[e.id]&&t.hierarchical.addRelation(e.id,r.id)}),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},r=arguments.length>1?arguments[1]:void 0,n={},i=function r(i,o){if(void 0===n[i.id]){var a;t.hierarchical.setTreeIndex(i,o),n[i.id]=!0;for(var s=t._getActiveEdges(i),l=0;l<s.length;l++){var g=s[l];!0===g.connected&&(a=g.toId==i.id?g.from:g.to,i.id!=a.id&&(e(i,a,g),r(a,o)))}}};if(void 0===r)for(var o=0,a=0;a<this.body.nodeIndices.length;a++){var s=this.body.nodeIndices[a];if(void 0===n[s])i(this.body.nodes[s],o),o+=1}else{var l=this.body.nodes[r];if(void 0===l)return void console.error("Node not found:",r);i(l)}}},{key:"_shiftBlock",value:function(t,e){var r=this,n={};!function t(i){if(!n[i]){n[i]=!0,r.direction.shift(i,e);var o=r.hierarchical.childrenReference[i];if(void 0!==o)for(var a=0;a<o.length;a++)t(o[a])}}(t)}},{key:"_findCommonParent",value:function(t,e){var r=this,n={};return function t(e,n){var i=r.hierarchical.parentReference[n];if(void 0!==i)for(var o=0;o<i.length;o++){var a=i[o];e[a]=!0,t(e,a)}}(n,t),function t(e,n){var i=r.hierarchical.parentReference[n];if(void 0!==i)for(var o=0;o<i.length;o++){var a=i[o];if(void 0!==e[a])return{foundParent:a,withChild:n};var s=t(e,a);if(null!==s.foundParent)return s}return{foundParent:null,withChild:n}}(n,e)}},{key:"setDirectionStrategy",value:function(){var t="UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction;this.direction=t?new vd(this):new md(this)}},{key:"_getCenterPosition",value:function(t){for(var e=1e9,r=-1e9,n=0;n<t.length;n++){var i=void 0;if(void 0!==t[n].id)i=t[n];else{var o=t[n];i=this.body.nodes[o]}var a=this.direction.getPosition(i);e=Math.min(e,a),r=Math.max(r,a)}return.5*(e+r)}}]),t}();Ya('div.vis-network div.vis-manipulation{box-sizing:content-box;border:0 solid #d6d9d8;border-bottom:1px;background:#fff;background:-moz-linear-gradient(top,#fff 0,#fcfcfc 48%,#fafafa 50%,#fcfcfc 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#fff),color-stop(48%,#fcfcfc),color-stop(50%,#fafafa),color-stop(100%,#fcfcfc));background:-webkit-linear-gradient(top,#fff,#fcfcfc 48%,#fafafa 50%,#fcfcfc);background:-o-linear-gradient(top,#fff 0,#fcfcfc 48%,#fafafa 50%,#fcfcfc 100%);background:-ms-linear-gradient(top,#fff 0,#fcfcfc 48%,#fafafa 50%,#fcfcfc 100%);background:linear-gradient(180deg,#fff 0,#fcfcfc 48%,#fafafa 50%,#fcfcfc);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff",endColorstr="#fcfcfc",GradientType=0);padding-top:4px;position:absolute;left:0;top:0;width:100%;height:28px}div.vis-network div.vis-edit-mode{position:absolute;left:0;top:5px;height:30px}div.vis-network div.vis-close{position:absolute;right:0;top:0;width:30px;height:30px;background-position:20px 3px;background-repeat:no-repeat;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAADvGaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAyMSA3OS4xNTQ5MTEsIDIwMTMvMTAvMjktMTE6NDc6MTYgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICAgICAgICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cyk8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhtcDpDcmVhdGVEYXRlPjIwMTQtMDItMTRUMTE6NTU6MzUrMDE6MDA8L3htcDpDcmVhdGVEYXRlPgogICAgICAgICA8eG1wOk1ldGFkYXRhRGF0ZT4yMDE0LTAyLTE0VDEyOjA1OjE3KzAxOjAwPC94bXA6TWV0YWRhdGFEYXRlPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxNC0wMi0xNFQxMjowNToxNyswMTowMDwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXBNTTpJbnN0YW5jZUlEPnhtcC5paWQ6NjU0YmM5YmQtMWI2Yi1jYjRhLTllOWQtNWY2MzgxNDVjZjk0PC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOjk4MmM2MGIwLWUzZjMtMDk0MC04MjU0LTFiZTliNWE0ZTE4MzwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjk4MmM2MGIwLWUzZjMtMDk0MC04MjU0LTFiZTliNWE0ZTE4MzwveG1wTU06T3JpZ2luYWxEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SGlzdG9yeT4KICAgICAgICAgICAgPHJkZjpTZXE+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmNyZWF0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDo5ODJjNjBiMC1lM2YzLTA5NDAtODI1NC0xYmU5YjVhNGUxODM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDItMTRUMTE6NTU6MzUrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjIxODYxNmM2LTM1MWMtNDI0OS04YWFkLWJkZDQ2ZTczNWE0NDwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNC0wMi0xNFQxMTo1NTozNSswMTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6NjU0YmM5YmQtMWI2Yi1jYjRhLTllOWQtNWY2MzgxNDVjZjk0PC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE0LTAyLTE0VDEyOjA1OjE3KzAxOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6U2VxPgogICAgICAgICA8L3htcE1NOkhpc3Rvcnk+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5zUkdCIElFQzYxOTY2LTIuMTwvcGhvdG9zaG9wOklDQ1Byb2ZpbGU+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDAwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjc8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+NzwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+cZUZMwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAA2ElEQVR42gDLADT/AS0tLUQFBQUVFxcXtPHx8fPl5eUNCAgITCkpKesEHx8fGgYGBjH+/v4a+Pj4qgQEBFU6OjodMTExzwQUFBSvEBAQEfX19SD19fVqNDQ0CElJSd/9/f2vAwEBAfrn5+fkBwcHLRYWFgsXFxfz29vbo9LS0uwDDQ0NDfPz81orKysXIyMj+ODg4Avh4eEa/f391gMkJCRYPz8/KUhISOMCAgKh8fHxHRsbGx4UFBQQBDk5OeY7Ozv7CAgItPb29vMEBASaJSUlTQ0NDesDAEwpT0Ko8Ri2AAAAAElFTkSuQmCC");cursor:pointer;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}div.vis-network div.vis-close:hover{opacity:.6}div.vis-network div.vis-edit-mode div.vis-button,div.vis-network div.vis-manipulation div.vis-button{float:left;font-family:verdana;font-size:12px;-moz-border-radius:15px;border-radius:15px;display:inline-block;background-position:0 0;background-repeat:no-repeat;height:24px;margin-left:10px;cursor:pointer;padding:0 8px;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}div.vis-network div.vis-manipulation div.vis-button:hover{box-shadow:1px 1px 8px rgba(0,0,0,.2)}div.vis-network div.vis-manipulation div.vis-button:active{box-shadow:1px 1px 8px rgba(0,0,0,.5)}div.vis-network div.vis-manipulation div.vis-button.vis-back{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAEEOaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAyMSA3OS4xNTQ5MTEsIDIwMTMvMTAvMjktMTE6NDc6MTYgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAxNC0wMi0wNFQxNTowMTowOSswMTowMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTQtMDItMDRUMTU6MDE6MDkrMDE6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOmI2YjQwMjVkLTAxNjQtMzU0OC1hOTdlLTQ4ZmYxMWM3NTYzMzwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+Y3JlYXRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6RUE2MEEyNEUxOTg0RTMxMUFEQUZFRkU2RUMzMzNFMDM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDEtMjNUMTk6MTg6MDcrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDpmOWQ3OGY4ZC1lNzY0LTc1NDgtODZiNy1iNmQ1OGMzZDg2OTc8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDItMDRUMTU6MDE6MDkrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jb252ZXJ0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+ZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmRlcml2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+Y29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmc8L3N0RXZ0OnBhcmFtZXRlcnM+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOmI2YjQwMjVkLTAxNjQtMzU0OC1hOTdlLTQ4ZmYxMWM3NTYzMzwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNC0wMi0wNFQxNTowMTowOSswMTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOmY5ZDc4ZjhkLWU3NjQtNzU0OC04NmI3LWI2ZDU4YzNkODY5Nzwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgICAgPHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5zUkdCIElFQzYxOTY2LTIuMTwvcGhvdG9zaG9wOklDQ1Byb2ZpbGU+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDA5MC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDkwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4jq1U/AAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAVTSURBVHjanFVfTFNnFP+d77ve8qeVFbBrpcVgRrCRFikFByLxwSAaE32oRCHD6JMxxhhn8G2RxxH3MsOTbyYsmCAxPMmMMYtkIUYmK60OO0qAK23BFlNob0uh3x7WS5jLZPpLbm6+k/P9zrm5v9855PF4UFhYCABgjIExBgAgIqRSqRIi6gDQRkQ1RGTB3wgR0e8AHgH4Sa/XR/EBiAiJRAJ04cIF5Ofng4g2n0gkUkxENwF0c843LzHGQEQQQkCLExEA9ALotVgsUQAQQmgNQhJCbF5kjCEUCl0moj4t5na7fTU1NUpVVVXUYrEkASAcDhe8efOmxOfzWScmJqoBdBNR99LS0hWz2dynNSSEAF28eBGFhYVgjCEcDn9HRD1EhIMHD3o9Hs9kWVlZAh9BKBQqGB4edr58+dKZ+6JbJpOpBwBWV1fB6+rqIMsyIpHIFcZYL2MMra2tY5cuXRrfuXNnBtvAYDBk3G63oqpqZm5uzgrgSDKZjBoMhueZTAbc5XIhFouVEtFTxhiOHTs2dv78eS8+Efv374+oqpqZnZ21cs5PJJPJPlmWkyynnBuMMTQ0NHi7uro+mVyDx+Pxulwu71ZOlkqlSonoJhGhvb39s8k1nDx50ss5hyRJN9PpdKlERB2aWjSVaEilUvzBgwcORVEs5eXloXPnzk1sV8BkMiUdDofP7/dXZ7PZDilnIhw4cGBeS1pbW2P37t1zBwKBikQiUUREWFhYsHHO0d7evm0Ru90+/+rVq2rO+XGJiJxEhMrKyhgAjI6OWoeHh5tWVla+4JzDZrO9bW5unhwcHGzz+/32np4e+xaDbfoHAMxmc6ijo2O0oqIiJkkSNjY2HBIRmRljMJvNyWfPnln7+/tPMMZQXl6+0NbW9qK2tjYcj8floaEhqKpq+HCkbD3PzMwYBgYG0NXV9UuusFna2kEgELAQEQ4dOvSis7PzN41Ar9dnrl27NqCNkv/C3bt3zy4tLVmICJxzEBFJRBQmorLFxcWCqqqq0Pj4eO3Y2JhbUZTdra2tL2pra8OJRGLHnTt3zkqS9K+huHU4EhHMZnMoGo0W5OIh7nK5jjLGKq1W69vDhw8rRqMxMjc3t2t5eXnX5ORklc/nM+fl5SWnpqa+0uv1K/n5+Ws6nW5NluXNd15e3ppOp1uz2WyzZ86cGQ0Gg6ZAIFCZzWZ/lYjokRDiuN/vt7W0tMw3NTUpbrd78P79++5gMFgRiUTKHj58WMYYQ3V19etTp05tq6Lp6Wkb5xxCiEfc7XZPM8a6FxcXTfX19a/1en2Gcy5qamreNjY2/qGq6joRZe12+9Tp06e3JY/FYgWPHz8+mhvr3/CWlpbk+vp6PmOseWVlBS6XS9GSJUkSdrs93NDQ8Oe+ffvC/8fJIyMjddFo9Esi6pVleVjT2m0A8Hq9zqGhIefnjoknT544A4GAM/eDbxMReFNTE0pKSpKqqsaI6Pj8/LxVVdWM3W6PfCr5xMTE1zllXS0uLn6aSqXAGxsbodPpoNfrn6uqCs75EUVRrJFIZMfevXsXdTrdxseIE4mEPDIyUu/3++tynd8yGo29RIR0Og26fv06ioqKwBgD5xzv3r27zBjrIyJIkgSHwzFZWVmp7NmzJ1ZaWpoAgGg0WqgoSvHMzIw1GAw6tvjhitFo7NPW5fv370Hd3d0oKCgA53zTQMvLy+VCiKuSJH0rSdLmztZytIWv5RPRD0T0Y3Fx8dzWfby6ugopHo//w4mcc8iyPMc5v5FOp7/PZrOdQohWInIC2C2EgBBigYi8Qoifs9lsv06nWyIiaFxagXg8jr8GAGxuIe7LBeWhAAAAAElFTkSuQmCC")}div.vis-network div.vis-manipulation div.vis-button.vis-none:hover{box-shadow:1px 1px 8px transparent;cursor:default}div.vis-network div.vis-manipulation div.vis-button.vis-none:active{box-shadow:1px 1px 8px transparent}div.vis-network div.vis-manipulation div.vis-button.vis-none{padding:0}div.vis-network div.vis-manipulation div.notification{margin:2px;font-weight:700}div.vis-network div.vis-manipulation div.vis-button.vis-add{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAEEOaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAyMSA3OS4xNTQ5MTEsIDIwMTMvMTAvMjktMTE6NDc6MTYgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAxNC0wMi0wNFQxNDo0MDoyOSswMTowMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTQtMDItMDRUMTQ6NDA6MjkrMDE6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjVkNWIwNmQwLTVmMjAtOGE0NC1hMzIwLWZmMTEzMzQwNDc0YjwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+Y3JlYXRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6RUE2MEEyNEUxOTg0RTMxMUFEQUZFRkU2RUMzMzNFMDM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDEtMjNUMTk6MTg6MDcrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDo2OWVmYWE1NS01ZTI5LTIzNGUtYTUzMy0xNDkxYjM1NDNmYmE8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDItMDRUMTQ6NDA6MjkrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jb252ZXJ0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+ZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmRlcml2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+Y29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmc8L3N0RXZ0OnBhcmFtZXRlcnM+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjVkNWIwNmQwLTVmMjAtOGE0NC1hMzIwLWZmMTEzMzQwNDc0Yjwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNC0wMi0wNFQxNDo0MDoyOSswMTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjY5ZWZhYTU1LTVlMjktMjM0ZS1hNTMzLTE0OTFiMzU0M2ZiYTwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgICAgPHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5zUkdCIElFQzYxOTY2LTIuMTwvcGhvdG9zaG9wOklDQ1Byb2ZpbGU+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDA5MC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDkwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz5WKqp9AAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAYXSURBVHjafFZtUFTXGX7e9z27sveuMCwYV8ElrA7YSFYHtJUPkaaI0aRqG8wP00zUzljDINNSA/2ROtpO24SxnahlxjYd7SSjmUkymcxYlDhQPzHGisEVp8HwYWCVVVgEsrsuLnL74+5uqTF9Z+7cO/d8PO95zvO851BlZSV0XQcAMDOYGQBARDhX3JRmMDYZwLPMWAzGHACYIgwS46oBNBNwtOL8CwE8EkSEUCgE2rJlC2w2G4go8Zwo/bMDgnoG6gxLfAAAYvPDMCCszKTAMIAGAhrWnf15AAAMwwARIRKJgDZv3gy73Q4iAjPjxIr9VVOMRhbAYKB8zvrO0llrfEsdKwLZek6YAPSFvtSu3GtLawu0ZJ6625SHGBQB1T88t6MxvopgMAjaunUrdF0HM+P4yv27DMYeJmB1RqW3Jnf3tQX2p0L4P9EXuqEd7PmDp+XuMU9sRbvXnnt1TxxACgoKYLVacbzsQDUJGkSATe6qi28uPtzusM6Kxie6NHLGUX3lxVUNX9StPHnn4wy3njuUYcu6n2pNi66avcEXnByP/nv8aiaIyrqz2gO5A9+9FI1GIfn5+WhZdTAdjFMkwMvZOy7uWnTAOz3L4Yk71m3t69fdfTDoUGTBeHTUfiHQ6lo7Z2OXJvpDAChKe+aOCdKRKWxZ2+1qb3yyd3GYmRkQ7GQBVs99wfv6on3eR2k4PdTkDEbH7IuS8/svld/561PJS/pDk1/bzwx94pze7xc5v/H+YPY6r5BAkdrJzODTK46lE6PeYEJt7u+8j+OZwCBiEAgAoNgKJoEQf6PvNvdrXgtZoNhSf7q0KZ3B2AQmVMze0Jmt54S/DcDCVig2NcvEUGxJAE4Pl+YOr0iv6BRSIPAmBeBZAmHlE2sH4p1uhrq1s0MnnEQMBsf8wRASAICQQCCITN1X7/sOuc0kgOVp3/fPs2WHv+coG7gQOJUnLGsUCTxEjPzUohEA+NfIWUdtx0+efzA1kSSkIGyBAQNCKgHAEBAJ3u79U7kiAcWoem/gb5Fd33nrH3kp+SMWtuAB+GllMJxMjCx9QRgA3uiqL5kwHiTlpxb3smlfMDGYGPP1hcMAkJvs8ScpfdJspdj+MK6Pf+5+u29vyb4lR4+BGEziVESAkEpw6Av1OhUpHCz4qOXbzFWz4Ncdj/v/o08Lt92ODDgZDCEFJYoUGH4mzugP92puPTf0pD3H7wvfdFZdqSxnMtWjoGAAmG9fOLxjwesdjT2/XzIQ7ks3sycYMSEwGHNtWf5bkX5NkYCJBxUBXiGV0XHvosOt54Zey33j/K+8P33++vjnbiGJbbLE+J9SANAb6nJ2B79wcUwETAwQQ7fMjPzMvfP8ja87HUIKMOiaAqMZhrGmLdAy78eZrwwsTS0eObTs+IdtgVanxBUExqGbb5VzrIISGIoUXsmqbgEhJldCQWqRf27SvPAn/o8XmgLhZsUkR4ll37mhk3n94Z4OlzY/7NLcYZfm7o1z2zT4vsvUNSXqprBCkmiTFbPX90/fh8GIT2sf+zTPdDMf4dVnNg4z+E0ixsGeBs9jd5ViSgLHjCb/peaR+MD3d4/ZJg2llyuG2Vwy7QWAs8PNnn1f7vkGSGxAzE6mk+kxkx/p/4unffSCR0hAoL1EBCYiPNdWNcwkNQTCR7feWX6g+7f/A7I8rcw/U6UEe0Ndrhc/W7mtL9ztmqlSgstSS/zTJ28dalpOpkRryrwbhwBACgsLMWPGDOT4ll3qyeqAkJTdCF7P/CrUY/GkLL1rE+2hTbSH8+0Lb/WEuhzhyaA905blf9Vd/895WnZwLHrPevir/cvOB1oLYpTtLrm6oYGIMDExAaqtrUVKSgqYGSKCk0WHq5ikkWEWtNL0imv5qUW+RclLRjJsrhBAuH1/QL8R7HR4xy5nescuP23E6hOA6mLv+sb4uTw6Ogqqq6uDpmkQkcStorX4XRcM1FjZ+kvFFjCJKU1WpkNJJUqIMtX1RyLeX3JtQ0JRhmGYZ/L27duRnJycuFGISOJ9pqh5lrB6iYgqGOxRrOaa54DcZmKvkJxk8JHC9rKh+KVhOsD4+Dj+MwADIf8n5m4xGwAAAABJRU5ErkJggg==")}div.vis-network div.vis-edit-mode div.vis-button.vis-edit,div.vis-network div.vis-manipulation div.vis-button.vis-edit{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAEEOaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAyMSA3OS4xNTQ5MTEsIDIwMTMvMTAvMjktMTE6NDc6MTYgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAxNC0wMi0wNVQxNDoxMjoyNSswMTowMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTQtMDItMDVUMTQ6MTI6MjUrMDE6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjY5OTM3ZGZjLTJjNzQtYTU0YS05OTIzLTQyMmZhNDNkMjljNDwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+Y3JlYXRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6RUE2MEEyNEUxOTg0RTMxMUFEQUZFRkU2RUMzMzNFMDM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDEtMjNUMTk6MTg6MDcrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDozOWNhNzE5ZC03YzNlLTUyNGEtYmY1NS03NGVmMmM1MzE0YTc8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDItMDVUMTQ6MTI6MjUrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jb252ZXJ0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+ZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmRlcml2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+Y29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmc8L3N0RXZ0OnBhcmFtZXRlcnM+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjY5OTM3ZGZjLTJjNzQtYTU0YS05OTIzLTQyMmZhNDNkMjljNDwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNC0wMi0wNVQxNDoxMjoyNSswMTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjM5Y2E3MTlkLTdjM2UtNTI0YS1iZjU1LTc0ZWYyYzUzMTRhNzwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgICAgPHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5zUkdCIElFQzYxOTY2LTIuMTwvcGhvdG9zaG9wOklDQ1Byb2ZpbGU+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDA5MC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDkwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4ykninAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAYpSURBVHjafFZtTFvnFX7Oea+NudiY2Hwam4CBlgQwXdKREDKUoYg0jbRJ29RJ2VZ1mjRFUxSpA3VTfkzJfkQbS7spU6rtx5Z2UtppScjaHxvLuiatWi2jLEoMIUDCh23g2gbj7+tPuPvhOurawPl1dc99n+c55z33fV46ceIEZFkGADAziAgAQERoe/9ZK4GPM/AcgbsIXAcABCgMvkfAqAa89eDoJyF8LogIqqqChoaGYDAYHr8kItS8uc8iIH6iAa9IkAo5EAQX8pqmgUVBCBggYFgDhv0/GAsBgKZpICJkMhnQ4OAgZFkGEYGZUXmp+0cS+CKBwWA0DVRPOg5Zl2q6zaHyJlnVAMQXVTkwHrUqH0Xsvn+tdQAAMQDgpPLS2MViFY8rkGUZzIzaS/t/xqCzGggtz9e697zsnKhoLUtim4jOq/LE6x7X0nsh16dEZ5a/O3a2SCAOHjwInU6Hujd6ThJ4mCDQ+b2G232v7v6vwarPbQn8MGlMr+X0kpE3Wr5Zt5hL5HPhqYSdQIfKJ+yhxDPKWC6Xg+jt7UXD5b5KBt1kCHS85Ljd8/On3NupfnhFaZj4rWff1B98B1R/hnUmKd36bdtCNl4g0en4edNE/cXwLq8qMTMIPAQwmo/WuHvObA8+9c58k/dKtD0TyZWXN5YGA7ej7epKxspM//7SoNOdWc/Jyq2wiwhDzPxT8cP0jys3VMM7OmL0/77zn4Ydui3b8uiK0jD7RrA77c9Wd57cefPpF+2T6bWsFPWkaiPTCWvTsZpHFU+XrS+8G3AR08F6X+1FJvBxQQzHQOWk2SmrW4FPX/U2LVwPuDZj+fJKl2khPpeyAqA9rzR/YqwuiWXX8taN/CabGkrVuq9YJlkQQDjOAJ5jAhz9Vt9W4N5/rNp8I+vtMV/aZm4zLnUNNt0urdYnF68HWoJj4Wo1mLGUNRr8LEgDgNqeCh8xQIKOsgC7iAjVe83rT9zQa8uNM28u70kspessu8q8zq/V3NcZpVzb9+0zmVhOvvvrhaMVzrJg0zeq7xMVCCwdpnWSGBqjUyJwLTFgbvxie3w31uoWR1Y74r60rdxZqrR8q85t2W2MGCp12bm/KC3hyaSTiMhxuGrKcahqpbjOaDOoEhOEoFqJQCCJvqA85I6bfTdDjQlf2lbxVNlS6wt19yy7jRHZZlDnrinNj/6sHMhnNw2Ogco7O79e5fm/xQywRBBCEAuwn4gQ96bkYj4Vyuq9N1Z3Bj4Od5bs0MXt/dZZ21ctiqFan174q985P+Lfp+U1g7XDON/1ctP458WlVjLyJhOISZE0wM0S1QfuRC3lTjkJAKKEtNC9eIOhSh9xHLZOJRZTFuXDsEoStLkR/768ummsaJG9Pb9oe+9J+xaeSVokiQDSJphAo5uaBuWjiKP4QTqS1cUWU7ayesN66wu22frD1vmVW6GW6T8u9eVjGyZzs+w78Nqu0a2mbvVu1KEJQAgeZRL0liQYyx+GOmKeQpu0rMYsAJPNEFGD2dLodLIy6c9Ys7G8yeSUl3tf2/X3rcBVJSOv34l3sCBogi7z1LH/rBHjl4IJ93/ncQFAnjeImJD0Z8zuCwu9q3djDXqTlAKID5xv+9t2R8n8VcUFBljQ8Gyfe40BYBM4DwDLt8Kue79ZcFkbzfEdbUbv+oN4c9KTtsfm1MbYQqqh+2zrVZYKs/7Ef+byimt1POYiJhDhPBFBIiIEXhxfs7/dfYoIF+auBfYTE/pebx/V8hqBP2ODvD34yvuh/WCAmU75Bx6sIgaI/v5+6PV6JLqUsYr7dpDAoehs0h73pHTWrvKgThYbRSt9UmSjef3MpaUvBz4O72UmADgTOPJguGiZor+/HyUlJWBmJFz+D8xTtlUiOpbwpmrmrweeSXrT+g11k4SBN3RGKUcAVCVdFhyP1nreDbY//NPyEXUlU/Pp4XYycGT6V0Ux2WwWdO7cOZSWlkII8diX7SPPNgDaKdbxoNAxwATBAEkEEgSWCEQAqPAMwqvMdCEwMO0tVqZpWsGTT58+DaPR+PhGIYQAAAgh0P7B3ioW/B0iGiCGiwXbCuOHFSJys6AbYFye2T+xWhT3WYJEIoH/DQBMw3kes8OJPgAAAABJRU5ErkJggg==")}div.vis-network div.vis-edit-mode div.vis-button.vis-edit.vis-edit-mode{background-color:#fcfcfc;border:1px solid #ccc}div.vis-network div.vis-manipulation div.vis-button.vis-connect{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAEEOaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAyMSA3OS4xNTQ5MTEsIDIwMTMvMTAvMjktMTE6NDc6MTYgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAxNC0wMi0wNFQxNDozODo1NyswMTowMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTQtMDItMDRUMTQ6Mzg6NTcrMDE6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjlmYjUwMDU0LWE3ODEtMWQ0OC05ZTllLTU2ZWQ5YzhlYjdjNjwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+Y3JlYXRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6RUE2MEEyNEUxOTg0RTMxMUFEQUZFRkU2RUMzMzNFMDM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDEtMjNUMTk6MTg6MDcrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDo3ZWRhMjI0MC0yYTQxLTNlNDQtYWM2My1iNzNiYTE5OWI3Y2E8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDItMDRUMTQ6Mzg6NTcrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jb252ZXJ0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+ZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmRlcml2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+Y29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmc8L3N0RXZ0OnBhcmFtZXRlcnM+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjlmYjUwMDU0LWE3ODEtMWQ0OC05ZTllLTU2ZWQ5YzhlYjdjNjwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNC0wMi0wNFQxNDozODo1NyswMTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjdlZGEyMjQwLTJhNDEtM2U0NC1hYzYzLWI3M2JhMTk5YjdjYTwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgICAgPHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5zUkdCIElFQzYxOTY2LTIuMTwvcGhvdG9zaG9wOklDQ1Byb2ZpbGU+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDA5MC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDkwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4ubxs+AAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAUtSURBVHjajJZ/bNT1Gcdfz/P53PV6B4W7VltLqdAaplIOiMOoyxxJCSs/Gv/yB4gzJroAosmmDklwkYWR0bQsdmkykoojTpcsWYLxD/lRZdMQkTHRtkLZRqG0tIVe7662vTu43n32x/VKZ/jh89cn38/zvN7P5/l88zwf2blzJz6fDwARQUSm1n8s31CM0/VAnbNmsUPuAsDpgEO+Bg4C7//iyv5hvmMiQiqVQpqamvB6vVNwEeG1JZtCBrYi/MrkAwDNgjhwAlbzICBLA0rDb0+/839C6XQaaWxspLCw8Dp86cbNmqVFJQddE6KzdjZ9D89g+B6fSyCOcyn1nxil+O9xKg5HqWFSHGXLjrP7W/ICqVQK2bNnDz6fDxFh65KNvxbHDhF4rJj2bXPo+IGfcW5h5xL4f99P+FCEMIAob75x9t0dAMlkElNXV4e1lteXbNqiQoMaeOFOjrdU868SD2luYyEP6dUh+sYmSHeOU6GO5Z8VLx5+NNZxIpPJ5AS2L3upROCoCvz8Lo7vnkf77cAHhpiz/zIL9vWz8L8p/NvupmM0Q7pjnAoLqz8tDrc8MnQqYVUVhVdF4LEg7b+rvDn8wDDlH0WoPpukLJImSBaMwjcJqmwWts2jPZLG/8kwYVFeVdXXZcFf4yVDc2cNKfBFmD9X+0ncCP58F48eG+Feo2CAUkvs4dl0V/uJvdXLiiV+ut++n7YLSfxPfMMG54ChzB3WIesVWB2i82bw1AR6fJR7C4VsfYiv6u/k3A9nEgP4zXke8DiYHyAOMK+QxPIgnZ9GqSHr1itQJ8DK2fTerDQ+S/bHRXQJaHSCwNIZ2Xh+7+S3VAmwNMBA/tuPZtErgKquUmdMWIFlRURvdamRNEXGwIWrlP47pTMzLiunxghGMwTLvcTWlHAp77s4QNSrYMQtss6ZMgWqCm5cHoDHO1nbk6K8zEN8+3zatv2Hn1b59EqJZdxmYUERg9P9KwpIiAOTdWUWBXuLzB/vZG3P1Un4PNp2d1MbmyD45TWCxuCsQm0x56bHGHFYEZwxok7toAA9Sfw3hCcoL/NOwi9QO5wmWO1j4JEgZxTkodmcWRGkf3pcX0r8xoAaBixKu4U5/xwndM+0tpAvS6mP+PZK2nb1UBvPEKwKMLDvPj4ESGc55lGy303sdJKQdZB2rkMdctAB/4gzN+/Q2ENNd4LyUi/xN+bTtquX2thk5nk4wI3gAF+OMNcA1nFQDfK+BY5GqbkwWabTY5QZhXWlnNx1ntrY1Rz87fuvw29m/Sn8J+PUGAFj5T19baA1IspuBZp7cx1x4SwG1cEf+lgRSROs8jGwb+Ht4QB/GSSsAhYano39LWIBxNEIbP14hPDuiyS2VtJuHXQlKKvxM/jiXDq/D/xPlwifGMkJZB2NIoKpr69nxeiZxLHicFSFVWfGqBidIP3LSjrWltD94CyufF/4kQgPuVz2Lz93+dDRa9eu5QQ8Hg8/iXee+Dy4CKMs7xqn4nwKz9IirhQqmVuB42m8ey+x7LMoD6iAON782eChhqmRuXfvXgKBAKqKqtI0/8nNKrQI4BVYXkzHgzPpC88gWuHL/caXrhLoGiN0apSKr0ZZRBZM7q2w5ZnLR1oAnHOMjY0hra2tFBQUYIyZmstvVT1Z6eDlAuEVq7merxmwueNPDXy9PvybjKP5mctHLk4/XTKZRJqbm/H7/VNw1VyEMYbW4FN3WNWnnchKoy5sHeVGBRX6VWi3ymFx7r11Ix8MTX/y5C2RSPC/AQB61erowbpqSwAAAABJRU5ErkJggg==")}div.vis-network div.vis-manipulation div.vis-button.vis-delete{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAEEOaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAyMSA3OS4xNTQ5MTEsIDIwMTMvMTAvMjktMTE6NDc6MTYgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAxNC0wMi0wNFQxNDo0MTowNCswMTowMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTQtMDItMDRUMTQ6NDE6MDQrMDE6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjc3NDkzYmUxLTEyZGItOTg0NC1iNDYyLTg2NGVmNGIzMzM3MTwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+Y3JlYXRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6RUE2MEEyNEUxOTg0RTMxMUFEQUZFRkU2RUMzMzNFMDM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDEtMjNUMTk6MTg6MDcrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDowNmE3NWYwMy04MDdhLWUzNGYtYjk1Zi1jZGU2MjM0Mzg4OGY8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDItMDRUMTQ6NDE6MDQrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jb252ZXJ0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+ZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmRlcml2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+Y29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmc8L3N0RXZ0OnBhcmFtZXRlcnM+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjc3NDkzYmUxLTEyZGItOTg0NC1iNDYyLTg2NGVmNGIzMzM3MTwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNC0wMi0wNFQxNDo0MTowNCswMTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjA2YTc1ZjAzLTgwN2EtZTM0Zi1iOTVmLWNkZTYyMzQzODg4Zjwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgICAgPHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5zUkdCIElFQzYxOTY2LTIuMTwvcGhvdG9zaG9wOklDQ1Byb2ZpbGU+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDA5MC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDkwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4aYJzYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAYGSURBVHjalJZ7UJTnFcZ/73m/72PdJY1RbhoQp6lkXRAvmIYxdCUadLVOozPNtGObap1JsKipjiShbdoRbeKEiQHpQK3xj0xa03aamTbaTGyAYV1QGeqFi+JyiZFLAlmESBkWRmS3fyzslGkmnZ5/v/M873Oe75zzvqqoqAibzQaAiKCUAkApRdHIK/NFsx2NR91nOSILADDoJyzNaM4xxbtvPHh0iC+JiYkJ1OHDh4mJiUEpFSXPv/ziPC28TIiXDCOSrAClQDSEpsCwJPIhrEBRQpiSytXlQwDhcBilFPfu3UMVFxdjt9ujFTzfcLBADCoEEAFr1ZbrrNjch2vtEImPBgHob7fTcWE+bVXJNJ/NiFQlEGLvieXHKmYqGB8fRx05cgSbzYaIsPvywV8pKFaA7fGtLTzz61YWpo/xVTHQbufsq5lcez9zWuWhk5mvFwMEg0H0+vXrMU2Tn1wp3CtCiQ5DjGd3A/m/v8IDCZP8r4iNmyRrWx/j/5qktykZpXKzAjVDVxPzGqemptDr1q1jX3NRnIJarcDKK2hgR2ULXRfncv7UYv7xpovhnhiW5Mz+kefeSKO6LJ1A1xzEuk/Ojm4mRibpuZaMZW3OCtRUND60NmiICCIUShisx7a2sLMiQn4s77uEQgIabnqdfHIlgT1/qQeg8vs5dHhdCNB1wYn3RIiC995j26stjAbsNH+YiZJCESnS1Y/XxIXu8r4YIPv/VkVs3CTnTy2ms34xro1+sp9po6sxlTu34ultmsPVvy6is86FCHgO+DDs49zpjufBpCG+seYOC9OHaTidieicb9ouVAhKtouAseI710ma7pLuqwmgYfHqAFt+6WdLoQ/LBl11Lm7VudAa8vb72PCin9TlAWIsGGhLACD+kSAZnusYBii1XQAPYWDllt6ov2lrBkDBR2+6Ofuak2//3M+G/T4wAAPW7fPhKfRTVeqk9qQbFKRmDUTxS3N7QYGYmwzCkqklBGlPDEcTNv+sg9tNCbTXuvBWujE0bHrZj9JE1B/wU1Pm5PwJN6YBS9a2kVvQEcWnrh5GTFD3lxkYkqRMgYQlwVldUvDnen73LHTUuqitdKM0eAr9AFQfd1J/yo2aJn+2sn4Wdn5qEFODJskgBIjx5T0uCrQA08pnIjS9PERDjPnfOKXAMEBECUoGEIHBj+2zkt76UQ6dXheGAev3+cg74Kf6uJPqcicbfuond7cPy4SOiy7+tD9nFvZurx00KOk3CNEC+mE+vjSPBc7IWqgqTaPT60IMcO/xsXGa3HfKjRgRdbl7/KDg0jtubje6aHj7c7J3dgLQ2zoPwwQ91SooOQdAW1VKVMHty0kA5Bb48BycJn/LjWFGbLv4thvvb53kFvjJ+XEdWkPfjQVR/CcNKYgGMc8JWt5Fa2j+MIPPuyI2pa4IoHSkt6vLIuRaQ9q32khzt4GCxtNu6k46GeiIR2lIfDQQsafPzq1LGRGL9Gk9d+vrwewvfHPQOoexQVjxdB/auk/zmaUMdsfz6bVUtIalT7bxveP1ZHh6GPDPYeSzeD69kcpIfxymFWLNrka+ljhBTWkWwz2JiJT84YHnz2iPx0P20PkmRF5i6HYiwZFJsn/YzdezbzE3cQibY5xV266z6RfXohakb+xB9CjanCD9qTbW7Grk4WV38VZm0l6dhQiEw9taHSuDqrS0FIfDwXM3X9mHMsvRAk/sauDpQy38P+GtzOTGB9mEpkD0C2dS8n8zOjqK9ng8WJZFU+JTjasGvaCNXPpvJBPoMlm0OoDNMfWVxONfWNSUPUZ7TUQ56tCZlPwSgMnJSVRpaSmxsbFE1raw82ZxAZZRQUiBYUKGp5UlOX2krBzmoUVjiIKhHge9rfPo+Wcy3ZeXIYASgL1/X5RfMXMvj46OosrLy7HZbGitUUohIuzoem0RofALaOsghgWGjky0MiJTL8b0lOvI8hN1DKXKP0jd3TNTWDgcJhgMoo4ePYrD4Yi+KmaeLlprnrtXFo9h/AAlG1AqE8yFmBrC+jO0bgH9EVpO/1F2Dc5g//OAsbEx/j0Af+USsQynL1UAAAAASUVORK5CYII=")}div.vis-network div.vis-edit-mode div.vis-label,div.vis-network div.vis-manipulation div.vis-label{margin:0 0 0 23px;line-height:25px}div.vis-network div.vis-manipulation div.vis-separator-line{float:left;display:inline-block;width:1px;height:21px;background-color:#bdbdbd;margin:0 7px 0 15px}');var Sd=function(){function t(e,r,n,i){var o,a,s=this;Rl(this,t),this.body=e,this.canvas=r,this.selectionHandler=n,this.interactionHandler=i,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this.manipulationHammers=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},It(this.options,this.defaultOptions),this.body.emitter.on("destroy",function(){s._clean()}),this.body.emitter.on("_dataChanged",K(o=this._restore).call(o,this)),this.body.emitter.on("_resetData",K(a=this._restore).call(a,this))}return Ll(t,[{key:"_restore",value:function(){!1!==this.inMode&&(!0===this.options.initiallyActive?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,e,r){void 0!==e&&(void 0!==e.locale?this.options.locale=e.locale:this.options.locale=r.locale,void 0!==e.locales?this.options.locales=e.locales:this.options.locales=r.locales),void 0!==t&&("boolean"==typeof t?this.options.enabled=t:(this.options.enabled=!0,Ro(this.options,t)),!0===this.options.initiallyActive&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){!0===this.editMode?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},!0===this.guiEnabled){var t,e;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var r=this.selectionHandler.getSelectedNodeCount(),n=this.selectionHandler.getSelectedEdgeCount(),i=r+n,o=this.options.locales[this.options.locale],a=!1;!1!==this.options.addNode&&(this._createAddNodeButton(o),a=!0),!1!==this.options.addEdge&&(!0===a?this._createSeperator(1):a=!0,this._createAddEdgeButton(o)),1===r&&"function"==typeof this.options.editNode?(!0===a?this._createSeperator(2):a=!0,this._createEditNodeButton(o)):1===n&&0===r&&!1!==this.options.editEdge&&(!0===a?this._createSeperator(3):a=!0,this._createEditEdgeButton(o)),0!==i&&(r>0&&!1!==this.options.deleteNode||0===r&&!1!==this.options.deleteEdge)&&(!0===a&&this._createSeperator(4),this._createDeleteButton(o)),this._bindHammerToDiv(this.closeDiv,K(t=this.toggleEditMode).call(t,this)),this._temporaryBindEvent("select",K(e=this.showManipulatorToolbar).call(e,this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){var t;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addNode",!0===this.guiEnabled){var e,r=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(r),this._createSeperator(),this._createDescription(r.addDescription||this.options.locales.en.addDescription),this._bindHammerToDiv(this.closeDiv,K(e=this.toggleEditMode).call(e,this))}this._temporaryBindEvent("click",K(t=this._performAddNode).call(t,this))}},{key:"editNode",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean();var e=this.selectionHandler.getSelectedNodes()[0];if(void 0!==e){if(this.inMode="editNode","function"!=typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(!0!==e.isCluster){var r=Ro({},e.options,!1);if(r.x=e.x,r.y=e.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(r,function(e){null!=e&&"editNode"===t.inMode&&t.body.data.nodes.getDataSet().update(e),t.showManipulatorToolbar()})}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){var t,e,r,n,i;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addEdge",!0===this.guiEnabled){var o,a=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription),this._bindHammerToDiv(this.closeDiv,K(o=this.toggleEditMode).call(o,this))}this._temporaryBindUI("onTouch",K(t=this._handleConnect).call(t,this)),this._temporaryBindUI("onDragEnd",K(e=this._finishConnect).call(e,this)),this._temporaryBindUI("onDrag",K(r=this._dragControlNode).call(r,this)),this._temporaryBindUI("onRelease",K(n=this._finishConnect).call(n,this)),this._temporaryBindUI("onDragStart",K(i=this._dragStartEdge).call(i,this)),this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="editEdge","object"!==ao(this.options.editEdge)||"function"!=typeof this.options.editEdge.editWithoutDrag||(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],void 0===this.edgeBeingEditedId)){if(!0===this.guiEnabled){var t,e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindHammerToDiv(this.closeDiv,K(t=this.toggleEditMode).call(t,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],void 0!==this.edgeBeingEditedId){var r,n,i,o,a=this.body.edges[this.edgeBeingEditedId],s=this._getNewTargetNode(a.from.x,a.from.y),l=this._getNewTargetNode(a.to.x,a.to.y);this.temporaryIds.nodes.push(s.id),this.temporaryIds.nodes.push(l.id),this.body.nodes[s.id]=s,this.body.nodeIndices.push(s.id),this.body.nodes[l.id]=l,this.body.nodeIndices.push(l.id),this._temporaryBindUI("onTouch",K(r=this._controlNodeTouch).call(r,this)),this._temporaryBindUI("onTap",function(){}),this._temporaryBindUI("onHold",function(){}),this._temporaryBindUI("onDragStart",K(n=this._controlNodeDragStart).call(n,this)),this._temporaryBindUI("onDrag",K(i=this._controlNodeDrag).call(i,this)),this._temporaryBindUI("onDragEnd",K(o=this._controlNodeDragEnd).call(o,this)),this._temporaryBindUI("onMouseMove",function(){}),this._temporaryBindEvent("beforeDrawing",function(t){var e=a.edgeType.findBorderPositions(t);!1===s.selected&&(s.x=e.from.x,s.y=e.from.y),!1===l.selected&&(l.x=e.to.x,l.y=e.to.y)}),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}else{var g=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(g.from.id,g.to.id)}}},{key:"deleteSelected",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="delete";var e=this.selectionHandler.getSelectedNodeIds(),r=this.selectionHandler.getSelectedEdgeIds(),n=void 0;if(e.length>0){for(var i=0;i<e.length;i++)if(!0===this.body.nodes[e[i]].isCluster)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"==typeof this.options.deleteNode&&(n=this.options.deleteNode)}else r.length>0&&"function"==typeof this.options.deleteEdge&&(n=this.options.deleteEdge);if("function"==typeof n){var o={nodes:e,edges:r};if(2!==n.length)throw new Error("The function for delete does not support two arguments (data, callback)");n(o,function(e){null!=e&&"delete"===t.inMode?(t.body.data.edges.getDataSet().remove(e.edges),t.body.data.nodes.getDataSet().remove(e.nodes),t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar()):(t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().remove(r),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){!0===this.options.enabled?(this.guiEnabled=!0,this._createWrappers(),!1===this.editMode?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",!0===this.editMode?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",!0===this.editMode?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="vis-close",this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(t,e){var r=Ro({},this.options.controlNodeStyle);r.id="targetNode"+bc(),r.hidden=!1,r.physics=!1,r.x=t,r.y=e;var n=this.body.functions.createNode(r);return n.shape.boundingBox={left:t,right:t,top:e,bottom:e},n}},{key:"_createEditButton",value:function(){var t;this._clean(),this.manipulationDOM={},ko(this.editModeDiv);var e=this.options.locales[this.options.locale],r=this._createButton("editMode","vis-button vis-edit vis-edit-mode",e.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(r),this._bindHammerToDiv(r,K(t=this.toggleEditMode).call(t,this))}},{key:"_clean",value:function(){this.inMode=!1,!0===this.guiEnabled&&(ko(this.editModeDiv),ko(this.manipulationDiv),this._cleanManipulatorHammers()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanManipulatorHammers",value:function(){if(0!=this.manipulationHammers.length){for(var t=0;t<this.manipulationHammers.length;t++)this.manipulationHammers[t].destroy();this.manipulationHammers=[]}}},{key:"_removeManipulationDOM",value:function(){this._clean(),ko(this.manipulationDiv),ko(this.editModeDiv),ko(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function(t){var e,r=this._createButton("addNode","vis-button vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(r),this._bindHammerToDiv(r,K(e=this.addNodeMode).call(e,this))}},{key:"_createAddEdgeButton",value:function(t){var e,r=this._createButton("addEdge","vis-button vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(r),this._bindHammerToDiv(r,K(e=this.addEdgeMode).call(e,this))}},{key:"_createEditNodeButton",value:function(t){var e,r=this._createButton("editNode","vis-button vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(r),this._bindHammerToDiv(r,K(e=this.editNode).call(e,this))}},{key:"_createEditEdgeButton",value:function(t){var e,r=this._createButton("editEdge","vis-button vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(r),this._bindHammerToDiv(r,K(e=this.editEdgeMode).call(e,this))}},{key:"_createDeleteButton",value:function(t){var e,r;r=this.options.rtl?"vis-button vis-delete-rtl":"vis-button vis-delete";var n=this._createButton("delete",r,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(n),this._bindHammerToDiv(n,K(e=this.deleteSelected).call(e,this))}},{key:"_createBackButton",value:function(t){var e,r=this._createButton("back","vis-button vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(r),this._bindHammerToDiv(r,K(e=this.showManipulatorToolbar).call(e,this))}},{key:"_createButton",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("div"),this.manipulationDOM[t+"Div"].className=e,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=n,this.manipulationDOM[t+"Label"].innerHTML=r,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDiv.appendChild(this._createButton("description","vis-button vis-none",t))}},{key:"_temporaryBindEvent",value:function(t,e){this.temporaryEventFunctions.push({event:t,boundFunction:e}),this.body.emitter.on(t,e)}},{key:"_temporaryBindUI",value:function(t,e){if(void 0===this.body.eventListeners[t])throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+Sg(Qi(this.body.eventListeners)));this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=e}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var e=this.temporaryEventFunctions[t].event,r=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(e,r)}this.temporaryEventFunctions=[]}},{key:"_bindHammerToDiv",value:function(t,e){var r=new El(t,{});Nh(r,e),this.manipulationHammers.push(r)}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){var e;this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var r,n=bi(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[t]);-1!==n&&ea(r=this.body.edgeIndices).call(r,n,1)}for(var i=0;i<this.temporaryIds.nodes.length;i++){var o;delete this.body.nodes[this.temporaryIds.nodes[i]];var a,s=bi(o=this.body.nodeIndices).call(o,this.temporaryIds.nodes[i]);-1!==s&&ea(a=this.body.nodeIndices).call(a,s,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=It({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var t=this.lastTouch,e=this.selectionHandler._pointerToPositionObject(t),r=this.body.nodes[this.temporaryIds.nodes[0]],n=this.body.nodes[this.temporaryIds.nodes[1]],i=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var o=r.isOverlappingWith(e),a=n.isOverlappingWith(e);!0===o?(this.selectedControlNode=r,i.edgeType.from=r):!0===a&&(this.selectedControlNode=n,i.edgeType.to=n),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var e=this.body.functions.getPointer(t.center),r=this.canvas.DOMtoCanvas(e);void 0!==this.selectedControlNode?(this.selectedControlNode.x=r.x,this.selectedControlNode.y=r.y):this.interactionHandler.onDrag(t),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var e=this.body.functions.getPointer(t.center),r=this.selectionHandler._pointerToPositionObject(e),n=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var i=this.selectionHandler._getAllNodesOverlappingWith(r),o=void 0,a=i.length-1;a>=0;a--)if(i[a]!==this.selectedControlNode.id){o=this.body.nodes[i[a]];break}if(void 0!==o&&void 0!==this.selectedControlNode)if(!0===o.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var s=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===s.id?this._performEditEdge(o.id,n.to.id):this._performEditEdge(n.from.id,o.id)}else n.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if((new Date).valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=It({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;var e=this.lastTouch,r=this.selectionHandler.getNodeAt(e);if(void 0!==r)if(!0===r.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var n=this._getNewTargetNode(r.x,r.y);this.body.nodes[n.id]=n,this.body.nodeIndices.push(n.id);var i=this.body.functions.createEdge({id:"connectionEdge"+bc(),from:r.id,to:n.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[i.id]=i,this.body.edgeIndices.push(i.id),this.temporaryIds.nodes.push(n.id),this.temporaryIds.edges.push(i.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(t){var e=this.body.functions.getPointer(t.center),r=this.selectionHandler._pointerToPositionObject(e),n=void 0;void 0!==this.temporaryIds.edges[0]&&(n=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var i=this.selectionHandler._getAllNodesOverlappingWith(r),o=void 0,a=i.length-1;a>=0;a--){var s;if(-1===bi(s=this.temporaryIds.nodes).call(s,i[a])){o=this.body.nodes[i[a]];break}}if(t.controlEdge={from:n,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",t,e),void 0!==this.temporaryIds.nodes[0]){var l=this.body.nodes[this.temporaryIds.nodes[0]];l.x=this.canvas._XconvertDOMtoCanvas(e.x),l.y=this.canvas._YconvertDOMtoCanvas(e.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(t)}},{key:"_finishConnect",value:function(t){var e=this.body.functions.getPointer(t.center),r=this.selectionHandler._pointerToPositionObject(e),n=void 0;void 0!==this.temporaryIds.edges[0]&&(n=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var i=this.selectionHandler._getAllNodesOverlappingWith(r),o=void 0,a=i.length-1;a>=0;a--){var s;if(-1===bi(s=this.temporaryIds.nodes).call(s,i[a])){o=this.body.nodes[i[a]];break}}this._cleanupTemporaryNodesAndEdges(),void 0!==o&&(!0===o.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[n]&&void 0!==this.body.nodes[o.id]&&this._performAddEdge(n,o.id)),t.controlEdge={from:n,to:o?o.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",t,e),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(t){var e=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",t,e,void 0,!0)}},{key:"_performAddNode",value:function(t){var e=this,r={id:bc(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if("function"==typeof this.options.addNode){if(2!==this.options.addNode.length)throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(r,function(t){null!=t&&"addNode"===e.inMode&&e.body.data.nodes.getDataSet().add(t),e.showManipulatorToolbar()})}else this.body.data.nodes.getDataSet().add(r),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(t,e){var r=this,n={from:t,to:e};if("function"==typeof this.options.addEdge){if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(n,function(t){null!=t&&"addEdge"===r.inMode&&(r.body.data.edges.getDataSet().add(t),r.selectionHandler.unselectAll(),r.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().add(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(t,e){var r=this,n={id:this.edgeBeingEditedId,from:t,to:e,label:this.body.data.edges.get(this.edgeBeingEditedId).label},i=this.options.editEdge;if("object"===ao(i)&&(i=i.editWithoutDrag),"function"==typeof i){if(2!==i.length)throw new Error("The function for edit does not support two arguments (data, callback)");i(n,function(t){null==t||"editEdge"!==r.inMode?(r.body.edges[n.id].updateEdgeType(),r.body.emitter.emit("_redraw"),r.showManipulatorToolbar()):(r.body.data.edges.getDataSet().update(t),r.selectionHandler.unselectAll(),r.showManipulatorToolbar())})}else this.body.data.edges.getDataSet().update(n),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),t}();Ya('div.vis-configuration{position:relative;display:block;float:left;font-size:12px}div.vis-configuration-wrapper{display:block;width:700px}div.vis-configuration-wrapper:after{clear:both;content:"";display:block}div.vis-configuration.vis-config-option-container{display:block;width:495px;background-color:#fff;border:2px solid #f7f8fa;border-radius:4px;margin-top:20px;left:10px;padding-left:5px}div.vis-configuration.vis-config-button{display:block;width:495px;height:25px;vertical-align:middle;line-height:25px;background-color:#f7f8fa;border:2px solid #ceced0;border-radius:4px;margin-top:20px;left:10px;padding-left:5px;cursor:pointer;margin-bottom:30px}div.vis-configuration.vis-config-button.hover{background-color:#4588e6;border:2px solid #214373;color:#fff}div.vis-configuration.vis-config-item{display:block;float:left;width:495px;height:25px;vertical-align:middle;line-height:25px}div.vis-configuration.vis-config-item.vis-config-s2{left:10px;background-color:#f7f8fa;padding-left:5px;border-radius:3px}div.vis-configuration.vis-config-item.vis-config-s3{left:20px;background-color:#e4e9f0;padding-left:5px;border-radius:3px}div.vis-configuration.vis-config-item.vis-config-s4{left:30px;background-color:#cfd8e6;padding-left:5px;border-radius:3px}div.vis-configuration.vis-config-header{font-size:18px;font-weight:700}div.vis-configuration.vis-config-label{width:120px;height:25px;line-height:25px}div.vis-configuration.vis-config-label.vis-config-s3{width:110px}div.vis-configuration.vis-config-label.vis-config-s4{width:100px}div.vis-configuration.vis-config-colorBlock{top:1px;width:30px;height:19px;border:1px solid #444;border-radius:2px;padding:0;margin:0;cursor:pointer}input.vis-configuration.vis-config-checkbox{left:-5px}input.vis-configuration.vis-config-rangeinput{position:relative;top:-5px;width:60px;padding:1px;margin:0;pointer-events:none}input.vis-configuration.vis-config-range{-webkit-appearance:none;border:0 solid #fff;background-color:transparent;width:300px;height:20px}input.vis-configuration.vis-config-range::-webkit-slider-runnable-track{width:300px;height:5px;background:#dedede;background:-moz-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#dedede),color-stop(99%,#c8c8c8));background:-webkit-linear-gradient(top,#dedede,#c8c8c8 99%);background:-o-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:-ms-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:linear-gradient(180deg,#dedede 0,#c8c8c8 99%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#dedede",endColorstr="#c8c8c8",GradientType=0);border:1px solid #999;box-shadow:0 0 3px 0 #aaa;border-radius:3px}input.vis-configuration.vis-config-range::-webkit-slider-thumb{-webkit-appearance:none;border:1px solid #14334b;height:17px;width:17px;border-radius:50%;background:#3876c2;background:-moz-linear-gradient(top,#3876c2 0,#385380 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#3876c2),color-stop(100%,#385380));background:-webkit-linear-gradient(top,#3876c2,#385380);background:-o-linear-gradient(top,#3876c2 0,#385380 100%);background:-ms-linear-gradient(top,#3876c2 0,#385380 100%);background:linear-gradient(180deg,#3876c2 0,#385380);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#3876c2",endColorstr="#385380",GradientType=0);box-shadow:0 0 1px 0 #111927;margin-top:-7px}input.vis-configuration.vis-config-range:focus{outline:none}input.vis-configuration.vis-config-range:focus::-webkit-slider-runnable-track{background:#9d9d9d;background:-moz-linear-gradient(top,#9d9d9d 0,#c8c8c8 99%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#9d9d9d),color-stop(99%,#c8c8c8));background:-webkit-linear-gradient(top,#9d9d9d,#c8c8c8 99%);background:-o-linear-gradient(top,#9d9d9d 0,#c8c8c8 99%);background:-ms-linear-gradient(top,#9d9d9d 0,#c8c8c8 99%);background:linear-gradient(180deg,#9d9d9d 0,#c8c8c8 99%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#9d9d9d",endColorstr="#c8c8c8",GradientType=0)}input.vis-configuration.vis-config-range::-moz-range-track{width:300px;height:10px;background:#dedede;background:-moz-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#dedede),color-stop(99%,#c8c8c8));background:-webkit-linear-gradient(top,#dedede,#c8c8c8 99%);background:-o-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:-ms-linear-gradient(top,#dedede 0,#c8c8c8 99%);background:linear-gradient(180deg,#dedede 0,#c8c8c8 99%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#dedede",endColorstr="#c8c8c8",GradientType=0);border:1px solid #999;box-shadow:0 0 3px 0 #aaa;border-radius:3px}input.vis-configuration.vis-config-range::-moz-range-thumb{border:none;height:16px;width:16px;border-radius:50%;background:#385380}input.vis-configuration.vis-config-range:-moz-focusring{outline:1px solid #fff;outline-offset:-1px}input.vis-configuration.vis-config-range::-ms-track{width:300px;height:5px;background:transparent;border-color:transparent;border-width:6px 0;color:transparent}input.vis-configuration.vis-config-range::-ms-fill-lower{background:#777;border-radius:10px}input.vis-configuration.vis-config-range::-ms-fill-upper{background:#ddd;border-radius:10px}input.vis-configuration.vis-config-range::-ms-thumb{border:none;height:16px;width:16px;border-radius:50%;background:#385380}input.vis-configuration.vis-config-range:focus::-ms-fill-lower{background:#888}input.vis-configuration.vis-config-range:focus::-ms-fill-upper{background:#ccc}.vis-configuration-popup{position:absolute;background:rgba(57,76,89,.85);border:2px solid #f2faff;line-height:30px;height:30px;width:150px;text-align:center;color:#fff;font-size:14px;border-radius:4px;-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out}.vis-configuration-popup:after,.vis-configuration-popup:before{left:100%;top:50%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}.vis-configuration-popup:after{border-color:rgba(136,183,213,0) rgba(136,183,213,0) rgba(136,183,213,0) rgba(57,76,89,.85);border-width:8px;margin-top:-8px}.vis-configuration-popup:before{border-color:rgba(194,225,245,0) rgba(194,225,245,0) rgba(194,225,245,0) #f2faff;border-width:12px;margin-top:-12px}'),Ya('div.vis-color-picker{position:absolute;top:0;left:30px;margin-top:-140px;margin-left:30px;width:310px;height:444px;z-index:1;padding:10px;border-radius:15px;background-color:#fff;display:none;box-shadow:0 0 10px 0 rgba(0,0,0,.5)}div.vis-color-picker div.vis-arrow{position:absolute;top:147px;left:5px}div.vis-color-picker div.vis-arrow:after,div.vis-color-picker div.vis-arrow:before{right:100%;top:50%;border:solid transparent;content:" ";height:0;width:0;position:absolute;pointer-events:none}div.vis-color-picker div.vis-arrow:after{border-color:hsla(0,0%,100%,0) #fff hsla(0,0%,100%,0) hsla(0,0%,100%,0);border-width:30px;margin-top:-30px}div.vis-color-picker div.vis-color{position:absolute;width:289px;height:289px;cursor:pointer}div.vis-color-picker div.vis-brightness{position:absolute;top:313px}div.vis-color-picker div.vis-opacity{position:absolute;top:350px}div.vis-color-picker div.vis-selector{position:absolute;top:137px;left:137px;width:15px;height:15px;border-radius:15px;border:1px solid #fff;background:#4c4c4c;background:-moz-linear-gradient(top,#4c4c4c 0,#595959 12%,#666 25%,#474747 39%,#2c2c2c 50%,#000 51%,#111 60%,#2b2b2b 76%,#1c1c1c 91%,#131313 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0,#4c4c4c),color-stop(12%,#595959),color-stop(25%,#666),color-stop(39%,#474747),color-stop(50%,#2c2c2c),color-stop(51%,#000),color-stop(60%,#111),color-stop(76%,#2b2b2b),color-stop(91%,#1c1c1c),color-stop(100%,#131313));background:-webkit-linear-gradient(top,#4c4c4c,#595959 12%,#666 25%,#474747 39%,#2c2c2c 50%,#000 51%,#111 60%,#2b2b2b 76%,#1c1c1c 91%,#131313);background:-o-linear-gradient(top,#4c4c4c 0,#595959 12%,#666 25%,#474747 39%,#2c2c2c 50%,#000 51%,#111 60%,#2b2b2b 76%,#1c1c1c 91%,#131313 100%);background:-ms-linear-gradient(top,#4c4c4c 0,#595959 12%,#666 25%,#474747 39%,#2c2c2c 50%,#000 51%,#111 60%,#2b2b2b 76%,#1c1c1c 91%,#131313 100%);background:linear-gradient(180deg,#4c4c4c 0,#595959 12%,#666 25%,#474747 39%,#2c2c2c 50%,#000 51%,#111 60%,#2b2b2b 76%,#1c1c1c 91%,#131313);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#4c4c4c",endColorstr="#131313",GradientType=0)}div.vis-color-picker div.vis-new-color{left:159px;text-align:right;padding-right:2px}div.vis-color-picker div.vis-initial-color,div.vis-color-picker div.vis-new-color{position:absolute;width:140px;height:20px;border:1px solid rgba(0,0,0,.1);border-radius:5px;top:380px;font-size:10px;color:rgba(0,0,0,.4);vertical-align:middle;line-height:20px}div.vis-color-picker div.vis-initial-color{left:10px;text-align:left;padding-left:2px}div.vis-color-picker div.vis-label{position:absolute;width:300px;left:10px}div.vis-color-picker div.vis-label.vis-brightness{top:300px}div.vis-color-picker div.vis-label.vis-opacity{top:338px}div.vis-color-picker div.vis-button{position:absolute;width:68px;height:25px;border-radius:10px;vertical-align:middle;text-align:center;line-height:25px;top:410px;border:2px solid #d9d9d9;background-color:#f7f7f7;cursor:pointer}div.vis-color-picker div.vis-button.vis-cancel{left:5px}div.vis-color-picker div.vis-button.vis-load{left:82px}div.vis-color-picker div.vis-button.vis-apply{left:159px}div.vis-color-picker div.vis-button.vis-save{left:236px}div.vis-color-picker input.vis-range{width:290px;height:20px}');var Rd={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},Dd=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Rl(this,t),this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return Ll(t,[{key:"insertTo",value:function(t){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=t}},{key:"setCloseCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=t}},{key:"_isColorString",value:function(t){if("string"==typeof t)return Rd[t]}},{key:"setColor",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("none"!==t){var r,n=this._isColorString(t);if(void 0!==n&&(t=n),!0===To(t)){if(!0===Zo(t)){var i=t.substr(4).substr(0,t.length-5).split(",");r={r:i[0],g:i[1],b:i[2],a:1}}else if(!0===function(t){return wo.test(t)}(t)){var o=t.substr(5).substr(0,t.length-6).split(",");r={r:o[0],g:o[1],b:o[2],a:o[3]}}else if(!0===Uo(t)){var a=No(t);r={r:a.r,g:a.g,b:a.b,a:1}}}else if(t instanceof Object&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b){var s=void 0!==t.a?t.a:"1.0";r={r:t.r,g:t.g,b:t.b,a:s}}if(void 0===r)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Sg(t));this._setColor(r,e)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this;!0===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.previousColor=It({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",og(function(){void 0!==t.closeCallback&&(t.closeCallback(),t.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){!0===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.initialColor=It({},t)),this.color=t;var e=jo(t.r,t.g,t.b),r=2*Math.PI,n=this.r*e.s,i=this.centerCoordinates.x+n*Math.sin(r*e.h),o=this.centerCoordinates.y+n*Math.cos(r*e.h);this.colorPickerSelector.style.left=i-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=o-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var e=jo(this.color.r,this.color.g,this.color.b);e.v=t/100;var r=Vo(e.h,e.s,e.v);r.a=this.color.a,this.color=r,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.color,e=jo(t.r,t.g,t.b),r=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1)),r.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var n=this.colorPickerCanvas.clientWidth,i=this.colorPickerCanvas.clientHeight;r.clearRect(0,0,n,i),r.putImageData(this.hueCircle,0,0),r.fillStyle="rgba(0,0,0,"+(1-e.v)+")",r.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),iu(r).call(r),this.brightnessRange.value=100*e.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,e,r,n;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var i=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var o=document.createElement("DIV");o.style.color="red",o.style.fontWeight="bold",o.style.padding="10px",o.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(o)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(t){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(t){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var a=this;this.opacityRange.onchange=function(){a._setOpacity(this.value)},this.opacityRange.oninput=function(){a._setOpacity(this.value)},this.brightnessRange.onchange=function(){a._setBrightness(this.value)},this.brightnessRange.oninput=function(){a._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerHTML="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerHTML="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerHTML="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerHTML="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerHTML="cancel",this.cancelButton.onclick=K(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerHTML="apply",this.applyButton.onclick=K(e=this._apply).call(e,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerHTML="save",this.saveButton.onclick=K(r=this._save).call(r,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerHTML="load last",this.loadButton.onclick=K(n=this._loadLast).call(n,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new El(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),Nh(this.hammer,function(e){t._moveSelector(e)}),this.hammer.on("tap",function(e){t._moveSelector(e)}),this.hammer.on("panstart",function(e){t._moveSelector(e)}),this.hammer.on("panmove",function(e){t._moveSelector(e)}),this.hammer.on("panend",function(e){t._moveSelector(e)})}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var t=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var e,r,n,i,o=this.colorPickerCanvas.clientWidth,a=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,o,a),this.centerCoordinates={x:.5*o,y:.5*a},this.r=.49*o;var s,l=2*Math.PI/360,g=1/this.r;for(n=0;n<360;n++)for(i=0;i<this.r;i++)e=this.centerCoordinates.x+i*Math.sin(l*n),r=this.centerCoordinates.y+i*Math.cos(l*n),s=Vo(.002777777777777778*n,i*g,1),t.fillStyle="rgb("+s.r+","+s.g+","+s.b+")",t.fillRect(e-.5,r-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,o,a)}this.generated=!0}},{key:"_moveSelector",value:function(t){var e=this.colorPickerDiv.getBoundingClientRect(),r=t.center.x-e.left,n=t.center.y-e.top,i=.5*this.colorPickerDiv.clientHeight,o=.5*this.colorPickerDiv.clientWidth,a=r-o,s=n-i,l=Math.atan2(a,s),g=.98*Math.min(Math.sqrt(a*a+s*s),o),c=Math.cos(l)*g+i,u=Math.sin(l)*g+o;this.colorPickerSelector.style.top=c-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=u-.5*this.colorPickerSelector.clientWidth+"px";var h=l/(2*Math.PI);h=h<0?h+1:h;var d=g/this.r,A=jo(this.color.r,this.color.g,this.color.b);A.h=h,A.s=d;var f=Vo(A.h,A.s,A.v);f.a=this.color.a,this.color=f,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),t}(),Ld=function(){function t(e,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Rl(this,t),this.parent=e,this.changedOptions=[],this.container=r,this.allowCreation=!1,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},It(this.options,this.defaultOptions),this.configureOptions=n,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Dd(i),this.wrapper=void 0}return Ll(t,[{key:"setOptions",value:function(t){if(void 0!==t){this.popupHistory={},this._removePopup();var e=!0;if("string"==typeof t)this.options.filter=t;else if(no(t))this.options.filter=t.join();else if("object"===ao(t)){if(null==t)throw new TypeError("options cannot be null");void 0!==t.container&&(this.options.container=t.container),void 0!==ui(t)&&(this.options.filter=ui(t)),void 0!==t.showButton&&(this.options.showButton=t.showButton),void 0!==t.enabled&&(e=t.enabled)}else"boolean"==typeof t?(this.options.filter=!0,e=t):"function"==typeof t&&(this.options.filter=t,e=!0);!1===ui(this.options)&&(e=!1),this.options.enabled=e}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=ui(this.options),e=0,r=!1;for(var n in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,n)&&(this.allowCreation=!1,r=!1,"function"==typeof t?r=(r=t(n,[]))||this._handleObject(this.configureOptions[n],[n],!0):!0!==t&&-1===bi(t).call(t,n)||(r=!0),!1!==r&&(this.allowCreation=!0,e>0&&this._makeItem([]),this._makeHeader(n),this._handleObject(this.configureOptions[n],[n])),e++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var e=this.moduleOptions,r=0;r<t.length;r++){if(void 0===e[t[r]]){e=void 0;break}e=e[t[r]]}return e}},{key:"_makeItem",value:function(t){if(!0===this.allowCreation){var e=document.createElement("div");e.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return Gn(n).call(n,function(t){e.appendChild(t)}),this.domElements.push(e),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var e=document.createElement("div");e.className="vis-configuration vis-config-header",e.innerHTML=t,this._makeItem([],e)}},{key:"_makeLabel",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.createElement("div");return n.className="vis-configuration vis-config-label vis-config-s"+e.length,n.innerHTML=!0===r?"<i><b>"+t+":</b></i>":t+":",n}},{key:"_makeDropdown",value:function(t,e,r){var n=document.createElement("select");n.className="vis-configuration vis-config-select";var i=0;void 0!==e&&-1!==bi(t).call(t,e)&&(i=bi(t).call(t,e));for(var o=0;o<t.length;o++){var a=document.createElement("option");a.value=t[o],o===i&&(a.selected="selected"),a.innerHTML=t[o],n.appendChild(a)}var s=this;n.onchange=function(){s._update(this.value,r)};var l=this._makeLabel(r[r.length-1],r);this._makeItem(r,l,n)}},{key:"_makeRange",value:function(t,e,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=document.createElement("input");s.className="vis-configuration vis-config-range";try{s.type="range",s.min=i,s.max=o}catch(t){}s.step=a;var l="",g=0;if(void 0!==e){var c=1.2;e<0&&e*c<i?(s.min=Math.ceil(e*c),g=s.min,l="range increased"):e/c<i&&(s.min=Math.ceil(e/c),g=s.min,l="range increased"),e*c>o&&1!==o&&(s.max=Math.ceil(e*c),g=s.max,l="range increased"),s.value=e}else s.value=n;var u=document.createElement("input");u.className="vis-configuration vis-config-rangeinput",u.value=s.value;var h=this;s.onchange=function(){u.value=this.value,h._update(Number(this.value),r)},s.oninput=function(){u.value=this.value};var d=this._makeLabel(r[r.length-1],r),A=this._makeItem(r,d,s,u);""!==l&&this.popupHistory[A]!==g&&(this.popupHistory[A]=g,this._setupPopup(l,A))}},{key:"_makeButton",value:function(){var t=this;if(!0===this.options.showButton){var e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerHTML="generate options",e.onclick=function(){t._printOptions()},e.onmouseover=function(){e.className="vis-configuration vis-config-button hover"},e.onmouseout=function(){e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}},{key:"_setupPopup",value:function(t,e){var r=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var n=document.createElement("div");n.id="vis-configuration-popup",n.className="vis-configuration-popup",n.innerHTML=t,n.onclick=function(){r._removePopup()},this.popupCounter+=1,this.popupDiv={html:n,index:e}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(void 0!==this.popupDiv.html){var e=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=e.left+"px",this.popupDiv.html.style.top=e.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=og(function(){t.popupDiv.html.style.opacity=0},1500),this.popupDiv.deleteTimeout=og(function(){t._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(t,e,r){var n=document.createElement("input");n.type="checkbox",n.className="vis-configuration vis-config-checkbox",n.checked=t,void 0!==e&&(n.checked=e,e!==t&&("object"===ao(t)?e!==t.enabled&&this.changedOptions.push({path:r,value:e}):this.changedOptions.push({path:r,value:e})));var i=this;n.onchange=function(){i._update(this.checked,r)};var o=this._makeLabel(r[r.length-1],r);this._makeItem(r,o,n)}},{key:"_makeTextInput",value:function(t,e,r){var n=document.createElement("input");n.type="text",n.className="vis-configuration vis-config-text",n.value=e,e!==t&&this.changedOptions.push({path:r,value:e});var i=this;n.onchange=function(){i._update(this.value,r)};var o=this._makeLabel(r[r.length-1],r);this._makeItem(r,o,n)}},{key:"_makeColorField",value:function(t,e,r){var n=this,i=t[1],o=document.createElement("div");"none"!==(e=void 0===e?i:e)?(o.className="vis-configuration vis-config-colorBlock",o.style.backgroundColor=e):o.className="vis-configuration vis-config-colorBlock none",e=void 0===e?i:e,o.onclick=function(){n._showColorPicker(e,o,r)};var a=this._makeLabel(r[r.length-1],r);this._makeItem(r,a,o)}},{key:"_showColorPicker",value:function(t,e,r){var n=this;e.onclick=function(){},this.colorPicker.insertTo(e),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback(function(t){var i="rgba("+t.r+","+t.g+","+t.b+","+t.a+")";e.style.backgroundColor=i,n._update(i,r)}),this.colorPicker.setCloseCallback(function(){e.onclick=function(){n._showColorPicker(t,e,r)}})}},{key:"_handleObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1,i=ui(this.options),o=!1;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){n=!0;var s=t[a],l=Do(e,a);if("function"==typeof i&&!1===(n=i(a,e))&&!no(s)&&"string"!=typeof s&&"boolean"!=typeof s&&s instanceof Object&&(this.allowCreation=!1,n=this._handleObject(s,l,!0),this.allowCreation=!1===r),!1!==n){o=!0;var g=this._getValue(l);if(no(s))this._handleArray(s,g,l);else if("string"==typeof s)this._makeTextInput(s,g,l);else if("boolean"==typeof s)this._makeCheckbox(s,g,l);else if(s instanceof Object){var c=!0;if(-1!==bi(e).call(e,"physics")&&this.moduleOptions.physics.solver!==a&&"wind"!==a&&(c=!1),!0===c)if(void 0!==s.enabled){var u=Do(l,"enabled"),h=this._getValue(u);if(!0===h){var d=this._makeLabel(a,l,!0);this._makeItem(l,d),o=this._handleObject(s,l)||o}else this._makeCheckbox(s,h,l)}else{var A=this._makeLabel(a,l,!0);this._makeItem(l,A),o=this._handleObject(s,l)||o}}else console.error("dont know how to handle",s,a,l)}}return o}},{key:"_handleArray",value:function(t,e,r){"string"==typeof t[0]&&"color"===t[0]?(this._makeColorField(t,e,r),t[1]!==e&&this.changedOptions.push({path:r,value:e})):"string"==typeof t[0]?(this._makeDropdown(t,e,r),t[0]!==e&&this.changedOptions.push({path:r,value:e})):"number"==typeof t[0]&&(this._makeRange(t,e,r),t[0]!==e&&this.changedOptions.push({path:r,value:Number(e)}))}},{key:"_update",value:function(t,e){var r=this._constructOptions(t,e);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",r),this.initialized=!0,this.parent.setOptions(r)}},{key:"_constructOptions",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r;t="false"!==(t="true"===t||t)&&t;for(var i=0;i<e.length;i++)"global"!==e[i]&&(void 0===n[e[i]]&&(n[e[i]]={}),i!==e.length-1?n=n[e[i]]:n[e[i]]=t);return r}},{key:"_printOptions",value:function(){var t=this.getOptions();this.optionsContainer.innerHTML="<pre>var options = "+Sg(t,null,2)+"</pre>"}},{key:"getOptions",value:function(){for(var t={},e=0;e<this.changedOptions.length;e++)this._constructOptions(this.changedOptions[e].value,this.changedOptions[e].path,t);return t}}]),t}(),Pd="string",Nd="boolean",zd="number",Fd="array",Bd="object",jd=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],Vd={configure:{enabled:{boolean:Nd},filter:{boolean:Nd,string:Pd,array:Fd,function:"function"},container:{dom:"dom"},showButton:{boolean:Nd},__type__:{object:Bd,boolean:Nd,string:Pd,array:Fd,function:"function"}},edges:{arrows:{to:{enabled:{boolean:Nd},scaleFactor:{number:zd},type:{string:jd},imageHeight:{number:zd},imageWidth:{number:zd},src:{string:Pd},__type__:{object:Bd,boolean:Nd}},middle:{enabled:{boolean:Nd},scaleFactor:{number:zd},type:{string:jd},imageWidth:{number:zd},imageHeight:{number:zd},src:{string:Pd},__type__:{object:Bd,boolean:Nd}},from:{enabled:{boolean:Nd},scaleFactor:{number:zd},type:{string:jd},imageWidth:{number:zd},imageHeight:{number:zd},src:{string:Pd},__type__:{object:Bd,boolean:Nd}},__type__:{string:["from","to","middle"],object:Bd}},endPointOffset:{from:{number:zd},to:{number:zd},__type__:{object:Bd,number:zd}},arrowStrikethrough:{boolean:Nd},background:{enabled:{boolean:Nd},color:{string:Pd},size:{number:zd},dashes:{boolean:Nd,array:Fd},__type__:{object:Bd,boolean:Nd}},chosen:{label:{boolean:Nd,function:"function"},edge:{boolean:Nd,function:"function"},__type__:{object:Bd,boolean:Nd}},color:{color:{string:Pd},highlight:{string:Pd},hover:{string:Pd},inherit:{string:["from","to","both"],boolean:Nd},opacity:{number:zd},__type__:{object:Bd,string:Pd}},dashes:{boolean:Nd,array:Fd},font:{color:{string:Pd},size:{number:zd},face:{string:Pd},background:{string:Pd},strokeWidth:{number:zd},strokeColor:{string:Pd},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:zd},multi:{boolean:Nd,string:Pd},bold:{color:{string:Pd},size:{number:zd},face:{string:Pd},mod:{string:Pd},vadjust:{number:zd},__type__:{object:Bd,string:Pd}},boldital:{color:{string:Pd},size:{number:zd},face:{string:Pd},mod:{string:Pd},vadjust:{number:zd},__type__:{object:Bd,string:Pd}},ital:{color:{string:Pd},size:{number:zd},face:{string:Pd},mod:{string:Pd},vadjust:{number:zd},__type__:{object:Bd,string:Pd}},mono:{color:{string:Pd},size:{number:zd},face:{string:Pd},mod:{string:Pd},vadjust:{number:zd},__type__:{object:Bd,string:Pd}},__type__:{object:Bd,string:Pd}},hidden:{boolean:Nd},hoverWidth:{function:"function",number:zd},label:{string:Pd,undefined:"undefined"},labelHighlightBold:{boolean:Nd},length:{number:zd,undefined:"undefined"},physics:{boolean:Nd},scaling:{min:{number:zd},max:{number:zd},label:{enabled:{boolean:Nd},min:{number:zd},max:{number:zd},maxVisible:{number:zd},drawThreshold:{number:zd},__type__:{object:Bd,boolean:Nd}},customScalingFunction:{function:"function"},__type__:{object:Bd}},selectionWidth:{function:"function",number:zd},selfReferenceSize:{number:zd},selfReference:{size:{number:zd},angle:{number:zd},renderBehindTheNode:{boolean:Nd},__type__:{object:Bd}},shadow:{enabled:{boolean:Nd},color:{string:Pd},size:{number:zd},x:{number:zd},y:{number:zd},__type__:{object:Bd,boolean:Nd}},smooth:{enabled:{boolean:Nd},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:zd},forceDirection:{string:["horizontal","vertical","none"],boolean:Nd},__type__:{object:Bd,boolean:Nd}},title:{string:Pd,undefined:"undefined"},width:{number:zd},widthConstraint:{maximum:{number:zd},__type__:{object:Bd,boolean:Nd,number:zd}},value:{number:zd,undefined:"undefined"},__type__:{object:Bd}},groups:{useDefaultGroups:{boolean:Nd},__any__:"get from nodes, will be overwritten below",__type__:{object:Bd}},interaction:{dragNodes:{boolean:Nd},dragView:{boolean:Nd},hideEdgesOnDrag:{boolean:Nd},hideEdgesOnZoom:{boolean:Nd},hideNodesOnDrag:{boolean:Nd},hover:{boolean:Nd},keyboard:{enabled:{boolean:Nd},speed:{x:{number:zd},y:{number:zd},zoom:{number:zd},__type__:{object:Bd}},bindToWindow:{boolean:Nd},__type__:{object:Bd,boolean:Nd}},multiselect:{boolean:Nd},navigationButtons:{boolean:Nd},selectable:{boolean:Nd},selectConnectedEdges:{boolean:Nd},hoverConnectedEdges:{boolean:Nd},tooltipDelay:{number:zd},zoomView:{boolean:Nd},zoomSpeed:{number:zd},__type__:{object:Bd}},layout:{randomSeed:{undefined:"undefined",number:zd,string:Pd},improvedLayout:{boolean:Nd},clusterThreshold:{number:zd},hierarchical:{enabled:{boolean:Nd},levelSeparation:{number:zd},nodeSpacing:{number:zd},treeSpacing:{number:zd},blockShifting:{boolean:Nd},edgeMinimization:{boolean:Nd},parentCentralization:{boolean:Nd},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Bd,boolean:Nd}},__type__:{object:Bd}},manipulation:{enabled:{boolean:Nd},initiallyActive:{boolean:Nd},addNode:{boolean:Nd,function:"function"},addEdge:{boolean:Nd,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Bd,boolean:Nd,function:"function"}},deleteNode:{boolean:Nd,function:"function"},deleteEdge:{boolean:Nd,function:"function"},controlNodeStyle:"get from nodes, will be overwritten below",__type__:{object:Bd,boolean:Nd}},nodes:{borderWidth:{number:zd},borderWidthSelected:{number:zd,undefined:"undefined"},brokenImage:{string:Pd,undefined:"undefined"},chosen:{label:{boolean:Nd,function:"function"},node:{boolean:Nd,function:"function"},__type__:{object:Bd,boolean:Nd}},color:{border:{string:Pd},background:{string:Pd},highlight:{border:{string:Pd},background:{string:Pd},__type__:{object:Bd,string:Pd}},hover:{border:{string:Pd},background:{string:Pd},__type__:{object:Bd,string:Pd}},__type__:{object:Bd,string:Pd}},opacity:{number:zd,undefined:"undefined"},fixed:{x:{boolean:Nd},y:{boolean:Nd},__type__:{object:Bd,boolean:Nd}},font:{align:{string:Pd},color:{string:Pd},size:{number:zd},face:{string:Pd},background:{string:Pd},strokeWidth:{number:zd},strokeColor:{string:Pd},vadjust:{number:zd},multi:{boolean:Nd,string:Pd},bold:{color:{string:Pd},size:{number:zd},face:{string:Pd},mod:{string:Pd},vadjust:{number:zd},__type__:{object:Bd,string:Pd}},boldital:{color:{string:Pd},size:{number:zd},face:{string:Pd},mod:{string:Pd},vadjust:{number:zd},__type__:{object:Bd,string:Pd}},ital:{color:{string:Pd},size:{number:zd},face:{string:Pd},mod:{string:Pd},vadjust:{number:zd},__type__:{object:Bd,string:Pd}},mono:{color:{string:Pd},size:{number:zd},face:{string:Pd},mod:{string:Pd},vadjust:{number:zd},__type__:{object:Bd,string:Pd}},__type__:{object:Bd,string:Pd}},group:{string:Pd,number:zd,undefined:"undefined"},heightConstraint:{minimum:{number:zd},valign:{string:Pd},__type__:{object:Bd,boolean:Nd,number:zd}},hidden:{boolean:Nd},icon:{face:{string:Pd},code:{string:Pd},size:{number:zd},color:{string:Pd},weight:{string:Pd,number:zd},__type__:{object:Bd}},id:{string:Pd,number:zd},image:{selected:{string:Pd,undefined:"undefined"},unselected:{string:Pd,undefined:"undefined"},__type__:{object:Bd,string:Pd}},imagePadding:{top:{number:zd},right:{number:zd},bottom:{number:zd},left:{number:zd},__type__:{object:Bd,number:zd}},label:{string:Pd,undefined:"undefined"},labelHighlightBold:{boolean:Nd},level:{number:zd,undefined:"undefined"},margin:{top:{number:zd},right:{number:zd},bottom:{number:zd},left:{number:zd},__type__:{object:Bd,number:zd}},mass:{number:zd},physics:{boolean:Nd},scaling:{min:{number:zd},max:{number:zd},label:{enabled:{boolean:Nd},min:{number:zd},max:{number:zd},maxVisible:{number:zd},drawThreshold:{number:zd},__type__:{object:Bd,boolean:Nd}},customScalingFunction:{function:"function"},__type__:{object:Bd}},shadow:{enabled:{boolean:Nd},color:{string:Pd},size:{number:zd},x:{number:zd},y:{number:zd},__type__:{object:Bd,boolean:Nd}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:Nd,array:Fd},borderRadius:{number:zd},interpolation:{boolean:Nd},useImageSize:{boolean:Nd},useBorderWithImage:{boolean:Nd},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Bd}},size:{number:zd},title:{string:Pd,dom:"dom",undefined:"undefined"},value:{number:zd,undefined:"undefined"},widthConstraint:{minimum:{number:zd},maximum:{number:zd},__type__:{object:Bd,boolean:Nd,number:zd}},x:{number:zd},y:{number:zd},__type__:{object:Bd}},physics:{enabled:{boolean:Nd},barnesHut:{theta:{number:zd},gravitationalConstant:{number:zd},centralGravity:{number:zd},springLength:{number:zd},springConstant:{number:zd},damping:{number:zd},avoidOverlap:{number:zd},__type__:{object:Bd}},forceAtlas2Based:{theta:{number:zd},gravitationalConstant:{number:zd},centralGravity:{number:zd},springLength:{number:zd},springConstant:{number:zd},damping:{number:zd},avoidOverlap:{number:zd},__type__:{object:Bd}},repulsion:{centralGravity:{number:zd},springLength:{number:zd},springConstant:{number:zd},nodeDistance:{number:zd},damping:{number:zd},__type__:{object:Bd}},hierarchicalRepulsion:{centralGravity:{number:zd},springLength:{number:zd},springConstant:{number:zd},nodeDistance:{number:zd},damping:{number:zd},avoidOverlap:{number:zd},__type__:{object:Bd}},maxVelocity:{number:zd},minVelocity:{number:zd},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:Nd},iterations:{number:zd},updateInterval:{number:zd},onlyDynamicEdges:{boolean:Nd},fit:{boolean:Nd},__type__:{object:Bd,boolean:Nd}},timestep:{number:zd},adaptiveTimestep:{boolean:Nd},wind:{x:{number:zd},y:{number:zd},__type__:{object:Bd}},__type__:{object:Bd,boolean:Nd}},autoResize:{boolean:Nd},clickToUse:{boolean:Nd},locale:{string:Pd},locales:{__any__:{any:"any"},__type__:{object:Bd}},height:{string:Pd},width:{string:Pd},__type__:{object:Bd}};Vd.groups.__any__=Vd.nodes,Vd.manipulation.controlNodeStyle=Vd.nodes;var Gd={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},Ud=Object.freeze({__proto__:null,allOptions:Vd,configureOptions:Gd}),Zd=function(){function t(){Rl(this,t)}return Ll(t,[{key:"getDistances",value:function(t,e,r){for(var n={},i=t.edges,o=0;o<e.length;o++){var a={};n[e[o]]=a;for(var s=0;s<e.length;s++)a[e[s]]=o==s?0:1e9}for(var l=0;l<r.length;l++){var g=i[r[l]];!0===g.connected&&void 0!==n[g.fromId]&&void 0!==n[g.toId]&&(n[g.fromId][g.toId]=1,n[g.toId][g.fromId]=1)}for(var c=e.length,u=0;u<c;u++)for(var h=e[u],d=n[h],A=0;A<c-1;A++)for(var f=e[A],C=n[f],p=A+1;p<c;p++){var I=e[p],v=n[I],m=Math.min(C[I],C[h]+d[I]);C[I]=m,v[f]=m}return n}}]),t}(),Hd=function(){function t(e,r,n){Rl(this,t),this.body=e,this.springLength=r,this.springConstant=n,this.distanceSolver=new Zd}return Ll(t,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.distanceSolver.getDistances(this.body,t,e);this._createL_matrix(n),this._createK_matrix(n),this._createE_matrix();for(var i=0,o=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),a=1e9,s=0,l=0,g=0,c=0,u=0;a>.01&&i<o;){i+=1;var h=this._getHighestEnergyNode(r),d=Yi(h,4);for(s=d[0],a=d[1],l=d[2],g=d[3],c=a,u=0;c>1&&u<5;){u+=1,this._moveNode(s,l,g);var A=this._getEnergy(s),f=Yi(A,3);c=f[0],l=f[1],g=f[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var e=this.body.nodeIndices,r=this.body.nodes,n=0,i=e[0],o=0,a=0,s=0;s<e.length;s++){var l=e[s];if(!0!==r[l].predefinedPosition||!0===r[l].isCluster&&!0===t||!0!==r[l].options.fixed.x||!0!==r[l].options.fixed.y){var g=this._getEnergy(l),c=Yi(g,3),u=c[0],h=c[1],d=c[2];n<u&&(n=u,i=l,o=h,a=d)}}return[i,n,o,a]}},{key:"_getEnergy",value:function(t){var e=Yi(this.E_sums[t],2),r=e[0],n=e[1];return[Math.sqrt(Math.pow(r,2)+Math.pow(n,2)),r,n]}},{key:"_moveNode",value:function(t,e,r){for(var n=this.body.nodeIndices,i=this.body.nodes,o=0,a=0,s=0,l=i[t].x,g=i[t].y,c=this.K_matrix[t],u=this.L_matrix[t],h=0;h<n.length;h++){var d=n[h];if(d!==t){var A=i[d].x,f=i[d].y,C=c[d],p=u[d],I=1/Math.pow(Math.pow(l-A,2)+Math.pow(g-f,2),1.5);o+=C*(1-p*Math.pow(g-f,2)*I),a+=C*(p*(l-A)*(g-f)*I),s+=C*(1-p*Math.pow(l-A,2)*I)}}var v=(e/o+r/a)/(a/o-s/a),m=-(a*v+e)/o;i[t].x+=m,i[t].y+=v,this._updateE_matrix(t)}},{key:"_createL_matrix",value:function(t){var e=this.body.nodeIndices,r=this.springLength;this.L_matrix=[];for(var n=0;n<e.length;n++){this.L_matrix[e[n]]={};for(var i=0;i<e.length;i++)this.L_matrix[e[n]][e[i]]=r*t[e[n]][e[i]]}}},{key:"_createK_matrix",value:function(t){var e=this.body.nodeIndices,r=this.springConstant;this.K_matrix=[];for(var n=0;n<e.length;n++){this.K_matrix[e[n]]={};for(var i=0;i<e.length;i++)this.K_matrix[e[n]][e[i]]=r*Math.pow(t[e[n]][e[i]],-2)}}},{key:"_createE_matrix",value:function(){var t=this.body.nodeIndices,e=this.body.nodes;this.E_matrix={},this.E_sums={};for(var r=0;r<t.length;r++)this.E_matrix[t[r]]=[];for(var n=0;n<t.length;n++){for(var i=t[n],o=e[i].x,a=e[i].y,s=0,l=0,g=n;g<t.length;g++){var c=t[g];if(c!==i){var u=e[c].x,h=e[c].y,d=1/Math.sqrt(Math.pow(o-u,2)+Math.pow(a-h,2));this.E_matrix[i][g]=[this.K_matrix[i][c]*(o-u-this.L_matrix[i][c]*(o-u)*d),this.K_matrix[i][c]*(a-h-this.L_matrix[i][c]*(a-h)*d)],this.E_matrix[c][n]=this.E_matrix[i][g],s+=this.E_matrix[i][g][0],l+=this.E_matrix[i][g][1]}}this.E_sums[i]=[s,l]}}},{key:"_updateE_matrix",value:function(t){for(var e=this.body.nodeIndices,r=this.body.nodes,n=this.E_matrix[t],i=this.K_matrix[t],o=this.L_matrix[t],a=r[t].x,s=r[t].y,l=0,g=0,c=0;c<e.length;c++){var u=e[c];if(u!==t){var h=n[c],d=h[0],A=h[1],f=r[u].x,C=r[u].y,p=1/Math.sqrt(Math.pow(a-f,2)+Math.pow(s-C,2)),I=i[u]*(a-f-o[u]*(a-f)*p),v=i[u]*(s-C-o[u]*(s-C)*p);n[c]=[I,v],l+=I,g+=v;var m=this.E_sums[u];m[0]+=I-d,m[1]+=v-A}}this.E_sums[t]=[l,g]}}]),t}();function Wd(t,e,r){var n,i,o,a,s=this;if(!(this instanceof Wd))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:Sl,clickToUse:!1},It(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:K(n=this.on).call(n,this),off:K(i=this.off).call(i,this),emit:K(o=this.emit).call(o,this),once:K(a=this.once).call(a,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new Nl(function(){return s.body.emitter.emit("_requestRedraw")}),this.groups=new eg,this.canvas=new Fh(this.body),this.selectionHandler=new fd(this.body,this.canvas),this.interactionHandler=new Uh(this.body,this.canvas,this.selectionHandler),this.view=new Bh(this.body,this.canvas),this.renderer=new Lh(this.body,this.canvas),this.physics=new _h(this.body),this.layoutEngine=new Od(this.body),this.clustering=new Rh(this.body),this.manipulation=new Sd(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new Du(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new fh(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new Hd(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(r),this.setData(e)}wt(Wd.prototype),Wd.prototype.setOptions=function(t){var e=this;if(null===t&&(t=void 0),void 0!==t){if(!0===Mu.validate(t,Vd)&&console.error("%cErrors have been found in the supplied options object.",Tu),Oo(["locale","locales","clickToUse"],this.options,t),void 0!==t.locale&&(t.locale=function(t,e){try{var r=e.split(/[-_ /]/,2),n=Yi(r,2),i=n[0],o=n[1],a=null!=i?i.toLowerCase():null,s=null!=o?o.toUpperCase():null;if(a&&s){var l,g=a+"-"+s;if(Object.prototype.hasOwnProperty.call(t,g))return g;console.warn(ho(l="Unknown variant ".concat(s," of language ")).call(l,a,"."))}if(a){var c=a;if(Object.prototype.hasOwnProperty.call(t,c))return c;console.warn("Unknown language ".concat(a))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(t){return console.error(t),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),void 0!==t.groups&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new Ld(this,this.body.container,Gd,this.canvas.pixelRatio)),this.configurator.setOptions(t.configure)),this.configurator&&!0===this.configurator.options.enabled){var r={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Ro(r.nodes,this.nodesHandler.options),Ro(r.edges,this.edgesHandler.options),Ro(r.layout,this.layoutEngine.options),Ro(r.interaction,this.selectionHandler.options),Ro(r.interaction,this.renderer.options),Ro(r.interaction,this.interactionHandler.options),Ro(r.manipulation,this.manipulation.options),Ro(r.physics,this.physics.options),Ro(r.global,this.canvas.options),Ro(r.global,this.options),this.configurator.setModuleOptions(r)}void 0!==t.clickToUse?!0===t.clickToUse?void 0===this.activator&&(this.activator=new Ol(this.canvas.frame),this.activator.on("change",function(){e.body.emitter.emit("activate")})):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},Wd.prototype._updateVisibleIndices=function(){var t=this.body.nodes,e=this.body.edges;for(var r in this.body.nodeIndices=[],this.body.edgeIndices=[],t)Object.prototype.hasOwnProperty.call(t,r)&&(this.clustering._isClusteredNode(r)||!1!==t[r].options.hidden||this.body.nodeIndices.push(t[r].id));for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n],o=t[i.fromId],a=t[i.toId],s=void 0!==o&&void 0!==a;!this.clustering._isClusteredEdge(n)&&!1===i.options.hidden&&s&&!1===o.options.hidden&&!1===a.options.hidden&&this.body.edgeIndices.push(i.id)}},Wd.prototype.bindEventListeners=function(){var t=this;this.body.emitter.on("_dataChanged",function(){t.edgesHandler._updateState(),t.body.emitter.emit("_dataUpdated")}),this.body.emitter.on("_dataUpdated",function(){t.clustering._updateState(),t._updateVisibleIndices(),t._updateValueRange(t.body.nodes),t._updateValueRange(t.body.edges),t.body.emitter.emit("startSimulation"),t.body.emitter.emit("_requestRedraw")})},Wd.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var e=Ua(t.dot);this.setData(e)}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var r=Ha(t.gephi);this.setData(r)}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},Wd.prototype.destroy=function(){for(var t in this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images,this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(var e in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,e)&&delete this.body.edges[e];ko(this.body.container)},Wd.prototype._updateValueRange=function(t){var e,r=void 0,n=void 0,i=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var o=t[e].getValue();void 0!==o&&(r=void 0===r?o:Math.min(o,r),n=void 0===n?o:Math.max(o,n),i+=o)}if(void 0!==r&&void 0!==n)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(r,n,i)},Wd.prototype.isActive=function(){return!this.activator||this.activator.active},Wd.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},Wd.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},Wd.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},Wd.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},Wd.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},Wd.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},Wd.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},Wd.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},Wd.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},Wd.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},Wd.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)},Wd.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)},Wd.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)},Wd.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)},Wd.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)},Wd.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},Wd.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},Wd.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},Wd.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},Wd.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},Wd.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},Wd.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},Wd.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},Wd.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},Wd.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},Wd.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},Wd.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)},Wd.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},Wd.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},Wd.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},Wd.prototype.getConnectedNodes=function(t){return void 0!==this.body.nodes[t]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},Wd.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},Wd.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},Wd.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},Wd.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},Wd.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},Wd.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},Wd.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)},Wd.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)},Wd.prototype.getNodeAt=function(){var t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},Wd.prototype.getEdgeAt=function(){var t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},Wd.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},Wd.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},Wd.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.redraw()},Wd.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},Wd.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},Wd.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},Wd.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},Wd.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},Wd.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},Wd.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},Wd.prototype.getOptionsFromConfigurator=function(){var t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};var Yd=Ua;e.DataSet=Lc,e.DataView=Pc,e.Network=Wd,e.NetworkImages=Nl,e.Queue=Sc,e.data=Fc,e.networkDOTParser=Za,e.networkGephiParser=Wa,e.networkOptions=Ud,e.parseDOTNetwork=Yd,e.parseGephiNetwork=Ha,Object.defineProperty(e,"__esModule",{value:!0})}("object"==typeof r&&void 0!==e?r:(n="undefined"!=typeof globalThis?globalThis:n||self).vis=n.vis||{})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[725])(725)});
